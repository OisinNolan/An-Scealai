<div *ngIf="type=='pos'">
  <app-part-of-speech></app-part-of-speech>
</div>
<div *ngIf="type!=='pos'">
  <!--Irish Language support probably wrong(I used google translate)-->
<div>
  <div class="container">
      <div *ngIf="type=='state-exam'" class="header"> {{ts.l.sep_header}} </div>
      <div *ngIf="type=='proverb'" class="header"> {{ts.l.pp_header}} </div>
      <div *ngIf="type=='lara'" class="header"> {{ts.l.lp_header}} </div>
      <div *ngIf="type=='story'" class="header"> {{ts.l.sp_dropdown}} </div>
      <div *ngIf="type=='general'" class="header"> {{ts.l.gp_dropdown}} </div>
      <div>
          <p *ngIf="type=='state-exam'"> {{ts.l.sep_explanation}}</p>
          <p *ngIf="type=='proverb'"> {{ts.l.pp_explanation}}</p>
          <p *ngIf="type=='lara'"> {{ts.l.lp_explanation}}</p>
          <p *ngIf="type=='story'"> {{ts.l.sp_explanation}}</p>
          <p *ngIf="type=='general'"> {{ts.l.gp_explanation}}</p>
      </div>
      <!--State Exam / STORY Choose Level-->
      <div *ngIf="type=='state-exam' || type=='story'" class="button-div">
          <form [formGroup]="levelForm">
              <div class="formGroup">
                  <label class="formLabel">{{ts.l.choose_level}}</label>
                  <select formControlName="level" class="level-select">
                  <option *ngFor="let lp of levelPreferences; let i = index" [ngValue]="lp" >{{ts.l.level_preferences[i]}}</option>
                  </select>
              </div>
          </form>
      </div>
      <!--Proverb Choose Dialect-->
      <div *ngIf="type=='proverb'" class="button-div">
        <form [formGroup]="dialectForm">
            <div class="formGroup">
                <label class="formLabel">{{ts.l.choose_level}}</label>
                <select formControlName="dialect" class="level-select">
                <option *ngFor="let dp of dialectPreferences; let i = index" [ngValue]="dp" >{{proverbDialectPreferences[i]}}</option>
                </select>
            </div>
        </form>
    </div>
    <!-- Get prompt button -->
    <div class="button-div">
        <button class="button" (click)="currentPrompt(); randomPrompt(data);">{{ts.l.get_prompt}}</button>
    </div>
      <!--Prompt-->
      <div *ngIf="promptExists; else noPrompt">
          <!-- STORY Prompt Text -->
          <div *ngIf="type=='story'">
            <div *ngFor="let lp of levelPreferences;">
                <div *ngIf="levelForm.controls['level'].value === lp" class="story-prompt">
                    <!--Calling methods so it updates on form selection change(prob a bit of redundant code)-->
                    <div class="story-prompt-box">
                        <p>{{ts.l.sp_character}}</p>
                        <button class="button" (click)="change('character')">{{ts.l.sp_change}}</button>
                    </div>
                    <i class="character">{{chosenCharacter}}</i>
                    <div class="story-prompt-box">
                        <p>{{ts.l.sp_setting}}</p>
                        <button class="button" (click)="change('setting')">{{ts.l.sp_change}}</button>
                    </div>
                    <i class="setting">{{chosenSetting}}</i>
                    <div class="story-prompt-box">
                        <p>{{ts.l.sp_theme}}</p>
                        <button class="button" (click)="change('theme')">{{ts.l.sp_change}}</button>
                    </div>
                    <i class="theme">{{chosenTheme}}</i>
                    </div>
                </div>
          </div>
          <!-- Prompt text -->
          <i class="prompt">{{prompt}}</i>
          <!-- Create new story -->
          <form [formGroup]="newStoryForm">
              <!--Form input-->
              <div>
                  <div class="formGroup" novalidate>
                  <p class="formLabel">{{ts.l.pos_save_name}}</p>
                  <input
                      data-cy=title
                      type="text"
                      class="titleInput"
                      formControlName="title"
                      maxLength="35"/>
                  <!-- Select dialect -->
                  <div class="formGroup">
                      <p class="formLabel">{{ts.l.dialect}}</p>
                          <select formControlName="dialect" class="dialectSelect">
                              <option value="connemara">{{ts.l.connacht}}</option>
                              <option value="donegal">{{ts.l.ulster}}</option>
                              <option value="kerry">{{ts.l.munster}}</option>                  
                          </select>
                  </div>
                  <!--Save story button-->
                  <button data-cy=create-story
                  type="submit" 
                  (click)="addNewStory(
                            newStoryForm.controls['title'].value, 
                            newStoryForm.controls['dialect'].value, 
                            prompt)" 
                  [disabled]="newStoryForm.pristine || newStoryForm.invalid" 
                  class="button">{{ts.l.pos_save_to_stories}}</button>
              </div>
              <!-- check for invalid title -->
              <div *ngIf="newStoryForm.controls['title'].invalid && 
              (newStoryForm.controls['title'].dirty || newStoryForm.controls['title'].touched)" 
              class="validationAlert">
                  <div *ngIf="newStoryForm.controls['title'].errors.required">
                      *{{ts.l.title_required}}.
                  </div>
              </div>
              </div>
            </form>
      </div>
      <!--No Prompt-->
      <ng-template #noPrompt>
          <div *ngIf="promptExists === false" class="prompt">
              {{ts.l.please_choose_prompt}}
          </div>
      </ng-template>
  </div>
</div>

</div>

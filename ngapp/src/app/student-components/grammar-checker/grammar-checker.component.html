<div
    [hidden]="hideEntireGrammarChecker"
    style="resize: vertical; padding-bottom: 10px; padding-left: 10px; padding-right: 10px;">
  <div class="feedbackHeader">
    <div>{{ts.l.grammar_checker}} </div>
    <div
        class="closeFeedbackBtn"
        (click)="hideEntireGrammarChecker = true;">
      <i class="fa fa-times optionsBtnIcon"></i>
    </div>
  </div>

  <div class="textFieldContainer"  *ngIf="!grammarChecked && grammarLoading">
    <div class="textContainer">
      <div class="loaderContainer">
        <b>{{ts.l.correcting_grammar}}</b>
        <div class="lds-grid">
          <div></div> <div></div> <div></div>
          <div></div> <div></div> <div></div>
          <div></div> <div></div> <div></div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- display story container after grammar checked -->
  <div class="textFieldContainer" *ngIf="grammarChecked">
    <!-- display chosen tag window -->
    <div class="grammarMessageContainer {{grammarMessageClass ? grammarMessageClass : ts.l.loading}}">
      <!-- GRAMADOIR IRISH -->
      <span *ngIf="chosenTag && chosenTag.type === 'gramadoir' && ts.l.iso_code === 'ga'">
        {{chosenTag?.messageIrish}}
      </span>
      <!-- GRAMADOIR ENGLISH -->
      <span *ngIf="chosenTag && chosenTag.type === 'gramadoir' && ts.l.iso_code === 'en'">
        {{chosenTag?.messageEnglish}}
      </span>
      <!-- VOWEL AGREEMENT ENGLISH OR IRISH -->
      <span *ngIf="chosenTag && chosenTag.type === 'vowelAgreement'">
        {{ ts.l[chosenTag.message] ? ts.l[chosenTag.message] : chosenTag.message }}
      </span>
      <!-- PLACEHOLDER -->
      <span *ngIf="!chosenTag" class="grammarMessagePlaceholder">
        {{ts.l.choose_an_error}}
      </span>
    </div>

    <div class="grammarToolbar">
      <div>
        <i class="fa fa-redo-alt refreshGrammar"
           (click)="runGramadoir()">
        </i>
      </div>
      <div class="selectGrammarFilter">
        <select (change)="onChangeGrammarFilter($event.target.value)">
          <option value="gramadoir">{{ts.l.gramadoir}}</option>
          <option value="vowel">{{ts.l.broad_slender}}</option>
        </select>
      </div>
    </div>

    <!-- display grammar error filter options -->
    <div class="selectErrorCheckbox" *ngIf="grammarSelected">
      <div *ngFor="let recipient of filteredTags | keyvalue">
        <div style="margin:2px;" >
          <input
              [ngModel]="checkBox.get(recipient.key)"
              (ngModelChange)="checkBox.set(recipient.key, $event)"
              type="checkbox">
          {{recipient.key | lowercase}} ({{recipient.value.length}})
        </div> 
      </div>
    </div>

    <!-- display the story with error highlighting-->
    <div mwlTextInputHighlightContainer>
      <textarea
          style="color: black;"
          mwlTextInputElement
          readonly
          style="width: 100%; height: 42vh;"
          [(ngModel)]="checkedText"
          #inputTextarea ></textarea>

      <!-- an gramadoir -->
      <div *ngIf="grammarSelected">
        <mwl-text-input-highlight
            [tags]="getSelectedTags()"
            [textInputElement]="inputTextarea"
            (tagClick)="chooseGrammarTag($event.tag)"
            (tagMouseEnter)="addTagHoverClass($event.target)"
            (tagMouseLeave)="removeTagHoverClass($event.target)">
        </mwl-text-input-highlight>
      </div>
      <!-- an gramadoir -->
      <div *ngIf="!grammarSelected">
        <mwl-text-input-highlight
            [tags]="tags"
            [textInputElement]="inputTextarea"
            (tagClick)="chooseGrammarTag($event.tag)"
            (tagMouseEnter)="addTagHoverClass($event.target)"
            (tagMouseLeave)="removeTagHoverClass($event.target)">
        </mwl-text-input-highlight>
      </div>
    </div>
  </div>
</div>

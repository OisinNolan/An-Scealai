(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[992],{8992:(p,h,n)=>{"use strict";n.r(h),n.d(h,{StudentModule:()=>mn});var s=n(6895),o=n(1390),i=n(970),l=n(4633),f=n(8977),t=n(4650),r=n(5412);let a=(()=>{class d{canDeactivate(e,c,u){return!!e.storySaved||(e.showModal(),e.modalChoice)}}return d.\u0275fac=function(e){return new(e||d)},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})(),x=(()=>{class d{constructor(e,c){this.dialog=e,this.ts=c}canDeactivate(e){if(e.recordingSaved)return!0;let c;return c=this.dialog.open(l.p,{data:{title:this.ts.l.save_changes_made_to_this_recording,type:"",confirmText:this.ts.l.save,cancelText:this.ts.l.cancel},width:"30vh"}),c.afterClosed().subscribe(u=>{if(c=void 0,u)return e.saveRecordings(),!0}),!1}}return d.\u0275fac=function(e){return new(e||d)(t.LFG(r.uw),t.LFG(f.D))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})(),g=(()=>{class d{canDeactivate(e,c,u){if(e.chosenSections)for(const w of e.chosenSections)w.stop();return!0}}return d.\u0275fac=function(e){return new(e||d)},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();var v=n(5861),b=n(4412);class _ extends b.i{constructor(){super(...arguments),this.createdWithPrompts=!1}}var m=n(1765),C=n(1745),M=n(1512),A=n(6469),k=n(4687),S=n(1245),T=n(25),E=n(5042),N=n(530),U=n(8443);let Z=(()=>{class d{transform(e,c){return e?c?(c=c.toLocaleLowerCase(),e.filter(u=>u instanceof U.n?u.username.toLocaleLowerCase().includes(c):u instanceof _?u.title.toLocaleLowerCase().includes(c)||u.text.toLocaleLowerCase().includes(c):void 0)):e:[]}}return d.\u0275fac=function(e){return new(e||d)},d.\u0275pipe=t.Yjl({name:"appFilter",type:d,pure:!0}),d})();var F=n(3905),B=n(4006),J=n(9121);function I(d,y){1&d&&(t.TgZ(0,"div",17),t._UZ(1,"grid-spinner"),t.qZA())}function V(d,y){if(1&d&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&d){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.click_new_story," ")}}function st(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"input",23),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().$implicit,w=t.oxw();return t.KtG(w.toggleDelete(u._id))}),t.qZA()}}function gt(d,y){if(1&d&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&d){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.lastUpdated,"M/d/yy, h:mm a"))}}function wt(d,y){if(1&d&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&d){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.lastUpdated,"d/M/yy, h:mm a"))}}const Ct=function(d){return["../dashboard",d]};function St(d,y){if(1&d&&(t.TgZ(0,"div")(1,"div",18)(2,"div",19),t.YNc(3,st,1,0,"input",20),t.TgZ(4,"div",21),t._uU(5),t.qZA()(),t.YNc(6,gt,3,4,"div",22),t.YNc(7,wt,3,4,"div",22),t.qZA(),t._UZ(8,"hr"),t.qZA()),2&d){const e=y.$implicit,c=t.oxw();t.xp6(3),t.Q6J("ngIf",c.deleteMode),t.xp6(1),t.Q6J("searchedWord",c.searchText)("content",e.title)("classToApply","font-weight-bold")("setTitle","true")("routerLink",t.VKq(9,Ct,e._id)),t.xp6(1),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf",c.isFromAmerica),t.xp6(1),t.Q6J("ngIf",!c.isFromAmerica)}}function ht(d,y){if(1&d&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&d){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.unreadMessages," ")}}function Mt(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.goToMessages())}),t._uU(1),t.YNc(2,ht,2,1,"span",26),t.qZA()}if(2&d){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.messages," "),t.xp6(1),t.Q6J("ngIf",e.unreadMessages>0)}}function Tt(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.goToStats())}),t._uU(1),t.qZA()}if(2&d){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.stats," ")}}let At=(()=>{class d{constructor(e,c,u,w,O,H,j,z,P,nt,ct){this.storyService=e,this.auth=c,this.engagement=u,this.ts=w,this.router=O,this.messageService=H,this.profileService=j,this.classroomService=z,this.notificationService=P,this.recordingService=nt,this.dialog=ct,this.stories=[],this.toBeDeleted=[],this.userId="",this.messagesForNotifications=[],this.unreadMessages=0,this.isFromAmerica=!1,this.isEnrolled=!1,this.searchText="",this.storiesLoaded=!1}ngOnInit(){var e=this;return(0,v.Z)(function*(){const c=e.auth.getUserDetails();c?(e.stories=(yield(0,F.z)(e.storyService.getStoriesForLoggedInUser())).map(u=>(new _).fromJSON(u)),e.stories.sort((u,w)=>u.date>w.date?-1:1),e.storiesLoaded=!0,e.userId=c._id,e.deleteMode=!1,e.toBeDeleted=[],e.notificationService.getStudentNotifications(),e.classroomService.getClassroomOfStudent(e.userId).subscribe(u=>{e.isEnrolled=null!=u}),e.messageService.getMessagesForLoggedInUser().subscribe(u=>{e.messagesForNotifications=u,e.unreadMessages=e.messageService.getNumberOfUnreadMessages(e.messagesForNotifications)}),e.profileService.getForUser(e.userId).subscribe(u=>{let O=u.profile.country;e.isFromAmerica="United States of America"==O||"America"==O||"USA"==O||"United States"==O},u=>{e.router.navigateByUrl("/register-profile")})):e.auth.logout()})()}toggleDeleteMode(){if(this.deleteMode&&this.toBeDeleted.length>0)for(let e of this.toBeDeleted)this.engagement.addEventForLoggedInUser(M.tw["DELETE-STORY"],{_id:e}),this.recordingService.deleteStoryRecordingAudio(e).subscribe(c=>{}),this.recordingService.deleteStoryRecording(e).subscribe(c=>{}),this.storyService.deleteStory(e).subscribe(c=>{this.ngOnInit()});else this.deleteMode=!this.deleteMode||0!==this.toBeDeleted.length}toggleEditMode(){this.editMode=!this.editMode}toggleDelete(e){if(this.toBeDeleted.includes(e)){var c=this.toBeDeleted.indexOf(e);this.toBeDeleted.splice(c,1)}else this.toBeDeleted.push(e)}goToMessages(){this.router.navigateByUrl("/messages/"+this.userId)}goToStats(){this.router.navigateByUrl("/stats-dashboard/"+this.userId)}createNewStory(){var e=this;this.dialogRef=this.dialog.open(l.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var c=(0,v.Z)(function*(u){if(e.dialogRef=void 0,u)if(u[0]){let w="connemara";u[1]==e.ts.l.munster&&(w="kerry"),u[1]==e.ts.l.ulster&&(w="donegal"),e.storyService.saveStory(e.auth.getUserDetails()._id,u[0],new Date,w,"",e.auth.getUserDetails().username,!1)}else alert(e.ts.l.title_required)});return function(u){return c.apply(this,arguments)}}())}}return d.\u0275fac=function(e){return new(e||d)(t.Y36(m.N),t.Y36(C.$),t.Y36(A.M),t.Y36(f.D),t.Y36(o.F0),t.Y36(S.e),t.Y36(k.H),t.Y36(T.u),t.Y36(E.g),t.Y36(N.s),t.Y36(r.uw))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-book-contents"]],features:[t._Bn([Z])],decls:27,vars:17,consts:[[1,"bookContainer"],[1,"contentsContainer"],[1,"bookContentsTitle"],[1,"contentsTitleContainer"],[1,"contentsLinkTitle"],[1,"contentsDateTitle"],["role","main"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"contentsLinkContainer"],["class","newStoryMessage",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"contentsBtnsContainer"],[1,"btn","deleteBtn",3,"click"],["src","assets/img/trash.ico",1,"trashImg"],["class","btn messagesBtn",3,"click",4,"ngIf"],["data-cy","create-story",1,"btn","newStoryBtn",3,"click"],[1,"newStoryMessage"],[1,"contentSection"],[1,"contentsLink"],["type","checkbox","class","deleteCheckbox",3,"click",4,"ngIf"],["appHighlight","",3,"searchedWord","content","classToApply","setTitle","routerLink"],["class","contentsDate",4,"ngIf"],["type","checkbox",1,"deleteCheckbox",3,"click"],[1,"contentsDate"],[1,"btn","messagesBtn",3,"click"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"]],template:function(e,c){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",6)(10,"div")(11,"div",7)(12,"input",8),t.NdJ("ngModelChange",function(w){return c.searchText=w}),t.qZA()()()(),t.TgZ(13,"div",9)(14,"div"),t._uU(15),t.qZA(),t.YNc(16,I,2,0,"div",10),t.YNc(17,V,2,1,"div",10),t.YNc(18,St,9,11,"div",11),t.ALo(19,"appFilter"),t.qZA(),t.TgZ(20,"div",12)(21,"button",13),t.NdJ("click",function(){return c.toggleDeleteMode()}),t._UZ(22,"img",14),t.qZA(),t.YNc(23,Mt,3,2,"button",15),t.YNc(24,Tt,2,1,"button",15),t.TgZ(25,"button",16),t.NdJ("click",function(){return c.createNewStory()}),t._uU(26),t.qZA()()()()),2&e&&(t.xp6(3),t.Oqu(c.ts.l.my_stories),t.xp6(3),t.Oqu(c.ts.l.title),t.xp6(2),t.Oqu(c.ts.l.last_updated),t.xp6(4),t.s9C("placeholder",c.ts.l.search_story_title_or_content),t.Q6J("ngModel",c.searchText),t.xp6(3),t.hij(" ",c.ts.l.loading," "),t.xp6(1),t.Q6J("ngIf",!c.storiesLoaded),t.xp6(1),t.Q6J("ngIf",0===c.stories.length&&c.storiesLoaded),t.xp6(1),t.Q6J("ngForOf",t.xi3(19,14,c.stories,c.searchText)),t.xp6(3),t.ekj("deleteModeBtn",c.deleteMode),t.xp6(2),t.Q6J("ngIf",c.isEnrolled),t.xp6(1),t.Q6J("ngIf",c.stories.length>0),t.xp6(2),t.hij("",c.ts.l.new_story," "))},dependencies:[s.sg,s.O5,o.rH,B.Fj,B.JJ,B.On,J.P,s.uU,Z],styles:[".bookContainer[_ngcontent-%COMP%]{height:auto;width:80%;background:url(https://www.abair.ie/scealai/assets/img/paperBg.jpg) no-repeat center fixed;margin-left:10%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.contentsContainer[_ngcontent-%COMP%]{padding:20px}.bookContentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);padding-left:5%;padding-right:5%;display:inline-block;font-size:18pt}.contentsLinkContainer[_ngcontent-%COMP%]{height:500px;overflow:auto;padding:10px;background-color:#f7f2e7;box-shadow:inset 0 0 12px #00000080;border-radius:5px}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.contentsDate[_ngcontent-%COMP%]{color:var(--dark-text)}.contentsBtnsContainer[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:1rem}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;padding:2px 7px 7px;height:38px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:24px}.messagesBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;border-radius:5px;display:flex}.messagesBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.newStoryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.newStoryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}@media only screen and (max-width: 700px){.contentsContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%}.contentsLinkContainer[_ngcontent-%COMP%]{height:270px;padding-top:10px}.contentsLinkTitle[_ngcontent-%COMP%], .contentsDateTitle[_ngcontent-%COMP%]{font-size:12pt}.optionsPopupBtn[_ngcontent-%COMP%]{padding:2px 5px 5px;margin:0 4px 0 0;height:30px;font-size:12pt}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:0 3px 3px;height:30px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:20px}}.newStoryMessage[_ngcontent-%COMP%]{color:#a79d88;width:80%;margin-left:10%;margin-top:30px}@media only screen and (min-width: 700px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}@media only screen and (min-width: 1400px) and (min-height: 800px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}"]}),d})();var K=n(7579),kt=n(9971),Ot=n.n(kt),Pt=n(5439),It=n.n(Pt),Dt=n(1094),Bt=n.n(Dt),mt=n(4186),Ft=n(5592),vt=n(529),tt=n(8605),_t=n(3238),lt=n(2687),R=n(445),$=n(1281),D=n(9521),rt=n(3353),it=n(4968),Rt=n(6451),Q=n(9300),q=n(4004),L=n(9718),Y=n(2722),dt=n(1884),bt=n(5698),ut=n(8675),ot=n(8372),G=n(7340);const pt=["*"],Et=["content"];function yt(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u._onBackdropClicked())}),t.qZA()}if(2&d){const e=t.oxw();t.ekj("mat-drawer-shown",e._isShowingBackdrop())}}function X(d,y){1&d&&(t.TgZ(0,"mat-drawer-content"),t.Hsn(1,2),t.qZA())}const et=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],zt=["mat-drawer","mat-drawer-content","*"],Qt={transformDrawer:(0,G.X$)("transform",[(0,G.SB)("open, open-instant",(0,G.oB)({transform:"none",visibility:"visible"})),(0,G.SB)("void",(0,G.oB)({"box-shadow":"none",visibility:"hidden"})),(0,G.eR)("void => open-instant",(0,G.jt)("0ms")),(0,G.eR)("void <=> open, open-instant => void",(0,G.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},qt=new t.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Wt(){return!1}}),Ht=new t.OlP("MAT_DRAWER_CONTAINER");let Zt=(()=>{class d extends tt.PQ{constructor(e,c,u,w,O){super(u,w,O),this._changeDetectorRef=e,this._container=c}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return d.\u0275fac=function(e){return new(e||d)(t.Y36(t.sBO),t.Y36((0,t.Gpc)(()=>jt)),t.Y36(t.SBq),t.Y36(tt.mF),t.Y36(t.R0b))},d.\u0275cmp=t.Xpm({type:d,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,c){2&e&&t.Udp("margin-left",c._container._contentMargins.left,"px")("margin-right",c._container._contentMargins.right,"px")},features:[t._Bn([{provide:tt.PQ,useExisting:d}]),t.qOj],ngContentSelectors:pt,decls:1,vars:0,template:function(e,c){1&e&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),d})(),Nt=(()=>{class d{constructor(e,c,u,w,O,H,j,z){this._elementRef=e,this._focusTrapFactory=c,this._focusMonitor=u,this._platform=w,this._ngZone=O,this._interactivityChecker=H,this._doc=j,this._container=z,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new K.x,this._animationEnd=new K.x,this._animationState="void",this.openedChange=new t.vpe(!0),this._openedStream=this.openedChange.pipe((0,Q.h)(P=>P),(0,q.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,Q.h)(P=>P.fromState!==P.toState&&0===P.toState.indexOf("open")),(0,L.h)(void 0)),this._closedStream=this.openedChange.pipe((0,Q.h)(P=>!P),(0,q.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,Q.h)(P=>P.fromState!==P.toState&&"void"===P.toState),(0,L.h)(void 0)),this._destroyed=new K.x,this.onPositionChanged=new t.vpe,this._modeChanged=new K.x,this.openedChange.subscribe(P=>{P?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,it.R)(this._elementRef.nativeElement,"keydown").pipe((0,Q.h)(P=>P.keyCode===D.hY&&!this.disableClose&&!(0,D.Vb)(P)),(0,Y.R)(this._destroyed)).subscribe(P=>this._ngZone.run(()=>{this.close(),P.stopPropagation(),P.preventDefault()}))}),this._animationEnd.pipe((0,dt.x)((P,nt)=>P.fromState===nt.fromState&&P.toState===nt.toState)).subscribe(P=>{const{fromState:nt,toState:ct}=P;(0===ct.indexOf("open")&&"void"===nt||"void"===ct&&0===nt.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=(0,$.Ig)(e)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=(0,$.Ig)(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle((0,$.Ig)(e))}_forceFocus(e,c){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const u=()=>{e.removeEventListener("blur",u),e.removeEventListener("mousedown",u),e.removeAttribute("tabindex")};e.addEventListener("blur",u),e.addEventListener("mousedown",u)})),e.focus(c)}_focusByCssSelector(e,c){let u=this._elementRef.nativeElement.querySelector(e);u&&this._forceFocus(u,c)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(c=>{!c&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,c){e&&c&&(this._openedVia=c);const u=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),u}_setOpen(e,c,u){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",c&&this._restoreFocus(u)),this._updateFocusTrapState(),new Promise(w=>{this.openedChange.pipe((0,bt.q)(1)).subscribe(O=>w(O?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(e){const c=this._elementRef.nativeElement,u=c.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),u.insertBefore(this._anchor,c)),u.appendChild(c)):this._anchor&&this._anchor.parentNode.insertBefore(c,this._anchor)}}return d.\u0275fac=function(e){return new(e||d)(t.Y36(t.SBq),t.Y36(lt.qV),t.Y36(lt.tE),t.Y36(rt.t4),t.Y36(t.R0b),t.Y36(lt.ic),t.Y36(s.K0,8),t.Y36(Ht,8))},d.\u0275cmp=t.Xpm({type:d,selectors:[["mat-drawer"]],viewQuery:function(e,c){if(1&e&&t.Gf(Et,5),2&e){let u;t.iGM(u=t.CRH())&&(c._content=u.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,c){1&e&&t.WFA("@transform.start",function(w){return c._animationStarted.next(w)})("@transform.done",function(w){return c._animationEnd.next(w)}),2&e&&(t.uIk("align",null),t.d8E("@transform",c._animationState),t.ekj("mat-drawer-end","end"===c.position)("mat-drawer-over","over"===c.mode)("mat-drawer-push","push"===c.mode)("mat-drawer-side","side"===c.mode)("mat-drawer-opened",c.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:pt,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,c){1&e&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA())},dependencies:[tt.PQ],encapsulation:2,data:{animation:[Qt.transformDrawer]},changeDetection:0}),d})(),jt=(()=>{class d{constructor(e,c,u,w,O,H=!1,j){this._dir=e,this._element=c,this._ngZone=u,this._changeDetectorRef=w,this._animationMode=j,this._drawers=new t.n_E,this.backdropClick=new t.vpe,this._destroyed=new K.x,this._doCheckSubject=new K.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new K.x,e&&e.change.pipe((0,Y.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),O.change().pipe((0,Y.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=H}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=(0,$.Ig)(e)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(e){this._backdropOverride=null==e?null:(0,$.Ig)(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,ut.O)(this._allDrawers),(0,Y.R)(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(c=>!c._container||c._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,ut.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,ot.b)(10),(0,Y.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,c=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const u=this._left._getWidth();e+=u,c-=u}if(this._right&&this._right.opened)if("side"==this._right.mode)c+=this._right._getWidth();else if("push"==this._right.mode){const u=this._right._getWidth();c+=u,e-=u}e=e||null,c=c||null,(e!==this._contentMargins.left||c!==this._contentMargins.right)&&(this._contentMargins={left:e,right:c},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe((0,Q.h)(c=>c.fromState!==c.toState),(0,Y.R)(this._drawers.changes)).subscribe(c=>{"open-instant"!==c.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe((0,Y.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe((0,Y.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,bt.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe((0,Y.R)((0,Rt.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const c=this._element.nativeElement.classList,u="mat-drawer-container-has-open";e?c.add(u):c.remove(u)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return d.\u0275fac=function(e){return new(e||d)(t.Y36(R.Is,8),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(tt.rL),t.Y36(qt),t.Y36(t.QbO,8))},d.\u0275cmp=t.Xpm({type:d,selectors:[["mat-drawer-container"]],contentQueries:function(e,c,u){if(1&e&&(t.Suo(u,Zt,5),t.Suo(u,Nt,5)),2&e){let w;t.iGM(w=t.CRH())&&(c._content=w.first),t.iGM(w=t.CRH())&&(c._allDrawers=w)}},viewQuery:function(e,c){if(1&e&&t.Gf(Zt,5),2&e){let u;t.iGM(u=t.CRH())&&(c._userContent=u.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,c){2&e&&t.ekj("mat-drawer-container-explicit-backdrop",c._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[t._Bn([{provide:Ht,useExisting:d}])],ngContentSelectors:zt,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,c){1&e&&(t.F$t(et),t.YNc(0,yt,1,2,"div",0),t.Hsn(1),t.Hsn(2,1),t.YNc(3,X,2,0,"mat-drawer-content",1)),2&e&&(t.Q6J("ngIf",c.hasBackdrop),t.xp6(3),t.Q6J("ngIf",!c._content))},dependencies:[s.O5,Zt],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),d})(),Vt=(()=>{class d{}return d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[s.ez,_t.BQ,tt.ZD,tt.ZD,_t.BQ]}),d})();var xt=n(7392),Yt=n(5802),Jt=n(4859);function Kt(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(){const w=t.CHM(e).$implicit,O=t.oxw();return t.KtG(O.setStory(w))}),t.TgZ(1,"div",4)(2,"div",5)(3,"div"),t._uU(4),t.qZA()(),t.TgZ(5,"div",6),t._uU(6),t.ALo(7,"date"),t.qZA()(),t._UZ(8,"hr"),t.qZA()}if(2&d){const e=y.$implicit;t.xp6(1),t.uIk("id",e._id),t.xp6(3),t.Oqu(null==e?null:e.title),t.xp6(2),t.hij(" ",t.xi3(7,3,e.lastUpdated,"d/M/yy")," ")}}let $t=(()=>{class d{constructor(e,c,u,w){this.ts=e,this.auth=c,this.storyService=u,this.dialog=w,this.stories=[],this.lastClickedStoryId="",this.storyEmitter=new t.vpe,this.storiesLoadedEmitter=new t.vpe}ngOnInit(){this.getStories()}getStories(){var e=this;return(0,v.Z)(function*(){e.stories=(yield(0,F.z)(e.storyService.getStoriesForLoggedInUser())).map(c=>(new _).fromJSON(c)),e.stories.sort((c,u)=>c.date>u.date?-1:1),e.storyEmitter.emit(e.stories[0]),e.storiesLoadedEmitter.emit(!0)})()}setStory(e){null==e.htmlText&&(e.htmlText=e.text),this.storyEmitter.emit(e);let c=e._id,u=document.getElementById(c);u&&(this.lastClickedStoryId&&document.getElementById(this.lastClickedStoryId).classList.remove("clickedresultCard"),this.lastClickedStoryId=c,u.classList.add("clickedresultCard"))}createNewStory(){var e=this;this.dialogRef=this.dialog.open(l.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var c=(0,v.Z)(function*(u){if(e.dialogRef=void 0,u)if(u[0]){let w="connemara";u[1]==e.ts.l.munster&&(w="kerry"),u[1]==e.ts.l.ulster&&(w="donegal"),e.storyService.saveStory(e.auth.getUserDetails()._id,u[0],new Date,w,"",e.auth.getUserDetails().username,!1).subscribe({next:()=>{e.getStories()},error:()=>{alert("Not able to create a new story")}})}else alert(e.ts.l.title_required)});return function(u){return c.apply(this,arguments)}}())}}return d.\u0275fac=function(e){return new(e||d)(t.Y36(f.D),t.Y36(C.$),t.Y36(m.N),t.Y36(r.uw))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-story-drawer"]],outputs:{storyEmitter:"storyEmitter",storiesLoadedEmitter:"storiesLoadedEmitter"},decls:5,vars:1,consts:[[1,"storyList"],[3,"click",4,"ngFor","ngForOf"],["mat-fab","",1,"newStoryButton",3,"click"],[3,"click"],[1,"contentSection"],[1,"contentsLink"],[1,"contentsDate"]],template:function(e,c){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Kt,9,6,"div",1),t.qZA(),t.TgZ(2,"button",2),t.NdJ("click",function(){return c.createNewStory()}),t.TgZ(3,"mat-icon"),t._uU(4,"add"),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngForOf",c.stories))},dependencies:[s.sg,Jt.lW,xt.Hw,s.uU],styles:[".storyList[_ngcontent-%COMP%]{height:90%;overflow-y:scroll}.newStoryButton[_ngcontent-%COMP%]{float:right}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%]{background-color:var(--scealai-green)}.contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;text-decoration:none;padding-right:20px}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.contentsDate[_ngcontent-%COMP%]{padding-right:20px}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:2px;font-weight:bolder;border-radius:10px}"]}),d})();var Ut=n(1481);function Xt(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",10)(1,"label",11),t._uU(2),t.qZA(),t.TgZ(3,"input",12),t.NdJ("ngModelChange",function(u){t.CHM(e);const w=t.oxw();return t.KtG(w.wordLookedUp=u)})("keyup.enter",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.lookupWord())})("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.clearDictInput())}),t.qZA(),t.TgZ(4,"button",13),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.lookupWord())}),t._UZ(5,"i",14),t.qZA()()}if(2&d){const e=t.oxw();t.xp6(2),t.hij("",e.ts.l.search,":"),t.xp6(1),t.Q6J("ngModel",e.wordLookedUp)}}function te(d,y){if(1&d&&t._UZ(0,"iframe",15),2&d){const e=t.oxw();t.Q6J("src",e.defaultDictIframeText,t.uOi)}}function ee(d,y){1&d&&(t.TgZ(0,"div",16)(1,"ul")(2,"li")(3,"a",17),t._uU(4,"potafocal.com"),t.qZA()(),t.TgZ(5,"li")(6,"a",18),t._uU(7,"focloir.ie"),t.qZA()()()())}let ne=(()=>{class d{constructor(e,c,u,w){this.ts=e,this.sanitizer=c,this.http=u,this.engagement=w,this.wordLookedUp="",this.selectTeanglann=!0,this.selectExternalLinks=!1,this.defaultDictIframeText=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/html;charset=utf-8,"+this.ts.l.search_for_words_in_dictionary),this.closeDictionaryEmitter=new t.vpe}ngOnInit(){}lookupWord(){var e=this;return(0,v.Z)(function*(){if(e.wordLookedUp){const c=e.http.post(mt.Z.baseurl+"proxy/",{url:`https://www.teanglann.ie/en/fgb/${e.wordLookedUp}`}),u=yield(0,F.z)(c),w=(new DOMParser).parseFromString(u,"text/html");w.querySelectorAll(".ex > .head > a").forEach(P=>P.href=`https://www.teanglann.ie${P.href.slice(P.href.lastIndexOf("/en/"))}`),w.querySelector(".moar")?.remove();const j=w.querySelector(".listings");j.style.cssText+="margin-right: 0px; padding: 10px;",document.getElementById("dictiframe").src='data:text/html;charset=utf-8,<link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/template.css"><link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/fgb.css">'+j.outerHTML,e.engagement.addEventForLoggedInUser(M.tw["USE-DICTIONARY"],null,e.wordLookedUp)}else alert(e.ts.l.enter_a_word_to_lookup)})()}clearDictInput(){this.wordLookedUp&&(this.wordLookedUp="")}}return d.\u0275fac=function(e){return new(e||d)(t.Y36(f.D),t.Y36(Ut.H7),t.Y36(vt.eN),t.Y36(A.M))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-dictionary-drawer"]],outputs:{closeDictionaryEmitter:"closeDictionaryEmitter"},decls:16,vars:5,consts:[[1,"dictionaryContainer"],[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"dictionarySubHeader"],[1,"dictionaryName",3,"click"],["class","dictionaryInput",4,"ngIf"],[2,"height","100%"],["class","dictionaryIframe","id","dictiframe",3,"src",4,"ngIf"],["class","dictionaryIframe","style","text-align: left",4,"ngIf"],[1,"dictionaryInput"],["for","dictlookup"],["type","text","id","dictlookup","name","dictlookup","autofocus","",3,"ngModel","ngModelChange","keyup.enter","click"],[1,"searchDictionaryBtn",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["id","dictiframe",1,"dictionaryIframe",3,"src"],[1,"dictionaryIframe",2,"text-align","left"],["href","http://www.potafocal.com/beo/","target","_blank"],["href","https://www.focloir.ie","target","_blank"]],template:function(e,c){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3),t.qZA(),t.TgZ(4,"div",2),t.NdJ("click",function(){return c.closeDictionaryEmitter.next(!0)}),t._UZ(5,"i",3),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5),t.NdJ("click",function(){return c.selectTeanglann=!0,c.selectExternalLinks=!1}),t._uU(8," Teanglann "),t.qZA(),t._uU(9," | "),t.TgZ(10,"div",5),t.NdJ("click",function(){return c.selectExternalLinks=!0,c.selectTeanglann=!1}),t._uU(11),t.qZA()(),t.YNc(12,Xt,6,2,"div",6),t.TgZ(13,"div",7),t.YNc(14,te,1,1,"iframe",8),t.qZA(),t.YNc(15,ee,8,0,"div",9),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",c.ts.l.dictionary," "),t.xp6(8),t.hij(" ",c.ts.l.external_links," "),t.xp6(1),t.Q6J("ngIf",c.selectTeanglann),t.xp6(2),t.Q6J("ngIf",c.selectTeanglann),t.xp6(1),t.Q6J("ngIf",c.selectExternalLinks))},dependencies:[s.O5,B.Fj,B.JJ,B.On],styles:[".dictionaryContainer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:wrap}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.dictionarySubHeader[_ngcontent-%COMP%]{padding-left:10px;padding-bottom:5px;background-color:var(--scealai-green);color:#fff;display:flex}.dictionaryName[_ngcontent-%COMP%]{background-color:var(--scealai-green);font-size:12px;color:#fff;padding-right:5px;padding-top:5px}.dictionaryName[_ngcontent-%COMP%]:hover{color:var(--scealai-light-green);text-decoration:none;cursor:pointer}.dictionaryInput[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;display:flex;padding-bottom:10px;padding-left:10px;gap:1rem}.searchDictionaryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.searchDictionaryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.dictionaryIframe[_ngcontent-%COMP%]{width:100%;border-radius:0 0 5px 5px}"]}),d})();function re(d,y){1&d&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function ie(d,y){if(1&d&&(t.TgZ(0,"span",20),t._uU(1),t.qZA()),2&d){const e=t.oxw(2);t.xp6(1),t.Oqu(e.ts.l.made_using_prompts)}}function oe(d,y){if(1&d&&(t.TgZ(0,"div",21),t._uU(1),t._UZ(2,"i",22),t.qZA()),2&d){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.saved," ")}}function ae(d,y){if(1&d&&(t.TgZ(0,"div",21),t._uU(1),t._UZ(2,"i",23),t.qZA()),2&d){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.saving," ")}}function se(d,y){if(1&d&&(t.TgZ(0,"div",14)(1,"div",15),t._uU(2),t.YNc(3,re,2,0,"span",16),t.YNc(4,ie,2,1,"span",17),t.qZA(),t.TgZ(5,"div",18),t.YNc(6,oe,3,1,"div",19),t.YNc(7,ae,3,1,"div",19),t.qZA()()),2&d){const e=t.oxw();let c;t.xp6(1),t.Q6J("ngStyle",e.titleStyle()),t.xp6(1),t.hij(" ",null!==(c=null==e.story?null:e.story.title)&&void 0!==c?c:"..."," "),t.xp6(1),t.Q6J("ngIf",!e.storySaved),t.xp6(1),t.Q6J("ngIf",null==e.story?null:e.story.createdWithPrompts),t.xp6(2),t.Q6J("ngIf",e.storySaved),t.xp6(1),t.Q6J("ngIf",!e.storySaved)}}function ce(d,y){1&d&&t._UZ(0,"i",32)}function de(d,y){1&d&&t._UZ(0,"i",33)}function le(d,y){1&d&&(t.TgZ(0,"span",37),t._uU(1,"speech_to_text"),t.qZA())}function ue(d,y){1&d&&(t.TgZ(0,"button",38),t._UZ(1,"i",39),t.qZA())}function pe(d,y){1&d&&(t.TgZ(0,"div"),t._UZ(1,"div",40),t.qZA())}const fe=function(d){return{disableDiv:d}};function ge(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",34),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.speakStory())}),t._uU(1),t.YNc(2,le,2,0,"span",35),t.YNc(3,ue,2,0,"button",36),t.YNc(4,pe,2,0,"div",16),t.qZA()}if(2&d){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(5,fe,e.isTranscribing)),t.xp6(1),t.hij(" ",e.ts.l.speak," "),t.xp6(1),t.Q6J("ngIf",!e.isRecording),t.xp6(1),t.Q6J("ngIf",e.isRecording&&!e.isTranscribing),t.xp6(1),t.Q6J("ngIf",e.isTranscribing)}}function he(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",41),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return t.KtG(u.dontToggle=!0)}),t.TgZ(1,"button",42),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return t.KtG(u.downloadStory())}),t._uU(2),t._UZ(3,"i",43),t.qZA()()}if(2&d){const e=t.oxw(2);t.xp6(1),t.s9C("href",e.downloadStoryUrl()),t.xp6(1),t.hij(" ",e.ts.l.download," ")}}function me(d,y){1&d&&(t.TgZ(0,"span",47),t._uU(1,"1"),t.qZA())}function ve(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",44),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.getFeedback())}),t._uU(1),t._UZ(2,"i",45),t.YNc(3,me,2,0,"span",46),t.qZA()}if(2&d){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.feedback," "),t.xp6(2),t.Q6J("ngIf",e.hasNewFeedback())}}function _e(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",44),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2),w=t.MAs(12);return u.dontToggle=!0,u.dictionaryVisible=!u.dictionaryVisible,t.KtG(w.toggle())}),t._uU(1),t._UZ(2,"i",48),t.qZA()}if(2&d){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.dictionary," ")}}function be(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",44),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return u.dontToggle=!0,u.goToSynthesis(),t.KtG(u.drawer2.toggle())}),t._uU(1),t._UZ(2,"i",49),t.qZA()}if(2&d){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.audio_check," ")}}function ye(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",44),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.toggleGrammarTags())}),t._uU(1),t._UZ(2,"i",50),t.qZA()}if(2&d){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.toggleGrammarButton()," ")}}function xe(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",51),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.goToRecording())}),t._uU(1),t._UZ(2,"i",52),t.qZA()}if(2&d){const e=t.oxw(2);t.Q6J("hidden",e.story.text&&0===e.story.text.length),t.xp6(1),t.hij(" ",e.ts.l.recordings," ")}}function we(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",24),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.toggleOptions())}),t.TgZ(1,"div",25),t.YNc(2,ce,1,0,"i",26),t.YNc(3,de,1,0,"i",27),t.qZA(),t.YNc(4,ge,5,7,"div",28),t.YNc(5,he,4,2,"div",29),t.YNc(6,ve,4,2,"div",30),t.YNc(7,_e,3,1,"div",30),t.YNc(8,be,3,1,"div",30),t.YNc(9,ye,3,1,"div",30),t.YNc(10,xe,3,2,"div",31),t.qZA()}if(2&d){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions)}}function Ce(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",53,54)(2,"mat-icon",55),t.NdJ("click",function(){t.CHM(e),t.oxw();const u=t.MAs(4);return t.KtG(u.toggle())}),t._uU(3,"menu"),t.qZA(),t.TgZ(4,"quill-editor",56),t.NdJ("ngModelChange",function(u){t.CHM(e);const w=t.oxw();return t.KtG(w.story.htmlText=u)})("onContentChanged",function(u){t.CHM(e);const w=t.oxw();return t.KtG(w.onContentChanged(u))})("onEditorCreated",function(u){t.CHM(e);const w=t.oxw();return t.KtG(w.onEditorCreated(u))}),t.qZA()()}if(2&d){const e=t.oxw();t.Q6J("ngStyle",e.quillEditorStyle),t.xp6(4),t.Q6J("modules",e.quillToolbar)("preserveWhitespace",!0)("debounceTime",1500)("ngModel",e.story.htmlText)}}function Se(d,y){1&d&&(t.TgZ(0,"div",57),t._uU(1," Click on the '+' button below to create your first story! "),t.qZA())}Ot().register("modules/imageCompress",It());let Me=(()=>{class d{constructor(e,c,u,w,O,H,j,z){this.ts=e,this.auth=c,this.storyService=u,this.recordAudioService=w,this.engagement=O,this.dialog=H,this.http=j,this.router=z,this.stories=[],this.story=new _,this.saveStoryDebounceId=0,this.mostRecentAttemptToSaveStory=new Date,this.storySaved=!0,this.storiesLoaded=!1,this.downloadStoryFormat=".pdf",this.lastClickedStoryId="",this.showErrorTags=!1,this.showOptions=!0,this.dontToggle=!1,this.textUpdated=new K.x,this.quillToolbar={toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"],["image"]],imageCompress:{quality:.7,maxWidth:500,maxHeight:500,imageType:"image/png",debug:!1,suppressErrorLogging:!1,insertIntoEditor:void 0}},this.isRecording=!1,this.isTranscribing=!1}ngOnInit(){var e=this;return(0,v.Z)(function*(){e.auth.getUserDetails()?!e.story||(e.storySaved=!0,e.textUpdated.next(),e.getWordCount(e.story.text),null==e.story.htmlText&&(e.story.htmlText=e.story.text)):e.auth.logout()})()}onContentChanged(e){"user"===(this.story.text=e.text,this.getWordCount(e.text),e.source)&&(this.storySaved=!1,this.textUpdated.next(e.text),this.debounceSaveStory())}onEditorCreated(e){e.history.options.userOnly=!0,this.quillEditor=e,this.quillEditor.root.setAttribute("spellcheck","false"),e.focus()}getWordCount(e){}debounceSaveStory(){this.saveStoryDebounceId++;const e=this.saveStoryDebounceId,c=new Date;setTimeout(()=>{e===this.saveStoryDebounceId&&this.saveStory(e,c)},1e3)}saveStory(e,c){var u=this;return(0,v.Z)(function*(){const w=new Date;if(u.mostRecentAttemptToSaveStory=w,!u.story._id)return window.alert("Cannot save story. The id is not known");const O=u.stripGramadoirAttributesFromHtml(Bt()(u.story.htmlText)),H={title:u.story.title,dialect:u.story.dialect,text:u.story.text,htmlText:O,lastUpdated:c};u.engagement.addEventForLoggedInUser(M.tw["SAVE-STORY"],u.story);try{yield(0,F.z)(u.storyService.updateStory(H,u.story._id)),(e===u.saveStoryDebounceId||"modal"===e)&&(u.storySaved=!0)}catch(j){throw window.alert("Error while trying to save story: "+j.message),j}try{w===u.mostRecentAttemptToSaveStory&&(u.storySaved=!0)}catch(j){throw window.alert("Error setting storySaved to true: "+j.message),j}})()}stripGramadoirAttributesFromHtml(e){return e&&e.replace?e.replace(/\s*style="([^"])+"/g,"").replace(/\s*highlight-tag-type="([^"])+"/g,"").replace(/\s*highlight-tag="([^"])+"/g,""):""}toggleOptions(){this.dontToggle||(this.showOptions=!this.showOptions),this.dontToggle=!1}titleStyle(){return{"font-style":this.storySaved?"normal":"italic"}}downloadStory(){this.dialogRef=this.dialog.open(l.p,{data:{title:this.ts.l.download,type:"select",data:[this.story.title,[".pdf",".docx",".txt",".odt"]],confirmText:this.ts.l.download,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(e=>{this.dialogRef=void 0,e&&(this.downloadStoryFormat=e[1]?e[1]:".pdf",this.http.get(this.downloadStoryUrl(),{responseType:"blob"}).subscribe(c=>{const u=window.document.createElement("a");u.href=window.URL.createObjectURL(c),u.download=e[0]?e[0]:this.story.title,document.body.appendChild(u),u.click(),document.body.removeChild(u)}))})}downloadStoryUrl(){return mt.Z.baseurl+"story/downloadStory/"+this.story._id+"/"+this.downloadStoryFormat}hasNewFeedback(){}toggleGrammarButton(){return this.ts.message(this.showErrorTags?"hide_grammar_suggestions":"show_grammar_suggestions")}toggleGrammarTags(){}showModal(){}selectedGrammarSuggestion(){return"test"}goToRecording(){this.router.navigateByUrl("/student/record-story/"+this.story._id)}goToSynthesis(){}speakStory(){var e=this;return(0,v.Z)(function*(){if(e.isRecording){e.isTranscribing=!0,e.recordAudioService.stopRecording();let c=yield e.recordAudioService.getAudioTranscription();if(e.isTranscribing=!1,c){let u=e.quillEditor.getSelection(!0);e.quillEditor.insertText(u.index,c+"."),e.story.text=e.quillEditor.getText(),e.story.htmlText=e.quillEditor.root.innerHTML,e.getWordCount(c),e.storySaved=!1,e.textUpdated.next(),e.debounceSaveStory()}}else e.recordAudioService.recordAudio();e.isRecording=!e.isRecording})()}}return d.\u0275fac=function(e){return new(e||d)(t.Y36(f.D),t.Y36(C.$),t.Y36(m.N),t.Y36(Ft.r),t.Y36(A.M),t.Y36(r.uw),t.Y36(vt.eN),t.Y36(o.F0))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-dashboard"]],decls:18,vars:4,consts:[["class","storyTitleHeader",4,"ngIf"],["class","optionsBtnContainer",3,"click",4,"ngIf"],["autosize","",1,"bodyContainer"],["mode","side","opened","true",1,"storyListDrawer"],["storyDrawer",""],[3,"storyEmitter","storiesLoadedEmitter"],[1,"storyContainer"],["class","ql-container",3,"ngStyle",4,"ngIf","ngIfElse"],["newStoryMessage",""],["mode","side","position","end","opened","true",1,"dictionaryDrawer"],["dictionaryDrawer",""],[3,"closeDictionaryEmitter"],["mode","side","position","end"],["drawer3",""],[1,"storyTitleHeader"],["data-cy","title","contenteditable","true",1,"storyTitle",3,"ngStyle"],[4,"ngIf"],["style","color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"saveIcon"],["class","savedIcon",4,"ngIf"],[2,"color","rgba(0, 0, 0, 0.4)"],[1,"savedIcon"],[1,"fas","fa-check"],[1,"fas","fa-save"],[1,"optionsBtnContainer",3,"click"],[1,"optionsBtn"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-right",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"ngClass","click",4,"ngIf"],["style","display: flex",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"hidden","click",4,"ngIf"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-right"],[1,"optionsBtn","optionsPopupBtn",3,"ngClass","click"],["class","material-symbols-outlined optionsBtnIcon",4,"ngIf"],["class","notRecordingBtn blink",4,"ngIf"],[1,"material-symbols-outlined","optionsBtnIcon"],[1,"notRecordingBtn","blink"],[1,"fas","fa-stop-circle"],[1,"dot-flashing"],[2,"display","flex",3,"click"],["target","_blank",1,"optionsBtn","optionsPopupBtn",2,"text-decoration","none",3,"href","click"],[1,"fas","fa-download","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"click"],[1,"fas","fa-comment-dots","optionsBtnIcon"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"],[1,"fas","fa-book","optionsBtnIcon"],[1,"fas","fa-volume-up","optionsBtnIcon"],[1,"fas","fa-spell-check","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"hidden","click"],[1,"fas","fa-microphone","optionsBtnIcon"],[1,"ql-container",3,"ngStyle"],["quillHeightSpan",""],[1,"menuButton",3,"click"],["placeholder","",3,"modules","preserveWhitespace","debounceTime","ngModel","ngModelChange","onContentChanged","onEditorCreated"],[1,"newStoryMessage"]],template:function(e,c){if(1&e){const u=t.EpF();t.YNc(0,se,8,6,"div",0),t.YNc(1,we,11,9,"div",1),t.TgZ(2,"mat-drawer-container",2)(3,"mat-drawer",3,4)(5,"app-story-drawer",5,4),t.NdJ("storyEmitter",function(O){return c.story=O})("storiesLoadedEmitter",function(O){return c.storiesLoaded=O}),t.qZA()(),t.TgZ(7,"div",6),t.YNc(8,Ce,5,5,"div",7),t.YNc(9,Se,2,0,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(11,"mat-drawer",9,10)(13,"app-dictionary-drawer",11),t.NdJ("closeDictionaryEmitter",function(){t.CHM(u);const O=t.MAs(12);return t.KtG(O.toggle())}),t.qZA()(),t.TgZ(14,"mat-drawer",12,13)(16,"p"),t._uU(17,"ADrawer 3"),t.qZA()()()}if(2&e){const u=t.MAs(10);t.Q6J("ngIf",c.story),t.xp6(1),t.Q6J("ngIf",c.story),t.xp6(7),t.Q6J("ngIf",c.story)("ngIfElse",u)}},dependencies:[s.mk,s.O5,s.PC,B.JJ,B.On,Nt,jt,xt.Hw,Yt.g6,$t,ne],styles:[".storyTitleHeader{display:flex;justify-content:center;margin-top:-30px;padding-bottom:20px}.storyTitle{margin:auto;overflow:auto;font-size:20px;font-weight:bolder;padding-left:20px;padding-right:20px}.saveIcon{align-self:flex-end;white-space:nowrap;color:var(--dark-text);border-style:none;font-size:11pt;padding:5px}.savedIcon{color:var(--scealai-light-brown)}.optionsBtnContainer>*{height:2rem}.optionsBtnContainer{display:flex;justify-content:space-between;flex-wrap:wrap;--options-btn-background-color-hover: lightgray;margin-left:2%;margin-right:2%}.optionsBtn{background-color:var(--scealai-yellow);border-style:none;color:#464444;margin:0;border-radius:2px;display:flex;align-items:center;padding:5px;background:rgba(223,217,200,0)}.optionsBtn:hover{background-color:var(--options-btn-background-color-hover);color:#35322f;cursor:pointer;border-radius:2}.optionsPopupBtn{margin-right:4px}.optionsBtnIcon{margin-left:5px}.notRecordingBtn{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.bodyContainer{width:100%;height:100%}.storyListDrawer{padding:40px}.dictionaryDrawer{width:25%;height:100%}.newStoryMessage{font-weight:bolder;max-width:200px;padding-top:50px;padding-bottom:50px;height:80vh;width:100%}.storyContainer{height:100%}.ql-container{background-color:#f8f9fa;height:100%}.menuButton{float:left;padding-left:10px;padding-top:5px;transform:scale(2);z-index:100}.menuButton:hover{cursor:pointer}.ql-editor{background-color:#fff;z-index:1;margin-top:20px;font-size:14pt;font-family:Times New Roman,Times,serif;min-height:70vh!important;max-height:70vh!important}.blink{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}\n",".custom-tooltip:before{content:none!important}[data-selected]{margin:.3em}[highlight-tag-type]{border-radius:3px}span[highlight-tag-type]:hover{cursor:pointer}span:not[highlight-tag-type]{border-radius:0;padding-left:0;padding-right:0}[highlight-tag-type=LEATHAN-CAOL]{border:1px solid gray;border-radius:0!important;padding-left:0!important;padding-right:0!important}\n",'.ql-editor{overflow-y:auto}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=times-new-roman]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=times-new-roman]:before{content:"Times New Roman";font-family:Times New Roman}.ql-font-times-new-roman{font-family:times new roman}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=arial]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=arial]:before{content:"Arial";font-family:arial}.ql-font-arial{font-family:arial}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=sans-serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=sans-serif]:before{content:"Sans Serif";font-family:"sans serif"}.ql-font-sans-serif{font-family:"sans serif"}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{content:"Monospace";font-family:"monospace"}.ql-font-monospace{font-family:"monospace"}\n'],encapsulation:2}),d})();var at=n(9742);let Gt=(()=>{class d{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}}return d.\u0275fac=function(e){return new(e||d)(t.Y36(Ut.H7,16))},d.\u0275pipe=t.Yjl({name:"safeHtml",type:d,pure:!0}),d})();function Te(d,y){if(1&d&&(t.TgZ(0,"div",14)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&d){const e=t.oxw();t.xp6(2),t.Oqu(e.ts.l.synthesising)}}function Ae(d,y){1&d&&(t._UZ(0,"span",18),t.ALo(1,"safeHtml")),2&d&&t.Q6J("innerHTML",t.lcZ(1,1,y.$implicit.outerHTML),t.oJD)}function ke(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().$implicit,w=t.oxw(2);return t.KtG(w.stopSection(u))}),t._UZ(1,"i",20),t.qZA()}}function Oe(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().$implicit,w=t.oxw(2);return t.KtG(w.playSection(u))}),t._UZ(1,"i",21),t.qZA()}}function Pe(d,y){if(1&d&&(t.TgZ(0,"div",2),t.YNc(1,Ae,2,3,"span",16),t.YNc(2,ke,2,0,"button",17),t.YNc(3,Oe,2,0,"button",17),t.qZA()),2&d){const e=y.$implicit;t.xp6(1),t.Q6J("ngForOf",e.spans),t.xp6(1),t.Q6J("ngIf",!e.audio.paused),t.xp6(1),t.Q6J("ngIf",e.audio.paused)}}function Ie(d,y){if(1&d&&(t.TgZ(0,"div"),t.YNc(1,Pe,4,3,"div",15),t.qZA()),2&d){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.chosenSections)}}function De(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div")(1,"button",24),t._uU(2),t.qZA(),t.TgZ(3,"button",25),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return t.KtG(u.changeSections(u.sentences))}),t._uU(4),t.qZA()()}if(2&d){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.paragraph),t.xp6(2),t.Oqu(e.ts.l.sentence)}}function Be(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div")(1,"button",25),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return t.KtG(u.changeSections(u.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",24),t._uU(4),t.qZA()()}if(2&d){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.paragraph),t.xp6(2),t.Oqu(e.ts.l.sentence)}}function Fe(d,y){if(1&d&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t.qZA(),t.YNc(3,De,5,2,"div",11),t.YNc(4,Be,5,2,"div",11),t.qZA()),2&d){const e=t.oxw();t.xp6(2),t.hij(" ",e.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",e.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",e.isSentenceMode())}}let Re=(()=>{class d{constructor(e,c,u,w,O){this.storyService=e,this.route=c,this.router=u,this.ts=w,this.synthesis=O,this.paragraphs=[],this.sentences=[],this.audioFinishedLoading=!1}ngOnInit(){var e=this;return(0,v.Z)(function*(){e.storyId=e.route.snapshot.paramMap.get("id");let c=yield(0,F.z)(e.storyService.getStory(e.storyId));e.synthesis.synthesiseStory(c).then(([u,w])=>{e.paragraphs=u,e.sentences=w,e.chosenSections=e.paragraphs,e.audioFinishedLoading=!0})})()}isSentenceMode(){return this.chosenSections[0]instanceof at.cj}isParagraphMode(){return this.chosenSections[0]instanceof at.nv}changeSections(e){this.chosenSections=e,this.paragraphs.concat(this.sentences).forEach(u=>this.stopSection(u))}playSection(e){e.play(),e.highlight()}stopSection(e){e.stop(),e.removeHighlight()}goToDashboard(){this.router.navigateByUrl("/student/dashboard/"+this.storyId)}}return d.\u0275fac=function(e){return new(e||d)(t.Y36(m.N),t.Y36(o.gz),t.Y36(o.F0),t.Y36(f.D),t.Y36(at.cf))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-synthesis"]],decls:18,vars:5,consts:[["src","assets/img/book.png",1,"bookImg"],[1,"page"],[1,"paragraphContainer"],[1,"bookContainerSynth"],[1,"bookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"storyContainer"],[1,"storyHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[4,"ngIf"],[1,"footer"],["class","btnContainer",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"btnContainer"],[1,"footerText"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"]],template:function(e,c){1&e&&(t._UZ(0,"img",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t.NdJ("click",function(){return c.goToDashboard()}),t._UZ(6,"i",6),t._uU(7),t.qZA(),t._UZ(8,"div"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8),t._uU(11),t.qZA(),t.TgZ(12,"div")(13,"div",9),t.YNc(14,Te,4,1,"div",10),t.YNc(15,Ie,2,1,"div",11),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,Fe,5,3,"div",13),t.qZA()()()()()),2&e&&(t.xp6(7),t.hij(" ",c.ts.l.story,""),t.xp6(4),t.hij(" ",c.ts.l.listen_and_correct," "),t.xp6(3),t.Q6J("ngIf",!c.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",c.audioFinishedLoading),t.xp6(2),t.Q6J("ngIf",c.audioFinishedLoading))},dependencies:[s.sg,s.O5,J.P,Gt],styles:['.bookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:var(--dark-text);width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.storyContainer[_ngcontent-%COMP%]{margin-top:10px}.storyHeader[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]:hover, .selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),d})();class Ee{constructor(y,e=[],c=[],u=[],w=[],O=[],H=[]){this.paragraphAudioIds=e,this.paragraphIndices=c,this.paragraphTranscriptions=u,this.sentenceAudioIds=w,this.sentenceIndices=O,this.sentenceTranscriptions=H,this.storyData=y,this.date=new Date,this.archived=!1}}var Ze=n(2754);function Ne(d,y){1&d&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function je(d,y){if(1&d&&(t.TgZ(0,"div",16),t._uU(1),t._UZ(2,"i",17),t.qZA()),2&d){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.saved," ")}}function Ue(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return t.KtG(u.saveRecordings())}),t._uU(1),t._UZ(2,"i",19),t.qZA()}if(2&d){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.save," ")}}function Le(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.goToDashboard())}),t._UZ(2,"i",10),t._uU(3),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.YNc(6,Ne,2,0,"span",12),t.qZA(),t.TgZ(7,"div",13),t.YNc(8,je,3,1,"div",14),t.YNc(9,Ue,3,1,"div",15),t.qZA()()}if(2&d){const e=t.oxw();t.xp6(3),t.hij(" ",e.ts.l.story," "),t.xp6(2),t.hij(" ",null==e.story?null:e.story.title,""),t.xp6(1),t.Q6J("ngIf",!e.recordingSaved),t.xp6(2),t.Q6J("ngIf",e.recordingSaved),t.xp6(1),t.Q6J("ngIf",!e.recordingSaved)}}function He(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){t.CHM(e),t.oxw();const u=t.MAs(5);return t.KtG(u.toggle())}),t.TgZ(1,"mat-icon"),t._uU(2,"menu"),t.qZA(),t._uU(3),t.qZA()}if(2&d){const e=t.oxw();t.xp6(3),t.hij(" ",e.ts.l.archive," ")}}const Ye=function(d){return{"font-style":d}};function Je(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div")(1,"div",21),t.NdJ("click",function(){const w=t.CHM(e).$implicit,O=t.oxw();return t.KtG(O.setCurrentRecording(w))}),t.TgZ(2,"div",22)(3,"div",23),t._uU(4),t.qZA()(),t.TgZ(5,"div",24),t._uU(6),t.ALo(7,"date"),t.qZA()(),t._UZ(8,"hr"),t.qZA()}if(2&d){const e=y.$implicit;t.xp6(1),t.uIk("id",e._id),t.xp6(2),t.Q6J("ngStyle",t.VKq(7,Ye,e.archived?"none":"italic")),t.xp6(1),t.hij(" ",null==e||null==e.storyData?null:e.storyData.title,""),t.xp6(2),t.hij(" ",t.xi3(7,4,e.date,"d/M/yy, h:mm a")," ")}}function Ge(d,y){if(1&d&&(t.TgZ(0,"div",30)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&d){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.synthesising)}}function ze(d,y){1&d&&(t._UZ(0,"span",42),t.ALo(1,"safeHtml")),2&d&&t.Q6J("innerHTML",t.lcZ(1,1,y.$implicit.outerHTML),t.oJD)}function Qe(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().$implicit,w=t.oxw(3);return t.KtG(w.stopSection(u))}),t._UZ(1,"i",44),t.qZA()}}function qe(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().$implicit,w=t.oxw(3);return t.KtG(w.playSection(u))}),t._UZ(1,"i",45),t.qZA()}}function We(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().index,w=t.oxw(3);return t.KtG(w.recordAudio(u))}),t._UZ(1,"i",47),t.qZA()}}function Ve(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().index,w=t.oxw(3);return t.KtG(w.stopRecording(u))}),t._UZ(1,"i",49),t.qZA()}}function Ke(d,y){1&d&&t._UZ(0,"hr",50)}function $e(d,y){1&d&&(t.TgZ(0,"div",51),t._UZ(1,"div",52),t.qZA())}function Xe(d,y){if(1&d&&(t.TgZ(0,"div",53)(1,"span",54),t._uU(2),t.qZA(),t.TgZ(3,"span",55),t._uU(4),t.qZA()()),2&d){const e=t.oxw().index,c=t.oxw(3);t.xp6(2),t.hij("",c.ts.l.speech_recognition_output," "),t.xp6(2),t.Oqu(c.sectionTranscriptions[e])}}function tn(d,y){if(1&d&&t._UZ(0,"audio",59,60),2&d){const e=t.oxw(2).index,c=t.oxw(3);t.uIk("src",c.sectionAudioSources[e],t.LSH)}}function en(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2).index,w=t.oxw(3);return t.KtG(w.deleteRecording(u))}),t._UZ(1,"i",62),t.qZA()}}function nn(d,y){if(1&d&&(t.TgZ(0,"div",56)(1,"div",54),t._uU(2),t.qZA(),t.YNc(3,tn,2,1,"audio",57),t.YNc(4,en,2,0,"button",58),t.qZA()),2&d){const e=t.oxw().index,c=t.oxw(3);t.xp6(2),t.Oqu(c.ts.l.your_recording),t.xp6(1),t.Q6J("ngIf",c.sectionAudioSources[e]),t.xp6(1),t.Q6J("ngIf",c.sectionAudioSources[e]&&!c.currentRecording.archived)}}function rn(d,y){if(1&d&&(t.TgZ(0,"div",32)(1,"div",33)(2,"div"),t.YNc(3,ze,2,3,"span",34),t.YNc(4,Qe,2,0,"button",35),t.YNc(5,qe,2,0,"button",35),t.YNc(6,We,2,0,"button",36),t.YNc(7,Ve,2,0,"button",37),t.qZA(),t.YNc(8,Ke,1,0,"hr",38),t.YNc(9,$e,2,0,"div",39),t.YNc(10,Xe,5,2,"div",40),t.YNc(11,nn,5,3,"div",41),t.qZA()()),2&d){const e=y.$implicit,c=y.index,u=t.oxw(3);t.xp6(3),t.Q6J("ngForOf",e.spans),t.xp6(1),t.Q6J("ngIf",!e.audio.paused),t.xp6(1),t.Q6J("ngIf",e.audio.paused),t.xp6(1),t.Q6J("ngIf",!u.isRecording(e,c)&&!u.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",u.isRecording(e,c)&&!u.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",u.sectionAudioSources[c]),t.xp6(1),t.Q6J("ngIf",u.isTranscribing[c]),t.xp6(1),t.Q6J("ngIf",u.sectionTranscriptions[c]),t.xp6(1),t.Q6J("ngIf",u.sectionAudioSources[c])}}function on(d,y){if(1&d&&(t.TgZ(0,"div"),t.YNc(1,rn,12,9,"div",31),t.qZA()),2&d){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.chosenSections)}}function an(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div")(1,"button",67),t._uU(2),t.qZA(),t.TgZ(3,"button",68),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(3);return t.KtG(u.changeSections(u.sentences))}),t._uU(4),t.qZA()()}if(2&d){const e=t.oxw(3);t.xp6(2),t.hij(" ",e.ts.l.paragraph," "),t.xp6(2),t.hij(" ",e.ts.l.sentence," ")}}function sn(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"div")(1,"button",68),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(3);return t.KtG(u.changeSections(u.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",67),t._uU(4),t.qZA()()}if(2&d){const e=t.oxw(3);t.xp6(2),t.hij(" ",e.ts.l.paragraph," "),t.xp6(2),t.hij(" ",e.ts.l.sentence," ")}}function cn(d,y){if(1&d){const e=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(3);return t.KtG(u.archiveRecording())}),t._uU(1),t.qZA()}if(2&d){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.ts.l.archive_recording," ")}}function dn(d,y){if(1&d&&(t.TgZ(0,"div",63)(1,"div",64)(2,"div",65),t._uU(3),t.qZA(),t.YNc(4,an,5,2,"div",12),t.YNc(5,sn,5,2,"div",12),t.YNc(6,cn,2,1,"button",66),t.qZA()()),2&d){const e=t.oxw(2);t.xp6(3),t.hij(" ",e.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",e.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",e.isSentenceMode()),t.xp6(1),t.Q6J("ngIf",!e.currentRecording.archived&&e.currentRecording.storyData.text!=e.story.text)}}function ln(d,y){if(1&d&&(t.TgZ(0,"div",25)(1,"div",26),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t.YNc(4,Ge,4,1,"div",28),t.YNc(5,on,2,1,"div",12),t.qZA(),t.YNc(6,dn,7,4,"div",29),t.qZA()),2&d){const e=t.oxw();t.xp6(2),t.hij(" ",e.ts.l.listen_record_compare," "),t.xp6(2),t.Q6J("ngIf",!e.audioFinishedLoading&&!e.recordingsFinishedLoading),t.xp6(1),t.Q6J("ngIf",e.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",e.audioFinishedLoading)}}const pn=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"contents",component:At,canActivate:[i.P]},{path:"dashboard",component:Me,canActivate:[i.P],canDeactivate:[a]},{path:"synthesis/:id",component:Re,canActivate:[i.P],canDeactivate:[g]},{path:"record-story/:id",component:(()=>{class d{constructor(e,c,u,w,O,H,j,z,P){this.storyService=e,this.ts=c,this.sanitizer=u,this.route=w,this.router=O,this.recordingService=H,this.synthesis=j,this.engagement=z,this.dialog=P,this.story=new _,this.paragraphs=[],this.sentences=[],this.isRecordingParagraph=[],this.isRecordingSentence=[],this.isRecordingSection=[],this.paragraphAudioSources=[],this.sentenceAudioSources=[],this.sectionAudioSources=[],this.paragraphBlobs=[],this.sentenceBlobs=[],this.sectionBlobs=[],this.paragraphChunks=[],this.sentenceChunks=[],this.sectionChunks=[],this.recordingSaved=!0,this.audioFinishedLoading=!1,this.url_ASR_API="https://phoneticsrv3.lcs.tcd.ie/asr_api/recognise",this.sentenceTranscriptions=[],this.paragraphTranscriptions=[],this.sectionTranscriptions=[],this.isTranscribing=[!1],this.recordings=[],this.currentRecording=null,this.lastClickedRecordingId=""}ngOnInit(){var e=this;return(0,v.Z)(function*(){e.chunks=[],e.sectionAudioSources=e.paragraphAudioSources,e.sectionBlobs=e.paragraphBlobs,e.sectionChunks=e.paragraphChunks,e.sectionTranscriptions=e.paragraphTranscriptions,e.isRecordingSection=e.isRecordingParagraph;const c=e.route.snapshot.paramMap.get("id");e.story=yield(0,F.z)(e.storyService.getStory(c)),(0,Ze.TD)({audio:!0,video:!1}).then((0,v.Z)(function*(){e.story.activeRecording?e.loadRecordings():e.createNewRecording()})).catch(u=>{e.openMicRequestDialog()})})()}loadRecordings(){var e=this;return(0,v.Z)(function*(){e.recordings=yield(0,F.z)(e.recordingService.getRecordings(e.story._id)),e.recordings.sort((u,w)=>u.date>w.date?-1:1);let c=e.recordings.filter(u=>!1===u.archived);e.setCurrentRecording(c[0])})()}setCurrentRecording(e){this.currentRecording=e,this.loadSynthesis(this.currentRecording.storyData),this.loadAudio(this.currentRecording);let c=this.currentRecording._id,u=document.getElementById(c);u&&(this.lastClickedRecordingId&&document.getElementById(this.lastClickedRecordingId).classList.remove("clickedresultCard"),this.lastClickedRecordingId=c,u.classList.add("clickedresultCard"))}createNewRecording(){var e=this;return(0,v.Z)(function*(){const c=yield(0,F.z)(e.recordingService.create(new Ee(e.story)));e.story=yield(0,F.z)(e.storyService.updateActiveRecording(e.story._id,c._id)),e.loadRecordings()})()}archiveRecording(){var e=this;return(0,v.Z)(function*(){yield(0,F.z)(e.recordingService.updateArchiveStatus(e.currentRecording._id)),e.createNewRecording()})()}loadSynthesis(e){this.synthesis.synthesiseStory(e).then(([c,u])=>{this.paragraphs=c,this.sentences=u,this.chosenSections=this.paragraphs,this.audioFinishedLoading=!0})}loadAudio(e){var c=this;return(0,v.Z)(function*(){c.audioFinishedLoading=!1,c.paragraphAudioSources=[],c.paragraphTranscriptions=[],c.sentenceAudioSources=[],c.sentenceTranscriptions=[],c.sectionAudioSources=[],c.sectionTranscriptions=[];for(let u=0;u<e.paragraphIndices.length;++u){let w=yield(0,F.z)(c.recordingService.getAudio(e.paragraphAudioIds[u]));c.paragraphBlobs[u]=w,c.paragraphAudioSources[e.paragraphIndices[u]]=c.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(w)),c.paragraphTranscriptions[e.paragraphIndices[u]]=e.paragraphTranscriptions[e.paragraphIndices[u]]}for(let u=0;u<e.sentenceIndices.length;++u){let w=yield(0,F.z)(c.recordingService.getAudio(e.sentenceAudioIds[u]));c.sentenceBlobs[u]=w,c.sentenceAudioSources[e.sentenceIndices[u]]=c.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(w)),c.sentenceTranscriptions[e.sentenceIndices[u]]=e.sentenceTranscriptions[e.sentenceIndices[u]]}c.sectionTranscriptions=c.paragraphTranscriptions,c.sectionAudioSources=c.paragraphAudioSources})()}recordAudio(e){this.engagement.addEventForLoggedInUser(M.tw["RECORD-STORY"],this.story),navigator.mediaDevices.getUserMedia({audio:!0}).then(u=>{this.stream=u,this.recorder=new MediaRecorder(this.stream),this.sectionChunks[e]=[],this.recorder.start(),this.isRecordingSection[e]=!0,this.recorder.ondataavailable=w=>{this.sectionChunks[e].push(w.data)}}).catch()}stopRecording(e){this.recorder.stop(),this.isRecordingSection[e]=!1,this.stream.getTracks().forEach(c=>c.stop()),setTimeout(()=>{const c=new Blob(this.sectionChunks[e],{type:"audio/mp3"});this.sectionBlobs[e]=c,this.sectionAudioSources[e]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(c)),this.recordingSaved=!1;const u=new FileReader;u.readAsDataURL(c),u.onloadend=function(){let w=u.result.split(";base64,")[1];this.getTranscription(w,e)}.bind(this)},500)}getTranscription(e,c){this.isTranscribing[c]=!0,this.isParagraphMode()&&(this.paragraphTranscriptions[c]=null),this.isSentenceMode()&&(this.sentenceTranscriptions[c]=null),fetch(this.url_ASR_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({recogniseBlob:e,developer:!0})}).then(w=>w.json()).then(w=>{let O=w.transcriptions[0].utterance;this.isParagraphMode()?(this.paragraphTranscriptions[c]=O,this.sectionTranscriptions[c]=this.paragraphTranscriptions[c]):this.isSentenceMode()&&(this.sentenceTranscriptions[c]=O,this.sectionTranscriptions[c]=this.sentenceTranscriptions[c]),this.isTranscribing[c]=!1})}deleteRecording(e){this.recordingSaved=!1,delete this.sectionAudioSources[e],delete this.sectionChunks[e],delete this.sectionBlobs[e],delete this.sectionTranscriptions[e]}saveRecordings(){var e=this;return(0,v.Z)(function*(){const c=Object.entries(e.paragraphBlobs).map(function(){var W=(0,v.Z)(function*([ft,Lt]){return e.recordingService.saveAudio(e.story._id,Lt,ft).toPromise()});return function(ft){return W.apply(this,arguments)}}()),u=Object.entries(e.sentenceBlobs).map(function(){var W=(0,v.Z)(function*([ft,Lt]){return e.recordingService.saveAudio(e.story._id,Lt,ft).toPromise()});return function(ft){return W.apply(this,arguments)}}()),w=yield Promise.all(c),O=yield Promise.all(u);let H=[],j=[];for(const W of w)H.push(W.index),j.push(W.fileId);let z=[],P=[];for(const W of O)z.push(W.index),P.push(W.fileId);const nt={paragraphAudioIds:j,paragraphIndices:H,paragraphTranscriptions:e.paragraphTranscriptions,sentenceIndices:z,sentenceAudioIds:P,sentenceTranscriptions:e.sentenceTranscriptions};let ct=yield(0,F.z)(e.recordingService.update(e.story.activeRecording,nt));if(ct){e.recordingSaved=!0;const W=e.recordings.indexOf(e.currentRecording);e.recordings.splice(W,1,ct)}else alert("Error while saving audio")})()}isRecording(e,c){return e instanceof at.cj?this.isRecordingSentence[c]:e instanceof at.nv?this.isRecordingParagraph[c]:void 0}isSentenceMode(){return this.chosenSections[0]instanceof at.cj}isParagraphMode(){return this.chosenSections[0]instanceof at.nv}changeSections(e){this.chosenSections=e,this.paragraphs.concat(this.sentences).forEach(u=>this.stopSection(u)),this.isSentenceMode()?(this.sectionAudioSources=this.sentenceAudioSources,this.sectionBlobs=this.sentenceBlobs,this.sectionChunks=this.sentenceChunks,this.sectionTranscriptions=this.sentenceTranscriptions,this.isRecordingSection=this.isRecordingSentence):this.isParagraphMode()&&(this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.sectionTranscriptions=this.paragraphTranscriptions,this.isRecordingSection=this.isRecordingParagraph)}playSection(e){e.play(),e.highlight()}stopSection(e){e.stop(),e.removeHighlight()}goToDashboard(){this.router.navigateByUrl("student/dashboard")}openMicRequestDialog(){var e=this;this.dialogRef=this.dialog.open(l.p,{data:{title:this.ts.l.microphone_blocked,message:this.ts.l.page_requires_microphone,confirmText:this.ts.l.refresh,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var c=(0,v.Z)(function*(u){e.dialogRef=void 0,console.log(u),u?e.ngOnInit():e.goToDashboard()});return function(u){return c.apply(this,arguments)}}())}}return d.\u0275fac=function(e){return new(e||d)(t.Y36(m.N),t.Y36(f.D),t.Y36(Ut.H7),t.Y36(o.gz),t.Y36(o.F0),t.Y36(N.s),t.Y36(at.cf),t.Y36(A.M),t.Y36(r.uw))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-recording"]],decls:8,vars:4,consts:[[1,"content"],["class","recordingBookHeader",4,"ngIf"],["class","archiveButton",3,"click",4,"ngIf"],["autosize","",1,"archiveNavContainer"],["mode","side",1,"sidenav"],["drawer",""],[4,"ngFor","ngForOf"],["class","recordingStoryContainer",4,"ngIf"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"archiveButton",3,"click"],[1,"contentSection",3,"click"],[1,"contentsLink"],[3,"ngStyle"],[1,"contentsDate"],[1,"recordingStoryContainer"],[1,"recordingStoryHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],["class","footer","style","padding-top: 10px",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],["class","recordingBtn",3,"click",4,"ngIf"],["class","notRecordingBtn blink",3,"click",4,"ngIf"],["class","dividerLine",4,"ngIf"],["class","recognisedSpeechContainer",4,"ngIf"],["style","height: 40px",4,"ngIf"],["class","audioContainer",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"recordingBtn",3,"click"],[1,"fas","fa-microphone"],[1,"notRecordingBtn","blink",3,"click"],[1,"fas","fa-stop-circle"],[1,"dividerLine"],[1,"recognisedSpeechContainer"],[1,"dot-flashing"],[2,"height","40px"],[2,"opacity","0.5"],[1,"recognisedSpeech"],[1,"audioContainer"],["controls","","class","audioPlayer",4,"ngIf"],["class","notRecordingBtn trashBtn",3,"click",4,"ngIf"],["controls","",1,"audioPlayer"],["audioTag",""],[1,"notRecordingBtn","trashBtn",3,"click"],[1,"fas","fa-trash-alt"],[1,"footer",2,"padding-top","10px"],[1,"btnContainer"],[1,"footerText"],["class","changeSplitBtn","style","margin-left: auto",3,"click",4,"ngIf"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"],[1,"changeSplitBtn",2,"margin-left","auto",3,"click"]],template:function(e,c){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Le,10,5,"div",1),t.YNc(2,He,4,1,"div",2),t.TgZ(3,"mat-drawer-container",3)(4,"mat-drawer",4,5),t.YNc(6,Je,9,9,"div",6),t.qZA(),t.YNc(7,ln,7,4,"div",7),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",c.story),t.xp6(1),t.Q6J("ngIf",c.recordings.length>0),t.xp6(4),t.Q6J("ngForOf",c.recordings),t.xp6(1),t.Q6J("ngIf",c.story))},dependencies:[s.sg,s.O5,s.PC,J.P,Nt,jt,xt.Hw,s.uU,Gt],styles:['.content[_ngcontent-%COMP%]{width:90%;margin-left:5%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.archiveNavContainer[_ngcontent-%COMP%]{height:70vh;background-color:#fff}.sidenav[_ngcontent-%COMP%]{padding:20px;width:20vw}.archiveButton[_ngcontent-%COMP%]{display:flex;margin-left:10px;margin-top:20px;font-size:16px}.archiveButton[_ngcontent-%COMP%]:hover, .contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:20px;height:80%}.textContainerSynth[_ngcontent-%COMP%]{box-shadow:0 0 11px 2px #0006;margin-left:5%;width:90%;color:var(--dark-text);background-color:#f8f9fa;text-align:left;overflow:auto;height:100%}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{white-space:nowrap;display:inline;border-style:none;color:var(--dark-text);width:10rem;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.bookTitle[_ngcontent-%COMP%]{overflow:auto;color:var(--dark-text);margin-left:2em;margin-right:2em;display:inline-block;font-size:16pt}.recordingSaveIcon[_ngcontent-%COMP%]{width:10rem;color:var(--dark-text);border-style:none;font-size:11pt;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{white-space:nowrap;color:var(--scealai-light-brown)}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);cursor:pointer;transition:.5s}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:10px;font-weight:700;border-radius:10px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.recordingBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px;float:right}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.recognisedSpeech[_ngcontent-%COMP%]{color:var(--scealai-green);font-style:italic;padding-left:5px}.audioContainer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.audioPlayer[_ngcontent-%COMP%]{width:25%;height:35px}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}.selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}.blink[_ngcontent-%COMP%]{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),d})(),canActivate:[i.P],canDeactivate:[x]}];let fn=(()=>{class d{}return d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[o.Bz.forChild(pn),o.Bz]}),d})();var gn=n(3869),hn=n(4385);let mn=(()=>{class d{}return d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[s.ez,fn,hn.LD,B.u5,gn.F,Vt,Jt.ot,xt.Ps,Yt.fi.forRoot({customOptions:[{import:"formats/font",whitelist:["sans-serif","serif","monospace","arial","times-new-roman"]}]})]}),d})()},7230:function(p){p.exports=function(h){var n={};function s(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return h[o].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=h,s.c=n,s.d=function(o,i,l){s.o(o,i)||Object.defineProperty(o,i,{enumerable:!0,get:l})},s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,i){if(1&i&&(o=s(o)),8&i||4&i&&"object"==typeof o&&o&&o.__esModule)return o;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&i&&"string"!=typeof o)for(var f in o)s.d(l,f,function(t){return o[t]}.bind(null,f));return l},s.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(i,"a",i),i},s.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},s.p="",s(s.s=90)}({17:function(h,n,s){"use strict";n.__esModule=!0,n.default=void 0;var o=s(18),i=function(){function l(){}return l.getFirstMatch=function(f,t){var r=t.match(f);return r&&r.length>0&&r[1]||""},l.getSecondMatch=function(f,t){var r=t.match(f);return r&&r.length>1&&r[2]||""},l.matchAndReturnConst=function(f,t,r){if(f.test(t))return r},l.getWindowsVersionName=function(f){switch(f){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},l.getMacOSVersionName=function(f){var t=f.split(".").splice(0,2).map(function(r){return parseInt(r,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},l.getAndroidVersionName=function(f){var t=f.split(".").splice(0,2).map(function(r){return parseInt(r,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},l.getVersionPrecision=function(f){return f.split(".").length},l.compareVersions=function(f,t,r){void 0===r&&(r=!1);var a=l.getVersionPrecision(f),x=l.getVersionPrecision(t),g=Math.max(a,x),v=0,b=l.map([f,t],function(_){var m=g-l.getVersionPrecision(_),C=_+new Array(m+1).join(".0");return l.map(C.split("."),function(M){return new Array(20-M.length).join("0")+M}).reverse()});for(r&&(v=g-Math.min(a,x)),g-=1;g>=v;){if(b[0][g]>b[1][g])return 1;if(b[0][g]===b[1][g]){if(g===v)return 0;g-=1}else if(b[0][g]<b[1][g])return-1}},l.map=function(f,t){var r,a=[];if(Array.prototype.map)return Array.prototype.map.call(f,t);for(r=0;r<f.length;r+=1)a.push(t(f[r]));return a},l.find=function(f,t){var r,a;if(Array.prototype.find)return Array.prototype.find.call(f,t);for(r=0,a=f.length;r<a;r+=1){var x=f[r];if(t(x,r))return x}},l.assign=function(f){for(var t,r,a=f,x=arguments.length,g=new Array(x>1?x-1:0),v=1;v<x;v++)g[v-1]=arguments[v];if(Object.assign)return Object.assign.apply(Object,[f].concat(g));var b=function(){var _=g[t];"object"==typeof _&&null!==_&&Object.keys(_).forEach(function(m){a[m]=_[m]})};for(t=0,r=g.length;t<r;t+=1)b();return f},l.getBrowserAlias=function(f){return o.BROWSER_ALIASES_MAP[f]},l.getBrowserTypeByAlias=function(f){return o.BROWSER_MAP[f]||""},l}();n.default=i,h.exports=n.default},18:function(h,n,s){"use strict";n.__esModule=!0,n.ENGINE_MAP=n.OS_MAP=n.PLATFORMS_MAP=n.BROWSER_MAP=n.BROWSER_ALIASES_MAP=void 0,n.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},n.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},n.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},n.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},n.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(h,n,s){"use strict";n.__esModule=!0,n.default=void 0;var o,i=(o=s(91))&&o.__esModule?o:{default:o},l=s(18);function f(r,a){for(var x=0;x<a.length;x++){var g=a[x];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(r,g.key,g)}}var t=function(){function r(){}var a,g;return r.getParser=function(v,b){if(void 0===b&&(b=!1),"string"!=typeof v)throw new Error("UserAgent should be a string");return new i.default(v,b)},r.parse=function(v){return new i.default(v).getResult()},a=r,g=[{key:"BROWSER_MAP",get:function(){return l.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return l.ENGINE_MAP}},{key:"OS_MAP",get:function(){return l.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return l.PLATFORMS_MAP}}],null&&f(a.prototype,null),g&&f(a,g),r}();n.default=t,h.exports=n.default},91:function(h,n,s){"use strict";n.__esModule=!0,n.default=void 0;var o=r(s(92)),i=r(s(93)),l=r(s(94)),f=r(s(95)),t=r(s(17));function r(x){return x&&x.__esModule?x:{default:x}}var a=function(){function x(v,b){if(void 0===b&&(b=!1),null==v||""===v)throw new Error("UserAgent parameter can't be empty");this._ua=v,this.parsedResult={},!0!==b&&this.parse()}var g=x.prototype;return g.getUA=function(){return this._ua},g.test=function(v){return v.test(this._ua)},g.parseBrowser=function(){var v=this;this.parsedResult.browser={};var b=t.default.find(o.default,function(_){if("function"==typeof _.test)return _.test(v);if(_.test instanceof Array)return _.test.some(function(m){return v.test(m)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.browser=b.describe(this.getUA())),this.parsedResult.browser},g.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},g.getBrowserName=function(v){return v?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},g.getBrowserVersion=function(){return this.getBrowser().version},g.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},g.parseOS=function(){var v=this;this.parsedResult.os={};var b=t.default.find(i.default,function(_){if("function"==typeof _.test)return _.test(v);if(_.test instanceof Array)return _.test.some(function(m){return v.test(m)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.os=b.describe(this.getUA())),this.parsedResult.os},g.getOSName=function(v){var b=this.getOS().name;return v?String(b).toLowerCase()||"":b||""},g.getOSVersion=function(){return this.getOS().version},g.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},g.getPlatformType=function(v){void 0===v&&(v=!1);var b=this.getPlatform().type;return v?String(b).toLowerCase()||"":b||""},g.parsePlatform=function(){var v=this;this.parsedResult.platform={};var b=t.default.find(l.default,function(_){if("function"==typeof _.test)return _.test(v);if(_.test instanceof Array)return _.test.some(function(m){return v.test(m)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.platform=b.describe(this.getUA())),this.parsedResult.platform},g.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},g.getEngineName=function(v){return v?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},g.parseEngine=function(){var v=this;this.parsedResult.engine={};var b=t.default.find(f.default,function(_){if("function"==typeof _.test)return _.test(v);if(_.test instanceof Array)return _.test.some(function(m){return v.test(m)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.engine=b.describe(this.getUA())),this.parsedResult.engine},g.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},g.getResult=function(){return t.default.assign({},this.parsedResult)},g.satisfies=function(v){var b=this,_={},m=0,C={},M=0;if(Object.keys(v).forEach(function(Z){var F=v[Z];"string"==typeof F?(C[Z]=F,M+=1):"object"==typeof F&&(_[Z]=F,m+=1)}),m>0){var A=Object.keys(_),k=t.default.find(A,function(Z){return b.isOS(Z)});if(k){var S=this.satisfies(_[k]);if(void 0!==S)return S}var T=t.default.find(A,function(Z){return b.isPlatform(Z)});if(T){var E=this.satisfies(_[T]);if(void 0!==E)return E}}if(M>0){var N=Object.keys(C),U=t.default.find(N,function(Z){return b.isBrowser(Z,!0)});if(void 0!==U)return this.compareVersion(C[U])}},g.isBrowser=function(v,b){void 0===b&&(b=!1);var _=this.getBrowserName().toLowerCase(),m=v.toLowerCase(),C=t.default.getBrowserTypeByAlias(m);return b&&C&&(m=C.toLowerCase()),m===_},g.compareVersion=function(v){var b=[0],_=v,m=!1,C=this.getBrowserVersion();if("string"==typeof C)return">"===v[0]||"<"===v[0]?(_=v.substr(1),"="===v[1]?(m=!0,_=v.substr(2)):b=[],b.push(">"===v[0]?1:-1)):"="===v[0]?_=v.substr(1):"~"===v[0]&&(m=!0,_=v.substr(1)),b.indexOf(t.default.compareVersions(C,_,m))>-1},g.isOS=function(v){return this.getOSName(!0)===String(v).toLowerCase()},g.isPlatform=function(v){return this.getPlatformType(!0)===String(v).toLowerCase()},g.isEngine=function(v){return this.getEngineName(!0)===String(v).toLowerCase()},g.is=function(v,b){return void 0===b&&(b=!1),this.isBrowser(v,b)||this.isOS(v)||this.isPlatform(v)},g.some=function(v){var b=this;return void 0===v&&(v=[]),v.some(function(_){return b.is(_)})},x}();n.default=a,h.exports=n.default},92:function(h,n,s){"use strict";n.__esModule=!0,n.default=void 0;var o,i=(o=s(17))&&o.__esModule?o:{default:o},l=/version\/(\d+(\.?_?\d+)+)/i;n.default=[{test:[/googlebot/i],describe:function(t){var r={name:"Googlebot"},a=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/opera/i],describe:function(t){var r={name:"Opera"},a=i.default.getFirstMatch(l,t)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/opr\/|opios/i],describe:function(t){var r={name:"Opera"},a=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/SamsungBrowser/i],describe:function(t){var r={name:"Samsung Internet for Android"},a=i.default.getFirstMatch(l,t)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/Whale/i],describe:function(t){var r={name:"NAVER Whale Browser"},a=i.default.getFirstMatch(l,t)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/MZBrowser/i],describe:function(t){var r={name:"MZ Browser"},a=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/focus/i],describe:function(t){var r={name:"Focus"},a=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/swing/i],describe:function(t){var r={name:"Swing"},a=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/coast/i],describe:function(t){var r={name:"Opera Coast"},a=i.default.getFirstMatch(l,t)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var r={name:"Opera Touch"},a=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/yabrowser/i],describe:function(t){var r={name:"Yandex Browser"},a=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/ucbrowser/i],describe:function(t){var r={name:"UC Browser"},a=i.default.getFirstMatch(l,t)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/Maxthon|mxios/i],describe:function(t){var r={name:"Maxthon"},a=i.default.getFirstMatch(l,t)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/epiphany/i],describe:function(t){var r={name:"Epiphany"},a=i.default.getFirstMatch(l,t)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/puffin/i],describe:function(t){var r={name:"Puffin"},a=i.default.getFirstMatch(l,t)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/sleipnir/i],describe:function(t){var r={name:"Sleipnir"},a=i.default.getFirstMatch(l,t)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/k-meleon/i],describe:function(t){var r={name:"K-Meleon"},a=i.default.getFirstMatch(l,t)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/micromessenger/i],describe:function(t){var r={name:"WeChat"},a=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/qqbrowser/i],describe:function(t){var r={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},a=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/msie|trident/i],describe:function(t){var r={name:"Internet Explorer"},a=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/\sedg\//i],describe:function(t){var r={name:"Microsoft Edge"},a=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/edg([ea]|ios)/i],describe:function(t){var r={name:"Microsoft Edge"},a=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/vivaldi/i],describe:function(t){var r={name:"Vivaldi"},a=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/seamonkey/i],describe:function(t){var r={name:"SeaMonkey"},a=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/sailfish/i],describe:function(t){var r={name:"Sailfish"},a=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return a&&(r.version=a),r}},{test:[/silk/i],describe:function(t){var r={name:"Amazon Silk"},a=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/phantom/i],describe:function(t){var r={name:"PhantomJS"},a=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/slimerjs/i],describe:function(t){var r={name:"SlimerJS"},a=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var r={name:"BlackBerry"},a=i.default.getFirstMatch(l,t)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var r={name:"WebOS Browser"},a=i.default.getFirstMatch(l,t)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/bada/i],describe:function(t){var r={name:"Bada"},a=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/tizen/i],describe:function(t){var r={name:"Tizen"},a=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/qupzilla/i],describe:function(t){var r={name:"QupZilla"},a=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var r={name:"Firefox"},a=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/electron/i],describe:function(t){var r={name:"Electron"},a=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/MiuiBrowser/i],describe:function(t){var r={name:"Miui"},a=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/chromium/i],describe:function(t){var r={name:"Chromium"},a=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/chrome|crios|crmo/i],describe:function(t){var r={name:"Chrome"},a=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/GSA/i],describe:function(t){var r={name:"Google Search"},a=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:function(t){var r=!t.test(/like android/i),a=t.test(/android/i);return r&&a},describe:function(t){var r={name:"Android Browser"},a=i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/playstation 4/i],describe:function(t){var r={name:"PlayStation 4"},a=i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/safari|applewebkit/i],describe:function(t){var r={name:"Safari"},a=i.default.getFirstMatch(l,t);return a&&(r.version=a),r}},{test:[/.*/i],describe:function(t){var r=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(r,t),version:i.default.getSecondMatch(r,t)}}}],h.exports=n.default},93:function(h,n,s){"use strict";n.__esModule=!0,n.default=void 0;var o,i=(o=s(17))&&o.__esModule?o:{default:o},l=s(18);n.default=[{test:[/Roku\/DVP/],describe:function(t){var r=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:l.OS_MAP.Roku,version:r}}},{test:[/windows phone/i],describe:function(t){var r=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:l.OS_MAP.WindowsPhone,version:r}}},{test:[/windows /i],describe:function(t){var r=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),a=i.default.getWindowsVersionName(r);return{name:l.OS_MAP.Windows,version:r,versionName:a}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var r={name:l.OS_MAP.iOS},a=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return a&&(r.version=a),r}},{test:[/macintosh/i],describe:function(t){var r=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),a=i.default.getMacOSVersionName(r),x={name:l.OS_MAP.MacOS,version:r};return a&&(x.versionName=a),x}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var r=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:l.OS_MAP.iOS,version:r}}},{test:function(t){var r=!t.test(/like android/i),a=t.test(/android/i);return r&&a},describe:function(t){var r=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),a=i.default.getAndroidVersionName(r),x={name:l.OS_MAP.Android,version:r};return a&&(x.versionName=a),x}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var r=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),a={name:l.OS_MAP.WebOS};return r&&r.length&&(a.version=r),a}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var r=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||i.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:l.OS_MAP.BlackBerry,version:r}}},{test:[/bada/i],describe:function(t){var r=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:l.OS_MAP.Bada,version:r}}},{test:[/tizen/i],describe:function(t){var r=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:l.OS_MAP.Tizen,version:r}}},{test:[/linux/i],describe:function(){return{name:l.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:l.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var r=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:l.OS_MAP.PlayStation4,version:r}}}],h.exports=n.default},94:function(h,n,s){"use strict";n.__esModule=!0,n.default=void 0;var o,i=(o=s(17))&&o.__esModule?o:{default:o},l=s(18);n.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var r=i.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",a={type:l.PLATFORMS_MAP.mobile,vendor:"Huawei"};return r&&(a.model=r),a}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:l.PLATFORMS_MAP.tablet}}},{test:function(t){var r=t.test(/ipod|iphone/i),a=t.test(/like (ipod|iphone)/i);return r&&!a},describe:function(t){var r=i.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:l.PLATFORMS_MAP.mobile,vendor:"Apple",model:r}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:l.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:l.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:l.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var r=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&r>=3},describe:function(){return{type:l.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:l.PLATFORMS_MAP.tv}}}],h.exports=n.default},95:function(h,n,s){"use strict";n.__esModule=!0,n.default=void 0;var o,i=(o=s(17))&&o.__esModule?o:{default:o},l=s(18);n.default=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:l.ENGINE_MAP.Blink};var r=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:l.ENGINE_MAP.EdgeHTML,version:r}}},{test:[/trident/i],describe:function(t){var r={name:l.ENGINE_MAP.Trident},a=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:function(t){return t.test(/presto/i)},describe:function(t){var r={name:l.ENGINE_MAP.Presto},a=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:function(t){var r=t.test(/gecko/i),a=t.test(/like gecko/i);return r&&!a},describe:function(t){var r={name:l.ENGINE_MAP.Gecko},a=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:l.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var r={name:l.ENGINE_MAP.WebKit},a=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return a&&(r.version=a),r}}],h.exports=n.default}})},7244:(p,h,n)=>{var i=n(3436)(n(2119),"DataView");p.exports=i},4994:(p,h,n)=>{var s=n(4312),o=n(6421),i=n(13),l=n(8685),f=n(6676);function t(r){var a=-1,x=null==r?0:r.length;for(this.clear();++a<x;){var g=r[a];this.set(g[0],g[1])}}t.prototype.clear=s,t.prototype.delete=o,t.prototype.get=i,t.prototype.has=l,t.prototype.set=f,p.exports=t},9215:(p,h,n)=>{var s=n(1840),o=n(4378),i=n(4981),l=n(7343),f=n(8895);function t(r){var a=-1,x=null==r?0:r.length;for(this.clear();++a<x;){var g=r[a];this.set(g[0],g[1])}}t.prototype.clear=s,t.prototype.delete=o,t.prototype.get=i,t.prototype.has=l,t.prototype.set=f,p.exports=t},1501:(p,h,n)=>{var i=n(3436)(n(2119),"Map");p.exports=i},9850:(p,h,n)=>{var s=n(638),o=n(1184),i=n(866),l=n(3771),f=n(1772);function t(r){var a=-1,x=null==r?0:r.length;for(this.clear();++a<x;){var g=r[a];this.set(g[0],g[1])}}t.prototype.clear=s,t.prototype.delete=o,t.prototype.get=i,t.prototype.has=l,t.prototype.set=f,p.exports=t},4267:(p,h,n)=>{var i=n(3436)(n(2119),"Promise");p.exports=i},6323:(p,h,n)=>{var i=n(3436)(n(2119),"Set");p.exports=i},2858:(p,h,n)=>{var s=n(9215),o=n(3720),i=n(4410),l=n(5576),f=n(2247),t=n(1585);function r(a){var x=this.__data__=new s(a);this.size=x.size}r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=l,r.prototype.has=f,r.prototype.set=t,p.exports=r},443:(p,h,n)=>{var s=n(2119);p.exports=s.Symbol},3457:(p,h,n)=>{var s=n(2119);p.exports=s.Uint8Array},4243:(p,h,n)=>{var i=n(3436)(n(2119),"WeakMap");p.exports=i},6837:p=>{p.exports=function h(n,s){for(var o=-1,i=null==n?0:n.length;++o<i&&!1!==s(n[o],o,n););return n}},9779:p=>{p.exports=function h(n,s){for(var o=-1,i=null==n?0:n.length,l=0,f=[];++o<i;){var t=n[o];s(t,o,n)&&(f[l++]=t)}return f}},2271:(p,h,n)=>{var s=n(5334),o=n(7151),i=n(1503),l=n(891),f=n(8442),t=n(8159),a=Object.prototype.hasOwnProperty;p.exports=function x(g,v){var b=i(g),_=!b&&o(g),m=!b&&!_&&l(g),C=!b&&!_&&!m&&t(g),M=b||_||m||C,A=M?s(g.length,String):[],k=A.length;for(var S in g)(v||a.call(g,S))&&(!M||!("length"==S||m&&("offset"==S||"parent"==S)||C&&("buffer"==S||"byteLength"==S||"byteOffset"==S)||f(S,k)))&&A.push(S);return A}},5059:p=>{p.exports=function h(n,s){for(var o=-1,i=s.length,l=n.length;++o<i;)n[l+o]=s[o];return n}},9719:(p,h,n)=>{var s=n(5683),o=n(217),l=Object.prototype.hasOwnProperty;p.exports=function f(t,r,a){var x=t[r];(!l.call(t,r)||!o(x,a)||void 0===a&&!(r in t))&&s(t,r,a)}},3503:(p,h,n)=>{var s=n(217);p.exports=function o(i,l){for(var f=i.length;f--;)if(s(i[f][0],l))return f;return-1}},4121:(p,h,n)=>{var s=n(1989),o=n(118);p.exports=function i(l,f){return l&&s(f,o(f),l)}},9287:(p,h,n)=>{var s=n(1989),o=n(6555);p.exports=function i(l,f){return l&&s(f,o(f),l)}},5683:(p,h,n)=>{var s=n(6713);p.exports=function o(i,l,f){"__proto__"==l&&s?s(i,l,{configurable:!0,enumerable:!0,value:f,writable:!0}):i[l]=f}},4462:(p,h,n)=>{var s=n(2858),o=n(6837),i=n(9719),l=n(4121),f=n(9287),t=n(9292),r=n(9454),a=n(4444),x=n(9905),g=n(7597),v=n(6967),b=n(8794),_=n(6782),m=n(7878),C=n(4264),M=n(1503),A=n(891),k=n(3222),S=n(5940),T=n(799),E=n(118),N=n(6555),B="[object Arguments]",gt="[object Function]",ht="[object Object]",R={};R[B]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object DataView]"]=R["[object Boolean]"]=R["[object Date]"]=R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Map]"]=R["[object Number]"]=R[ht]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object Symbol]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R["[object Error]"]=R[gt]=R["[object WeakMap]"]=!1,p.exports=function $(D,rt,it,Rt,Q,q){var L,Y=1&rt,dt=2&rt,bt=4&rt;if(it&&(L=Q?it(D,Rt,Q,q):it(D)),void 0!==L)return L;if(!S(D))return D;var ut=M(D);if(ut){if(L=_(D),!Y)return r(D,L)}else{var ot=b(D),G=ot==gt||"[object GeneratorFunction]"==ot;if(A(D))return t(D,Y);if(ot==ht||ot==B||G&&!Q){if(L=dt||G?{}:C(D),!Y)return dt?x(D,f(L,D)):a(D,l(L,D))}else{if(!R[ot])return Q?D:{};L=m(D,ot,Y)}}q||(q=new s);var pt=q.get(D);if(pt)return pt;q.set(D,L),T(D)?D.forEach(function(X){L.add($(X,rt,it,X,D,q))}):k(D)&&D.forEach(function(X,et){L.set(et,$(X,rt,it,et,D,q))});var yt=ut?void 0:(bt?dt?v:g:dt?N:E)(D);return o(yt||D,function(X,et){yt&&(X=D[et=X]),i(L,et,$(X,rt,it,et,D,q))}),L}},8858:(p,h,n)=>{var s=n(5940),o=Object.create,i=function(){function l(){}return function(f){if(!s(f))return{};if(o)return o(f);l.prototype=f;var t=new l;return l.prototype=void 0,t}}();p.exports=i},8247:(p,h,n)=>{var s=n(5059),o=n(1503);p.exports=function i(l,f,t){var r=f(l);return o(l)?r:s(r,t(l))}},3337:(p,h,n)=>{var s=n(443),o=n(1318),i=n(2902),t=s?s.toStringTag:void 0;p.exports=function r(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":t&&t in Object(a)?o(a):i(a)}},186:(p,h,n)=>{var s=n(3337),o=n(2671);p.exports=function l(f){return o(f)&&"[object Arguments]"==s(f)}},7021:(p,h,n)=>{var s=n(8794),o=n(2671);p.exports=function l(f){return o(f)&&"[object Map]"==s(f)}},7304:(p,h,n)=>{var s=n(5946),o=n(1943),i=n(5940),l=n(2827),t=/^\[object .+?Constructor\]$/,v=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");p.exports=function b(_){return!(!i(_)||o(_))&&(s(_)?v:t).test(l(_))}},771:(p,h,n)=>{var s=n(8794),o=n(2671);p.exports=function l(f){return o(f)&&"[object Set]"==s(f)}},1083:(p,h,n)=>{var s=n(3337),o=n(6231),i=n(2671),I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I["[object Arguments]"]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object Boolean]"]=I["[object DataView]"]=I["[object Date]"]=I["[object Error]"]=I["[object Function]"]=I["[object Map]"]=I["[object Number]"]=I["[object Object]"]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object WeakMap]"]=!1,p.exports=function V(st){return i(st)&&o(st.length)&&!!I[s(st)]}},1172:(p,h,n)=>{var s=n(5488),o=n(5491),l=Object.prototype.hasOwnProperty;p.exports=function f(t){if(!s(t))return o(t);var r=[];for(var a in Object(t))l.call(t,a)&&"constructor"!=a&&r.push(a);return r}},2809:(p,h,n)=>{var s=n(5940),o=n(5488),i=n(2158),f=Object.prototype.hasOwnProperty;p.exports=function t(r){if(!s(r))return i(r);var a=o(r),x=[];for(var g in r)"constructor"==g&&(a||!f.call(r,g))||x.push(g);return x}},5334:p=>{p.exports=function h(n,s){for(var o=-1,i=Array(n);++o<n;)i[o]=s(o);return i}},5647:p=>{p.exports=function h(n){return function(s){return n(s)}}},3362:(p,h,n)=>{var s=n(3457);p.exports=function o(i){var l=new i.constructor(i.byteLength);return new s(l).set(new s(i)),l}},9292:(p,h,n)=>{p=n.nmd(p);var s=n(2119),o=h&&!h.nodeType&&h,i=o&&p&&!p.nodeType&&p,f=i&&i.exports===o?s.Buffer:void 0,t=f?f.allocUnsafe:void 0;p.exports=function r(a,x){if(x)return a.slice();var g=a.length,v=t?t(g):new a.constructor(g);return a.copy(v),v}},7e3:(p,h,n)=>{var s=n(3362);p.exports=function o(i,l){var f=l?s(i.buffer):i.buffer;return new i.constructor(f,i.byteOffset,i.byteLength)}},4098:p=>{var h=/\w*$/;p.exports=function n(s){var o=new s.constructor(s.source,h.exec(s));return o.lastIndex=s.lastIndex,o}},2533:(p,h,n)=>{var s=n(443),o=s?s.prototype:void 0,i=o?o.valueOf:void 0;p.exports=function l(f){return i?Object(i.call(f)):{}}},5208:(p,h,n)=>{var s=n(3362);p.exports=function o(i,l){var f=l?s(i.buffer):i.buffer;return new i.constructor(f,i.byteOffset,i.length)}},9454:p=>{p.exports=function h(n,s){var o=-1,i=n.length;for(s||(s=Array(i));++o<i;)s[o]=n[o];return s}},1989:(p,h,n)=>{var s=n(9719),o=n(5683);p.exports=function i(l,f,t,r){var a=!t;t||(t={});for(var x=-1,g=f.length;++x<g;){var v=f[x],b=r?r(t[v],l[v],v,t,l):void 0;void 0===b&&(b=l[v]),a?o(t,v,b):s(t,v,b)}return t}},4444:(p,h,n)=>{var s=n(1989),o=n(9383);p.exports=function i(l,f){return s(l,o(l),f)}},9905:(p,h,n)=>{var s=n(1989),o=n(3051);p.exports=function i(l,f){return s(l,o(l),f)}},4610:(p,h,n)=>{var s=n(2119);p.exports=s["__core-js_shared__"]},6713:(p,h,n)=>{var s=n(3436),o=function(){try{var i=s(Object,"defineProperty");return i({},"",{}),i}catch{}}();p.exports=o},9122:p=>{var h="object"==typeof global&&global&&global.Object===Object&&global;p.exports=h},7597:(p,h,n)=>{var s=n(8247),o=n(9383),i=n(118);p.exports=function l(f){return s(f,i,o)}},6967:(p,h,n)=>{var s=n(8247),o=n(3051),i=n(6555);p.exports=function l(f){return s(f,i,o)}},4537:(p,h,n)=>{var s=n(3819);p.exports=function o(i,l){var f=i.__data__;return s(l)?f["string"==typeof l?"string":"hash"]:f.map}},3436:(p,h,n)=>{var s=n(7304),o=n(1990);p.exports=function i(l,f){var t=o(l,f);return s(t)?t:void 0}},9519:(p,h,n)=>{var o=n(9385)(Object.getPrototypeOf,Object);p.exports=o},1318:(p,h,n)=>{var s=n(443),o=Object.prototype,i=o.hasOwnProperty,l=o.toString,f=s?s.toStringTag:void 0;p.exports=function t(r){var a=i.call(r,f),x=r[f];try{r[f]=void 0;var g=!0}catch{}var v=l.call(r);return g&&(a?r[f]=x:delete r[f]),v}},9383:(p,h,n)=>{var s=n(9779),o=n(9975),l=Object.prototype.propertyIsEnumerable,f=Object.getOwnPropertySymbols;p.exports=f?function(r){return null==r?[]:(r=Object(r),s(f(r),function(a){return l.call(r,a)}))}:o},3051:(p,h,n)=>{var s=n(5059),o=n(9519),i=n(9383),l=n(9975);p.exports=Object.getOwnPropertySymbols?function(r){for(var a=[];r;)s(a,i(r)),r=o(r);return a}:l},8794:(p,h,n)=>{var s=n(7244),o=n(1501),i=n(4267),l=n(6323),f=n(4243),t=n(3337),r=n(2827),a="[object Map]",g="[object Promise]",v="[object Set]",b="[object WeakMap]",_="[object DataView]",m=r(s),C=r(o),M=r(i),A=r(l),k=r(f),S=t;(s&&S(new s(new ArrayBuffer(1)))!=_||o&&S(new o)!=a||i&&S(i.resolve())!=g||l&&S(new l)!=v||f&&S(new f)!=b)&&(S=function(T){var E=t(T),N="[object Object]"==E?T.constructor:void 0,U=N?r(N):"";if(U)switch(U){case m:return _;case C:return a;case M:return g;case A:return v;case k:return b}return E}),p.exports=S},1990:p=>{p.exports=function h(n,s){return n?.[s]}},4312:(p,h,n)=>{var s=n(862);p.exports=function o(){this.__data__=s?s(null):{},this.size=0}},6421:p=>{p.exports=function h(n){var s=this.has(n)&&delete this.__data__[n];return this.size-=s?1:0,s}},13:(p,h,n)=>{var s=n(862),l=Object.prototype.hasOwnProperty;p.exports=function f(t){var r=this.__data__;if(s){var a=r[t];return"__lodash_hash_undefined__"===a?void 0:a}return l.call(r,t)?r[t]:void 0}},8685:(p,h,n)=>{var s=n(862),i=Object.prototype.hasOwnProperty;p.exports=function l(f){var t=this.__data__;return s?void 0!==t[f]:i.call(t,f)}},6676:(p,h,n)=>{var s=n(862);p.exports=function i(l,f){var t=this.__data__;return this.size+=this.has(l)?0:1,t[l]=s&&void 0===f?"__lodash_hash_undefined__":f,this}},6782:p=>{var n=Object.prototype.hasOwnProperty;p.exports=function s(o){var i=o.length,l=new o.constructor(i);return i&&"string"==typeof o[0]&&n.call(o,"index")&&(l.index=o.index,l.input=o.input),l}},7878:(p,h,n)=>{var s=n(3362),o=n(7e3),i=n(4098),l=n(2533),f=n(5208);p.exports=function F(B,J,I){var V=B.constructor;switch(J){case"[object ArrayBuffer]":return s(B);case"[object Boolean]":case"[object Date]":return new V(+B);case"[object DataView]":return o(B,I);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return f(B,I);case"[object Map]":case"[object Set]":return new V;case"[object Number]":case"[object String]":return new V(B);case"[object RegExp]":return i(B);case"[object Symbol]":return l(B)}}},4264:(p,h,n)=>{var s=n(8858),o=n(9519),i=n(5488);p.exports=function l(f){return"function"!=typeof f.constructor||i(f)?{}:s(o(f))}},8442:p=>{var n=/^(?:0|[1-9]\d*)$/;p.exports=function s(o,i){var l=typeof o;return!!(i=i??9007199254740991)&&("number"==l||"symbol"!=l&&n.test(o))&&o>-1&&o%1==0&&o<i}},3819:p=>{p.exports=function h(n){var s=typeof n;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==n:null===n}},1943:(p,h,n)=>{var l,s=n(4610),o=(l=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"";p.exports=function i(l){return!!o&&o in l}},5488:p=>{var h=Object.prototype;p.exports=function n(s){var o=s&&s.constructor;return s===("function"==typeof o&&o.prototype||h)}},1840:p=>{p.exports=function h(){this.__data__=[],this.size=0}},4378:(p,h,n)=>{var s=n(3503),i=Array.prototype.splice;p.exports=function l(f){var t=this.__data__,r=s(t,f);return!(r<0||(r==t.length-1?t.pop():i.call(t,r,1),--this.size,0))}},4981:(p,h,n)=>{var s=n(3503);p.exports=function o(i){var l=this.__data__,f=s(l,i);return f<0?void 0:l[f][1]}},7343:(p,h,n)=>{var s=n(3503);p.exports=function o(i){return s(this.__data__,i)>-1}},8895:(p,h,n)=>{var s=n(3503);p.exports=function o(i,l){var f=this.__data__,t=s(f,i);return t<0?(++this.size,f.push([i,l])):f[t][1]=l,this}},638:(p,h,n)=>{var s=n(4994),o=n(9215),i=n(1501);p.exports=function l(){this.size=0,this.__data__={hash:new s,map:new(i||o),string:new s}}},1184:(p,h,n)=>{var s=n(4537);p.exports=function o(i){var l=s(this,i).delete(i);return this.size-=l?1:0,l}},866:(p,h,n)=>{var s=n(4537);p.exports=function o(i){return s(this,i).get(i)}},3771:(p,h,n)=>{var s=n(4537);p.exports=function o(i){return s(this,i).has(i)}},1772:(p,h,n)=>{var s=n(4537);p.exports=function o(i,l){var f=s(this,i),t=f.size;return f.set(i,l),this.size+=f.size==t?0:1,this}},862:(p,h,n)=>{var o=n(3436)(Object,"create");p.exports=o},5491:(p,h,n)=>{var o=n(9385)(Object.keys,Object);p.exports=o},2158:p=>{p.exports=function h(n){var s=[];if(null!=n)for(var o in Object(n))s.push(o);return s}},3597:(p,h,n)=>{p=n.nmd(p);var s=n(9122),o=h&&!h.nodeType&&h,i=o&&p&&!p.nodeType&&p,f=i&&i.exports===o&&s.process,t=function(){try{return i&&i.require&&i.require("util").types||f&&f.binding&&f.binding("util")}catch{}}();p.exports=t},2902:p=>{var n=Object.prototype.toString;p.exports=function s(o){return n.call(o)}},9385:p=>{p.exports=function h(n,s){return function(o){return n(s(o))}}},2119:(p,h,n)=>{var s=n(9122),o="object"==typeof self&&self&&self.Object===Object&&self,i=s||o||Function("return this")();p.exports=i},3720:(p,h,n)=>{var s=n(9215);p.exports=function o(){this.__data__=new s,this.size=0}},4410:p=>{p.exports=function h(n){var s=this.__data__,o=s.delete(n);return this.size=s.size,o}},5576:p=>{p.exports=function h(n){return this.__data__.get(n)}},2247:p=>{p.exports=function h(n){return this.__data__.has(n)}},1585:(p,h,n)=>{var s=n(9215),o=n(1501),i=n(9850);p.exports=function f(t,r){var a=this.__data__;if(a instanceof s){var x=a.__data__;if(!o||x.length<199)return x.push([t,r]),this.size=++a.size,this;a=this.__data__=new i(x)}return a.set(t,r),this.size=a.size,this}},2827:p=>{var n=Function.prototype.toString;p.exports=function s(o){if(null!=o){try{return n.call(o)}catch{}try{return o+""}catch{}}return""}},1094:(p,h,n)=>{var s=n(4462);p.exports=function i(l){return s(l,4)}},217:p=>{p.exports=function h(n,s){return n===s||n!=n&&s!=s}},7151:(p,h,n)=>{var s=n(186),o=n(2671),i=Object.prototype,l=i.hasOwnProperty,f=i.propertyIsEnumerable,t=s(function(){return arguments}())?s:function(r){return o(r)&&l.call(r,"callee")&&!f.call(r,"callee")};p.exports=t},1503:p=>{p.exports=Array.isArray},6507:(p,h,n)=>{var s=n(5946),o=n(6231);p.exports=function i(l){return null!=l&&o(l.length)&&!s(l)}},891:(p,h,n)=>{p=n.nmd(p);var s=n(2119),o=n(3580),i=h&&!h.nodeType&&h,l=i&&p&&!p.nodeType&&p,t=l&&l.exports===i?s.Buffer:void 0;p.exports=(t?t.isBuffer:void 0)||o},5946:(p,h,n)=>{var s=n(3337),o=n(5940);p.exports=function r(a){if(!o(a))return!1;var x=s(a);return"[object Function]"==x||"[object GeneratorFunction]"==x||"[object AsyncFunction]"==x||"[object Proxy]"==x}},6231:p=>{p.exports=function n(s){return"number"==typeof s&&s>-1&&s%1==0&&s<=9007199254740991}},3222:(p,h,n)=>{var s=n(7021),o=n(5647),i=n(3597),l=i&&i.isMap,f=l?o(l):s;p.exports=f},5940:p=>{p.exports=function h(n){var s=typeof n;return null!=n&&("object"==s||"function"==s)}},2671:p=>{p.exports=function h(n){return null!=n&&"object"==typeof n}},799:(p,h,n)=>{var s=n(771),o=n(5647),i=n(3597),l=i&&i.isSet,f=l?o(l):s;p.exports=f},8159:(p,h,n)=>{var s=n(1083),o=n(5647),i=n(3597),l=i&&i.isTypedArray,f=l?o(l):s;p.exports=f},118:(p,h,n)=>{var s=n(2271),o=n(1172),i=n(6507);p.exports=function l(f){return i(f)?s(f):o(f)}},6555:(p,h,n)=>{var s=n(2271),o=n(2809),i=n(6507);p.exports=function l(f){return i(f)?s(f,!0):o(f)}},9975:p=>{p.exports=function h(){return[]}},3580:p=>{p.exports=function h(){return!1}},2754:(p,h,n)=>{"use strict";h.TD=void 0;var o=n(4354);Object.defineProperty(h,"TD",{enumerable:!0,get:function(){return o.requestMediaPermissions}})},4354:function(p,h,n){"use strict";var s=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(h,"__esModule",{value:!0}),h.requestVideoPermissions=h.requestAudioPermissions=h.requestMediaPermissions=h.MediaPermissionsErrorType=void 0;const o=s(n(7230));var i,r;(r=i=h.MediaPermissionsErrorType||(h.MediaPermissionsErrorType={})).SystemPermissionDenied="SystemPermissionDenied",r.UserPermissionDenied="UserPermissionDenied",r.CouldNotStartVideoSource="CouldNotStartVideoSource",r.Generic="Generic",h.requestMediaPermissions=r=>new Promise((a,x)=>{navigator.mediaDevices.getUserMedia(r??{audio:!0,video:!0}).then(g=>{g.getTracks().forEach(v=>{v.stop()}),a(!0)}).catch(g=>{const b=o.default.getParser(window.navigator.userAgent).getBrowserName(),_=g.name,m=g.message;let C=i.Generic;"Chrome"===b?"NotAllowedError"===_?"Permission denied by system"===m?C=i.SystemPermissionDenied:"Permission denied"===m&&(C=i.UserPermissionDenied):"NotReadableError"===_&&(C=i.CouldNotStartVideoSource):"Safari"===b?"NotAllowedError"===_&&(C=i.UserPermissionDenied):"Microsoft Edge"===b?"NotAllowedError"===_?C=i.UserPermissionDenied:"NotReadableError"===_&&(C=i.CouldNotStartVideoSource):"Firefox"===b&&("NotFoundError"===_||"NotReadableError"===_?C=i.SystemPermissionDenied:"NotAllowedError"===_?C=i.UserPermissionDenied:"AbortError"===_&&(C=i.CouldNotStartVideoSource)),x({type:C,name:g.name,message:g.message})})}),h.requestAudioPermissions=()=>(0,h.requestMediaPermissions)({audio:!0,video:!1}),h.requestVideoPermissions=()=>(0,h.requestMediaPermissions)({audio:!1,video:!0})},5439:p=>{window,p.exports=function(h){var n={};function s(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return h[o].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=h,s.c=n,s.d=function(o,i,l){s.o(o,i)||Object.defineProperty(o,i,{enumerable:!0,get:l})},s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,i){if(1&i&&(o=s(o)),8&i||4&i&&"object"==typeof o&&o&&o.__esModule)return o;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&i&&"string"!=typeof o)for(var f in o)s.d(l,f,function(t){return o[t]}.bind(null,f));return l},s.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(i,"a",i),i},s.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},s.p="/dist/",s(s.s=1)}([function(h,n,s){"use strict";var o=this&&this.__awaiter||function(l,f,t,r){return new(t||(t=Promise))(function(a,x){function g(_){try{b(r.next(_))}catch(m){x(m)}}function v(_){try{b(r.throw(_))}catch(m){x(m)}}function b(_){var m;_.done?a(_.value):(m=_.value,m instanceof t?m:new t(function(C){C(m)})).then(g,v)}b((r=r.apply(l,f||[])).next())})},i=this&&this.__generator||function(l,f){var t,r,a,x,g={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return x={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x;function v(b){return function(_){return function(m){if(t)throw new TypeError("Generator is already executing.");for(;x&&(x=0,m[0]&&(g=0)),g;)try{if(t=1,r&&(a=2&m[0]?r.return:m[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,m[1])).done)return a;switch(r=0,a&&(m=[2&m[0],a.value]),m[0]){case 0:case 1:a=m;break;case 4:return g.label++,{value:m[1],done:!1};case 5:g.label++,r=m[1],m=[0];continue;case 7:m=g.ops.pop(),g.trys.pop();continue;default:if(!((a=(a=g.trys).length>0&&a[a.length-1])||6!==m[0]&&2!==m[0])){g=0;continue}if(3===m[0]&&(!a||m[1]>a[0]&&m[1]<a[3])){g.label=m[1];break}if(6===m[0]&&g.label<a[1]){g.label=a[1],a=m;break}if(a&&g.label<a[2]){g.label=a[2],g.ops.push(m);break}a[2]&&g.ops.pop(),g.trys.pop();continue}m=f.call(l,g)}catch(C){m=[6,C],r=0}finally{t=a=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([b,_])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.file2b64=void 0,n.file2b64=function(l){return o(this,void 0,void 0,function(){var f,t;return i(this,function(r){return f=new FileReader,t=new Promise(function(a,x){f.addEventListener("load",function(){var g,v=null===(g=f.result)||void 0===g?void 0:g.toString();v?a(v):x("could not convert file to base64")},!1)}),f.readAsDataURL(l),[2,t]})})}},function(h,n,s){"use strict";var o=this&&this.__awaiter||function(g,v,b,_){return new(b||(b=Promise))(function(m,C){function M(S){try{k(_.next(S))}catch(T){C(T)}}function A(S){try{k(_.throw(S))}catch(T){C(T)}}function k(S){var T;S.done?m(S.value):(T=S.value,T instanceof b?T:new b(function(E){E(T)})).then(M,A)}k((_=_.apply(g,v||[])).next())})},i=this&&this.__generator||function(g,v){var b,_,m,C,M={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return C={next:A(0),throw:A(1),return:A(2)},"function"==typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function A(k){return function(S){return function(T){if(b)throw new TypeError("Generator is already executing.");for(;C&&(C=0,T[0]&&(M=0)),M;)try{if(b=1,_&&(m=2&T[0]?_.return:T[0]?_.throw||((m=_.return)&&m.call(_),0):_.next)&&!(m=m.call(_,T[1])).done)return m;switch(_=0,m&&(T=[2&T[0],m.value]),T[0]){case 0:case 1:m=T;break;case 4:return M.label++,{value:T[1],done:!1};case 5:M.label++,_=T[1],T=[0];continue;case 7:T=M.ops.pop(),M.trys.pop();continue;default:if(!((m=(m=M.trys).length>0&&m[m.length-1])||6!==T[0]&&2!==T[0])){M=0;continue}if(3===T[0]&&(!m||T[1]>m[0]&&T[1]<m[3])){M.label=T[1];break}if(6===T[0]&&M.label<m[1]){M.label=m[1],m=T;break}if(m&&M.label<m[2]){M.label=m[2],M.ops.push(T);break}m[2]&&M.ops.pop(),M.trys.pop();continue}T=v.call(g,M)}catch(E){T=[6,E],_=0}finally{b=m=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([k,S])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.imageCompressor=void 0;var l=s(2),f=s(3),t=s(0),r=s(4),a=s(5),x=function(){function g(v,b){var _=this;this.quill=v,this.options=b||{};var m=!!b.debug;this.Logger=new a.ConsoleLogger(m,!!b.suppressErrorLogging),(0,f.warnAboutOptions)(b,this.Logger),this.imageDrop=new l.ImageDrop(v,function(A){return o(_,void 0,void 0,function(){var k;return i(this,function(S){switch(S.label){case 0:return this.Logger.log("onImageDrop",{dataUrl:A}),[4,this.downscaleImageFromUrl(A)];case 1:return k=S.sent(),this.insertToEditor(k,g.b64toBlob(k)),[2]}})})},this.Logger),this.Logger.log("fileChanged",{options:b,quill:v,debug:m});var M=this.quill.getModule("toolbar");M?M.addHandler("image",function(){return _.selectLocalImage()}):this.Logger.error("Quill toolbar module not found! need { toolbar: // options } in Quill.modules for image icon to sit in")}return g.b64toBlob=function(v){for(var b=atob(v.split(",")[1]),_=v.slice(5).split(";")[0],m=new ArrayBuffer(b.length),C=new Uint8Array(m),M=0;M<b.length;M++)C[M]=b.charCodeAt(M);return new Blob([m],{type:_})},g.prototype.selectLocalImage=function(v){var b=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=function(){return b.fileChanged().then(function(){return v&&v()})},document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){b.fileHolder&&document.body.removeChild(b.fileHolder)})},g.prototype.fileChanged=function(v){var b;return o(this,void 0,void 0,function(){var _,m,C,M;return i(this,function(A){switch(A.label){case 0:return(_=v||(null===(b=this.fileHolder)||void 0===b?void 0:b.files))&&_.length?(this.Logger.log("fileChanged",{file:m=_[0]}),m?[4,(0,t.file2b64)(m)]:[2]):[2];case 1:return C=A.sent(),[4,this.downscaleImageFromUrl(C)];case 2:return M=A.sent(),this.insertToEditor(M,g.b64toBlob(M)),[2]}})})},g.prototype.downscaleImageFromUrl=function(v){return o(this,void 0,void 0,function(){var b;return i(this,function(_){switch(_.label){case 0:return[4,(0,r.downscaleImage)(this.Logger,v,this.options.maxWidth,this.options.maxHeight,this.options.imageType,this.options.keepImageTypes,this.options.ignoreImageTypes,this.options.quality)];case 1:return b=_.sent(),this.Logger.log("downscaleImageFromUrl",{dataUrl:v,dataUrlCompressed:b}),[2,b]}})})},g.prototype.insertToEditor=function(v,b){if(this.options.insertIntoEditor)this.options.insertIntoEditor(v,b);else{this.Logger.log("insertToEditor",{url:v}),this.range=this.quill.getSelection();var _=this.range;if(!_)return;this.logFileSize(v),this.quill.insertEmbed(_.index,"image","".concat(v),"user"),_.index++,this.quill.setSelection(_,"api")}},g.prototype.logFileSize=function(v){var b=(Math.round(3*(v.length-22)/4)/1024).toFixed(0);this.Logger.log("estimated img size: "+b+" kb")},g}();n.imageCompressor=x,window.imageCompressor=x,n.default=x},function(h,n,s){"use strict";var o=this&&this.__awaiter||function(x,g,v,b){return new(v||(v=Promise))(function(_,m){function C(k){try{A(b.next(k))}catch(S){m(S)}}function M(k){try{A(b.throw(k))}catch(S){m(S)}}function A(k){var S;k.done?_(k.value):(S=k.value,S instanceof v?S:new v(function(T){T(S)})).then(C,M)}A((b=b.apply(x,g||[])).next())})},i=this&&this.__generator||function(x,g){var v,b,_,m,C={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return m={next:M(0),throw:M(1),return:M(2)},"function"==typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m;function M(A){return function(k){return function(S){if(v)throw new TypeError("Generator is already executing.");for(;m&&(m=0,S[0]&&(C=0)),C;)try{if(v=1,b&&(_=2&S[0]?b.return:S[0]?b.throw||((_=b.return)&&_.call(b),0):b.next)&&!(_=_.call(b,S[1])).done)return _;switch(b=0,_&&(S=[2&S[0],_.value]),S[0]){case 0:case 1:_=S;break;case 4:return C.label++,{value:S[1],done:!1};case 5:C.label++,b=S[1],S=[0];continue;case 7:S=C.ops.pop(),C.trys.pop();continue;default:if(!((_=(_=C.trys).length>0&&_[_.length-1])||6!==S[0]&&2!==S[0])){C=0;continue}if(3===S[0]&&(!_||S[1]>_[0]&&S[1]<_[3])){C.label=S[1];break}if(6===S[0]&&C.label<_[1]){C.label=_[1],_=S;break}if(_&&C.label<_[2]){C.label=_[2],C.ops.push(S);break}_[2]&&C.ops.pop(),C.trys.pop();continue}S=g.call(x,C)}catch(T){S=[6,T],b=0}finally{v=_=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([A,k])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ImageDrop=void 0;var l=s(0),f=function(){function x(g,v,b){var _=this;this.quill=g,this.onNewDataUrl=v,this.logger=b,this.quill.root.addEventListener("drop",function(m){return _.handleDrop(m)},!1),this.quill.root.addEventListener("paste",function(m){return _.handlePaste(m)},!1)}return x.prototype.handleDrop=function(g){return o(this,void 0,void 0,function(){var v,b,_,m,C,M,A;return i(this,function(k){switch(k.label){case 0:return g.preventDefault(),document.caretRangeFromPoint&&(v=document.getSelection(),b=document.caretRangeFromPoint(g.clientX,g.clientY),v&&b&&v.setBaseAndExtent(b.startContainer,b.startOffset,b.startContainer,b.startOffset)),[4,r(g)];case 1:return _=k.sent(),m=Array.from(_||[]).filter(function(S){return a(S.type)}),(C=m?.[0])?[4,(0,l.file2b64)(C)]:[3,3];case 2:return A=k.sent(),this.logger.log("handleNewImageFiles",{evt:g,files:_,filesFiltered:m,firstImage:C,base64ImageSrc:A}),this.onNewDataUrl(A),[2];case 3:return[4,t(g)];case 4:return(M=k.sent())?[4,(0,l.file2b64)(M)]:[3,6];case 5:return A=k.sent(),this.logger.log("handleNewImageFiles",{evt:g,blob:M,base64ImageSrc:A}),this.onNewDataUrl(A),[2];case 6:return[2]}})})},x.prototype.handlePaste=function(g){var v,b;return o(this,void 0,void 0,function(){var _,m,C,M;return i(this,function(A){switch(A.label){case 0:return _=Array.from((null===(v=g?.clipboardData)||void 0===v?void 0:v.items)||[]),this.logger.log("handlePaste",{files:_,evt:g}),m=_.filter(function(k){return a(k.type)}),this.logger.log("handlePaste",{images:m,evt:g}),m.length?m.filter(function(k){return"text/html"!==k.type}).length?(g.preventDefault(),(C=null===(b=m.pop())||void 0===b?void 0:b.getAsFile())?[4,(0,l.file2b64)(C)]:[2]):(this.logger.log("handlePaste also detected html"),[2]):[2];case 1:return M=A.sent(),this.logger.log("handleNewImageFiles",{base64ImageSrc:M}),this.onNewDataUrl(M),[2]}})})},x}();function t(x){var g;return o(this,void 0,void 0,function(){var v;return i(this,function(b){switch(b.label){case 0:return(v=null===(g=x.dataTransfer)||void 0===g?void 0:g.getData("URL"))?[4,fetch(v)]:[3,3];case 1:return[4,b.sent().blob()];case 2:return[2,b.sent()];case 3:return[2]}})})}function r(x){var g;return o(this,void 0,void 0,function(){return i(this,function(v){return[2,null===(g=x?.dataTransfer)||void 0===g?void 0:g.files]})})}function a(x){return!!x.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)/i)}n.ImageDrop=f},function(h,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.warnAboutOptions=void 0,n.warnAboutOptions=function(o,i){o.maxWidth=o.maxWidth||1e3,o.maxHeight=o.maxHeight||1e3,o.maxWidth&&"number"!=typeof o.maxWidth&&(i.warn("[config error] 'maxWidth' is required to be a \"number\" (in pixels), \nreceived: ".concat(o.maxWidth,"\n-> using default 1000")),o.maxWidth=1e3),o.maxHeight&&"number"!=typeof o.maxHeight&&(i.warn("[config error] 'maxHeight' is required to be a \"number\" (in pixels), \nreceived: ".concat(o.maxHeight,"\n-> using default 1000")),o.maxHeight=1e3),o.quality&&"number"!=typeof o.quality&&(i.warn("quill.imageCompressor: [config error] 'quality' is required to be a \"number\", \nreceived: ".concat(o.quality,"\n-> using default 0.7")),o.quality=.7),!o.imageType||"string"==typeof o.imageType&&o.imageType.startsWith("image/")||(i.warn('quill.imageCompressor: [config error] \'imageType\' is required be in the form of "image/png" or "image/jpeg" etc ..., \nreceived: '.concat(o.imageType,"\n-> using default image/jpeg")),o.imageType="image/jpeg"),o.keepImageTypes||(o.keepImageTypes=[]),o.keepImageTypes&&!Array.isArray(o.keepImageTypes)&&(i.warn("quill.imageCompressor: [config error] 'keepImageTypes' is required to be a \"array\", received: ".concat(o.keepImageTypes," -> using default []")),o.keepImageTypes=[]),o.ignoreImageTypes||(o.ignoreImageTypes=[]),o.ignoreImageTypes&&!Array.isArray(o.ignoreImageTypes)&&(i.warn("quill.imageCompressor: [config error] 'ignoreImageTypes' is required to be a \"array\", received: ".concat(o.ignoreImageTypes," -> using default []")),o.ignoreImageTypes=[]),o.insertIntoEditor&&"function"!=typeof o.insertIntoEditor&&(i.warn("quill.imageCompressor: [config error] 'insertIntoEditor' is required to be a \"function\", received: ".concat(o.insertIntoEditor," -> using default undefined")),o.insertIntoEditor=void 0)}},function(h,n,s){"use strict";var o=this&&this.__awaiter||function(l,f,t,r){return new(t||(t=Promise))(function(a,x){function g(_){try{b(r.next(_))}catch(m){x(m)}}function v(_){try{b(r.throw(_))}catch(m){x(m)}}function b(_){var m;_.done?a(_.value):(m=_.value,m instanceof t?m:new t(function(C){C(m)})).then(g,v)}b((r=r.apply(l,f||[])).next())})},i=this&&this.__generator||function(l,f){var t,r,a,x,g={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return x={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x;function v(b){return function(_){return function(m){if(t)throw new TypeError("Generator is already executing.");for(;x&&(x=0,m[0]&&(g=0)),g;)try{if(t=1,r&&(a=2&m[0]?r.return:m[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,m[1])).done)return a;switch(r=0,a&&(m=[2&m[0],a.value]),m[0]){case 0:case 1:a=m;break;case 4:return g.label++,{value:m[1],done:!1};case 5:g.label++,r=m[1],m=[0];continue;case 7:m=g.ops.pop(),g.trys.pop();continue;default:if(!((a=(a=g.trys).length>0&&a[a.length-1])||6!==m[0]&&2!==m[0])){g=0;continue}if(3===m[0]&&(!a||m[1]>a[0]&&m[1]<a[3])){g.label=m[1];break}if(6===m[0]&&g.label<a[1]){g.label=a[1],a=m;break}if(a&&g.label<a[2]){g.label=a[2],g.ops.push(m);break}a[2]&&g.ops.pop(),g.trys.pop();continue}m=f.call(l,g)}catch(C){m=[6,C],r=0}finally{t=a=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([b,_])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.downscaleImage=void 0,n.downscaleImage=function(l,f,t,r,a,x,g,v){return o(this,void 0,void 0,function(){var b,_,m,C,M,A,k,S;return i(this,function(T){switch(T.label){case 0:return b=f.split(";")[0].split(":")[1],a=a||"image/jpeg",v=v||.7,(_=new Image).src=f,[4,new Promise(function(E){_.onload=function(){E()}})];case 1:return T.sent(),m=function(E,N,U,Z){if(U&&Z&&E<=U&&N<=Z)return[E,N];if(U&&E>U){var F=U,B=Math.floor(N/E*F);if(Z&&B>Z){var J=Z;return[Math.floor(E/N*J),J]}return[F,B]}return Z&&N>Z?(B=Z,[F=Math.floor(E/N*B),B]):[N,E]}(_.width,_.height,t,r),C=m[0],M=m[1],(A=document.createElement("canvas")).width=C,A.height=M,k=A.getContext("2d"),"image/jpeg"===a&&(k.fillStyle="#FFFFFF",k.fillRect(0,0,_.width,_.height)),g?.includes(b)?[2,f]:(x?.includes(b)&&(a=b),k.drawImage(_,0,0,C,M),S=A.toDataURL(a,v),l.log("downscaling image...",{args:{dataUrl:f,maxWidth:t,maxHeight:r,imageType:a,ignoreImageTypes:g,keepImageTypes:x,imageQuality:v},newHeight:M,newWidth:C}),[2,S])}})})}},function(h,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ConsoleLogger=void 0;var o=function(){function i(l,f){this.debug=l,this.suppressErrorLogging=f}return i.prototype.prefixString=function(){return"</> quill-image-compress: "},Object.defineProperty(i.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"error",{get:function(){return this.suppressErrorLogging?function(){}:console.error.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"warn",{get:function(){return this.suppressErrorLogging?function(){}:console.warn.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),i}();n.ConsoleLogger=o}])}}]);
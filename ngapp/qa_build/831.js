(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[831],{4831:(h,v,r)=>{"use strict";r.r(v),r.d(v,{StudentModule:()=>Xr});var d=r(6895),c=r(1390),a=r(970),u=r(4633),g=r(8977),e=r(4650),s=r(5412);let l=(()=>{class i{canDeactivate(t,n,o){return!!t.storySaved||(t.showModal(),t.modalChoice)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),w=(()=>{class i{constructor(t,n){this.dialog=t,this.ts=n}canDeactivate(t){if(t.recordingSaved)return!0;let n;return n=this.dialog.open(u.p,{data:{title:this.ts.l.save_changes_made_to_this_recording,type:"",confirmText:this.ts.l.save,cancelText:this.ts.l.cancel},width:"30vh"}),n.afterClosed().subscribe(o=>{if(n=void 0,o)return t.saveRecordings(),!0}),!1}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(s.uw),e.LFG(g.D))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),_=(()=>{class i{canDeactivate(t,n,o){if(t.chosenSections)for(const f of t.chosenSections)f.stop();return!0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var m=r(5861),x=r(4412);class b extends x.i{constructor(){super(...arguments),this.createdWithPrompts=!1}}var y=r(1765),M=r(1745),T=r(1512),O=r(6469),P=r(4687),S=r(1245),A=r(25),U=r(5042),G=r(530),J=r(8443);let j=(()=>{class i{transform(t,n){return t?n?(n=n.toLocaleLowerCase(),t.filter(o=>o instanceof J.n?o.username.toLocaleLowerCase().includes(n):o instanceof b?o.title.toLocaleLowerCase().includes(n)||o.text.toLocaleLowerCase().includes(n):void 0)):t:[]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"appFilter",type:i,pure:!0}),i})();var Z=r(3905),B=r(4006),K=r(9121);function F(i,p){1&i&&(e.TgZ(0,"div",17),e._UZ(1,"grid-spinner"),e.qZA())}function te(i,p){if(1&i&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.click_new_story," ")}}function ge(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"input",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,f=e.oxw();return e.KtG(f.toggleDelete(o._id))}),e.qZA()}}function Me(i,p){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.lastUpdated,"M/d/yy, h:mm a"))}}function je(i,p){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.lastUpdated,"d/M/yy, h:mm a"))}}const He=function(i){return["../dashboard",i]};function Ge(i,p){if(1&i&&(e.TgZ(0,"div")(1,"div",18)(2,"div",19),e.YNc(3,ge,1,0,"input",20),e.TgZ(4,"div",21),e._uU(5),e.qZA()(),e.YNc(6,Me,3,4,"div",22),e.YNc(7,je,3,4,"div",22),e.qZA(),e._UZ(8,"hr"),e.qZA()),2&i){const t=p.$implicit,n=e.oxw();e.xp6(3),e.Q6J("ngIf",n.deleteMode),e.xp6(1),e.Q6J("searchedWord",n.searchText)("content",t.title)("classToApply","font-weight-bold")("setTitle","true")("routerLink",e.VKq(9,He,t._id)),e.xp6(1),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngIf",n.isFromAmerica),e.xp6(1),e.Q6J("ngIf",!n.isFromAmerica)}}function Se(i,p){if(1&i&&(e.TgZ(0,"span",27),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.unreadMessages," ")}}function Ye(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.goToMessages())}),e._uU(1),e.YNc(2,Se,2,1,"span",26),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.messages," "),e.xp6(1),e.Q6J("ngIf",t.unreadMessages>0)}}function Je(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.goToStats())}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.stats," ")}}let qe=(()=>{class i{constructor(t,n,o,f,C,k,I,R,E,L,Y){this.storyService=t,this.auth=n,this.engagement=o,this.ts=f,this.router=C,this.messageService=k,this.profileService=I,this.classroomService=R,this.notificationService=E,this.recordingService=L,this.dialog=Y,this.stories=[],this.toBeDeleted=[],this.userId="",this.messagesForNotifications=[],this.unreadMessages=0,this.isFromAmerica=!1,this.isEnrolled=!1,this.searchText="",this.storiesLoaded=!1}ngOnInit(){var t=this;return(0,m.Z)(function*(){const n=t.auth.getUserDetails();n?(t.stories=(yield(0,Z.z)(t.storyService.getStoriesForLoggedInUser())).map(o=>(new b).fromJSON(o)),t.stories.sort((o,f)=>o.date>f.date?-1:1),t.storiesLoaded=!0,t.userId=n._id,t.deleteMode=!1,t.toBeDeleted=[],t.notificationService.getStudentNotifications(),t.classroomService.getClassroomOfStudent(t.userId).subscribe(o=>{t.isEnrolled=null!=o}),t.messageService.getMessagesForLoggedInUser().subscribe(o=>{t.messagesForNotifications=o,t.unreadMessages=t.messageService.getNumberOfUnreadMessages(t.messagesForNotifications)}),t.profileService.getForUser(t.userId).subscribe(o=>{let C=o.profile.country;t.isFromAmerica="United States of America"==C||"America"==C||"USA"==C||"United States"==C},o=>{t.router.navigateByUrl("/register-profile")})):t.auth.logout()})()}toggleDeleteMode(){if(this.deleteMode&&this.toBeDeleted.length>0)for(let t of this.toBeDeleted)this.engagement.addEventForLoggedInUser(T.tw["DELETE-STORY"],{_id:t}),this.recordingService.deleteStoryRecordingAudio(t).subscribe(n=>{}),this.recordingService.deleteStoryRecording(t).subscribe(n=>{}),this.storyService.deleteStory(t).subscribe(n=>{this.ngOnInit()});else this.deleteMode=!this.deleteMode||0!==this.toBeDeleted.length}toggleEditMode(){this.editMode=!this.editMode}toggleDelete(t){if(this.toBeDeleted.includes(t)){var n=this.toBeDeleted.indexOf(t);this.toBeDeleted.splice(n,1)}else this.toBeDeleted.push(t)}goToMessages(){this.router.navigateByUrl("/messages/"+this.userId)}goToStats(){this.router.navigateByUrl("/stats-dashboard/"+this.userId)}createNewStory(){var t=this;this.dialogRef=this.dialog.open(u.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var n=(0,m.Z)(function*(o){if(t.dialogRef=void 0,o)if(o[0]){let f="connemara";o[1]==t.ts.l.munster&&(f="kerry"),o[1]==t.ts.l.ulster&&(f="donegal"),t.storyService.saveStory(t.auth.getUserDetails()._id,o[0],new Date,f,"",t.auth.getUserDetails().username,!1)}else alert(t.ts.l.title_required)});return function(o){return n.apply(this,arguments)}}())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.N),e.Y36(M.$),e.Y36(O.M),e.Y36(g.D),e.Y36(c.F0),e.Y36(S.e),e.Y36(P.H),e.Y36(A.u),e.Y36(U.g),e.Y36(G.s),e.Y36(s.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-book-contents"]],features:[e._Bn([j])],decls:27,vars:17,consts:[[1,"bookContainer"],[1,"contentsContainer"],[1,"bookContentsTitle"],[1,"contentsTitleContainer"],[1,"contentsLinkTitle"],[1,"contentsDateTitle"],["role","main"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"contentsLinkContainer"],["class","newStoryMessage",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"contentsBtnsContainer"],[1,"btn","deleteBtn",3,"click"],["src","assets/img/trash.ico",1,"trashImg"],["class","btn messagesBtn",3,"click",4,"ngIf"],["data-cy","create-story",1,"btn","newStoryBtn",3,"click"],[1,"newStoryMessage"],[1,"contentSection"],[1,"contentsLink"],["type","checkbox","class","deleteCheckbox",3,"click",4,"ngIf"],["appHighlight","",3,"searchedWord","content","classToApply","setTitle","routerLink"],["class","contentsDate",4,"ngIf"],["type","checkbox",1,"deleteCheckbox",3,"click"],[1,"contentsDate"],[1,"btn","messagesBtn",3,"click"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3)(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"div",5),e._uU(8),e.qZA()(),e.TgZ(9,"div",6)(10,"div")(11,"div",7)(12,"input",8),e.NdJ("ngModelChange",function(f){return n.searchText=f}),e.qZA()()()(),e.TgZ(13,"div",9)(14,"div"),e._uU(15),e.qZA(),e.YNc(16,F,2,0,"div",10),e.YNc(17,te,2,1,"div",10),e.YNc(18,Ge,9,11,"div",11),e.ALo(19,"appFilter"),e.qZA(),e.TgZ(20,"div",12)(21,"button",13),e.NdJ("click",function(){return n.toggleDeleteMode()}),e._UZ(22,"img",14),e.qZA(),e.YNc(23,Ye,3,2,"button",15),e.YNc(24,Je,2,1,"button",15),e.TgZ(25,"button",16),e.NdJ("click",function(){return n.createNewStory()}),e._uU(26),e.qZA()()()()),2&t&&(e.xp6(3),e.Oqu(n.ts.l.my_stories),e.xp6(3),e.Oqu(n.ts.l.title),e.xp6(2),e.Oqu(n.ts.l.last_updated),e.xp6(4),e.s9C("placeholder",n.ts.l.search_story_title_or_content),e.Q6J("ngModel",n.searchText),e.xp6(3),e.hij(" ",n.ts.l.loading," "),e.xp6(1),e.Q6J("ngIf",!n.storiesLoaded),e.xp6(1),e.Q6J("ngIf",0===n.stories.length&&n.storiesLoaded),e.xp6(1),e.Q6J("ngForOf",e.xi3(19,14,n.stories,n.searchText)),e.xp6(3),e.ekj("deleteModeBtn",n.deleteMode),e.xp6(2),e.Q6J("ngIf",n.isEnrolled),e.xp6(1),e.Q6J("ngIf",n.stories.length>0),e.xp6(2),e.hij("",n.ts.l.new_story," "))},dependencies:[d.sg,d.O5,c.rH,B.Fj,B.JJ,B.On,K.P,d.uU,j],styles:[".bookContainer[_ngcontent-%COMP%]{height:auto;width:80%;background:url(https://www.abair.ie/scealai/assets/img/paperBg.jpg) no-repeat center fixed;margin-left:10%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.contentsContainer[_ngcontent-%COMP%]{padding:20px}.bookContentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);padding-left:5%;padding-right:5%;display:inline-block;font-size:18pt}.contentsLinkContainer[_ngcontent-%COMP%]{height:500px;overflow:auto;padding:10px;background-color:#f7f2e7;box-shadow:inset 0 0 12px #00000080;border-radius:5px}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.contentsDate[_ngcontent-%COMP%]{color:var(--dark-text)}.contentsBtnsContainer[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:1rem}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;padding:2px 7px 7px;height:38px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:24px}.messagesBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;border-radius:5px;display:flex}.messagesBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.newStoryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.newStoryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}@media only screen and (max-width: 700px){.contentsContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%}.contentsLinkContainer[_ngcontent-%COMP%]{height:270px;padding-top:10px}.contentsLinkTitle[_ngcontent-%COMP%], .contentsDateTitle[_ngcontent-%COMP%]{font-size:12pt}.optionsPopupBtn[_ngcontent-%COMP%]{padding:2px 5px 5px;margin:0 4px 0 0;height:30px;font-size:12pt}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:0 3px 3px;height:30px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:20px}}.newStoryMessage[_ngcontent-%COMP%]{color:#a79d88;width:80%;margin-left:10%;margin-top:30px}@media only screen and (min-width: 700px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}@media only screen and (min-width: 1400px) and (min-height: 800px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}"]}),i})();var Q=r(7579),Te=r(1884),ze=r(9971),fe=r.n(ze),Qe=r(5439),Ve=r.n(Qe),We=r(1094),Ke=r.n(We),oe=r(4186),Xe=r(5592),X=r(9742),$e=r(6618);let et=(()=>{class i{constructor(){}convertHtmlTextToArrayOfSentences(t){return this.sentences(this.convertHtmlToPlainText(t))}sentences(t){return this.naiveSentences(t)}splitWithReplacement(t,n){const o=t.split(n);return o.slice(0,-1).filter(Boolean).map(f=>f+n).concat(o.slice(-1).filter(Boolean))}extraShortening(t){return t.flatMap(n=>" "==n?[]:n.charAt(100)?this.splitWithReplacement(n,","):[n])}naiveSentences(t){let n=t.split("\n").filter(Boolean);for(const o of[".","!","?"])n=n.flatMap(f=>this.splitWithReplacement(f,o));return this.extraShortening(n)}convertHtmlToPlainText(t){const n=document.createElement("div");return n.innerHTML=t,n.textContent||n.innerText||""}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var N=r(9549),me=r(4385),D=r(3238);function se(i,p){if(1&i&&(e.TgZ(0,"mat-option",3),e._uU(1),e.qZA()),2&i){const t=p.$implicit,n=e.oxw();e.s9C("gender",t.gender),e.Q6J("value",t),e.xp6(1),e.hij(" ",t.note+t.name+" ("+n.ts.message(t.dialect)+") "," ")}}let ae=(()=>{class i{constructor(t){this.ts=t,this.voices=X.be,this.selected=this.voices[0],this.selectVoice=new e.vpe}ngOnInit(){this.selectVoice.emit(this.selected)}color(t){return t.startsWith("f")?"rgba(255, 191, 194)":"rgba(194, 218, 255)"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["synth-voice-select"]],outputs:{selectVoice:"selectVoice"},decls:5,vars:3,consts:[["appearance","fill"],[3,"value","valueChange","selectionChange"],["matNativeControl","","required","",3,"gender","value",4,"ngFor","ngForOf"],["matNativeControl","","required","",3,"gender","value"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-form-field",0)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",1),e.NdJ("valueChange",function(f){return n.selected=f})("selectionChange",function(f){return n.selectVoice.emit(f.value)}),e.YNc(4,se,2,3,"mat-option",2),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(n.ts.message("voice")),e.xp6(1),e.Q6J("value",n.selected),e.xp6(1),e.Q6J("ngForOf",n.voices))},dependencies:[d.sg,N.KE,N.hX,me.gD,D.ey],encapsulation:2}),i})();const tt=["voiceSelect"];function ve(i,p){1&i&&e._UZ(0,"div",11)}function ne(i,p){1&i&&e._UZ(0,"div",11)}function z(i,p){if(1&i&&e._UZ(0,"app-synth-item",12),2&i){const t=p.$implicit,n=p.index,o=e.oxw();e.Q6J("synthItem",t)("i",n)("storyId",o.storyId)}}let ye=(()=>{class i{constructor(t,n,o,f,C){this.router=t,this.textProcessor=n,this.cdref=o,this.synth=f,this.ts=C,this.hideEntireSynthesisPlayer=!0,this.synthItems=[],this.allAudioSources=[]}ngOnInit(){this.refresh()}refresh(t){t&&(this.selected=t),this.synthItems.map(n=>{n.audioUrl=void 0,n.dispose()}),this.text&&setTimeout(()=>{this.synthItems=this.textProcessor.sentences(this.text).map(n=>this.getSynthItem(n)),this.cdref.detectChanges(),this.audio=null},50)}getSynthItem(t){return new $e.e(t,this.selected,this.synth)}audioLoaded(){return this.synthItems.every(t=>null!=t.audioUrl||t.exceptions.length>0)}combineAndPlayAudio(){var t=this;return(0,m.Z)(function*(){t.audio||(yield t.combineAudioSources()),t.playAllAudio()})()}combineAudioSources(){var t=this;return(0,m.Z)(function*(){t.allAudioSources=t.synthItems.map(o=>o.audioUrl);let n=t.allAudioSources.map(o=>fetch(o).then(f=>f.blob()));yield Promise.all(n).then(o=>{let f=new Blob(o);t.blobUrl=URL.createObjectURL(f),t.audio=new Audio(t.blobUrl)})})()}playAllAudio(){this.audio.paused?this.audio.play():(this.audio.pause(),this.audio.currentTime=0)}downloadAudio(){var t=this;return(0,m.Z)(function*(){t.audio||(yield t.combineAudioSources());const n=document.createElement("a");n.style.display="none",n.href=t.blobUrl,n.download=t.storyTitle+".mp3",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(t.blobUrl)})()}goToFastSynthesiser(){this.router.navigateByUrl("/student/synthesis/"+this.storyId)}stopSynthesis(){this.synthItems.map(t=>{t.audioUrl=void 0,t.dispose()})}toggleHidden(){this.hideEntireSynthesisPlayer=!this.hideEntireSynthesisPlayer,this.refresh()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.F0),e.Y36(et),e.Y36(e.sBO),e.Y36(X.cf),e.Y36(g.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-synthesis-player"]],viewQuery:function(t,n){if(1&t&&e.Gf(tt,5),2&t){let o;e.iGM(o=e.CRH())&&(n.voiceSelect=o.first)}},inputs:{storyId:"storyId",text:"text",storyTitle:"storyTitle"},decls:22,vars:11,consts:[[1,"synth",3,"hidden"],[1,"synthHeader"],[1,"reload",3,"click"],[3,"selectVoice"],[1,"fast-synth",3,"click"],[1,"btnContainer",2,"justify-content","space-between"],[1,"playAllButton",2,"text-align","center","width","100px",3,"disabled","click"],["class","spinner-grow","style","width: 1rem; height: 1rem;",4,"ngIf"],[1,"playAllButton",2,"text-align","center","width","150px",3,"disabled","click"],[1,"items"],[3,"synthItem","i","storyId",4,"ngFor","ngForOf"],[1,"spinner-grow",2,"width","1rem","height","1rem"],[3,"synthItem","i","storyId"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h1"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"div",1)(7,"div",2),e.NdJ("click",function(){return n.refresh()}),e._uU(8,"\u21bb"),e.qZA(),e.TgZ(9,"synth-voice-select",3),e.NdJ("selectVoice",function(f){return n.refresh(f)}),e.qZA(),e.TgZ(10,"div",4),e.NdJ("click",function(){return n.goToFastSynthesiser()}),e._uU(11),e.qZA()(),e.TgZ(12,"div",5)(13,"button",6),e.NdJ("click",function(){return n.combineAndPlayAudio()}),e.YNc(14,ve,1,0,"div",7),e._uU(15),e.qZA(),e.TgZ(16,"button",8),e.NdJ("click",function(){return n.downloadAudio()}),e.YNc(17,ne,1,0,"div",7),e._uU(18),e.qZA()(),e._UZ(19,"hr"),e.TgZ(20,"div",9),e.YNc(21,z,1,3,"app-synth-item",10),e.qZA()()),2&t&&(e.Q6J("hidden",n.hideEntireSynthesisPlayer),e.xp6(3),e.Oqu(n.ts.l.listen_back_to_your_story?n.ts.l.listen_back_to_your_story:"listen_back_to_your_story"),e.xp6(2),e.hij("(",n.ts.l.dnn_synthesiser?n.ts.l.dnn_synthesiser:"dnn_synthesiser",")"),e.xp6(6),e.hij(" ",n.ts.l.go_to_fast_synthesiser?n.ts.l.go_to_fast_synthesiser:"go_to_fast_synthesiser"," "),e.xp6(2),e.Q6J("disabled",!n.audioLoaded()),e.xp6(1),e.Q6J("ngIf",!n.audioLoaded()),e.xp6(1),e.hij(" ",n.ts.l.play," "),e.xp6(1),e.Q6J("disabled",!n.audioLoaded()),e.xp6(1),e.Q6J("ngIf",!n.audioLoaded()),e.xp6(1),e.hij(" ",n.ts.l.download," "),e.xp6(3),e.Q6J("ngForOf",n.synthItems))},dependencies:[d.sg,d.O5,ae],styles:[".synth[_ngcontent-%COMP%]{display:grid;padding:20px;border-radius:15px;margin:30px;background-color:#ffffff80;border:2px}.synthHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]{font-family:Lucida Sans Unicode;font-size:20px;width:2rem;height:2rem;border-radius:.5em;padding:0;margin:0;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]:hover{color:#000;font-weight:700}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]{padding:3px;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]:hover{color:#000;border-radius:2px;font-weight:700}.items[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:3px;padding-left:1rem;padding-top:1rem;border-radius:3px;text-align:left;flex-wrap:wrap;justify-content:left}.playAllButton[_ngcontent-%COMP%]{padding:5px;border-radius:5px;border:none;width:100px;text-align:center;background-color:#95cdcd}.playAllButton[_ngcontent-%COMP%]:hover:enabled{color:#fff}"]}),i})();const nt=function be(){const p=Object.values({"no break whitespace":"\xa0","ogham space mark":"\u1680","zero width no-break space":"\ufeff","ideographic space":"\u3000","narrow no-break space":"\u202f","EN QUAD":"\u2000","EM QUAD":"\u2001","EN SPACE (nut)":"\u2002","EM SPACE (mutton)":"\u2003","THREE-PER-EM SPACE":"\u2004","FOUR-PER-EM SPACE (mid space)":"\u2005","SIX-PER-EM SPACE":"\u2006","FIGURE SPACE":"\u2007","PUNCTUATION SPACE":"\u2008","THIN SPACE":"\u2009","HAIR SPACE":"\u200a"}).join("");return new RegExp("["+p+"]","g")}();function Pe(i){return Object.assign({},i)}class Ie{constructor(p,t,n){this.errorsWithSentences=[],this.http=t,this.auth=n,this.grammarCheckers=p,this.cacheMap=new Map;for(const o of p)this.cacheMap.set(o.name,{})}check$(p){const t=new Q.x;return this.check(function ke(i){return i.replace(nt," ")}(p),t),t}check(p,t){var n=this;return(0,m.Z)(function*(){const f=function Oe(i,p){const t=[];let n=0;for(let o of i)if(o){const C=n+p.slice(n).indexOf(o);t.push({sentence:o,offset:C}),n=C+o.length}return t}(yield(0,Z.z)(n.http.post(oe.Z.baseurl+"nlp/sentenceTokenize",{text:p})),p);n.errorsWithSentences=[];const C=(yield Promise.all(n.grammarCheckers.map(function(){var k=(0,m.Z)(function*(I){return yield Promise.all(f.map(function(){var R=(0,m.Z)(function*(E,L){const Y=E.sentence,q=E.offset;function ue(he){return he.fromX+=q,he.toX+=q,t.next(he),he}if(Y in n.cacheMap.get(I.name)){let he=n.cacheMap.get(I.name)[Y].map(Pe).map(ue);return n.errorsWithSentences[L]=n.errorsWithSentences[L]?[n.errorsWithSentences[L][0].concat(he),Y,L]:[he,Y,L],he}const pe=yield I.check(Y,n.auth.getToken());n.cacheMap.get(I.name)[Y]=pe;const $r=pe.map(Pe).map(ue);return n.errorsWithSentences[L]=n.errorsWithSentences[L]?[n.errorsWithSentences[L][0].concat(pe),Y,L]:[pe,Y,L],$r});return function(E,L){return R.apply(this,arguments)}}()))});return function(I){return k.apply(this,arguments)}}()))).flat().filter(k=>k.length);return t.complete(),n.countNewErrors(C.flat()),C})()}countNewErrors(p){var t=this;return(0,m.Z)(function*(){t.previousErrorTags=p,t.countNewErrors=t._countNewErrorsAfterFirstTime})()}_countNewErrorsAfterFirstTime(p){return(0,m.Z)(function*(){const n=function ce(i,p){return function C(k,I){return I.filter(R=>!k.includes(R)||(k[k.indexOf(R)]=null,!1)).map(R=>JSON.parse(R)[1])}(f(i),f(p));function f(k){return k.map(I=>JSON.stringify([I.errorText,I.type]))}}(t.previousErrorTags,p),f={countsByType:(i=n,i.reduce(function t(n,o){return n[o]||(n[o]=0),n[o]+=1,n},{}))};var i;t.http.post(oe.Z.baseurl+"gramadoir/userGrammarCounts/",f).subscribe(),t.previousErrorTags=p})()}saveErrorsWithSentences(p){var t=this;return(0,m.Z)(function*(){if(!t.errorsWithSentences||!p)return;const n={Authorization:"Bearer "+t.auth.getToken()};t.http.post(oe.Z.baseurl+"gramadoir/insert/",{storyId:p,sentences:t.errorsWithSentences},{headers:n}).subscribe()})()}}const W=fe().import("parchment"),ie=fe().import("ui/tooltip");fe().register(new W.Attributor.Attribute("highlight-tag","highlight-tag",{scope:W.Scope.INLINE})),fe().register(new W.Attributor.Attribute("highlight-tag-type","highlight-tag-type",{scope:W.Scope.INLINE}));class Dt{constructor(p,t,n){this.mostRecentHoveredMessage="",this.quillEditor=p,this.ts=t,this.engagement=n}show(p){p&&(p.forEach(n=>{this.quillEditor.formatText(n.fromX,n.toX-n.fromX,{"highlight-tag":JSON.stringify(n),"highlight-tag-type":n.type,"background-color":n.color},"api")}),document.querySelectorAll("[highlight-tag]").forEach(n=>{const o=n.getAttribute("highlight-tag");if(!o)return;const f=JSON.parse(o),C=new ie(this.quillEditor);C.root.classList.add("custom-tooltip"),n.addEventListener("mouseover",()=>{this.mouseOverTagElem(f,n,C)}),n.addEventListener("mouseout",()=>{n.removeAttribute("data-selected"),C.hide()})}))}hide(p){p.forEach(t=>{this.quillEditor.formatText(t.fromX,t.toX-t.fromX,{"highlight-tag":null,"highlight-tag-type":null,"background-color":"","data-selected":null})}),document.querySelectorAll(".custom-tooltip").forEach(t=>t.remove())}hideAll(){document.querySelectorAll("[data-selected]").forEach(t=>t.removeAttribute("data-selected")),this.quillEditor.formatText(0,this.quillEditor.getLength(),{"highlight-tag":null,"highlight-tag-type":null,"background-color":"","data-selected":null}),document.querySelectorAll(".custom-tooltip").forEach(t=>t.remove())}mouseOverTagElem(p,t,n){t.setAttribute("data-selected","");const o=this.quillEditor.root.scrollTop;this.quillEditor.root.scroll({top:+o+1}),this.quillEditor.root.scroll({top:+o}),n.root.innerHTML="en"==this.ts.l.iso_code?p.messageEN:p.messageGA,this.mostRecentHoveredMessage="en"==this.ts.l.iso_code?p.messageEN:p.messageGA,n.show(),n.position(this.quillEditor.getBounds(p.fromX,p.toX-p.fromX));let f=n.root.getAttribute("style")||"";f+="font-size: medium; z-index: 10000001;",n.root.setAttribute("style",f);const C=n.root.offsetLeft+n.root.offsetWidth-this.quillEditor.root.offsetWidth;n.root.style.left=C>0?n.root.offsetLeft-C-5+"px":n.root.style.left,n.root.style.left=n.root.offsetLeft<0?n.root.offsetLeft-n.root.offsetLeft+5+"px":n.root.style.left,this.engagement.mouseOverGrammarSuggestionEvent(p)}getGrammarMessage(p){return p?this.mostRecentHoveredMessage?this.mostRecentHoveredMessage:this.ts.message("hover_over_a_highlighted_word_for_a_grammar_suggestion"):this.ts.message("checking_grammar")}}var V=r(8043);const Bt={name:"Leathan_Caol",check:function Zt(i){return rt.apply(this,arguments)}},Ee=["a","o","u","\xe1","\xf3","\xfa","A","O","U","\xc1","\xd3","\xda"],De=["e","i","\xe9","\xed","E","I","\xc9","\xcd"],Ft=["b","c","d","f","g","h","l","m","n","p","r","s","t","v","z","B","C","D","F","G","H","L","M","N","P","R","S","T","V","Z"],Rt=["aniar","an\xedos","ar\xe9ir","ar\xeds","ar\xedst","anseo","ansin","ansi\xfad","c\xe9n","den","faoina","ina","inar","insa","lena","lenar"];function rt(){return(rt=(0,m.Z)(function*(i){return new Promise((p,t)=>{const n=Nt(i);let o=[];for(const f of n)o.push({errorText:i,messageGA:V.U["LEATHAN-CAOL"].messageGA,messageEN:V.U["LEATHAN-CAOL"].messageEN,context:i,nameEN:V.U["LEATHAN-CAOL"].nameEN,nameGA:V.U["LEATHAN-CAOL"].nameGA,color:V.U["LEATHAN-CAOL"].color,fromX:f.first,toX:f.first+1,type:"LEATHAN-CAOL"}),o.push({errorText:i,messageGA:V.U["LEATHAN-CAOL"].messageGA,messageEN:V.U["LEATHAN-CAOL"].messageEN,context:i,nameEN:V.U["LEATHAN-CAOL"].nameEN,nameGA:V.U["LEATHAN-CAOL"].nameGA,color:V.U["LEATHAN-CAOL"].color,fromX:f.second,toX:f.second+1,type:"LEATHAN-CAOL"});p(o)})})).apply(this,arguments)}function Nt(i){const p=function Lt(i){let p=[];for(let t of Rt){let o=Ut(i.toLowerCase(),t);for(let f of o)p[f]=t.length}return p}(i),t=[];for(let n=0;n<i.length-1;n++)if(p[n]>0&&(n+=p[n]),pt(i[n])&&ht(i[n+1])){let o=n++;for(;ht(i[n]);)n++;if(pt(i[n])&&!Gt(i[o],i[n])){const f=Ht(i[o]);t.push({broadFirst:f,first:o,second:n})}}return t}function Ut(i,p){var t=[];let n=new RegExp("[\\s.!?\\-]"+p+"[\\s.!?\\-]","g"),o=n.exec(i);for(;o;){n=new RegExp(p);let f=n.exec(o[0]);t.push(o.index+f.index),i=jt(i,o.index,"#".repeat(5)),n=new RegExp("[\\s.!?\\-]"+p+"[\\s.!?\\-]","g"),o=n.exec(i)}return t}function jt(i,p,t){return i.substr(0,p)+t+i.substr(p+t.length)}function pt(i){return Ee.includes(i)||De.includes(i)}function Ht(i){return Ee.includes(i)}function ht(i){return Ft.includes(i)}function Gt(i,p){return Ee.includes(i)&&Ee.includes(p)||De.includes(i)&&De.includes(p)}const Yt={name:"AnGramadoir",check:function Jt(i,p){return it.apply(this,arguments)}};function it(){return it=(0,m.Z)(function*(i,p){return new Promise(function(){var t=(0,m.Z)(function*(n,o){let f=[];try{f=yield gt(`${oe.Z.baseurl}gramadoir/callAnGramadoir/${encodeURIComponent(i)}`,p)}catch{try{f=yield gt(`https://cadhan.com/api/gramadoir/1.0/en/${i}`)}catch{o()}}n(f.map(k=>{const I=qt(k.ruleId),R=V.U[I];return{errorText:k.errortext,messageGA:R.messageGA.replace("#",k.errortext),messageEN:R.messageEN.replace("#",k.errortext),context:k.context,nameEN:R.nameEN,nameGA:R.nameGA,color:R.color,fromX:+k.fromx,toX:+k.tox+1,type:I}}))});return function(n,o){return t.apply(this,arguments)}}())}),it.apply(this,arguments)}function gt(i,p){return ot.apply(this,arguments)}function ot(){return(ot=(0,m.Z)(function*(i,p){let t={};p&&(t={Authorization:"Bearer "+p});const n=yield fetch(i,{headers:t});if(n.ok)return yield n.json();throw new Error(n.statusText)})).apply(this,arguments)}function qt(i){if(!i)return"";const p=i.replace(/[A-Za-z:]+\//,"");if(!p)return"";const t=/[A-Z]+/.exec(p);return t&&t[0]?t[0]:""}const zt={name:"RelativeClause",check:function Vt(i){return st.apply(this,arguments)}},Qt="https://phoneticsrv3.lcs.tcd.ie/gramsrv/api/grammar";function st(){return st=(0,m.Z)(function*(i){return new Promise(function(){var p=(0,m.Z)(function*(t,n){t((yield Wt(i)).map(C=>({errorText:i.slice(C.fromx,C.tox),messageGA:C.msg,messageEN:C.msg,context:C.context,nameEN:V.U["RELATIVE-CLAUSE"].nameEN,nameGA:V.U["RELATIVE-CLAUSE"].nameGA,color:V.U["RELATIVE-CLAUSE"].color,fromX:C.fromx,toX:C.tox,type:"RELATIVE-CLAUSE"})))});return function(t,n){return p.apply(this,arguments)}}())}),st.apply(this,arguments)}function Wt(i){return at.apply(this,arguments)}function at(){return(at=(0,m.Z)(function*(i){const p=yield fetch(Qt,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:Kt(i.replace(/\n/g," "))});return p.ok?yield p.json():[]})).apply(this,arguments)}function Kt(i){return`text=${encodeURIComponent(i)}&check=relclause`}var ft=r(529),de=r(5589),le=r(2687),mt=r(445),_e=r(1281),$=r(9521),_t=r(3353),Xt=r(4968),Be=r(6451),re=r(9300),vt=r(4004),yt=r(9718),ee=r(2722),xe=r(5698),we=r(8675),$t=r(8372),H=r(7340);const bt=["*"],en=["content"];function tn(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o._onBackdropClicked())}),e.qZA()}if(2&i){const t=e.oxw();e.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function nn(i,p){1&i&&(e.TgZ(0,"mat-drawer-content"),e.Hsn(1,2),e.qZA())}const rn=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],on=["mat-drawer","mat-drawer-content","*"],sn={transformDrawer:(0,H.X$)("transform",[(0,H.SB)("open, open-instant",(0,H.oB)({transform:"none",visibility:"visible"})),(0,H.SB)("void",(0,H.oB)({"box-shadow":"none",visibility:"hidden"})),(0,H.eR)("void => open-instant",(0,H.jt)("0ms")),(0,H.eR)("void <=> open, open-instant => void",(0,H.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},an=new e.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function cn(){return!1}}),xt=new e.OlP("MAT_DRAWER_CONTAINER");let ct=(()=>{class i extends de.PQ{constructor(t,n,o,f,C){super(o,f,C),this._changeDetectorRef=t,this._container=n}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36((0,e.Gpc)(()=>lt)),e.Y36(e.SBq),e.Y36(de.mF),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,n){2&t&&e.Udp("margin-left",n._container._contentMargins.left,"px")("margin-right",n._container._contentMargins.right,"px")},features:[e._Bn([{provide:de.PQ,useExisting:i}]),e.qOj],ngContentSelectors:bt,decls:1,vars:0,template:function(t,n){1&t&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),i})(),dt=(()=>{class i{constructor(t,n,o,f,C,k,I,R){this._elementRef=t,this._focusTrapFactory=n,this._focusMonitor=o,this._platform=f,this._ngZone=C,this._interactivityChecker=k,this._doc=I,this._container=R,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Q.x,this._animationEnd=new Q.x,this._animationState="void",this.openedChange=new e.vpe(!0),this._openedStream=this.openedChange.pipe((0,re.h)(E=>E),(0,vt.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,re.h)(E=>E.fromState!==E.toState&&0===E.toState.indexOf("open")),(0,yt.h)(void 0)),this._closedStream=this.openedChange.pipe((0,re.h)(E=>!E),(0,vt.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,re.h)(E=>E.fromState!==E.toState&&"void"===E.toState),(0,yt.h)(void 0)),this._destroyed=new Q.x,this.onPositionChanged=new e.vpe,this._modeChanged=new Q.x,this.openedChange.subscribe(E=>{E?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,Xt.R)(this._elementRef.nativeElement,"keydown").pipe((0,re.h)(E=>E.keyCode===$.hY&&!this.disableClose&&!(0,$.Vb)(E)),(0,ee.R)(this._destroyed)).subscribe(E=>this._ngZone.run(()=>{this.close(),E.stopPropagation(),E.preventDefault()}))}),this._animationEnd.pipe((0,Te.x)((E,L)=>E.fromState===L.fromState&&E.toState===L.toState)).subscribe(E=>{const{fromState:L,toState:Y}=E;(0===Y.indexOf("open")&&"void"===L||"void"===Y&&0===L.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=(0,_e.Ig)(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=(0,_e.Ig)(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle((0,_e.Ig)(t))}_forceFocus(t,n){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const o=()=>{t.removeEventListener("blur",o),t.removeEventListener("mousedown",o),t.removeAttribute("tabindex")};t.addEventListener("blur",o),t.addEventListener("mousedown",o)})),t.focus(n)}_focusByCssSelector(t,n){let o=this._elementRef.nativeElement.querySelector(t);o&&this._forceFocus(o,n)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{!n&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,n){t&&n&&(this._openedVia=n);const o=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),o}_setOpen(t,n,o){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",n&&this._restoreFocus(o)),this._updateFocusTrapState(),new Promise(f=>{this.openedChange.pipe((0,xe.q)(1)).subscribe(C=>f(C?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const n=this._elementRef.nativeElement,o=n.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),o.insertBefore(this._anchor,n)),o.appendChild(n)):this._anchor&&this._anchor.parentNode.insertBefore(n,this._anchor)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(le.qV),e.Y36(le.tE),e.Y36(_t.t4),e.Y36(e.R0b),e.Y36(le.ic),e.Y36(d.K0,8),e.Y36(xt,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-drawer"]],viewQuery:function(t,n){if(1&t&&e.Gf(en,5),2&t){let o;e.iGM(o=e.CRH())&&(n._content=o.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,n){1&t&&e.WFA("@transform.start",function(f){return n._animationStarted.next(f)})("@transform.done",function(f){return n._animationEnd.next(f)}),2&t&&(e.uIk("align",null),e.d8E("@transform",n._animationState),e.ekj("mat-drawer-end","end"===n.position)("mat-drawer-over","over"===n.mode)("mat-drawer-push","push"===n.mode)("mat-drawer-side","side"===n.mode)("mat-drawer-opened",n.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:bt,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0,1),e.Hsn(2),e.qZA())},dependencies:[de.PQ],encapsulation:2,data:{animation:[sn.transformDrawer]},changeDetection:0}),i})(),lt=(()=>{class i{constructor(t,n,o,f,C,k=!1,I){this._dir=t,this._element=n,this._ngZone=o,this._changeDetectorRef=f,this._animationMode=I,this._drawers=new e.n_E,this.backdropClick=new e.vpe,this._destroyed=new Q.x,this._doCheckSubject=new Q.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Q.x,t&&t.change.pipe((0,ee.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),C.change().pipe((0,ee.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=k}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=(0,_e.Ig)(t)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(t){this._backdropOverride=null==t?null:(0,_e.Ig)(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,we.O)(this._allDrawers),(0,ee.R)(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(n=>!n._container||n._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,we.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,$t.b)(10),(0,ee.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const o=this._left._getWidth();t+=o,n-=o}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._getWidth();else if("push"==this._right.mode){const o=this._right._getWidth();n+=o,t-=o}t=t||null,n=n||null,(t!==this._contentMargins.left||n!==this._contentMargins.right)&&(this._contentMargins={left:t,right:n},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe((0,re.h)(n=>n.fromState!==n.toState),(0,ee.R)(this._drawers.changes)).subscribe(n=>{"open-instant"!==n.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe((0,ee.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe((0,ee.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,xe.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe((0,ee.R)((0,Be.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const n=this._element.nativeElement.classList,o="mat-drawer-container-has-open";t?n.add(o):n.remove(o)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(mt.Is,8),e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(de.rL),e.Y36(an),e.Y36(e.QbO,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-drawer-container"]],contentQueries:function(t,n,o){if(1&t&&(e.Suo(o,ct,5),e.Suo(o,dt,5)),2&t){let f;e.iGM(f=e.CRH())&&(n._content=f.first),e.iGM(f=e.CRH())&&(n._allDrawers=f)}},viewQuery:function(t,n){if(1&t&&e.Gf(ct,5),2&t){let o;e.iGM(o=e.CRH())&&(n._userContent=o.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,n){2&t&&e.ekj("mat-drawer-container-explicit-backdrop",n._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[e._Bn([{provide:xt,useExisting:i}])],ngContentSelectors:on,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,n){1&t&&(e.F$t(rn),e.YNc(0,tn,1,2,"div",0),e.Hsn(1),e.Hsn(2,1),e.YNc(3,nn,2,0,"mat-drawer-content",1)),2&t&&(e.Q6J("ngIf",n.hasBackdrop),e.xp6(3),e.Q6J("ngIf",!n._content))},dependencies:[d.O5,ct],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),i})(),dn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,D.BQ,de.ZD,de.ZD,D.BQ]}),i})();var Fe=r(7392),wt=r(5802),Ct=r(4859),Re=r(727),Mt=r(9646),St=r(3101),Tt=r(3900),kt=r(1005),ln=r(4080),Ze=r(8184);const un=["mat-menu-item",""];function pn(i,p){1&i&&(e.O4$(),e.TgZ(0,"svg",2),e._UZ(1,"polygon",3),e.qZA())}const At=["*"];function hn(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",0),e.NdJ("keydown",function(o){e.CHM(t);const f=e.oxw();return e.KtG(f._handleKeydown(o))})("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.closed.emit("click"))})("@transformMenu.start",function(o){e.CHM(t);const f=e.oxw();return e.KtG(f._onAnimationStart(o))})("@transformMenu.done",function(o){e.CHM(t);const f=e.oxw();return e.KtG(f._onAnimationDone(o))}),e.TgZ(1,"div",1),e.Hsn(2),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),e.uIk("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const Ne={transformMenu:(0,H.X$)("transformMenu",[(0,H.SB)("void",(0,H.oB)({opacity:0,transform:"scale(0.8)"})),(0,H.eR)("void => enter",(0,H.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,H.oB)({opacity:1,transform:"scale(1)"}))),(0,H.eR)("* => void",(0,H.jt)("100ms 25ms linear",(0,H.oB)({opacity:0})))]),fadeInItems:(0,H.X$)("fadeInItems",[(0,H.SB)("showing",(0,H.oB)({opacity:1})),(0,H.eR)("void => *",[(0,H.oB)({opacity:0}),(0,H.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},gn=new e.OlP("MatMenuContent"),ut=new e.OlP("MAT_MENU_PANEL"),fn=(0,D.Kr)((0,D.Id)(class{}));let Le=(()=>{class i extends fn{constructor(t,n,o,f,C){super(),this._elementRef=t,this._document=n,this._focusMonitor=o,this._parentMenu=f,this._changeDetectorRef=C,this.role="menuitem",this._hovered=new Q.x,this._focused=new Q.x,this._highlighted=!1,this._triggersSubmenu=!1,f?.addItem?.(this)}focus(t,n){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),n=t.querySelectorAll("mat-icon, .material-icons");for(let o=0;o<n.length;o++)n[o].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(d.K0),e.Y36(le.tE),e.Y36(ut,8),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,n){1&t&&e.NdJ("click",function(f){return n._checkDisabled(f)})("mouseenter",function(){return n._handleMouseEnter()}),2&t&&(e.uIk("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled.toString())("disabled",n.disabled||null),e.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",n._highlighted)("mat-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[e.qOj],attrs:un,ngContentSelectors:At,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,n){1&t&&(e.F$t(),e.Hsn(0),e._UZ(1,"div",0),e.YNc(2,pn,2,0,"svg",1)),2&t&&(e.xp6(1),e.Q6J("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),e.xp6(1),e.Q6J("ngIf",n._triggersSubmenu))},dependencies:[d.O5,D.wG],encapsulation:2,changeDetection:0}),i})();const Ot=new e.OlP("mat-menu-default-options",{providedIn:"root",factory:function mn(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let _n=0,Ce=(()=>{class i{constructor(t,n,o,f){this._elementRef=t,this._ngZone=n,this._defaultOptions=o,this._changeDetectorRef=f,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new e.n_E,this._tabSubscription=Re.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Q.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new e.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+_n++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=(0,_e.Ig)(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=(0,_e.Ig)(t)}set panelClass(t){const n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach(o=>{this._classList[o]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(o=>{this._classList[o]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new le.Em(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,we.O)(this._directDescendantItems),(0,Tt.w)(t=>(0,Be.T)(...t.map(n=>n._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const n=this._keyManager;if("enter"===this._panelAnimationState&&n.activeItem?._hasFocus()){const o=t.toArray(),f=Math.max(0,Math.min(o.length-1,n.activeItemIndex||0));o[f]&&!o[f].disabled?n.setActiveItem(f):n.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe((0,we.O)(this._directDescendantItems),(0,Tt.w)(n=>(0,Be.T)(...n.map(o=>o._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const n=t.keyCode,o=this._keyManager;switch(n){case $.hY:(0,$.Vb)(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case $.oh:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case $.SV:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(n===$.LH||n===$.JH)&&o.setFocusOrigin("keyboard"),void o.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe((0,xe.q)(1)).subscribe(()=>{let n=null;if(this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!n||!n.contains(document.activeElement)){const o=this._keyManager;o.setFocusOrigin(t).setFirstItemActive(),!o.activeItem&&n&&n.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const n=Math.min(this._baseElevation+t,24),o=`${this._elevationPrefix}${n}`,f=Object.keys(this._classList).find(C=>C.startsWith(this._elevationPrefix));(!f||f===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[o]=!0,this._previousElevation=o)}setPositionClasses(t=this.xPosition,n=this.yPosition){const o=this._classList;o["mat-menu-before"]="before"===t,o["mat-menu-after"]="after"===t,o["mat-menu-above"]="above"===n,o["mat-menu-below"]="below"===n,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,we.O)(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(Ot),e.Y36(e.sBO))},i.\u0275dir=e.lG2({type:i,contentQueries:function(t,n,o){if(1&t&&(e.Suo(o,gn,5),e.Suo(o,Le,5),e.Suo(o,Le,4)),2&t){let f;e.iGM(f=e.CRH())&&(n.lazyContent=f.first),e.iGM(f=e.CRH())&&(n._allItems=f),e.iGM(f=e.CRH())&&(n.items=f)}},viewQuery:function(t,n){if(1&t&&e.Gf(e.Rgc,5),2&t){let o;e.iGM(o=e.CRH())&&(n.templateRef=o.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),i})(),vn=(()=>{class i extends Ce{constructor(t,n,o,f){super(t,n,o,f),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(Ot),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,n){2&t&&e.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[e._Bn([{provide:ut,useExisting:i}]),e.qOj],ngContentSelectors:At,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,n){1&t&&(e.F$t(),e.YNc(0,hn,3,6,"ng-template"))},dependencies:[d.mk],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[Ne.transformMenu,Ne.fadeInItems]},changeDetection:0}),i})();const Pt=new e.OlP("mat-menu-scroll-strategy"),bn={provide:Pt,deps:[Ze.aV],useFactory:function yn(i){return()=>i.scrollStrategies.reposition()}},It=(0,_t.i$)({passive:!0});let xn=(()=>{class i{constructor(t,n,o,f,C,k,I,R,E){this._overlay=t,this._element=n,this._viewContainerRef=o,this._menuItemInstance=k,this._dir=I,this._focusMonitor=R,this._ngZone=E,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Re.w0.EMPTY,this._hoverSubscription=Re.w0.EMPTY,this._menuCloseSubscription=Re.w0.EMPTY,this._handleTouchStart=L=>{(0,le.yG)(L)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new e.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new e.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=f,this._parentMaterialMenu=C instanceof Ce?C:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,It),k&&(k._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(n=>{this._destroyMenu(n),("click"===n||"tab"===n)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,It),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const n=this._createOverlay(t),o=n.getConfig(),f=o.positionStrategy;this._setPosition(t,f),o.hasBackdrop=t.hasBackdrop??!this.triggersSubmenu(),n.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof Ce&&(t._startAnimation(),t._directDescendantItems.changes.pipe((0,ee.R)(t.close)).subscribe(()=>{f.withLockedPosition(!1).reapplyLastPosition(),f.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,n){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,n):this._element.nativeElement.focus(n)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof Ce?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe((0,re.h)(o=>"void"===o.toState),(0,xe.q)(1),(0,ee.R)(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let n=0,o=t.parentMenu;for(;o;)n++,o=o.parentMenu;t.setElevation(n)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_createOverlay(t){if(!this._overlayRef){const n=this._getOverlayConfig(t);this._subscribeToPositions(t,n.positionStrategy),this._overlayRef=this._overlay.create(n),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new Ze.X_({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,n){t.setPositionClasses&&n.positionChanges.subscribe(o=>{const f="start"===o.connectionPair.overlayX?"after":"before",C="top"===o.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(f,C)):t.setPositionClasses(f,C)})}_setPosition(t,n){let[o,f]="before"===t.xPosition?["end","start"]:["start","end"],[C,k]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[I,R]=[C,k],[E,L]=[o,f],Y=0;if(this.triggersSubmenu()){if(L=o="before"===t.xPosition?"start":"end",f=E="end"===o?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const q=this._parentMaterialMenu.items.first;this._parentInnerPadding=q?q._getHostElement().offsetTop:0}Y="bottom"===C?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(I="top"===C?"bottom":"top",R="top"===k?"bottom":"top");n.withPositions([{originX:o,originY:I,overlayX:E,overlayY:C,offsetY:Y},{originX:f,originY:I,overlayX:L,overlayY:C,offsetY:Y},{originX:o,originY:R,overlayX:E,overlayY:k,offsetY:-Y},{originX:f,originY:R,overlayX:L,overlayY:k,offsetY:-Y}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),n=this._overlayRef.detachments(),o=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,Mt.of)(),f=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,re.h)(C=>C!==this._menuItemInstance),(0,re.h)(()=>this._menuOpen)):(0,Mt.of)();return(0,Be.T)(t,o,f,n)}_handleMousedown(t){(0,le.X6)(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const n=t.keyCode;(n===$.K5||n===$.L_)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(n===$.SV&&"ltr"===this.dir||n===$.oh&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,re.h)(t=>t===this._menuItemInstance&&!t.disabled),(0,kt.g)(0,St.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Ce&&this.menu._isAnimating?this.menu._animationDone.pipe((0,xe.q)(1),(0,kt.g)(0,St.E),(0,ee.R)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new ln.UE(t.templateRef,this._viewContainerRef)),this._portal}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ze.aV),e.Y36(e.SBq),e.Y36(e.s_b),e.Y36(Pt),e.Y36(ut,8),e.Y36(Le,10),e.Y36(mt.Is,8),e.Y36(le.tE),e.Y36(e.R0b))},i.\u0275dir=e.lG2({type:i,hostVars:3,hostBindings:function(t,n){1&t&&e.NdJ("click",function(f){return n._handleClick(f)})("mousedown",function(f){return n._handleMousedown(f)})("keydown",function(f){return n._handleKeydown(f)}),2&t&&e.uIk("aria-haspopup",n.menu?"menu":null)("aria-expanded",n.menuOpen||null)("aria-controls",n.menuOpen?n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),i})(),wn=(()=>{class i extends xn{}return i.\u0275fac=function(){let p;return function(n){return(p||(p=e.n5z(i)))(n||i)}}(),i.\u0275dir=e.lG2({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[e.qOj]}),i})(),Cn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[bn],imports:[d.ez,D.BQ,D.si,Ze.U8,de.ZD,D.BQ]}),i})();function Mn(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",5),e._uU(2),e.qZA(),e.TgZ(3,"div",6)(4,"input",7),e.NdJ("ngModelChange",function(o){e.CHM(t);const f=e.oxw();return e.KtG(f.searchText=o)}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.ts.l.my_stories),e.xp6(2),e.s9C("placeholder",t.ts.l.search_story_title_or_content),e.Q6J("ngModel",t.searchText)}}function Sn(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){const f=e.CHM(t).$implicit,C=e.oxw();return e.KtG(C.setStory(f))}),e.TgZ(1,"div",9)(2,"div",10),e.NdJ("blur",function(){const o=e.CHM(t),f=o.index,C=o.$implicit,k=e.oxw();return e.KtG(k.saveStoryTitle(f,C))})("keydown.enter",function(){const o=e.CHM(t),f=o.index,C=o.$implicit,k=e.oxw();return e.KtG(k.saveStoryTitle(f,C))}),e._uU(3),e.qZA(),e.TgZ(4,"div",11),e._uU(5),e.ALo(6,"date"),e.TgZ(7,"button",12)(8,"mat-icon"),e._uU(9,"more_vert"),e.qZA()(),e.TgZ(10,"mat-menu",null,13)(12,"button",14),e.NdJ("click",function(){const f=e.CHM(t).$implicit,C=e.oxw();return e.KtG(C.openDeleteStoryDialog(f._id))}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA(),e.TgZ(15,"span"),e._uU(16),e.qZA()(),e.TgZ(17,"button",14),e.NdJ("click",function(){const f=e.CHM(t).index,C=e.oxw();return e.KtG(C.makeTitleDivEditable(f))}),e.TgZ(18,"mat-icon"),e._uU(19,"create"),e.qZA(),e.TgZ(20,"span"),e._uU(21),e.qZA()()()()(),e._UZ(22,"hr"),e.qZA()}if(2&i){const t=p.$implicit,n=p.index,o=e.MAs(11),f=e.oxw();e.xp6(1),e.uIk("id",t._id),e.xp6(1),e.uIk("id",n),e.xp6(1),e.hij(" ",null==t?null:t.title," "),e.xp6(2),e.hij(" ",e.xi3(6,7,t.lastUpdated,"d/M/yy")," "),e.xp6(2),e.Q6J("matMenuTriggerFor",o),e.xp6(9),e.Oqu(f.ts.l.delete),e.xp6(5),e.Oqu(f.ts.l.rename)}}let Tn=(()=>{class i{constructor(t,n,o,f,C,k){this.ts=t,this.auth=n,this.storyService=o,this.engagement=f,this.recordingService=C,this.dialog=k,this.stories=[],this.lastClickedStoryId="",this.searchText="",this.storyEmitter=new e.vpe,this.hasFeedback=new e.vpe,this.storiesLoadedEmitter=new e.vpe}ngOnInit(){this.getStories()}getStories(){var t=this;return(0,m.Z)(function*(){t.stories=(yield(0,Z.z)(t.storyService.getStoriesForLoggedInUser())).map(n=>(new b).fromJSON(n)),t.stories.length>0&&(t.stories.sort((n,o)=>n.date>o.date?-1:1),t.lastClickedStoryId=t.stories[0]._id,setTimeout(()=>{t.setStory(t.stories[0]),t.storiesLoadedEmitter.emit(!0)}))})()}setStory(t){null==t.htmlText&&(t.htmlText=t.text),this.storyEmitter.emit(t),this.hasFeedback.emit(!!(t.feedback.text||t.feedback.audioId||t.feedback.feedbackMarkup));let n=t._id,o=document.getElementById(n);o&&(this.lastClickedStoryId&&document.getElementById(this.lastClickedStoryId).classList.remove("clickedresultCard"),this.lastClickedStoryId=n,o.classList.add("clickedresultCard"))}createNewStory(){var t=this;this.dialogRef=this.dialog.open(u.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var n=(0,m.Z)(function*(o){if(t.dialogRef=void 0,o)if(o[0]){let f="connemara";o[1]==t.ts.l.munster&&(f="kerry"),o[1]==t.ts.l.ulster&&(f="donegal"),t.storyService.saveStory(t.auth.getUserDetails()._id,o[0],new Date,f,"",t.auth.getUserDetails().username,!1).subscribe({next:()=>{t.getStories()},error:()=>{alert("Not able to create a new story")}})}else alert(t.ts.l.title_required)});return function(o){return n.apply(this,arguments)}}())}openDeleteStoryDialog(t){var n=this;this.dialogRef=this.dialog.open(u.p,{data:{title:this.ts.l.delete_story,message:"Are you sure you want to delete this story?",confirmText:this.ts.l.yes,cancelText:this.ts.l.no},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var o=(0,m.Z)(function*(f){n.dialogRef=void 0,f&&n.deleteStory(t)});return function(f){return o.apply(this,arguments)}}())}deleteStory(t){this.recordingService.deleteStoryRecordingAudio(t).subscribe(o=>{}),this.recordingService.deleteStoryRecording(t).subscribe(o=>{});let n=this.stories.findIndex(o=>o._id===t);this.storyService.deleteStory(t).subscribe(o=>{this.engagement.addEventForLoggedInUser(T.tw["DELETE-STORY"],{_id:t}),this.stories.splice(n,1),this.stories.length?this.setStory(this.stories[0]):this.storyEmitter.emit(null)})}makeTitleDivEditable(t){const n=document.getElementById(t);n.setAttribute("contenteditable","true"),window.setTimeout(()=>n.focus(),0)}saveStoryTitle(t,n){const o=document.getElementById(t);o.setAttribute("contenteditable","false"),n.title.trim()!=o.textContent.trim()&&(n.title=o.textContent,this.storyService.updateTitle(n._id,n.title.trim()).subscribe({next:()=>{console.log("title updated")},error:()=>console.log("error updating title")}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.D),e.Y36(M.$),e.Y36(y.N),e.Y36(O.M),e.Y36(G.s),e.Y36(s.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-story-drawer"]],outputs:{storyEmitter:"storyEmitter",hasFeedback:"hasFeedback",storiesLoadedEmitter:"storiesLoadedEmitter"},decls:8,vars:5,consts:[[1,"body"],[4,"ngIf"],[1,"storyList"],[3,"click",4,"ngFor","ngForOf"],["mat-fab","",1,"newStoryButton",3,"click"],[1,"myStories"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control","searchBox",3,"ngModel","placeholder","ngModelChange"],[3,"click"],[1,"contentSection"],[1,"contentsTitle",3,"blur","keydown.enter"],[1,"contentsDate"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Mn,5,3,"div",1),e.TgZ(2,"div",2),e.YNc(3,Sn,23,10,"div",3),e.ALo(4,"appFilter"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.createNewStory()}),e.TgZ(6,"mat-icon"),e._uU(7,"add"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.stories.length>0),e.xp6(2),e.Q6J("ngForOf",e.xi3(4,2,n.stories,n.searchText)))},dependencies:[d.sg,d.O5,B.Fj,B.JJ,B.On,Ct.lW,Fe.Hw,vn,Le,wn,d.uU,j],styles:[".body[_ngcontent-%COMP%]{display:flex;width:100%;height:98%;flex-direction:column}.storyList[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto}.myStories[_ngcontent-%COMP%]{color:var(--dark-text);font-size:16pt;padding-bottom:10px;text-align:left;font-weight:bolder}.searchBox[_ngcontent-%COMP%]{min-width:300px}.contentSection[_ngcontent-%COMP%]{display:flex}.contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;text-decoration:none;min-width:50%;flex:1 0 50%;overflow-wrap:break-word}.contentsTitle[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsDate[_ngcontent-%COMP%]{flex:1 0 50%;text-align:right;padding-right:20px}.newStoryButton[_ngcontent-%COMP%]{margin-left:auto}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%]{background-color:var(--scealai-green);box-shadow:none}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:2px;font-weight:bolder;border-radius:10px}"]}),i})();var Ue=r(1481);function kn(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"label",11),e._uU(2),e.qZA(),e.TgZ(3,"input",12),e.NdJ("ngModelChange",function(o){e.CHM(t);const f=e.oxw();return e.KtG(f.wordLookedUp=o)})("keyup.enter",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.lookupWord())})("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.clearDictInput())}),e.qZA(),e.TgZ(4,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.lookupWord())}),e._UZ(5,"i",14),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.hij("",t.ts.l.search,":"),e.xp6(1),e.Q6J("ngModel",t.wordLookedUp)}}function An(i,p){if(1&i&&e._UZ(0,"iframe",15),2&i){const t=e.oxw();e.Q6J("src",t.defaultDictIframeText,e.uOi)}}function On(i,p){1&i&&(e.TgZ(0,"div",16)(1,"ul")(2,"li")(3,"a",17),e._uU(4,"potafocal.com"),e.qZA()(),e.TgZ(5,"li")(6,"a",18),e._uU(7,"focloir.ie"),e.qZA()()()())}let Pn=(()=>{class i{constructor(t,n,o,f){this.ts=t,this.sanitizer=n,this.http=o,this.engagement=f,this.wordLookedUp="",this.selectTeanglann=!0,this.defaultDictIframeText=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/html;charset=utf-8,"+this.ts.l.search_for_words_in_dictionary),this.closeDictionaryEmitter=new e.vpe}ngOnInit(){}lookupWord(){var t=this;return(0,m.Z)(function*(){if(t.wordLookedUp){const n=t.http.post(oe.Z.baseurl+"proxy/",{url:`https://www.teanglann.ie/en/fgb/${t.wordLookedUp}`}),o=yield(0,Z.z)(n),f=(new DOMParser).parseFromString(o,"text/html");f.querySelectorAll(".ex > .head > a").forEach(E=>E.href=`https://www.teanglann.ie${E.href.slice(E.href.lastIndexOf("/en/"))}`),f.querySelector(".moar")?.remove();const I=f.querySelector(".listings");I.style.cssText+="margin-right: 0px; padding: 10px;",document.getElementById("dictiframe").src='data:text/html;charset=utf-8,<link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/template.css"><link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/fgb.css">'+I.outerHTML,t.engagement.addEventForLoggedInUser(T.tw["USE-DICTIONARY"],null,t.wordLookedUp)}else alert(t.ts.l.enter_a_word_to_lookup)})()}clearDictInput(){this.wordLookedUp&&(this.wordLookedUp="")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.D),e.Y36(Ue.H7),e.Y36(ft.eN),e.Y36(O.M))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-dictionary-drawer"]],outputs:{closeDictionaryEmitter:"closeDictionaryEmitter"},decls:16,vars:5,consts:[[1,"dictionaryContainer"],[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"dictionarySubHeader"],[1,"dictionaryName",3,"click"],["class","dictionaryInput",4,"ngIf"],[2,"height","100%"],["class","dictionaryIframe","id","dictiframe",3,"src",4,"ngIf"],["class","dictionaryIframe","style","text-align: left",4,"ngIf"],[1,"dictionaryInput"],["for","dictlookup"],["type","text","id","dictlookup","name","dictlookup","autofocus","",3,"ngModel","ngModelChange","keyup.enter","click"],[1,"searchDictionaryBtn",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["id","dictiframe",1,"dictionaryIframe",3,"src"],[1,"dictionaryIframe",2,"text-align","left"],["href","http://www.potafocal.com/beo/","target","_blank"],["href","https://www.focloir.ie","target","_blank"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5"),e._uU(3),e.qZA(),e.TgZ(4,"div",2),e.NdJ("click",function(){return n.closeDictionaryEmitter.next(!0)}),e._UZ(5,"i",3),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5),e.NdJ("click",function(){return n.selectTeanglann=!0}),e._uU(8," Teanglann "),e.qZA(),e._uU(9," | "),e.TgZ(10,"div",5),e.NdJ("click",function(){return n.selectTeanglann=!1}),e._uU(11),e.qZA()(),e.YNc(12,kn,6,2,"div",6),e.TgZ(13,"div",7),e.YNc(14,An,1,1,"iframe",8),e.qZA(),e.YNc(15,On,8,0,"div",9),e.qZA()),2&t&&(e.xp6(3),e.hij(" ",n.ts.l.dictionary," "),e.xp6(8),e.hij(" ",n.ts.l.external_links," "),e.xp6(1),e.Q6J("ngIf",n.selectTeanglann),e.xp6(2),e.Q6J("ngIf",n.selectTeanglann),e.xp6(1),e.Q6J("ngIf",!n.selectTeanglann))},dependencies:[d.O5,B.Fj,B.JJ,B.On],styles:[".dictionaryContainer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:wrap}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.dictionarySubHeader[_ngcontent-%COMP%]{padding-left:10px;padding-bottom:5px;background-color:var(--scealai-green);color:#fff;display:flex}.dictionaryName[_ngcontent-%COMP%]{background-color:var(--scealai-green);font-size:12px;color:#fff;padding-right:5px;padding-top:5px}.dictionaryName[_ngcontent-%COMP%]:hover{color:var(--scealai-light-green);text-decoration:none;cursor:pointer}.dictionaryInput[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;display:flex;padding-bottom:10px;padding-left:10px;gap:1rem}.searchDictionaryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.searchDictionaryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.dictionaryIframe[_ngcontent-%COMP%]{width:100%;border-radius:0 0 5px 5px}"]}),i})();const In=function(i){return{"background-color":i}};function En(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.NdJ("click",function(){const f=e.CHM(t).$implicit,C=e.oxw();return e.KtG(C.toggleLegendTag(f.key,f.value))}),e._UZ(1,"div",8),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"titlecase"),e._uU(5),e.qZA()}if(2&i){const t=p.$implicit,n=e.oxw();e.uIk("id",t.key),e.xp6(1),e.Q6J("ngStyle",e.VKq(8,In,t.value[0].color)),e.xp6(1),e.hij(" ","en"==n.ts.l.iso_code?e.lcZ(3,4,t.value[0].nameEN):e.lcZ(4,6,t.value[0].nameGA)," "),e.xp6(3),e.hij(" (","Broad/Slender"==t.value[0].nameEN?t.value.length/2:t.value.length,") ")}}let Dn=(()=>{class i{constructor(t){this.ts=t,this.closeGrammarEmitter=new e.vpe}ngOnInit(){}selectedGrammarSuggestion(){return this.quillHighlighter?this.quillHighlighter.getGrammarMessage(this.grammarLoaded):""}toggleLegendTag(t,n){this.checkBoxes[t]=!this.checkBoxes[t],this.checkBoxes[t]?(this.quillHighlighter.show(n),document.getElementById(t).classList.remove("hideLegendItem")):(this.quillHighlighter.hide(n),document.getElementById(t).classList.add("hideLegendItem"))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-grammar-error-drawer"]],inputs:{quillHighlighter:"quillHighlighter",grammarLoaded:"grammarLoaded",grammarErrorsTypeDict:"grammarErrorsTypeDict",checkBoxes:"checkBoxes"},outputs:{closeGrammarEmitter:"closeGrammarEmitter"},decls:10,vars:5,consts:[[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"grammarMessageBanner"],[1,"grammarMessage",3,"innerHTML"],[1,"selectErrorCheckbox"],["class","errorContainer",3,"click",4,"ngFor","ngForOf"],[1,"errorContainer",3,"click"],[1,"errorColorBox",3,"ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h5"),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e.NdJ("click",function(){return n.closeGrammarEmitter.next(!0)}),e._UZ(4,"i",2),e.qZA()(),e.TgZ(5,"div",3),e._UZ(6,"div",4),e.qZA(),e.TgZ(7,"div",5),e.YNc(8,En,6,10,"div",6),e.ALo(9,"keyvalue"),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",n.ts.message("grammar_errors")," "),e.xp6(4),e.Q6J("innerHTML",n.selectedGrammarSuggestion(),e.oJD),e.xp6(2),e.Q6J("ngForOf",e.lcZ(9,3,n.grammarErrorsTypeDict)))},dependencies:[d.sg,d.PC,d.rS,d.Nd],styles:[".grammarMessageBanner[_ngcontent-%COMP%]{padding-bottom:20px}.selectErrorCheckbox[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:space-around;text-align:left;padding-left:10px;gap:1.5rem;-webkit-user-select:none;-moz-user-select:none;user-select:none}.errorContainer[_ngcontent-%COMP%]{margin:2px}.errorContainer[_ngcontent-%COMP%]:hover{cursor:pointer}.errorColorBox[_ngcontent-%COMP%]{display:inline-flex;width:30px;height:15px}.hideLegendItem[_ngcontent-%COMP%]{text-decoration:line-through;opacity:.5}.dictionaryContainer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:wrap}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),i})();function Bn(i,p){if(1&i&&e._UZ(0,"audio",7,8),2&i){const t=e.oxw();e.Q6J("src",t.audioSource,e.LSH)}}function Fn(i,p){if(1&i&&e._UZ(0,"div",9),2&i){const t=e.oxw();e.Q6J("innerHTML",t.sanitizer.bypassSecurityTrustHtml(null==t.story||null==t.story.feedback?null:t.story.feedback.feedbackMarkup),e.oJD)}}let Rn=(()=>{class i{constructor(t,n,o,f,C){this.ts=t,this.sanitizer=n,this.storyService=o,this.engagement=f,this.notificationService=C,this.closeFeedbackEmitter=new e.vpe}ngOnInit(){}ngOnChanges(t){this.story&&(this.story.feedback.text||this.story.feedback.audioId||this.story.feedback.feedbackMarkup)&&this.getFeedback()}getFeedback(){this.story.feedback.audioId&&this.getFeedbackAudio(),""!==this.story.feedback.text&&(this.story.feedback.seenByStudent=!0),this.storyService.viewFeedback(this.story._id).subscribe(()=>{this.engagement.addEventForLoggedInUser(T.tw["VIEW-FEEDBACK"],this.story),this.notificationService.getStudentNotifications()})}getFeedbackAudio(){this.storyService.getFeedbackAudio(this.story._id).subscribe(t=>{this.audioSource=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(t)),console.log(this.audioSource)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.D),e.Y36(Ue.H7),e.Y36(y.N),e.Y36(O.M),e.Y36(U.g))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-feedback-drawer"]],inputs:{story:"story"},outputs:{closeFeedbackEmitter:"closeFeedbackEmitter"},features:[e.TTD],decls:11,vars:5,consts:[[1,"feedbackHeader"],[1,"closeFeedbackBtn",3,"click"],[1,"fa","fa-times"],[1,"textFieldContainer"],["readonly","",1,"textField",3,"placeholder","value"],["id","audio","controls","","class","audioPlayer",3,"src",4,"ngIf"],["class","textField","style","text-align: left; padding-left:25%; padding-right:25%;",3,"innerHTML",4,"ngIf"],["id","audio","controls","",1,"audioPlayer",3,"src"],["audioTag",""],[1,"textField",2,"text-align","left","padding-left","25%","padding-right","25%",3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e.NdJ("click",function(){return n.closeFeedbackEmitter.next(!0)}),e._UZ(4,"i",2),e.qZA()(),e.TgZ(5,"div",3)(6,"textarea",4),e._uU(7,"    "),e.qZA(),e.YNc(8,Bn,2,1,"audio",5),e._UZ(9,"hr"),e.YNc(10,Fn,1,1,"div",6),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",n.ts.l.feedback," "),e.xp6(4),e.s9C("placeholder",n.ts.l.no_feedback_provided),e.s9C("value",null==n.story||null==n.story.feedback?null:n.story.feedback.text),e.xp6(2),e.Q6J("ngIf",n.audioSource&&(null==n.story||null==n.story.feedback?null:n.story.feedback.audioId)),e.xp6(2),e.Q6J("ngIf",null==n.story||null==n.story.feedback?null:n.story.feedback.feedbackMarkup))},dependencies:[d.O5],styles:[".feedbackHeader[_ngcontent-%COMP%]{width:100%;padding-left:20px;padding-right:20px;height:30px;background-color:var(--scealai-green);color:#fff;display:flex;align-items:center}.closeFeedbackBtn[_ngcontent-%COMP%]{margin-left:auto}.closeFeedbackBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.textFieldContainer[_ngcontent-%COMP%]{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px}.textField[_ngcontent-%COMP%]{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px;border:none}.audioPlayer[_ngcontent-%COMP%]{height:30px;width:90%;background-color:#f1f3f4;border:1px solid rgba(140,128,110,.5254901961)}"]}),i})();const Zn=["rightDrawer"],Nn=["mySynthesisPlayer"];function Ln(i,p){1&i&&(e.TgZ(0,"span"),e._uU(1,"*"),e.qZA())}function Un(i,p){if(1&i&&(e.TgZ(0,"span",23),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.ts.l.made_using_prompts," ")}}function jn(i,p){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e._UZ(2,"i",25),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.ts.l.saved," ")}}function Hn(i,p){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e._UZ(2,"i",26),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.ts.l.saving," ")}}function Gn(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"input",18),e.NdJ("ngModelChange",function(o){e.CHM(t);const f=e.oxw();return e.KtG(f.updatedTitle=o)})("blur",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.updateStoryTitle())}),e.qZA(),e.YNc(3,Ln,2,0,"span",19),e.YNc(4,Un,2,1,"span",20),e.qZA(),e.TgZ(5,"div",21),e.YNc(6,jn,3,1,"div",22),e.YNc(7,Hn,3,1,"div",22),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.s9C("size",t.updatedTitle.length),e.Q6J("ngStyle",t.titleStyle())("ngModel",t.updatedTitle),e.xp6(1),e.Q6J("ngIf",!t.storySaved),e.xp6(1),e.Q6J("ngIf",null==t.story?null:t.story.createdWithPrompts),e.xp6(2),e.Q6J("ngIf",t.storySaved),e.xp6(1),e.Q6J("ngIf",!t.storySaved)}}function Yn(i,p){1&i&&e._UZ(0,"i",35)}function Jn(i,p){1&i&&e._UZ(0,"i",36)}function qn(i,p){1&i&&(e.TgZ(0,"span",40),e._uU(1,"speech_to_text"),e.qZA())}function zn(i,p){1&i&&(e.TgZ(0,"button",41),e._UZ(1,"i",42),e.qZA())}function Qn(i,p){1&i&&(e.TgZ(0,"div"),e._UZ(1,"div",43),e.qZA())}const Vn=function(i){return{disableDiv:i}};function Wn(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.dontToggle=!0,e.KtG(o.speakStory())}),e._uU(1),e.YNc(2,qn,2,0,"span",38),e.YNc(3,zn,2,0,"button",39),e.YNc(4,Qn,2,0,"div",19),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(5,Vn,t.isTranscribing)),e.xp6(1),e.hij(" ",t.ts.l.speak," "),e.xp6(1),e.Q6J("ngIf",!t.isRecording),e.xp6(1),e.Q6J("ngIf",t.isRecording&&!t.isTranscribing),e.xp6(1),e.Q6J("ngIf",t.isTranscribing)}}function Kn(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.dontToggle=!0)}),e.TgZ(1,"button",45),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.downloadStory())}),e._uU(2),e._UZ(3,"i",46),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.s9C("href",t.downloadStoryUrl()),e.xp6(1),e.hij(" ",t.ts.l.download," ")}}function Xn(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.dontToggle=!0,e.KtG(o.goToRecording())}),e._uU(1),e._UZ(2,"i",48),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.ts.l.recordings," ")}}function $n(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.dontToggle=!0,e.KtG(o.toggleRightDrawer("feedback"))}),e._uU(1),e._UZ(2,"i",49),e.qZA()}if(2&i){const t=e.oxw(2);e.ekj("optionsBtnClicked",t.rightDrawerOpened&&"feedback"==t.selectedDrawer),e.xp6(1),e.hij(" ",t.ts.l.feedback," ")}}function er(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.dontToggle=!0,e.KtG(o.synthesisPlayer.toggleHidden())}),e._uU(1),e._UZ(2,"i",50),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.ts.l.audio_check," ")}}function tr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.dontToggle=!0,e.KtG(o.toggleRightDrawer("grammar"))}),e._uU(1),e._UZ(2,"i",51),e.qZA()}if(2&i){const t=e.oxw(2);e.ekj("optionsBtnClicked",t.rightDrawerOpened&&"grammar"==t.selectedDrawer),e.xp6(1),e.hij(" ",t.ts.l.grammar_errors," ")}}function nr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",47),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return o.dontToggle=!0,e.KtG(o.toggleRightDrawer("dictionary"))}),e._uU(1),e._UZ(2,"i",52),e.qZA()}if(2&i){const t=e.oxw(2);e.ekj("optionsBtnClicked",t.rightDrawerOpened&&"dictionary"==t.selectedDrawer),e.xp6(1),e.hij(" ",t.ts.l.dictionary," ")}}function rr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleOptions())}),e.TgZ(1,"div",28),e.YNc(2,Yn,1,0,"i",29),e.YNc(3,Jn,1,0,"i",30),e.qZA(),e.YNc(4,Wn,5,7,"div",31),e.YNc(5,Kn,4,2,"div",32),e.YNc(6,Xn,3,1,"div",33),e.YNc(7,$n,3,3,"div",34),e.YNc(8,er,3,1,"div",33),e.YNc(9,tr,3,3,"div",34),e.YNc(10,nr,3,3,"div",34),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!t.showOptions),e.xp6(1),e.Q6J("ngIf",t.showOptions),e.xp6(1),e.Q6J("ngIf",t.showOptions),e.xp6(1),e.Q6J("ngIf",t.showOptions),e.xp6(1),e.Q6J("ngIf",t.showOptions),e.xp6(1),e.Q6J("ngIf",t.showOptions&&t.hasFeedback),e.xp6(1),e.Q6J("ngIf",t.showOptions),e.xp6(1),e.Q6J("ngIf",t.showOptions),e.xp6(1),e.Q6J("ngIf",t.showOptions)}}function ir(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",53,54)(2,"mat-icon",55),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(4);return e.KtG(o.toggle())}),e._uU(3,"menu"),e.qZA(),e.TgZ(4,"quill-editor",56),e.NdJ("ngModelChange",function(o){e.CHM(t);const f=e.oxw();return e.KtG(f.story.htmlText=o)})("onContentChanged",function(o){e.CHM(t);const f=e.oxw();return e.KtG(f.onContentChanged(o))})("onEditorCreated",function(o){e.CHM(t);const f=e.oxw();return e.KtG(f.onEditorCreated(o))}),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("ngStyle",t.quillEditorStyle),e.xp6(4),e.Q6J("modules",t.quillToolbar)("preserveWhitespace",!0)("debounceTime",1500)("ngModel",t.story.htmlText)}}function or(i,p){1&i&&(e.TgZ(0,"div",57),e._uU(1," Click on the '+' button to create your first story! "),e.qZA())}function sr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"app-feedback-drawer",58),e.NdJ("closeFeedbackEmitter",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleRightDrawer("feedback"))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("story",t.story)}}function ar(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"app-dictionary-drawer",59),e.NdJ("closeDictionaryEmitter",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleRightDrawer("dictionary"))}),e.qZA()}}function cr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"app-grammar-error-drawer",60),e.NdJ("closeGrammarEmitter",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleRightDrawer("grammar"))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("quillHighlighter",t.quillHighlighter)("grammarLoaded",t.grammarLoaded)("grammarErrorsTypeDict",t.grammarErrorsTypeDict)("checkBoxes",t.checkBoxes)}}fe().register("modules/imageCompress",Ve());let dr=(()=>{class i{constructor(t,n,o,f,C,k,I,R,E){this.ts=t,this.auth=n,this.storyService=o,this.recordAudioService=f,this.engagement=C,this.classroomService=k,this.dialog=I,this.http=R,this.router=E,this.stories=[],this.saveStoryDebounceId=0,this.mostRecentAttemptToSaveStory=new Date,this.storySaved=!0,this.storiesLoaded=!1,this.downloadStoryFormat=".pdf",this.hasFeedback=!1,this.updatedTitle="",this.grammarLoaded=!1,this.grammarErrors=[],this.showErrorTags=!1,this.grammarCheckerOptions={anGramadoir:Yt,relativeClause:zt,broadSlender:Bt},this.checkBoxes={},this.grammarErrorsTypeDict={},this.showOptions=!0,this.dontToggle=!1,this.rightDrawerOpened=!1,this.selectedDrawer="grammar",this.words=[],this.wordCount=0,this.textUpdated=new Q.x,this.quillToolbar={toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"],["image"]],imageCompress:{quality:.7,maxWidth:500,maxHeight:500,imageType:"image/png",debug:!1,suppressErrorLogging:!1,insertIntoEditor:void 0}},this.isRecording=!1,this.isTranscribing=!1,this.setUpGrammarChecking()}ngOnInit(){return(0,m.Z)(function*(){})()}setUpGrammarChecking(){var t=this;return(0,m.Z)(function*(){const n=t.auth.getUserDetails();if(!n)return;let o=yield(0,Z.z)(t.classroomService.getClassroomOfStudent(n._id)),f=[];o&&o.grammarCheckers&&o.grammarCheckers.length>0?o.grammarCheckers.forEach(C=>{t.grammarCheckerOptions[C]&&f.push(t.grammarCheckerOptions[C])}):f=Object.values(t.grammarCheckerOptions),t.grammarEngine=new Ie(f,t.http,t.auth),t.textUpdated.pipe((0,Te.x)()).subscribe((0,m.Z)(function*(){if(t.grammarLoaded=!1,t.story.text.replace(/\n/g," "))try{t.grammarErrors=[],t.grammarEngine.check$(t.story.text).subscribe({next:k=>{t.grammarErrors.push(k),t.showErrorTags&&t.quillHighlighter.show([k])},error:function(){},complete:()=>{if(t.quillHighlighter){t.showErrorTags&&t.quillHighlighter.show(t.grammarErrors.filter(k=>t.checkBoxes[k.type])),t.grammarErrors&&t.grammarEngine.saveErrorsWithSentences(t.story._id).then(console.log,console.error),t.grammarErrorsTypeDict=t.grammarErrors.reduce(function(k,I){return k[I.type]||(k[I.type]=[]),k[I.type].push(I),k},{});for(const k of Object.keys(t.grammarErrorsTypeDict))t.checkBoxes[k]=!0;t.grammarLoaded=!0}}})}catch(k){t.grammarErrors||window.alert("There was an error while trying to fetch grammar suggestions from the Gramad\xf3ir server:\n"+k.message+"\nSee the browser console for more information"),console.dir(k)}}))})()}toggleRightDrawer(t){this.rightDrawerOpened?this.selectedDrawer===t&&(this.rightDrawer.close(),this.rightDrawerOpened=!1):(this.rightDrawer.open(),this.rightDrawerOpened=!0),this.selectedDrawer=t,"grammar"==this.selectedDrawer&&this.rightDrawerOpened?(this.showErrorTags=!0,this.toggleGrammarTags()):(this.showErrorTags=!1,this.toggleGrammarTags())}setCurrentStory(t){this.story=t,this.story&&(this.storySaved=!0,this.updatedTitle=this.story.title,this.getWordCount(this.story.text),this.textUpdated.next(t.text))}onContentChanged(t){"user"===(this.story.text=t.text,this.getWordCount(t.text),t.source)&&(this.storySaved=!1,this.textUpdated.next(t.text),this.debounceSaveStory())}onEditorCreated(t){t.history.options.userOnly=!0,this.quillEditor=t,this.quillEditor.root.setAttribute("spellcheck","false"),t.focus(),this.quillHighlighter=new Dt(this.quillEditor,this.ts,this.engagement)}getWordCount(t){if(!t)return 0;const n=t.replace(/[\t\n\r\.\?\!]/gm," ").split(" ");this.words=[],n.map(o=>{const f=o.trim();f.length>0&&this.words.push(f)}),this.wordCount=this.words.length}debounceSaveStory(){this.saveStoryDebounceId++;const t=this.saveStoryDebounceId,n=new Date;setTimeout(()=>{t===this.saveStoryDebounceId&&this.saveStory(t,n)},1e3)}saveStory(t,n){var o=this;return(0,m.Z)(function*(){const f=new Date;if(o.mostRecentAttemptToSaveStory=f,!o.story._id)return window.alert("Cannot save story. The id is not known");const C=o.stripGramadoirAttributesFromHtml(Ke()(o.story.htmlText)),k={title:o.story.title,dialect:o.story.dialect,text:o.story.text,htmlText:C,lastUpdated:n};o.engagement.addEventForLoggedInUser(T.tw["SAVE-STORY"],o.story);try{yield(0,Z.z)(o.storyService.updateStory(k,o.story._id)),(t===o.saveStoryDebounceId||"modal"===t)&&(o.storySaved=!0)}catch(I){throw window.alert("Error while trying to save story: "+I.message),I}try{f===o.mostRecentAttemptToSaveStory&&(o.storySaved=!0)}catch(I){throw window.alert("Error setting storySaved to true: "+I.message),I}})()}stripGramadoirAttributesFromHtml(t){return t&&t.replace?t.replace(/\s*style="([^"])+"/g,"").replace(/\s*highlight-tag-type="([^"])+"/g,"").replace(/\s*highlight-tag="([^"])+"/g,""):""}toggleOptions(){this.dontToggle||(this.showOptions=!this.showOptions),this.dontToggle=!1}titleStyle(){return{"font-style":this.storySaved?"normal":"italic"}}updateStoryTitle(){this.updatedTitle!=this.story.title&&(this.storySaved=!1,this.story.title=this.updatedTitle,this.storyService.updateTitle(this.story._id,this.story.title).subscribe({next:()=>{this.storySaved=!0,console.log("title updated")},error:()=>console.log("error updating title")}))}downloadStory(){this.dialogRef=this.dialog.open(u.p,{data:{title:this.ts.l.download,type:"select",data:[this.story.title,[".pdf",".docx",".txt",".odt"]],confirmText:this.ts.l.download,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=void 0,t&&(this.downloadStoryFormat=t[1]?t[1]:".pdf",this.http.get(this.downloadStoryUrl(),{responseType:"blob"}).subscribe(n=>{const o=window.document.createElement("a");o.href=window.URL.createObjectURL(n),o.download=t[0]?t[0]:this.story.title,document.body.appendChild(o),o.click(),document.body.removeChild(o)}))})}downloadStoryUrl(){return oe.Z.baseurl+"story/downloadStory/"+this.story._id+"/"+this.downloadStoryFormat}toggleGrammarTags(){var t=this;return(0,m.Z)(function*(){t.showErrorTags?t.quillHighlighter.show(t.grammarErrors.filter(n=>t.checkBoxes[n.type])):t.quillHighlighter.hideAll()})()}goToRecording(){this.router.navigateByUrl("/student/record-story/"+this.story._id)}speakStory(){var t=this;return(0,m.Z)(function*(){if(t.isRecording){t.isTranscribing=!0,t.recordAudioService.stopRecording();let n=yield t.recordAudioService.getAudioTranscription();if(t.isTranscribing=!1,n){let o=t.quillEditor.getSelection(!0);t.quillEditor.insertText(o.index,n+"."),t.story.text=t.quillEditor.getText(),t.story.htmlText=t.quillEditor.root.innerHTML,t.getWordCount(n),t.storySaved=!1,t.debounceSaveStory()}}else t.recordAudioService.recordAudio();t.isRecording=!t.isRecording})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.D),e.Y36(M.$),e.Y36(y.N),e.Y36(Xe.r),e.Y36(O.M),e.Y36(A.u),e.Y36(s.uw),e.Y36(ft.eN),e.Y36(c.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-dashboard"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Zn,5),e.Gf(Nn,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.rightDrawer=o.first),e.iGM(o=e.CRH())&&(n.synthesisPlayer=o.first)}},decls:18,vars:10,consts:[["class","storyTitleHeader",4,"ngIf"],["class","optionsBtnContainer",3,"click",4,"ngIf"],["autosize","",1,"bodyContainer"],["mode","side","opened","true",1,"storyListDrawer"],["storyDrawer",""],[3,"storyEmitter","hasFeedback"],[1,"storyContainer"],["class","ql-container",3,"ngStyle",4,"ngIf","ngIfElse"],["newStoryMessage",""],["mode","side","position","end",1,"rightDrawer"],["rightDrawer",""],[3,"story","closeFeedbackEmitter",4,"ngIf"],[3,"closeDictionaryEmitter",4,"ngIf"],[3,"quillHighlighter","grammarLoaded","grammarErrorsTypeDict","checkBoxes","closeGrammarEmitter",4,"ngIf"],[3,"text","storyId","storyTitle"],["mySynthesisPlayer",""],[1,"storyTitleHeader"],[1,"storyTitleContainer"],[1,"storyTitle",3,"ngStyle","size","ngModel","ngModelChange","blur"],[4,"ngIf"],["style","color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"saveIcon"],["class","savedIcon",4,"ngIf"],[2,"color","rgba(0, 0, 0, 0.4)"],[1,"savedIcon"],[1,"fas","fa-check"],[1,"fas","fa-save"],[1,"optionsBtnContainer",3,"click"],[1,"optionsBtn"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-right",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"ngClass","click",4,"ngIf"],["style","display: flex",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"optionsBtnClicked","click",4,"ngIf"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-right"],[1,"optionsBtn","optionsPopupBtn",3,"ngClass","click"],["class","material-symbols-outlined optionsBtnIcon",4,"ngIf"],["class","notRecordingBtn blink",4,"ngIf"],[1,"material-symbols-outlined","optionsBtnIcon"],[1,"notRecordingBtn","blink"],[1,"fas","fa-stop-circle"],[1,"dot-flashing"],[2,"display","flex",3,"click"],["target","_blank",1,"optionsBtn","optionsPopupBtn",2,"text-decoration","none",3,"href","click"],[1,"fas","fa-download","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"click"],[1,"fas","fa-microphone","optionsBtnIcon"],[1,"fas","fa-comment-dots","optionsBtnIcon"],[1,"fas","fa-volume-up","optionsBtnIcon"],[1,"fas","fa-spell-check","optionsBtnIcon"],[1,"fas","fa-book","optionsBtnIcon"],[1,"ql-container",3,"ngStyle"],["quillHeightSpan",""],[1,"menuButton",3,"click"],["placeholder","",3,"modules","preserveWhitespace","debounceTime","ngModel","ngModelChange","onContentChanged","onEditorCreated"],[1,"newStoryMessage"],[3,"story","closeFeedbackEmitter"],[3,"closeDictionaryEmitter"],[3,"quillHighlighter","grammarLoaded","grammarErrorsTypeDict","checkBoxes","closeGrammarEmitter"]],template:function(t,n){if(1&t&&(e.YNc(0,Gn,8,7,"div",0),e.YNc(1,rr,11,9,"div",1),e.TgZ(2,"mat-drawer-container",2)(3,"mat-drawer",3,4)(5,"app-story-drawer",5,4),e.NdJ("storyEmitter",function(f){return n.setCurrentStory(f)})("hasFeedback",function(f){return n.hasFeedback=f}),e.qZA()(),e.TgZ(7,"div",6),e.YNc(8,ir,5,5,"div",7),e.YNc(9,or,2,0,"ng-template",null,8,e.W1O),e.qZA(),e.TgZ(11,"mat-drawer",9,10),e.YNc(13,sr,1,1,"app-feedback-drawer",11),e.YNc(14,ar,1,0,"app-dictionary-drawer",12),e.YNc(15,cr,1,4,"app-grammar-error-drawer",13),e.qZA()(),e._UZ(16,"app-synthesis-player",14,15)),2&t){const o=e.MAs(10);e.Q6J("ngIf",n.story),e.xp6(1),e.Q6J("ngIf",n.story),e.xp6(7),e.Q6J("ngIf",n.story)("ngIfElse",o),e.xp6(5),e.Q6J("ngIf","feedback"==n.selectedDrawer),e.xp6(1),e.Q6J("ngIf","dictionary"==n.selectedDrawer),e.xp6(1),e.Q6J("ngIf","grammar"==n.selectedDrawer),e.xp6(1),e.Q6J("text",null==n.story?null:n.story.text)("storyId",null==n.story?null:n.story._id)("storyTitle",null==n.story?null:n.story.title)}},dependencies:[d.mk,d.O5,d.PC,B.Fj,B.JJ,B.On,dt,lt,Fe.Hw,wt.g6,ye,Tn,Pn,Dn,Rn],styles:[".storyTitleHeader{display:flex;justify-content:center;margin-top:-30px;padding-bottom:20px}.storyTitleContainer{margin:auto;overflow:auto;font-size:20px;font-weight:bolder}.storyTitle{border:1px solid transparent;text-align:center;resize:none}.storyTitle:hover{border:1px solid;border-radius:5px}.saveIcon{align-self:flex-end;white-space:nowrap;color:var(--dark-text);border-style:none;font-size:11pt;padding:5px}.savedIcon{color:var(--scealai-light-brown)}.optionsBtnContainer>*{height:2rem}.optionsBtnContainer{display:flex;justify-content:space-between;flex-wrap:wrap;--options-btn-background-color-hover: lightgray;margin-left:2%;margin-right:2%}.optionsBtn{background-color:var(--scealai-yellow);border-style:none;color:#464444;margin:0;border-radius:2px;display:flex;align-items:center;padding:5px;background:rgba(223,217,200,0)}.optionsBtn:hover{background-color:var(--options-btn-background-color-hover);color:#35322f;cursor:pointer;border-radius:2}.optionsPopupBtn{margin-right:4px}.optionsBtnIcon{margin-left:5px}.optionsBtnClicked{background-color:var(--options-btn-background-color-hover);color:#35322f;border-radius:2}.notRecordingBtn{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.bodyContainer{width:100%;height:100%}.storyListDrawer{padding:40px;max-width:35%;height:100%}.storyContainer{height:100%}.ql-container{background-color:#f8f9fa;height:100%}.ql-editor{background-color:#fff;z-index:1;margin-top:20px;font-size:14pt;font-family:Times New Roman,Times,serif;min-height:70vh!important;max-height:70vh!important}.menuButton{float:left;padding-left:10px;padding-top:5px;transform:scale(2);z-index:100}.menuButton:hover{cursor:pointer}.newStoryMessage{font-weight:bolder;max-width:200px;padding-top:50px;padding-bottom:50px;height:80vh;width:100%}.rightDrawer{width:25%;height:100%}.blink{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}\n",".custom-tooltip:before{content:none!important}[data-selected]{margin:.3em}[highlight-tag-type]{border-radius:3px}span[highlight-tag-type]:hover{cursor:pointer}span:not[highlight-tag-type]{border-radius:0;padding-left:0;padding-right:0}[highlight-tag-type=LEATHAN-CAOL]{border:1px solid gray;border-radius:0!important;padding-left:0!important;padding-right:0!important}\n",'.ql-editor{overflow-y:auto}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=times-new-roman]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=times-new-roman]:before{content:"Times New Roman";font-family:Times New Roman}.ql-font-times-new-roman{font-family:times new roman}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=arial]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=arial]:before{content:"Arial";font-family:arial}.ql-font-arial{font-family:arial}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=sans-serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=sans-serif]:before{content:"Sans Serif";font-family:"sans serif"}.ql-font-sans-serif{font-family:"sans serif"}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{content:"Monospace";font-family:"monospace"}.ql-font-monospace{font-family:"monospace"}\n'],encapsulation:2}),i})(),Et=(()=>{class i{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustHtml(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ue.H7,16))},i.\u0275pipe=e.Yjl({name:"safeHtml",type:i,pure:!0}),i})();function lr(i,p){if(1&i&&(e.TgZ(0,"div",14)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.ts.l.synthesising)}}function ur(i,p){1&i&&(e._UZ(0,"span",18),e.ALo(1,"safeHtml")),2&i&&e.Q6J("innerHTML",e.lcZ(1,1,p.$implicit.outerHTML),e.oJD)}function pr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,f=e.oxw(2);return e.KtG(f.stopSection(o))}),e._UZ(1,"i",20),e.qZA()}}function hr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,f=e.oxw(2);return e.KtG(f.playSection(o))}),e._UZ(1,"i",21),e.qZA()}}function gr(i,p){if(1&i&&(e.TgZ(0,"div",2),e.YNc(1,ur,2,3,"span",16),e.YNc(2,pr,2,0,"button",17),e.YNc(3,hr,2,0,"button",17),e.qZA()),2&i){const t=p.$implicit;e.xp6(1),e.Q6J("ngForOf",t.spans),e.xp6(1),e.Q6J("ngIf",!t.audio.paused),e.xp6(1),e.Q6J("ngIf",t.audio.paused)}}function fr(i,p){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,gr,4,3,"div",15),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.chosenSections)}}function mr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",24),e._uU(2),e.qZA(),e.TgZ(3,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changeSections(o.sentences))}),e._uU(4),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.paragraph),e.xp6(2),e.Oqu(t.ts.l.sentence)}}function _r(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changeSections(o.paragraphs))}),e._uU(2),e.qZA(),e.TgZ(3,"button",24),e._uU(4),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.paragraph),e.xp6(2),e.Oqu(t.ts.l.sentence)}}function vr(i,p){if(1&i&&(e.TgZ(0,"div",22)(1,"div",23),e._uU(2),e.qZA(),e.YNc(3,mr,5,2,"div",11),e.YNc(4,_r,5,2,"div",11),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.listen_by," "),e.xp6(1),e.Q6J("ngIf",t.isParagraphMode()),e.xp6(1),e.Q6J("ngIf",t.isSentenceMode())}}let yr=(()=>{class i{constructor(t,n,o,f,C){this.storyService=t,this.route=n,this.router=o,this.ts=f,this.synthesis=C,this.paragraphs=[],this.sentences=[],this.audioFinishedLoading=!1}ngOnInit(){var t=this;return(0,m.Z)(function*(){t.storyId=t.route.snapshot.paramMap.get("id");let n=yield(0,Z.z)(t.storyService.getStory(t.storyId));t.synthesis.synthesiseStory(n).then(([o,f])=>{t.paragraphs=o,t.sentences=f,t.chosenSections=t.paragraphs,t.audioFinishedLoading=!0})})()}isSentenceMode(){return this.chosenSections[0]instanceof X.cj}isParagraphMode(){return this.chosenSections[0]instanceof X.nv}changeSections(t){this.chosenSections=t,this.paragraphs.concat(this.sentences).forEach(o=>this.stopSection(o))}playSection(t){t.play(),t.highlight()}stopSection(t){t.stop(),t.removeHighlight()}goToDashboard(){this.router.navigateByUrl("/student/dashboard/"+this.storyId)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.N),e.Y36(c.gz),e.Y36(c.F0),e.Y36(g.D),e.Y36(X.cf))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-synthesis"]],decls:18,vars:5,consts:[["src","assets/img/book.png",1,"bookImg"],[1,"page"],[1,"paragraphContainer"],[1,"bookContainerSynth"],[1,"bookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"storyContainer"],[1,"storyHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[4,"ngIf"],[1,"footer"],["class","btnContainer",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"btnContainer"],[1,"footerText"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"]],template:function(t,n){1&t&&(e._UZ(0,"img",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5),e.NdJ("click",function(){return n.goToDashboard()}),e._UZ(6,"i",6),e._uU(7),e.qZA(),e._UZ(8,"div"),e.qZA(),e.TgZ(9,"div",7)(10,"div",8),e._uU(11),e.qZA(),e.TgZ(12,"div")(13,"div",9),e.YNc(14,lr,4,1,"div",10),e.YNc(15,fr,2,1,"div",11),e.qZA(),e.TgZ(16,"div",12),e.YNc(17,vr,5,3,"div",13),e.qZA()()()()()),2&t&&(e.xp6(7),e.hij(" ",n.ts.l.story,""),e.xp6(4),e.hij(" ",n.ts.l.listen_and_correct," "),e.xp6(3),e.Q6J("ngIf",!n.audioFinishedLoading),e.xp6(1),e.Q6J("ngIf",n.audioFinishedLoading),e.xp6(2),e.Q6J("ngIf",n.audioFinishedLoading))},dependencies:[d.sg,d.O5,K.P,Et],styles:['.bookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:var(--dark-text);width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.storyContainer[_ngcontent-%COMP%]{margin-top:10px}.storyHeader[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]:hover, .selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),i})();class br{constructor(p,t=[],n=[],o=[],f=[],C=[],k=[]){this.paragraphAudioIds=t,this.paragraphIndices=n,this.paragraphTranscriptions=o,this.sentenceAudioIds=f,this.sentenceIndices=C,this.sentenceTranscriptions=k,this.storyData=p,this.date=new Date,this.archived=!1}}var xr=r(2754);function wr(i,p){1&i&&(e.TgZ(0,"span"),e._uU(1,"*"),e.qZA())}function Cr(i,p){if(1&i&&(e.TgZ(0,"div",16),e._uU(1),e._UZ(2,"i",17),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.ts.l.saved," ")}}function Mr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.saveRecordings())}),e._uU(1),e._UZ(2,"i",19),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.ts.l.save," ")}}function Sr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.goToDashboard())}),e._UZ(2,"i",10),e._uU(3),e.qZA(),e.TgZ(4,"div",11),e._uU(5),e.YNc(6,wr,2,0,"span",12),e.qZA(),e.TgZ(7,"div",13),e.YNc(8,Cr,3,1,"div",14),e.YNc(9,Mr,3,1,"div",15),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.ts.l.story," "),e.xp6(2),e.hij(" ",null==t.story?null:t.story.title,""),e.xp6(1),e.Q6J("ngIf",!t.recordingSaved),e.xp6(2),e.Q6J("ngIf",t.recordingSaved),e.xp6(1),e.Q6J("ngIf",!t.recordingSaved)}}function Tr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div",20),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(5);return e.KtG(o.toggle())}),e.TgZ(1,"mat-icon"),e._uU(2,"menu"),e.qZA(),e._uU(3),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.ts.l.archive," ")}}const kr=function(i){return{"font-style":i}};function Ar(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",21),e.NdJ("click",function(){const f=e.CHM(t).$implicit,C=e.oxw();return e.KtG(C.setCurrentRecording(f))}),e.TgZ(2,"div",22)(3,"div",23),e._uU(4),e.qZA()(),e.TgZ(5,"div",24),e._uU(6),e.ALo(7,"date"),e.qZA()(),e._UZ(8,"hr"),e.qZA()}if(2&i){const t=p.$implicit;e.xp6(1),e.uIk("id",t._id),e.xp6(2),e.Q6J("ngStyle",e.VKq(7,kr,t.archived?"none":"italic")),e.xp6(1),e.hij(" ",null==t||null==t.storyData?null:t.storyData.title,""),e.xp6(2),e.hij(" ",e.xi3(7,4,t.date,"d/M/yy, h:mm a")," ")}}function Or(i,p){if(1&i&&(e.TgZ(0,"div",30)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.synthesising)}}function Pr(i,p){1&i&&(e._UZ(0,"span",42),e.ALo(1,"safeHtml")),2&i&&e.Q6J("innerHTML",e.lcZ(1,1,p.$implicit.outerHTML),e.oJD)}function Ir(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,f=e.oxw(3);return e.KtG(f.stopSection(o))}),e._UZ(1,"i",44),e.qZA()}}function Er(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,f=e.oxw(3);return e.KtG(f.playSection(o))}),e._UZ(1,"i",45),e.qZA()}}function Dr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,f=e.oxw(3);return e.KtG(f.recordAudio(o))}),e._UZ(1,"i",47),e.qZA()}}function Br(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,f=e.oxw(3);return e.KtG(f.stopRecording(o))}),e._UZ(1,"i",49),e.qZA()}}function Fr(i,p){1&i&&e._UZ(0,"hr",50)}function Rr(i,p){1&i&&(e.TgZ(0,"div",51),e._UZ(1,"div",52),e.qZA())}function Zr(i,p){if(1&i&&(e.TgZ(0,"div",53)(1,"span",54),e._uU(2),e.qZA(),e.TgZ(3,"span",55),e._uU(4),e.qZA()()),2&i){const t=e.oxw().index,n=e.oxw(3);e.xp6(2),e.hij("",n.ts.l.speech_recognition_output," "),e.xp6(2),e.Oqu(n.sectionTranscriptions[t])}}function Nr(i,p){if(1&i&&e._UZ(0,"audio",59,60),2&i){const t=e.oxw(2).index,n=e.oxw(3);e.uIk("src",n.sectionAudioSources[t],e.LSH)}}function Lr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).index,f=e.oxw(3);return e.KtG(f.deleteRecording(o))}),e._UZ(1,"i",62),e.qZA()}}function Ur(i,p){if(1&i&&(e.TgZ(0,"div",56)(1,"div",54),e._uU(2),e.qZA(),e.YNc(3,Nr,2,1,"audio",57),e.YNc(4,Lr,2,0,"button",58),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw(3);e.xp6(2),e.Oqu(n.ts.l.your_recording),e.xp6(1),e.Q6J("ngIf",n.sectionAudioSources[t]),e.xp6(1),e.Q6J("ngIf",n.sectionAudioSources[t]&&!n.currentRecording.archived)}}function jr(i,p){if(1&i&&(e.TgZ(0,"div",32)(1,"div",33)(2,"div"),e.YNc(3,Pr,2,3,"span",34),e.YNc(4,Ir,2,0,"button",35),e.YNc(5,Er,2,0,"button",35),e.YNc(6,Dr,2,0,"button",36),e.YNc(7,Br,2,0,"button",37),e.qZA(),e.YNc(8,Fr,1,0,"hr",38),e.YNc(9,Rr,2,0,"div",39),e.YNc(10,Zr,5,2,"div",40),e.YNc(11,Ur,5,3,"div",41),e.qZA()()),2&i){const t=p.$implicit,n=p.index,o=e.oxw(3);e.xp6(3),e.Q6J("ngForOf",t.spans),e.xp6(1),e.Q6J("ngIf",!t.audio.paused),e.xp6(1),e.Q6J("ngIf",t.audio.paused),e.xp6(1),e.Q6J("ngIf",!o.isRecording(t,n)&&!o.currentRecording.archived),e.xp6(1),e.Q6J("ngIf",o.isRecording(t,n)&&!o.currentRecording.archived),e.xp6(1),e.Q6J("ngIf",o.sectionAudioSources[n]),e.xp6(1),e.Q6J("ngIf",o.isTranscribing[n]),e.xp6(1),e.Q6J("ngIf",o.sectionTranscriptions[n]),e.xp6(1),e.Q6J("ngIf",o.sectionAudioSources[n])}}function Hr(i,p){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,jr,12,9,"div",31),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.chosenSections)}}function Gr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",67),e._uU(2),e.qZA(),e.TgZ(3,"button",68),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.changeSections(o.sentences))}),e._uU(4),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.ts.l.paragraph," "),e.xp6(2),e.hij(" ",t.ts.l.sentence," ")}}function Yr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",68),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.changeSections(o.paragraphs))}),e._uU(2),e.qZA(),e.TgZ(3,"button",67),e._uU(4),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.ts.l.paragraph," "),e.xp6(2),e.hij(" ",t.ts.l.sentence," ")}}function Jr(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",69),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.archiveRecording())}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.ts.l.archive_recording," ")}}function qr(i,p){if(1&i&&(e.TgZ(0,"div",63)(1,"div",64)(2,"div",65),e._uU(3),e.qZA(),e.YNc(4,Gr,5,2,"div",12),e.YNc(5,Yr,5,2,"div",12),e.YNc(6,Jr,2,1,"button",66),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.ts.l.listen_by," "),e.xp6(1),e.Q6J("ngIf",t.isParagraphMode()),e.xp6(1),e.Q6J("ngIf",t.isSentenceMode()),e.xp6(1),e.Q6J("ngIf",!t.currentRecording.archived&&t.currentRecording.storyData.text!=t.story.text)}}function zr(i,p){if(1&i&&(e.TgZ(0,"div",25)(1,"div",26),e._uU(2),e.qZA(),e.TgZ(3,"div",27),e.YNc(4,Or,4,1,"div",28),e.YNc(5,Hr,2,1,"div",12),e.qZA(),e.YNc(6,qr,7,4,"div",29),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.listen_record_compare," "),e.xp6(2),e.Q6J("ngIf",!t.audioFinishedLoading&&!t.recordingsFinishedLoading),e.xp6(1),e.Q6J("ngIf",t.audioFinishedLoading),e.xp6(1),e.Q6J("ngIf",t.audioFinishedLoading)}}const Vr=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"contents",component:qe,canActivate:[a.P]},{path:"dashboard",component:dr,canActivate:[a.P],canDeactivate:[l]},{path:"synthesis/:id",component:yr,canActivate:[a.P],canDeactivate:[_]},{path:"record-story/:id",component:(()=>{class i{constructor(t,n,o,f,C,k,I,R,E){this.storyService=t,this.ts=n,this.sanitizer=o,this.route=f,this.router=C,this.recordingService=k,this.synthesis=I,this.engagement=R,this.dialog=E,this.story=new b,this.paragraphs=[],this.sentences=[],this.isRecordingParagraph=[],this.isRecordingSentence=[],this.isRecordingSection=[],this.paragraphAudioSources=[],this.sentenceAudioSources=[],this.sectionAudioSources=[],this.paragraphBlobs=[],this.sentenceBlobs=[],this.sectionBlobs=[],this.paragraphChunks=[],this.sentenceChunks=[],this.sectionChunks=[],this.recordingSaved=!0,this.audioFinishedLoading=!1,this.url_ASR_API="https://phoneticsrv3.lcs.tcd.ie/asr_api/recognise",this.sentenceTranscriptions=[],this.paragraphTranscriptions=[],this.sectionTranscriptions=[],this.isTranscribing=[!1],this.recordings=[],this.currentRecording=null,this.lastClickedRecordingId=""}ngOnInit(){var t=this;return(0,m.Z)(function*(){t.chunks=[],t.sectionAudioSources=t.paragraphAudioSources,t.sectionBlobs=t.paragraphBlobs,t.sectionChunks=t.paragraphChunks,t.sectionTranscriptions=t.paragraphTranscriptions,t.isRecordingSection=t.isRecordingParagraph;const n=t.route.snapshot.paramMap.get("id");t.story=yield(0,Z.z)(t.storyService.getStory(n)),(0,xr.TD)({audio:!0,video:!1}).then((0,m.Z)(function*(){t.story.activeRecording?t.loadRecordings():t.createNewRecording()})).catch(o=>{t.openMicRequestDialog()})})()}loadRecordings(){var t=this;return(0,m.Z)(function*(){t.recordings=yield(0,Z.z)(t.recordingService.getRecordings(t.story._id)),t.recordings.sort((o,f)=>o.date>f.date?-1:1);let n=t.recordings.filter(o=>!1===o.archived);t.setCurrentRecording(n[0])})()}setCurrentRecording(t){this.currentRecording=t,this.loadSynthesis(this.currentRecording.storyData),this.loadAudio(this.currentRecording);let n=this.currentRecording._id,o=document.getElementById(n);o&&(this.lastClickedRecordingId&&document.getElementById(this.lastClickedRecordingId).classList.remove("clickedresultCard"),this.lastClickedRecordingId=n,o.classList.add("clickedresultCard"))}createNewRecording(){var t=this;return(0,m.Z)(function*(){const n=yield(0,Z.z)(t.recordingService.create(new br(t.story)));t.story=yield(0,Z.z)(t.storyService.updateActiveRecording(t.story._id,n._id)),t.loadRecordings()})()}archiveRecording(){var t=this;return(0,m.Z)(function*(){yield(0,Z.z)(t.recordingService.updateArchiveStatus(t.currentRecording._id)),t.createNewRecording()})()}loadSynthesis(t){this.synthesis.synthesiseStory(t).then(([n,o])=>{this.paragraphs=n,this.sentences=o,this.chosenSections=this.paragraphs,this.audioFinishedLoading=!0})}loadAudio(t){var n=this;return(0,m.Z)(function*(){n.audioFinishedLoading=!1,n.paragraphAudioSources=[],n.paragraphTranscriptions=[],n.sentenceAudioSources=[],n.sentenceTranscriptions=[],n.sectionAudioSources=[],n.sectionTranscriptions=[];for(let o=0;o<t.paragraphIndices.length;++o){let f=yield(0,Z.z)(n.recordingService.getAudio(t.paragraphAudioIds[o]));n.paragraphBlobs[o]=f,n.paragraphAudioSources[t.paragraphIndices[o]]=n.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(f)),n.paragraphTranscriptions[t.paragraphIndices[o]]=t.paragraphTranscriptions[t.paragraphIndices[o]]}for(let o=0;o<t.sentenceIndices.length;++o){let f=yield(0,Z.z)(n.recordingService.getAudio(t.sentenceAudioIds[o]));n.sentenceBlobs[o]=f,n.sentenceAudioSources[t.sentenceIndices[o]]=n.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(f)),n.sentenceTranscriptions[t.sentenceIndices[o]]=t.sentenceTranscriptions[t.sentenceIndices[o]]}n.sectionTranscriptions=n.paragraphTranscriptions,n.sectionAudioSources=n.paragraphAudioSources})()}recordAudio(t){this.engagement.addEventForLoggedInUser(T.tw["RECORD-STORY"],this.story),navigator.mediaDevices.getUserMedia({audio:!0}).then(o=>{this.stream=o,this.recorder=new MediaRecorder(this.stream),this.sectionChunks[t]=[],this.recorder.start(),this.isRecordingSection[t]=!0,this.recorder.ondataavailable=f=>{this.sectionChunks[t].push(f.data)}}).catch()}stopRecording(t){this.recorder.stop(),this.isRecordingSection[t]=!1,this.stream.getTracks().forEach(n=>n.stop()),setTimeout(()=>{const n=new Blob(this.sectionChunks[t],{type:"audio/mp3"});this.sectionBlobs[t]=n,this.sectionAudioSources[t]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(n)),this.recordingSaved=!1;const o=new FileReader;o.readAsDataURL(n),o.onloadend=function(){let f=o.result.split(";base64,")[1];this.getTranscription(f,t)}.bind(this)},500)}getTranscription(t,n){this.isTranscribing[n]=!0,this.isParagraphMode()&&(this.paragraphTranscriptions[n]=null),this.isSentenceMode()&&(this.sentenceTranscriptions[n]=null),fetch(this.url_ASR_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({recogniseBlob:t,developer:!0})}).then(f=>f.json()).then(f=>{let C=f.transcriptions[0].utterance;this.isParagraphMode()?(this.paragraphTranscriptions[n]=C,this.sectionTranscriptions[n]=this.paragraphTranscriptions[n]):this.isSentenceMode()&&(this.sentenceTranscriptions[n]=C,this.sectionTranscriptions[n]=this.sentenceTranscriptions[n]),this.isTranscribing[n]=!1})}deleteRecording(t){this.recordingSaved=!1,delete this.sectionAudioSources[t],delete this.sectionChunks[t],delete this.sectionBlobs[t],delete this.sectionTranscriptions[t]}saveRecordings(){var t=this;return(0,m.Z)(function*(){const n=Object.entries(t.paragraphBlobs).map(function(){var q=(0,m.Z)(function*([ue,pe]){return t.recordingService.saveAudio(t.story._id,pe,ue).toPromise()});return function(ue){return q.apply(this,arguments)}}()),o=Object.entries(t.sentenceBlobs).map(function(){var q=(0,m.Z)(function*([ue,pe]){return t.recordingService.saveAudio(t.story._id,pe,ue).toPromise()});return function(ue){return q.apply(this,arguments)}}()),f=yield Promise.all(n),C=yield Promise.all(o);let k=[],I=[];for(const q of f)k.push(q.index),I.push(q.fileId);let R=[],E=[];for(const q of C)R.push(q.index),E.push(q.fileId);const L={paragraphAudioIds:I,paragraphIndices:k,paragraphTranscriptions:t.paragraphTranscriptions,sentenceIndices:R,sentenceAudioIds:E,sentenceTranscriptions:t.sentenceTranscriptions};let Y=yield(0,Z.z)(t.recordingService.update(t.story.activeRecording,L));if(Y){t.recordingSaved=!0;const q=t.recordings.indexOf(t.currentRecording);t.recordings.splice(q,1,Y)}else alert("Error while saving audio")})()}isRecording(t,n){return t instanceof X.cj?this.isRecordingSentence[n]:t instanceof X.nv?this.isRecordingParagraph[n]:void 0}isSentenceMode(){return this.chosenSections[0]instanceof X.cj}isParagraphMode(){return this.chosenSections[0]instanceof X.nv}changeSections(t){this.chosenSections=t,this.paragraphs.concat(this.sentences).forEach(o=>this.stopSection(o)),this.isSentenceMode()?(this.sectionAudioSources=this.sentenceAudioSources,this.sectionBlobs=this.sentenceBlobs,this.sectionChunks=this.sentenceChunks,this.sectionTranscriptions=this.sentenceTranscriptions,this.isRecordingSection=this.isRecordingSentence):this.isParagraphMode()&&(this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.sectionTranscriptions=this.paragraphTranscriptions,this.isRecordingSection=this.isRecordingParagraph)}playSection(t){t.play(),t.highlight()}stopSection(t){t.stop(),t.removeHighlight()}goToDashboard(){this.router.navigateByUrl("student/dashboard")}openMicRequestDialog(){var t=this;this.dialogRef=this.dialog.open(u.p,{data:{title:this.ts.l.microphone_blocked,message:this.ts.l.page_requires_microphone,confirmText:this.ts.l.refresh,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var n=(0,m.Z)(function*(o){t.dialogRef=void 0,console.log(o),o?t.ngOnInit():t.goToDashboard()});return function(o){return n.apply(this,arguments)}}())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.N),e.Y36(g.D),e.Y36(Ue.H7),e.Y36(c.gz),e.Y36(c.F0),e.Y36(G.s),e.Y36(X.cf),e.Y36(O.M),e.Y36(s.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recording"]],decls:8,vars:4,consts:[[1,"content"],["class","recordingBookHeader",4,"ngIf"],["class","archiveButton",3,"click",4,"ngIf"],["autosize","",1,"archiveNavContainer"],["mode","side",1,"sidenav"],["drawer",""],[4,"ngFor","ngForOf"],["class","recordingStoryContainer",4,"ngIf"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"archiveButton",3,"click"],[1,"contentSection",3,"click"],[1,"contentsLink"],[3,"ngStyle"],[1,"contentsDate"],[1,"recordingStoryContainer"],[1,"recordingStoryHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],["class","footer","style","padding-top: 10px",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],["class","recordingBtn",3,"click",4,"ngIf"],["class","notRecordingBtn blink",3,"click",4,"ngIf"],["class","dividerLine",4,"ngIf"],["class","recognisedSpeechContainer",4,"ngIf"],["style","height: 40px",4,"ngIf"],["class","audioContainer",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"recordingBtn",3,"click"],[1,"fas","fa-microphone"],[1,"notRecordingBtn","blink",3,"click"],[1,"fas","fa-stop-circle"],[1,"dividerLine"],[1,"recognisedSpeechContainer"],[1,"dot-flashing"],[2,"height","40px"],[2,"opacity","0.5"],[1,"recognisedSpeech"],[1,"audioContainer"],["controls","","class","audioPlayer",4,"ngIf"],["class","notRecordingBtn trashBtn",3,"click",4,"ngIf"],["controls","",1,"audioPlayer"],["audioTag",""],[1,"notRecordingBtn","trashBtn",3,"click"],[1,"fas","fa-trash-alt"],[1,"footer",2,"padding-top","10px"],[1,"btnContainer"],[1,"footerText"],["class","changeSplitBtn","style","margin-left: auto",3,"click",4,"ngIf"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"],[1,"changeSplitBtn",2,"margin-left","auto",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Sr,10,5,"div",1),e.YNc(2,Tr,4,1,"div",2),e.TgZ(3,"mat-drawer-container",3)(4,"mat-drawer",4,5),e.YNc(6,Ar,9,9,"div",6),e.qZA(),e.YNc(7,zr,7,4,"div",7),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.story),e.xp6(1),e.Q6J("ngIf",n.recordings.length>0),e.xp6(4),e.Q6J("ngForOf",n.recordings),e.xp6(1),e.Q6J("ngIf",n.story))},dependencies:[d.sg,d.O5,d.PC,K.P,dt,lt,Fe.Hw,d.uU,Et],styles:['.content[_ngcontent-%COMP%]{width:90%;margin-left:5%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.archiveNavContainer[_ngcontent-%COMP%]{height:70vh;background-color:#fff}.sidenav[_ngcontent-%COMP%]{padding:20px;width:20vw}.archiveButton[_ngcontent-%COMP%]{display:flex;margin-left:10px;margin-top:20px;font-size:16px}.archiveButton[_ngcontent-%COMP%]:hover, .contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:20px;height:80%}.textContainerSynth[_ngcontent-%COMP%]{box-shadow:0 0 11px 2px #0006;margin-left:5%;width:90%;color:var(--dark-text);background-color:#f8f9fa;text-align:left;overflow:auto;height:100%}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{white-space:nowrap;display:inline;border-style:none;color:var(--dark-text);width:10rem;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.bookTitle[_ngcontent-%COMP%]{overflow:auto;color:var(--dark-text);margin-left:2em;margin-right:2em;display:inline-block;font-size:16pt}.recordingSaveIcon[_ngcontent-%COMP%]{width:10rem;color:var(--dark-text);border-style:none;font-size:11pt;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{white-space:nowrap;color:var(--scealai-light-brown)}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);cursor:pointer;transition:.5s}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:10px;font-weight:700;border-radius:10px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.recordingBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px;float:right}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.recognisedSpeech[_ngcontent-%COMP%]{color:var(--scealai-green);font-style:italic;padding-left:5px}.audioContainer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.audioPlayer[_ngcontent-%COMP%]{width:25%;height:35px}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}.selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}.blink[_ngcontent-%COMP%]{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),i})(),canActivate:[a.P],canDeactivate:[w]}];let Wr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.Bz.forChild(Vr),c.Bz]}),i})();var Kr=r(3869);let Xr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,Wr,me.LD,B.u5,Kr.F,dn,Ct.ot,Fe.Ps,Cn,wt.fi.forRoot({customOptions:[{import:"formats/font",whitelist:["sans-serif","serif","monospace","arial","times-new-roman"]}]})]}),i})()},7230:function(h){h.exports=function(v){var r={};function d(c){if(r[c])return r[c].exports;var a=r[c]={i:c,l:!1,exports:{}};return v[c].call(a.exports,a,a.exports,d),a.l=!0,a.exports}return d.m=v,d.c=r,d.d=function(c,a,u){d.o(c,a)||Object.defineProperty(c,a,{enumerable:!0,get:u})},d.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},d.t=function(c,a){if(1&a&&(c=d(c)),8&a||4&a&&"object"==typeof c&&c&&c.__esModule)return c;var u=Object.create(null);if(d.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:c}),2&a&&"string"!=typeof c)for(var g in c)d.d(u,g,function(e){return c[e]}.bind(null,g));return u},d.n=function(c){var a=c&&c.__esModule?function(){return c.default}:function(){return c};return d.d(a,"a",a),a},d.o=function(c,a){return Object.prototype.hasOwnProperty.call(c,a)},d.p="",d(d.s=90)}({17:function(v,r,d){"use strict";r.__esModule=!0,r.default=void 0;var c=d(18),a=function(){function u(){}return u.getFirstMatch=function(g,e){var s=e.match(g);return s&&s.length>0&&s[1]||""},u.getSecondMatch=function(g,e){var s=e.match(g);return s&&s.length>1&&s[2]||""},u.matchAndReturnConst=function(g,e,s){if(g.test(e))return s},u.getWindowsVersionName=function(g){switch(g){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},u.getMacOSVersionName=function(g){var e=g.split(".").splice(0,2).map(function(s){return parseInt(s,10)||0});if(e.push(0),10===e[0])switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},u.getAndroidVersionName=function(g){var e=g.split(".").splice(0,2).map(function(s){return parseInt(s,10)||0});if(e.push(0),!(1===e[0]&&e[1]<5))return 1===e[0]&&e[1]<6?"Cupcake":1===e[0]&&e[1]>=6?"Donut":2===e[0]&&e[1]<2?"Eclair":2===e[0]&&2===e[1]?"Froyo":2===e[0]&&e[1]>2?"Gingerbread":3===e[0]?"Honeycomb":4===e[0]&&e[1]<1?"Ice Cream Sandwich":4===e[0]&&e[1]<4?"Jelly Bean":4===e[0]&&e[1]>=4?"KitKat":5===e[0]?"Lollipop":6===e[0]?"Marshmallow":7===e[0]?"Nougat":8===e[0]?"Oreo":9===e[0]?"Pie":void 0},u.getVersionPrecision=function(g){return g.split(".").length},u.compareVersions=function(g,e,s){void 0===s&&(s=!1);var l=u.getVersionPrecision(g),w=u.getVersionPrecision(e),_=Math.max(l,w),m=0,x=u.map([g,e],function(b){var y=_-u.getVersionPrecision(b),M=b+new Array(y+1).join(".0");return u.map(M.split("."),function(T){return new Array(20-T.length).join("0")+T}).reverse()});for(s&&(m=_-Math.min(l,w)),_-=1;_>=m;){if(x[0][_]>x[1][_])return 1;if(x[0][_]===x[1][_]){if(_===m)return 0;_-=1}else if(x[0][_]<x[1][_])return-1}},u.map=function(g,e){var s,l=[];if(Array.prototype.map)return Array.prototype.map.call(g,e);for(s=0;s<g.length;s+=1)l.push(e(g[s]));return l},u.find=function(g,e){var s,l;if(Array.prototype.find)return Array.prototype.find.call(g,e);for(s=0,l=g.length;s<l;s+=1){var w=g[s];if(e(w,s))return w}},u.assign=function(g){for(var e,s,l=g,w=arguments.length,_=new Array(w>1?w-1:0),m=1;m<w;m++)_[m-1]=arguments[m];if(Object.assign)return Object.assign.apply(Object,[g].concat(_));var x=function(){var b=_[e];"object"==typeof b&&null!==b&&Object.keys(b).forEach(function(y){l[y]=b[y]})};for(e=0,s=_.length;e<s;e+=1)x();return g},u.getBrowserAlias=function(g){return c.BROWSER_ALIASES_MAP[g]},u.getBrowserTypeByAlias=function(g){return c.BROWSER_MAP[g]||""},u}();r.default=a,v.exports=r.default},18:function(v,r,d){"use strict";r.__esModule=!0,r.ENGINE_MAP=r.OS_MAP=r.PLATFORMS_MAP=r.BROWSER_MAP=r.BROWSER_ALIASES_MAP=void 0,r.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},r.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},r.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},r.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},r.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(v,r,d){"use strict";r.__esModule=!0,r.default=void 0;var c,a=(c=d(91))&&c.__esModule?c:{default:c},u=d(18);function g(s,l){for(var w=0;w<l.length;w++){var _=l[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(s,_.key,_)}}var e=function(){function s(){}var l,_;return s.getParser=function(m,x){if(void 0===x&&(x=!1),"string"!=typeof m)throw new Error("UserAgent should be a string");return new a.default(m,x)},s.parse=function(m){return new a.default(m).getResult()},l=s,_=[{key:"BROWSER_MAP",get:function(){return u.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return u.ENGINE_MAP}},{key:"OS_MAP",get:function(){return u.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return u.PLATFORMS_MAP}}],null&&g(l.prototype,null),_&&g(l,_),s}();r.default=e,v.exports=r.default},91:function(v,r,d){"use strict";r.__esModule=!0,r.default=void 0;var c=s(d(92)),a=s(d(93)),u=s(d(94)),g=s(d(95)),e=s(d(17));function s(w){return w&&w.__esModule?w:{default:w}}var l=function(){function w(m,x){if(void 0===x&&(x=!1),null==m||""===m)throw new Error("UserAgent parameter can't be empty");this._ua=m,this.parsedResult={},!0!==x&&this.parse()}var _=w.prototype;return _.getUA=function(){return this._ua},_.test=function(m){return m.test(this._ua)},_.parseBrowser=function(){var m=this;this.parsedResult.browser={};var x=e.default.find(c.default,function(b){if("function"==typeof b.test)return b.test(m);if(b.test instanceof Array)return b.test.some(function(y){return m.test(y)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.browser=x.describe(this.getUA())),this.parsedResult.browser},_.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},_.getBrowserName=function(m){return m?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},_.getBrowserVersion=function(){return this.getBrowser().version},_.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},_.parseOS=function(){var m=this;this.parsedResult.os={};var x=e.default.find(a.default,function(b){if("function"==typeof b.test)return b.test(m);if(b.test instanceof Array)return b.test.some(function(y){return m.test(y)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.os=x.describe(this.getUA())),this.parsedResult.os},_.getOSName=function(m){var x=this.getOS().name;return m?String(x).toLowerCase()||"":x||""},_.getOSVersion=function(){return this.getOS().version},_.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},_.getPlatformType=function(m){void 0===m&&(m=!1);var x=this.getPlatform().type;return m?String(x).toLowerCase()||"":x||""},_.parsePlatform=function(){var m=this;this.parsedResult.platform={};var x=e.default.find(u.default,function(b){if("function"==typeof b.test)return b.test(m);if(b.test instanceof Array)return b.test.some(function(y){return m.test(y)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.platform=x.describe(this.getUA())),this.parsedResult.platform},_.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},_.getEngineName=function(m){return m?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},_.parseEngine=function(){var m=this;this.parsedResult.engine={};var x=e.default.find(g.default,function(b){if("function"==typeof b.test)return b.test(m);if(b.test instanceof Array)return b.test.some(function(y){return m.test(y)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.engine=x.describe(this.getUA())),this.parsedResult.engine},_.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},_.getResult=function(){return e.default.assign({},this.parsedResult)},_.satisfies=function(m){var x=this,b={},y=0,M={},T=0;if(Object.keys(m).forEach(function(j){var Z=m[j];"string"==typeof Z?(M[j]=Z,T+=1):"object"==typeof Z&&(b[j]=Z,y+=1)}),y>0){var O=Object.keys(b),P=e.default.find(O,function(j){return x.isOS(j)});if(P){var S=this.satisfies(b[P]);if(void 0!==S)return S}var A=e.default.find(O,function(j){return x.isPlatform(j)});if(A){var U=this.satisfies(b[A]);if(void 0!==U)return U}}if(T>0){var G=Object.keys(M),J=e.default.find(G,function(j){return x.isBrowser(j,!0)});if(void 0!==J)return this.compareVersion(M[J])}},_.isBrowser=function(m,x){void 0===x&&(x=!1);var b=this.getBrowserName().toLowerCase(),y=m.toLowerCase(),M=e.default.getBrowserTypeByAlias(y);return x&&M&&(y=M.toLowerCase()),y===b},_.compareVersion=function(m){var x=[0],b=m,y=!1,M=this.getBrowserVersion();if("string"==typeof M)return">"===m[0]||"<"===m[0]?(b=m.substr(1),"="===m[1]?(y=!0,b=m.substr(2)):x=[],x.push(">"===m[0]?1:-1)):"="===m[0]?b=m.substr(1):"~"===m[0]&&(y=!0,b=m.substr(1)),x.indexOf(e.default.compareVersions(M,b,y))>-1},_.isOS=function(m){return this.getOSName(!0)===String(m).toLowerCase()},_.isPlatform=function(m){return this.getPlatformType(!0)===String(m).toLowerCase()},_.isEngine=function(m){return this.getEngineName(!0)===String(m).toLowerCase()},_.is=function(m,x){return void 0===x&&(x=!1),this.isBrowser(m,x)||this.isOS(m)||this.isPlatform(m)},_.some=function(m){var x=this;return void 0===m&&(m=[]),m.some(function(b){return x.is(b)})},w}();r.default=l,v.exports=r.default},92:function(v,r,d){"use strict";r.__esModule=!0,r.default=void 0;var c,a=(c=d(17))&&c.__esModule?c:{default:c},u=/version\/(\d+(\.?_?\d+)+)/i;r.default=[{test:[/googlebot/i],describe:function(e){var s={name:"Googlebot"},l=a.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/opera/i],describe:function(e){var s={name:"Opera"},l=a.default.getFirstMatch(u,e)||a.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/opr\/|opios/i],describe:function(e){var s={name:"Opera"},l=a.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/SamsungBrowser/i],describe:function(e){var s={name:"Samsung Internet for Android"},l=a.default.getFirstMatch(u,e)||a.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/Whale/i],describe:function(e){var s={name:"NAVER Whale Browser"},l=a.default.getFirstMatch(u,e)||a.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/MZBrowser/i],describe:function(e){var s={name:"MZ Browser"},l=a.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/focus/i],describe:function(e){var s={name:"Focus"},l=a.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/swing/i],describe:function(e){var s={name:"Swing"},l=a.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/coast/i],describe:function(e){var s={name:"Opera Coast"},l=a.default.getFirstMatch(u,e)||a.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var s={name:"Opera Touch"},l=a.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/yabrowser/i],describe:function(e){var s={name:"Yandex Browser"},l=a.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/ucbrowser/i],describe:function(e){var s={name:"UC Browser"},l=a.default.getFirstMatch(u,e)||a.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/Maxthon|mxios/i],describe:function(e){var s={name:"Maxthon"},l=a.default.getFirstMatch(u,e)||a.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/epiphany/i],describe:function(e){var s={name:"Epiphany"},l=a.default.getFirstMatch(u,e)||a.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/puffin/i],describe:function(e){var s={name:"Puffin"},l=a.default.getFirstMatch(u,e)||a.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/sleipnir/i],describe:function(e){var s={name:"Sleipnir"},l=a.default.getFirstMatch(u,e)||a.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/k-meleon/i],describe:function(e){var s={name:"K-Meleon"},l=a.default.getFirstMatch(u,e)||a.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/micromessenger/i],describe:function(e){var s={name:"WeChat"},l=a.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/qqbrowser/i],describe:function(e){var s={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},l=a.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/msie|trident/i],describe:function(e){var s={name:"Internet Explorer"},l=a.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/\sedg\//i],describe:function(e){var s={name:"Microsoft Edge"},l=a.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/edg([ea]|ios)/i],describe:function(e){var s={name:"Microsoft Edge"},l=a.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/vivaldi/i],describe:function(e){var s={name:"Vivaldi"},l=a.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/seamonkey/i],describe:function(e){var s={name:"SeaMonkey"},l=a.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/sailfish/i],describe:function(e){var s={name:"Sailfish"},l=a.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return l&&(s.version=l),s}},{test:[/silk/i],describe:function(e){var s={name:"Amazon Silk"},l=a.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/phantom/i],describe:function(e){var s={name:"PhantomJS"},l=a.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/slimerjs/i],describe:function(e){var s={name:"SlimerJS"},l=a.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var s={name:"BlackBerry"},l=a.default.getFirstMatch(u,e)||a.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var s={name:"WebOS Browser"},l=a.default.getFirstMatch(u,e)||a.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/bada/i],describe:function(e){var s={name:"Bada"},l=a.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/tizen/i],describe:function(e){var s={name:"Tizen"},l=a.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/qupzilla/i],describe:function(e){var s={name:"QupZilla"},l=a.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var s={name:"Firefox"},l=a.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/electron/i],describe:function(e){var s={name:"Electron"},l=a.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/MiuiBrowser/i],describe:function(e){var s={name:"Miui"},l=a.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/chromium/i],describe:function(e){var s={name:"Chromium"},l=a.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/chrome|crios|crmo/i],describe:function(e){var s={name:"Chrome"},l=a.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/GSA/i],describe:function(e){var s={name:"Google Search"},l=a.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:function(e){var s=!e.test(/like android/i),l=e.test(/android/i);return s&&l},describe:function(e){var s={name:"Android Browser"},l=a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/playstation 4/i],describe:function(e){var s={name:"PlayStation 4"},l=a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/safari|applewebkit/i],describe:function(e){var s={name:"Safari"},l=a.default.getFirstMatch(u,e);return l&&(s.version=l),s}},{test:[/.*/i],describe:function(e){var s=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:a.default.getFirstMatch(s,e),version:a.default.getSecondMatch(s,e)}}}],v.exports=r.default},93:function(v,r,d){"use strict";r.__esModule=!0,r.default=void 0;var c,a=(c=d(17))&&c.__esModule?c:{default:c},u=d(18);r.default=[{test:[/Roku\/DVP/],describe:function(e){var s=a.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:u.OS_MAP.Roku,version:s}}},{test:[/windows phone/i],describe:function(e){var s=a.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:u.OS_MAP.WindowsPhone,version:s}}},{test:[/windows /i],describe:function(e){var s=a.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),l=a.default.getWindowsVersionName(s);return{name:u.OS_MAP.Windows,version:s,versionName:l}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var s={name:u.OS_MAP.iOS},l=a.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return l&&(s.version=l),s}},{test:[/macintosh/i],describe:function(e){var s=a.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),l=a.default.getMacOSVersionName(s),w={name:u.OS_MAP.MacOS,version:s};return l&&(w.versionName=l),w}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var s=a.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:u.OS_MAP.iOS,version:s}}},{test:function(e){var s=!e.test(/like android/i),l=e.test(/android/i);return s&&l},describe:function(e){var s=a.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),l=a.default.getAndroidVersionName(s),w={name:u.OS_MAP.Android,version:s};return l&&(w.versionName=l),w}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var s=a.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),l={name:u.OS_MAP.WebOS};return s&&s.length&&(l.version=s),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var s=a.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||a.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||a.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:u.OS_MAP.BlackBerry,version:s}}},{test:[/bada/i],describe:function(e){var s=a.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:u.OS_MAP.Bada,version:s}}},{test:[/tizen/i],describe:function(e){var s=a.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:u.OS_MAP.Tizen,version:s}}},{test:[/linux/i],describe:function(){return{name:u.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:u.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var s=a.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:u.OS_MAP.PlayStation4,version:s}}}],v.exports=r.default},94:function(v,r,d){"use strict";r.__esModule=!0,r.default=void 0;var c,a=(c=d(17))&&c.__esModule?c:{default:c},u=d(18);r.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var s=a.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",l={type:u.PLATFORMS_MAP.mobile,vendor:"Huawei"};return s&&(l.model=s),l}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet}}},{test:function(e){var s=e.test(/ipod|iphone/i),l=e.test(/like (ipod|iphone)/i);return s&&!l},describe:function(e){var s=a.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:u.PLATFORMS_MAP.mobile,vendor:"Apple",model:s}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var s=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&s>=3},describe:function(){return{type:u.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.tv}}}],v.exports=r.default},95:function(v,r,d){"use strict";r.__esModule=!0,r.default=void 0;var c,a=(c=d(17))&&c.__esModule?c:{default:c},u=d(18);r.default=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:u.ENGINE_MAP.Blink};var s=a.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:u.ENGINE_MAP.EdgeHTML,version:s}}},{test:[/trident/i],describe:function(e){var s={name:u.ENGINE_MAP.Trident},l=a.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:function(e){return e.test(/presto/i)},describe:function(e){var s={name:u.ENGINE_MAP.Presto},l=a.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:function(e){var s=e.test(/gecko/i),l=e.test(/like gecko/i);return s&&!l},describe:function(e){var s={name:u.ENGINE_MAP.Gecko},l=a.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:u.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var s={name:u.ENGINE_MAP.WebKit},l=a.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return l&&(s.version=l),s}}],v.exports=r.default}})},7244:(h,v,r)=>{var a=r(3436)(r(2119),"DataView");h.exports=a},4994:(h,v,r)=>{var d=r(4312),c=r(6421),a=r(13),u=r(8685),g=r(6676);function e(s){var l=-1,w=null==s?0:s.length;for(this.clear();++l<w;){var _=s[l];this.set(_[0],_[1])}}e.prototype.clear=d,e.prototype.delete=c,e.prototype.get=a,e.prototype.has=u,e.prototype.set=g,h.exports=e},9215:(h,v,r)=>{var d=r(1840),c=r(4378),a=r(4981),u=r(7343),g=r(8895);function e(s){var l=-1,w=null==s?0:s.length;for(this.clear();++l<w;){var _=s[l];this.set(_[0],_[1])}}e.prototype.clear=d,e.prototype.delete=c,e.prototype.get=a,e.prototype.has=u,e.prototype.set=g,h.exports=e},1501:(h,v,r)=>{var a=r(3436)(r(2119),"Map");h.exports=a},9850:(h,v,r)=>{var d=r(638),c=r(1184),a=r(866),u=r(3771),g=r(1772);function e(s){var l=-1,w=null==s?0:s.length;for(this.clear();++l<w;){var _=s[l];this.set(_[0],_[1])}}e.prototype.clear=d,e.prototype.delete=c,e.prototype.get=a,e.prototype.has=u,e.prototype.set=g,h.exports=e},4267:(h,v,r)=>{var a=r(3436)(r(2119),"Promise");h.exports=a},6323:(h,v,r)=>{var a=r(3436)(r(2119),"Set");h.exports=a},2858:(h,v,r)=>{var d=r(9215),c=r(3720),a=r(4410),u=r(5576),g=r(2247),e=r(1585);function s(l){var w=this.__data__=new d(l);this.size=w.size}s.prototype.clear=c,s.prototype.delete=a,s.prototype.get=u,s.prototype.has=g,s.prototype.set=e,h.exports=s},443:(h,v,r)=>{var d=r(2119);h.exports=d.Symbol},3457:(h,v,r)=>{var d=r(2119);h.exports=d.Uint8Array},4243:(h,v,r)=>{var a=r(3436)(r(2119),"WeakMap");h.exports=a},6837:h=>{h.exports=function v(r,d){for(var c=-1,a=null==r?0:r.length;++c<a&&!1!==d(r[c],c,r););return r}},9779:h=>{h.exports=function v(r,d){for(var c=-1,a=null==r?0:r.length,u=0,g=[];++c<a;){var e=r[c];d(e,c,r)&&(g[u++]=e)}return g}},2271:(h,v,r)=>{var d=r(5334),c=r(7151),a=r(1503),u=r(891),g=r(8442),e=r(8159),l=Object.prototype.hasOwnProperty;h.exports=function w(_,m){var x=a(_),b=!x&&c(_),y=!x&&!b&&u(_),M=!x&&!b&&!y&&e(_),T=x||b||y||M,O=T?d(_.length,String):[],P=O.length;for(var S in _)(m||l.call(_,S))&&(!T||!("length"==S||y&&("offset"==S||"parent"==S)||M&&("buffer"==S||"byteLength"==S||"byteOffset"==S)||g(S,P)))&&O.push(S);return O}},5059:h=>{h.exports=function v(r,d){for(var c=-1,a=d.length,u=r.length;++c<a;)r[u+c]=d[c];return r}},9719:(h,v,r)=>{var d=r(5683),c=r(217),u=Object.prototype.hasOwnProperty;h.exports=function g(e,s,l){var w=e[s];(!u.call(e,s)||!c(w,l)||void 0===l&&!(s in e))&&d(e,s,l)}},3503:(h,v,r)=>{var d=r(217);h.exports=function c(a,u){for(var g=a.length;g--;)if(d(a[g][0],u))return g;return-1}},4121:(h,v,r)=>{var d=r(1989),c=r(118);h.exports=function a(u,g){return u&&d(g,c(g),u)}},9287:(h,v,r)=>{var d=r(1989),c=r(6555);h.exports=function a(u,g){return u&&d(g,c(g),u)}},5683:(h,v,r)=>{var d=r(6713);h.exports=function c(a,u,g){"__proto__"==u&&d?d(a,u,{configurable:!0,enumerable:!0,value:g,writable:!0}):a[u]=g}},4462:(h,v,r)=>{var d=r(2858),c=r(6837),a=r(9719),u=r(4121),g=r(9287),e=r(9292),s=r(9454),l=r(4444),w=r(9905),_=r(7597),m=r(6967),x=r(8794),b=r(6782),y=r(7878),M=r(4264),T=r(1503),O=r(891),P=r(3222),S=r(5940),A=r(799),U=r(118),G=r(6555),B="[object Arguments]",Me="[object Function]",Se="[object Object]",N={};N[B]=N["[object Array]"]=N["[object ArrayBuffer]"]=N["[object DataView]"]=N["[object Boolean]"]=N["[object Date]"]=N["[object Float32Array]"]=N["[object Float64Array]"]=N["[object Int8Array]"]=N["[object Int16Array]"]=N["[object Int32Array]"]=N["[object Map]"]=N["[object Number]"]=N[Se]=N["[object RegExp]"]=N["[object Set]"]=N["[object String]"]=N["[object Symbol]"]=N["[object Uint8Array]"]=N["[object Uint8ClampedArray]"]=N["[object Uint16Array]"]=N["[object Uint32Array]"]=!0,N["[object Error]"]=N[Me]=N["[object WeakMap]"]=!1,h.exports=function me(D,se,ae,tt,ve,ne){var z,ye=1&se,be=2&se,nt=4&se;if(ae&&(z=ve?ae(D,tt,ve,ne):ae(D)),void 0!==z)return z;if(!S(D))return D;var ke=T(D);if(ke){if(z=b(D),!ye)return s(D,z)}else{var ce=x(D),Ae=ce==Me||"[object GeneratorFunction]"==ce;if(O(D))return e(D,ye);if(ce==Se||ce==B||Ae&&!ve){if(z=be||Ae?{}:M(D),!ye)return be?w(D,g(z,D)):l(D,u(z,D))}else{if(!N[ce])return ve?D:{};z=y(D,ce,ye)}}ne||(ne=new d);var Oe=ne.get(D);if(Oe)return Oe;ne.set(D,z),A(D)?D.forEach(function(W){z.add(me(W,se,ae,W,D,ne))}):P(D)&&D.forEach(function(W,ie){z.set(ie,me(W,se,ae,ie,D,ne))});var Ie=ke?void 0:(nt?be?m:_:be?G:U)(D);return c(Ie||D,function(W,ie){Ie&&(W=D[ie=W]),a(z,ie,me(W,se,ae,ie,D,ne))}),z}},8858:(h,v,r)=>{var d=r(5940),c=Object.create,a=function(){function u(){}return function(g){if(!d(g))return{};if(c)return c(g);u.prototype=g;var e=new u;return u.prototype=void 0,e}}();h.exports=a},8247:(h,v,r)=>{var d=r(5059),c=r(1503);h.exports=function a(u,g,e){var s=g(u);return c(u)?s:d(s,e(u))}},3337:(h,v,r)=>{var d=r(443),c=r(1318),a=r(2902),e=d?d.toStringTag:void 0;h.exports=function s(l){return null==l?void 0===l?"[object Undefined]":"[object Null]":e&&e in Object(l)?c(l):a(l)}},186:(h,v,r)=>{var d=r(3337),c=r(2671);h.exports=function u(g){return c(g)&&"[object Arguments]"==d(g)}},7021:(h,v,r)=>{var d=r(8794),c=r(2671);h.exports=function u(g){return c(g)&&"[object Map]"==d(g)}},7304:(h,v,r)=>{var d=r(5946),c=r(1943),a=r(5940),u=r(2827),e=/^\[object .+?Constructor\]$/,m=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");h.exports=function x(b){return!(!a(b)||c(b))&&(d(b)?m:e).test(u(b))}},771:(h,v,r)=>{var d=r(8794),c=r(2671);h.exports=function u(g){return c(g)&&"[object Set]"==d(g)}},1083:(h,v,r)=>{var d=r(3337),c=r(6231),a=r(2671),F={};F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Arguments]"]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object Boolean]"]=F["[object DataView]"]=F["[object Date]"]=F["[object Error]"]=F["[object Function]"]=F["[object Map]"]=F["[object Number]"]=F["[object Object]"]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object WeakMap]"]=!1,h.exports=function te(ge){return a(ge)&&c(ge.length)&&!!F[d(ge)]}},1172:(h,v,r)=>{var d=r(5488),c=r(5491),u=Object.prototype.hasOwnProperty;h.exports=function g(e){if(!d(e))return c(e);var s=[];for(var l in Object(e))u.call(e,l)&&"constructor"!=l&&s.push(l);return s}},2809:(h,v,r)=>{var d=r(5940),c=r(5488),a=r(2158),g=Object.prototype.hasOwnProperty;h.exports=function e(s){if(!d(s))return a(s);var l=c(s),w=[];for(var _ in s)"constructor"==_&&(l||!g.call(s,_))||w.push(_);return w}},5334:h=>{h.exports=function v(r,d){for(var c=-1,a=Array(r);++c<r;)a[c]=d(c);return a}},5647:h=>{h.exports=function v(r){return function(d){return r(d)}}},3362:(h,v,r)=>{var d=r(3457);h.exports=function c(a){var u=new a.constructor(a.byteLength);return new d(u).set(new d(a)),u}},9292:(h,v,r)=>{h=r.nmd(h);var d=r(2119),c=v&&!v.nodeType&&v,a=c&&h&&!h.nodeType&&h,g=a&&a.exports===c?d.Buffer:void 0,e=g?g.allocUnsafe:void 0;h.exports=function s(l,w){if(w)return l.slice();var _=l.length,m=e?e(_):new l.constructor(_);return l.copy(m),m}},7e3:(h,v,r)=>{var d=r(3362);h.exports=function c(a,u){var g=u?d(a.buffer):a.buffer;return new a.constructor(g,a.byteOffset,a.byteLength)}},4098:h=>{var v=/\w*$/;h.exports=function r(d){var c=new d.constructor(d.source,v.exec(d));return c.lastIndex=d.lastIndex,c}},2533:(h,v,r)=>{var d=r(443),c=d?d.prototype:void 0,a=c?c.valueOf:void 0;h.exports=function u(g){return a?Object(a.call(g)):{}}},5208:(h,v,r)=>{var d=r(3362);h.exports=function c(a,u){var g=u?d(a.buffer):a.buffer;return new a.constructor(g,a.byteOffset,a.length)}},9454:h=>{h.exports=function v(r,d){var c=-1,a=r.length;for(d||(d=Array(a));++c<a;)d[c]=r[c];return d}},1989:(h,v,r)=>{var d=r(9719),c=r(5683);h.exports=function a(u,g,e,s){var l=!e;e||(e={});for(var w=-1,_=g.length;++w<_;){var m=g[w],x=s?s(e[m],u[m],m,e,u):void 0;void 0===x&&(x=u[m]),l?c(e,m,x):d(e,m,x)}return e}},4444:(h,v,r)=>{var d=r(1989),c=r(9383);h.exports=function a(u,g){return d(u,c(u),g)}},9905:(h,v,r)=>{var d=r(1989),c=r(3051);h.exports=function a(u,g){return d(u,c(u),g)}},4610:(h,v,r)=>{var d=r(2119);h.exports=d["__core-js_shared__"]},6713:(h,v,r)=>{var d=r(3436),c=function(){try{var a=d(Object,"defineProperty");return a({},"",{}),a}catch{}}();h.exports=c},9122:h=>{var v="object"==typeof global&&global&&global.Object===Object&&global;h.exports=v},7597:(h,v,r)=>{var d=r(8247),c=r(9383),a=r(118);h.exports=function u(g){return d(g,a,c)}},6967:(h,v,r)=>{var d=r(8247),c=r(3051),a=r(6555);h.exports=function u(g){return d(g,a,c)}},4537:(h,v,r)=>{var d=r(3819);h.exports=function c(a,u){var g=a.__data__;return d(u)?g["string"==typeof u?"string":"hash"]:g.map}},3436:(h,v,r)=>{var d=r(7304),c=r(1990);h.exports=function a(u,g){var e=c(u,g);return d(e)?e:void 0}},9519:(h,v,r)=>{var c=r(9385)(Object.getPrototypeOf,Object);h.exports=c},1318:(h,v,r)=>{var d=r(443),c=Object.prototype,a=c.hasOwnProperty,u=c.toString,g=d?d.toStringTag:void 0;h.exports=function e(s){var l=a.call(s,g),w=s[g];try{s[g]=void 0;var _=!0}catch{}var m=u.call(s);return _&&(l?s[g]=w:delete s[g]),m}},9383:(h,v,r)=>{var d=r(9779),c=r(9975),u=Object.prototype.propertyIsEnumerable,g=Object.getOwnPropertySymbols;h.exports=g?function(s){return null==s?[]:(s=Object(s),d(g(s),function(l){return u.call(s,l)}))}:c},3051:(h,v,r)=>{var d=r(5059),c=r(9519),a=r(9383),u=r(9975);h.exports=Object.getOwnPropertySymbols?function(s){for(var l=[];s;)d(l,a(s)),s=c(s);return l}:u},8794:(h,v,r)=>{var d=r(7244),c=r(1501),a=r(4267),u=r(6323),g=r(4243),e=r(3337),s=r(2827),l="[object Map]",_="[object Promise]",m="[object Set]",x="[object WeakMap]",b="[object DataView]",y=s(d),M=s(c),T=s(a),O=s(u),P=s(g),S=e;(d&&S(new d(new ArrayBuffer(1)))!=b||c&&S(new c)!=l||a&&S(a.resolve())!=_||u&&S(new u)!=m||g&&S(new g)!=x)&&(S=function(A){var U=e(A),G="[object Object]"==U?A.constructor:void 0,J=G?s(G):"";if(J)switch(J){case y:return b;case M:return l;case T:return _;case O:return m;case P:return x}return U}),h.exports=S},1990:h=>{h.exports=function v(r,d){return r?.[d]}},4312:(h,v,r)=>{var d=r(862);h.exports=function c(){this.__data__=d?d(null):{},this.size=0}},6421:h=>{h.exports=function v(r){var d=this.has(r)&&delete this.__data__[r];return this.size-=d?1:0,d}},13:(h,v,r)=>{var d=r(862),u=Object.prototype.hasOwnProperty;h.exports=function g(e){var s=this.__data__;if(d){var l=s[e];return"__lodash_hash_undefined__"===l?void 0:l}return u.call(s,e)?s[e]:void 0}},8685:(h,v,r)=>{var d=r(862),a=Object.prototype.hasOwnProperty;h.exports=function u(g){var e=this.__data__;return d?void 0!==e[g]:a.call(e,g)}},6676:(h,v,r)=>{var d=r(862);h.exports=function a(u,g){var e=this.__data__;return this.size+=this.has(u)?0:1,e[u]=d&&void 0===g?"__lodash_hash_undefined__":g,this}},6782:h=>{var r=Object.prototype.hasOwnProperty;h.exports=function d(c){var a=c.length,u=new c.constructor(a);return a&&"string"==typeof c[0]&&r.call(c,"index")&&(u.index=c.index,u.input=c.input),u}},7878:(h,v,r)=>{var d=r(3362),c=r(7e3),a=r(4098),u=r(2533),g=r(5208);h.exports=function Z(B,K,F){var te=B.constructor;switch(K){case"[object ArrayBuffer]":return d(B);case"[object Boolean]":case"[object Date]":return new te(+B);case"[object DataView]":return c(B,F);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return g(B,F);case"[object Map]":case"[object Set]":return new te;case"[object Number]":case"[object String]":return new te(B);case"[object RegExp]":return a(B);case"[object Symbol]":return u(B)}}},4264:(h,v,r)=>{var d=r(8858),c=r(9519),a=r(5488);h.exports=function u(g){return"function"!=typeof g.constructor||a(g)?{}:d(c(g))}},8442:h=>{var r=/^(?:0|[1-9]\d*)$/;h.exports=function d(c,a){var u=typeof c;return!!(a=a??9007199254740991)&&("number"==u||"symbol"!=u&&r.test(c))&&c>-1&&c%1==0&&c<a}},3819:h=>{h.exports=function v(r){var d=typeof r;return"string"==d||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==r:null===r}},1943:(h,v,r)=>{var u,d=r(4610),c=(u=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"";h.exports=function a(u){return!!c&&c in u}},5488:h=>{var v=Object.prototype;h.exports=function r(d){var c=d&&d.constructor;return d===("function"==typeof c&&c.prototype||v)}},1840:h=>{h.exports=function v(){this.__data__=[],this.size=0}},4378:(h,v,r)=>{var d=r(3503),a=Array.prototype.splice;h.exports=function u(g){var e=this.__data__,s=d(e,g);return!(s<0||(s==e.length-1?e.pop():a.call(e,s,1),--this.size,0))}},4981:(h,v,r)=>{var d=r(3503);h.exports=function c(a){var u=this.__data__,g=d(u,a);return g<0?void 0:u[g][1]}},7343:(h,v,r)=>{var d=r(3503);h.exports=function c(a){return d(this.__data__,a)>-1}},8895:(h,v,r)=>{var d=r(3503);h.exports=function c(a,u){var g=this.__data__,e=d(g,a);return e<0?(++this.size,g.push([a,u])):g[e][1]=u,this}},638:(h,v,r)=>{var d=r(4994),c=r(9215),a=r(1501);h.exports=function u(){this.size=0,this.__data__={hash:new d,map:new(a||c),string:new d}}},1184:(h,v,r)=>{var d=r(4537);h.exports=function c(a){var u=d(this,a).delete(a);return this.size-=u?1:0,u}},866:(h,v,r)=>{var d=r(4537);h.exports=function c(a){return d(this,a).get(a)}},3771:(h,v,r)=>{var d=r(4537);h.exports=function c(a){return d(this,a).has(a)}},1772:(h,v,r)=>{var d=r(4537);h.exports=function c(a,u){var g=d(this,a),e=g.size;return g.set(a,u),this.size+=g.size==e?0:1,this}},862:(h,v,r)=>{var c=r(3436)(Object,"create");h.exports=c},5491:(h,v,r)=>{var c=r(9385)(Object.keys,Object);h.exports=c},2158:h=>{h.exports=function v(r){var d=[];if(null!=r)for(var c in Object(r))d.push(c);return d}},3597:(h,v,r)=>{h=r.nmd(h);var d=r(9122),c=v&&!v.nodeType&&v,a=c&&h&&!h.nodeType&&h,g=a&&a.exports===c&&d.process,e=function(){try{return a&&a.require&&a.require("util").types||g&&g.binding&&g.binding("util")}catch{}}();h.exports=e},2902:h=>{var r=Object.prototype.toString;h.exports=function d(c){return r.call(c)}},9385:h=>{h.exports=function v(r,d){return function(c){return r(d(c))}}},2119:(h,v,r)=>{var d=r(9122),c="object"==typeof self&&self&&self.Object===Object&&self,a=d||c||Function("return this")();h.exports=a},3720:(h,v,r)=>{var d=r(9215);h.exports=function c(){this.__data__=new d,this.size=0}},4410:h=>{h.exports=function v(r){var d=this.__data__,c=d.delete(r);return this.size=d.size,c}},5576:h=>{h.exports=function v(r){return this.__data__.get(r)}},2247:h=>{h.exports=function v(r){return this.__data__.has(r)}},1585:(h,v,r)=>{var d=r(9215),c=r(1501),a=r(9850);h.exports=function g(e,s){var l=this.__data__;if(l instanceof d){var w=l.__data__;if(!c||w.length<199)return w.push([e,s]),this.size=++l.size,this;l=this.__data__=new a(w)}return l.set(e,s),this.size=l.size,this}},2827:h=>{var r=Function.prototype.toString;h.exports=function d(c){if(null!=c){try{return r.call(c)}catch{}try{return c+""}catch{}}return""}},1094:(h,v,r)=>{var d=r(4462);h.exports=function a(u){return d(u,4)}},217:h=>{h.exports=function v(r,d){return r===d||r!=r&&d!=d}},7151:(h,v,r)=>{var d=r(186),c=r(2671),a=Object.prototype,u=a.hasOwnProperty,g=a.propertyIsEnumerable,e=d(function(){return arguments}())?d:function(s){return c(s)&&u.call(s,"callee")&&!g.call(s,"callee")};h.exports=e},1503:h=>{h.exports=Array.isArray},6507:(h,v,r)=>{var d=r(5946),c=r(6231);h.exports=function a(u){return null!=u&&c(u.length)&&!d(u)}},891:(h,v,r)=>{h=r.nmd(h);var d=r(2119),c=r(3580),a=v&&!v.nodeType&&v,u=a&&h&&!h.nodeType&&h,e=u&&u.exports===a?d.Buffer:void 0;h.exports=(e?e.isBuffer:void 0)||c},5946:(h,v,r)=>{var d=r(3337),c=r(5940);h.exports=function s(l){if(!c(l))return!1;var w=d(l);return"[object Function]"==w||"[object GeneratorFunction]"==w||"[object AsyncFunction]"==w||"[object Proxy]"==w}},6231:h=>{h.exports=function r(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=9007199254740991}},3222:(h,v,r)=>{var d=r(7021),c=r(5647),a=r(3597),u=a&&a.isMap,g=u?c(u):d;h.exports=g},5940:h=>{h.exports=function v(r){var d=typeof r;return null!=r&&("object"==d||"function"==d)}},2671:h=>{h.exports=function v(r){return null!=r&&"object"==typeof r}},799:(h,v,r)=>{var d=r(771),c=r(5647),a=r(3597),u=a&&a.isSet,g=u?c(u):d;h.exports=g},8159:(h,v,r)=>{var d=r(1083),c=r(5647),a=r(3597),u=a&&a.isTypedArray,g=u?c(u):d;h.exports=g},118:(h,v,r)=>{var d=r(2271),c=r(1172),a=r(6507);h.exports=function u(g){return a(g)?d(g):c(g)}},6555:(h,v,r)=>{var d=r(2271),c=r(2809),a=r(6507);h.exports=function u(g){return a(g)?d(g,!0):c(g)}},9975:h=>{h.exports=function v(){return[]}},3580:h=>{h.exports=function v(){return!1}},2754:(h,v,r)=>{"use strict";v.TD=void 0;var c=r(4354);Object.defineProperty(v,"TD",{enumerable:!0,get:function(){return c.requestMediaPermissions}})},4354:function(h,v,r){"use strict";var d=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(v,"__esModule",{value:!0}),v.requestVideoPermissions=v.requestAudioPermissions=v.requestMediaPermissions=v.MediaPermissionsErrorType=void 0;const c=d(r(7230));var a,s;(s=a=v.MediaPermissionsErrorType||(v.MediaPermissionsErrorType={})).SystemPermissionDenied="SystemPermissionDenied",s.UserPermissionDenied="UserPermissionDenied",s.CouldNotStartVideoSource="CouldNotStartVideoSource",s.Generic="Generic",v.requestMediaPermissions=s=>new Promise((l,w)=>{navigator.mediaDevices.getUserMedia(s??{audio:!0,video:!0}).then(_=>{_.getTracks().forEach(m=>{m.stop()}),l(!0)}).catch(_=>{const x=c.default.getParser(window.navigator.userAgent).getBrowserName(),b=_.name,y=_.message;let M=a.Generic;"Chrome"===x?"NotAllowedError"===b?"Permission denied by system"===y?M=a.SystemPermissionDenied:"Permission denied"===y&&(M=a.UserPermissionDenied):"NotReadableError"===b&&(M=a.CouldNotStartVideoSource):"Safari"===x?"NotAllowedError"===b&&(M=a.UserPermissionDenied):"Microsoft Edge"===x?"NotAllowedError"===b?M=a.UserPermissionDenied:"NotReadableError"===b&&(M=a.CouldNotStartVideoSource):"Firefox"===x&&("NotFoundError"===b||"NotReadableError"===b?M=a.SystemPermissionDenied:"NotAllowedError"===b?M=a.UserPermissionDenied:"AbortError"===b&&(M=a.CouldNotStartVideoSource)),w({type:M,name:_.name,message:_.message})})}),v.requestAudioPermissions=()=>(0,v.requestMediaPermissions)({audio:!0,video:!1}),v.requestVideoPermissions=()=>(0,v.requestMediaPermissions)({audio:!1,video:!0})},5439:h=>{window,h.exports=function(v){var r={};function d(c){if(r[c])return r[c].exports;var a=r[c]={i:c,l:!1,exports:{}};return v[c].call(a.exports,a,a.exports,d),a.l=!0,a.exports}return d.m=v,d.c=r,d.d=function(c,a,u){d.o(c,a)||Object.defineProperty(c,a,{enumerable:!0,get:u})},d.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},d.t=function(c,a){if(1&a&&(c=d(c)),8&a||4&a&&"object"==typeof c&&c&&c.__esModule)return c;var u=Object.create(null);if(d.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:c}),2&a&&"string"!=typeof c)for(var g in c)d.d(u,g,function(e){return c[e]}.bind(null,g));return u},d.n=function(c){var a=c&&c.__esModule?function(){return c.default}:function(){return c};return d.d(a,"a",a),a},d.o=function(c,a){return Object.prototype.hasOwnProperty.call(c,a)},d.p="/dist/",d(d.s=1)}([function(v,r,d){"use strict";var c=this&&this.__awaiter||function(u,g,e,s){return new(e||(e=Promise))(function(l,w){function _(b){try{x(s.next(b))}catch(y){w(y)}}function m(b){try{x(s.throw(b))}catch(y){w(y)}}function x(b){var y;b.done?l(b.value):(y=b.value,y instanceof e?y:new e(function(M){M(y)})).then(_,m)}x((s=s.apply(u,g||[])).next())})},a=this&&this.__generator||function(u,g){var e,s,l,w,_={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return w={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function m(x){return function(b){return function(y){if(e)throw new TypeError("Generator is already executing.");for(;w&&(w=0,y[0]&&(_=0)),_;)try{if(e=1,s&&(l=2&y[0]?s.return:y[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,y[1])).done)return l;switch(s=0,l&&(y=[2&y[0],l.value]),y[0]){case 0:case 1:l=y;break;case 4:return _.label++,{value:y[1],done:!1};case 5:_.label++,s=y[1],y=[0];continue;case 7:y=_.ops.pop(),_.trys.pop();continue;default:if(!((l=(l=_.trys).length>0&&l[l.length-1])||6!==y[0]&&2!==y[0])){_=0;continue}if(3===y[0]&&(!l||y[1]>l[0]&&y[1]<l[3])){_.label=y[1];break}if(6===y[0]&&_.label<l[1]){_.label=l[1],l=y;break}if(l&&_.label<l[2]){_.label=l[2],_.ops.push(y);break}l[2]&&_.ops.pop(),_.trys.pop();continue}y=g.call(u,_)}catch(M){y=[6,M],s=0}finally{e=l=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([x,b])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.file2b64=void 0,r.file2b64=function(u){return c(this,void 0,void 0,function(){var g,e;return a(this,function(s){return g=new FileReader,e=new Promise(function(l,w){g.addEventListener("load",function(){var _,m=null===(_=g.result)||void 0===_?void 0:_.toString();m?l(m):w("could not convert file to base64")},!1)}),g.readAsDataURL(u),[2,e]})})}},function(v,r,d){"use strict";var c=this&&this.__awaiter||function(_,m,x,b){return new(x||(x=Promise))(function(y,M){function T(S){try{P(b.next(S))}catch(A){M(A)}}function O(S){try{P(b.throw(S))}catch(A){M(A)}}function P(S){var A;S.done?y(S.value):(A=S.value,A instanceof x?A:new x(function(U){U(A)})).then(T,O)}P((b=b.apply(_,m||[])).next())})},a=this&&this.__generator||function(_,m){var x,b,y,M,T={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return M={next:O(0),throw:O(1),return:O(2)},"function"==typeof Symbol&&(M[Symbol.iterator]=function(){return this}),M;function O(P){return function(S){return function(A){if(x)throw new TypeError("Generator is already executing.");for(;M&&(M=0,A[0]&&(T=0)),T;)try{if(x=1,b&&(y=2&A[0]?b.return:A[0]?b.throw||((y=b.return)&&y.call(b),0):b.next)&&!(y=y.call(b,A[1])).done)return y;switch(b=0,y&&(A=[2&A[0],y.value]),A[0]){case 0:case 1:y=A;break;case 4:return T.label++,{value:A[1],done:!1};case 5:T.label++,b=A[1],A=[0];continue;case 7:A=T.ops.pop(),T.trys.pop();continue;default:if(!((y=(y=T.trys).length>0&&y[y.length-1])||6!==A[0]&&2!==A[0])){T=0;continue}if(3===A[0]&&(!y||A[1]>y[0]&&A[1]<y[3])){T.label=A[1];break}if(6===A[0]&&T.label<y[1]){T.label=y[1],y=A;break}if(y&&T.label<y[2]){T.label=y[2],T.ops.push(A);break}y[2]&&T.ops.pop(),T.trys.pop();continue}A=m.call(_,T)}catch(U){A=[6,U],b=0}finally{x=y=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([P,S])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.imageCompressor=void 0;var u=d(2),g=d(3),e=d(0),s=d(4),l=d(5),w=function(){function _(m,x){var b=this;this.quill=m,this.options=x||{};var y=!!x.debug;this.Logger=new l.ConsoleLogger(y,!!x.suppressErrorLogging),(0,g.warnAboutOptions)(x,this.Logger),this.imageDrop=new u.ImageDrop(m,function(O){return c(b,void 0,void 0,function(){var P;return a(this,function(S){switch(S.label){case 0:return this.Logger.log("onImageDrop",{dataUrl:O}),[4,this.downscaleImageFromUrl(O)];case 1:return P=S.sent(),this.insertToEditor(P,_.b64toBlob(P)),[2]}})})},this.Logger),this.Logger.log("fileChanged",{options:x,quill:m,debug:y});var T=this.quill.getModule("toolbar");T?T.addHandler("image",function(){return b.selectLocalImage()}):this.Logger.error("Quill toolbar module not found! need { toolbar: // options } in Quill.modules for image icon to sit in")}return _.b64toBlob=function(m){for(var x=atob(m.split(",")[1]),b=m.slice(5).split(";")[0],y=new ArrayBuffer(x.length),M=new Uint8Array(y),T=0;T<x.length;T++)M[T]=x.charCodeAt(T);return new Blob([y],{type:b})},_.prototype.selectLocalImage=function(m){var x=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=function(){return x.fileChanged().then(function(){return m&&m()})},document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){x.fileHolder&&document.body.removeChild(x.fileHolder)})},_.prototype.fileChanged=function(m){var x;return c(this,void 0,void 0,function(){var b,y,M,T;return a(this,function(O){switch(O.label){case 0:return(b=m||(null===(x=this.fileHolder)||void 0===x?void 0:x.files))&&b.length?(this.Logger.log("fileChanged",{file:y=b[0]}),y?[4,(0,e.file2b64)(y)]:[2]):[2];case 1:return M=O.sent(),[4,this.downscaleImageFromUrl(M)];case 2:return T=O.sent(),this.insertToEditor(T,_.b64toBlob(T)),[2]}})})},_.prototype.downscaleImageFromUrl=function(m){return c(this,void 0,void 0,function(){var x;return a(this,function(b){switch(b.label){case 0:return[4,(0,s.downscaleImage)(this.Logger,m,this.options.maxWidth,this.options.maxHeight,this.options.imageType,this.options.keepImageTypes,this.options.ignoreImageTypes,this.options.quality)];case 1:return x=b.sent(),this.Logger.log("downscaleImageFromUrl",{dataUrl:m,dataUrlCompressed:x}),[2,x]}})})},_.prototype.insertToEditor=function(m,x){if(this.options.insertIntoEditor)this.options.insertIntoEditor(m,x);else{this.Logger.log("insertToEditor",{url:m}),this.range=this.quill.getSelection();var b=this.range;if(!b)return;this.logFileSize(m),this.quill.insertEmbed(b.index,"image","".concat(m),"user"),b.index++,this.quill.setSelection(b,"api")}},_.prototype.logFileSize=function(m){var x=(Math.round(3*(m.length-22)/4)/1024).toFixed(0);this.Logger.log("estimated img size: "+x+" kb")},_}();r.imageCompressor=w,window.imageCompressor=w,r.default=w},function(v,r,d){"use strict";var c=this&&this.__awaiter||function(w,_,m,x){return new(m||(m=Promise))(function(b,y){function M(P){try{O(x.next(P))}catch(S){y(S)}}function T(P){try{O(x.throw(P))}catch(S){y(S)}}function O(P){var S;P.done?b(P.value):(S=P.value,S instanceof m?S:new m(function(A){A(S)})).then(M,T)}O((x=x.apply(w,_||[])).next())})},a=this&&this.__generator||function(w,_){var m,x,b,y,M={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return y={next:T(0),throw:T(1),return:T(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y;function T(O){return function(P){return function(S){if(m)throw new TypeError("Generator is already executing.");for(;y&&(y=0,S[0]&&(M=0)),M;)try{if(m=1,x&&(b=2&S[0]?x.return:S[0]?x.throw||((b=x.return)&&b.call(x),0):x.next)&&!(b=b.call(x,S[1])).done)return b;switch(x=0,b&&(S=[2&S[0],b.value]),S[0]){case 0:case 1:b=S;break;case 4:return M.label++,{value:S[1],done:!1};case 5:M.label++,x=S[1],S=[0];continue;case 7:S=M.ops.pop(),M.trys.pop();continue;default:if(!((b=(b=M.trys).length>0&&b[b.length-1])||6!==S[0]&&2!==S[0])){M=0;continue}if(3===S[0]&&(!b||S[1]>b[0]&&S[1]<b[3])){M.label=S[1];break}if(6===S[0]&&M.label<b[1]){M.label=b[1],b=S;break}if(b&&M.label<b[2]){M.label=b[2],M.ops.push(S);break}b[2]&&M.ops.pop(),M.trys.pop();continue}S=_.call(w,M)}catch(A){S=[6,A],x=0}finally{m=b=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([O,P])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.ImageDrop=void 0;var u=d(0),g=function(){function w(_,m,x){var b=this;this.quill=_,this.onNewDataUrl=m,this.logger=x,this.quill.root.addEventListener("drop",function(y){return b.handleDrop(y)},!1),this.quill.root.addEventListener("paste",function(y){return b.handlePaste(y)},!1)}return w.prototype.handleDrop=function(_){return c(this,void 0,void 0,function(){var m,x,b,y,M,T,O;return a(this,function(P){switch(P.label){case 0:return _.preventDefault(),document.caretRangeFromPoint&&(m=document.getSelection(),x=document.caretRangeFromPoint(_.clientX,_.clientY),m&&x&&m.setBaseAndExtent(x.startContainer,x.startOffset,x.startContainer,x.startOffset)),[4,s(_)];case 1:return b=P.sent(),y=Array.from(b||[]).filter(function(S){return l(S.type)}),(M=y?.[0])?[4,(0,u.file2b64)(M)]:[3,3];case 2:return O=P.sent(),this.logger.log("handleNewImageFiles",{evt:_,files:b,filesFiltered:y,firstImage:M,base64ImageSrc:O}),this.onNewDataUrl(O),[2];case 3:return[4,e(_)];case 4:return(T=P.sent())?[4,(0,u.file2b64)(T)]:[3,6];case 5:return O=P.sent(),this.logger.log("handleNewImageFiles",{evt:_,blob:T,base64ImageSrc:O}),this.onNewDataUrl(O),[2];case 6:return[2]}})})},w.prototype.handlePaste=function(_){var m,x;return c(this,void 0,void 0,function(){var b,y,M,T;return a(this,function(O){switch(O.label){case 0:return b=Array.from((null===(m=_?.clipboardData)||void 0===m?void 0:m.items)||[]),this.logger.log("handlePaste",{files:b,evt:_}),y=b.filter(function(P){return l(P.type)}),this.logger.log("handlePaste",{images:y,evt:_}),y.length?y.filter(function(P){return"text/html"!==P.type}).length?(_.preventDefault(),(M=null===(x=y.pop())||void 0===x?void 0:x.getAsFile())?[4,(0,u.file2b64)(M)]:[2]):(this.logger.log("handlePaste also detected html"),[2]):[2];case 1:return T=O.sent(),this.logger.log("handleNewImageFiles",{base64ImageSrc:T}),this.onNewDataUrl(T),[2]}})})},w}();function e(w){var _;return c(this,void 0,void 0,function(){var m;return a(this,function(x){switch(x.label){case 0:return(m=null===(_=w.dataTransfer)||void 0===_?void 0:_.getData("URL"))?[4,fetch(m)]:[3,3];case 1:return[4,x.sent().blob()];case 2:return[2,x.sent()];case 3:return[2]}})})}function s(w){var _;return c(this,void 0,void 0,function(){return a(this,function(m){return[2,null===(_=w?.dataTransfer)||void 0===_?void 0:_.files]})})}function l(w){return!!w.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)/i)}r.ImageDrop=g},function(v,r,d){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.warnAboutOptions=void 0,r.warnAboutOptions=function(c,a){c.maxWidth=c.maxWidth||1e3,c.maxHeight=c.maxHeight||1e3,c.maxWidth&&"number"!=typeof c.maxWidth&&(a.warn("[config error] 'maxWidth' is required to be a \"number\" (in pixels), \nreceived: ".concat(c.maxWidth,"\n-> using default 1000")),c.maxWidth=1e3),c.maxHeight&&"number"!=typeof c.maxHeight&&(a.warn("[config error] 'maxHeight' is required to be a \"number\" (in pixels), \nreceived: ".concat(c.maxHeight,"\n-> using default 1000")),c.maxHeight=1e3),c.quality&&"number"!=typeof c.quality&&(a.warn("quill.imageCompressor: [config error] 'quality' is required to be a \"number\", \nreceived: ".concat(c.quality,"\n-> using default 0.7")),c.quality=.7),!c.imageType||"string"==typeof c.imageType&&c.imageType.startsWith("image/")||(a.warn('quill.imageCompressor: [config error] \'imageType\' is required be in the form of "image/png" or "image/jpeg" etc ..., \nreceived: '.concat(c.imageType,"\n-> using default image/jpeg")),c.imageType="image/jpeg"),c.keepImageTypes||(c.keepImageTypes=[]),c.keepImageTypes&&!Array.isArray(c.keepImageTypes)&&(a.warn("quill.imageCompressor: [config error] 'keepImageTypes' is required to be a \"array\", received: ".concat(c.keepImageTypes," -> using default []")),c.keepImageTypes=[]),c.ignoreImageTypes||(c.ignoreImageTypes=[]),c.ignoreImageTypes&&!Array.isArray(c.ignoreImageTypes)&&(a.warn("quill.imageCompressor: [config error] 'ignoreImageTypes' is required to be a \"array\", received: ".concat(c.ignoreImageTypes," -> using default []")),c.ignoreImageTypes=[]),c.insertIntoEditor&&"function"!=typeof c.insertIntoEditor&&(a.warn("quill.imageCompressor: [config error] 'insertIntoEditor' is required to be a \"function\", received: ".concat(c.insertIntoEditor," -> using default undefined")),c.insertIntoEditor=void 0)}},function(v,r,d){"use strict";var c=this&&this.__awaiter||function(u,g,e,s){return new(e||(e=Promise))(function(l,w){function _(b){try{x(s.next(b))}catch(y){w(y)}}function m(b){try{x(s.throw(b))}catch(y){w(y)}}function x(b){var y;b.done?l(b.value):(y=b.value,y instanceof e?y:new e(function(M){M(y)})).then(_,m)}x((s=s.apply(u,g||[])).next())})},a=this&&this.__generator||function(u,g){var e,s,l,w,_={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return w={next:m(0),throw:m(1),return:m(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function m(x){return function(b){return function(y){if(e)throw new TypeError("Generator is already executing.");for(;w&&(w=0,y[0]&&(_=0)),_;)try{if(e=1,s&&(l=2&y[0]?s.return:y[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,y[1])).done)return l;switch(s=0,l&&(y=[2&y[0],l.value]),y[0]){case 0:case 1:l=y;break;case 4:return _.label++,{value:y[1],done:!1};case 5:_.label++,s=y[1],y=[0];continue;case 7:y=_.ops.pop(),_.trys.pop();continue;default:if(!((l=(l=_.trys).length>0&&l[l.length-1])||6!==y[0]&&2!==y[0])){_=0;continue}if(3===y[0]&&(!l||y[1]>l[0]&&y[1]<l[3])){_.label=y[1];break}if(6===y[0]&&_.label<l[1]){_.label=l[1],l=y;break}if(l&&_.label<l[2]){_.label=l[2],_.ops.push(y);break}l[2]&&_.ops.pop(),_.trys.pop();continue}y=g.call(u,_)}catch(M){y=[6,M],s=0}finally{e=l=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([x,b])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.downscaleImage=void 0,r.downscaleImage=function(u,g,e,s,l,w,_,m){return c(this,void 0,void 0,function(){var x,b,y,M,T,O,P,S;return a(this,function(A){switch(A.label){case 0:return x=g.split(";")[0].split(":")[1],l=l||"image/jpeg",m=m||.7,(b=new Image).src=g,[4,new Promise(function(U){b.onload=function(){U()}})];case 1:return A.sent(),y=function(U,G,J,j){if(J&&j&&U<=J&&G<=j)return[U,G];if(J&&U>J){var Z=J,B=Math.floor(G/U*Z);if(j&&B>j){var K=j;return[Math.floor(U/G*K),K]}return[Z,B]}return j&&G>j?(B=j,[Z=Math.floor(U/G*B),B]):[G,U]}(b.width,b.height,e,s),M=y[0],T=y[1],(O=document.createElement("canvas")).width=M,O.height=T,P=O.getContext("2d"),"image/jpeg"===l&&(P.fillStyle="#FFFFFF",P.fillRect(0,0,b.width,b.height)),_?.includes(x)?[2,g]:(w?.includes(x)&&(l=x),P.drawImage(b,0,0,M,T),S=O.toDataURL(l,m),u.log("downscaling image...",{args:{dataUrl:g,maxWidth:e,maxHeight:s,imageType:l,ignoreImageTypes:_,keepImageTypes:w,imageQuality:m},newHeight:T,newWidth:M}),[2,S])}})})}},function(v,r,d){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ConsoleLogger=void 0;var c=function(){function a(u,g){this.debug=u,this.suppressErrorLogging=g}return a.prototype.prefixString=function(){return"</> quill-image-compress: "},Object.defineProperty(a.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"error",{get:function(){return this.suppressErrorLogging?function(){}:console.error.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"warn",{get:function(){return this.suppressErrorLogging?function(){}:console.warn.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),a}();r.ConsoleLogger=c}])}}]);
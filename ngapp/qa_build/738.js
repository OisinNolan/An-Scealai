"use strict";(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[738],{738:(Ie,H,c)=>{c.r(H),c.d(H,{RecordYourselfModule:()=>Re});var h=c(6895),P=c(2687),C=c(1281),K=c(5017),t=c(4650),tt=c(4719),x=c(3238);const et=["button"],nt=["*"],Y=new t.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),j=new t.OlP("MatButtonToggleGroup"),ot={provide:tt.JU,useExisting:(0,t.Gpc)(()=>A),multi:!0};let N=0;class J{constructor(a,e){this.source=a,this.value=e}}let A=(()=>{class o{constructor(e,n){this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+N++,this.valueChange=new t.vpe,this.change=new t.vpe,this.appearance=n&&n.appearance?n.appearance:"standard"}get name(){return this._name}set name(e){this._name=e,this._buttonToggles&&this._buttonToggles.forEach(n=>{n.name=this._name,n._markForCheck()})}get vertical(){return this._vertical}set vertical(e){this._vertical=(0,C.Ig)(e)}get value(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(n=>n.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=(0,C.Ig)(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=(0,C.Ig)(e),this._buttonToggles&&this._buttonToggles.forEach(n=>n._markForCheck())}ngOnInit(){this._selectionModel=new K.Ov(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked))}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_emitChangeEvent(){const e=this.selected,n=Array.isArray(e)?e[e.length-1]:e,i=new J(n,this.value);this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(e,n,i=!1,r=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?n?this._selectionModel.select(e):this._selectionModel.deselect(e):r=!0,r?Promise.resolve().then(()=>this._updateModelValue(i)):this._updateModelValue(i)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(n=>null!=e.value&&n===e.value):e.value===this._rawValue)}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(n=>this._selectValue(n))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>e.checked=!1)}_selectValue(e){const n=this._buttonToggles.find(i=>null!=i.value&&i.value===e);n&&(n.checked=!0,this._selectionModel.select(n))}_updateModelValue(e){e&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO),t.Y36(Y,8))},o.\u0275dir=t.lG2({type:o,selectors:[["mat-button-toggle-group"]],contentQueries:function(e,n,i){if(1&e&&t.Suo(i,B,5),2&e){let r;t.iGM(r=t.CRH())&&(n._buttonToggles=r)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(e,n){2&e&&(t.uIk("aria-disabled",n.disabled),t.ekj("mat-button-toggle-vertical",n.vertical)("mat-button-toggle-group-appearance-standard","standard"===n.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[t._Bn([ot,{provide:j,useExisting:o}])]}),o})();const it=(0,x.Kr)(class{});let B=(()=>{class o extends it{constructor(e,n,i,r,s,d){super(),this._changeDetectorRef=n,this._elementRef=i,this._focusMonitor=r,this._isSingleSelector=!1,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new t.vpe;const l=Number(s);this.tabIndex=l||0===l?l:null,this.buttonToggleGroup=e,this.appearance=d&&d.appearance?d.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){const n=(0,C.Ig)(e);n!==this._checked&&(this._checked=n,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=(0,C.Ig)(e)}ngOnInit(){const e=this.buttonToggleGroup;this._isSingleSelector=e&&!e.multiple,this.id=this.id||"mat-button-toggle-"+N++,this._isSingleSelector&&(this.name=e.name),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this._isSingleSelector||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new J(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(j,8),t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(P.tE),t.$8M("tabindex"),t.Y36(Y,8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["mat-button-toggle"]],viewQuery:function(e,n){if(1&e&&t.Gf(et,5),2&e){let i;t.iGM(i=t.CRH())&&(n._buttonElement=i.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(e,n){1&e&&t.NdJ("focus",function(){return n.focus()}),2&e&&(t.uIk("aria-label",null)("aria-labelledby",null)("id",n.id)("name",null),t.ekj("mat-button-toggle-standalone",!n.buttonToggleGroup)("mat-button-toggle-checked",n.checked)("mat-button-toggle-disabled",n.disabled)("mat-button-toggle-appearance-standard","standard"===n.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[t.qOj],ngContentSelectors:nt,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"button",0,1),t.NdJ("click",function(){return n._onButtonClick()}),t.TgZ(2,"span",2),t.Hsn(3),t.qZA()(),t._UZ(4,"span",3)(5,"span",4)),2&e){const i=t.MAs(1);t.Q6J("id",n.buttonId)("disabled",n.disabled||null),t.uIk("tabindex",n.disabled?-1:n.tabIndex)("aria-pressed",n.checked)("name",n.name||null)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby),t.xp6(5),t.Q6J("matRippleTrigger",i)("matRippleDisabled",n.disableRipple||n.disabled)}},directives:[x.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent;transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .cdk-high-contrast-active .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),o})(),at=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[x.BQ,x.si],x.BQ]}),o})();var R=c(4859),v=c(8184),m=c(4080),V=c(445),b=c(5529),rt=c(8514),st=c(1086),k=c(2198),I=c(2986),ct=c(1059),D=c(3353),p=c(7340),Q=c(9521),dt=c(8746);function lt(o,a){}class z{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const gt={dialogContainer:(0,p.X$)("dialogContainer",[(0,p.SB)("void, exit",(0,p.oB)({opacity:0,transform:"scale(0.7)"})),(0,p.SB)("enter",(0,p.oB)({transform:"none"})),(0,p.eR)("* => enter",(0,p.ru)([(0,p.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,p.oB)({transform:"none",opacity:1})),(0,p.IO)("@*",(0,p.pV)(),{optional:!0})])),(0,p.eR)("* => void, * => exit",(0,p.ru)([(0,p.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,p.oB)({opacity:0})),(0,p.IO)("@*",(0,p.pV)(),{optional:!0})]))])};let pt=(()=>{class o extends m.en{constructor(e,n,i,r,s,d,l,g){super(),this._elementRef=e,this._focusTrapFactory=n,this._changeDetectorRef=i,this._config=s,this._interactivityChecker=d,this._ngZone=l,this._focusMonitor=g,this._animationStateChanged=new t.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=_=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(_)),this._ariaLabelledBy=s.ariaLabelledBy||null,this._document=r}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,D.ht)())}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{e.removeEventListener("blur",i),e.removeEventListener("mousedown",i),e.removeAttribute("tabindex")};e.addEventListener("blur",i),e.addEventListener("mousedown",i)})),e.focus(n)}_focusByCssSelector(e,n){let i=this._elementRef.nativeElement.querySelector(e);i&&this._forceFocus(i,n)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const n=(0,D.ht)(),i=this._elementRef.nativeElement;(!n||n===this._document.body||n===i||i.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=(0,D.ht)();return e===n||e.contains(n)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(P.qV),t.Y36(t.sBO),t.Y36(h.K0,8),t.Y36(z),t.Y36(P.ic),t.Y36(t.R0b),t.Y36(P.tE))},o.\u0275dir=t.lG2({type:o,viewQuery:function(e,n){if(1&e&&t.Gf(m.Pl,7),2&e){let i;t.iGM(i=t.CRH())&&(n._portalOutlet=i.first)}},features:[t.qOj]}),o})(),ht=(()=>{class o extends pt{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:n}){"enter"===e?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}_onAnimationStart({toState:e,totalTime:n}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return o.\u0275fac=function(){let a;return function(n){return(a||(a=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,n){1&e&&t.WFA("@dialogContainer.start",function(r){return n._onAnimationStart(r)})("@dialogContainer.done",function(r){return n._onAnimationDone(r)}),2&e&&(t.Ikx("id",n._id),t.uIk("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),t.d8E("@dialogContainer",n._state))},features:[t.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&t.YNc(0,lt,0,0,"ng-template",0)},directives:[m.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[gt.dialogContainer]}}),o})(),ut=0;class G{constructor(a,e,n="mat-dialog-"+ut++){this._overlayRef=a,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new b.xQ,this._afterClosed=new b.xQ,this._beforeClosed=new b.xQ,this._state=0,e._id=n,e._animationStateChanged.pipe((0,k.h)(i=>"opened"===i.state),(0,I.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe((0,k.h)(i=>"closed"===i.state),(0,I.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),a.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),a.keydownEvents().pipe((0,k.h)(i=>i.keyCode===Q.hY&&!this.disableClose&&!(0,Q.Vb)(i))).subscribe(i=>{i.preventDefault(),Z(this,"keyboard")}),a.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Z(this,"mouse")})}close(a){this._result=a,this._containerInstance._animationStateChanged.pipe((0,k.h)(e=>"closing"===e.state),(0,I.q)(1)).subscribe(e=>{this._beforeClosed.next(a),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(a){let e=this._getPositionStrategy();return a&&(a.left||a.right)?a.left?e.left(a.left):e.right(a.right):e.centerHorizontally(),a&&(a.top||a.bottom)?a.top?e.top(a.top):e.bottom(a.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(a="",e=""){return this._overlayRef.updateSize({width:a,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(a){return this._overlayRef.addPanelClass(a),this}removePanelClass(a){return this._overlayRef.removePanelClass(a),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Z(o,a,e){return void 0!==o._containerInstance&&(o._containerInstance._closeInteractionType=a),o.close(e)}const ft=new t.OlP("MatDialogData"),_t=new t.OlP("mat-dialog-default-options"),q=new t.OlP("mat-dialog-scroll-strategy"),mt={provide:q,deps:[v.aV],useFactory:function xt(o){return()=>o.scrollStrategies.block()}};let bt=(()=>{class o{constructor(e,n,i,r,s,d,l,g,_,S){this._overlay=e,this._injector=n,this._defaultOptions=i,this._parentDialog=r,this._overlayContainer=s,this._dialogRefConstructor=l,this._dialogContainerType=g,this._dialogDataToken=_,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new b.xQ,this._afterOpenedAtThisLevel=new b.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,rt.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,ct.O)(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,n){n=function Ct(o,a){return{...a,...o}}(n,this._defaultOptions||new z),n.id&&this.getDialogById(n.id);const i=this._createOverlay(n),r=this._attachDialogContainer(i,n),s=this._attachDialogContent(e,r,i,n);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(s),s.afterClosed().subscribe(()=>this._removeOpenDialog(s)),this.afterOpened.next(s),r._initializeWithAttachedContent(),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const n=this._getOverlayConfig(e);return this._overlay.create(n)}_getOverlayConfig(e){const n=new v.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachDialogContainer(e,n){const r=t.zs3.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:z,useValue:n}]}),s=new m.C5(this._dialogContainerType,n.viewContainerRef,r,n.componentFactoryResolver);return e.attach(s).instance}_attachDialogContent(e,n,i,r){const s=new this._dialogRefConstructor(i,n,r.id);if(e instanceof t.Rgc)n.attachTemplatePortal(new m.UE(e,null,{$implicit:r.data,dialogRef:s}));else{const d=this._createInjector(r,s,n),l=n.attachComponentPortal(new m.C5(e,r.viewContainerRef,d,r.componentFactoryResolver));s.componentInstance=l.instance}return s.updateSize(r.width,r.height).updatePosition(r.position),s}_createInjector(e,n,i){const r=e&&e.viewContainerRef&&e.viewContainerRef.injector,s=[{provide:this._dialogContainerType,useValue:i},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:n}];return e.direction&&(!r||!r.get(V.Is,null,t.XFs.Optional))&&s.push({provide:V.Is,useValue:{value:e.direction,change:(0,st.of)()}}),t.zs3.create({parent:r||this._injector,providers:s})}_removeOpenDialog(e){const n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,r)=>{i?r.setAttribute("aria-hidden",i):r.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let i=n.length-1;i>-1;i--){let r=n[i];r!==e&&"SCRIPT"!==r.nodeName&&"STYLE"!==r.nodeName&&!r.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return o.\u0275fac=function(e){t.$Z()},o.\u0275dir=t.lG2({type:o}),o})(),F=(()=>{class o extends bt{constructor(e,n,i,r,s,d,l,g){super(e,n,r,d,l,s,G,ht,ft,g)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(v.aV),t.LFG(t.zs3),t.LFG(h.Ye,8),t.LFG(_t,8),t.LFG(q),t.LFG(o,12),t.LFG(v.Xj),t.LFG(dt.Qb,8))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),vt=(()=>{class o{constructor(e,n,i){this.dialogRef=e,this._elementRef=n,this._dialog=i,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=function Ot(o,a){let e=o.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-dialog-container");)e=e.parentElement;return e?a.find(n=>n.id===e.id):null}(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const n=e._matDialogClose||e._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(e){Z(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(G,8),t.Y36(t.SBq),t.Y36(F))},o.\u0275dir=t.lG2({type:o,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(e,n){1&e&&t.NdJ("click",function(r){return n._onButtonClick(r)}),2&e&&t.uIk("aria-label",n.ariaLabel||null)("type",n.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[t.TTD]}),o})(),yt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=t.lG2({type:o,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),o})(),Mt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=t.lG2({type:o,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),o})(),Pt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[F,mt],imports:[[v.U8,m.eL,x.BQ],x.BQ]}),o})();var kt=c(5107),wt=c(1696),f=c(6572),w=c(5861),Tt=c(6210),St=c(5399);class At{constructor(a,e=[],n=[],i=[],r=[]){this.paragraphAudioIds=e,this.paragraphIndices=n,this.sentenceAudioIds=i,this.sentenceIndices=r,this.storyData=a,this.date=new Date,this.archived=!1}}var y=c(7159),T=c(4929),L=c(4642),U=c(5893),$=c(5678),W=c(1481),X=c(8092),Bt=c(8294);function Rt(o,a){1&o&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function It(o,a){if(1&o&&(t.TgZ(0,"div",16),t._uU(1),t._UZ(2,"i",17),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.saved," ")}}function Dt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).saveRecordings()}),t._uU(1),t._UZ(2,"i",19),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.save," ")}}function zt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().goToDashboard()}),t._UZ(2,"i",10),t._uU(3),t.qZA(),t._UZ(4,"div"),t.TgZ(5,"div",11),t._uU(6),t.YNc(7,Rt,2,0,"span",12),t.qZA(),t.TgZ(8,"div",13),t.YNc(9,It,3,1,"div",14),t.YNc(10,Dt,3,1,"div",15),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(3),t.hij(" ",e.ts.l.story,""),t.xp6(3),t.Oqu(null==e.story?null:e.story.title),t.xp6(1),t.Q6J("ngIf",!e.recordingSaved),t.xp6(2),t.Q6J("ngIf",e.recordingSaved),t.xp6(1),t.Q6J("ngIf",!e.recordingSaved)}}function Zt(o,a){if(1&o&&(t.TgZ(0,"div",36)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.synthesising)}}function Ft(o,a){1&o&&(t._UZ(0,"span",47),t.ALo(1,"safeHtml")),2&o&&t.Q6J("innerHTML",t.lcZ(1,1,a.$implicit.outerHTML),t.oJD)}function Lt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw(3).stopSection(i)}),t._UZ(1,"i",49),t.qZA()}}function Ut(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw(3).playSection(i)}),t._UZ(1,"i",50),t.qZA()}}function Et(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index;return t.oxw(3).recordAudio(i)}),t._UZ(1,"i",52),t.qZA()}}function Ht(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index;return t.oxw(3).stopRecording(i)}),t._UZ(1,"i",54),t.qZA()}}function Yt(o,a){if(1&o){const e=t.EpF();t._UZ(0,"hr"),t.TgZ(1,"div",55),t._UZ(2,"audio",56,57),t.TgZ(4,"button",58),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index;return t.oxw(3).deleteRecording(i)}),t._UZ(5,"i",59),t.qZA()()}if(2&o){const e=t.oxw().index,n=t.oxw(3);t.xp6(2),t.uIk("src",n.sectionAudioSources[e],t.LSH)}}function jt(o,a){if(1&o&&(t.TgZ(0,"div",38)(1,"div",39)(2,"div",40),t.YNc(3,Ft,2,3,"span",41),t.ynx(4,42),t.YNc(5,Lt,2,0,"button",43),t.YNc(6,Ut,2,0,"button",43),t.BQk(),t.ynx(7,42),t.YNc(8,Et,2,0,"button",44),t.YNc(9,Ht,2,0,"button",45),t.BQk(),t.qZA(),t.YNc(10,Yt,6,1,"ng-template",46),t.qZA()()),2&o){const e=a.$implicit,n=a.index,i=t.oxw(3);t.xp6(3),t.Q6J("ngForOf",e.spans),t.xp6(1),t.Q6J("ngSwitch",!!e.audio.paused),t.xp6(1),t.Q6J("ngSwitchCase",!1),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngSwitch",!!i.isRecording(e,n)),t.xp6(1),t.Q6J("ngSwitchCase",!1),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngIf",i.sectionAudioSources[n])}}function Nt(o,a){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,jt,11,8,"div",37),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.chosenSections)}}const Jt=function(o){return["/record-yourself","archive",o]};function Vt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",20)(1,"div",21),t._uU(2),t.qZA(),t.TgZ(3,"div",22)(4,"div",23),t.YNc(5,Zt,4,1,"div",24),t.YNc(6,Nt,2,1,"div",12),t.qZA(),t.TgZ(7,"div",25)(8,"mat-button-toggle-group",26),t.NdJ("change",function(i){t.CHM(e);const r=t.oxw();return r.changeSections(r[i.value])}),t.TgZ(9,"div",27),t._uU(10),t.qZA(),t.TgZ(11,"mat-button-toggle",28),t._uU(12),t.qZA(),t.TgZ(13,"mat-button-toggle",29),t._uU(14),t.qZA()(),t.TgZ(15,"mat-button-toggle",30),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.popupVisible=!i.popupVisible}),t._uU(16),t.qZA()(),t.TgZ(17,"div",31)(18,"button",32),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.archive(i.story)}),t._uU(19),t._UZ(20,"i",33),t.qZA(),t.TgZ(21,"button",34),t._uU(22),t._UZ(23,"i",35),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(2),t.hij(" ",e.ts.l.listen_record_compare," "),t.xp6(3),t.Q6J("ngIf",!e.audioFinishedLoading&&!e.recordingsFinishedLoading),t.xp6(1),t.Q6J("ngIf",e.audioFinishedLoading),t.xp6(2),t.Q6J("disabled",!e.audioFinishedLoading),t.xp6(2),t.hij(" ",e.ts.l.listen_by," "),t.xp6(2),t.hij("",e.ts.l.sentence," "),t.xp6(1),t.Q6J("checked",e.audioFinishedLoading),t.xp6(1),t.hij("",e.ts.l.paragraph," "),t.xp6(2),t.hij(" ",e.ts.l.options," "),t.xp6(1),t.Q6J("hidden",!e.popupVisible),t.xp6(2),t.hij(" ",e.ts.l.archive_recording," "),t.xp6(2),t.Q6J("color",e.primary)("routerLink",t.VKq(14,Jt,e.story._id)),t.xp6(1),t.hij(" ",e.ts.l.go_to_archive," ")}}let Qt=(()=>{class o{constructor(e){this.ts=e,this.console=console,this.save=new t.vpe}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T.D))},o.\u0275cmp=t.Xpm({type:o,selectors:[["recording-component-save-story-dialog"]],decls:8,vars:4,consts:[["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close","click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-dialog-content")(1,"h3"),t._uU(2),t.qZA()(),t.TgZ(3,"mat-dialog-actions")(4,"button",0),t._uU(5),t.qZA(),t.TgZ(6,"button",1),t.NdJ("click",function(){return n.save.next(!0)}),t._uU(7),t.qZA()()),2&e&&(t.xp6(2),t.hij(" ",n.ts.l.save_changes_made_to_this_recording," "),t.xp6(3),t.hij(" ",n.ts.l.cancel," "),t.xp6(1),t.Q6J("mat-dialog-close",!0),t.xp6(1),t.hij(" ",n.ts.l.save," "))},directives:[yt,Mt,R.lW,vt],encapsulation:2}),o})(),Gt=(()=>{class o{constructor(e,n,i,r,s,d,l,g,_){this.ts=e,this.dialog=n,this.storyService=i,this.sanitizer=r,this.route=s,this.router=d,this.recordingService=l,this.synthesis=g,this.engagement=_,this.story=new Tt.o,this.paragraphs=[],this.sentences=[],this.isRecordingParagraph=[],this.isRecordingSentence=[],this.isRecordingSection=[],this.paragraphAudioSources=[],this.sentenceAudioSources=[],this.sectionAudioSources=[],this.paragraphBlobs=[],this.sentenceBlobs=[],this.sectionBlobs=[],this.paragraphChunks=[],this.sentenceChunks=[],this.sectionChunks=[],this.modalClass="hidden",this.modalChoice=new b.xQ,this.recordingSaved=!0,this.popupVisible=!1,this.audioFinishedLoading=!1}sentence_paragraph_selection(e){this[e+"Mode"]()}ngOnInit(){this.modalClass="hidden",this.chunks=[],this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.isRecordingSection=this.isRecordingParagraph;const e=this.route.snapshot.paramMap.get("id");this.storyService.getStory(e).subscribe(n=>{this.story=n,this.story.activeRecording?this.recordingService.get(this.story.activeRecording).subscribe(i=>{this.loadSynthesis(i.storyData),this.loadAudio(i)}):this.archive(this.story)})}loadSynthesis(e){this.synthesis.synthesiseStory(e).then(([n,i])=>{this.paragraphs=n,this.sentences=i,this.chosenSections=this.paragraphs,this.audioFinishedLoading=!0})}archive(e){e.activeRecording&&this.recordingService.updateArchiveStatus(e.activeRecording).subscribe();const n=new At(e);this.recordingService.create(n).subscribe(i=>{if(i.recording){const r=i.recording._id;this.storyService.updateActiveRecording(e._id,r).subscribe(s=>{this.story.activeRecording=r,this.paragraphs=[],this.paragraphAudioSources=[],this.paragraphChunks=[],this.sentences=[],this.sentenceAudioSources=[],this.sentenceChunks=[],this.chosenSections=[],this.sectionAudioSources=[],this.sectionChunks=[],this.popupVisible=!1,this.loadSynthesis(e)})}})}loadAudio(e){this.audioFinishedLoading=!1;for(let n=0;n<e.paragraphIndices.length;++n)this.recordingService.getAudio(e.paragraphAudioIds[n]).subscribe(i=>{this.paragraphBlobs[n]=i,this.paragraphAudioSources[e.paragraphIndices[n]]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(i))});for(let n=0;n<e.sentenceIndices.length;++n)this.recordingService.getAudio(e.sentenceAudioIds[n]).subscribe(i=>{this.sentenceBlobs[n]=i,this.sentenceAudioSources[e.sentenceIndices[n]]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(i))})}recordAudio(e){this.engagement.addEventForLoggedInUser(St.tw["RECORD-STORY"],this.story),console.log("Record audio:",e),navigator.mediaDevices.getUserMedia({audio:!0}).then(i=>{this.stream=i,this.recorder=new MediaRecorder(this.stream),this.sectionChunks[e]=[],this.recorder.start(),this.isRecordingSection[e]=!0,this.recorder.ondataavailable=r=>{this.sectionChunks[e].push(r.data)}}).catch()}stopRecording(e){this.recorder.stop(),this.isRecordingSection[e]=!1,this.stream.getTracks().forEach(n=>n.stop()),setTimeout(()=>{const n=new Blob(this.sectionChunks[e],{type:"audio/mp3"});this.sectionBlobs[e]=n,this.sectionAudioSources[e]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(n)),this.recordingSaved=!1},500)}deleteRecording(e){this.recordingSaved=!1,delete this.sectionAudioSources[e],delete this.sectionChunks[e],delete this.sectionBlobs[e]}saveRecordings(){var e=this;return(0,w.Z)(function*(){const n=Object.entries(e.paragraphBlobs).map(function(){var u=(0,w.Z)(function*([O,E]){return e.recordingService.saveAudio(e.story._id,E,O).toPromise()});return function(O){return u.apply(this,arguments)}}()),i=Object.entries(e.sentenceBlobs).map(function(){var u=(0,w.Z)(function*([O,E]){return e.recordingService.saveAudio(e.story._id,E,O).toPromise()});return function(O){return u.apply(this,arguments)}}()),r=yield Promise.all(n),s=yield Promise.all(i);let d=[],l=[];for(const u of r)d.push(u.index),l.push(u.fileId);let g=[],_=[];for(const u of s)g.push(u.index),_.push(u.fileId);e.recordingService.update(e.story.activeRecording,{paragraphAudioIds:l,paragraphIndices:d,sentenceIndices:g,sentenceAudioIds:_}).subscribe(u=>{e.recordingSaved=!0})})()}isRecording(e,n){return e instanceof y.cj?this.isRecordingSentence[n]:e instanceof y.nv?this.isRecordingParagraph[n]:void 0}isSentenceMode(){return this.chosenSections[0]instanceof y.cj}isParagraphMode(){return this.chosenSections[0]instanceof y.nv}changeSections(e){this.chosenSections=e,this.paragraphs.concat(this.sentences).forEach(i=>this.stopSection(i)),this.isSentenceMode()?(this.sectionAudioSources=this.sentenceAudioSources,this.sectionBlobs=this.sentenceBlobs,this.sectionChunks=this.sentenceChunks,this.isRecordingSection=this.isRecordingSentence):this.isParagraphMode()&&(this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.isRecordingSection=this.isRecordingParagraph)}playSection(e){e.play(),e.highlight()}stopSection(e){e.stop(),e.removeHighlight()}showModal(){var e=this;this.dialog.open(Qt).componentInstance.save.subscribe(function(){var i=(0,w.Z)(function*(r){console.log(r),yield e.saveRecordings(),e.modalChoice.next(!0),e.goToDashboard()});return function(r){return i.apply(this,arguments)}}())}hideModal(){this.modalClass="hiddenFade",this.modalChoice.next(!1)}setModalChoice(){this.modalChoice.next(!0)}saveModal(){this.saveRecordings(),this.modalChoice.next(!0)}goToDashboard(){this.router.navigateByUrl("/dashboard/"+this.story._id)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T.D),t.Y36(F),t.Y36(L.N),t.Y36(W.H7),t.Y36(f.gz),t.Y36(f.F0),t.Y36(U.s),t.Y36(y.cf),t.Y36($.M))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-recording"]],decls:13,vars:8,consts:[[1,"page"],[1,"bookContainerSynth"],[1,"modalContent"],[1,"modalText"],["mat-button","",1,"modalBtn",3,"click"],["mat-button","",1,"modalBtn","createBtnGreen",3,"click"],["class","recordingBookHeader",4,"ngIf"],["class","recordingStoryContainer",4,"ngIf"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"recordingStoryContainer"],[1,"recordingStoryHeader"],[1,"textFieldContainer"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[1,"footer","btnContainer"],[3,"disabled","change"],[1,"footerText"],["value","sentences"],["value","paragraphs",3,"checked"],[2,"justify-content","right",3,"click"],[1,"optionsPopupRec",3,"hidden"],["mat-button","","color","lightgreen",3,"click"],[1,"fas","fa-inbox"],["mat-button","",3,"color","routerLink"],[1,"fas","fa-arrow-right"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[1,"cardBody"],[3,"innerHTML",4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","playAudioBtn",3,"click",4,"ngSwitchCase"],["class","recordingBtn",3,"click",4,"ngSwitchCase"],["class","notRecordingBtn blink",3,"click",4,"ngSwitchCase"],[3,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"recordingBtn",3,"click"],[1,"fas","fa-microphone"],[1,"notRecordingBtn","blink",3,"click"],[1,"fas","fa-stop-circle"],[1,"cardFooter"],["controls",""],["audioTag",""],["mat-button","",1,"notRecordingBtn","trashBtn",3,"click"],[1,"fas","fa-trash-alt"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2)(4,"div",3),t._uU(5),t.qZA(),t.TgZ(6,"div")(7,"button",4),t.NdJ("click",function(){return n.hideModal()}),t._uU(8),t.qZA(),t.TgZ(9,"button",5),t.NdJ("click",function(){return n.saveModal()}),t._uU(10),t.qZA()()()(),t.YNc(11,zt,11,5,"div",6),t.YNc(12,Vt,24,16,"div",7),t.qZA()()),2&e&&(t.xp6(2),t.Gre("",n.modalClass," modalContainer"),t.xp6(3),t.Oqu(n.ts.l.save_changes_made_to_this_recording),t.xp6(3),t.hij(" ",n.ts.l.cancel," "),t.xp6(2),t.hij(" ",n.ts.l.save," "),t.xp6(1),t.Q6J("ngIf",n.story),t.xp6(1),t.Q6J("ngIf",n.story))},directives:[R.lW,h.O5,X.P,h.sg,h.RF,h.n9,A,B,f.rH],pipes:[Bt.z],styles:['.mat-button-toggle[_ngcontent-%COMP%]{background-color:#90ee90}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#90ee90;filter:brightness(85%)}.bookContainerSynth[_ngcontent-%COMP%]{background:linear-gradient(45deg,#dca 12%,transparent 0,transparent 88%,#dca 0),linear-gradient(135deg,transparent 37%,#a85 0,#a85 63%,transparent 0),linear-gradient(45deg,transparent 37%,#dca 0,#dca 63%,transparent 0) #753;background-size:25px 25px;z-index:10;border-radius:5px;width:90%;margin:1%;background-size:cover;box-shadow:-1px 5px 32px 10px #0003}.bookContainerSynth[_ngcontent-%COMP%]{width:70%;margin-left:15%;z-index:10;border-radius:5px;background:url(/assets/img/paperBg.jpg) no-repeat center center fixed;background-size:cover;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;box-shadow:-1px 5px 32px 10px #0003}.modalContainer[_ngcontent-%COMP%]{position:absolute;margin-top:0;z-index:100;height:400px;width:100%;border-radius:5px;background-color:#00000080;text-align:center}.modalContent[_ngcontent-%COMP%]{margin-top:80px;width:80%;margin-left:10%;padding:25px;background-color:#fff;border-radius:5px;display:flex;flex-direction:column;align-items:center;box-shadow:-1px 10px 17px #00000080}.modalBtn[_ngcontent-%COMP%]{padding:5px 10px;background-color:#d1d1d1;border:none;border-radius:5px;margin:15px 5px 5px}.modalText[_ngcontent-%COMP%]{font-size:14pt;white-space:normal}.recordingStoryHeader[_ngcontent-%COMP%]{background-color:#70a87f;color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:#261500;width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.recordingSaveIcon[_ngcontent-%COMP%]{color:#261500;border-style:none;font-size:11pt;padding-right:5%;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{color:#b3a995}.optionsPopupRec[_ngcontent-%COMP%]{z-index:10;position:absolute;right:0;margin-top:25px;display:flex;padding:10px 5px 5px;background:url(/assets/img/paperBg.jpg) no-repeat center center fixed;background-size:cover;box-shadow:-1px 5px 32px 10px #0003;border-radius:5px}.optionsPopupRec[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0px;right:60px;width:0;height:0;border:10px solid transparent;border-bottom-color:#f1e9d8;border-top:0;margin-left:-10px;margin-top:-10px}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:#70a87f;padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:#437250;cursor:pointer;transition:.5s}.btnContainer[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;padding-top:5px;padding-bottom:5px;justify-content:space-between}.changeSplitBtn[_ngcontent-%COMP%]{background-color:#70a87f;border-radius:4px;margin-right:5px;font-size:10pt;color:#fff}.cardFooter[_ngcontent-%COMP%]{display:flex}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}@-webkit-keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}.audioPlayer[_ngcontent-%COMP%]{width:100%;height:35px}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.modalContainer[_ngcontent-%COMP%]{width:620px;height:510px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.modalContainer[_ngcontent-%COMP%]{width:800px;height:600px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.modalContainer[_ngcontent-%COMP%]{width:980px;height:730px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:#0088ff6b;position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.bookContentsContainer[_ngcontent-%COMP%]{width:80%;margin-left:10%;z-index:10}.bookTitle[_ngcontent-%COMP%]{color:#261500;padding-right:30px;display:inline-block;font-size:18pt}.contentsContainer[_ngcontent-%COMP%]{padding-left:3%;padding-right:3%;height:390px;width:80%;margin-left:10%;background:url(/assets/img/paperBg.jpg) no-repeat center center fixed;background-size:cover;box-shadow:-1px 5px 32px 10px #0003;border-radius:5px}.contentsLinkContainer[_ngcontent-%COMP%]{height:300px;overflow:auto;padding:10px;box-shadow:inset 0 0 12px #00000080;border-radius:5px}.contentsTitleContainer[_ngcontent-%COMP%]{width:100%;padding:5px;display:flex;justify-content:space-between}.contentsLink[_ngcontent-%COMP%]{color:#261500;text-align:left;width:50%}.contentsDate[_ngcontent-%COMP%]{color:#261500}.contentSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.contentsDateTitle[_ngcontent-%COMP%]{font-size:14pt;color:#c15a2e}.contentsLinkTitle[_ngcontent-%COMP%]{float:left;margin-left:1%;font-size:14pt;color:#c15a2e}.contentsBtnsContainer[_ngcontent-%COMP%]{margin-top:10px}.newStoryBtn[_ngcontent-%COMP%]{background-color:#e5bd3b;border-style:none;color:#fff;font-size:12pt;margin:0;float:right;border-radius:5px}.newStoryBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b;color:#fff}.messagesBtn[_ngcontent-%COMP%]{background-color:#e5bd3b;border-style:none;color:#fff;font-size:12pt;margin:0;float:center;border-radius:5px;display:inline-flex}.messagesBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b;color:#fff}.notificationBtn[_ngcontent-%COMP%]{margin-left:5px;background-color:#bd2323;color:#fff;font-size:8pt;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;box-shadow:inset 0 -9px 9px -14px #000000bf}.optionsBtn[_ngcontent-%COMP%]{font-size:14pt;background-color:#e5bd3b;border-style:none;color:#fff;font-size:12pt;margin:0;float:left;border-radius:5px}.optionsBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b;color:#fff}.optionsPopup[_ngcontent-%COMP%]{z-index:10;position:fixed;margin-top:10px;margin-left:5%;display:flex;align-items:center;padding:4px 0 4px 4px;background:url(/assets/img/paperBg.jpg) no-repeat center center fixed;background-size:cover;box-shadow:-1px 5px 32px 10px #0003;border-radius:5px}.optionsPopup[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0px;left:60px;width:0;height:0;border:10px solid transparent;border-bottom-color:#f1e9d8;border-top:0;margin-left:-10px;margin-top:-10px}.deleteBtn[_ngcontent-%COMP%]{background-color:#e5bd3b;border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:2px 7px 7px;height:38px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b}.deleteModeBtn[_ngcontent-%COMP%]{background-color:#dd000e}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:#b7000a}.trashImg[_ngcontent-%COMP%]{width:24px}.optionsPopupBtn[_ngcontent-%COMP%]{height:38px;margin-right:4px}.deleteCheckbox[_ngcontent-%COMP%]{float:left;margin-right:5px;margin-top:5px}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContentsContainer[_ngcontent-%COMP%]{width:95%;padding-top:10px;margin-left:2.5%;z-index:10}.contentsContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%}.contentsLinkContainer[_ngcontent-%COMP%]{height:270px;padding-top:10px}.contentsLinkTitle[_ngcontent-%COMP%], .contentsDateTitle[_ngcontent-%COMP%]{font-size:12pt}.optionsPopupBtn[_ngcontent-%COMP%]{padding:2px 5px 5px;margin:0 4px 0 0;height:30px;font-size:12pt}.deleteBtn[_ngcontent-%COMP%]{background-color:#e5bd3b;border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:0 3px 3px;height:30px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b}.deleteModeBtn[_ngcontent-%COMP%]{background-color:#dd000e}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:#b7000a}.trashImg[_ngcontent-%COMP%]{width:20px}}.newStoryMessage[_ngcontent-%COMP%]{color:#a79d88;width:80%;margin-left:10%;margin-top:30px}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContentsContainer[_ngcontent-%COMP%]{width:560px;position:fixed;left:50%;margin-left:-280px;padding-top:40px}.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}@media only screen and (min-width: 1400px) and (min-height: 800px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px;margin-top:100px}.bookContentsContainer[_ngcontent-%COMP%]{width:560px;position:fixed;left:50%;margin-left:-280px;padding-top:40px;margin-top:100px}.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}.page[_ngcontent-%COMP%]{padding-top:20px}.bookImg[_ngcontent-%COMP%]{z-index:-10;width:90%;height:500px;position:fixed;right:5%}.hidden[_ngcontent-%COMP%]{visibility:hidden;opacity:0}.hiddenFade[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility .3s,opacity .3s ease-in}.visible[_ngcontent-%COMP%]{visibility:visible;opacity:1}.visibleFade[_ngcontent-%COMP%]{visibility:visible;opacity:1;transition:visibility .3s,opacity .3s ease-out}.modalContainer[_ngcontent-%COMP%]{position:absolute;margin-top:-10px;z-index:100;height:520px;width:100%;border-radius:5px;background-color:#00000080;text-align:center}.bookTitle[_ngcontent-%COMP%]{color:#261500;padding-right:10%;padding-top:3px;display:inline-block;font-size:16pt}.bookTitleHistory[_ngcontent-%COMP%]{color:#261500;padding-right:37%;padding-top:3px;display:inline-block;font-size:16pt}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;float:left;border-style:none;color:#261500;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:#c15a2e;cursor:pointer;transition:color .5s}.chatbotBtn[_ngcontent-%COMP%]{display:inline;float:right;color:#261500;border-style:none;font-size:12pt;padding-top:10px;padding-right:5%}.chatbotBtn[_ngcontent-%COMP%]:hover{color:#c15a2e}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.textContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%;height:290px;color:#261500;background-color:#f7f2e7;border:1px solid #261500a2;text-align:left;padding-left:8px;padding-right:8px;padding-top:4px;overflow:auto}.historyTextContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%;height:360px;color:#261500;background-color:#f7f2e7;border:1px solid #261500a2;text-align:left;padding-left:8px;padding-right:8px;padding-top:4px;overflow:auto}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:10px}.audioPlayer[_ngcontent-%COMP%]{height:15px}.playAudioBtn[_ngcontent-%COMP%]{background-color:#70a87f;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:#437250;transition:.5s}.loaderContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:50px;color:#437250}.footer[_ngcontent-%COMP%]{margin-left:5%;width:90%;display:flex}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{background-color:#70a87f;border-radius:4px;margin-right:5px;color:#fff}.changeSplitBtn[_ngcontent-%COMP%]:hover{background-color:#437250}.sentenceContainer[_ngcontent-%COMP%]{margin-bottom:10px}.selectedBtn[_ngcontent-%COMP%]{background-color:#437250}.historyToolbar[_ngcontent-%COMP%]{background-color:#70a87f;color:#fff;display:flex;width:90%;margin-left:5%;padding:5px}.selectStoryFilter[_ngcontent-%COMP%]{font-size:10pt;margin-left:5px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.recordingBtn[_ngcontent-%COMP%]{background-color:#70a87f;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:#437250;transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.blink[_ngcontent-%COMP%]{-webkit-animation:blinker 2s linear infinite;animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContentsContainer[_ngcontent-%COMP%]{width:100%;padding-top:10px;z-index:10}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .spanText{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .spanText:before{content:"";height:22px;width:0%;background:#0088ff6b;position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .spanTextHighlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .spanTextNoHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:#0088ff36;cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:#0088ff36;cursor:pointer}']}),o})();var qt=c(7826),$t=c(4206),Wt=c(5188),Xt=c(4337),Kt=c(1188);function te(o,a){if(1&o&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.date,"M/d/yy, h:mm"))}}function ee(o,a){if(1&o&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.date,"d/M/yy, h:mm"))}}const ne=function(o){return["/record-yourself","view",o]};function oe(o,a){if(1&o&&(t.TgZ(0,"div")(1,"div",9)(2,"a",10),t._uU(3),t.qZA(),t.YNc(4,te,3,4,"div",11),t.YNc(5,ee,3,4,"div",11),t.qZA(),t._UZ(6,"hr"),t.qZA()),2&o){const e=a.$implicit,n=t.oxw();t.xp6(2),t.Q6J("routerLink",t.VKq(4,ne,e._id)),t.xp6(1),t.Oqu(e.storyData.title),t.xp6(1),t.Q6J("ngIf",n.isFromAmerica),t.xp6(1),t.Q6J("ngIf",!n.isFromAmerica)}}let ie=(()=>{class o{constructor(e,n,i,r,s,d,l,g,_,S,u){this.ts=e,this.storyService=n,this.auth=i,this.engagement=r,this.router=s,this.messageService=d,this.profileService=l,this.classroomService=g,this.ns=_,this.route=S,this.recordingService=u,this.recordings=[],this.storyId="",this.userId="",this.isFromAmerica=!1}ngOnInit(){this.getStoryId().then(e=>{this.storyId=e.id,this.recordingService.getHistory(this.storyId).subscribe(n=>{this.recordings=n,this.recordings.sort((i,r)=>i.date>r.date?-1:1)})}),this.profileService.getForUser(this.userId).subscribe(e=>{let i=e.profile.country;this.isFromAmerica="United States of America"==i||"America"==i||"USA"==i||"United States"==i})}getStoryId(){return new Promise((e,n)=>{this.route.params.subscribe(i=>{e(i)})})}goToDashboard(){this.router.navigateByUrl("/dashboard/"+this.storyId)}viewRecording(e){this.router.navigateByUrl("/record-yourself/view/"+e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T.D),t.Y36(L.N),t.Y36(Kt.$),t.Y36($.M),t.Y36(f.F0),t.Y36($t.e),t.Y36(Xt.H),t.Y36(qt.u),t.Y36(Wt.g),t.Y36(f.gz),t.Y36(U.s))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-recording-history"]],hostAttrs:[1,"bookContentsContainer"],decls:13,vars:5,consts:[[1,"contentsContainer"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[1,"contentsTitleContainer"],[1,"contentsLinkTitle"],[1,"contentsDateTitle"],[1,"contentsLinkContainer"],[4,"ngFor","ngForOf"],[1,"contentSection"],[1,"contentsLink",3,"routerLink"],["class","contentsDate",4,"ngIf"],[1,"contentsDate"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.goToDashboard()}),t._UZ(2,"i",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t._uU(5),t.qZA(),t.TgZ(6,"div",4)(7,"div",5),t._uU(8),t.qZA(),t.TgZ(9,"div",6),t._uU(10),t.qZA()(),t.TgZ(11,"div",7),t.YNc(12,oe,7,6,"div",8),t.qZA()()),2&e&&(t.xp6(3),t.hij(" ",n.ts.l.back,""),t.xp6(2),t.Oqu(n.ts.l.recordings_archive),t.xp6(3),t.Oqu(n.ts.l.recording),t.xp6(2),t.Oqu(n.ts.l.date),t.xp6(2),t.Q6J("ngForOf",n.recordings))},directives:[h.sg,f.yS,h.O5],pipes:[h.uU],styles:['.mat-button-toggle[_ngcontent-%COMP%]{background-color:#90ee90}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#90ee90;filter:brightness(85%)}.bookContainerSynth[_ngcontent-%COMP%]{background:linear-gradient(45deg,#dca 12%,transparent 0,transparent 88%,#dca 0),linear-gradient(135deg,transparent 37%,#a85 0,#a85 63%,transparent 0),linear-gradient(45deg,transparent 37%,#dca 0,#dca 63%,transparent 0) #753;background-size:25px 25px;z-index:10;border-radius:5px;width:90%;margin:1%;background-size:cover;box-shadow:-1px 5px 32px 10px #0003}.bookContainerSynth[_ngcontent-%COMP%]{width:70%;margin-left:15%;z-index:10;border-radius:5px;background:url(/assets/img/paperBg.jpg) no-repeat center center fixed;background-size:cover;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;box-shadow:-1px 5px 32px 10px #0003}.modalContainer[_ngcontent-%COMP%]{position:absolute;margin-top:0;z-index:100;height:400px;width:100%;border-radius:5px;background-color:#00000080;text-align:center}.modalContent[_ngcontent-%COMP%]{margin-top:80px;width:80%;margin-left:10%;padding:25px;background-color:#fff;border-radius:5px;display:flex;flex-direction:column;align-items:center;box-shadow:-1px 10px 17px #00000080}.modalBtn[_ngcontent-%COMP%]{padding:5px 10px;background-color:#d1d1d1;border:none;border-radius:5px;margin:15px 5px 5px}.modalText[_ngcontent-%COMP%]{font-size:14pt;white-space:normal}.recordingStoryHeader[_ngcontent-%COMP%]{background-color:#70a87f;color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:#261500;width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.recordingSaveIcon[_ngcontent-%COMP%]{color:#261500;border-style:none;font-size:11pt;padding-right:5%;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{color:#b3a995}.optionsPopupRec[_ngcontent-%COMP%]{z-index:10;position:absolute;right:0;margin-top:25px;display:flex;padding:10px 5px 5px;background:url(/assets/img/paperBg.jpg) no-repeat center center fixed;background-size:cover;box-shadow:-1px 5px 32px 10px #0003;border-radius:5px}.optionsPopupRec[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0px;right:60px;width:0;height:0;border:10px solid transparent;border-bottom-color:#f1e9d8;border-top:0;margin-left:-10px;margin-top:-10px}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:#70a87f;padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:#437250;cursor:pointer;transition:.5s}.btnContainer[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;padding-top:5px;padding-bottom:5px;justify-content:space-between}.changeSplitBtn[_ngcontent-%COMP%]{background-color:#70a87f;border-radius:4px;margin-right:5px;font-size:10pt;color:#fff}.cardFooter[_ngcontent-%COMP%]{display:flex}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}@-webkit-keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}.audioPlayer[_ngcontent-%COMP%]{width:100%;height:35px}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.modalContainer[_ngcontent-%COMP%]{width:620px;height:510px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.modalContainer[_ngcontent-%COMP%]{width:800px;height:600px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.modalContainer[_ngcontent-%COMP%]{width:980px;height:730px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:#0088ff6b;position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.bookContentsContainer[_ngcontent-%COMP%]{width:80%;margin-left:10%;z-index:10}.bookTitle[_ngcontent-%COMP%]{color:#261500;padding-right:30px;display:inline-block;font-size:18pt}.contentsContainer[_ngcontent-%COMP%]{padding-left:3%;padding-right:3%;height:390px;width:80%;margin-left:10%;background:url(/assets/img/paperBg.jpg) no-repeat center center fixed;background-size:cover;box-shadow:-1px 5px 32px 10px #0003;border-radius:5px}.contentsLinkContainer[_ngcontent-%COMP%]{height:300px;overflow:auto;padding:10px;box-shadow:inset 0 0 12px #00000080;border-radius:5px}.contentsTitleContainer[_ngcontent-%COMP%]{width:100%;padding:5px;display:flex;justify-content:space-between}.contentsLink[_ngcontent-%COMP%]{color:#261500;text-align:left;width:50%}.contentsDate[_ngcontent-%COMP%]{color:#261500}.contentSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.contentsDateTitle[_ngcontent-%COMP%]{font-size:14pt;color:#c15a2e}.contentsLinkTitle[_ngcontent-%COMP%]{float:left;margin-left:1%;font-size:14pt;color:#c15a2e}.contentsBtnsContainer[_ngcontent-%COMP%]{margin-top:10px}.newStoryBtn[_ngcontent-%COMP%]{background-color:#e5bd3b;border-style:none;color:#fff;font-size:12pt;margin:0;float:right;border-radius:5px}.newStoryBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b;color:#fff}.messagesBtn[_ngcontent-%COMP%]{background-color:#e5bd3b;border-style:none;color:#fff;font-size:12pt;margin:0;float:center;border-radius:5px;display:inline-flex}.messagesBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b;color:#fff}.notificationBtn[_ngcontent-%COMP%]{margin-left:5px;background-color:#bd2323;color:#fff;font-size:8pt;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;box-shadow:inset 0 -9px 9px -14px #000000bf}.optionsBtn[_ngcontent-%COMP%]{font-size:14pt;background-color:#e5bd3b;border-style:none;color:#fff;font-size:12pt;margin:0;float:left;border-radius:5px}.optionsBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b;color:#fff}.optionsPopup[_ngcontent-%COMP%]{z-index:10;position:fixed;margin-top:10px;margin-left:5%;display:flex;align-items:center;padding:4px 0 4px 4px;background:url(/assets/img/paperBg.jpg) no-repeat center center fixed;background-size:cover;box-shadow:-1px 5px 32px 10px #0003;border-radius:5px}.optionsPopup[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0px;left:60px;width:0;height:0;border:10px solid transparent;border-bottom-color:#f1e9d8;border-top:0;margin-left:-10px;margin-top:-10px}.deleteBtn[_ngcontent-%COMP%]{background-color:#e5bd3b;border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:2px 7px 7px;height:38px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b}.deleteModeBtn[_ngcontent-%COMP%]{background-color:#dd000e}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:#b7000a}.trashImg[_ngcontent-%COMP%]{width:24px}.optionsPopupBtn[_ngcontent-%COMP%]{height:38px;margin-right:4px}.deleteCheckbox[_ngcontent-%COMP%]{float:left;margin-right:5px;margin-top:5px}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContentsContainer[_ngcontent-%COMP%]{width:95%;padding-top:10px;margin-left:2.5%;z-index:10}.contentsContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%}.contentsLinkContainer[_ngcontent-%COMP%]{height:270px;padding-top:10px}.contentsLinkTitle[_ngcontent-%COMP%], .contentsDateTitle[_ngcontent-%COMP%]{font-size:12pt}.optionsPopupBtn[_ngcontent-%COMP%]{padding:2px 5px 5px;margin:0 4px 0 0;height:30px;font-size:12pt}.deleteBtn[_ngcontent-%COMP%]{background-color:#e5bd3b;border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:0 3px 3px;height:30px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b}.deleteModeBtn[_ngcontent-%COMP%]{background-color:#dd000e}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:#b7000a}.trashImg[_ngcontent-%COMP%]{width:20px}}.newStoryMessage[_ngcontent-%COMP%]{color:#a79d88;width:80%;margin-left:10%;margin-top:30px}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContentsContainer[_ngcontent-%COMP%]{width:560px;position:fixed;left:50%;margin-left:-280px;padding-top:40px}.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}@media only screen and (min-width: 1400px) and (min-height: 800px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px;margin-top:100px}.bookContentsContainer[_ngcontent-%COMP%]{width:560px;position:fixed;left:50%;margin-left:-280px;padding-top:40px;margin-top:100px}.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}.page[_ngcontent-%COMP%]{padding-top:20px}.bookImg[_ngcontent-%COMP%]{z-index:-10;width:90%;height:500px;position:fixed;right:5%}.hidden[_ngcontent-%COMP%]{visibility:hidden;opacity:0}.hiddenFade[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility .3s,opacity .3s ease-in}.visible[_ngcontent-%COMP%]{visibility:visible;opacity:1}.visibleFade[_ngcontent-%COMP%]{visibility:visible;opacity:1;transition:visibility .3s,opacity .3s ease-out}.modalContainer[_ngcontent-%COMP%]{position:absolute;margin-top:-10px;z-index:100;height:520px;width:100%;border-radius:5px;background-color:#00000080;text-align:center}.bookTitle[_ngcontent-%COMP%]{color:#261500;padding-right:10%;padding-top:3px;display:inline-block;font-size:16pt}.bookTitleHistory[_ngcontent-%COMP%]{color:#261500;padding-right:37%;padding-top:3px;display:inline-block;font-size:16pt}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;float:left;border-style:none;color:#261500;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:#c15a2e;cursor:pointer;transition:color .5s}.chatbotBtn[_ngcontent-%COMP%]{display:inline;float:right;color:#261500;border-style:none;font-size:12pt;padding-top:10px;padding-right:5%}.chatbotBtn[_ngcontent-%COMP%]:hover{color:#c15a2e}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.textContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%;height:290px;color:#261500;background-color:#f7f2e7;border:1px solid #261500a2;text-align:left;padding-left:8px;padding-right:8px;padding-top:4px;overflow:auto}.historyTextContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%;height:360px;color:#261500;background-color:#f7f2e7;border:1px solid #261500a2;text-align:left;padding-left:8px;padding-right:8px;padding-top:4px;overflow:auto}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:10px}.audioPlayer[_ngcontent-%COMP%]{height:15px}.playAudioBtn[_ngcontent-%COMP%]{background-color:#70a87f;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:#437250;transition:.5s}.loaderContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:50px;color:#437250}.footer[_ngcontent-%COMP%]{margin-left:5%;width:90%;display:flex}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{background-color:#70a87f;border-radius:4px;margin-right:5px;color:#fff}.changeSplitBtn[_ngcontent-%COMP%]:hover{background-color:#437250}.sentenceContainer[_ngcontent-%COMP%]{margin-bottom:10px}.selectedBtn[_ngcontent-%COMP%]{background-color:#437250}.historyToolbar[_ngcontent-%COMP%]{background-color:#70a87f;color:#fff;display:flex;width:90%;margin-left:5%;padding:5px}.selectStoryFilter[_ngcontent-%COMP%]{font-size:10pt;margin-left:5px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.recordingBtn[_ngcontent-%COMP%]{background-color:#70a87f;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:#437250;transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.blink[_ngcontent-%COMP%]{-webkit-animation:blinker 2s linear infinite;animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContentsContainer[_ngcontent-%COMP%]{width:100%;padding-top:10px;z-index:10}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .spanText{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .spanText:before{content:"";height:22px;width:0%;background:#0088ff6b;position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .spanTextHighlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .spanTextNoHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:#0088ff36;cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:#0088ff36;cursor:pointer}']}),o})();function ae(o,a){if(1&o&&(t.TgZ(0,"div",17),t._uU(1),t._UZ(2,"i",18),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.ts.l.saved," ")}}function re(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",19),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).saveRecordings()}),t._uU(1),t._UZ(2,"i",20),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.ts.l.save," ")}}function se(o,a){if(1&o&&(t.TgZ(0,"div",14),t.YNc(1,ae,3,1,"div",15),t.YNc(2,re,3,1,"div",16),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.recordingSaved),t.xp6(1),t.Q6J("ngIf",!e.recordingSaved)}}const ce=function(o){return["/record-yourself","archive",o]};function de(o,a){if(1&o&&(t.TgZ(0,"div",9)(1,"div",10),t._UZ(2,"i",11),t._uU(3),t.qZA(),t._UZ(4,"div"),t.TgZ(5,"div",12),t._uU(6),t.qZA(),t.YNc(7,se,3,2,"div",13),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("routerLink",t.VKq(4,ce,e.story._id)),t.xp6(2),t.hij("",e.ts.l.archive," "),t.xp6(3),t.Oqu(null==e.story?null:e.story.title),t.xp6(1),t.Q6J("ngIf",e.recordingMode)}}function le(o,a){if(1&o&&(t.TgZ(0,"div",25)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.synthesising)}}function ge(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw(3).stopAudio(i)}),t._UZ(1,"i",35),t.qZA()}}function pe(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw(3).playAudio(i)}),t._UZ(1,"i",36),t.qZA()}}function he(o,a){1&o&&t._UZ(0,"hr",37)}function ue(o,a){if(1&o&&t._UZ(0,"audio",41,42),2&o){const e=t.oxw(3).$implicit,n=t.oxw(3);t.Q6J("src",n.paragraphToAudioSource[e.index],t.LSH)}}function fe(o,a){if(1&o&&(t.TgZ(0,"div",43),t._uU(1),t.qZA()),2&o){const e=t.oxw(6);t.xp6(1),t.Oqu(e.errorText)}}function _e(o,a){if(1&o&&(t.TgZ(0,"div",38),t.YNc(1,ue,2,1,"audio",39),t.YNc(2,fe,2,1,"div",40),t.qZA()),2&o){const e=t.oxw(2).$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",n.paragraphToAudioSource[e.index]),t.xp6(1),t.Q6J("ngIf",n.registrationError)}}function xe(o,a){if(1&o&&(t.TgZ(0,"span")(1,"div",28)(2,"div",29),t._UZ(3,"span",30),t.YNc(4,ge,2,0,"button",31),t.YNc(5,pe,2,0,"button",31),t.qZA(),t.YNc(6,he,1,0,"hr",32),t.YNc(7,_e,3,2,"div",33),t.qZA()()),2&o){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(3),t.Q6J("innerHTML",e.responseHtml,t.oJD),t.uIk("id","paragraph-"+e.index),t.xp6(1),t.Q6J("ngIf",e.audioPlaying),t.xp6(1),t.Q6J("ngIf",!e.audioPlaying),t.xp6(1),t.Q6J("ngIf",n.paragraphToAudioSource[e.index]),t.xp6(1),t.Q6J("ngIf",n.paragraphToAudioSource[e.index])}}function me(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw(5).stopAudio(i)}),t._UZ(1,"i",35),t.qZA()}}function be(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw(5).playAudio(i)}),t._UZ(1,"i",36),t.qZA()}}function Ce(o,a){if(1&o&&t._UZ(0,"hr")(1,"audio",41,42),2&o){const e=t.oxw().$implicit,n=t.oxw(5);t.xp6(1),t.Q6J("src",n.sentenceToAudioSource[e.index],t.LSH)}}function ve(o,a){if(1&o&&(t.TgZ(0,"div",45)(1,"div",28)(2,"div",29),t._UZ(3,"span",30),t.YNc(4,me,2,0,"button",31),t.YNc(5,be,2,0,"button",31),t.qZA(),t.YNc(6,Ce,3,1,"ng-template",46),t.qZA()()),2&o){const e=a.$implicit,n=t.oxw(5);t.xp6(3),t.Q6J("innerHTML",e.responseHtml,t.oJD),t.uIk("id","sentence-"+e.index),t.xp6(1),t.Q6J("ngIf",e.audioPlaying),t.xp6(1),t.Q6J("ngIf",!e.audioPlaying),t.xp6(1),t.Q6J("ngIf",n.sentenceToAudioSource[e.index])}}function ye(o,a){if(1&o&&(t.TgZ(0,"span"),t.YNc(1,ve,7,5,"div",44),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.sentences)}}function Me(o,a){if(1&o&&(t.TgZ(0,"div",27),t.YNc(1,xe,8,6,"span",2),t.YNc(2,ye,2,1,"span",2),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf","paragraph"===e.sectionSplit),t.xp6(1),t.Q6J("ngIf","sentence"===e.sectionSplit)}}function Oe(o,a){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Me,3,2,"div",26),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.paragraphs)}}function Pe(o,a){if(1&o&&(t.TgZ(0,"div")(1,"h2",21),t._uU(2),t.qZA(),t.TgZ(3,"div",22)(4,"div",23),t.YNc(5,le,4,1,"div",24),t.YNc(6,Oe,2,1,"div",2),t.qZA()()()),2&o){const e=t.oxw();t.xp6(2),t.hij(" ",e.ts.l.listen_and_compare," "),t.xp6(3),t.Q6J("ngIf",!e.audioFinishedLoading||!e.recordingsFinishedLoading),t.xp6(1),t.Q6J("ngIf",e.audioFinishedLoading&&e.recordingsFinishedLoading)}}let ke=(()=>{class o{constructor(e,n,i,r,s){this.recordingService=e,this.route=n,this.sanitizer=i,this.ts=r,this.storyService=s,this.audioSource=null,this.paragraphs=[],this.sentences=[],this.audioFinishedLoading=!1,this.recordingsFinishedLoading=!1,this.sectionSplit="paragraph",this.audioPlaying=!1,this.audioTimeouts=[],this.paragraphToAudioSource=[],this.sentenceToAudioSource=[]}ngOnInit(){this.route.params.subscribe(e=>{console.log(e),this.recordingService.get(e.id).subscribe(n=>{this.story=n.storyData,this.synthesiseStory(this.story),this.loadRecordings(n)})})}sentence_paragraph_selection(e){this[e+"Mode"]()}loadRecordings(e){for(let n=0;n<e.paragraphIndices.length;++n)this.recordingService.getAudio(e.paragraphAudioIds[n]).subscribe(i=>{this.paragraphToAudioSource[e.paragraphIndices[n]]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(i))});for(let n=0;n<e.sentenceIndices.length;++n)this.recordingService.getAudio(e.sentenceAudioIds[n]).subscribe(i=>{this.sentenceToAudioSource[e.sentenceIndices[n]]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(i))});this.recordingsFinishedLoading=!0}synthesiseStory(e){this.storyService.synthesiseObject(e).subscribe(n=>{for(let r of n.html){let s="",d=new we;for(let l of r){s+=l;let g=new Te;g.responseHtml=this.sanitizer.bypassSecurityTrustHtml(l),g.audioPlaying=!1,g.paragraph=d,d.sentences.push(g),this.sentences.push(g)}d.responseHtml=this.sanitizer.bypassSecurityTrustHtml(s),d.audioPlaying=!1,this.paragraphs.push(d)}let i=0;for(let r in n.audio){this.paragraphs[r].audioUrl=n.audio[r],this.paragraphs[r].index=r;for(let s of this.paragraphs[r].sentences)s.index=i,++i}this.audioFinishedLoading=!0,this.paragraphMode()})}paragraphMode(){this.sectionSplit="paragraph",this.pauseAllAudio(),setTimeout(()=>{this.paragraphs.forEach(e=>{let n=document.getElementById("paragraph-"+e.index);n&&n.querySelectorAll("span").forEach(r=>{"sentence_normal"!=r.className&&(r.addEventListener("click",this.playWord.bind(this)),r.setAttribute("audio-url",e.audioUrl),r.classList.add("wordBtn"))})})},1e3)}sentenceMode(){this.sectionSplit="sentence",this.pauseAllAudio(),setTimeout(()=>{this.sentences.forEach(e=>{let n=document.getElementById("sentence-"+e.index);n&&n.children[0].querySelectorAll("span").forEach(r=>{"sentence_normal"!=r.className&&(r.addEventListener("click",this.playWord.bind(this)),r.setAttribute("audio-url",e.paragraph.audioUrl),r.classList.add("wordBtn"))})})},1e3)}pauseAllAudio(){this.a&&(this.a.pause(),this.audioPlaying=!1,this.paragraphs.forEach(e=>{"paragraph"===this.sectionSplit?(e.audioPlaying=!1,M.stopHighlighting(e)):"sentence"===this.sectionSplit&&(e.sentences.forEach(n=>{n.audioPlaying=!1,M.stopHighlighting(n)}),this.audioTimeouts.forEach(n=>{clearTimeout(n)}))}))}playAudio(e){if(this.pauseAllAudio(),"Paragraph"===e.type)this.a=new Audio(e.audioUrl),this.a.play(),this.audioPlaying=!0,M.startHighlighting(e);else if("Sentence"===e.type){let n=document.getElementById("sentence-"+e.index);e.startTime||(e.startTime=n.children[0].children[0].getAttribute("data-begin")),e.duration||(e.duration=+n.children[0].children[n.children[0].childElementCount-1].getAttribute("data-begin")+ +n.children[0].children[n.children[0].childElementCount-1].getAttribute("data-dur")-e.startTime),this.a=new Audio(e.paragraph.audioUrl),this.a.currentTime=e.startTime,this.a.play(),this.audioPlaying=!0,M.startHighlighting(e);let i=setTimeout(()=>{this.a.pause(),this.audioPlaying=!1},1e3*e.duration);this.audioTimeouts.push(i)}}stopAudio(e){this.a.pause(),this.audioPlaying=!1,M.stopHighlighting(e)}playWord(e){let n=e.target;this.pauseAllAudio(),this.a=new Audio(n.getAttribute("audio-url"));let i=n.getAttribute("data-begin"),r=n.getAttribute("data-dur");this.a.currentTime=i,this.a.play(),n.style.background="#0088ff6b";let s=setTimeout(()=>{this.a.pause(),n.classList.remove("staticHighlight"),n.style.background="#00000000"},1500*r);this.audioTimeouts.push(s)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.s),t.Y36(f.gz),t.Y36(W.H7),t.Y36(T.D),t.Y36(L.N))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-view-recording"]],hostAttrs:[1,"page","bookContainerSynth"],decls:12,vars:7,consts:[[1,"bookContainerSynth"],["class","recordingBookHeader",4,"ngIf"],[4,"ngIf"],[1,"footer"],[1,"btnContainer"],[1,"footerText"],[3,"disabled","change"],["value","sentence"],["value","paragraph",3,"checked"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"routerLink"],[1,"fa","fa-chevron-left"],[1,"bookTitleHistory"],["class","recordingSaveIcon",4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"recordingStoryHeader"],[1,"textFieldContainer"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[1,"cardBody"],[3,"innerHTML"],["class","playAudioBtn",3,"click",4,"ngIf"],["class","dividerLine",4,"ngIf"],["class","cardFooter",4,"ngIf"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"dividerLine"],[1,"cardFooter"],["controls","","class","audioPlayer",3,"src",4,"ngIf"],["class","errorMessage",4,"ngIf"],["controls","",1,"audioPlayer",3,"src"],["audioTag",""],[1,"errorMessage"],["class","sentenceContainer",4,"ngFor","ngForOf"],[1,"sentenceContainer"],[3,"ngIf"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,de,8,6,"div",1),t.YNc(2,Pe,7,3,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.qZA(),t.TgZ(7,"mat-button-toggle-group",6),t.NdJ("change",function(r){return n.sentence_paragraph_selection(r.value)}),t.TgZ(8,"mat-button-toggle",7),t._uU(9),t.qZA(),t.TgZ(10,"mat-button-toggle",8),t._uU(11),t.qZA()()()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.story),t.xp6(1),t.Q6J("ngIf",n.story),t.xp6(4),t.hij(" ",n.ts.l.listen_by," "),t.xp6(1),t.Q6J("disabled",!n.audioFinishedLoading),t.xp6(2),t.hij("",n.ts.l.sentence," "),t.xp6(1),t.Q6J("checked",!0),t.xp6(1),t.hij("",n.ts.l.paragraph," "))},directives:[h.O5,f.rH,X.P,h.sg,A,B],styles:['.mat-button-toggle[_ngcontent-%COMP%]{background-color:#90ee90}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#90ee90;filter:brightness(85%)}.bookContainerSynth[_ngcontent-%COMP%]{background:linear-gradient(45deg,#dca 12%,transparent 0,transparent 88%,#dca 0),linear-gradient(135deg,transparent 37%,#a85 0,#a85 63%,transparent 0),linear-gradient(45deg,transparent 37%,#dca 0,#dca 63%,transparent 0) #753;background-size:25px 25px;z-index:10;border-radius:5px;width:90%;margin:1%;background-size:cover;box-shadow:-1px 5px 32px 10px #0003}.bookContainerSynth[_ngcontent-%COMP%]{width:70%;margin-left:15%;z-index:10;border-radius:5px;background:url(/assets/img/paperBg.jpg) no-repeat center center fixed;background-size:cover;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;box-shadow:-1px 5px 32px 10px #0003}.modalContainer[_ngcontent-%COMP%]{position:absolute;margin-top:0;z-index:100;height:400px;width:100%;border-radius:5px;background-color:#00000080;text-align:center}.modalContent[_ngcontent-%COMP%]{margin-top:80px;width:80%;margin-left:10%;padding:25px;background-color:#fff;border-radius:5px;display:flex;flex-direction:column;align-items:center;box-shadow:-1px 10px 17px #00000080}.modalBtn[_ngcontent-%COMP%]{padding:5px 10px;background-color:#d1d1d1;border:none;border-radius:5px;margin:15px 5px 5px}.modalText[_ngcontent-%COMP%]{font-size:14pt;white-space:normal}.recordingStoryHeader[_ngcontent-%COMP%]{background-color:#70a87f;color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:#261500;width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.recordingSaveIcon[_ngcontent-%COMP%]{color:#261500;border-style:none;font-size:11pt;padding-right:5%;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{color:#b3a995}.optionsPopupRec[_ngcontent-%COMP%]{z-index:10;position:absolute;right:0;margin-top:25px;display:flex;padding:10px 5px 5px;background:url(/assets/img/paperBg.jpg) no-repeat center center fixed;background-size:cover;box-shadow:-1px 5px 32px 10px #0003;border-radius:5px}.optionsPopupRec[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0px;right:60px;width:0;height:0;border:10px solid transparent;border-bottom-color:#f1e9d8;border-top:0;margin-left:-10px;margin-top:-10px}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:#70a87f;padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:#437250;cursor:pointer;transition:.5s}.btnContainer[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;padding-top:5px;padding-bottom:5px;justify-content:space-between}.changeSplitBtn[_ngcontent-%COMP%]{background-color:#70a87f;border-radius:4px;margin-right:5px;font-size:10pt;color:#fff}.cardFooter[_ngcontent-%COMP%]{display:flex}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}@-webkit-keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}.audioPlayer[_ngcontent-%COMP%]{width:100%;height:35px}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.modalContainer[_ngcontent-%COMP%]{width:620px;height:510px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.modalContainer[_ngcontent-%COMP%]{width:800px;height:600px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.modalContainer[_ngcontent-%COMP%]{width:980px;height:730px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:#0088ff6b;position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.bookContentsContainer[_ngcontent-%COMP%]{width:80%;margin-left:10%;z-index:10}.bookTitle[_ngcontent-%COMP%]{color:#261500;padding-right:30px;display:inline-block;font-size:18pt}.contentsContainer[_ngcontent-%COMP%]{padding-left:3%;padding-right:3%;height:390px;width:80%;margin-left:10%;background:url(/assets/img/paperBg.jpg) no-repeat center center fixed;background-size:cover;box-shadow:-1px 5px 32px 10px #0003;border-radius:5px}.contentsLinkContainer[_ngcontent-%COMP%]{height:300px;overflow:auto;padding:10px;box-shadow:inset 0 0 12px #00000080;border-radius:5px}.contentsTitleContainer[_ngcontent-%COMP%]{width:100%;padding:5px;display:flex;justify-content:space-between}.contentsLink[_ngcontent-%COMP%]{color:#261500;text-align:left;width:50%}.contentsDate[_ngcontent-%COMP%]{color:#261500}.contentSection[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.contentsDateTitle[_ngcontent-%COMP%]{font-size:14pt;color:#c15a2e}.contentsLinkTitle[_ngcontent-%COMP%]{float:left;margin-left:1%;font-size:14pt;color:#c15a2e}.contentsBtnsContainer[_ngcontent-%COMP%]{margin-top:10px}.newStoryBtn[_ngcontent-%COMP%]{background-color:#e5bd3b;border-style:none;color:#fff;font-size:12pt;margin:0;float:right;border-radius:5px}.newStoryBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b;color:#fff}.messagesBtn[_ngcontent-%COMP%]{background-color:#e5bd3b;border-style:none;color:#fff;font-size:12pt;margin:0;float:center;border-radius:5px;display:inline-flex}.messagesBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b;color:#fff}.notificationBtn[_ngcontent-%COMP%]{margin-left:5px;background-color:#bd2323;color:#fff;font-size:8pt;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;box-shadow:inset 0 -9px 9px -14px #000000bf}.optionsBtn[_ngcontent-%COMP%]{font-size:14pt;background-color:#e5bd3b;border-style:none;color:#fff;font-size:12pt;margin:0;float:left;border-radius:5px}.optionsBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b;color:#fff}.optionsPopup[_ngcontent-%COMP%]{z-index:10;position:fixed;margin-top:10px;margin-left:5%;display:flex;align-items:center;padding:4px 0 4px 4px;background:url(/assets/img/paperBg.jpg) no-repeat center center fixed;background-size:cover;box-shadow:-1px 5px 32px 10px #0003;border-radius:5px}.optionsPopup[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0px;left:60px;width:0;height:0;border:10px solid transparent;border-bottom-color:#f1e9d8;border-top:0;margin-left:-10px;margin-top:-10px}.deleteBtn[_ngcontent-%COMP%]{background-color:#e5bd3b;border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:2px 7px 7px;height:38px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b}.deleteModeBtn[_ngcontent-%COMP%]{background-color:#dd000e}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:#b7000a}.trashImg[_ngcontent-%COMP%]{width:24px}.optionsPopupBtn[_ngcontent-%COMP%]{height:38px;margin-right:4px}.deleteCheckbox[_ngcontent-%COMP%]{float:left;margin-right:5px;margin-top:5px}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContentsContainer[_ngcontent-%COMP%]{width:95%;padding-top:10px;margin-left:2.5%;z-index:10}.contentsContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%}.contentsLinkContainer[_ngcontent-%COMP%]{height:270px;padding-top:10px}.contentsLinkTitle[_ngcontent-%COMP%], .contentsDateTitle[_ngcontent-%COMP%]{font-size:12pt}.optionsPopupBtn[_ngcontent-%COMP%]{padding:2px 5px 5px;margin:0 4px 0 0;height:30px;font-size:12pt}.deleteBtn[_ngcontent-%COMP%]{background-color:#e5bd3b;border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:0 3px 3px;height:30px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:#ad8f2b}.deleteModeBtn[_ngcontent-%COMP%]{background-color:#dd000e}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:#b7000a}.trashImg[_ngcontent-%COMP%]{width:20px}}.newStoryMessage[_ngcontent-%COMP%]{color:#a79d88;width:80%;margin-left:10%;margin-top:30px}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContentsContainer[_ngcontent-%COMP%]{width:560px;position:fixed;left:50%;margin-left:-280px;padding-top:40px}.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}@media only screen and (min-width: 1400px) and (min-height: 800px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px;margin-top:100px}.bookContentsContainer[_ngcontent-%COMP%]{width:560px;position:fixed;left:50%;margin-left:-280px;padding-top:40px;margin-top:100px}.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}.page[_ngcontent-%COMP%]{padding-top:20px}.bookImg[_ngcontent-%COMP%]{z-index:-10;width:90%;height:500px;position:fixed;right:5%}.hidden[_ngcontent-%COMP%]{visibility:hidden;opacity:0}.hiddenFade[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility .3s,opacity .3s ease-in}.visible[_ngcontent-%COMP%]{visibility:visible;opacity:1}.visibleFade[_ngcontent-%COMP%]{visibility:visible;opacity:1;transition:visibility .3s,opacity .3s ease-out}.modalContainer[_ngcontent-%COMP%]{position:absolute;margin-top:-10px;z-index:100;height:520px;width:100%;border-radius:5px;background-color:#00000080;text-align:center}.bookTitle[_ngcontent-%COMP%]{color:#261500;padding-right:10%;padding-top:3px;display:inline-block;font-size:16pt}.bookTitleHistory[_ngcontent-%COMP%]{color:#261500;padding-right:37%;padding-top:3px;display:inline-block;font-size:16pt}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;float:left;border-style:none;color:#261500;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:#c15a2e;cursor:pointer;transition:color .5s}.chatbotBtn[_ngcontent-%COMP%]{display:inline;float:right;color:#261500;border-style:none;font-size:12pt;padding-top:10px;padding-right:5%}.chatbotBtn[_ngcontent-%COMP%]:hover{color:#c15a2e}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.textContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%;height:290px;color:#261500;background-color:#f7f2e7;border:1px solid #261500a2;text-align:left;padding-left:8px;padding-right:8px;padding-top:4px;overflow:auto}.historyTextContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%;height:360px;color:#261500;background-color:#f7f2e7;border:1px solid #261500a2;text-align:left;padding-left:8px;padding-right:8px;padding-top:4px;overflow:auto}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:10px}.audioPlayer[_ngcontent-%COMP%]{height:15px}.playAudioBtn[_ngcontent-%COMP%]{background-color:#70a87f;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:#437250;transition:.5s}.loaderContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:50px;color:#437250}.footer[_ngcontent-%COMP%]{margin-left:5%;width:90%;display:flex}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{background-color:#70a87f;border-radius:4px;margin-right:5px;color:#fff}.changeSplitBtn[_ngcontent-%COMP%]:hover{background-color:#437250}.sentenceContainer[_ngcontent-%COMP%]{margin-bottom:10px}.selectedBtn[_ngcontent-%COMP%]{background-color:#437250}.historyToolbar[_ngcontent-%COMP%]{background-color:#70a87f;color:#fff;display:flex;width:90%;margin-left:5%;padding:5px}.selectStoryFilter[_ngcontent-%COMP%]{font-size:10pt;margin-left:5px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.recordingBtn[_ngcontent-%COMP%]{background-color:#70a87f;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:#437250;transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.blink[_ngcontent-%COMP%]{-webkit-animation:blinker 2s linear infinite;animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContentsContainer[_ngcontent-%COMP%]{width:100%;padding-top:10px;z-index:10}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .spanText{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .spanText:before{content:"";height:22px;width:0%;background:#0088ff6b;position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .spanTextHighlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .spanTextNoHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:#0088ff36;cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:#0088ff36;cursor:pointer}']}),o})();class we{constructor(){this.highlightTimeouts=[],this.sentences=[],this.type="Paragraph"}}class Te{constructor(){this.index="0",this.highlightTimeouts=[],this.type="Sentence"}}class M{static startHighlighting(a){a.audioPlaying=!0;let i,s,n="Sentence"===a.type,r=0;"Paragraph"===a.type?i=document.getElementById("paragraph-"+a.index).querySelectorAll("span"):n&&(i=document.getElementById("sentence-"+a.index).children[0].querySelectorAll("span"),r=1e3*a.startTime),i.forEach(d=>{"sentence_normal"!=d.className&&d.classList.add("spanText")}),i.forEach((d,l)=>{if("sentence_normal"!=d.className){let g=setTimeout(()=>{l===i.length-1&&setTimeout(()=>{d.classList.add("spanTextNoHighlight"),d.classList.remove("spanTextHighlight"),this.resetHighlight(a)},1e3*+d.getAttribute("data-dur")),s&&s.classList.add("spanTextNoHighlight"),d.classList.add("spanTextHighlight"),d.style.setProperty("--trans","width "+(+d.getAttribute("data-dur")/2).toString()+"s  ease-in-out"),s=d},1e3*+d.getAttribute("data-begin")+ +d.getAttribute("data-dur")/2*1e3-r);a.highlightTimeouts.push(g)}})}static stopHighlighting(a){a.highlightTimeouts.forEach(e=>{clearTimeout(e)}),this.resetHighlight(a)}static resetHighlight(a){a.audioPlaying=!1;let i,n="Sentence"===a.type;if("Paragraph"===a.type){let r=document.getElementById("paragraph-"+a.index);r&&(i=r.querySelectorAll("span"))}else if(n){let r=document.getElementById("sentence-"+a.index);r&&(i=r.children[0].querySelectorAll("span"))}i&&i.forEach(r=>{r.classList.remove("spanText"),r.classList.remove("spanTextHighlight"),r.classList.remove("spanTextNoHighlight")})}}const Ae=[{path:"",redirectTo:"recording"},{path:"recording/:id",component:Gt,canDeactivate:[c(2126).I]},{path:"archive/:id",component:ie},{path:"view/:id",component:ke}];let Be=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.Bz.forChild(Ae)],f.Bz]}),o})(),Re=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[wt.k,at,R.ot,h.ez,Be,kt.F,Pt]]}),o})()}}]);
(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[653],{6653:(vr,un,M)=>{"use strict";M.r(un),M.d(un,{AdminModule:()=>Ed});var H=M(6895),Ce=M(1390),ke=M(8977),e=M(4650);let Wn=(()=>{class n{constructor(t){this.ts=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ke.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-dashboard"]],decls:21,vars:3,consts:[[1,"content"],[1,"adminTitle"],[1,"buttonContainer"],[1,"buttonRow"],["routerLink","teachers",1,"adminBtnContainer"],["routerLink","find-user",1,"adminBtnContainer"],[1,"adminBtnContainer"],["href","https://analytics.google.com/analytics/web/?authuser=2#/report-home/a178889778w247370276p229672953","target","_blank",1,"adminBtnContainer",2,"text-decoration","none"],["routerLink","database-stats",1,"adminBtnContainer"],["routerLink","profile-stats",1,"adminBtnContainer"],["routerLink","feature-stats",1,"adminBtnContainer"],["routerLink","add-content",1,"adminBtnContainer"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"div",5),e._uU(8),e.qZA(),e.TgZ(9,"div",6)(10,"a",7),e._uU(11," Google Analytics "),e.qZA()()(),e.TgZ(12,"div",3)(13,"div",8),e._uU(14," DB Stats "),e.qZA(),e.TgZ(15,"div",9),e._uU(16," Profile Stats "),e.qZA(),e.TgZ(17,"div",10),e._uU(18," Feature Stats "),e.qZA(),e.TgZ(19,"div",11),e._uU(20," Add Content "),e.qZA()()()()),2&t&&(e.xp6(2),e.hij(" ",a.ts.l.admin_dashboard," "),e.xp6(4),e.hij(" ",a.ts.l.teachers," "),e.xp6(2),e.hij(" ",a.ts.l.find_user," "))},dependencies:[Ce.rH],styles:[".content[_ngcontent-%COMP%]{width:90%;margin-left:5%;height:72vh;background-color:#fff;border-radius:5px;box-shadow:-1px 5px 32px 10px #0003}.adminTitle[_ngcontent-%COMP%]{font-size:20pt;height:6vh;display:flex;align-items:center;justify-content:center;color:#fff;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0}.buttonContainer[_ngcontent-%COMP%]{padding:10%;padding-top:25vh;align-items:center;justify-content:center;overflow:auto;flex-wrap:wrap}.buttonRow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:5px;flex-wrap:wrap}.adminBtnContainer[_ngcontent-%COMP%]{width:150px;height:80px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:16pt;background-color:var(--scealai-med-brown);margin:5px;border-radius:5px}.adminBtnContainer[_ngcontent-%COMP%]:hover{color:var(--orange-text);background-color:var(--scealai-med-brown-hover);transition:color,background-color,.5s;cursor:pointer}@media (max-width: 550px){.content[_ngcontent-%COMP%]{flex-direction:column;flex-wrap:nowrap;padding-left:5%;padding-right:5%;margin-top:0vh}.adminBtnContainer[_ngcontent-%COMP%]{width:90%;height:80px;padding:10px}}"]}),n})();var pn=M(1042),Ee=M(4186),Yt=M(4633),Pe=M(529),hn=M(5412);function Kn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",13),e._uU(1),e.TgZ(2,"i",14),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.openDeleteCodeDialog(o.code))}),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function bt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.goToUser(o._id))}),e._uU(1),e.qZA()}if(2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.username," ")}}let gn=(()=>{class n{constructor(t,a,r,o){this.http=t,this.router=a,this.ts=r,this.dialog=o,this.copiedTextClass="hidden",this.baseUrl=Ee.Z.baseurl}ngOnInit(){this.getActiveTeacherCodes(),this.getTeachers()}generateCode(){this.teacherCode=(0,pn.Z)(),this.http.post(this.baseUrl+"teacherCode/create",{code:this.teacherCode}).subscribe(a=>{this.getActiveTeacherCodes()})}getActiveTeacherCodes(){this.http.get(this.baseUrl+"teacherCode/activeCodes").subscribe(t=>{this.activeTeacherCodes=t})}getTeachers(){this.http.get(this.baseUrl+"user/teachers").subscribe(t=>{this.teachers=t})}deleteTeacherCode(){null!=this.codeToDelete&&this.http.get(this.baseUrl+"teacherCode/delete/"+this.codeToDelete).subscribe(t=>{this.getActiveTeacherCodes()})}copyToClipboard(){document.addEventListener("copy",t=>{t.clipboardData.setData("text/plain",this.teacherCode.toString()),t.preventDefault(),document.removeEventListener("copy",null)}),document.execCommand("copy"),this.copiedTextClass="visible",setTimeout(()=>this.copiedTextClass="hiddenFade",1e3)}openDeleteCodeDialog(t){this.codeToDelete=t,this.dialogRef=this.dialog.open(Yt.p,{data:{title:this.ts.l.sure_you_want_to_delete_code,confirmText:this.ts.l.delete,cancelText:this.ts.l.cancel},width:"50%"}),this.dialogRef.afterClosed().subscribe(a=>{this.dialogRef=void 0,a&&this.deleteTeacherCode()})}goToUser(t){this.router.navigateByUrl("admin/user/"+t.toString())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Pe.eN),e.Y36(Ce.F0),e.Y36(ke.D),e.Y36(hn.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-teachers"]],decls:23,vars:11,consts:[[1,"adminContent"],[1,"generateCodeTitle"],[1,"teacherCodeTitle"],[1,"teacherCodeButton",3,"click"],[1,"teacherCodeDisplay"],["readonly","",1,"teacherCodeTextarea"],[1,"far","fa-copy","copyIcon",3,"click"],[1,"teacherAccountsContainer"],[1,"teacherAccountsDisplay"],[1,"teacherAccountsHeader"],[1,"teacherAccountsBody"],["class","activeTeacherCodeContainer",4,"ngFor","ngForOf"],["class","activeTeacherCodeContainer whiteBtn",3,"click",4,"ngFor","ngForOf"],[1,"activeTeacherCodeContainer"],["aria-hidden","true",1,"fa","fa-times","greenBtn",3,"click"],[1,"activeTeacherCodeContainer","whiteBtn",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return a.generateCode()}),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"textarea",5),e._uU(8),e.qZA(),e.TgZ(9,"i",6),e.NdJ("click",function(){return a.copyToClipboard()}),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA()(),e.TgZ(12,"div",7)(13,"div",8)(14,"div",9),e._uU(15),e.qZA(),e.TgZ(16,"div",10),e.YNc(17,Kn,3,1,"div",11),e.qZA()(),e.TgZ(18,"div",8)(19,"div",9),e._uU(20),e.qZA(),e.TgZ(21,"div",10),e.YNc(22,bt,2,1,"div",12),e.qZA()()()()),2&t&&(e.xp6(3),e.Oqu(a.ts.l.teacher_account_code),e.xp6(2),e.Oqu(a.ts.l.generate),e.xp6(3),e.Oqu(a.teacherCode),e.xp6(2),e.Gre("",a.copiedTextClass," copiedText"),e.xp6(1),e.hij("",a.ts.l.copied,"!"),e.xp6(4),e.hij(" ",a.ts.l.active_account_codes," "),e.xp6(2),e.Q6J("ngForOf",a.activeTeacherCodes),e.xp6(3),e.hij(" ",a.ts.l.teacher_accounts," "),e.xp6(2),e.Q6J("ngForOf",a.teachers))},dependencies:[H.sg],styles:[".adminContent[_ngcontent-%COMP%]{flex-direction:column}.generateCodeTitle[_ngcontent-%COMP%]{font-size:14pt;display:flex;justify-content:center}.teacherCodeTitle[_ngcontent-%COMP%]{padding:5px}.teacherCodeButton[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;padding:5px 10px;margin-left:10px;border-radius:5px}.teacherCodeButton[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--scealai-dark-green)}.teacherCodeDisplay[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:2vh}.teacherCodeTextarea[_ngcontent-%COMP%]{width:40%;height:30px;font-size:12pt;resize:none;background-color:#d1d1d1;border:none;border-radius:5px 0 0 5px}.copyIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;width:30px;height:30px;padding:4px;font-size:16pt;border-radius:0 5px 5px 0}.copyIcon[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--scealai-dark-green)}.copiedText[_ngcontent-%COMP%]{margin-left:10px;color:var(--scealai-green)}.teacherAccountsContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:80%;margin-left:10%}.teacherAccountsDisplay[_ngcontent-%COMP%]{margin-top:4vh;width:40%;height:45vh;background-color:#d1d1d1;border-radius:0 0 5px 5px}.teacherAccountsHeader[_ngcontent-%COMP%]{font-size:14pt;height:4vh;display:flex;align-items:center;justify-content:center;color:#fff;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0}.teacherAccountsBody[_ngcontent-%COMP%]{padding:10px 10px 0;text-align:left;overflow:auto;height:40vh}.activeTeacherCodeContainer[_ngcontent-%COMP%]{background-color:#fff;padding:5px;border-radius:5px;margin-bottom:10px;font-size:11pt}.greenBtn[_ngcontent-%COMP%]{color:var(--scealai-dark-green);font-size:12pt;padding:5px;float:right;margin-top:-2px}.greenBtn[_ngcontent-%COMP%]:hover{cursor:pointer;font-size:14pt;padding:4px}.whiteBtn[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--scealai-med-brown-hover);cursor:pointer}.hidden[_ngcontent-%COMP%]{visibility:hidden;opacity:0}.hiddenFade[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility .3s,opacity .3s ease-in}.visible[_ngcontent-%COMP%]{visibility:visible;opacity:1}"]}),n})();var mn=M(8443),xt=M(8386),_n=M(7579),Vn=M(8372),yt=M(1884),Me=M(8092),V=M(4006),Xn=M(2057);function ei(n,i){if(1&n&&(e.TgZ(0,"div",5)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.ts.l.compiling_data)}}function ti(n,i){if(1&n&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA()()),2&n){const t=i.$implicit,a=e.oxw(3);e.MGl("routerLink","../user/",t._id,""),e.xp6(1),e.Q6J("searchedWord",a.searchText)("content",t.username)("classToApply","font-weight-bold")("setTitle","true"),e.xp6(1),e.hij(" ",t.username,""),e.xp6(2),e.Oqu(t.role)}}function Ve(n,i){if(1&n&&(e.TgZ(0,"div",19),e.YNc(1,ti,5,7,"div",20),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.userResults)}}function ni(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1," Type above to search for users. "),e.qZA())}function Ct(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1," No usernames match the string entered above. "),e.qZA())}function Tt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div"),e._uU(3," Include: "),e.qZA(),e.TgZ(4,"div",8)(5,"input",9),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.roleFilter.STUDENT=r)}),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",8)(8,"input",9),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.roleFilter.TEACHER=r)}),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"div",8)(11,"input",9),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.roleFilter.ADMIN=r)}),e.qZA(),e._uU(12),e.qZA()(),e.TgZ(13,"div",10)(14,"div")(15,"div",11)(16,"label",12),e._uU(17),e.qZA(),e.TgZ(18,"div",13)(19,"input",14),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.searchModelChanged.next(r))}),e.qZA(),e.TgZ(20,"button",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return r.currentPage=0,e.KtG(r.searchUsers())}),e._uU(21,"Search"),e.qZA()()()()(),e.TgZ(22,"div")(23,"button",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.goPrevPage())}),e._uU(24,"<"),e.qZA(),e._uU(25),e.TgZ(26,"button",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.goNextPage())}),e._uU(27,">"),e.qZA()(),e.TgZ(28,"div",16),e._uU(29),e.qZA(),e.YNc(30,Ve,2,1,"div",17),e.YNc(31,ni,2,0,"div",18),e.YNc(32,Ct,2,0,"div",18),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.roleFilter.STUDENT),e.xp6(1),e.hij(" ",t.ts.l.students,""),e.xp6(2),e.Q6J("ngModel",t.roleFilter.TEACHER),e.xp6(1),e.hij(" ",t.ts.l.teachers,""),e.xp6(2),e.Q6J("ngModel",t.roleFilter.ADMIN),e.xp6(1),e.hij(" ",t.ts.l.admins,""),e.xp6(5),e.Oqu(t.ts.l.search_user),e.xp6(2),e.Q6J("ngModel",t.searchText),e.xp6(6),e.AsE(" Page ",t.currentPage+1," / ",t.totalPages+1," "),e.xp6(4),e.AsE("",t.ts.l.results," (",t.resultCount,")"),e.xp6(1),e.Q6J("ngIf",t.resultCount>0),e.xp6(1),e.Q6J("ngIf",!t.searchText),e.xp6(1),e.Q6J("ngIf",t.searchText&&0==t.resultCount)}}let ii=(()=>{class n{constructor(t,a){this.userService=t,this.ts=a,this.searchModelChanged=new _n.x,this.userCount=0,this.userResults=[],this.numberOfUsers=0,this.resultCount=0,this.currentPage=0,this.totalPages=0,this.LIMIT=20,this.roleFilter={STUDENT:!0,TEACHER:!0,ADMIN:!0},this.dataLoaded=!0}ngOnInit(){this.userService.getUserCount().subscribe(t=>this.userCount=t.total),this.searchModelChangeSubscription=this.searchModelChanged.pipe((0,Vn.b)(1e3),(0,yt.x)()).subscribe(t=>{this.searchText=t,this.currentPage=0,this.searchUsers()})}ngOnDestroy(){this.searchModelChangeSubscription.unsubscribe()}validSearchText(){try{new RegExp(this.searchText,"i")}catch(t){return console.log("Caught error:",t),alert("invalid regular expression"),!1}return!0}searchUsers(){if(!this.validSearchText())return;this.dataLoaded=!1,this.userResults=[];const t=Object.entries(this.roleFilter).filter(a=>a[1]).map(a=>a[0]);this.userService.searchUser(this.searchText,this.currentPage,this.LIMIT,t).subscribe(a=>{this.userResults=a.users.map(r=>(new mn.n).fromJSON(r)),this.resultCount=a.count,this.dataLoaded=!0,this.getPageCount()})}getPageCount(){const t=Math.ceil(this.resultCount/this.LIMIT);this.totalPages=t>0?t-1:0}goNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.searchUsers())}goPrevPage(){this.currentPage>0&&(this.currentPage--,this.searchUsers())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(xt.K),e.Y36(ke.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-find-user"]],decls:6,vars:4,consts:[[1,"adminContainer"],[1,"searchContainer"],[1,"searchHeader"],["class","adminLoaderContainer",4,"ngIf"],["class","searchResultsContainer",4,"ngIf"],[1,"adminLoaderContainer"],[1,"searchResultsContainer"],[1,"filter"],[1,"checkbox-line"],["type","checkbox",3,"ngModel","ngModelChange"],["role","main"],[1,"form-group"],["for","search-text"],[2,"display","flex"],["type","text","id","search-text","aria-describedby","search-text","placeholder","Enter user to search",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"],[2,"margin","5px"],["class","resultContainer",4,"ngIf"],[4,"ngIf"],[1,"resultContainer"],["class","resultCard",3,"routerLink",4,"ngFor","ngForOf"],[1,"resultCard",3,"routerLink"],["appHighlight","",3,"searchedWord","content","classToApply","setTitle"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.YNc(4,ei,4,1,"div",3),e.YNc(5,Tt,33,15,"div",4),e.qZA()()),2&t&&(e.xp6(3),e.AsE(" ",a.ts.l.all_users," (",a.userCount,") "),e.xp6(1),e.Q6J("ngIf",!a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded))},dependencies:[Me.P,H.sg,H.O5,Ce.rH,V.Fj,V.Wl,V.JJ,V.On,Xn.Z],styles:[".adminContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.searchContainer[_ngcontent-%COMP%]{background:#d1d1d1;width:60%;border-radius:4px}.searchHeader[_ngcontent-%COMP%]{background:var(--scealai-dark-green);border-radius:4px 4px 0 0;font-size:14pt;color:#fff}.adminLoaderContainer[_ngcontent-%COMP%]{width:35%}.searchResultsContainer[_ngcontent-%COMP%]{padding:10px 10px 0;height:500px}.filter[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;margin-bottom:10px;font-size:12pt;display:flex;justify-content:space-between;padding:10px}.resultContainer[_ngcontent-%COMP%]{padding:10px 10px 0;box-shadow:inset 0 0 7px #000000b6;border-radius:5px;overflow-y:scroll;max-height:250px}.resultCard[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;margin-bottom:10px;font-size:12pt;display:flex;justify-content:space-between;padding:10px}.resultCard[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--scealai-med-brown-hover);cursor:pointer}"]}),n})();var le=M(5861),Oe=M(3905),rt=M(1765),jt=M(25),Zt=M(4687),ie=M(9301);ie.kL.register(...ie.zX);var U=1e-6,Y=Math.PI,re=Y/2,Rt=Y/4,be=2*Y,fe=180/Y,$=Y/180,B=Math.abs,Xe=Math.atan,qe=Math.atan2,L=Math.cos,et=Math.ceil,Jt=Math.exp,At=(Math,Math,Math.log),wt=Math.pow,N=Math.sin,xe=Math.sign||function(n){return n>0?1:n<0?-1:0},ve=Math.sqrt,Ht=Math.tan;function vn(n){return n>1?0:n<-1?Y:Math.acos(n)}function d(n){return n>1?re:n<-1?-re:Math.asin(n)}function m(n){return function(i,t){var a=L(i),r=L(t),o=n(a*r);return o===1/0?[2,0]:[o*r*N(i),o*N(t)]}}function _(n){return function(i,t){var a=ve(i*i+t*t),r=n(a),o=N(r),s=L(r);return[qe(i*o,a*s),d(a&&t*o/a)]}}function y(){}function b(){var i,n=[];return{point:function(t,a,r){i.push([t,a,r])},lineStart:function(){n.push(i=[])},lineEnd:y,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],i=null,t}}}function T(n,i){return B(n[0]-i[0])<U&&B(n[1]-i[1])<U}function A(n,i,t,a){this.x=n,this.z=i,this.o=t,this.e=a,this.v=!1,this.n=this.p=null}function w(n,i,t,a,r){var c,u,o=[],s=[];if(n.forEach(function(x){if(!((O=x.length-1)<=0)){var O,E,S=x[0],q=x[O];if(T(S,q)){if(!S[2]&&!q[2]){for(r.lineStart(),c=0;c<O;++c)r.point((S=x[c])[0],S[1]);return void r.lineEnd()}q[0]+=2*U}o.push(E=new A(S,x,null,!0)),s.push(E.o=new A(S,null,E,!1)),o.push(E=new A(q,x,null,!1)),s.push(E.o=new A(q,null,E,!0))}}),o.length){for(s.sort(i),P(o),P(s),c=0,u=s.length;c<u;++c)s[c].e=t=!t;for(var l,p,g=o[0];;){for(var h=g,v=!0;h.v;)if((h=h.n)===g)return;l=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(v)for(c=0,u=l.length;c<u;++c)r.point((p=l[c])[0],p[1]);else a(h.x,h.n.x,1,r);h=h.n}else{if(v)for(c=(l=h.p.z).length-1;c>=0;--c)r.point((p=l[c])[0],p[1]);else a(h.x,h.p.x,-1,r);h=h.p}l=(h=h.o).z,v=!v}while(!h.v);r.lineEnd()}}}function P(n){if(i=n.length){for(var i,r,t=0,a=n[0];++t<i;)a.n=r=n[t],r.p=a,a=r;a.n=r=n[0],r.p=a}}class k{constructor(){this._partials=new Float64Array(32),this._n=0}add(i){const t=this._partials;let a=0;for(let r=0;r<this._n&&r<32;r++){const o=t[r],s=i+o,c=Math.abs(i)<Math.abs(o)?i-(s-o):o-(s-i);c&&(t[a++]=c),i=s}return t[a]=i,this._n=a+1,this}valueOf(){const i=this._partials;let a,r,o,t=this._n,s=0;if(t>0){for(s=i[--t];t>0&&(a=s,r=i[--t],s=a+r,o=r-(s-a),!o););t>0&&(o<0&&i[t-1]<0||o>0&&i[t-1]>0)&&(r=2*o,a=s+r,r==a-s&&(s=a))}return s}}function X(n){return[qe(n[1],n[0]),d(n[2])]}function ae(n){var i=n[0],t=n[1],a=L(t);return[a*L(i),a*N(i),N(t)]}function j(n,i){return n[0]*i[0]+n[1]*i[1]+n[2]*i[2]}function ue(n,i){return[n[1]*i[2]-n[2]*i[1],n[2]*i[0]-n[0]*i[2],n[0]*i[1]-n[1]*i[0]]}function he(n,i){n[0]+=i[0],n[1]+=i[1],n[2]+=i[2]}function pe(n,i){return[n[0]*i,n[1]*i,n[2]*i]}function ge(n){var i=ve(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=i,n[1]/=i,n[2]/=i}function ce(n){return B(n[0])<=Y?n[0]:xe(n[0])*((B(n[0])+Y)%be-Y)}function Ue(n,i){var t=ce(i),a=i[1],r=N(a),o=[N(t),-L(t),0],s=0,c=0,u=new k;1===r?a=re+U:-1===r&&(a=-re-U);for(var g=0,l=n.length;g<l;++g)if(h=(p=n[g]).length)for(var p,h,v=p[h-1],x=ce(v),O=v[1]/2+Rt,S=N(O),q=L(O),E=0;E<h;++E,x=D,S=J,q=te,v=Z){var Z=p[E],D=ce(Z),R=Z[1]/2+Rt,J=N(R),te=L(R),Q=D-x,W=Q>=0?1:-1,se=W*Q,F=se>Y,we=S*J;if(u.add(qe(we*W*N(se),q*te+we*L(se))),s+=F?Q+W*be:Q,F^x>=t^D>=t){var de=ue(ae(v),ae(Z));ge(de);var ne=ue(o,de);ge(ne);var C=(F^Q>=0?-1:1)*d(ne[2]);(a>C||a===C&&(de[0]||de[1]))&&(c+=F^Q>=0?1:-1)}}return(s<-U||s<U&&u<-1e-12)^1&c}function Ze(n){return Array.from(function*Te(n){for(const i of n)yield*i}(n))}function De(n,i,t,a){return function(r){var g,l,p,o=i(r),s=b(),c=i(s),u=!1,h={point:v,lineStart:O,lineEnd:S,polygonStart:function(){h.point=q,h.lineStart=E,h.lineEnd=Z,l=[],g=[]},polygonEnd:function(){h.point=v,h.lineStart=O,h.lineEnd=S,l=Ze(l);var D=Ue(g,a);l.length?(u||(r.polygonStart(),u=!0),w(l,Ye,D,t,r)):D&&(u||(r.polygonStart(),u=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),l=g=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function v(D,R){n(D,R)&&r.point(D,R)}function x(D,R){o.point(D,R)}function O(){h.point=x,o.lineStart()}function S(){h.point=v,o.lineEnd()}function q(D,R){p.push([D,R]),c.point(D,R)}function E(){c.lineStart(),p=[]}function Z(){q(p[0][0],p[0][1]),c.lineEnd();var J,Q,W,se,D=c.clean(),R=s.result(),te=R.length;if(p.pop(),g.push(p),p=null,te){if(1&D){if((Q=(W=R[0]).length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),J=0;J<Q;++J)r.point((se=W[J])[0],se[1]);r.lineEnd()}return}te>1&&2&D&&R.push(R.pop().concat(R.shift())),l.push(R.filter(Le))}}return h}}function Le(n){return n.length>1}function Ye(n,i){return((n=n.x)[0]<0?n[1]-re-U:re-n[1])-((i=i.x)[0]<0?i[1]-re-U:re-i[1])}const st=De(function(){return!0},function Bt(n){var r,i=NaN,t=NaN,a=NaN;return{lineStart:function(){n.lineStart(),r=1},point:function(o,s){var c=o>0?Y:-Y,u=B(o-i);B(u-Y)<U?(n.point(i,t=(t+s)/2>0?re:-re),n.point(a,t),n.lineEnd(),n.lineStart(),n.point(c,t),n.point(o,t),r=0):a!==c&&u>=Y&&(B(i-a)<U&&(i-=a*U),B(o-c)<U&&(o-=c*U),t=function ct(n,i,t,a){var r,o,s=N(n-t);return B(s)>U?Xe((N(i)*(o=L(a))*N(t)-N(a)*(r=L(i))*N(n))/(r*o*s)):(i+a)/2}(i,t,o,s),n.point(a,t),n.lineEnd(),n.lineStart(),n.point(c,t),r=0),n.point(i=o,t=s),a=c},lineEnd:function(){n.lineEnd(),i=t=NaN},clean:function(){return 2-r}}},function Ge(n,i,t,a){var r;if(null==n)a.point(-Y,r=t*re),a.point(0,r),a.point(Y,r),a.point(Y,0),a.point(Y,-r),a.point(0,-r),a.point(-Y,-r),a.point(-Y,0),a.point(-Y,r);else if(B(n[0]-i[0])>U){var o=n[0]<i[0]?Y:-Y;a.point(-o,r=t*o/2),a.point(0,r),a.point(o,r)}else a.point(i[0],i[1])},[-Y,-re]);function nt(n,i){(i=ae(i))[0]-=n,ge(i);var t=vn(-i[1]);return((-i[2]<0?-t:t)+be-U)%be}function $e(n){var i=L(n),t=6*$,a=i>0,r=B(i)>U;function s(l,p){return L(l)*L(p)>i}function u(l,p,h){var O=[1,0,0],S=ue(ae(l),ae(p)),q=j(S,S),E=S[0],Z=q-E*E;if(!Z)return!h&&l;var D=i*q/Z,R=-i*E/Z,J=ue(O,S),te=pe(O,D);he(te,pe(S,R));var W=J,se=j(te,W),F=j(W,W),we=se*se-F*(j(te,te)-1);if(!(we<0)){var de=ve(we),ne=pe(W,(-se-de)/F);if(he(ne,te),ne=X(ne),!h)return ne;var Ne,C=l[0],G=p[0],_e=l[1],Se=p[1];G<C&&(Ne=C,C=G,G=Ne);var fn=G-C,We=B(fn-Y)<U;if(!We&&Se<_e&&(Ne=_e,_e=Se,Se=Ne),We||fn<U?We?_e+Se>0^ne[1]<(B(ne[0]-C)<U?_e:Se):_e<=ne[1]&&ne[1]<=Se:fn>Y^(C<=ne[0]&&ne[0]<=G)){var Ke=pe(W,(-se+de)/F);return he(Ke,te),[ne,X(Ke)]}}}function g(l,p){var h=a?n:Y-n,v=0;return l<-h?v|=1:l>h&&(v|=2),p<-h?v|=4:p>h&&(v|=8),v}return De(s,function c(l){var p,h,v,x,O;return{lineStart:function(){x=v=!1,O=1},point:function(S,q){var Z,E=[S,q],D=s(S,q),R=a?D?0:g(S,q):D?g(S+(S<0?Y:-Y),q):0;if(!p&&(x=v=D)&&l.lineStart(),D!==v&&(!(Z=u(p,E))||T(p,Z)||T(E,Z))&&(E[2]=1),D!==v)O=0,D?(l.lineStart(),Z=u(E,p),l.point(Z[0],Z[1])):(Z=u(p,E),l.point(Z[0],Z[1],2),l.lineEnd()),p=Z;else if(r&&p&&a^D){var J;!(R&h)&&(J=u(E,p,!0))&&(O=0,a?(l.lineStart(),l.point(J[0][0],J[0][1]),l.point(J[1][0],J[1][1]),l.lineEnd()):(l.point(J[1][0],J[1][1]),l.lineEnd(),l.lineStart(),l.point(J[0][0],J[0][1],3)))}D&&(!p||!T(p,E))&&l.point(E[0],E[1]),p=E,v=D,h=R},lineEnd:function(){v&&l.lineEnd(),p=null},clean:function(){return O|(x&&v)<<1}}},function o(l,p,h,v){!function St(n,i,t,a,r,o){if(t){var s=L(i),c=N(i),u=a*t;null==r?(r=i+a*be,o=i-u/2):(r=nt(s,r),o=nt(s,o),(a>0?r<o:r>o)&&(r+=a*be));for(var g,l=r;a>0?l>o:l<o;l-=u)g=X([s,-c*L(l),-c*N(l)]),n.point(g[0],g[1])}}(v,n,t,h,l,p)},a?[0,-n]:[-Y,n-Y])}var lt=1e9,bn=-lt;function br(n,i,t,a){function r(g,l){return n<=g&&g<=t&&i<=l&&l<=a}function o(g,l,p,h){var v=0,x=0;if(null==g||(v=s(g,p))!==(x=s(l,p))||u(g,l)<0^p>0)do{h.point(0===v||3===v?n:t,v>1?a:i)}while((v=(v+p+4)%4)!==x);else h.point(l[0],l[1])}function s(g,l){return B(g[0]-n)<U?l>0?0:3:B(g[0]-t)<U?l>0?2:1:B(g[1]-i)<U?l>0?1:0:l>0?3:2}function c(g,l){return u(g.x,l.x)}function u(g,l){var p=s(g,1),h=s(l,1);return p!==h?p-h:0===p?l[1]-g[1]:1===p?g[0]-l[0]:2===p?g[1]-l[1]:l[0]-g[0]}return function(g){var h,v,x,O,S,q,E,Z,D,R,J,l=g,p=b(),te={point:Q,lineStart:function we(){te.point=ne,v&&v.push(x=[]),R=!0,D=!1,E=Z=NaN},lineEnd:function de(){h&&(ne(O,S),q&&D&&p.rejoin(),h.push(p.result())),te.point=Q,D&&l.lineEnd()},polygonStart:function se(){l=p,h=[],v=[],J=!0},polygonEnd:function F(){var C=function W(){for(var C=0,G=0,_e=v.length;G<_e;++G)for(var vt,Ke,Se=v[G],Ne=1,fn=Se.length,We=Se[0],Qn=We[0],It=We[1];Ne<fn;++Ne)vt=Qn,Ke=It,Qn=(We=Se[Ne])[0],It=We[1],Ke<=a?It>a&&(Qn-vt)*(a-Ke)>(It-Ke)*(n-vt)&&++C:It<=a&&(Qn-vt)*(a-Ke)<(It-Ke)*(n-vt)&&--C;return C}(),G=J&&C,_e=(h=Ze(h)).length;(G||_e)&&(g.polygonStart(),G&&(g.lineStart(),o(null,null,1,g),g.lineEnd()),_e&&w(h,c,C,o,g),g.polygonEnd()),l=g,h=v=x=null}};function Q(C,G){r(C,G)&&l.point(C,G)}function ne(C,G){var _e=r(C,G);if(v&&x.push([C,G]),R)O=C,S=G,q=_e,R=!1,_e&&(l.lineStart(),l.point(C,G));else if(_e&&D)l.point(C,G);else{var Se=[E=Math.max(bn,Math.min(lt,E)),Z=Math.max(bn,Math.min(lt,Z))],Ne=[C=Math.max(bn,Math.min(lt,C)),G=Math.max(bn,Math.min(lt,G))];!function $t(n,i,t,a,r,o){var x,s=n[0],c=n[1],l=0,p=1,h=i[0]-s,v=i[1]-c;if(x=t-s,h||!(x>0)){if(x/=h,h<0){if(x<l)return;x<p&&(p=x)}else if(h>0){if(x>p)return;x>l&&(l=x)}if(x=r-s,h||!(x<0)){if(x/=h,h<0){if(x>p)return;x>l&&(l=x)}else if(h>0){if(x<l)return;x<p&&(p=x)}if(x=a-c,v||!(x>0)){if(x/=v,v<0){if(x<l)return;x<p&&(p=x)}else if(v>0){if(x>p)return;x>l&&(l=x)}if(x=o-c,v||!(x<0)){if(x/=v,v<0){if(x>p)return;x>l&&(l=x)}else if(v>0){if(x<l)return;x<p&&(p=x)}return l>0&&(n[0]=s+l*h,n[1]=c+l*v),p<1&&(i[0]=s+p*h,i[1]=c+p*v),!0}}}}}(Se,Ne,n,i,t,a)?_e&&(l.lineStart(),l.point(C,G),J=!1):(D||(l.lineStart(),l.point(Se[0],Se[1])),l.point(Ne[0],Ne[1]),_e||l.lineEnd(),J=!1)}E=C,Z=G,D=_e}return te}}function ri(n,i){function t(a,r){return a=n(a,r),i(a[0],a[1])}return n.invert&&i.invert&&(t.invert=function(a,r){return(a=i.invert(a,r))&&n.invert(a[0],a[1])}),t}const oi=n=>n;function si(n,i){return B(n)>Y&&(n-=Math.round(n/be)*be),[n,i]}function Ii(n,i,t){return(n%=be)?i||t?ri(ji(n),Ri(i,t)):ji(n):i||t?Ri(i,t):si}function Yi(n){return function(i,t){return B(i+=n)>Y&&(i-=Math.round(i/be)*be),[i,t]}}function ji(n){var i=Yi(n);return i.invert=Yi(-n),i}function Ri(n,i){var t=L(n),a=N(n),r=L(i),o=N(i);function s(c,u){var g=L(u),l=L(c)*g,p=N(c)*g,h=N(u),v=h*t+l*a;return[qe(p*r-v*o,l*t-h*a),d(v*r+p*o)]}return s.invert=function(c,u){var g=L(u),l=L(c)*g,p=N(c)*g,h=N(u),v=h*r-p*o;return[qe(p*r+h*o,l*t+v*a),d(v*t-l*a)]},s}function xn(n){return function(i){var t=new ci;for(var a in n)t[a]=n[a];return t.stream=i,t}}function ci(){}function yn(n,i){n&&Hi.hasOwnProperty(n.type)&&Hi[n.type](n,i)}si.invert=si,ci.prototype={constructor:ci,point:function(n,i){this.stream.point(n,i)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ji={Feature:function(n,i){yn(n.geometry,i)},FeatureCollection:function(n,i){for(var t=n.features,a=-1,r=t.length;++a<r;)yn(t[a].geometry,i)}},Hi={Sphere:function(n,i){i.sphere()},Point:function(n,i){i.point((n=n.coordinates)[0],n[1],n[2])},MultiPoint:function(n,i){for(var t=n.coordinates,a=-1,r=t.length;++a<r;)i.point((n=t[a])[0],n[1],n[2])},LineString:function(n,i){li(n.coordinates,i,0)},MultiLineString:function(n,i){for(var t=n.coordinates,a=-1,r=t.length;++a<r;)li(t[a],i,0)},Polygon:function(n,i){Bi(n.coordinates,i)},MultiPolygon:function(n,i){for(var t=n.coordinates,a=-1,r=t.length;++a<r;)Bi(t[a],i)},GeometryCollection:function(n,i){for(var t=n.geometries,a=-1,r=t.length;++a<r;)yn(t[a],i)}};function li(n,i,t){var o,a=-1,r=n.length-t;for(i.lineStart();++a<r;)i.point((o=n[a])[0],o[1],o[2]);i.lineEnd()}function Bi(n,i){var t=-1,a=n.length;for(i.polygonStart();++t<a;)li(n[t],i,1);i.polygonEnd()}function dt(n,i){n&&Ji.hasOwnProperty(n.type)?Ji[n.type](n,i):yn(n,i)}var Mt=1/0,Cn=Mt,zt=-Mt,Tn=zt;const Zn={point:function Cr(n,i){n<Mt&&(Mt=n),n>zt&&(zt=n),i<Cn&&(Cn=i),i>Tn&&(Tn=i)},lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y,result:function(){var n=[[Mt,Cn],[zt,Tn]];return zt=Tn=-(Cn=Mt=1/0),n}};function di(n,i,t){var a=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=a&&n.clipExtent(null),dt(t,n.stream(Zn)),i(Zn.result()),null!=a&&n.clipExtent(a),n}function fi(n,i,t){return di(n,function(a){var r=i[1][0]-i[0][0],o=i[1][1]-i[0][1],s=Math.min(r/(a[1][0]-a[0][0]),o/(a[1][1]-a[0][1])),c=+i[0][0]+(r-s*(a[1][0]+a[0][0]))/2,u=+i[0][1]+(o-s*(a[1][1]+a[0][1]))/2;n.scale(150*s).translate([c,u])},t)}function Gi(n,i,t){return fi(n,[[0,0],i],t)}function $i(n,i,t){return di(n,function(a){var r=+i,o=r/(a[1][0]-a[0][0]),s=(r-o*(a[1][0]+a[0][0]))/2,c=-o*a[0][1];n.scale(150*o).translate([s,c])},t)}function zi(n,i,t){return di(n,function(a){var r=+i,o=r/(a[1][1]-a[0][1]),s=-o*a[0][0],c=(r-o*(a[1][1]+a[0][1]))/2;n.scale(150*o).translate([s,c])},t)}var Tr=L(30*$);function Wi(n,i){return+i?function Ar(n,i){function t(a,r,o,s,c,u,g,l,p,h,v,x,O,S){var q=g-a,E=l-r,Z=q*q+E*E;if(Z>4*i&&O--){var D=s+h,R=c+v,J=u+x,te=ve(D*D+R*R+J*J),Q=d(J/=te),W=B(B(J)-1)<U||B(o-p)<U?(o+p)/2:qe(R,D),se=n(W,Q),F=se[0],we=se[1],de=F-a,ne=we-r,C=E*de-q*ne;(C*C/Z>i||B((q*de+E*ne)/Z-.5)>.3||s*h+c*v+u*x<Tr)&&(t(a,r,o,s,c,u,F,we,W,D/=te,R/=te,J,O,S),S.point(F,we),t(F,we,W,D,R,J,g,l,p,h,v,x,O,S))}}return function(a){var r,o,s,c,u,g,l,p,h,v,x,O,S={point:q,lineStart:E,lineEnd:D,polygonStart:function(){a.polygonStart(),S.lineStart=R},polygonEnd:function(){a.polygonEnd(),S.lineStart=E}};function q(Q,W){Q=n(Q,W),a.point(Q[0],Q[1])}function E(){p=NaN,S.point=Z,a.lineStart()}function Z(Q,W){var se=ae([Q,W]),F=n(Q,W);t(p,h,l,v,x,O,p=F[0],h=F[1],l=Q,v=se[0],x=se[1],O=se[2],16,a),a.point(p,h)}function D(){S.point=q,a.lineEnd()}function R(){E(),S.point=J,S.lineEnd=te}function J(Q,W){Z(r=Q,W),o=p,s=h,c=v,u=x,g=O,S.point=Z}function te(){t(p,h,l,v,x,O,o,s,r,c,u,g,16,a),S.lineEnd=D,D()}return S}}(n,i):function Zr(n){return xn({point:function(i,t){i=n(i,t),this.stream.point(i[0],i[1])}})}(n)}var wr=xn({point:function(n,i){this.stream.point(n*$,i*$)}});function Ki(n,i,t,a,r,o){if(!o)return function Mr(n,i,t,a,r){function o(s,c){return[i+n*(s*=a),t-n*(c*=r)]}return o.invert=function(s,c){return[(s-i)/n*a,(t-c)/n*r]},o}(n,i,t,a,r);var s=L(o),c=N(o),u=s*n,g=c*n,l=s/n,p=c/n,h=(c*t-s*i)/n,v=(c*i+s*t)/n;function x(O,S){return[u*(O*=a)-g*(S*=r)+i,t-g*O-u*S]}return x.invert=function(O,S){return[a*(l*O-p*S+h),r*(v-p*O-l*S)]},x}function ze(n){return Vi(function(){return n})()}function Vi(n){var i,l,q,E,Z,J,te,Q,W,se,t=150,a=480,r=250,o=0,s=0,c=0,u=0,g=0,p=0,h=1,v=1,x=null,O=st,S=null,D=oi,R=.5;function F(C){return Q(C[0]*$,C[1]*$)}function we(C){return(C=Q.invert(C[0],C[1]))&&[C[0]*fe,C[1]*fe]}function de(){var C=Ki(t,0,0,h,v,p).apply(null,i(o,s)),G=Ki(t,a-C[0],r-C[1],h,v,p);return l=Ii(c,u,g),te=ri(i,G),Q=ri(l,te),J=Wi(te,R),ne()}function ne(){return W=se=null,F}return F.stream=function(C){return W&&se===C?W:W=wr(function Sr(n){return xn({point:function(i,t){var a=n(i,t);return this.stream.point(a[0],a[1])}})}(l)(O(J(D(se=C)))))},F.preclip=function(C){return arguments.length?(O=C,x=void 0,ne()):O},F.postclip=function(C){return arguments.length?(D=C,S=q=E=Z=null,ne()):D},F.clipAngle=function(C){return arguments.length?(O=+C?$e(x=C*$):(x=null,st),ne()):x*fe},F.clipExtent=function(C){return arguments.length?(D=null==C?(S=q=E=Z=null,oi):br(S=+C[0][0],q=+C[0][1],E=+C[1][0],Z=+C[1][1]),ne()):null==S?null:[[S,q],[E,Z]]},F.scale=function(C){return arguments.length?(t=+C,de()):t},F.translate=function(C){return arguments.length?(a=+C[0],r=+C[1],de()):[a,r]},F.center=function(C){return arguments.length?(o=C[0]%360*$,s=C[1]%360*$,de()):[o*fe,s*fe]},F.rotate=function(C){return arguments.length?(c=C[0]%360*$,u=C[1]%360*$,g=C.length>2?C[2]%360*$:0,de()):[c*fe,u*fe,g*fe]},F.angle=function(C){return arguments.length?(p=C%360*$,de()):p*fe},F.reflectX=function(C){return arguments.length?(h=C?-1:1,de()):h<0},F.reflectY=function(C){return arguments.length?(v=C?-1:1,de()):v<0},F.precision=function(C){return arguments.length?(J=Wi(te,R=C*C),ne()):ve(R)},F.fitExtent=function(C,G){return fi(F,C,G)},F.fitSize=function(C,G){return Gi(F,C,G)},F.fitWidth=function(C,G){return $i(F,C,G)},F.fitHeight=function(C,G){return zi(F,C,G)},function(){return i=n.apply(this,arguments),F.invert=i.invert&&we,de()}}var Xi=m(function(n){return ve(2/(1+n))});Xi.invert=_(function(n){return 2*d(n/2)});var ea=m(function(n){return(n=vn(n))&&n/N(n)});function ta(n,i){var t=L(i),a=L(n)*t;return[t*N(n)/a,N(i)/a]}function na(n,i){return[L(i)*N(n),N(i)]}function ia(n,i){var t=L(i),a=1+L(n)*t;return[t*N(n)/a,N(i)/a]}ea.invert=_(function(n){return n}),ta.invert=_(Xe),na.invert=_(d),ia.invert=_(function(n){return 2*Xe(n)});var Qt=1.340264,Wt=-.081106,Kt=893e-6,Vt=.003796,An=ve(3)/2;function aa(n,i){var t=d(An*N(i)),a=t*t,r=a*a*a;return[n*L(t)/(An*(Qt+3*Wt*a+r*(7*Kt+9*Vt*a))),t*(Qt+Wt*a+r*(Kt+Vt*a))]}function ui(n){var i=0,t=Y/3,a=Vi(n),r=a(i,t);return r.parallels=function(o){return arguments.length?a(i=o[0]*$,t=o[1]*$):[i*fe,t*fe]},r}function Lr(n,i){var t=N(n),a=(t+N(i))/2;if(B(a)<U)return function Er(n){var i=L(n);function t(a,r){return[a*i,N(r)/i]}return t.invert=function(a,r){return[a/i,d(r*i)]},t}(n);var r=1+t*(2*a-t),o=ve(r)/a;function s(c,u){var g=ve(r-2*a*N(u))/a;return[g*N(c*=a),o-g*L(c)]}return s.invert=function(c,u){var g=o-u,l=qe(c,B(g))*xe(g);return g*a<0&&(l-=Y*xe(c)*xe(g)),[l/a,d((r-(c*c+g*g)*a*a)/(2*a))]},s}function wn(){return ui(Lr).scale(155.424).center([0,33.6442])}function ra(){return wn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Sn(n,i){return[n,At(Ht((re+i)/2))]}function oa(n){var c,u,g,i=ze(n),t=i.center,a=i.scale,r=i.translate,o=i.clipExtent,s=null;function l(){var p=Y*a(),h=i(function xr(n){function i(t){return(t=n(t[0]*$,t[1]*$))[0]*=fe,t[1]*=fe,t}return n=Ii(n[0]*$,n[1]*$,n.length>2?n[2]*$:0),i.invert=function(t){return(t=n.invert(t[0]*$,t[1]*$))[0]*=fe,t[1]*=fe,t},i}(i.rotate()).invert([0,0]));return o(null==s?[[h[0]-p,h[1]-p],[h[0]+p,h[1]+p]]:n===Sn?[[Math.max(h[0]-p,s),c],[Math.min(h[0]+p,u),g]]:[[s,Math.max(h[1]-p,c)],[u,Math.min(h[1]+p,g)]])}return i.scale=function(p){return arguments.length?(a(p),l()):a()},i.translate=function(p){return arguments.length?(r(p),l()):r()},i.center=function(p){return arguments.length?(t(p),l()):t()},i.clipExtent=function(p){return arguments.length?(null==p?s=c=u=g=null:(s=+p[0][0],c=+p[0][1],u=+p[1][0],g=+p[1][1]),l()):null==s?null:[[s,c],[u,g]]},l()}function Mn(n){return Ht((re+n)/2)}function jr(n,i){var t=L(n),a=n===i?N(n):At(t/L(i))/At(Mn(i)/Mn(n)),r=t*wt(Mn(n),a)/a;if(!a)return Sn;function o(s,c){r>0?c<-re+U&&(c=-re+U):c>re-U&&(c=re-U);var u=r/wt(Mn(c),a);return[u*N(a*s),r-u*L(a*s)]}return o.invert=function(s,c){var u=r-c,g=xe(a)*ve(s*s+u*u),l=qe(s,B(u))*xe(u);return u*a<0&&(l-=Y*xe(s)*xe(u)),[l/a,2*Xe(wt(r/g,1/a))-re]},o}function On(n,i){return[n,i]}function Hr(n,i){var t=L(n),a=n===i?N(n):(t-L(i))/(i-n),r=t/a+n;if(B(a)<U)return On;function o(s,c){var u=r-c,g=a*s;return[u*N(g),r-u*L(g)]}return o.invert=function(s,c){var u=r-c,g=qe(s,B(u))*xe(u);return u*a<0&&(g-=Y*xe(s)*xe(u)),[g/a,r-xe(a)*ve(s*s+u*u)]},o}function sa(n,i){return[At(Ht((re+i)/2)),-n]}function ca(n,i){var t=i*i,a=t*t;return[n*(.8707-.131979*t+a*(a*(.003971*t-.001529*a)-.013791)),i*(1.007226+t*(.015085+a*(.028874*t-.044475-.005916*a)))]}aa.invert=function(n,i){for(var s,t=i,a=t*t,r=a*a*a,o=0;o<12&&(r=(a=(t-=s=(t*(Qt+Wt*a+r*(Kt+Vt*a))-i)/(Qt+3*Wt*a+r*(7*Kt+9*Vt*a)))*t)*a*a,!(B(s)<1e-12));++o);return[An*n*(Qt+3*Wt*a+r*(7*Kt+9*Vt*a))/L(t),d(N(t)/An)]},Sn.invert=function(n,i){return[n,2*Xe(Jt(i))-re]},On.invert=On,sa.invert=function(n,i){return[-i,2*Xe(Jt(n))-re]},ca.invert=function(n,i){var r,t=i,a=25;do{var o=t*t,s=o*o;t-=r=(t*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-i)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(B(r)>U&&--a>0);return[n/(.8707+(o=t*t)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),t]};var la,da,gi,mi,pi=new k,hi=new k,it={point:y,lineStart:y,lineEnd:y,polygonStart:function(){it.lineStart=zr,it.lineEnd=Wr},polygonEnd:function(){it.lineStart=it.lineEnd=it.point=y,pi.add(B(hi)),hi=new k},result:function(){var n=pi/2;return pi=new k,n}};function zr(){it.point=Qr}function Qr(n,i){it.point=fa,la=gi=n,da=mi=i}function fa(n,i){hi.add(mi*n-gi*i),gi=n,mi=i}function Wr(){fa(la,da)}const ua=it;var pa,ha,je,Re,_i=0,vi=0,Xt=0,Pn=0,qn=0,Ot=0,bi=0,xi=0,en=0,Fe={point:ft,lineStart:ga,lineEnd:ma,polygonStart:function(){Fe.lineStart=Xr,Fe.lineEnd=eo},polygonEnd:function(){Fe.point=ft,Fe.lineStart=ga,Fe.lineEnd=ma},result:function(){var n=en?[bi/en,xi/en]:Ot?[Pn/Ot,qn/Ot]:Xt?[_i/Xt,vi/Xt]:[NaN,NaN];return _i=vi=Xt=Pn=qn=Ot=bi=xi=en=0,n}};function ft(n,i){_i+=n,vi+=i,++Xt}function ga(){Fe.point=Kr}function Kr(n,i){Fe.point=Vr,ft(je=n,Re=i)}function Vr(n,i){var t=n-je,a=i-Re,r=ve(t*t+a*a);Pn+=r*(je+n)/2,qn+=r*(Re+i)/2,Ot+=r,ft(je=n,Re=i)}function ma(){Fe.point=ft}function Xr(){Fe.point=to}function eo(){_a(pa,ha)}function to(n,i){Fe.point=_a,ft(pa=je=n,ha=Re=i)}function _a(n,i){var t=n-je,a=i-Re,r=ve(t*t+a*a);Pn+=r*(je+n)/2,qn+=r*(Re+i)/2,Ot+=r,bi+=(r=Re*n-je*i)*(je+n),xi+=r*(Re+i),en+=3*r,ft(je=n,Re=i)}const va=Fe;function ba(n){this._context=n}ba.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(n,i){switch(this._point){case 0:this._context.moveTo(n,i),this._point=1;break;case 1:this._context.lineTo(n,i);break;default:this._context.moveTo(n+this._radius,i),this._context.arc(n,i,this._radius,0,be)}},result:y};var Ci,xa,ya,tn,nn,yi=new k,Un={point:y,lineStart:function(){Un.point=no},lineEnd:function(){Ci&&Ca(xa,ya),Un.point=y},polygonStart:function(){Ci=!0},polygonEnd:function(){Ci=null},result:function(){var n=+yi;return yi=new k,n}};function no(n,i){Un.point=Ca,xa=tn=n,ya=nn=i}function Ca(n,i){yi.add(ve((tn-=n)*tn+(nn-=i)*nn)),tn=n,nn=i}const Ta=Un;let Za,Dn,Aa,wa;class Sa{constructor(i){this._append=null==i?Ma:function io(n){const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);if(i>15)return Ma;if(i!==Za){const t=10**i;Za=i,Dn=function(r){let o=1;this._+=r[0];for(const s=r.length;o<s;++o)this._+=Math.round(arguments[o]*t)/t+r[o]}}return Dn}(i),this._radius=4.5,this._=""}pointRadius(i){return this._radius=+i,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(i,t){switch(this._point){case 0:this._append`M${i},${t}`,this._point=1;break;case 1:this._append`L${i},${t}`;break;default:if(this._append`M${i},${t}`,this._radius!==Aa||this._append!==Dn){const a=this._radius,r=this._;this._="",this._append`m0,${a}a${a},${a} 0 1,1 0,${-2*a}a${a},${a} 0 1,1 0,${2*a}z`,Aa=a,Dn=this._append,wa=this._,this._=r}this._+=wa}}result(){const i=this._;return this._="",i.length?i:null}}function Ma(n){let i=1;this._+=n[0];for(const t=n.length;i<t;++i)this._+=arguments[i]+n[i]}function Oa(n,i){let r,o,t=3,a=4.5;function s(c){return c&&("function"==typeof a&&o.pointRadius(+a.apply(this,arguments)),dt(c,r(o))),o.result()}return s.area=function(c){return dt(c,r(ua)),ua.result()},s.measure=function(c){return dt(c,r(Ta)),Ta.result()},s.bounds=function(c){return dt(c,r(Zn)),Zn.result()},s.centroid=function(c){return dt(c,r(va)),va.result()},s.projection=function(c){return arguments.length?(r=null==c?(n=null,oi):(n=c).stream,s):n},s.context=function(c){return arguments.length?(o=null==c?(i=null,new Sa(t)):new ba(i=c),"function"!=typeof a&&o.pointRadius(a),s):i},s.pointRadius=function(c){return arguments.length?(a="function"==typeof c?c:(o.pointRadius(+c),+c),s):a},s.digits=function(c){if(!arguments.length)return t;if(null==c)t=null;else{const u=Math.floor(c);if(!(u>=0))throw new RangeError(`invalid digits: ${c}`);t=u}return null===i&&(o=new Sa(t)),s},s.projection(n).digits(t).context(i)}var Ti,Zi,Nn,kn,Pt={sphere:y,point:y,lineStart:function ao(){Pt.point=oo,Pt.lineEnd=ro},lineEnd:y,polygonStart:y,polygonEnd:y};function ro(){Pt.point=Pt.lineEnd=y}function oo(n,i){Zi=n*=$,Nn=N(i*=$),kn=L(i),Pt.point=so}function so(n,i){n*=$;var t=N(i*=$),a=L(i),r=B(n-Zi),o=L(r),c=a*N(r),u=kn*t-Nn*a*o,g=Nn*t+kn*a*o;Ti.add(qe(ve(c*c+u*u),g)),Zi=n,Nn=t,kn=a}var Ai=[null,null],lo={type:"LineString",coordinates:Ai};function wi(n,i){return Ai[0]=n,Ai[1]=i,function co(n){return Ti=new k,dt(n,Pt),+Ti}(lo)}var Pa={Feature:function(n,i){return En(n.geometry,i)},FeatureCollection:function(n,i){for(var t=n.features,a=-1,r=t.length;++a<r;)if(En(t[a].geometry,i))return!0;return!1}},qa={Sphere:function(){return!0},Point:function(n,i){return Ua(n.coordinates,i)},MultiPoint:function(n,i){for(var t=n.coordinates,a=-1,r=t.length;++a<r;)if(Ua(t[a],i))return!0;return!1},LineString:function(n,i){return Da(n.coordinates,i)},MultiLineString:function(n,i){for(var t=n.coordinates,a=-1,r=t.length;++a<r;)if(Da(t[a],i))return!0;return!1},Polygon:function(n,i){return Na(n.coordinates,i)},MultiPolygon:function(n,i){for(var t=n.coordinates,a=-1,r=t.length;++a<r;)if(Na(t[a],i))return!0;return!1},GeometryCollection:function(n,i){for(var t=n.geometries,a=-1,r=t.length;++a<r;)if(En(t[a],i))return!0;return!1}};function En(n,i){return!(!n||!qa.hasOwnProperty(n.type))&&qa[n.type](n,i)}function Ua(n,i){return 0===wi(n,i)}function Da(n,i){for(var t,a,r,o=0,s=n.length;o<s;o++){if(0===(a=wi(n[o],i))||o>0&&(r=wi(n[o],n[o-1]))>0&&t<=r&&a<=r&&(t+a-r)*(1-Math.pow((t-a)/r,2))<1e-12*r)return!0;t=a}return!1}function Na(n,i){return!!Ue(n.map(fo),ka(i))}function fo(n){return(n=n.map(ka)).pop(),n}function ka(n){return[n[0]*$,n[1]*$]}function qt(n,i,t){n=+n,i=+i,t=(r=arguments.length)<2?(i=n,n=0,1):r<3?1:+t;for(var a=-1,r=0|Math.max(0,Math.ceil((i-n)/t)),o=new Array(r);++a<r;)o[a]=n+a*t;return o}function Ea(n,i,t){var a=qt(n,i-U,t).concat(i);return function(r){return a.map(function(o){return[r,o]})}}function La(n,i,t){var a=qt(n,i-U,t).concat(i);return function(r){return a.map(function(o){return[o,r]})}}function Fa(){var n,i,t,a,r,o,s,c,h,v,x,O,u=10,g=u,l=90,p=360,S=2.5;function q(){return{type:"MultiLineString",coordinates:E()}}function E(){return qt(et(a/l)*l,t,l).map(x).concat(qt(et(c/p)*p,s,p).map(O)).concat(qt(et(i/u)*u,n,u).filter(function(Z){return B(Z%l)>U}).map(h)).concat(qt(et(o/g)*g,r,g).filter(function(Z){return B(Z%p)>U}).map(v))}return q.lines=function(){return E().map(function(Z){return{type:"LineString",coordinates:Z}})},q.outline=function(){return{type:"Polygon",coordinates:[x(a).concat(O(s).slice(1),x(t).reverse().slice(1),O(c).reverse().slice(1))]}},q.extent=function(Z){return arguments.length?q.extentMajor(Z).extentMinor(Z):q.extentMinor()},q.extentMajor=function(Z){return arguments.length?(c=+Z[0][1],s=+Z[1][1],(a=+Z[0][0])>(t=+Z[1][0])&&(Z=a,a=t,t=Z),c>s&&(Z=c,c=s,s=Z),q.precision(S)):[[a,c],[t,s]]},q.extentMinor=function(Z){return arguments.length?(o=+Z[0][1],r=+Z[1][1],(i=+Z[0][0])>(n=+Z[1][0])&&(Z=i,i=n,n=Z),o>r&&(Z=o,o=r,r=Z),q.precision(S)):[[i,o],[n,r]]},q.step=function(Z){return arguments.length?q.stepMajor(Z).stepMinor(Z):q.stepMinor()},q.stepMajor=function(Z){return arguments.length?(l=+Z[0],p=+Z[1],q):[l,p]},q.stepMinor=function(Z){return arguments.length?(u=+Z[0],g=+Z[1],q):[u,g]},q.precision=function(Z){return arguments.length?(S=+Z,h=Ea(o,r,90),v=La(i,n,S),x=Ea(c,s,90),O=La(a,t,S),q):S},q.extentMajor([[-180,-90+U],[180,90-U]]).extentMinor([[-180,-80-U],[180,80+U]])}var me=M(1086);function z(n){for(var i=n.length/6|0,t=new Array(i),a=0;a<i;)t[a]="#"+n.slice(6*a,6*++a);return t}function Ln(n,i,t){n.prototype=i.prototype=t,t.constructor=n}function Si(n,i){var t=Object.create(n.prototype);for(var a in i)t[a]=i[a];return t}function Ut(){}var Dt=1/.7,Nt="\\s*([+-]?\\d+)\\s*",an="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ho=/^#([0-9a-f]{3,8})$/,go=new RegExp(`^rgb\\(${Nt},${Nt},${Nt}\\)$`),mo=new RegExp(`^rgb\\(${Je},${Je},${Je}\\)$`),_o=new RegExp(`^rgba\\(${Nt},${Nt},${Nt},${an}\\)$`),vo=new RegExp(`^rgba\\(${Je},${Je},${Je},${an}\\)$`),bo=new RegExp(`^hsl\\(${an},${Je},${Je}\\)$`),xo=new RegExp(`^hsla\\(${an},${Je},${Je},${an}\\)$`),Ia={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ya(){return this.rgb().formatHex()}function ja(){return this.rgb().formatRgb()}function Mi(n){var i,t;return n=(n+"").trim().toLowerCase(),(i=ho.exec(n))?(t=i[1].length,i=parseInt(i[1],16),6===t?Ra(i):3===t?new ye(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===t?Fn(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===t?Fn(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=go.exec(n))?new ye(i[1],i[2],i[3],1):(i=mo.exec(n))?new ye(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=_o.exec(n))?Fn(i[1],i[2],i[3],i[4]):(i=vo.exec(n))?Fn(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=bo.exec(n))?Ga(i[1],i[2]/100,i[3]/100,1):(i=xo.exec(n))?Ga(i[1],i[2]/100,i[3]/100,i[4]):Ia.hasOwnProperty(n)?Ra(Ia[n]):"transparent"===n?new ye(NaN,NaN,NaN,0):null}function Ra(n){return new ye(n>>16&255,n>>8&255,255&n,1)}function Fn(n,i,t,a){return a<=0&&(n=i=t=NaN),new ye(n,i,t,a)}function Ja(n){return n instanceof Ut||(n=Mi(n)),n?new ye((n=n.rgb()).r,n.g,n.b,n.opacity):new ye}function rn(n,i,t,a){return 1===arguments.length?Ja(n):new ye(n,i,t,a??1)}function ye(n,i,t,a){this.r=+n,this.g=+i,this.b=+t,this.opacity=+a}function Ha(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}`}function Ba(){const n=In(this.opacity);return`${1===n?"rgb(":"rgba("}${pt(this.r)}, ${pt(this.g)}, ${pt(this.b)}${1===n?")":`, ${n})`}`}function In(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function pt(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function ht(n){return((n=pt(n))<16?"0":"")+n.toString(16)}function Ga(n,i,t,a){return a<=0?n=i=t=NaN:t<=0||t>=1?n=i=NaN:i<=0&&(n=NaN),new Ie(n,i,t,a)}function $a(n){if(n instanceof Ie)return new Ie(n.h,n.s,n.l,n.opacity);if(n instanceof Ut||(n=Mi(n)),!n)return new Ie;if(n instanceof Ie)return n;var i=(n=n.rgb()).r/255,t=n.g/255,a=n.b/255,r=Math.min(i,t,a),o=Math.max(i,t,a),s=NaN,c=o-r,u=(o+r)/2;return c?(s=i===o?(t-a)/c+6*(t<a):t===o?(a-i)/c+2:(i-t)/c+4,c/=u<.5?o+r:2-o-r,s*=60):c=u>0&&u<1?0:s,new Ie(s,c,u,n.opacity)}function Ie(n,i,t,a){this.h=+n,this.s=+i,this.l=+t,this.opacity=+a}function za(n){return(n=(n||0)%360)<0?n+360:n}function Yn(n){return Math.max(0,Math.min(1,n||0))}function Oi(n,i,t){return 255*(n<60?i+(t-i)*n/60:n<180?t:n<240?i+(t-i)*(240-n)/60:i)}function Qa(n,i,t,a,r){var o=n*n,s=o*n;return((1-3*n+3*o-s)*i+(4-6*o+3*s)*t+(1+3*n+3*o-3*s)*a+s*r)/6}Ln(Ut,Mi,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Ya,formatHex:Ya,formatHex8:function yo(){return this.rgb().formatHex8()},formatHsl:function Co(){return $a(this).formatHsl()},formatRgb:ja,toString:ja}),Ln(ye,rn,Si(Ut,{brighter(n){return n=null==n?Dt:Math.pow(Dt,n),new ye(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new ye(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ye(pt(this.r),pt(this.g),pt(this.b),In(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ha,formatHex:Ha,formatHex8:function To(){return`#${ht(this.r)}${ht(this.g)}${ht(this.b)}${ht(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ba,toString:Ba})),Ln(Ie,function Zo(n,i,t,a){return 1===arguments.length?$a(n):new Ie(n,i,t,a??1)},Si(Ut,{brighter(n){return n=null==n?Dt:Math.pow(Dt,n),new Ie(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new Ie(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(this.h<0),i=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,a=t+(t<.5?t:1-t)*i,r=2*t-a;return new ye(Oi(n>=240?n-240:n+120,r,a),Oi(n,r,a),Oi(n<120?n+240:n-120,r,a),this.opacity)},clamp(){return new Ie(za(this.h),Yn(this.s),Yn(this.l),In(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=In(this.opacity);return`${1===n?"hsl(":"hsla("}${za(this.h)}, ${100*Yn(this.s)}%, ${100*Yn(this.l)}%${1===n?")":`, ${n})`}`}}));const Pi=n=>()=>n;function Wa(n,i){return function(t){return n+t*i}}function kt(n,i){var t=i-n;return t?Wa(n,t):Pi(isNaN(n)?i:n)}function Ka(n){return function(i){var s,c,t=i.length,a=new Array(t),r=new Array(t),o=new Array(t);for(s=0;s<t;++s)c=rn(i[s]),a[s]=c.r||0,r[s]=c.g||0,o[s]=c.b||0;return a=n(a),r=n(r),o=n(o),c.opacity=1,function(u){return c.r=a(u),c.g=r(u),c.b=o(u),c+""}}}!function n(i){var t=function Oo(n){return 1==(n=+n)?kt:function(i,t){return t-i?function So(n,i,t){return n=Math.pow(n,t),i=Math.pow(i,t)-n,t=1/t,function(a){return Math.pow(n+a*i,t)}}(i,t,n):Pi(isNaN(i)?t:i)}}(i);function a(r,o){var s=t((r=rn(r)).r,(o=rn(o)).r),c=t(r.g,o.g),u=t(r.b,o.b),g=kt(r.opacity,o.opacity);return function(l){return r.r=s(l),r.g=c(l),r.b=u(l),r.opacity=g(l),r+""}}return a.gamma=n,a}(1);var Po=Ka(function Ao(n){var i=n.length-1;return function(t){var a=t<=0?t=0:t>=1?(t=1,i-1):Math.floor(t*i),r=n[a],o=n[a+1];return Qa((t-a/i)*i,a>0?n[a-1]:2*r-o,r,o,a<i-1?n[a+2]:2*o-r)}});Ka(function wo(n){var i=n.length;return function(t){var a=Math.floor(((t%=1)<0?++t:t)*i);return Qa((t-a/i)*i,n[(a+i-1)%i],n[a%i],n[(a+1)%i],n[(a+2)%i])}});const ee=n=>Po(n[n.length-1]),Uo=ee(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(z)),No=ee(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(z)),Eo=ee(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(z)),Fo=ee(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(z)),Yo=Math.PI/180,jo=180/Math.PI;var qi=1.78277,Ui=-.29227,jn=-.90649,on=1.97294,Xa=on*jn,er=on*qi,tr=qi*Ui- -.14861*jn;function Ro(n){if(n instanceof gt)return new gt(n.h,n.s,n.l,n.opacity);n instanceof ye||(n=Ja(n));var t=n.g/255,a=n.b/255,r=(tr*a+Xa*(n.r/255)-er*t)/(tr+Xa-er),o=a-r,s=(on*(t-r)-Ui*o)/jn,c=Math.sqrt(s*s+o*o)/(on*r*(1-r)),u=c?Math.atan2(s,o)*jo-120:NaN;return new gt(u<0?u+360:u,c,r,n.opacity)}function He(n,i,t,a){return 1===arguments.length?Ro(n):new gt(n,i,t,a??1)}function gt(n,i,t,a){this.h=+n,this.s=+i,this.l=+t,this.opacity=+a}function nr(n){return function i(t){function a(r,o){var s=n((r=He(r)).h,(o=He(o)).h),c=kt(r.s,o.s),u=kt(r.l,o.l),g=kt(r.opacity,o.opacity);return function(l){return r.h=s(l),r.s=c(l),r.l=u(Math.pow(l,t)),r.opacity=g(l),r+""}}return t=+t,a.gamma=i,a}(1)}Ln(gt,He,Si(Ut,{brighter(n){return n=null==n?Dt:Math.pow(Dt,n),new gt(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new gt(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*Yo,i=+this.l,t=isNaN(this.s)?0:this.s*i*(1-i),a=Math.cos(n),r=Math.sin(n);return new ye(255*(i+t*(-.14861*a+qi*r)),255*(i+t*(Ui*a+jn*r)),255*(i+t*(on*a)),this.opacity)}})),nr(function Mo(n,i){var t=i-n;return t?Wa(n,t>180||t<-180?t-360*Math.round(t/360):t):Pi(isNaN(n)?i:n)});var Di=nr(kt),Jo=Di(He(-100,.75,.35),He(80,1.5,.8)),Ho=Di(He(260,.75,.35),He(80,1.5,.8)),Rn=He();const Go=Di(He(300,.5,0),He(-240,.5,1)),zo=ee(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(z)),Wo=ee(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(z)),Vo=ee(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(z));function Jn(n){var i=n.length;return function(t){return n[Math.max(0,Math.min(i-1,Math.floor(t*i)))]}}const Xo=Jn(z("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var es=Jn(z("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ts=Jn(z("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ns=Jn(z("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const as=ee(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(z)),os=ee(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(z)),cs=ee(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(z)),ds=ee(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(z)),us=ee(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(z)),hs=ee(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(z)),ms=ee(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(z)),vs=ee(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(z)),xs=ee(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(z)),Cs=ee(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(z)),Zs=ee(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(z)),ws=ee(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(z)),Ms=ee(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(z)),Ps=ee(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(z)),Us=ee(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(z));var Hn=rn(),Ds=Math.PI/3,Ns=2*Math.PI/3;const Ls=ee(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(z)),Ys=ee(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(z)),Rs=ee(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(z)),Hs=ee(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(z)),Gs=ee(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(z)),sn={geoAzimuthalEqualArea:function Or(){return ze(Xi).scale(124.75).clipAngle(179.999)},geoAzimuthalEquidistant:function Pr(){return ze(ea).scale(79.4188).clipAngle(179.999)},geoGnomonic:function qr(){return ze(ta).scale(144.049).clipAngle(60)},geoOrthographic:function Ur(){return ze(na).scale(249.5).clipAngle(90+U)},geoStereographic:function Dr(){return ze(ia).scale(250).clipAngle(142)},geoEqualEarth:function kr(){return ze(aa).scale(177.158)},geoAlbers:ra,geoAlbersUsa:function Ir(){var n,i,a,o,c,u,t=ra(),r=wn().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=wn().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g={point:function(h,v){u=[h,v]}};function l(h){var v=h[0],x=h[1];return u=null,a.point(v,x),u||(o.point(v,x),u)||(c.point(v,x),u)}function p(){return n=i=null,l}return l.invert=function(h){var v=t.scale(),x=t.translate(),O=(h[0]-x[0])/v,S=(h[1]-x[1])/v;return(S>=.12&&S<.234&&O>=-.425&&O<-.214?r:S>=.166&&S<.234&&O>=-.214&&O<-.115?s:t).invert(h)},l.stream=function(h){return n&&i===h?n:n=function Fr(n){var i=n.length;return{point:function(t,a){for(var r=-1;++r<i;)n[r].point(t,a)},sphere:function(){for(var t=-1;++t<i;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)n[t].polygonEnd()}}}([t.stream(i=h),r.stream(h),s.stream(h)])},l.precision=function(h){return arguments.length?(t.precision(h),r.precision(h),s.precision(h),p()):t.precision()},l.scale=function(h){return arguments.length?(t.scale(h),r.scale(.35*h),s.scale(h),l.translate(t.translate())):t.scale()},l.translate=function(h){if(!arguments.length)return t.translate();var v=t.scale(),x=+h[0],O=+h[1];return a=t.translate(h).clipExtent([[x-.455*v,O-.238*v],[x+.455*v,O+.238*v]]).stream(g),o=r.translate([x-.307*v,O+.201*v]).clipExtent([[x-.425*v+U,O+.12*v+U],[x-.214*v-U,O+.234*v-U]]).stream(g),c=s.translate([x-.205*v,O+.212*v]).clipExtent([[x-.214*v+U,O+.166*v+U],[x-.115*v-U,O+.234*v-U]]).stream(g),p()},l.fitExtent=function(h,v){return fi(l,h,v)},l.fitSize=function(h,v){return Gi(l,h,v)},l.fitWidth=function(h,v){return $i(l,h,v)},l.fitHeight=function(h,v){return zi(l,h,v)},l.scale(1070)},geoConicConformal:function Rr(){return ui(jr).scale(109.5).parallels([30,30])},geoConicEqualArea:wn,geoConicEquidistant:function Br(){return ui(Hr).scale(131.154).center([0,13.9389])},geoEquirectangular:function Jr(){return ze(On).scale(152.63)},geoMercator:function Yr(){return oa(Sn).scale(961/be)},geoTransverseMercator:function Gr(){var n=oa(sa),i=n.center,t=n.rotate;return n.center=function(a){return arguments.length?i([-a[1],a[0]]):[(a=i())[1],-a[0]]},n.rotate=function(a){return arguments.length?t([a[0],a[1],a.length>2?a[2]+90:90]):[(a=t())[0],a[1],a[2]-90]},t([0,0,90]).scale(159.155)},geoNaturalEarth1:function $r(){return ze(ca).scale(175.295)}};Object.keys(sn).forEach(n=>{sn[`${n.charAt(3).toLowerCase()}${n.slice(4)}`]=sn[n]});let Ni=(()=>{class n extends ie.Ci{constructor(t){super(t),this.outlineBounds=null,this.oldChartBounds=null,this.geoPath=Oa()}init(t){t.position="chartArea",super.init(t),this.projection="function"==typeof t.projection?t.projection:(sn[t.projection]||sn.albersUsa)(),this.geoPath.projection(this.projection),this.outlineBounds=null,this.oldChartBounds=null}computeBounds(t){const a=Oa(this.projection.fitWidth(1e3,t)).bounds(t),r=Math.ceil(a[1][1]-a[0][1]),o=Math.ceil(a[1][0]-a[0][0]),s=this.projection.translate();this.outlineBounds={width:o,height:r,aspectRatio:o/r,refScale:this.projection.scale(),refX:s[0],refY:s[1]}}updateBounds(){const t=this.chart.chartArea,a=this.outlineBounds;if(!a)return!1;const r=this.options.padding,o="number"==typeof r?r:r.top,s="number"==typeof r?r:r.left,g=t.right-t.left-s-("number"==typeof r?r:r.right),l=t.bottom-t.top-o-("number"==typeof r?r:r.bottom),p=this.oldChartBounds;this.oldChartBounds={chartWidth:g,chartHeight:l};const h=Math.min(g/a.width,l/a.height),O=.5*(g-a.width*h)+t.left+s,S=.5*(l-a.height*h)+t.top+o,q=this.options;return this.projection.scale(a.refScale*h*q.projectionScale).translate([h*a.refX+O+q.projectionOffset[0],h*a.refY+S+q.projectionOffset[1]]),!p||p.chartWidth!==this.oldChartBounds.chartWidth||p.chartHeight!==this.oldChartBounds.chartHeight}}return n.id="projection",n.defaults={projection:"albersUsa",projectionScale:1,projectionOffset:[0,0],padding:0},n.descriptors={_scriptable:i=>"projection"!==i,_indexable:i=>"projectionOffset"!==i},n})();const Bn={position:"chartArea",property:"value",grid:{z:1,drawOnChartArea:!1},ticks:{z:1},legend:{align:"right",position:"bottom-right",length:100,width:50,margin:8,indicatorWidth:10}};class Et extends ie.f${constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(i){i.position="chartArea",super.init(i),this.axis="r"}parse(i,t){return i&&"number"==typeof i[this.options.property]?i[this.options.property]:super.parse(i,t)}isHorizontal(){return"top"===this.options.legend.align||"bottom"===this.options.legend.align}_getNormalizedValue(i){return null==i||Number.isNaN(i)?null:(i-this._startValue)/this._valueRange}update(i,t,a){const r=Math.min(t,this.bottom??Number.POSITIVE_INFINITY),o=Math.min(i,this.right??Number.POSITIVE_INFINITY),s=this.options.legend,c=this.isHorizontal(),u=(v,x)=>v<1?x*v:v,g=Math.min(o,u(c?s.length:s.width,o))-(c?0:s.indicatorWidth),l=Math.min(r,u(c?s.width:s.length,r))-(c?s.indicatorWidth:0);this.legendSize={w:g,h:l},this.bottom=l,this.height=l,this.right=g,this.width=g;const p=this.options.position;this.options.position=this.options.legend.align;const h=super.update(g,l,a);return this.options.position=p,this.height=Math.min(l,this.height),this.width=Math.min(g,this.width),h}_computeLabelArea(){}draw(i){if(!this._isVisible())return;const t=function zs(n,i,t,a,r){const{indicatorWidth:o,align:s,position:c}=i,u="top"===s||"bottom"===s,g=("left"===s?r.w:t)+(u?o:0),l=("top"===s?r.h:a)+(u?0:o),p=function $s(n){const{indicatorWidth:i,align:t,margin:a}=n;return{left:("number"==typeof a?a:a.left)+("right"===t?i:0),top:("number"==typeof a?a:a.top)+("bottom"===t?i:0),right:("number"==typeof a?a:a.right)+("left"===t?i:0),bottom:("number"==typeof a?a:a.bottom)+("top"===t?i:0)}}(i);if("string"==typeof c)switch(c){case"top-left":return[p.left,p.top];case"top":return[(n.right-g)/2,p.top];case"left":return[p.left,(n.bottom-l)/2];case"top-right":return[n.right-g-p.right,p.top];case"bottom-right":return[n.right-g-p.right,n.bottom-l-p.bottom];case"bottom":return[(n.right-g)/2,n.bottom-l-p.bottom];case"bottom-left":return[p.left,n.bottom-l-p.bottom];default:return[n.right-g-p.right,(n.bottom-l)/2]}return[c.x,c.y]}(i,this.options.legend,this.width,this.height,this.legendSize),{ctx:a}=this;a.save(),a.translate(t[0],t[1]);const r=this.options.position;this.options.position=this.options.legend.align,super.draw({...i,bottom:this.height+10,right:this.width}),this.options.position=r;const{indicatorWidth:o}=this.options.legend;switch(this.options.legend.align){case"left":a.translate(this.legendSize.w,0);break;case"top":a.translate(0,this.legendSize.h);break;case"bottom":a.translate(0,-o);break;default:a.translate(-o,0)}this._drawIndicator(),a.restore()}_drawIndicator(){}}class ir extends ie.WV{constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(i){Et.prototype.init.call(this,i)}parse(i,t){return Et.prototype.parse.call(this,i,t)}isHorizontal(){return"top"===this.options.legend.align||"bottom"===this.options.legend.align}_getNormalizedValue(i){return null==i||Number.isNaN(i)?null:(Math.log10(i)-this._startValue)/this._valueRange}update(i,t,a){return Et.prototype.update.call(this,i,t,a)}_computeLabelArea(){}draw(i){return Et.prototype.draw.call(this,i)}_drawIndicator(){}}const Qe={interpolateBlues:Uo,interpolateBrBG:No,interpolateBuGn:Eo,interpolateBuPu:Fo,interpolateCividis:function Io(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-n*(35.34-n*(2381.73-n*(6402.7-n*(7024.72-2710.57*n)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+n*(170.73+n*(52.82-n*(131.46-n*(176.58-67.37*n)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+n*(442.36-n*(2482.43-n*(6167.24-n*(6614.94-2475.67*n)))))))+")"},interpolateCool:Ho,interpolateCubehelixDefault:Go,interpolateGnBu:zo,interpolateGreens:Wo,interpolateGreys:Vo,interpolateInferno:ts,interpolateMagma:es,interpolateOrRd:as,interpolateOranges:os,interpolatePRGn:cs,interpolatePiYG:ds,interpolatePlasma:ns,interpolatePuBu:us,interpolatePuBuGn:hs,interpolatePuOr:ms,interpolatePuRd:vs,interpolatePurples:xs,interpolateRainbow:function Bo(n){(n<0||n>1)&&(n-=Math.floor(n));var i=Math.abs(n-.5);return Rn.h=360*n-100,Rn.s=1.5-1.5*i,Rn.l=.8-.9*i,Rn+""},interpolateRdBu:Cs,interpolateRdGy:Zs,interpolateRdPu:ws,interpolateRdYlBu:Ms,interpolateRdYlGn:Ps,interpolateReds:Us,interpolateSinebow:function ks(n){var i;return n=(.5-n)*Math.PI,Hn.r=255*(i=Math.sin(n))*i,Hn.g=255*(i=Math.sin(n+Ds))*i,Hn.b=255*(i=Math.sin(n+Ns))*i,Hn+""},interpolateSpectral:Ls,interpolateTurbo:function Fs(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+n*(1172.33-n*(10793.56-n*(33300.12-n*(38394.49-14825.05*n)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+n*(557.33+n*(1225.33-n*(3574.96-n*(1073.77+707.56*n)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+n*(3211.1-n*(15327.97-n*(27814-n*(22569.18-6838.66*n)))))))+")"},interpolateViridis:Xo,interpolateWarm:Jo,interpolateYlGn:Ys,interpolateYlGnBu:Rs,interpolateYlOrBr:Hs,interpolateYlOrRd:Gs};function ar(n,i){const t=1/i;if(n<=t)return 0;if(n>=1-t)return 1;for(let a=0;a<1;a+=t)if(n<a)return a-t/2;return n}Object.keys(Qe).forEach(n=>{Qe[`${n.charAt(11).toLowerCase()}${n.slice(12)}`]=Qe[n],Qe[n.slice(11)]=Qe[n]});const rr={interpolate:"blues",missing:"transparent",quantize:0};class mt extends Et{get interpolate(){const i=this.options;return i?"function"==typeof i.interpolate?i.interpolate:Qe[i.interpolate]||Qe.blues:t=>`rgb(${t},${t},${t})`}getColorForValue(i){const t=this._getNormalizedValue(i);return null==t||Number.isNaN(t)?this.options.missing:this.getColor(t)}getColor(i){let t=i;return this.options.quantize>0&&(t=ar(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){const{indicatorWidth:i}=this.options.legend,t=this._reversePixels;if(this.isHorizontal()){const a=this.width;if(this.options.quantize>0){const r=a/this.options.quantize,o=t?s=>a-r-s:s=>s;for(let s=0;s<a;s+=r)this.ctx.fillStyle=this.getColor((s+r/2)/a),this.ctx.fillRect(o(s),0,r,i)}else{const r=t?o=>a-1-o:o=>o;for(let o=0;o<a;o+=1)this.ctx.fillStyle=this.getColor((o+.5)/a),this.ctx.fillRect(r(o),0,1,i)}}else{const a=this.height;if(this.options.quantize>0){const r=a/this.options.quantize,o=t?s=>a-r-s:s=>s;for(let s=0;s<a;s+=r)this.ctx.fillStyle=this.getColor((s+r/2)/a),this.ctx.fillRect(0,o(s),i,r)}else{const r=t?o=>a-1-o:o=>o;for(let o=0;o<a;o+=1)this.ctx.fillStyle=this.getColor((o+.5)/a),this.ctx.fillRect(0,r(o),i,1)}}}}mt.id="color",mt.defaults=(0,me.a4)({},[ie.f$.defaults,Bn,rr]),mt.descriptors={_scriptable:n=>"interpolate"!==n,_indexable:!1};class ki extends ir{constructor(){super(...arguments),this.interpolate=i=>`rgb(${i},${i},${i})`}init(i){super.init(i),this.interpolate="function"==typeof i.interpolate?i.interpolate:Qe[i.interpolate]||Qe.blues}getColorForValue(i){return mt.prototype.getColorForValue.call(this,i)}getColor(i){let t=i;return this.options.quantize>0&&(t=ar(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){return mt.prototype._drawIndicator.call(this)}}ki.id="colorLogarithmic",ki.defaults=(0,me.a4)({},[ie.WV.defaults,Bn,rr]),ki.descriptors={_scriptable:n=>"interpolate"!==n,_indexable:!1};const or={missing:1,mode:"area",range:[2,20],legend:{align:"bottom",length:90,width:70,indicatorWidth:42}};class _t extends Et{constructor(){super(...arguments),this._model=null}getSizeForValue(i){const t=this._getNormalizedValue(i);return null==t||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(i){const[t,a]=this.options.range;if("area"===this.options.mode){const o=a*a*Math.PI,s=t*t*Math.PI;return Math.sqrt((i*(o-s)+s)/Math.PI)}return i*(a-t)+t}_drawIndicator(){const{ctx:i}=this,t=this.options.legend.indicatorWidth/2,a=this.isHorizontal(),r=this.ticks,o=this.getLabelItems(),s=o?o.map(c=>({[a?"x":"y"]:c.options.translation[a?0:1]})):r.map((c,u)=>({[a?"x":"y"]:this.getPixelForTick(u)}));if((this._gridLineItems||[]).forEach(c=>{if(i.save(),i.strokeStyle=c.color,i.lineWidth=c.width,i.setLineDash&&(i.setLineDash(c.borderDash),i.lineDashOffset=c.borderDashOffset),i.beginPath(),this.options.grid.drawTicks)switch(this.options.legend.align){case"left":i.moveTo(0,c.ty1),i.lineTo(t,c.ty2);break;case"top":i.moveTo(c.tx1,0),i.lineTo(c.tx2,t);break;case"bottom":i.moveTo(c.tx1,t),i.lineTo(c.tx2,2*t);break;default:i.moveTo(t,c.ty1),i.lineTo(2*t,c.ty2)}i.stroke(),i.restore()}),this._model){const c=this._model;i.strokeStyle=c.borderColor,i.lineWidth=c.borderWidth||0,i.fillStyle=c.backgroundColor}else i.fillStyle="blue";r.forEach((c,u)=>{const g=s[u],l=this.getSizeForValue(c.value),v={pointStyle:"circle",borderWidth:0,...this._model||{},radius:l};(0,me.at)(i,v,a?g.x:t,a?t:g.y)})}}_t.id="size",_t.defaults=(0,me.a4)({},[ie.f$.defaults,Bn,or]),_t.descriptors={_scriptable:!0,_indexable:n=>"range"!==n};class sr extends ir{constructor(){super(...arguments),this._model=null}getSizeForValue(i){const t=this._getNormalizedValue(i);return null==t||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(i){return _t.prototype.getSizeImpl.call(this,i)}_drawIndicator(){_t.prototype._drawIndicator.call(this)}}sr.id="sizeLogarithmic",sr.defaults=(0,me.a4)({},[ie.WV.defaults,Bn,or]);class at extends ie.W_{constructor(){super(...arguments),this.cache=void 0}inRange(i,t){const a=this.getBounds(),r=(Number.isNaN(i)||i>=a.x&&i<=a.x2)&&(Number.isNaN(t)||t>=a.y&&t<=a.y2),o=this.projectionScale.geoPath.projection();if(r&&!Number.isNaN(i)&&!Number.isNaN(t)&&"function"==typeof o.invert){const s=o.invert([i,t]);return null!=s&&function uo(n,i){return(n&&Pa.hasOwnProperty(n.type)?Pa[n.type]:En)(n,i)}(this.feature,s)}return r}inXRange(i){return this.inRange(i,Number.NaN)}inYRange(i){return this.inRange(Number.NaN,i)}getCenterPoint(){if(this.cache&&this.cache.center)return this.cache.center;let i;if(this.center){const t=this.projectionScale.projection([this.center.longitude,this.center.latitude]);i={x:t[0],y:t[1]}}else{const t=this.projectionScale.geoPath.centroid(this.feature);i={x:t[0],y:t[1]}}return this.cache={...this.cache||{},center:i},i}getBounds(){if(this.cache&&this.cache.bounds)return this.cache.bounds;const i=function Qs(n,i){return[[n[0][0]-i,n[0][1]-i],[n[1][0]+i,n[1][1]+i]]}(this.projectionScale.geoPath.bounds(this.feature),this.options.borderWidth/2),t={x:i[0][0],x2:i[1][0],y:i[0][1],y2:i[1][1],width:i[1][0]-i[0][0],height:i[1][1]-i[0][1]};return this.cache={...this.cache||{},bounds:t},t}_drawInCache(i){const t=this.getBounds();if(!Number.isFinite(t.x))return;const a=this.cache&&this.cache.canvas?this.cache.canvas:i.createElement("canvas"),r=Math.floor(t.x),o=Math.floor(t.y),s=Math.ceil(t.x+t.width),c=Math.ceil(t.y+t.height),u=this.pixelRatio||1;a.width=Math.max(s-r,1)*u,a.height=Math.max(c-o,1)*u;const g=a.getContext("2d");g&&(g.clearRect(0,0,a.width,a.height),g.save(),g.scale(u,u),g.translate(-r,-o),this._drawImpl(g),g.restore(),this.cache={...this.cache||{},canvas:a,canvasKey:this._optionsToKey()})}_optionsToKey(){const{options:i}=this;return`${i.backgroundColor};${i.borderColor};${i.borderWidth};${this.pixelRatio}`}_drawImpl(i){const{feature:t}=this,{options:a}=this;i.beginPath(),this.projectionScale.geoPath.context(i)(t),a.backgroundColor&&(i.fillStyle=a.backgroundColor,i.fill()),a.borderColor&&(i.strokeStyle=a.borderColor,i.lineWidth=a.borderWidth,i.stroke())}draw(i){const{feature:t}=this;if(!t)return;(!this.cache||this.cache.canvasKey!==this._optionsToKey())&&this._drawInCache(i.canvas.ownerDocument);const a=this.getBounds();if(this.cache&&this.cache.canvas){const r=Math.floor(a.x),o=Math.floor(a.y),s=Math.ceil(a.x+a.width),c=Math.ceil(a.y+a.height);i.drawImage(this.cache.canvas,r,o,s-r,c-o)}else Number.isFinite(a.x)&&(i.save(),this._drawImpl(i),i.restore())}}at.id="geoFeature",at.defaults={...ie.ZL.defaults,outlineBackgroundColor:null,outlineBorderWidth:0,graticuleBorderColor:"#CCCCCC",graticuleBorderWidth:0},at.defaultRoutes={outlineBorderColor:"borderColor",...ie.ZL.defaultRoutes||{}};const cr={showOutline:!1,showGraticule:!1,clipMap:!0},lr={scales:{projection:{axis:"x",type:Ni.id,position:"chartArea",display:!1}}};function dr(n){const i={...n};return Object.keys(n).forEach(t=>{let a=t;if(t.startsWith("outline")){const r=t.slice(7);a=r[0].toLowerCase()+r.slice(1)}else{if(!t.startsWith("hoverOutline"))return;a=`hover${t.slice(12)}`}delete i[t],i[a]=n[t]}),i}class fr extends ie.Q7{getGeoDataset(){return super.getDataset()}getGeoOptions(){return this.chart.options}getProjectionScale(){return this.getScaleForId("projection")}linkScales(){const i=this.getGeoDataset(),t=this.getMeta();t.xAxisID="projection",i.xAxisID="projection",t.yAxisID="projection",i.yAxisID="projection",t.xScale=this.getScaleForId("projection"),t.yScale=this.getScaleForId("projection"),this.getProjectionScale().computeBounds(this.resolveOutline())}showOutline(){return(0,me.v)(this.getGeoDataset().showOutline,this.getGeoOptions().showOutline)}clipMap(){return(0,me.v)(this.getGeoDataset().clipMap,this.getGeoOptions().clipMap)}getGraticule(){return(0,me.v)(this.getGeoDataset().showGraticule,this.getGeoOptions().showGraticule)}update(i){super.update(i);const t=this.getMeta(),a=this.getProjectionScale(),r=a.updateBounds();if(this.showOutline()){const o=t.dataset;if(r&&delete o.cache,o.projectionScale=a,o.pixelRatio=this.chart.currentDevicePixelRatio,"resize"!==i){const s=dr(this.resolveDatasetElementOptions(i)),c={feature:this.resolveOutline(),options:s};this.updateElement(o,void 0,c,i),this.getGraticule()&&(t.graticule=s)}}else this.getGraticule()&&"resize"!==i&&(t.graticule=dr(this.resolveDatasetElementOptions(i)));this.updateElements(t.data,0,t.data.length,i),r&&t.data.forEach(o=>delete o.cache)}resolveOutline(){const t=this.getGeoDataset().outline||{type:"Sphere"};return Array.isArray(t)?{type:"FeatureCollection",features:t}:t}showGraticule(){const i=this.getGraticule(),t=this.getMeta().graticule;if(!i||!t)return;const{ctx:a}=this.chart,o=this.getProjectionScale().geoPath.context(a);if(a.save(),a.beginPath(),"boolean"==typeof i)i&&o(function po(){return Fa()()}());else{const s=Fa();i.stepMajor&&s.stepMajor(i.stepMajor),i.stepMinor&&s.stepMinor(i.stepMinor),o(s())}a.strokeStyle=t.graticuleBorderColor,a.lineWidth=t.graticuleBorderWidth,a.stroke(),a.restore()}draw(){const{chart:i}=this,t=this.clipMap();let a=!1;(!0===t||"outline"===t||"outline+graticule"===t)&&(a=!0,(0,me.Y)(i.ctx,i.chartArea)),this.showOutline()&&this.getMeta().dataset&&this.getMeta().dataset.draw.call(this.getMeta().dataset,i.ctx,i.chartArea),!0===t||"graticule"===t||"outline+graticule"===t?a||(0,me.Y)(i.ctx,i.chartArea):a&&(a=!1,(0,me.$)(i.ctx)),this.showGraticule(),!0===t||"items"===t?a||(0,me.Y)(i.ctx,i.chartArea):a&&(a=!1,(0,me.$)(i.ctx)),this.getMeta().data.forEach(r=>r.draw.call(r,i.ctx,i.chartArea)),a&&(a=!1,(0,me.$)(i.ctx))}}function ur(n,i,t,a=[],r=[]){ie.i_.addControllers(t),Array.isArray(a)?ie.i_.addElements(...a):ie.i_.addElements(a),Array.isArray(r)?ie.i_.addScales(...r):ie.i_.addScales(r);const o=i;return o.type=n,o}class cn extends fr{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const i=this.getGeoDataset(),t=this.getMeta();t.vAxisID="color",t.rAxisID="color",i.vAxisID="color",i.rAxisID="color",t.rScale=this.getScaleForId("color"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,i.iAxisID=t.xAxisID}_getOtherScale(i){return i}parse(i,t){const a=this.getMeta().rScale,{data:r}=this.getDataset(),o=this._cachedMeta;for(let s=i;s<i+t;s+=1)o._parsed[s]={[a.axis]:a.parse(r[s],s)}}updateElements(i,t,a,r){const o=this.resolveDataElementOptions(t,r),s=this.getSharedOptions(o),c=this.includeOptions(r,s),u=this.getProjectionScale();this.updateSharedOptions(s,r,o);for(let g=t;g<t+a;g+=1){const l=i[g];l.projectionScale=u,l.feature=this._data[g].feature,l.center=this._data[g].center,l.pixelRatio=this.chart.currentDevicePixelRatio;const p=l.getCenterPoint(),h={x:p.x,y:p.y};c&&(h.options=s||this.resolveDataElementOptions(g,r)),this.updateElement(l,g,h,r)}}indexToColor(i){const t=this.getMeta().rScale;return t.getColorForValue(this.getParsed(i)[t.axis])}}cn.id="choropleth",cn.defaults=(0,me.a4)({},[cr,{datasetElementType:at.id,dataElementType:at.id}]),cn.overrides=(0,me.a4)({},[lr,{plugins:{tooltip:{callbacks:{title:()=>"",label(n){var i,t,a,r;return null==n.formattedValue?null===(t=null===(i=n.chart.data)||void 0===i?void 0:i.labels)||void 0===t?void 0:t[n.dataIndex]:`${null===(r=null===(a=n.chart.data)||void 0===a?void 0:a.labels)||void 0===r?void 0:r[n.dataIndex]}: ${n.formattedValue}`}}},colors:{enabled:!1}},scales:{color:{type:mt.id,axis:"x"}},elements:{geoFeature:{backgroundColor:n=>null==n.dataIndex?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToColor(n.dataIndex)}}}]);class pr extends ie.kL{constructor(i,t){super(i,ur("choropleth",t,cn,at,[mt,Ni]))}}pr.id=cn.id;class ln extends fr{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const i=this.getGeoDataset(),t=this.getMeta();t.vAxisID="size",t.rAxisID="size",i.vAxisID="size",i.rAxisID="size",t.rScale=this.getScaleForId("size"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,i.iAxisID=t.xAxisID}_getOtherScale(i){return i}parse(i,t){const a=this.getMeta().rScale,r=this.getDataset().data,o=this._cachedMeta;for(let s=i;s<i+t;s+=1){const c=r[s];o._parsed[s]={x:c.longitude??c.x,y:c.latitude??c.y,[a.axis]:a.parse(c,s)}}}updateElements(i,t,a,r){const o="reset"===r,s=this.resolveDataElementOptions(t,r),c=this.getSharedOptions(s),u=this.includeOptions(r,c),g=this.getProjectionScale();this.getMeta().rScale._model=s,this.updateSharedOptions(c,r,s);for(let l=t;l<t+a;l+=1){const p=i[l],h=this.getParsed(l),v=g.projection([h.x,h.y]),x={x:v?v[0]:0,y:v?v[1]:0,skip:Number.isNaN(h.x)||Number.isNaN(h.y)};u&&(x.options=c||this.resolveDataElementOptions(l,r),o&&(x.options.radius=0)),this.updateElement(p,l,x,r)}}indexToRadius(i){const t=this.getMeta().rScale;return t.getSizeForValue(this.getParsed(i)[t.axis])}}function Vs(n){return n}function hr(n,i){var t=i.id,a=i.bbox,r=i.properties??{},o=function tc(n,i){var t=function Xs(n){if(null==n)return Vs;var i,t,a=n.scale[0],r=n.scale[1],o=n.translate[0],s=n.translate[1];return function(c,u){u||(i=t=0);var g=2,l=c.length,p=new Array(l);for(p[0]=(i+=c[0])*a+o,p[1]=(t+=c[1])*r+s;g<l;)p[g]=c[g],++g;return p}}(n.transform),a=n.arcs;function r(l,p){p.length&&p.pop();for(var h=a[l<0?~l:l],v=0,x=h.length;v<x;++v)p.push(t(h[v],v));l<0&&function Ks(n,i){for(var t,a=n.length,r=a-i;r<--a;)t=n[r],n[r++]=n[a],n[a]=t}(p,x)}function o(l){return t(l)}function s(l){for(var p=[],h=0,v=l.length;h<v;++h)r(l[h],p);return p.length<2&&p.push(p[0]),p}function c(l){for(var p=s(l);p.length<4;)p.push(p[0]);return p}function u(l){return l.map(c)}return function g(l){var h,p=l.type;switch(p){case"GeometryCollection":return{type:p,geometries:l.geometries.map(g)};case"Point":h=o(l.coordinates);break;case"MultiPoint":h=l.coordinates.map(o);break;case"LineString":h=s(l.arcs);break;case"MultiLineString":h=l.arcs.map(s);break;case"Polygon":h=u(l.arcs);break;case"MultiPolygon":h=l.arcs.map(u);break;default:return null}return{type:p,coordinates:h}}(i)}(n,i);return null==t&&null==a?{type:"Feature",properties:r,geometry:o}:null==a?{type:"Feature",id:t,properties:r,geometry:o}:{type:"Feature",id:t,bbox:a,properties:r,geometry:o}}ln.id="bubbleMap",ln.defaults=(0,me.a4)({},[cr,{dataElementType:ie.od.id,datasetElementType:at.id,showOutline:!0,clipMap:"outline+graticule"}]),ln.overrides=(0,me.a4)({},[lr,{plugins:{tooltip:{callbacks:{title:()=>"",label(n){var i,t,a,r;return null==n.formattedValue?null===(t=null===(i=n.chart.data)||void 0===i?void 0:i.labels)||void 0===t?void 0:t[n.dataIndex]:`${null===(r=null===(a=n.chart.data)||void 0===a?void 0:a.labels)||void 0===r?void 0:r[n.dataIndex]}: ${n.formattedValue}`}}}},scales:{size:{axis:"x",type:_t.id}},elements:{point:{radius:n=>null==n.dataIndex?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex),hoverRadius:n=>null==n.dataIndex?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex)+1}}}]),class Ws extends ie.kL{constructor(i,t){super(i,ur("bubbleMap",t,ln,at,[_t,Ni]))}}.id=ln.id;const nc={Dublin:"Contae \xc1tha Cliath",Monaghan:"Contae Mhuineach\xe1in",Galway:"Contae na Gaillimhe",Cork:"Contae Chorca\xed\xad",Limerick:"Contae Luimnigh",Waterford:"Contae Phort L\xe1irge",Tipperary:"Contae Thiobraid \xc1rann",Louth:"Contae L\xfa",Mayo:"Contae Mhaigh Eo",Meath:"Contae na M\xed",Offaly:"Contae U\xed\xadbh Fhail\xed",Westmeath:"Contae na hIarmh\xed\xad",Wexford:"Contae Loch Garman",Wicklow:"Contae Chill Mhant\xe1in",Kildare:"Contae Chill Dara",Kilkenny:"Contae Chill Chainnigh",Laois:"Contae Laoise",Kerry:"Contae Chiarra\xed",Roscommon:"Contae Ros Com\xe1in",Sligo:"Contae Shligigh",Donegal:"Contae Dh\xfan na nGall",Leitrim:"Contae Liatroma",Longford:"Contae an Longfoirt",Clare:"Contae an Chl\xe1ir",Carlow:"Contae Cheatharlach",Cavan:"Contae an Chabh\xe1in",Belfast:"B\xe9al Feirste",Antrim:"Contae Aontroma",Armagh:"Contae Ard Mhacha",Derry:"Contae Dhoire",Down:"Contae an D\xfain",Tryone:"Contae Th\xedr Eoghain",Fermanagh:"Contae Fhear Manach"};var Lt=M(3546);function ic(n,i){if(1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("Number of Users (",t.userCounts.total,")")}}function ac(n,i){if(1&n&&(e.TgZ(0,"mat-card")(1,"mat-card-header",4)(2,"mat-card-title"),e._uU(3,"Story Stats"),e.qZA()(),e.TgZ(4,"mat-card-content")(5,"mat-card")(6,"mat-card-content",12)(7,"b"),e._uU(8,"Total words:"),e.qZA(),e._uU(9),e.qZA()(),e.TgZ(10,"mat-card")(11,"mat-card-content",12)(12,"b"),e._uU(13,"Total stories:"),e.qZA(),e._uU(14),e.qZA()(),e.TgZ(15,"mat-card")(16,"mat-card-content",12)(17,"b"),e._uU(18,"Avg words per story:"),e.qZA(),e._uU(19),e.qZA()(),e.TgZ(20,"mat-card")(21,"mat-card-content",12)(22,"b"),e._uU(23,"Total recordings:"),e.qZA(),e._uU(24),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(9),e.hij(" ",t.storyStats.totalWords," "),e.xp6(5),e.hij(" ",t.storyStats.totalStories," "),e.xp6(5),e.hij(" ",t.storyStats.avgWordCount," "),e.xp6(5),e.hij(" ",t.storyStats.totalRecordings," ")}}function rc(n,i){if(1&n&&(e.TgZ(0,"mat-card")(1,"mat-card-header",4)(2,"mat-card-title"),e._uU(3,"User Stats"),e.qZA()(),e.TgZ(4,"mat-card-content")(5,"mat-card")(6,"mat-card-content",12)(7,"b"),e._uU(8,"Profiles filled out:"),e.qZA(),e._uU(9),e.ALo(10,"percent"),e.qZA()(),e.TgZ(11,"mat-card")(12,"mat-card-content",12)(13,"b"),e._uU(14,"Students with at least 1 story:"),e.qZA(),e._uU(15),e.ALo(16,"percent"),e.qZA()(),e.TgZ(17,"mat-card")(18,"mat-card-content",12)(19,"b"),e._uU(20,"Teaechers with at least 1 classroom:"),e.qZA(),e._uU(21),e.ALo(22,"percent"),e.qZA()(),e.TgZ(23,"mat-card")(24,"mat-card-content",12)(25,"b"),e._uU(26,"Language Settings:"),e.qZA(),e.TgZ(27,"div")(28,"b"),e._uU(29,"GA:"),e.qZA(),e._uU(30),e.ALo(31,"percent"),e.qZA(),e.TgZ(32,"div")(33,"b"),e._uU(34,"EN:"),e.qZA(),e._uU(35),e.ALo(36,"percent"),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(9),e.hij(" ",e.xi3(10,5,t.profileFilledPercentage,"2.2")," "),e.xp6(6),e.hij(" ",e.xi3(16,8,t.studentsWithStoriesPercentage,"2.2")," "),e.xp6(6),e.hij(" ",e.xi3(22,11,t.teachersWithClassroomsPercentage,"2.2")," "),e.xp6(9),e.hij(" ",e.xi3(31,14,t.irishPercentage,"2.2"),""),e.xp6(5),e.hij(" ",e.xi3(36,17,t.englishPercentage,"2.2"),"")}}function oc(n,i){if(1&n&&(e.TgZ(0,"mat-card")(1,"mat-card-header",4)(2,"mat-card-title"),e._uU(3,"Teacher Stats"),e.qZA()(),e.TgZ(4,"mat-card-content")(5,"mat-card")(6,"mat-card-content",12)(7,"b"),e._uU(8,"Total classrooms:"),e.qZA(),e._uU(9),e.qZA()(),e.TgZ(10,"mat-card")(11,"mat-card-content",12)(12,"b"),e._uU(13,"Total stories with feedback:"),e.qZA(),e._uU(14),e.qZA()(),e.TgZ(15,"mat-card")(16,"mat-card-content",12)(17,"b"),e._uU(18,"Stories with only textual feedback:"),e.qZA(),e._uU(19),e.qZA()(),e.TgZ(20,"mat-card")(21,"mat-card-content",12)(22,"b"),e._uU(23,"Stories with only audio feedback:"),e.qZA(),e._uU(24),e.qZA()(),e.TgZ(25,"mat-card")(26,"mat-card-content",12)(27,"b"),e._uU(28,"Stories with both text/audio feedback:"),e.qZA(),e._uU(29),e.qZA()(),e.TgZ(30,"mat-card")(31,"mat-card-content",12)(32,"b"),e._uU(33,"Total words textual feedback:"),e.qZA(),e._uU(34),e.qZA()(),e.TgZ(35,"mat-card")(36,"mat-card-content",12)(37,"b"),e._uU(38,"Avg words textual feedback:"),e.qZA(),e._uU(39),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(9),e.hij(" ",t.totalClassrooms," "),e.xp6(5),e.hij(" ",t.storyStats.totalFeedback," "),e.xp6(5),e.hij(" ",t.storyStats.onlyTextFeedback," "),e.xp6(5),e.hij(" ",t.storyStats.onlyAudioFeedback," "),e.xp6(5),e.hij(" ",t.storyStats.bothAudioAndText," "),e.xp6(5),e.hij(" ",t.storyStats.totalFeedbackWords," "),e.xp6(5),e.hij(" ",t.storyStats.avgFeedbackWordCount," ")}}function sc(n,i){1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1," Grammar Errors "),e.qZA())}function cc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",16),e._UZ(2,"div",17),e.TgZ(3,"div"),e._uU(4),e.qZA()()()),2&n){const t=i.$implicit;e.xp6(2),e.Udp("background-color",t.fillStyle)("border-color",t.strokeStyle),e.xp6(2),e.Oqu(t.text)}}function lc(n,i){if(1&n&&(e.TgZ(0,"div",13)(1,"div",14),e._uU(2,"Legend"),e.qZA(),e._UZ(3,"hr"),e.YNc(4,cc,5,5,"div",15),e.qZA()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.pieChartLegendItems)}}let dc=(()=>{class n{constructor(t,a,r,o,s){this.userService=t,this.storyService=a,this.classroomService=r,this.profileService=o,this.http=s,this.pieChartLegendItems=[],this.totalClassrooms=0,this.profileFilledPercentage=0,this.studentsWithStoriesPercentage=0,this.teachersWithClassroomsPercentage=0,this.englishPercentage=0,this.irishPercentage=0,this.dataLoaded=!1}ngOnInit(){var t=this;return(0,le.Z)(function*(){t.userCounts=yield(0,Oe.z)(t.userService.getUserCountAndStatus()),t.storyStats=yield(0,Oe.z)(t.storyService.getStoryStats()),t.grammarErrorCounts=yield(0,Oe.z)(t.http.get(`${Ee.Z.baseurl}gramadoir/getUserGrammarCounts`)),t.profileCountyCounts=yield(0,Oe.z)(t.profileService.getCountyCounts()),t.totalClassrooms=yield(0,Oe.z)(t.classroomService.getTotalClassrooms());let a=yield(0,Oe.z)(t.profileService.getNumOfProfiles());t.profileFilledPercentage=a/t.userCounts.total;let r=yield(0,Oe.z)(t.userService.countUsersWithStories());t.studentsWithStoriesPercentage=r/t.userCounts.totalStudents;let o=yield(0,Oe.z)(t.userService.countTeachersWithClassrooms());t.teachersWithClassroomsPercentage=o/t.userCounts.totalTeachers;let s=yield(0,Oe.z)(t.userService.getLanguageCount());t.englishPercentage=s.englishCount/t.userCounts.total,t.irishPercentage=s.irishCount/t.userCounts.total,t.dataLoaded=!0,yield t.makeUserGraph(),yield t.makeGrammarGraph(),yield t.getCountyMap()})()}makeUserGraph(){var t=this;return(0,le.Z)(function*(){let r=document.getElementById("user-counts").getContext("2d");t.userChart=new ie.kL(r,{type:"bar",data:{labels:["Students","Teachers"],datasets:[{label:"Active",data:[t.userCounts.activeStudents,t.userCounts.activeTeachers],backgroundColor:"green"},{label:"Pending",data:[t.userCounts.pendingStudents,t.userCounts.pendingTeachers],backgroundColor:"yellow"},{label:"Not specified",data:[t.userCounts.totalStudents-(t.userCounts.activeStudents+t.userCounts.pendingStudents),t.userCounts.totalTeachers-(t.userCounts.activeTeachers+t.userCounts.pendingTeachers)],backgroundColor:"red"}]},options:{plugins:{title:{display:!0,text:"Stacked bar chart"}},responsive:!0}})})()}makeGrammarGraph(){var t=this;return(0,le.Z)(function*(){let r=document.getElementById("grammar-pie-chart").getContext("2d");t.pieChart&&t.pieChart.destroy(),t.pieChart=new ie.kL(r,{type:"pie",data:{labels:Object.keys(t.grammarErrorCounts),datasets:[{label:"Grammar Error Counts ",data:Object.values(t.grammarErrorCounts),backgroundColor:Object.keys(t.grammarErrorCounts).map(o=>`#${(16777215*Math.random()<<0).toString(16)}`)}]},options:{plugins:{legend:{display:!1}}}}),t.pieChartLegendItems=t.pieChart.legend.legendItems})()}getCountyMap(){var t=this;return(0,le.Z)(function*(){const a=yield fetch("https://raw.githubusercontent.com/gist/carsonfarmer/9791524/raw/b27ca0d78d46a84664fe7ef709eed4f7621f7a25/irish-counties.topojson").then(u=>u.json()),r=function ec(n,i){return"string"==typeof i&&(i=n.objects[i]),"GeometryCollection"===i.type?{type:"FeatureCollection",features:i.geometries.map(function(t){return hr(n,t)})}:hr(n,i)}(a,a.objects.counties).features,o=r.map(u=>u.id),s=r.map(u=>({feature:u,value:t.profileCountyCounts[nc[u.id]]}));let c=document.getElementById("county-chart");t.countyChart=new pr(c.getContext("2d"),{data:{labels:o,datasets:[{label:"Counties",outline:r,showOutline:!0,data:s}]},options:{plugins:{legend:{display:!1}},scales:{projection:{axis:"x",projection:"equalEarth"}}}})})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(xt.K),e.Y36(rt.N),e.Y36(jt.u),e.Y36(Zt.H),e.Y36(Pe.eN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-database-stats"]],decls:26,vars:6,consts:[[1,"dashboard"],[1,"dashboard-header"],[1,"dashboard-title"],[1,"cards-container"],[1,"stats-card-header"],[4,"ngIf"],["id","user-counts"],[2,"display","flex"],["class","legendContainer",4,"ngIf"],[1,"pieContainer"],["id","grammar-pie-chart","width","200","height","200"],["id","county-chart"],[1,"cardText"],[1,"legendContainer"],[1,"legend"],[4,"ngFor","ngForOf"],[1,"legendPair"],[1,"legendMarker"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Database Stats"),e.qZA()(),e.TgZ(4,"div",3)(5,"mat-card")(6,"mat-card-header",4),e.YNc(7,ic,2,1,"mat-card-title",5),e.qZA(),e.TgZ(8,"mat-card-content"),e._UZ(9,"canvas",6),e.qZA()(),e.YNc(10,ac,25,4,"mat-card",5),e.YNc(11,rc,37,20,"mat-card",5),e.YNc(12,oc,40,7,"mat-card",5),e.TgZ(13,"mat-card")(14,"mat-card-header",4),e.YNc(15,sc,2,0,"mat-card-title",5),e.qZA(),e.TgZ(16,"mat-card-content",7),e.YNc(17,lc,5,1,"div",8),e.TgZ(18,"div",9),e._UZ(19,"canvas",10),e.qZA()()(),e.TgZ(20,"mat-card")(21,"mat-card-header",4)(22,"mat-card-title"),e._uU(23," Map of Users "),e.qZA()(),e.TgZ(24,"mat-card-content"),e._UZ(25,"canvas",11),e.qZA()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",a.dataLoaded),e.xp6(3),e.Q6J("ngIf",a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded),e.xp6(3),e.Q6J("ngIf",a.dataLoaded),e.xp6(2),e.Q6J("ngIf",a.pieChartLegendItems.length>0))},dependencies:[H.sg,H.O5,Lt.a8,Lt.dk,Lt.dn,Lt.n5,H.Zx],styles:[".dashboard[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;background:white;margin-left:5%;padding:20px;margin-bottom:2%}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.cards-container[_ngcontent-%COMP%]{display:flex;align-items:stretch;justify-content:center;gap:1.5rem;flex-wrap:wrap;padding:20px}.stats-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}mat-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid grey;min-width:400px;padding:10px}.cardText[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem}.pieContainer[_ngcontent-%COMP%]{flex:1;width:50%;padding:10px;display:flex;justify-content:center}.legendContainer[_ngcontent-%COMP%]{overflow-y:scroll;width:40%;max-height:200px;max-width:200px;border:1px solid black;border-radius:5px;padding:5px}.legendPair[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem}.legendMarker[_ngcontent-%COMP%]{width:30px;height:10px}.legend[_ngcontent-%COMP%]{padding-top:5px;text-align:center;font-weight:700}"]}),n})();var gr=M(1745);let mr=(()=>{class n{constructor(t,a){this.http=t,this.auth=a,this.baseUrl=Ee.Z.baseurl+"stats/"}getProfileDataByDate(t,a){return this.http.get(this.baseUrl+"getProfileDataByDate/"+t+"/"+a)}getFeatureDataByDate(t,a){return this.http.get(this.baseUrl+"getFeatureDataByDate/"+t+"/"+a)}getFeatureDataSinceLog(t){return this.http.get(this.baseUrl+"getFeatureDataSinceLog/"+t.toString())}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Pe.eN),e.LFG(gr.$))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Gn=M(6469),$n=M(1512),dn=M(7084),Be=M(9602),Ae=M(9549);function fc(n,i){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.ts.l.invalid_start_date)}}function uc(n,i){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.ts.l.invalid_end_date)}}function pc(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"mat-form-field",9)(2,"mat-label"),e._uU(3),e.qZA(),e.TgZ(4,"mat-date-range-input",10),e._UZ(5,"input",11)(6,"input",12),e.qZA(),e._UZ(7,"mat-datepicker-toggle",13)(8,"mat-date-range-picker",null,14),e.YNc(10,fc,2,1,"mat-error",7),e.YNc(11,uc,2,1,"mat-error",7),e.qZA(),e.TgZ(12,"div"),e._uU(13),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"div",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.getProfileData())}),e._uU(16),e.qZA()()}if(2&n){const t=e.MAs(9),a=e.oxw();e.xp6(3),e.Oqu(a.ts.l.enter_date_range),e.xp6(1),e.Q6J("formGroup",a.range)("rangePicker",t),e.xp6(3),e.Q6J("for",t),e.xp6(3),e.Q6J("ngIf",a.range.controls.start.hasError("matStartDateInvalid")),e.xp6(1),e.Q6J("ngIf",a.range.controls.end.hasError("matEndDateInvalid")),e.xp6(2),e.hij(" (",a.ts.l.no_date_range_entered,") "),e.xp6(3),e.Oqu(a.ts.l.get_data)}}function hc(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",15),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.setDataToDisplay(o.statsData))}),e._uU(2),e.ALo(3,"date"),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,t.date,"d/M/yy, h:mm a")," ")}}function gc(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,hc,4,4,"div",16),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.previousLogs)}}function mc(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",8),e.YNc(1,gc,2,1,"div",7),e._UZ(2,"br"),e.TgZ(3,"div",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addNewProfileData())}),e._uU(4),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.previousLogs),e.xp6(3),e.Oqu(t.ts.l.add_data_log)}}function _c(n,i){if(1&n&&(e.TgZ(0,"div",18)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.ts.l.compiling_data)}}function vc(n,i){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",t.ts.l.profiles_found,": ",t.numProfilesFound,"")}}function bc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function xc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function yc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit,a=e.oxw(2);e.xp6(2),e.AsE(" ",a.ts.l.users_not_from_ireland," : ",t.value," ")}}function Cc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Tc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Zc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Ac(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function wc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Sc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Mc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Oc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Pc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function qc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Uc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Dc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Nc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function kc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Ec(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Lc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",20),e._uU(2),e.qZA(),e.TgZ(3,"mat-accordion",21)(4,"mat-expansion-panel")(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"b"),e._uU(8),e.qZA()(),e.TgZ(9,"mat-panel-description",22),e._uU(10),e.qZA()(),e.YNc(11,bc,3,2,"div",23),e.ALo(12,"keyvalue"),e.qZA(),e.TgZ(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title")(16,"b"),e._uU(17),e.qZA()(),e.TgZ(18,"mat-panel-description",22),e._uU(19),e.qZA()(),e.YNc(20,xc,3,2,"div",23),e.ALo(21,"keyvalue"),e.qZA(),e.TgZ(22,"mat-expansion-panel")(23,"mat-expansion-panel-header")(24,"mat-panel-title")(25,"b"),e._uU(26),e.qZA()(),e.TgZ(27,"mat-panel-description",22),e._uU(28),e.qZA()(),e.TgZ(29,"div",24)(30,"div"),e.YNc(31,yc,3,2,"div",23),e.ALo(32,"keyvalue"),e.qZA(),e.TgZ(33,"div"),e.YNc(34,Cc,3,2,"div",23),e.ALo(35,"keyvalue"),e.qZA()()(),e.TgZ(36,"mat-expansion-panel")(37,"mat-expansion-panel-header")(38,"mat-panel-title")(39,"b"),e._uU(40),e.qZA()(),e.TgZ(41,"mat-panel-description",22),e._uU(42),e.qZA()(),e.YNc(43,Tc,3,2,"div",23),e.ALo(44,"keyvalue"),e.qZA(),e.TgZ(45,"mat-expansion-panel")(46,"mat-expansion-panel-header")(47,"mat-panel-title")(48,"b"),e._uU(49),e.qZA()(),e.TgZ(50,"mat-panel-description",22),e._uU(51),e.qZA()(),e.YNc(52,Zc,3,2,"div",23),e.ALo(53,"keyvalue"),e.qZA(),e.TgZ(54,"mat-expansion-panel")(55,"mat-expansion-panel-header")(56,"mat-panel-title")(57,"b"),e._uU(58),e.qZA()(),e.TgZ(59,"mat-panel-description",22),e._uU(60),e.qZA()(),e.YNc(61,Ac,3,2,"div",23),e.ALo(62,"keyvalue"),e.qZA(),e.TgZ(63,"mat-expansion-panel")(64,"mat-expansion-panel-header")(65,"mat-panel-title")(66,"b"),e._uU(67),e.qZA()(),e.TgZ(68,"mat-panel-description",22),e._uU(69),e.qZA()(),e.YNc(70,wc,3,2,"div",23),e.ALo(71,"keyvalue"),e.qZA(),e.TgZ(72,"mat-expansion-panel")(73,"mat-expansion-panel-header")(74,"mat-panel-title")(75,"b"),e._uU(76),e.qZA()(),e.TgZ(77,"mat-panel-description",22),e._uU(78),e.qZA()(),e.YNc(79,Sc,3,2,"div",23),e.ALo(80,"keyvalue"),e.qZA(),e.TgZ(81,"mat-expansion-panel")(82,"mat-expansion-panel-header")(83,"mat-panel-title")(84,"b"),e._uU(85),e.qZA()(),e.TgZ(86,"mat-panel-description",22),e._uU(87),e.qZA()(),e.YNc(88,Mc,3,2,"div",23),e.ALo(89,"keyvalue"),e.qZA(),e.TgZ(90,"mat-expansion-panel")(91,"mat-expansion-panel-header")(92,"mat-panel-title")(93,"b"),e._uU(94),e.qZA()(),e.TgZ(95,"mat-panel-description",22),e._uU(96),e.qZA()(),e.YNc(97,Oc,3,2,"div",23),e.ALo(98,"keyvalue"),e.qZA(),e.TgZ(99,"mat-expansion-panel")(100,"mat-expansion-panel-header")(101,"mat-panel-title")(102,"b"),e._uU(103),e.qZA()(),e.TgZ(104,"mat-panel-description",22),e._uU(105),e.qZA()(),e.YNc(106,Pc,3,2,"div",23),e.ALo(107,"keyvalue"),e.qZA(),e.TgZ(108,"mat-expansion-panel")(109,"mat-expansion-panel-header")(110,"mat-panel-title")(111,"b"),e._uU(112),e.qZA()(),e.TgZ(113,"mat-panel-description",22),e._uU(114),e.qZA()(),e.YNc(115,qc,3,2,"div",23),e.ALo(116,"keyvalue"),e.qZA(),e.TgZ(117,"mat-expansion-panel")(118,"mat-expansion-panel-header")(119,"mat-panel-title")(120,"b"),e._uU(121),e.qZA()(),e.TgZ(122,"mat-panel-description",22),e._uU(123),e.qZA()(),e.YNc(124,Uc,3,2,"div",23),e.ALo(125,"keyvalue"),e.qZA(),e.TgZ(126,"mat-expansion-panel")(127,"mat-expansion-panel-header")(128,"mat-panel-title")(129,"b"),e._uU(130),e.qZA()(),e.TgZ(131,"mat-panel-description",22),e._uU(132),e.qZA()(),e.YNc(133,Dc,3,2,"div",23),e.ALo(134,"keyvalue"),e.qZA(),e.TgZ(135,"mat-expansion-panel")(136,"mat-expansion-panel-header")(137,"mat-panel-title")(138,"b"),e._uU(139),e.qZA()(),e.TgZ(140,"mat-panel-description",22),e._uU(141),e.qZA()(),e.YNc(142,Nc,3,2,"div",23),e.ALo(143,"keyvalue"),e.qZA(),e.TgZ(144,"mat-expansion-panel")(145,"mat-expansion-panel-header")(146,"mat-panel-title")(147,"b"),e._uU(148),e.qZA()(),e.TgZ(149,"mat-panel-description",22),e._uU(150),e.qZA()(),e.YNc(151,kc,3,2,"div",23),e.ALo(152,"keyvalue"),e.qZA(),e.TgZ(153,"mat-expansion-panel")(154,"mat-expansion-panel-header")(155,"mat-panel-title")(156,"b"),e._uU(157),e.qZA()(),e.TgZ(158,"mat-panel-description",22),e._uU(159),e.qZA()(),e.YNc(160,Ec,3,2,"div",23),e.ALo(161,"keyvalue"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.personal_info," "),e.xp6(6),e.Oqu(t.ts.l.gender),e.xp6(2),e.hij(" ",t.ts.l.gender_of_users," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,53,t.dataToDisplay.gender)),e.xp6(6),e.Oqu(t.ts.l.age),e.xp6(2),e.hij(" ",t.ts.l.age_of_users," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(21,55,t.dataToDisplay.age)),e.xp6(6),e.Oqu(t.ts.l.country),e.xp6(2),e.hij(" ",t.ts.l.countries_of_users," "),e.xp6(3),e.Q6J("ngForOf",e.lcZ(32,57,t.dataToDisplay.notFromIreland)),e.xp6(3),e.Q6J("ngForOf",e.lcZ(35,59,t.dataToDisplay.country)),e.xp6(6),e.Oqu(t.ts.l.county),e.xp6(2),e.hij(" ",t.ts.l.county_of_users," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(44,61,t.dataToDisplay.county)),e.xp6(6),e.hij(" ",t.ts.l.student_school_level," "),e.xp6(2),e.hij(" ",t.ts.l.which_level_type_of_schooling," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(53,63,t.dataToDisplay.studentSchoolLevel)),e.xp6(6),e.hij(" ",t.ts.l.primary_year," "),e.xp6(2),e.hij(" ",t.ts.l.which_primary_year," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(62,65,t.dataToDisplay.primaryYear)),e.xp6(6),e.hij(" ",t.ts.l.secondary_year," "),e.xp6(2),e.hij(" ",t.ts.l.which_secondary_year," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(71,67,t.dataToDisplay.secondaryYear)),e.xp6(6),e.hij(" ",t.ts.l.school_type," "),e.xp6(2),e.hij(" ",t.ts.l.which_type_primary_secondary," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(80,69,t.dataToDisplay.studentSchoolType)),e.xp6(6),e.hij(" ",t.ts.l.third_level_studies," "),e.xp6(2),e.hij(" ",t.ts.l.what_third_level_students_study," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(89,71,t.dataToDisplay.thirdLevelOption)),e.xp6(6),e.hij(" ",t.ts.l.other_studies," "),e.xp6(2),e.hij(" ",t.ts.l.other_third_level_studies," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(98,73,t.dataToDisplay.otherStudies)),e.xp6(6),e.hij(" ",t.ts.l.third_level_year," "),e.xp6(2),e.hij(" ",t.ts.l.what_third_level_year," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(107,75,t.dataToDisplay.thirdLevelYear)),e.xp6(6),e.hij(" ",t.ts.l.USA_school," "),e.xp6(2),e.hij(" ",t.ts.l.what_students_study_in_USA," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(116,77,t.dataToDisplay.usaOption)),e.xp6(6),e.hij(" ",t.ts.l.postgrad_studies," "),e.xp6(2),e.hij(" ",t.ts.l.what_postgrad_studying," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(125,79,t.dataToDisplay.otherPostgradStudies)),e.xp6(6),e.hij(" ",t.ts.l.immersion_course," "),e.xp6(2),e.hij(" ",t.ts.l.students_attending_immersion_course," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(134,81,t.dataToDisplay.immersionCourse)),e.xp6(6),e.hij(" ",t.ts.l.teacher_school_types," "),e.xp6(2),e.hij(" ",t.ts.l.school_level_of_teachers," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(143,83,t.dataToDisplay.teacherSchoolTypes)),e.xp6(6),e.hij(" ",t.ts.l.teacher_primary_school," "),e.xp6(2),e.hij(" ",t.ts.l.type_of_primary_teacher," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(152,85,t.dataToDisplay.teacherPrimaryType)),e.xp6(6),e.hij(" ",t.ts.l.teacher_secondary_school," "),e.xp6(2),e.hij(" ",t.ts.l.type_of_secondary_teacher," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(161,87,t.dataToDisplay.teacherSecondaryType))}}function Fc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Ic(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Yc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function jc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Rc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Jc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Hc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," years : ",t.value," ")}}function Bc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Gc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",20),e._uU(2),e.qZA(),e.TgZ(3,"mat-accordion",21)(4,"mat-expansion-panel")(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"b"),e._uU(8),e.qZA()(),e.TgZ(9,"mat-panel-description",22),e._uU(10),e.qZA()(),e.YNc(11,Fc,3,2,"div",23),e.ALo(12,"keyvalue"),e.qZA(),e.TgZ(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title")(16,"b"),e._uU(17),e.qZA()(),e.TgZ(18,"mat-panel-description",22),e._uU(19),e.qZA()(),e.YNc(20,Ic,3,2,"div",23),e.ALo(21,"keyvalue"),e.qZA(),e.TgZ(22,"mat-expansion-panel")(23,"mat-expansion-panel-header")(24,"mat-panel-title")(25,"b"),e._uU(26),e.qZA()(),e.TgZ(27,"mat-panel-description",22),e._uU(28),e.qZA()(),e.YNc(29,Yc,3,2,"div",23),e.ALo(30,"keyvalue"),e.qZA(),e.TgZ(31,"mat-expansion-panel")(32,"mat-expansion-panel-header")(33,"mat-panel-title")(34,"b"),e._uU(35),e.qZA()(),e.TgZ(36,"mat-panel-description",22),e._uU(37),e.qZA()(),e.YNc(38,jc,3,2,"div",23),e.ALo(39,"keyvalue"),e.qZA(),e.TgZ(40,"mat-expansion-panel")(41,"mat-expansion-panel-header")(42,"mat-panel-title")(43,"b"),e._uU(44),e.qZA()(),e.TgZ(45,"mat-panel-description",22),e._uU(46),e.qZA()(),e.YNc(47,Rc,3,2,"div",23),e.ALo(48,"keyvalue"),e.qZA(),e.TgZ(49,"mat-expansion-panel")(50,"mat-expansion-panel-header")(51,"mat-panel-title")(52,"b"),e._uU(53),e.qZA()(),e.TgZ(54,"mat-panel-description",22),e._uU(55),e.qZA()(),e.YNc(56,Jc,3,2,"div",23),e.ALo(57,"keyvalue"),e.qZA(),e.TgZ(58,"mat-expansion-panel")(59,"mat-expansion-panel-header")(60,"mat-panel-title")(61,"b"),e._uU(62),e.qZA()(),e.TgZ(63,"mat-panel-description",22),e._uU(64),e.qZA()(),e.YNc(65,Hc,3,2,"div",23),e.ALo(66,"keyvalue"),e.qZA(),e.TgZ(67,"mat-expansion-panel")(68,"mat-expansion-panel-header")(69,"mat-panel-title")(70,"b"),e._uU(71),e.qZA()(),e.TgZ(72,"mat-panel-description",22),e._uU(73),e.qZA()(),e.YNc(74,Bc,3,2,"div",23),e.ALo(75,"keyvalue"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.language_competence," "),e.xp6(6),e.Oqu(t.ts.l.native_speaker),e.xp6(2),e.hij(" ",t.ts.l.status_of_native_speakers," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,25,t.dataToDisplay.nativeSpeakerStatus)),e.xp6(6),e.Oqu(t.ts.l.dialect),e.xp6(2),e.hij(" ",t.ts.l.dialect_preference," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(21,27,t.dataToDisplay.dialectPreference)),e.xp6(6),e.Oqu(t.ts.l.spoken_comprehension_level_of_users),e.xp6(2),e.hij(" ",t.ts.l.spoken_comprehension_level_of_users," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(30,29,t.dataToDisplay.spokenComprehensionLevel)),e.xp6(6),e.Oqu(t.ts.l.other_languages),e.xp6(2),e.hij(" ",t.ts.l.other_languages_at_home," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(39,31,t.dataToDisplay.otherLanguages)),e.xp6(6),e.hij(" ",t.ts.l.father_native_tongue," "),e.xp6(2),e.hij(" ",t.ts.l.native_tongue_father," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(48,33,t.dataToDisplay.fatherNativeTongue)),e.xp6(6),e.hij(" ",t.ts.l.mother_native_tongue," "),e.xp6(2),e.hij(" ",t.ts.l.native_tongue_mother," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(57,35,t.dataToDisplay.motherNativeTongue)),e.xp6(6),e.hij(" ",t.ts.l.years_of_irish," "),e.xp6(2),e.hij(" ",t.ts.l.number_of_years_students_study_irish," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(66,37,t.dataToDisplay.yearsOfIrish)),e.xp6(6),e.hij(" ",t.ts.l.other_language_proficiency," "),e.xp6(2),e.hij(" ",t.ts.l.other_languages_users_speak," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(75,39,t.dataToDisplay.otherLanguageProficiency))}}function $c(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function zc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Qc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Wc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Kc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Vc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Xc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function el(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function tl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function nl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",20),e._uU(2),e.qZA(),e.TgZ(3,"mat-accordion",21)(4,"mat-expansion-panel")(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"b"),e._uU(8),e.qZA()(),e.TgZ(9,"mat-panel-description",22),e._uU(10),e.qZA()(),e.YNc(11,$c,3,2,"div",23),e.ALo(12,"keyvalue"),e.qZA(),e.TgZ(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title")(16,"b"),e._uU(17),e.qZA()(),e.TgZ(18,"mat-panel-description",22),e._uU(19),e.qZA()(),e.YNc(20,zc,3,2,"div",23),e.ALo(21,"keyvalue"),e.qZA(),e.TgZ(22,"mat-expansion-panel")(23,"mat-expansion-panel-header")(24,"mat-panel-title")(25,"b"),e._uU(26),e.qZA()(),e.TgZ(27,"mat-panel-description",22),e._uU(28),e.qZA()(),e.TgZ(29,"div",24)(30,"div")(31,"div",26),e._uU(32),e.qZA(),e.YNc(33,Qc,3,2,"div",23),e.ALo(34,"keyvalue"),e.qZA(),e.TgZ(35,"div")(36,"div",26),e._uU(37),e.qZA(),e.YNc(38,Wc,3,2,"div",23),e.ALo(39,"keyvalue"),e.qZA()()(),e.TgZ(40,"mat-expansion-panel")(41,"mat-expansion-panel-header")(42,"mat-panel-title")(43,"b"),e._uU(44),e.qZA()(),e.TgZ(45,"mat-panel-description",22),e._uU(46),e.qZA()(),e.TgZ(47,"div",24)(48,"div")(49,"div",26),e._uU(50),e.qZA(),e.YNc(51,Kc,3,2,"div",23),e.ALo(52,"keyvalue"),e.qZA(),e.TgZ(53,"div")(54,"div",26),e._uU(55),e.qZA(),e.YNc(56,Vc,3,2,"div",23),e.ALo(57,"keyvalue"),e.qZA()()(),e.TgZ(58,"mat-expansion-panel")(59,"mat-expansion-panel-header")(60,"mat-panel-title")(61,"b"),e._uU(62),e.qZA()(),e.TgZ(63,"mat-panel-description",22),e._uU(64),e.qZA()(),e.TgZ(65,"div",24)(66,"div")(67,"div",26),e._uU(68),e.qZA(),e.YNc(69,Xc,3,2,"div",23),e.ALo(70,"keyvalue"),e.qZA(),e.TgZ(71,"div")(72,"div",26),e._uU(73),e.qZA(),e.YNc(74,el,3,2,"div",23),e.ALo(75,"keyvalue"),e.qZA()()(),e.TgZ(76,"mat-expansion-panel")(77,"mat-expansion-panel-header")(78,"mat-panel-title")(79,"b"),e._uU(80),e.qZA()(),e.TgZ(81,"mat-panel-description",22),e._uU(82),e.qZA()(),e.YNc(83,tl,3,2,"div",23),e.ALo(84,"keyvalue"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.exposure_to_irish," "),e.xp6(6),e.Oqu(t.ts.l.speaking_frequency),e.xp6(2),e.hij(" ",t.ts.l.frequency_users_speak_irish," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,28,t.dataToDisplay.speakingFrequency)),e.xp6(6),e.Oqu(t.ts.l.speak_with),e.xp6(2),e.hij(" ",t.ts.l.with_whom_speak_irish," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(21,30,t.dataToDisplay.speakWith)),e.xp6(6),e.Oqu(t.ts.l.irish_media),e.xp6(2),e.hij(" ",t.ts.l.how_often_media," "),e.xp6(4),e.hij(" ",t.ts.l.type,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(34,32,t.dataToDisplay.irishMedia)),e.xp6(4),e.hij(" ",t.ts.l.how_often,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(39,34,t.dataToDisplay.howOftenMedia)),e.xp6(6),e.Oqu(t.ts.l.irish_reading),e.xp6(2),e.hij(" ",t.ts.l.how_often_reading," "),e.xp6(4),e.hij(" ",t.ts.l.type,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(52,36,t.dataToDisplay.irishReading)),e.xp6(4),e.hij(" ",t.ts.l.how_often,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(57,38,t.dataToDisplay.howOftenReading)),e.xp6(6),e.Oqu(t.ts.l.irish_writing),e.xp6(2),e.hij(" ",t.ts.l.how_often_writing," "),e.xp6(4),e.hij(" ",t.ts.l.type,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(70,40,t.dataToDisplay.irishWriting)),e.xp6(4),e.hij(" ",t.ts.l.how_often,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(75,42,t.dataToDisplay.howOftenWriting)),e.xp6(6),e.hij(" ",t.ts.l.synth_opinion," "),e.xp6(2),e.hij(" ",t.ts.l.user_opinion_synthetic_voice," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(84,44,t.dataToDisplay.synthOpinion))}}let il=(()=>{class n{constructor(t,a,r){this.statsService=t,this.ts=a,this.engagement=r,this.range=new V.nJ({start:new V.p4,end:new V.p4}),this.previousLogs=[],this.dataToDisplay={},this.selectDateRange=!0,this.dataLoaded=!0,this.numProfilesFound=0}ngOnInit(){this.engagement.getPreviousAnalysisData("PROFILE-STATS").subscribe(t=>{this.previousLogs=t.sort((a,r)=>r.date-a.date),console.log("previous profiles: ",this.previousLogs)})}getProfileData(){var t=this;return(0,le.Z)(function*(){t.dataLoaded=!1;let a=t.range.get("start").value?t.range.get("start").value:"empty",r=t.range.get("end").value?t.range.get("end").value:"empty";return new Promise((o,s)=>{t.statsService.getProfileDataByDate(a,r).subscribe(function(){var c=(0,le.Z)(function*(u){console.log("Profiles returned for given dates: ",u),yield t.calculateStats(u),t.numProfilesFound=u.length,t.dataLoaded=!0,o()});return function(u){return c.apply(this,arguments)}}())})})()}calculateStats(t){var a=this;return(0,le.Z)(function*(){let r={};console.log("PROFILES TO CALCULATE: ",t),t.forEach(s=>{if(void 0!==(s=s[0])){if(s.age&&(r.age||(r.age=[]),r.age.push(s.age)),s.country&&(r.country||(r.country=[]),r.country.push(s.country)),s.county&&(r.county||(r.county=[]),r.county.push(s.county)),s.dialectPreference&&(r.dialectPreference||(r.dialectPreference=[]),r.dialectPreference.push(s.dialectPreference)),s.gender&&(r.gender||(r.gender=[]),r.gender.push(s.gender)),s.fatherNativeTongue&&(r.fatherNativeTongue||(r.fatherNativeTongue=[]),r.fatherNativeTongue.push(s.fatherNativeTongue.toLowerCase())),s.irishMedia){r.irishMedia||(r.irishMedia=[]);for(let c in s.irishMedia)s.irishMedia[c]&&r.irishMedia.push(c)}if(s.howOftenMedia&&(r.howOftenMedia||(r.howOftenMedia=[]),r.howOftenMedia.push(s.howOftenMedia)),s.irishReading){r.irishReading||(r.irishReading=[]);for(let c in s.irishMedia)s.irishReading[c]&&r.irishReading.push(c)}if(s.howOftenReading&&(r.howOftenReading||(r.howOftenReading=[]),r.howOftenReading.push(s.howOftenReading)),s.irishWriting){r.irishWriting||(r.irishWriting=[]);for(let c in s.irishWriting)s.irishWriting[c]&&r.irishWriting.push(c)}if(s.howOftenWriting&&(r.howOftenWriting||(r.howOftenWriting=[]),r.howOftenWriting.push(s.howOftenWriting)),s.immersionCourse&&(r.immersionCourse||(r.immersionCourse=[]),r.immersionCourse.push(s.immersionCourse)),s.motherNativeTongue&&(r.motherNativeTongue||(r.motherNativeTongue=[]),r.motherNativeTongue.push(s.motherNativeTongue.toLowerCase())),s.nativeSpeakerStatus&&(r.nativeSpeakerStatus||(r.nativeSpeakerStatus=[]),r.nativeSpeakerStatus.push(s.nativeSpeakerStatus)),s.notFromIreland&&(r.notFromIreland||(r.notFromIreland=[]),r.notFromIreland.push(s.notFromIreland)),s.otherCountryOfStudy&&(r.otherCountryOfStudy||(r.otherCountryOfStudy=[]),r.otherCountryOfStudy.push(s.otherCountryOfStudy.toLowerCase())),s.otherLanguageProficiency&&(r.otherLanguageProficiency||(r.otherLanguageProficiency=[]),r.otherLanguageProficiency.push(s.otherLanguageProficiency.toLowerCase())),s.otherLanguages&&(r.otherLanguages||(r.otherLanguages=[]),r.otherLanguages.push(s.otherLanguages.toLowerCase())),s.otherPostgradStudies&&(r.otherPostgradStudies||(r.otherPostgradStudies=[]),r.otherPostgradStudies.push(s.otherPostgradStudies.toLowerCase())),s.otherStudies&&(r.otherStudies||(r.otherStudies=[]),r.otherStudies.push(s.otherStudies.toLowerCase())),s.postgradYear&&(r.postgradYear||(r.postgradYear=[]),r.postgradYear.push(s.postgradYear)),s.primaryYear&&(r.primaryYear||(r.primaryYear=[]),r.primaryYear.push(s.primaryYear)),s.secondaryYear&&(r.secondaryYear||(r.secondaryYear=[]),r.secondaryYear.push(s.secondaryYear)),s.speakWith&&(r.speakWith||(r.speakWith=[]),r.speakWith.push(s.speakWith)),s.speakingFrequency&&(r.speakingFrequency||(r.speakingFrequency=[]),r.speakingFrequency.push(s.speakingFrequency)),s.spokenComprehensionLevel&&(r.spokenComprehensionLevel||(r.spokenComprehensionLevel=[]),r.spokenComprehensionLevel.push(s.spokenComprehensionLevel)),s.studentSchoolLevel&&(r.studentSchoolLevel||(r.studentSchoolLevel=[]),r.studentSchoolLevel.push(s.studentSchoolLevel)),s.studentSchoolType&&(r.studentSchoolType||(r.studentSchoolType=[]),r.studentSchoolType.push(s.studentSchoolType)),s.synthOpinion&&(r.synthOpinion||(r.synthOpinion=[]),r.synthOpinion.push(s.synthOpinion)),s.teacherPrimaryType&&(r.teacherPrimaryType||(r.teacherPrimaryType=[]),r.teacherPrimaryType.push(s.teacherPrimaryType)),s.teacherSecondaryType&&(r.teacherSecondaryType||(r.teacherSecondaryType=[]),r.teacherSecondaryType.push(s.teacherSecondaryType)),s.teacherSchoolTypes){r.teacherSchoolTypes||(r.teacherSchoolTypes=[]);for(let c in s.teacherSchoolTypes)s.teacherSchoolTypes[c]&&r.teacherSchoolTypes.push(c)}s.thirdLevelOption&&(r.thirdLevelOption||(r.thirdLevelOption=[]),r.thirdLevelOption.push(s.thirdLevelOption)),s.thirdLevelYear&&(r.thirdLevelYear||(r.thirdLevelYear=[]),r.thirdLevelYear.push(s.thirdLevelYear)),s.usaOption&&(r.usaOption||(r.usaOption=[]),r.usaOption.push(s.usaOption)),s.yearsOfIrish&&(r.yearsOfIrish||(r.yearsOfIrish=[]),r.yearsOfIrish.push(s.yearsOfIrish))}});let o={};console.log("totals: ",r),o.age=yield a.getTotals(r.age),o.country=yield a.getTotals(r.country),o.county=yield a.getTotals(r.county),o.dialectPreference=yield a.getTotals(r.dialectPreference),o.gender=yield a.getTotals(r.gender),o.fatherNativeTongue=yield a.getTotals(r.fatherNativeTongue),o.irishMedia=yield a.getTotals(r.irishMedia),o.howOftenMedia=yield a.getTotals(r.howOftenMedia),o.irishReading=yield a.getTotals(r.irishReading),o.howOftenReading=yield a.getTotals(r.howOftenReading),o.irishWriting=yield a.getTotals(r.irishWriting),o.howOftenWriting=yield a.getTotals(r.howOftenWriting),o.immersionCourse=yield a.getTotals(r.immersionCourse),o.motherNativeTongue=yield a.getTotals(r.motherNativeTongue),o.nativeSpeakerStatus=yield a.getTotals(r.nativeSpeakerStatus),o.notFromIreland=yield a.getTotals(r.notFromIreland),o.otherCountryOfStudy=yield a.getTotals(r.otherCountryOfStudy),o.otherLanguageProficiency=yield a.getTotals(r.otherLanguageProficiency),o.otherLanguages=yield a.getTotals(r.otherLanguages),o.otherPostgradStudies=yield a.getTotals(r.otherPostgradStudies),o.otherStudies=yield a.getTotals(r.otherStudies),o.postgradYear=yield a.getTotals(r.postgradYear),o.primaryYear=yield a.getTotals(r.primaryYear),o.secondaryYear=yield a.getTotals(r.secondaryYear),o.speakWith=yield a.getTotals(r.speakWith),o.speakingFrequency=yield a.getTotals(r.speakingFrequency),o.spokenComprehensionLevel=yield yield a.getTotals(r.spokenComprehensionLevel),o.studentSchoolLevel=yield a.getTotals(r.studentSchoolLevel),o.studentSchoolType=yield a.getTotals(r.studentSchoolType),o.synthOpinion=yield a.getTotals(r.synthOpinion),o.teacherPrimaryType=yield a.getTotals(r.teacherPrimaryType),o.teacherSecondaryType=yield a.getTotals(r.teacherSecondaryType),o.teacherSchoolTypes=yield a.getTotals(r.teacherSchoolTypes),o.thirdLevelOption=yield a.getTotals(r.thirdLevelOption),o.usaOption=yield a.getTotals(r.usaOption),o.yearsOfIrish=yield a.getTotals(r.yearsOfIrish),a.setDataToDisplay(o)})()}getTotals(t){return(0,le.Z)(function*(){let a={};return t&&t.forEach(r=>a[r]=(a[r]||0)+1),a})()}addNewProfileData(){var t=this;return(0,le.Z)(function*(){if(t.dataLoaded=!1,t.previousLogs.length>0){let a=t.previousLogs[t.previousLogs.length-1];console.log(t.previousLogs),console.log("Last log: ",a),new Promise((r,o)=>{t.statsService.getProfileDataByDate(a.date,"empty").subscribe(function(){var s=(0,le.Z)(function*(c){yield t.calculateStats(c),console.log("Most recent added data: ",t.dataToDisplay);let u={},g={};Object.keys(t.dataToDisplay).forEach(l=>{a.statsData[l]?g=a.statsData[l]:(u[l]={},g={}),Object.entries(t.dataToDisplay[l]).forEach(([p,h])=>{g[p]=a.statsData[l]&&a.statsData[l][p]?h+a.statsData[l][p]:h}),u[l]=g}),console.log("Profile to log: ",u),t.engagement.addAnalysisEvent($n.tw["PROFILE-STATS"],u),t.setDataToDisplay(u),t.ngOnInit(),r()});return function(c){return s.apply(this,arguments)}}())})}else yield t.getProfileData(),t.engagement.addAnalysisEvent($n.tw["PROFILE-STATS"],t.dataToDisplay);t.dataLoaded=!0})()}setDataToDisplay(t){this.dataLoaded=!1,this.dataToDisplay={},this.dataToDisplay=t,console.log("Data sent to function: ",t),console.log("Profile to display: ",this.dataToDisplay),console.log("previous profiles: ",this.previousLogs.length),this.dataLoaded=!0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(mr),e.Y36(ke.D),e.Y36(Gn.M))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile-stats"]],decls:16,vars:10,consts:[[1,"headerTitle"],[1,"dataOptions"],[1,"option",3,"click"],[1,"adminContent"],["class","datePicker",4,"ngIf"],["class","adminLoaderContainer",4,"ngIf"],["class","profileNumber",4,"ngIf"],[4,"ngIf"],[1,"datePicker"],["appearance","fill"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],[1,"submitButton",3,"click"],["class","logContainer",4,"ngFor","ngForOf"],[1,"logContainer"],[1,"adminLoaderContainer"],[1,"profileNumber"],[1,"profileHeader"],["multi","",1,"displayData"],[1,"panelDescription"],[4,"ngFor","ngForOf"],[1,"sideBySide"],[1,"data"],[1,"dataLabel"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1)(3,"div",2),e.NdJ("click",function(){return a.selectDateRange=!0}),e._uU(4),e.qZA(),e._uU(5," | "),e.TgZ(6,"div",2),e.NdJ("click",function(){return a.selectDateRange=!1}),e._uU(7),e.qZA()(),e.TgZ(8,"div",3),e.YNc(9,pc,17,8,"div",4),e.YNc(10,mc,5,2,"div",4),e.qZA(),e.YNc(11,_c,4,1,"div",5),e.YNc(12,vc,2,2,"div",6),e.YNc(13,Lc,162,89,"div",7),e.YNc(14,Gc,76,41,"div",7),e.YNc(15,nl,85,46,"div",7)),2&t&&(e.xp6(1),e.hij(" ",a.ts.l.profile_stats," "),e.xp6(3),e.hij(" ",a.ts.l.date_range,""),e.xp6(3),e.hij(" ",a.ts.l.previous_data," "),e.xp6(2),e.Q6J("ngIf",a.selectDateRange),e.xp6(1),e.Q6J("ngIf",!a.selectDateRange),e.xp6(1),e.Q6J("ngIf",!a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded&&a.selectDateRange),e.xp6(1),e.Q6J("ngIf",a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded))},dependencies:[Me.P,H.sg,H.O5,V.Fj,V.JJ,V.JL,V.sg,V.u,dn.pp,dn.ib,dn.yz,dn.yK,dn.u4,Be.nW,Be.wx,Be.zY,Be.By,Be._g,Ae.TO,Ae.KE,Ae.hX,Ae.R9,H.uU,H.Nd],styles:[".headerTitle[_ngcontent-%COMP%]{font-size:16pt;padding-top:10px}.dataOptions[_ngcontent-%COMP%]{padding-top:20px;display:flex;align-items:center;justify-content:center}.option[_ngcontent-%COMP%]{padding-right:5px;padding-top:5px}.option[_ngcontent-%COMP%]:hover{color:var(--scealai-green);text-decoration:none;cursor:pointer}.adminContent[_ngcontent-%COMP%]{justify-content:space-around}.container[_ngcontent-%COMP%]{padding-bottom:20px}.datePicker[_ngcontent-%COMP%]{padding-top:10px}.submitButton[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;padding:5px 10px;margin-left:10px;border-radius:5px}.submitButton[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--scealai-dark-green)}.logContainer[_ngcontent-%COMP%]{padding:10px}.profileNumber[_ngcontent-%COMP%]{text-align:left;padding-left:20px}.profileHeader[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:14pt}.displayData[_ngcontent-%COMP%]{padding:20px}.sideBySide[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding-left:30%;padding-right:20%;text-align:left}.dataLabel[_ngcontent-%COMP%]{font-size:12pt;font-weight:700;padding-bottom:5px}.data[_ngcontent-%COMP%]{text-align:left;padding-left:40%}"]}),n})();function al(n,i){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.ts.l.invalid_start_date)}}function rl(n,i){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.ts.l.invalid_end_date)}}function ol(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"mat-form-field",8)(2,"mat-label"),e._uU(3),e.qZA(),e.TgZ(4,"mat-date-range-input",9),e._UZ(5,"input",10)(6,"input",11),e.qZA(),e._UZ(7,"mat-datepicker-toggle",12)(8,"mat-date-range-picker",null,13),e.YNc(10,al,2,1,"mat-error",6),e.YNc(11,rl,2,1,"mat-error",6),e.qZA(),e.TgZ(12,"div"),e._uU(13),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"div",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.getFeatureData())}),e._uU(16),e.qZA()()}if(2&n){const t=e.MAs(9),a=e.oxw();e.xp6(3),e.Oqu(a.ts.l.enter_date_range),e.xp6(1),e.Q6J("formGroup",a.range)("rangePicker",t),e.xp6(3),e.Q6J("for",t),e.xp6(3),e.Q6J("ngIf",a.range.controls.start.hasError("matStartDateInvalid")),e.xp6(1),e.Q6J("ngIf",a.range.controls.end.hasError("matEndDateInvalid")),e.xp6(2),e.hij(" (",a.ts.l.no_date_range_entered,") "),e.xp6(3),e.Oqu(a.ts.l.get_data)}}function sl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",14),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.displayLog(o.statsData))}),e._uU(2),e.ALo(3,"date"),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,t.date,"d/M/yy, h:mm a")," ")}}function cl(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,sl,4,4,"div",15),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.previousFeatures)}}function ll(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",7),e.YNc(1,cl,2,1,"div",6),e._UZ(2,"br")(3,"hr"),e.TgZ(4,"div",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addNewFeatureData())}),e._uU(5),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.previousFeatures),e.xp6(4),e.Oqu(t.ts.l.add_data_log)}}function dl(n,i){if(1&n&&(e.TgZ(0,"div",17)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.ts.l.compiling_data)}}function fl(n,i){if(1&n&&(e.TgZ(0,"mat-card")(1,"div",19)(2,"mat-card-content")(3,"div",20)(4,"b"),e._uU(5),e.qZA()()(),e.TgZ(6,"mat-card-content")(7,"div",21),e._uU(8),e.qZA()()()()),2&n){const t=i.$implicit;e.xp6(5),e.hij("",t.key," : "),e.xp6(3),e.Oqu(t.value)}}function ul(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,fl,9,2,"mat-card",18),e.ALo(2,"keyvalue"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.featureCounts,t.valueOrder))}}let pl=(()=>{class n{constructor(t,a,r){this.statsService=t,this.ts=a,this.engagement=r,this.range=new V.nJ({start:new V.p4,end:new V.p4}),this.previousFeatures=[],this.selectDateRange=!0,this.dataLoaded=!0,this.featureCounts={},this.valueOrder=(o,s)=>o.value>s.value?-1:s.value>o.value?1:0}ngOnInit(){this.engagement.getPreviousAnalysisData("FEATURE-STATS").subscribe(t=>{this.previousFeatures=t.sort((a,r)=>r.date-a.date)})}getFeatureData(){var t=this;return(0,le.Z)(function*(){t.dataLoaded=!1;let a=t.range.get("start").value?t.range.get("start").value:"empty",r=t.range.get("end").value?t.range.get("end").value:"empty";return new Promise((o,s)=>{t.statsService.getFeatureDataByDate(a,r).subscribe(function(){var c=(0,le.Z)(function*(u){t.featureCounts=u,t.dataLoaded=!0,o()});return function(u){return c.apply(this,arguments)}}())})})()}addNewFeatureData(){var t=this;return(0,le.Z)(function*(){if(t.previousFeatures.length>0){let a=t.previousFeatures[t.previousFeatures.length-1];new Promise((r,o)=>{t.statsService.getFeatureDataSinceLog(a.date).subscribe(function(){var s=(0,le.Z)(function*(c){let u=c;0!=Object.keys(u).length&&(Object.entries(a.statsData).forEach(([g,l])=>{u[g]=u[g]?l+u[g]:l}),t.engagement.addAnalysisEvent($n.tw["FEATURE-STATS"],u)),r()});return function(c){return s.apply(this,arguments)}}())})}else yield t.getFeatureData(),t.engagement.addAnalysisEvent($n.tw["FEATURE-STATS"],t.featureCounts);t.ngOnInit()})()}displayLog(t){this.featureCounts=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(mr),e.Y36(ke.D),e.Y36(Gn.M))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-feature-stats"]],decls:13,vars:7,consts:[[1,"headerTitle"],[1,"dataOptions"],[1,"option",3,"click"],[1,"adminContent"],["class","datePicker",4,"ngIf"],["class","adminLoaderContainer",4,"ngIf"],[4,"ngIf"],[1,"datePicker"],["appearance","fill"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],[1,"submitButton",3,"click"],["style","padding:10px",4,"ngFor","ngForOf"],[2,"padding","10px"],[1,"adminLoaderContainer"],[4,"ngFor","ngForOf"],[1,"card"],[1,"featureName"],[1,"featureValue"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1)(3,"div",2),e.NdJ("click",function(){return a.selectDateRange=!0}),e._uU(4),e.qZA(),e._uU(5," | "),e.TgZ(6,"div",2),e.NdJ("click",function(){return a.selectDateRange=!1}),e._uU(7),e.qZA()(),e.TgZ(8,"div",3),e.YNc(9,ol,17,8,"div",4),e.YNc(10,ll,6,2,"div",4),e.qZA(),e.YNc(11,dl,4,1,"div",5),e.YNc(12,ul,3,4,"div",6)),2&t&&(e.xp6(1),e.hij(" ",a.ts.l.scealai_feature_statistics," "),e.xp6(3),e.hij(" ",a.ts.l.date_range,""),e.xp6(3),e.hij(" ",a.ts.l.previous_data," "),e.xp6(2),e.Q6J("ngIf",a.selectDateRange),e.xp6(1),e.Q6J("ngIf",!a.selectDateRange),e.xp6(1),e.Q6J("ngIf",!a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded))},dependencies:[Me.P,H.sg,H.O5,V.Fj,V.JJ,V.JL,V.sg,V.u,Lt.a8,Lt.dn,Be.nW,Be.wx,Be.zY,Be.By,Be._g,Ae.TO,Ae.KE,Ae.hX,Ae.R9,H.uU,H.Nd],styles:[".headerTitle[_ngcontent-%COMP%]{font-size:16pt;padding-top:10px}.dataOptions[_ngcontent-%COMP%]{padding-top:20px;display:flex;align-items:center;justify-content:center}.option[_ngcontent-%COMP%]{padding-right:5px;padding-top:5px}.option[_ngcontent-%COMP%]:hover{color:var(--scealai-green);text-decoration:none;cursor:pointer}.adminContent[_ngcontent-%COMP%]{justify-content:space-around}.datePicker[_ngcontent-%COMP%]{padding-top:10px}.submitButton[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;padding:5px 10px;margin-left:10px;border-radius:5px}.submitButton[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--scealai-dark-green)}.card[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:10px;text-align:center}.featureName[_ngcontent-%COMP%]{font-size:14pt;font-weight:700;text-align:center}.featureValue[_ngcontent-%COMP%]{font-size:14pt;padding-left:20px;text-align:center}"]}),n})();var oe=M(7155),hl=M(4385),gl=M(3238),ml=M(4859),Ei=M(4144),zn=M(7974),Ft=M(6308);function _l(n,i){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Type"),e.qZA())}function vl(n,i){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(null==t.prompt?null:t.prompt.topic)}}function bl(n,i){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Level"),e.qZA())}function xl(n,i){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",null!=t.prompt&&t.prompt.level?t.prompt.level:"---"," ")}}function yl(n,i){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Dialect"),e.qZA())}function Cl(n,i){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",null!=t.prompt&&t.prompt.dialect?t.prompt.dialect:"---"," ")}}function Tl(n,i){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Text"),e.qZA())}function Zl(n,i){if(1&n&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",null==t.prompt?null:t.prompt.text," ")}}function Al(n,i){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Last Updated"),e.qZA())}function wl(n,i){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.lastUpdated,"medium")," ")}}function Sl(n,i){1&n&&e._UZ(0,"tr",19)}function Ml(n,i){1&n&&e._UZ(0,"tr",20)}function Ol(n,i){if(1&n&&(e.TgZ(0,"tr",21)(1,"td",22),e._uU(2),e.qZA()()),2&n){e.oxw();const t=e.MAs(5);e.xp6(2),e.hij(' No data matching the filter "',t.value,'" ')}}const Pl=function(){return[5,10,25,100]};let ql=(()=>{class n{constructor(){this.promptTableColumns=["topic","level","dialect","text","date"],this.hideTable=!0}ngOnInit(){}ngOnChanges(){this.data&&(this.data.paginator=this.paginator,this.data.sort=this.sort)}applyFilter(t){this.data.filter=t.target.value.trim().toLowerCase(),this.data.paginator&&this.data.paginator.firstPage()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-prompt-data-table"]],viewQuery:function(t,a){if(1&t&&(e.Gf(zn.NW,5),e.Gf(Ft.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(a.paginator=r.first),e.iGM(r=e.CRH())&&(a.sort=r.first)}},inputs:{data:"data"},features:[e.TTD],decls:26,vars:6,consts:[[3,"hidden"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","topic"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","level"],["matColumnDef","dialect"],["matColumnDef","text"],["mat-cell","","class","example-container",4,"matCellDef"],["matColumnDef","date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",1,"example-container"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"mat-form-field")(2,"mat-label"),e._uU(3,"Filter"),e.qZA(),e.TgZ(4,"input",1,2),e.NdJ("keyup",function(o){return a.applyFilter(o)}),e.qZA()(),e.TgZ(6,"table",3),e.ynx(7,4),e.YNc(8,_l,2,0,"th",5),e.YNc(9,vl,2,1,"td",6),e.BQk(),e.ynx(10,7),e.YNc(11,bl,2,0,"th",5),e.YNc(12,xl,2,1,"td",6),e.BQk(),e.ynx(13,8),e.YNc(14,yl,2,0,"th",5),e.YNc(15,Cl,2,1,"td",6),e.BQk(),e.ynx(16,9),e.YNc(17,Tl,2,0,"th",5),e.YNc(18,Zl,2,1,"td",10),e.BQk(),e.ynx(19,11),e.YNc(20,Al,2,0,"th",5),e.YNc(21,wl,3,4,"td",6),e.BQk(),e.YNc(22,Sl,1,0,"tr",12),e.YNc(23,Ml,1,0,"tr",13),e.YNc(24,Ol,3,1,"tr",14),e.qZA(),e._UZ(25,"mat-paginator",15),e.qZA()),2&t&&(e.Q6J("hidden",a.hideTable),e.xp6(6),e.Q6J("dataSource",a.data),e.xp6(16),e.Q6J("matHeaderRowDef",a.promptTableColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.promptTableColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(5,Pl)))},dependencies:[Ae.KE,Ae.hX,oe.BZ,oe.fO,oe.as,oe.w1,oe.Dz,oe.nj,oe.ge,oe.ev,oe.XQ,oe.Gk,oe.Ee,Ei.Nt,zn.NW,Ft.YE,Ft.nU,H.uU],styles:["table[_ngcontent-%COMP%]{width:100%;text-align:left}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left!important;vertical-align:middle!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:space-evenly!important}.example-container[_ngcontent-%COMP%]{overflow-x:scroll;max-width:60px;text-align:left!important}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}"]}),n})();function Ul(n,i){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Part of speech"),e.qZA())}function Dl(n,i){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",null==t.partOfSpeechData?null:t.partOfSpeechData.partOfSpeech," ")}}function Nl(n,i){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Word"),e.qZA())}function kl(n,i){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",null==t.partOfSpeechData?null:t.partOfSpeechData.word," ")}}function El(n,i){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Translation"),e.qZA())}function Ll(n,i){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",null==t.partOfSpeechData?null:t.partOfSpeechData.translation," ")}}function Fl(n,i){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Last Updated"),e.qZA())}function Il(n,i){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.lastUpdated,"medium")," ")}}function Yl(n,i){1&n&&e._UZ(0,"tr",16)}function jl(n,i){1&n&&e._UZ(0,"tr",17)}function Rl(n,i){if(1&n&&(e.TgZ(0,"tr",18)(1,"td",19),e._uU(2),e.qZA()()),2&n){e.oxw();const t=e.MAs(5);e.xp6(2),e.hij(' No data matching the filter "',t.value,'" ')}}const Jl=function(){return[5,10,25,100]};let Hl=(()=>{class n{constructor(){this.posTableColumns=["pos","word","translation","date"],this.hideTable=!0}ngOnInit(){}ngOnChanges(){this.data&&(this.data.paginator=this.paginator,this.data.sort=this.sort,console.log(this.data))}applyFilter(t){this.data.filter=t.target.value.trim().toLowerCase(),console.log(this.data),this.data.paginator&&this.data.paginator.firstPage()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-pos-data-table"]],viewQuery:function(t,a){if(1&t&&(e.Gf(zn.NW,5),e.Gf(Ft.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(a.paginator=r.first),e.iGM(r=e.CRH())&&(a.sort=r.first)}},inputs:{data:"data"},features:[e.TTD],decls:23,vars:6,consts:[[3,"hidden"],["matInput","","placeholder","Ex. noun",3,"keyup"],["input",""],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","pos"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","word"],["matColumnDef","translation"],["matColumnDef","date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"mat-form-field")(2,"mat-label"),e._uU(3,"Filter"),e.qZA(),e.TgZ(4,"input",1,2),e.NdJ("keyup",function(o){return a.applyFilter(o)}),e.qZA()(),e.TgZ(6,"table",3),e.ynx(7,4),e.YNc(8,Ul,2,0,"th",5),e.YNc(9,Dl,2,1,"td",6),e.BQk(),e.ynx(10,7),e.YNc(11,Nl,2,0,"th",5),e.YNc(12,kl,2,1,"td",6),e.BQk(),e.ynx(13,8),e.YNc(14,El,2,0,"th",5),e.YNc(15,Ll,2,1,"td",6),e.BQk(),e.ynx(16,9),e.YNc(17,Fl,2,0,"th",5),e.YNc(18,Il,3,4,"td",6),e.BQk(),e.YNc(19,Yl,1,0,"tr",10),e.YNc(20,jl,1,0,"tr",11),e.YNc(21,Rl,3,1,"tr",12),e.qZA(),e._UZ(22,"mat-paginator",13),e.qZA()),2&t&&(e.Q6J("hidden",a.hideTable),e.xp6(6),e.Q6J("dataSource",a.data),e.xp6(13),e.Q6J("matHeaderRowDef",a.posTableColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.posTableColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(5,Jl)))},dependencies:[Ae.KE,Ae.hX,oe.BZ,oe.fO,oe.as,oe.w1,oe.Dz,oe.nj,oe.ge,oe.ev,oe.XQ,oe.Gk,oe.Ee,Ei.Nt,zn.NW,Ft.YE,Ft.nU,H.uU],styles:["table[_ngcontent-%COMP%]{width:100%;text-align:left}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left!important;vertical-align:middle!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:space-evenly!important}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}"]}),n})();const Bl=["promptDataTable"],Gl=["posDataTable"];function $l(n,i){if(1&n&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.errorMessage)}}function zl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",10)(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Part of Speech"),e.qZA(),e.TgZ(5,"mat-select",3),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedPOS=r)}),e.TgZ(6,"mat-option",11),e._uU(7),e.qZA(),e.TgZ(8,"mat-option",12),e._uU(9),e.qZA(),e.TgZ(10,"mat-option",13),e._uU(11),e.qZA(),e.TgZ(12,"mat-option",14),e._uU(13),e.qZA(),e.TgZ(14,"mat-option",15),e._uU(15),e.qZA(),e.TgZ(16,"mat-option",16),e._uU(17),e.qZA(),e.TgZ(18,"mat-option",17),e._uU(19),e.qZA(),e.TgZ(20,"mat-option",18),e._uU(21),e.qZA()()(),e.TgZ(22,"mat-form-field",2)(23,"mat-label"),e._uU(24,"Word"),e.qZA(),e.TgZ(25,"input",19),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.posWord=r)}),e.qZA()(),e.TgZ(26,"mat-form-field",2)(27,"mat-label"),e._uU(28,"Translation"),e.qZA(),e.TgZ(29,"input",19),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.posTranslation=r)}),e.qZA()(),e.YNc(30,$l,2,1,"div",20),e.TgZ(31,"button",21),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addPOSContent())}),e._uU(32," Add "),e.qZA()(),e.TgZ(33,"button",21),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.toggleTable("pos"))}),e._uU(34),e.qZA()()}if(2&n){const t=e.oxw(),a=e.MAs(16);e.xp6(5),e.Q6J("ngModel",t.selectedPOS),e.xp6(2),e.Oqu(t.ts.l.noun),e.xp6(2),e.Oqu(t.ts.l.verb),e.xp6(2),e.Oqu(t.ts.l.adjective),e.xp6(2),e.Oqu(t.ts.l.preposition),e.xp6(2),e.Oqu(t.ts.l.adverb),e.xp6(2),e.Oqu(t.ts.l.pronoun),e.xp6(2),e.Oqu(t.ts.l.article),e.xp6(2),e.Oqu(t.ts.l.conjunction),e.xp6(4),e.Q6J("ngModel",t.posWord),e.xp6(4),e.Q6J("ngModel",t.posTranslation),e.xp6(1),e.Q6J("ngIf",t.errorMessage),e.xp6(4),e.hij(" ",a.hideTable?"Show Data":"Hide Data"," ")}}function Ql(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",2)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",3),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectedDialect=r)}),e.TgZ(4,"mat-option",29),e._uU(5),e.qZA(),e.TgZ(6,"mat-option",30),e._uU(7),e.qZA(),e.TgZ(8,"mat-option",31),e._uU(9),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.choose_dialect),e.xp6(1),e.Q6J("ngModel",t.selectedDialect),e.xp6(2),e.Oqu(t.ts.l.munster),e.xp6(2),e.Oqu(t.ts.l.connacht),e.xp6(2),e.Oqu(t.ts.l.ulster)}}function Wl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",2)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",3),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectedLevel=r)}),e.TgZ(4,"mat-option",32),e._uU(5),e.qZA(),e.TgZ(6,"mat-option",33),e._uU(7),e.qZA(),e.TgZ(8,"mat-option",34),e._uU(9),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.choose_level),e.xp6(1),e.Q6J("ngModel",t.selectedLevel),e.xp6(2),e.hij(" ",t.ts.l.level_preferences[0]," "),e.xp6(2),e.hij(" ",t.ts.l.level_preferences[1]," "),e.xp6(2),e.hij(" ",t.ts.l.level_preferences[2]," ")}}function Kl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",2)(1,"mat-label"),e._uU(2,"Prompt Text"),e.qZA(),e.TgZ(3,"input",19),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.promptText=r)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.promptText)}}function Vl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",2)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",19),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectedCharacter=r)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.character),e.xp6(1),e.Q6J("ngModel",t.selectedCharacter)}}function Xl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",2)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",19),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectedSetting=r)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.setting),e.xp6(1),e.Q6J("ngModel",t.selectedSetting)}}function ed(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",2)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",19),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectedTheme=r)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.theme),e.xp6(1),e.Q6J("ngModel",t.selectedTheme)}}function td(n,i){if(1&n&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.errorMessage)}}function nd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",10)(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Prompt Generator"),e.qZA(),e.TgZ(5,"mat-select",3),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedPromptGenerator=r)}),e.TgZ(6,"mat-option",23),e._uU(7),e.qZA(),e.TgZ(8,"mat-option",24),e._uU(9),e.qZA(),e.TgZ(10,"mat-option",25),e._uU(11),e.qZA(),e.TgZ(12,"mat-option",26),e._uU(13),e.qZA(),e.TgZ(14,"mat-option",27),e._uU(15),e.qZA()()(),e.YNc(16,Ql,10,5,"mat-form-field",28),e.YNc(17,Wl,10,5,"mat-form-field",28),e.YNc(18,Kl,4,1,"mat-form-field",28),e.YNc(19,Vl,4,2,"mat-form-field",28),e.YNc(20,Xl,4,2,"mat-form-field",28),e.YNc(21,ed,4,2,"mat-form-field",28),e.YNc(22,td,2,1,"div",20),e.TgZ(23,"button",21),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addPromptContent())}),e._uU(24," Add "),e.qZA()(),e.TgZ(25,"button",21),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.toggleTable("prompt"))}),e._uU(26),e.qZA()()}if(2&n){const t=e.oxw(),a=e.MAs(14);e.xp6(5),e.Q6J("ngModel",t.selectedPromptGenerator),e.xp6(2),e.Oqu(t.ts.l.exam_prompts),e.xp6(2),e.Oqu(t.ts.l.proverb_prompts),e.xp6(2),e.Oqu(t.ts.l.lara_prompts),e.xp6(2),e.Oqu(t.ts.l.combination_generator),e.xp6(2),e.Oqu(t.ts.l.general_prompts),e.xp6(1),e.Q6J("ngIf","proverb"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator||"exam"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"!==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf",t.errorMessage),e.xp6(4),e.hij(" ",a.hideTable?"Show Data":"Hide Data"," ")}}let id=(()=>{class n{constructor(t,a,r){this.auth=t,this.http=a,this.ts=r,this.selectedContent="",this.selectedPOS="",this.promptText="",this.posWord="",this.posTranslation="",this.selectedPromptGenerator="",this.selectedDialect="",this.selectedLevel="",this.selectedCharacter="",this.selectedSetting="",this.selectedTheme="",this.errorMessage=""}ngOnInit(){this.getData("partOfSpeech"),this.getData("prompt")}getData(t){const a={Authorization:"Bearer "+this.auth.getToken()};this.http.get(Ee.Z.baseurl+"prompt/getData/"+t,{headers:a}).subscribe({next:r=>{"partOfSpeech"==t?this.posDataSource=new oe.by(r):this.promptDataSource=new oe.by(r)},error:r=>{console.log(r)}})}addPOSContent(){if(!this.selectedPOS||!this.posWord||!this.posTranslation)return void(this.errorMessage="Please fill in all information");const t={Authorization:"Bearer "+this.auth.getToken()};this.http.post(Ee.Z.baseurl+"prompt/addContent/",{type:this.selectedContent,partOfSpeechData:{partOfSpeech:this.selectedPOS,word:this.posWord,translation:this.posTranslation}},{headers:t}).subscribe({next:()=>{this.selectedPOS="",this.posWord="",this.posTranslation="",this.errorMessage="",this.getData("partOfSpeech")},error:r=>{this.errorMessage="Entry already exists"}})}addPromptContent(){if(!this.selectedPromptGenerator)return void(this.errorMessage="Please select a generator");if(!("proverb"!=this.selectedPromptGenerator||this.selectedDialect&&this.promptText))return void(this.errorMessage="Missing information");if(!("exam"!=this.selectedPromptGenerator||this.selectedLevel&&this.promptText))return void(this.errorMessage="Missing information");if(!("combination"!=this.selectedPromptGenerator||this.selectedLevel&&this.selectedCharacter&&this.selectedSetting&&this.selectedTheme))return void(this.errorMessage="Missing information");const t={Authorization:"Bearer "+this.auth.getToken()},a={type:this.selectedContent,prompt:{topic:this.selectedPromptGenerator,combinationData:{}}};this.promptText&&(a.prompt.text=this.promptText),this.selectedDialect&&(a.prompt.dialect=this.selectedDialect),this.selectedLevel&&(a.prompt.level=this.selectedLevel),this.selectedCharacter&&(a.prompt.combinationData.character=this.selectedCharacter),this.selectedSetting&&(a.prompt.combinationData.setting=this.selectedSetting),this.selectedTheme&&(a.prompt.combinationData.theme=this.selectedTheme),this.http.post(Ee.Z.baseurl+"prompt/addContent/",a,{headers:t}).subscribe({next:()=>{this.selectedPromptGenerator="",this.promptText="",this.selectedDialect="",this.selectedLevel="",this.errorMessage="",this.selectedCharacter="",this.selectedSetting="",this.selectedTheme="",this.getData("prompt")},error:r=>{this.errorMessage="Entry already exists"}})}toggleTable(t){"pos"==t?this.posDataTable.hideTable=!this.posDataTable.hideTable:this.promptDataTable.hideTable=!this.promptDataTable.hideTable}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(gr.$),e.Y36(Pe.eN),e.Y36(ke.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-content"]],viewQuery:function(t,a){if(1&t&&(e.Gf(Bl,5),e.Gf(Gl,5)),2&t){let r;e.iGM(r=e.CRH())&&(a.promptDataTable=r.first),e.iGM(r=e.CRH())&&(a.posDataTable=r.first)}},decls:17,vars:5,consts:[[1,"mainContainer"],[1,"headerTitle"],["appearance","fill"],[3,"ngModel","ngModelChange"],["value","partOfSpeech"],["value","prompt"],[4,"ngIf"],[3,"data"],["promptDataTable",""],["posDataTable",""],[1,"posFields"],["value","noun"],["value","verb"],["value","adjective"],["value","preposition"],["value","adverb"],["value","pronoun"],["value","article"],["value","conjunction"],["matInput","",3,"ngModel","ngModelChange"],["class","errorText",4,"ngIf"],["mat-raised-button","",1,"viewDataBtn",3,"click"],[1,"errorText"],["value","exam"],["value","proverb"],["value","lara"],["value","combination"],["value","general"],["appearance","fill",4,"ngIf"],["value","munster"],["value","connacht"],["value","ulster"],["value","jc"],["value","lcol"],["value","lchl"]],template:function(t,a){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Add Data to DB"),e.qZA(),e.TgZ(3,"mat-form-field",2)(4,"mat-label"),e._uU(5,"Select Topic"),e.qZA(),e.TgZ(6,"mat-select",3),e.NdJ("ngModelChange",function(s){return a.selectedContent=s})("ngModelChange",function(){e.CHM(r);const s=e.MAs(16),c=e.MAs(14);return s.hideTable=!0,e.KtG(c.hideTable=!0)}),e.TgZ(7,"mat-option",4),e._uU(8,"Part of Speech Data"),e.qZA(),e.TgZ(9,"mat-option",5),e._uU(10,"Prompt Data"),e.qZA()()(),e.YNc(11,zl,35,13,"div",6),e.YNc(12,nd,27,14,"div",6),e.qZA(),e._UZ(13,"app-prompt-data-table",7,8)(15,"app-pos-data-table",7,9)}2&t&&(e.xp6(6),e.Q6J("ngModel",a.selectedContent),e.xp6(5),e.Q6J("ngIf","partOfSpeech"==a.selectedContent),e.xp6(1),e.Q6J("ngIf","prompt"==a.selectedContent),e.xp6(1),e.Q6J("data",a.promptDataSource),e.xp6(2),e.Q6J("data",a.posDataSource))},dependencies:[H.O5,V.Fj,V.JJ,V.On,Ae.KE,Ae.hX,hl.gD,gl.ey,ml.lW,Ei.Nt,ql,Hl],styles:[".headerTitle[_ngcontent-%COMP%]{font-size:16pt;padding-top:10px;padding-bottom:10px}.mainContainer[_ngcontent-%COMP%]{min-height:50vh;max-height:80vh;padding:20px}.posFields[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-evenly;flex-direction:column}.errorText[_ngcontent-%COMP%]{color:red;padding:10px}.viewDataBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;float:left;margin-left:20px}"]}),n})();var ad=M(1245),rd=M(530);function od(n,i){1&n&&(e.TgZ(0,"span",20),e._uU(1,"s"),e.qZA())}function sd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",21),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.goToClassroom(o._id))}),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",22),e._uU(4),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(t.studentIds.length)}}function cd(n,i){if(1&n&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",18),e._uU(3),e.YNc(4,od,2,0,"span",14),e._uU(5),e.qZA(),e.TgZ(6,"div",16),e.YNc(7,sd,5,2,"div",19),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.user.username,"'"),e.xp6(1),e.Q6J("ngIf","s"!==t.user.username[t.user.username.length-1]),e.xp6(1),e.hij(" ",t.ts.l.classrooms," "),e.xp6(2),e.Q6J("ngForOf",t.classrooms)}}function ld(n,i){1&n&&(e.TgZ(0,"span",20),e._uU(1,"s"),e.qZA())}function dd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",21),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.goToStory(o._id))}),e._uU(1),e.qZA()}if(2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}function fd(n,i){if(1&n&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",18),e._uU(3),e.YNc(4,ld,2,0,"span",14),e._uU(5),e.qZA(),e.TgZ(6,"div",16),e.YNc(7,dd,2,1,"div",19),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.user.username,"'"),e.xp6(1),e.Q6J("ngIf","s"!==(null==t.user?null:t.user.username[t.user.username.length-1])),e.xp6(1),e.hij(" ",t.ts.l.stories," "),e.xp6(2),e.Q6J("ngForOf",t.stories)}}function ud(n,i){1&n&&(e.TgZ(0,"span",20),e._uU(1,"s"),e.qZA())}function pd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.minimiseEvents())}),e._UZ(1,"i",24),e.qZA()}}function hd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.maximiseEvents())}),e._UZ(1,"i",25),e.qZA()}}function gd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",37)(1,"b"),e._uU(2,"Story id"),e.qZA(),e.TgZ(3,"div",38),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,o=e.oxw(3);return e.KtG(o.goToStory(r.storyData._id))}),e._uU(4),e._UZ(5,"i",39),e.qZA()()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(4),e.Oqu(t.storyData._id)}}function md(n,i){if(1&n&&(e.TgZ(0,"div",37)(1,"b"),e._uU(2,"Story text"),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(3),e.Oqu(t.storyData.text)}}function _d(n,i){if(1&n&&(e.TgZ(0,"div",35)(1,"b"),e._uU(2),e.qZA(),e._uU(3),e.YNc(4,gd,6,1,"div",36),e.YNc(5,md,4,1,"div",36),e.qZA()),2&n){const t=e.oxw().$implicit,a=e.oxw(3);e.xp6(2),e.Oqu(a.ts.l.ISODate),e.xp6(1),e.hij("",t.date," "),e.xp6(1),e.Q6J("ngIf",null==t.storyData?null:t.storyData._id),e.xp6(1),e.Q6J("ngIf",null==t.storyData?null:t.storyData.text)}}function vd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",31),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.eventSelected[o._id]=!s.eventSelected[o._id])}),e.TgZ(1,"div",32)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",33),e._uU(5),e.qZA()(),e.YNc(6,_d,6,4,"div",34),e.qZA()}if(2&n){const t=i.$implicit,a=e.oxw(3);e.xp6(3),e.Oqu(t.type),e.xp6(2),e.Oqu(a.getTimeFromDate(t.date)),e.xp6(1),e.Q6J("ngIf",a.eventSelected[t._id])}}function bd(n,i){if(1&n&&(e.TgZ(0,"div",26)(1,"div",27),e._UZ(2,"div",28),e.TgZ(3,"div",29),e._uU(4),e.qZA(),e._UZ(5,"div",28),e.qZA(),e.YNc(6,vd,7,3,"div",30),e.qZA()),2&n){const t=i.$implicit,a=e.oxw(2);e.xp6(4),e.Oqu(a.getFormattedDateOfInitialElementFor(t)),e.xp6(2),e.Q6J("ngForOf",t)}}function xd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._uU(2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"b"),e._uU(6),e.qZA(),e.TgZ(7,"textarea",5),e._uU(8),e.qZA()()(),e.TgZ(9,"div",3)(10,"div",4)(11,"b"),e._uU(12),e.qZA(),e.TgZ(13,"textarea",5),e._uU(14),e.qZA()()(),e.TgZ(15,"div",6)(16,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.openDeleteDialog())}),e._uU(17),e.qZA()(),e.TgZ(18,"div",8),e.YNc(19,cd,8,4,"div",9),e.YNc(20,fd,8,4,"div",9),e.TgZ(21,"div",10)(22,"div",11)(23,"div",12),e._UZ(24,"div",13),e.TgZ(25,"div"),e._uU(26),e.YNc(27,ud,2,0,"span",14),e._uU(28),e.qZA(),e.YNc(29,pd,2,0,"div",15),e.YNc(30,hd,2,0,"div",15),e.qZA(),e.TgZ(31,"div",16),e.YNc(32,bd,7,2,"div",17),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.AsE("",t.ts.l.profile_summary,": '",t.user.username,"'"),e.xp6(4),e.hij("",t.ts.l.username,":"),e.xp6(2),e.Oqu(t.user.username),e.xp6(4),e.hij("",t.ts.l.role,":"),e.xp6(2),e.Oqu(t.user.role),e.xp6(3),e.hij(" ",t.ts.l.delete_this_account," "),e.xp6(2),e.Q6J("ngIf","TEACHER"===(null==t.user?null:t.user.role)),e.xp6(1),e.Q6J("ngIf","STUDENT"===(null==t.user?null:t.user.role)),e.xp6(6),e.hij(" ",t.user.username,"'"),e.xp6(1),e.Q6J("ngIf","s"!==(null==t.user?null:t.user.username[t.user.username.length-1])),e.xp6(1),e.hij(" ",t.ts.l.activity," "),e.xp6(1),e.Q6J("ngIf",t.maximised),e.xp6(1),e.Q6J("ngIf",!t.maximised),e.xp6(2),e.Q6J("ngForOf",t.eventDates)}}let yd=(()=>{class n{constructor(t,a,r,o,s,c,u,g,l,p,h,v){this.route=t,this.http=a,this.storyService=r,this.router=o,this.classroomService=s,this.engagement=c,this.ts=u,this.messageService=g,this.profileService=l,this.userService=p,this.recordingService=h,this.dialog=v,this.eventSelected={},this.allEvents=[],this.maximised=!1,this.baseUrl=Ee.Z.baseurl}ngOnInit(){this.getUserId().then(t=>{this.http.get(this.baseUrl+"user/viewUser",{headers:{_id:t.id.toString()}}).subscribe(a=>{this.user=a,"STUDENT"===this.user.role?this.getStories():"TEACHER"===this.user.role&&this.getClassrooms(),this.engagement.getEventsForUser(this.user._id).subscribe(r=>{let o=r;this.eventDates=[],this.eventDates.push([r[0]]),o.forEach(s=>{if(o.indexOf(s)>0){let c=new Date(s.date);this.roundDate(new Date(this.eventDates[this.eventDates.length-1][0].date)).toString()===this.roundDate(c).toString()?this.eventDates[this.eventDates.length-1].push(s):this.eventDates.push([s])}this.eventSelected[s._id]=!1,this.allEvents.push(s)})})})})}roundDate(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())}formatDate(t){let a=t.getDate(),r=t.getMonth()+1,o=t.getFullYear(),s=a.toString(),c=r.toString();return a<10&&(s="0"+a),r<10&&(c="0"+r),s+"/"+c+"/"+o}getTimeFromDate(t){let a=new Date(t),r=a.getHours().toString(),o=a.getMinutes().toString(),s=a.getSeconds().toString();return a.getHours()<10&&(r="0"+r),a.getMinutes()<10&&(o="0"+o),a.getSeconds()<10&&(s="0"+s),r+":"+o+":"+s}getFormattedDateOfInitialElementFor(t){return this.formatDate(new Date(t[0].date))}eventIsSelected(t){return this.eventSelected[t._id]}minimiseEvents(){this.allEvents.forEach(t=>{this.eventSelected[t._id]=!1}),this.maximised=!1}maximiseEvents(){this.allEvents.forEach(t=>{this.eventSelected[t._id]=!0}),this.maximised=!0}getUserId(){return new Promise((t,a)=>{this.route.params.subscribe(r=>{t(r)})})}getStories(){this.storyService.getStoriesFor(this.user.username).subscribe(t=>{this.stories=t})}getClassrooms(){this.classroomService.getClassroomsForTeacher(this.user._id).subscribe(t=>{this.classrooms=t})}goToStory(t){this.router.navigateByUrl("admin/story/"+t.toString())}goToClassroom(t){this.router.navigateByUrl("admin/classroom/"+t)}deleteAccount(){!this.user||("STUDENT"===this.user.role&&(this.classroomService.getClassroomOfStudent(this.user._id).subscribe(t=>{t&&this.classroomService.removeStudentFromClassroom(t._id,this.user._id).subscribe(()=>{})}),this.storyService.getStoriesFor(this.user.username).subscribe(t=>{for(let a of t)this.recordingService.deleteStoryRecordingAudio(a._id).subscribe(()=>{}),this.recordingService.deleteStoryRecording(a._id).subscribe(()=>{})}),this.storyService.deleteAllStories(this.user._id).subscribe(()=>{})),"TEACHER"===this.user.role&&this.classroomService.deleteClassroomsForTeachers(this.user._id).subscribe(()=>{}),this.messageService.deleteAllMessages(this.user._id).subscribe(()=>{}),this.profileService.deleteProfile(this.user._id).subscribe(()=>{}),this.userService.deleteUser(this.user._id).subscribe(()=>{}),this.router.navigateByUrl("admin/find-user"))}openDeleteDialog(){this.dialogRef=this.dialog.open(Yt.p,{data:{title:this.ts.l.are_you_sure,message:this.ts.l.this_includes_story_data,type:"simpleConfirm",confirmText:this.ts.l.yes,cancelText:this.ts.l.no},width:"50%"}),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=void 0,t&&this.deleteAccount()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ce.gz),e.Y36(Pe.eN),e.Y36(rt.N),e.Y36(Ce.F0),e.Y36(jt.u),e.Y36(Gn.M),e.Y36(ke.D),e.Y36(ad.e),e.Y36(Zt.H),e.Y36(xt.K),e.Y36(rd.s),e.Y36(hn.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user"]],decls:1,vars:1,consts:[["class","content",4,"ngIf"],[1,"content"],[1,"generateCodeTitle"],[1,"userInfoDisplay"],[1,"userInfo"],["readonly","",1,"userInfoTextarea"],[1,"buttonContainer"],[1,"btn","deleteAccountButton",3,"click"],[1,"contentBody"],["class","teacherAccountsContainer",4,"ngIf"],[1,"teacherAccountsContainer"],[1,"teacherAccountsDisplay"],[1,"teacherAccountsHeader","eventContainerHeader"],[2,"width","20px"],["style","margin-right: 8px;",4,"ngIf"],["class","maximiseIconContainer",3,"click",4,"ngIf"],[1,"teacherAccountsBody"],["class","",4,"ngFor","ngForOf"],[1,"teacherAccountsHeader"],["class","activeTeacherCodeContainer whiteBtn",3,"click",4,"ngFor","ngForOf"],[2,"margin-right","8px"],[1,"activeTeacherCodeContainer","whiteBtn",3,"click"],[1,"studentCount"],[1,"maximiseIconContainer",3,"click"],[1,"fas","fa-minus","maximiseIcon"],[1,"fas","fa-plus","maximiseIcon"],[1,""],[1,"dateTextContainer"],[1,"dateLine"],[1,"dateText"],["class","activeTeacherCodeContainer eventContainer whiteBtn",3,"click",4,"ngFor","ngForOf"],[1,"activeTeacherCodeContainer","eventContainer","whiteBtn",3,"click"],[1,"eventHeader"],[1,"eventTime"],["class","eventBody mainEventBody",4,"ngIf"],[1,"eventBody","mainEventBody"],["class","eventBody",4,"ngIf"],[1,"eventBody"],[1,"storyLink",3,"click"],[1,"fas","fa-link","storyLinkIcon"]],template:function(t,a){1&t&&e.YNc(0,xd,33,15,"div",0),2&t&&e.Q6J("ngIf",a.user)},dependencies:[H.sg,H.O5],styles:[".content[_ngcontent-%COMP%]{width:90%;margin-left:5%;padding-top:3vh;height:80vh;display:flex;flex-direction:column}.generateCodeTitle[_ngcontent-%COMP%]{font-size:14pt;display:flex;justify-content:center}.userInfoDisplay[_ngcontent-%COMP%]{width:30%;margin-left:30%;margin-top:2vh}.userInfo[_ngcontent-%COMP%]{float:right;display:flex;align-items:center}.userInfoTextarea[_ngcontent-%COMP%]{background-color:var(--scealai-gray)}.buttonContainer[_ngcontent-%COMP%]{padding-top:15px}.deleteAccountButton[_ngcontent-%COMP%]{background-color:var(--delete-red);font-size:12pt;border-radius:10px}.deleteAccountButton[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover);transition:.5s}.contentBody[_ngcontent-%COMP%]{justify-content:space-evenly}.teacherAccountsContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:40%}.teacherAccountsDisplay[_ngcontent-%COMP%]{margin-top:4vh;width:100%;height:45vh;background-color:var(--scealai-gray);border-radius:5px}.teacherAccountsHeader[_ngcontent-%COMP%]{font-size:14pt;height:5vh;display:flex;align-items:center;justify-content:center;color:#fff;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0}.teacherAccountsBody[_ngcontent-%COMP%]{padding:10px 10px 0;text-align:left;overflow:auto;height:40vh}.activeTeacherCodeContainer[_ngcontent-%COMP%]{background-color:#fff;padding:5px;border-radius:5px;margin-bottom:10px;display:flex}.whiteBtn[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--scealai-med-brown-hover);cursor:pointer}.studentCount[_ngcontent-%COMP%]{margin-left:auto}.eventContainerHeader[_ngcontent-%COMP%]{justify-content:space-between}.maximiseIconContainer[_ngcontent-%COMP%]{margin-right:8px}.dateTextContainer[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;color:#777;margin-bottom:10px}.dateText[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.dateLine[_ngcontent-%COMP%]{height:1px;background-color:#777;width:50%}.eventContainer[_ngcontent-%COMP%]{flex-direction:column}.eventHeader[_ngcontent-%COMP%]{display:flex}.eventTime[_ngcontent-%COMP%]{margin-left:auto}.eventBody[_ngcontent-%COMP%]{display:flex;flex-direction:column}.mainEventBody[_ngcontent-%COMP%]{border-top:1px solid var(--scealai-gray)}.storyLink[_ngcontent-%COMP%]{color:#000;color:inherit}.storyLink[_ngcontent-%COMP%]:hover{text-decoration:none;color:#53ff81;text-decoration:underline}.storyLinkIcon[_ngcontent-%COMP%]{margin-left:5px}"]}),n})();function Cd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.goToStudent(o._id))}),e.TgZ(1,"div"),e._uU(2),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.username)}}let Td=(()=>{class n{constructor(t,a,r,o){this.route=t,this.classroomService=a,this.router=r,this.userService=o,this.students=[]}ngOnInit(){this.getClassroom()}getClassroomId(){var t=this;return(0,le.Z)(function*(){const a=yield(0,Oe.z)(t.route.params);if(a.id)return a.id;throw new Error("classroom id not in route params")})()}getClassroom(){var t=this;return(0,le.Z)(function*(){const a=yield t.getClassroomId();t.classroom=yield(0,Oe.z)(t.classroomService.getClassroom(a)),t.getStudents()})()}getStudents(){for(let t of this.classroom.studentIds)this.userService.getUserById(t).subscribe({next:a=>this.students.push(a),error:()=>console.log(t+" does not exist")})}goToStudent(t){this.router.navigateByUrl("/admin/user/"+t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ce.gz),e.Y36(jt.u),e.Y36(Ce.F0),e.Y36(xt.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-classroom"]],decls:5,vars:2,consts:[[1,"adminClassContainer"],[1,"classHeader"],[1,"classBody"],["class","classroomCard",3,"click",4,"ngFor","ngForOf"],[1,"classroomCard",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,Cd,3,1,"div",3),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",null==a.classroom?null:a.classroom.title," "),e.xp6(2),e.Q6J("ngForOf",a.students))},dependencies:[H.sg],styles:[".adminClassContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%;background-color:var(--scealai-gray);border-radius:5px;margin-top:20px;height:65vh}.classHeader[_ngcontent-%COMP%]{padding-left:12px;font-size:14pt}"]}),n})();var _r=M(1481);function Zd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"textarea",18),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.story.feedback.text=r)})("input",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.feedbackSent=!1)}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.MGl("placeholder","Leave some feedback on ",t.authorPossessive," story"),e.Q6J("ngModel",t.story.feedback.text)}}function Ad(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e._UZ(2,"i",20),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE("",t.ts.l.seen_by," ",null==t.story?null:t.story.author," ")}}function wd(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE("",t.ts.l.not_seen_by," ",null==t.story?null:t.story.author,"")}}function Sd(n,i){if(1&n&&(e.TgZ(0,"div",19),e.YNc(1,Ad,3,2,"span",16),e.YNc(2,wd,2,2,"span",16),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.story.feedback.seenByStudent),e.xp6(1),e.Q6J("ngIf",!t.story.feedback.seenByStudent)}}function Md(n,i){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"audio",21,22),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.audioSource,e.LSH)}}let Od=(()=>{class n{constructor(t,a,r,o,s,c){this.route=t,this.http=a,this.sanitizer=r,this.storyService=o,this.router=s,this.ts=c,this.baseUrl=Ee.Z.baseurl}ngOnInit(){this.getParams().then(t=>{this.http.get(this.baseUrl+"story/viewStory/"+t.id.toString()).subscribe(a=>{this.story=a[0],this.getFeedbackAudio()})})}getParams(){return new Promise((t,a)=>{this.route.params.subscribe(r=>{t(r)})})}getFeedbackAudio(){this.storyService.getFeedbackAudio(this.story._id).subscribe(t=>{"audio/mp3"==t.type&&(this.audioSource=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(t)))})}goToStoryHistory(){this.router.navigateByUrl("/admin/story-history/"+this.story._id)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ce.gz),e.Y36(Pe.eN),e.Y36(_r.H7),e.Y36(rt.N),e.Y36(Ce.F0),e.Y36(ke.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-story"]],decls:37,vars:16,consts:[[1,"contentContainer"],[1,"adminClassBody"],[1,"storyTextContainer"],[1,"storyTextHeader"],[1,"storyText"],[1,"greenBtn",3,"click"],[1,"storyInfoContainer"],[1,"storyInfoBody"],[1,"userInfo"],["readonly","",1,"userInfoTextarea"],[1,"feedbackContainer"],[1,"feedbackHeader"],["class","feedbackBody",4,"ngIf"],[1,"feedbackFooter"],["class","seenByStudent",4,"ngIf"],[1,"feedbackBtnContainer"],[4,"ngIf"],[1,"feedbackBody"],[1,"feedbackTextarea",3,"placeholder","ngModel","ngModelChange","input"],[1,"seenByStudent"],[1,"fas","fa-check"],["id","audio","controls","",1,"audioPlayer",3,"src"],["audioTag",""]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return a.goToStoryHistory()}),e._uU(8),e.qZA()(),e.TgZ(9,"div",6)(10,"div",3),e._uU(11),e.qZA(),e.TgZ(12,"div",7)(13,"div",8),e._uU(14),e.TgZ(15,"textarea",9),e._uU(16),e.qZA()(),e.TgZ(17,"div",8),e._uU(18),e.TgZ(19,"textarea",9),e._uU(20),e.qZA()(),e.TgZ(21,"div",8),e._uU(22),e.TgZ(23,"textarea",9),e._uU(24),e.qZA()(),e.TgZ(25,"div",8),e._uU(26),e.TgZ(27,"textarea",9),e._uU(28),e.qZA()(),e.TgZ(29,"div",10)(30,"div",11),e._uU(31),e.qZA(),e.YNc(32,Zd,2,2,"div",12),e.TgZ(33,"div",13),e.YNc(34,Sd,3,2,"div",14),e.qZA()(),e.TgZ(35,"div",15),e.YNc(36,Md,3,1,"div",16),e.qZA()()()()()),2&t&&(e.xp6(4),e.Oqu(a.ts.l.text),e.xp6(2),e.Oqu(null==a.story?null:a.story.text),e.xp6(2),e.Oqu(a.ts.l.story_history),e.xp6(3),e.Oqu(a.ts.l.information),e.xp6(3),e.hij("",a.ts.l.title,": "),e.xp6(2),e.Oqu(null==a.story?null:a.story.title),e.xp6(2),e.hij("",a.ts.l.author_admin,": "),e.xp6(2),e.Oqu(null==a.story?null:a.story.author),e.xp6(2),e.hij("",a.ts.l.creation_date,": "),e.xp6(2),e.Oqu(null==a.story?null:a.story.date),e.xp6(2),e.hij("",a.ts.l.dialect,": "),e.xp6(2),e.Oqu(null==a.story?null:a.story.dialect),e.xp6(3),e.Oqu(a.ts.l.feedback),e.xp6(1),e.Q6J("ngIf",a.story),e.xp6(2),e.Q6J("ngIf",a.story),e.xp6(2),e.Q6J("ngIf",a.audioSource))},dependencies:[H.O5,V.Fj,V.JJ,V.On],styles:[".adminClassBody[_ngcontent-%COMP%]{display:flex;padding:0 5px 5px;width:100%}.storyTextContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:var(--scealai-gray);margin-top:2vh;margin-left:5px;height:68vh;width:50%;border-radius:5px}.storyText[_ngcontent-%COMP%]{text-align:left;padding:4px;overflow:auto;white-space:pre-wrap;background-color:#fff;border-radius:5px;margin:8px;height:55vh}.greenBtn[_ngcontent-%COMP%]{margin-left:7px;margin-right:7px;margin-top:-3px;color:#fff;background-color:var(--scealai-green);border-radius:5px}.greenBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-dark-green);transition:.5s}.storyInfoContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:var(--scealai-gray);margin-top:2vh;margin-left:1%;height:68vh;width:48%;border-radius:5px}.storyTextHeader[_ngcontent-%COMP%]{width:100%;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0;color:#fff;display:flex;padding:4px 4px 4px 8px;font-size:12pt;justify-content:center}.storyInfoBody[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:8px;padding-right:8px}.userInfo[_ngcontent-%COMP%]{float:right;display:flex;align-items:center;padding-top:8px;width:100%;white-space:nowrap}.userInfoTextarea[_ngcontent-%COMP%]{width:100%}.feedbackContainer[_ngcontent-%COMP%]{width:100%;background-color:#fff;margin-top:2vh;border-radius:5px;display:flex;flex-direction:column;height:28vh}.feedbackHeader[_ngcontent-%COMP%]{width:100%;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0;color:#fff;padding:4px}.feedbackBody[_ngcontent-%COMP%]{padding:4px;text-align:left;overflow:auto}.feedbackTextarea[_ngcontent-%COMP%]{border:none;width:100%;height:75px;resize:none}.feedbackFooter[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;padding:4px;border-top:1px solid var(--scealai-gray);border-radius:5px;margin-top:auto}.seenByStudent[_ngcontent-%COMP%]{font-size:10pt;color:var(--scealai-light-gray);margin-left:4px}.feedbackBtnContainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.audioPlayer[_ngcontent-%COMP%]{width:450px;height:32px;margin-top:7px}"]}),n})();var Pd=M(6832);function qd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7),e._uU(3),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()(),e.TgZ(6,"div",9),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.isHighlighted=!o.isHighlighted)}),e._UZ(7,"i",10),e.qZA(),e._UZ(8,"div",11),e.qZA()}if(2&n){const t=i.$implicit,a=e.oxw();e.xp6(3),e.Oqu(a.formatDate(t.event.date)),e.xp6(2),e.Oqu(t.event.type),e.xp6(1),e.Gre("highlightIcon ",a.getHighlightIconClass(t),""),e.xp6(2),e.Q6J("innerHtml",t.isHighlighted?t.textHighlighted:t.textNotHighlighted,e.oJD)}}let Ud=(()=>{class n{constructor(t,a,r,o,s,c,u){this.engagement=t,this.route=a,this.http=r,this.storyService=o,this.router=s,this.sanitizer=c,this.ts=u,this.highlightedTexts=[],this.entries=[],this.highlightIconClass=""}ngOnInit(){this.getParams().then(t=>{let a=t.id.toString();this.engagement.getEventsForStory(a).subscribe(r=>{let o;this.events=r,this.events.forEach(s=>{let c=new Dd;c.event=s;let u=s.storyData;c.textHighlighted=u.text,c.textNotHighlighted=u.text,o&&(c.textHighlighted=this.highlightDifference(o.text.toString(),u.text.toString())),o=u,c.isHighlighted=!1,this.entries.push(c)})})})}highlightDifference(t,a){let s="notHighlighted",c="";return Pd.diffChars(t,a).forEach(function(g){s=g.added?"highlightedGreen":g.removed?"highlightedRed":"notHighlighted";let l=document.createElement("span");l.classList.add(s),l.appendChild(document.createTextNode(g.value));let p=document.createElement("span");p.appendChild(l),c+=p.innerHTML}),this.sanitizer.bypassSecurityTrustHtml(c)}toggleHighlights(){this.entries.forEach(t=>{t.isHighlighted=!t.isHighlighted}),this.highlightIconClass=""===this.highlightIconClass?"iconHighlighted":""}getParams(){return new Promise((t,a)=>{this.route.params.subscribe(r=>{t(r)})})}formatDate(t){let a=new Date(t),r=a.getDate(),o=a.getMonth()+1,s=a.getFullYear(),c=r.toString(),u=o.toString();r<10&&(c="0"+r),o<10&&(u="0"+o);let g=a.getHours().toString(),l=a.getMinutes().toString(),p=a.getSeconds().toString();return a.getHours()<10&&(g="0"+g),a.getMinutes()<10&&(l="0"+l),a.getSeconds()<10&&(p="0"+p),c+"-"+u+"-"+s+" "+g+":"+l+":"+p}getHighlightIconClass(t){return t.isHighlighted?"iconHighlighted":""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Gn.M),e.Y36(Ce.gz),e.Y36(Pe.eN),e.Y36(rt.N),e.Y36(Ce.F0),e.Y36(_r.H7),e.Y36(ke.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-story-history"]],decls:6,vars:2,consts:[["id","display"],[1,"storyHistoryHeader"],[1,"fas","fa-info-circle"],[1,"storyContainer"],["class","entry",4,"ngFor","ngForOf"],[1,"entry"],[1,"eventEntry"],[1,"eventDate"],[1,"eventType"],[3,"click"],[1,"fas","fa-highlighter"],[1,"textEntry",3,"innerHtml"]],template:function(t,a){1&t&&(e._UZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e._UZ(3,"i",2),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,qd,9,6,"div",4),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",a.ts.l.history_of_title," "),e.xp6(3),e.Q6J("ngForOf",a.entries))},dependencies:[H.sg],styles:[".storyHistoryHeader[_ngcontent-%COMP%]{color:#fff;background-color:var(--scealai-dark-green);width:60%;margin-left:20%;border-radius:5px 5px 0 0;font-size:12pt;padding:4px;margin-top:2vh}.storyContainer[_ngcontent-%COMP%]{width:60%;margin-left:20%;background-color:#d1d1d1;border-radius:0 0 5px 5px;height:63vh;padding:8px 8px 0;overflow:auto}.entry[_ngcontent-%COMP%]{margin-bottom:8px;padding:8px;background-color:#777;border-radius:5px}.eventEntry[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;margin-bottom:8px}.eventDate[_ngcontent-%COMP%]{width:50%;background-color:#fff;border-radius:10px 0 0 10px}.eventType[_ngcontent-%COMP%]{width:50%;background-color:var(--scealai-green);color:#fff;border-radius:0 10px 10px 0}.highlightIcon[_ngcontent-%COMP%]{float:right;margin-right:8px;margin-top:5px;color:var(--scealai-dark-green);opacity:.3}.highlightIcon[_ngcontent-%COMP%]:hover{color:var(--scealai-green);opacity:1;transition:.5s;cursor:pointer}.iconHighlighted[_ngcontent-%COMP%]{color:var(--scealai-green);opacity:1}.iconHighlighted[_ngcontent-%COMP%]:hover{color:var(--scealai-dark-green);transition:1s}.textEntry[_ngcontent-%COMP%]{width:100%;text-align:left;padding:4px;border-radius:5px;background-color:#fff}[_nghost-%COMP%]     .highlightedGreen{background-color:#aafdc0}[_nghost-%COMP%]     .highlightedRed{background-color:#fdaaaa}[_nghost-%COMP%]     .notHighlighted{background-color:none}"]}),n})();class Dd{}const Nd=[{path:"",pathMatch:"full",component:Wn},{path:"teachers",pathMatch:"full",component:gn},{path:"find-user",pathMatch:"full",component:ii},{path:"database-stats",pathMatch:"full",component:dc},{path:"profile-stats",pathMatch:"full",component:il},{path:"feature-stats",pathMatch:"full",component:pl},{path:"add-content",pathMatch:"full",component:id},{path:"user/:id",pathMatch:"full",component:yd},{path:"classroom/:id",pathMatch:"full",component:Td},{path:"story/:id",pathMatch:"full",component:Od},{path:"story-history/:id",pathMatch:"full",component:Ud}];let kd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[Ce.Bz.forChild(Nd),Ce.Bz]}),n})(),Ed=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[H.ez,kd]}),n})()},6832:function(vr,un){!function(M){"use strict";function H(){}function Ce(d,f,m,_,y){for(var b=0,T=f.length,A=0,w=0;b<T;b++){var P=f[b];if(P.removed){if(P.value=d.join(_.slice(w,w+P.count)),w+=P.count,b&&f[b-1].added){var K=f[b-1];f[b-1]=f[b],f[b]=K}}else{if(!P.added&&y){var k=m.slice(A,A+P.count);k=k.map(function(X,ae){var j=_[w+ae];return j.length>X.length?j:X}),P.value=d.join(k)}else P.value=d.join(m.slice(A,A+P.count));A+=P.count,P.added||(w+=P.count)}}var I=f[T-1];return T>1&&"string"==typeof I.value&&(I.added||I.removed)&&d.equals("",I.value)&&(f[T-2].value+=I.value,f.pop()),f}function ke(d){return{newPos:d.newPos,components:d.components.slice(0)}}H.prototype={diff:function(f,m){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},y=_.callback;"function"==typeof _&&(y=_,_={}),this.options=_;var b=this;function T(j){return y?(setTimeout(function(){y(void 0,j)},0),!0):j}f=this.castInput(f),m=this.castInput(m),f=this.removeEmpty(this.tokenize(f));var A=(m=this.removeEmpty(this.tokenize(m))).length,w=f.length,P=1,k=A+w,K=[{newPos:-1,components:[]}],I=this.extractCommon(K[0],m,f,0);if(K[0].newPos+1>=A&&I+1>=w)return T([{value:this.join(m),count:m.length}]);function X(){for(var j=-1*P;j<=P;j+=2){var ue=void 0,he=K[j-1],pe=K[j+1],ge=(pe?pe.newPos:0)-j;he&&(K[j-1]=void 0);var ce=he&&he.newPos+1<A,Ue=pe&&0<=ge&&ge<w;if(ce||Ue){if(!ce||Ue&&he.newPos<pe.newPos?(ue=ke(pe),b.pushComponent(ue.components,void 0,!0)):((ue=he).newPos++,b.pushComponent(ue.components,!0,void 0)),ge=b.extractCommon(ue,m,f,j),ue.newPos+1>=A&&ge+1>=w)return T(Ce(b,ue.components,m,f,b.useLongestToken));K[j]=ue}else K[j]=void 0}P++}if(y)!function j(){setTimeout(function(){if(P>k)return y();X()||j()},0)}();else for(;P<=k;){var ae=X();if(ae)return ae}},pushComponent:function(f,m,_){var y=f[f.length-1];y&&y.added===m&&y.removed===_?f[f.length-1]={count:y.count+1,added:m,removed:_}:f.push({count:1,added:m,removed:_})},extractCommon:function(f,m,_,y){for(var b=m.length,T=_.length,A=f.newPos,w=A-y,P=0;A+1<b&&w+1<T&&this.equals(m[A+1],_[w+1]);)A++,w++,P++;return P&&f.components.push({count:P}),f.newPos=A,w},equals:function(f,m){return this.options.comparator?this.options.comparator(f,m):f===m||this.options.ignoreCase&&f.toLowerCase()===m.toLowerCase()},removeEmpty:function(f){for(var m=[],_=0;_<f.length;_++)f[_]&&m.push(f[_]);return m},castInput:function(f){return f},tokenize:function(f){return f.split("")},join:function(f){return f.join("")}};var e=new H;function pn(d,f){if("function"==typeof d)f.callback=d;else if(d)for(var m in d)d.hasOwnProperty(m)&&(f[m]=d[m]);return f}var Ee=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Yt=/\S/,Pe=new H;Pe.equals=function(d,f){return this.options.ignoreCase&&(d=d.toLowerCase(),f=f.toLowerCase()),d===f||this.options.ignoreWhitespace&&!Yt.test(d)&&!Yt.test(f)},Pe.tokenize=function(d){for(var f=d.split(/(\s+|[()[\]{}'"]|\b)/),m=0;m<f.length-1;m++)!f[m+1]&&f[m+2]&&Ee.test(f[m])&&Ee.test(f[m+2])&&(f[m]+=f[m+2],f.splice(m+1,2),m--);return f};var bt=new H;function gn(d,f,m){return bt.diff(d,f,m)}bt.tokenize=function(d){var f=[],m=d.split(/(\n|\r\n)/);m[m.length-1]||m.pop();for(var _=0;_<m.length;_++){var y=m[_];_%2&&!this.options.newlineIsToken?f[f.length-1]+=y:(this.options.ignoreWhitespace&&(y=y.trim()),f.push(y))}return f};var mn=new H;mn.tokenize=function(d){return d.split(/(\S.+?[.!?])(?=\s+|$)/)};var _n=new H;function yt(d){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function Me(d){return function V(d){if(Array.isArray(d)){for(var f=0,m=new Array(d.length);f<d.length;f++)m[f]=d[f];return m}}(d)||function Xn(d){if(Symbol.iterator in Object(d)||"[object Arguments]"===Object.prototype.toString.call(d))return Array.from(d)}(d)||function ei(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}_n.tokenize=function(d){return d.split(/([{}:;,]|\s+)/)};var ti=Object.prototype.toString,Ve=new H;function Ct(d,f,m,_,y){var b,T;for(f=f||[],m=m||[],_&&(d=_(y,d)),b=0;b<f.length;b+=1)if(f[b]===d)return m[b];if("[object Array]"===ti.call(d)){for(f.push(d),T=new Array(d.length),m.push(T),b=0;b<d.length;b+=1)T[b]=Ct(d[b],f,m,_,y);return f.pop(),m.pop(),T}if(d&&d.toJSON&&(d=d.toJSON()),"object"===yt(d)&&null!==d){f.push(d),m.push(T={});var w,A=[];for(w in d)d.hasOwnProperty(w)&&A.push(w);for(A.sort(),b=0;b<A.length;b+=1)T[w=A[b]]=Ct(d[w],f,m,_,w);f.pop(),m.pop()}else T=d;return T}Ve.useLongestToken=!0,Ve.tokenize=bt.tokenize,Ve.castInput=function(d){var f=this.options,m=f.undefinedReplacement,_=f.stringifyReplacer,y=void 0===_?function(b,T){return typeof T>"u"?m:T}:_;return"string"==typeof d?d:JSON.stringify(Ct(d,null,null,y),y,"  ")},Ve.equals=function(d,f){return H.prototype.equals.call(Ve,d.replace(/,([\r\n])/g,"$1"),f.replace(/,([\r\n])/g,"$1"))};var Tt=new H;function le(d){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=d.split(/\r\n|[\n\v\f\r\x85]/),_=d.match(/\r\n|[\n\v\f\r\x85]/g)||[],y=[],b=0;function T(){var P={};for(y.push(P);b<m.length;){var k=m[b];if(/^(\-\-\-|\+\+\+|@@)\s/.test(k))break;var K=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(k);K&&(P.index=K[1]),b++}for(A(P),A(P),P.hunks=[];b<m.length;){var I=m[b];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(I))break;if(/^@@/.test(I))P.hunks.push(w());else{if(I&&f.strict)throw new Error("Unknown line "+(b+1)+" "+JSON.stringify(I));b++}}}function A(P){var k=/^(---|\+\+\+)\s+(.*)$/.exec(m[b]);if(k){var K="---"===k[1]?"old":"new",I=k[2].split("\t",2),X=I[0].replace(/\\\\/g,"\\");/^".*"$/.test(X)&&(X=X.substr(1,X.length-2)),P[K+"FileName"]=X,P[K+"Header"]=(I[1]||"").trim(),b++}}function w(){for(var P=b,K=m[b++].split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),I={oldStart:+K[1],oldLines:+K[2]||1,newStart:+K[3],newLines:+K[4]||1,lines:[],linedelimiters:[]},X=0,ae=0;b<m.length&&!(0===m[b].indexOf("--- ")&&b+2<m.length&&0===m[b+1].indexOf("+++ ")&&0===m[b+2].indexOf("@@"));b++){var j=0==m[b].length&&b!=m.length-1?" ":m[b][0];if("+"!==j&&"-"!==j&&" "!==j&&"\\"!==j)break;I.lines.push(m[b]),I.linedelimiters.push(_[b]||"\n"),"+"===j?X++:"-"===j?ae++:" "===j&&(X++,ae++)}if(!X&&1===I.newLines&&(I.newLines=0),!ae&&1===I.oldLines&&(I.oldLines=0),f.strict){if(X!==I.newLines)throw new Error("Added line count did not match for hunk at line "+(P+1));if(ae!==I.oldLines)throw new Error("Removed line count did not match for hunk at line "+(P+1))}return I}for(;b<m.length;)T();return y}function Oe(d,f,m){var _=!0,y=!1,b=!1,T=1;return function A(){if(_&&!b){if(y?T++:_=!1,d+T<=m)return T;b=!0}if(!y)return b||(_=!0),f<=d-T?-T++:(y=!0,A())}}function rt(d,f){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof f&&(f=le(f)),Array.isArray(f)){if(f.length>1)throw new Error("applyPatch only works with a single input.");f=f[0]}var K,I,_=d.split(/\r\n|[\n\v\f\r\x85]/),y=d.match(/\r\n|[\n\v\f\r\x85]/g)||[],b=f.hunks,T=m.compareLine||function(St,nt,Gt,$e){return nt===$e},A=0,w=m.fuzzFactor||0,P=0,k=0;function X(St,nt){for(var Gt=0;Gt<St.lines.length;Gt++){var $e=St.lines[Gt],$t=$e.length>0?$e[0]:" ",lt=$e.length>0?$e.substr(1):$e;if(" "===$t||"-"===$t){if(!T(nt+1,_[nt],$t,lt)&&++A>w)return!1;nt++}}return!0}for(var ae=0;ae<b.length;ae++){for(var j=b[ae],he=0,pe=k+j.oldStart-1,ge=Oe(pe,P,_.length-j.oldLines);void 0!==he;he=ge())if(X(j,pe+he)){j.offset=k+=he;break}if(void 0===he)return!1;P=j.offset+j.oldStart+j.oldLines}for(var ce=0,Ue=0;Ue<b.length;Ue++){var Te=b[Ue],Ze=Te.oldStart+Te.offset+ce-1;ce+=Te.newLines-Te.oldLines,Ze<0&&(Ze=0);for(var De=0;De<Te.lines.length;De++){var Le=Te.lines[De],Ye=Le.length>0?Le[0]:" ",st=Le.length>0?Le.substr(1):Le,Bt=Te.linedelimiters[De];if(" "===Ye)Ze++;else if("-"===Ye)_.splice(Ze,1),y.splice(Ze,1);else if("+"===Ye)_.splice(Ze,0,st),y.splice(Ze,0,Bt),Ze++;else if("\\"===Ye){var ct=Te.lines[De-1]?Te.lines[De-1][0]:null;"+"===ct?K=!0:"-"===ct&&(I=!0)}}}if(K)for(;!_[_.length-1];)_.pop(),y.pop();else I&&(_.push(""),y.push("\n"));for(var Ge=0;Ge<_.length-1;Ge++)_[Ge]=_[Ge]+y[Ge];return _.join("")}function Zt(d,f,m,_,y,b,T){T||(T={}),typeof T.context>"u"&&(T.context=4);var A=gn(m,_,T);function w(he){return he.map(function(pe){return" "+pe})}A.push({value:"",lines:[]});for(var P=[],k=0,K=0,I=[],X=1,ae=1,j=function(pe){var ge=A[pe],ce=ge.lines||ge.value.replace(/\n$/,"").split("\n");if(ge.lines=ce,ge.added||ge.removed){var Ue;if(!k){var Te=A[pe-1];k=X,K=ae,Te&&(I=T.context>0?w(Te.lines.slice(-T.context)):[],k-=I.length,K-=I.length)}(Ue=I).push.apply(Ue,Me(ce.map(function(Ge){return(ge.added?"+":"-")+Ge}))),ge.added?ae+=ce.length:X+=ce.length}else{if(k)if(ce.length<=2*T.context&&pe<A.length-2){var Ze;(Ze=I).push.apply(Ze,Me(w(ce)))}else{var De,Le=Math.min(ce.length,T.context);(De=I).push.apply(De,Me(w(ce.slice(0,Le))));var Ye={oldStart:k,oldLines:X-k+Le,newStart:K,newLines:ae-K+Le,lines:I};if(pe>=A.length-2&&ce.length<=T.context){var st=/\n$/.test(m),Bt=/\n$/.test(_),ct=0==ce.length&&I.length>Ye.oldLines;!st&&ct&&I.splice(Ye.oldLines,0,"\\ No newline at end of file"),(!st&&!ct||!Bt)&&I.push("\\ No newline at end of file")}P.push(Ye),k=0,K=0,I=[]}X+=ce.length,ae+=ce.length}},ue=0;ue<A.length;ue++)j(ue);return{oldFileName:d,newFileName:f,oldHeader:y,newHeader:b,hunks:P}}function ie(d,f,m,_,y,b,T){var A=Zt(d,f,m,_,y,b,T),w=[];d==f&&w.push("Index: "+d),w.push("==================================================================="),w.push("--- "+A.oldFileName+(typeof A.oldHeader>"u"?"":"\t"+A.oldHeader)),w.push("+++ "+A.newFileName+(typeof A.newHeader>"u"?"":"\t"+A.newHeader));for(var P=0;P<A.hunks.length;P++){var k=A.hunks[P];w.push("@@ -"+k.oldStart+","+k.oldLines+" +"+k.newStart+","+k.newLines+" @@"),w.push.apply(w,k.lines)}return w.join("\n")+"\n"}function ot(d,f){if(f.length>d.length)return!1;for(var m=0;m<f.length;m++)if(f[m]!==d[m])return!1;return!0}function Y(d){var f=xe(d.lines),m=f.oldLines,_=f.newLines;void 0!==m?d.oldLines=m:delete d.oldLines,void 0!==_?d.newLines=_:delete d.newLines}function Rt(d,f){if("string"==typeof d){if(/^@@/m.test(d)||/^Index:/m.test(d))return le(d)[0];if(!f)throw new Error("Must provide a base reference or pass in a patch");return Zt(void 0,void 0,f,d)}return d}function be(d){return d.newFileName&&d.newFileName!==d.oldFileName}function fe(d,f,m){return f===m?f:(d.conflict=!0,{mine:f,theirs:m})}function $(d,f){return d.oldStart<f.oldStart&&d.oldStart+d.oldLines<f.oldStart}function B(d,f){return{oldStart:d.oldStart,oldLines:d.oldLines,newStart:d.newStart+f,newLines:d.newLines,lines:d.lines}}function Xe(d,f,m,_,y){var b={offset:f,lines:m,index:0},T={offset:_,lines:y,index:0};for(Jt(d,b,T),Jt(d,T,b);b.index<b.lines.length&&T.index<T.lines.length;){var A=b.lines[b.index],w=T.lines[T.index];if("-"!==A[0]&&"+"!==A[0]||"-"!==w[0]&&"+"!==w[0])if("+"===A[0]&&" "===w[0]){var P;(P=d.lines).push.apply(P,Me(tt(b)))}else if("+"===w[0]&&" "===A[0]){var k;(k=d.lines).push.apply(k,Me(tt(T)))}else"-"===A[0]&&" "===w[0]?L(d,b,T):"-"===w[0]&&" "===A[0]?L(d,T,b,!0):A===w?(d.lines.push(A),b.index++,T.index++):et(d,tt(b),tt(T));else qe(d,b,T)}ai(d,b),ai(d,T),Y(d)}function qe(d,f,m){var _=tt(f),y=tt(m);if(wt(_)&&wt(y)){var b,T;if(ot(_,y)&&N(m,_,_.length-y.length))return void(b=d.lines).push.apply(b,Me(_));if(ot(y,_)&&N(f,y,y.length-_.length))return void(T=d.lines).push.apply(T,Me(y))}else if(function U(d,f){return d.length===f.length&&ot(d,f)}(_,y)){var A;return void(A=d.lines).push.apply(A,Me(_))}et(d,_,y)}function L(d,f,m,_){var T,y=tt(f),b=function At(d,f){for(var m=[],_=[],y=0,b=!1,T=!1;y<f.length&&d.index<d.lines.length;){var A=d.lines[d.index],w=f[y];if("+"===w[0])break;if(b=b||" "!==A[0],_.push(w),y++,"+"===A[0])for(T=!0;"+"===A[0];)m.push(A),A=d.lines[++d.index];w.substr(1)===A.substr(1)?(m.push(A),d.index++):T=!0}if("+"===(f[y]||"")[0]&&b&&(T=!0),T)return m;for(;y<f.length;)_.push(f[y++]);return{merged:_,changes:m}}(m,y);b.merged?(T=d.lines).push.apply(T,Me(b.merged)):et(d,_?b:y,_?y:b)}function et(d,f,m){d.conflict=!0,d.lines.push({conflict:!0,mine:f,theirs:m})}function Jt(d,f,m){for(;f.offset<m.offset&&f.index<f.lines.length;){var _=f.lines[f.index++];d.lines.push(_),f.offset++}}function ai(d,f){for(;f.index<f.lines.length;){var m=f.lines[f.index++];d.lines.push(m)}}function tt(d){for(var f=[],m=d.lines[d.index][0];d.index<d.lines.length;){var _=d.lines[d.index];if("-"===m&&"+"===_[0]&&(m="+"),m!==_[0])break;f.push(_),d.index++}return f}function wt(d){return d.reduce(function(f,m){return f&&"-"===m[0]},!0)}function N(d,f,m){for(var _=0;_<m;_++){var y=f[f.length-m+_].substr(1);if(d.lines[d.index+_]!==" "+y)return!1}return d.index+=m,!0}function xe(d){var f=0,m=0;return d.forEach(function(_){if("string"!=typeof _){var y=xe(_.mine),b=xe(_.theirs);void 0!==f&&(y.oldLines===b.oldLines?f+=y.oldLines:f=void 0),void 0!==m&&(y.newLines===b.newLines?m+=y.newLines:m=void 0)}else void 0!==m&&("+"===_[0]||" "===_[0])&&m++,void 0!==f&&("-"===_[0]||" "===_[0])&&f++}),{oldLines:f,newLines:m}}function vn(d){var f=d;return(f=(f=(f=f.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")}Tt.tokenize=function(d){return d.slice()},Tt.join=Tt.removeEmpty=function(d){return d},M.Diff=H,M.diffChars=function Wn(d,f,m){return e.diff(d,f,m)},M.diffWords=function hn(d,f,m){return m=pn(m,{ignoreWhitespace:!0}),Pe.diff(d,f,m)},M.diffWordsWithSpace=function Kn(d,f,m){return Pe.diff(d,f,m)},M.diffLines=gn,M.diffTrimmedLines=function Li(d,f,m){var _=pn(m,{ignoreWhitespace:!0});return bt.diff(d,f,_)},M.diffSentences=function xt(d,f,m){return mn.diff(d,f,m)},M.diffCss=function Vn(d,f,m){return _n.diff(d,f,m)},M.diffJson=function ni(d,f,m){return Ve.diff(d,f,m)},M.diffArrays=function ii(d,f,m){return Tt.diff(d,f,m)},M.structuredPatch=Zt,M.createTwoFilesPatch=ie,M.createPatch=function Fi(d,f,m,_,y,b){return ie(d,d,f,m,_,y,b)},M.applyPatch=rt,M.applyPatches=function jt(d,f){"string"==typeof d&&(d=le(d));var m=0;!function _(){var y=d[m++];if(!y)return f.complete();f.loadFile(y,function(b,T){if(b)return f.complete(b);var A=rt(T,y,f);f.patched(y,A,function(w){if(w)return f.complete(w);_()})})}()},M.parsePatch=le,M.merge=function re(d,f,m){d=Rt(d,m),f=Rt(f,m);var _={};(d.index||f.index)&&(_.index=d.index||f.index),(d.newFileName||f.newFileName)&&(be(d)?be(f)?(_.oldFileName=fe(_,d.oldFileName,f.oldFileName),_.newFileName=fe(_,d.newFileName,f.newFileName),_.oldHeader=fe(_,d.oldHeader,f.oldHeader),_.newHeader=fe(_,d.newHeader,f.newHeader)):(_.oldFileName=d.oldFileName,_.newFileName=d.newFileName,_.oldHeader=d.oldHeader,_.newHeader=d.newHeader):(_.oldFileName=f.oldFileName||d.oldFileName,_.newFileName=f.newFileName||d.newFileName,_.oldHeader=f.oldHeader||d.oldHeader,_.newHeader=f.newHeader||d.newHeader)),_.hunks=[];for(var y=0,b=0,T=0,A=0;y<d.hunks.length||b<f.hunks.length;){var w=d.hunks[y]||{oldStart:1/0},P=f.hunks[b]||{oldStart:1/0};if($(w,P))_.hunks.push(B(w,T)),y++,A+=w.newLines-w.oldLines;else if($(P,w))_.hunks.push(B(P,A)),b++,T+=P.newLines-P.oldLines;else{var k={oldStart:Math.min(w.oldStart,P.oldStart),oldLines:0,newStart:Math.min(w.newStart+T,P.oldStart+A),newLines:0,lines:[]};Xe(k,w.oldStart,w.lines,P.oldStart,P.lines),b++,y++,_.hunks.push(k)}}return _},M.convertChangesToDMP=function ve(d){for(var m,f=[],y=0;y<d.length;y++)f.push([(m=d[y]).added?1:m.removed?-1:0,m.value]);return f},M.convertChangesToXML=function Ht(d){for(var f=[],m=0;m<d.length;m++){var _=d[m];_.added?f.push("<ins>"):_.removed&&f.push("<del>"),f.push(vn(_.value)),_.added?f.push("</ins>"):_.removed&&f.push("</del>")}return f.join("")},M.canonicalize=Ct,Object.defineProperty(M,"__esModule",{value:!0})}(un)}}]);
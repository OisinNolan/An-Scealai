(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[175],{175:(Ue,Y,E)=>{"use strict";E.r(Y),E.d(Y,{StudentModule:()=>bt});var F=E(6895),c=E(1390),y=E(970),M=E(4633),L=E(8977),n=E(4650),h=E(5412);let g=(()=>{class u{canDeactivate(i,s,l){if(i.storySaved)return!0}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275prov=n.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})(),Z=(()=>{class u{constructor(i,s){this.dialog=i,this.ts=s}canDeactivate(i){if(i.recordingSaved)return!0;let s;return s=this.dialog.open(M.p,{data:{title:this.ts.l.save_changes_made_to_this_recording,type:"",confirmText:this.ts.l.save,cancelText:this.ts.l.cancel},width:"30vh"}),s.afterClosed().subscribe(l=>{if(s=void 0,l)return i.saveRecordings(),!0}),!1}}return u.\u0275fac=function(i){return new(i||u)(n.LFG(h.uw),n.LFG(L.D))},u.\u0275prov=n.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})(),T=(()=>{class u{canDeactivate(i,s,l){if(i.chosenSections)for(const w of i.chosenSections)w.stop();return!0}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275prov=n.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();var v=E(5861),A=E(7579),S=E(3905),b=E(1884),D=E(9971),B=E.n(D),$=E(5439),ee=E.n($),q=E(7489),W=E(4186),ue=E(1745),we=E(1765),xe=E(6469),me=E(5592),qe=E(25),ke=E(9742),ln=E(6618);let Ui=(()=>{class u{constructor(){}convertHtmlTextToArrayOfSentences(i){return this.sentences(this.convertHtmlToPlainText(i))}sentences(i){return this.naiveSentences(i)}splitWithReplacement(i,s){const l=i.split(s);return l.slice(0,-1).filter(Boolean).map(w=>w+s).concat(l.slice(-1).filter(Boolean))}extraShortening(i){return i.flatMap(s=>" "==s?[]:s.charAt(100)?this.splitWithReplacement(s,","):[s])}naiveSentences(i){let s=i.split("\n").filter(Boolean);for(const l of[".","!","?"])s=s.flatMap(w=>this.splitWithReplacement(w,l));return this.extraShortening(s)}convertHtmlToPlainText(i){const s=document.createElement("div");return s.innerHTML=i,s.textContent||s.innerText||""}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275prov=n.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();var yr=E(2791),Bn=E(9549),xr=E(4385),qi=E(3238);function Tt(u,_){if(1&u&&(n.TgZ(0,"mat-option",3),n._uU(1),n.qZA()),2&u){const i=_.$implicit,s=n.oxw();n.s9C("gender",i.gender),n.Q6J("value",i),n.xp6(1),n.hij(" ",i.note+i.name+" ("+s.ts.message(i.dialect)+") "," ")}}let vt=(()=>{class u{constructor(i){this.ts=i,this.voices=ke.be,this.selected=this.voices[0],this.selectVoice=new n.vpe}ngOnInit(){this.selectVoice.emit(this.selected)}color(i){return i.startsWith("f")?"rgba(255, 191, 194)":"rgba(194, 218, 255)"}}return u.\u0275fac=function(i){return new(i||u)(n.Y36(L.D))},u.\u0275cmp=n.Xpm({type:u,selectors:[["synth-voice-select"]],outputs:{selectVoice:"selectVoice"},decls:5,vars:3,consts:[["appearance","fill"],[3,"value","valueChange","selectionChange"],["matNativeControl","","required","",3,"gender","value",4,"ngFor","ngForOf"],["matNativeControl","","required","",3,"gender","value"]],template:function(i,s){1&i&&(n.TgZ(0,"mat-form-field",0)(1,"mat-label"),n._uU(2),n.qZA(),n.TgZ(3,"mat-select",1),n.NdJ("valueChange",function(w){return s.selected=w})("selectionChange",function(w){return s.selectVoice.emit(w.value)}),n.YNc(4,Tt,2,3,"mat-option",2),n.qZA()()),2&i&&(n.xp6(2),n.Oqu(s.ts.message("voice")),n.xp6(1),n.Q6J("value",s.selected),n.xp6(1),n.Q6J("ngForOf",s.voices))},dependencies:[F.sg,Bn.KE,Bn.hX,xr.gD,qi.ey],encapsulation:2}),u})();const Gi=["voiceSelect"];function dn(u,_){1&u&&n._UZ(0,"div",11)}function nt(u,_){1&u&&n._UZ(0,"div",11)}function Hi(u,_){if(1&u&&n._UZ(0,"app-synth-item",12),2&u){const i=_.$implicit,s=_.index,l=n.oxw();n.Q6J("synthItem",i)("i",s)("storyId",l.storyId)}}let Wi=(()=>{class u{constructor(i,s,l,w,N){this.router=i,this.textProcessor=s,this.cdref=l,this.synth=w,this.ts=N,this.hideEntireSynthesisPlayer=!0,this.synthItems=[],this.allAudioSources=[]}ngOnInit(){this.refresh()}refresh(i){i&&(this.selected=i),this.synthItems.map(s=>{s.audioUrl=void 0,s.dispose()}),this.text&&setTimeout(()=>{this.synthItems=this.textProcessor.sentences(this.text).map(s=>this.getSynthItem(s)),this.cdref.detectChanges(),this.audio=null},50)}getSynthItem(i){return new ln.e(i,this.selected,this.synth)}audioLoaded(){return this.synthItems.every(i=>null!=i.audioUrl||i.exceptions.length>0)}combineAndPlayAudio(){var i=this;return(0,v.Z)(function*(){i.audio||(yield i.combineAudioSources()),i.playAllAudio()})()}combineAudioSources(){var i=this;return(0,v.Z)(function*(){i.allAudioSources=i.synthItems.map(l=>l.audioUrl);let s=i.allAudioSources.map(l=>fetch(l).then(w=>w.blob()));yield Promise.all(s).then(l=>{let w=new Blob(l);i.blobUrl=URL.createObjectURL(w),i.audio=new Audio(i.blobUrl)})})()}playAllAudio(){this.audio.paused?this.audio.play():(this.audio.pause(),this.audio.currentTime=0)}downloadAudio(){var i=this;return(0,v.Z)(function*(){i.audio||(yield i.combineAudioSources());const s=document.createElement("a");s.style.display="none",s.href=i.blobUrl,s.download=i.storyTitle+".mp3",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i.blobUrl)})()}goToFastSynthesiser(){this.router.navigateByUrl("/student/synthesis/"+this.storyId)}stopSynthesis(){this.synthItems.map(i=>{i.audioUrl=void 0,i.dispose()})}toggleHidden(){this.hideEntireSynthesisPlayer=!this.hideEntireSynthesisPlayer,this.refresh()}}return u.\u0275fac=function(i){return new(i||u)(n.Y36(c.F0),n.Y36(Ui),n.Y36(n.sBO),n.Y36(ke.cf),n.Y36(L.D))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-synthesis-player"]],viewQuery:function(i,s){if(1&i&&n.Gf(Gi,5),2&i){let l;n.iGM(l=n.CRH())&&(s.voiceSelect=l.first)}},inputs:{storyId:"storyId",text:"text",storyTitle:"storyTitle"},decls:22,vars:11,consts:[[1,"synth",3,"hidden"],[1,"synthHeader"],[1,"reload",3,"click"],[3,"selectVoice"],[1,"fast-synth",3,"click"],[1,"btnContainer",2,"justify-content","space-between"],[1,"playAllButton",2,"text-align","center","width","100px",3,"disabled","click"],["class","spinner-grow","style","width: 1rem; height: 1rem;",4,"ngIf"],[1,"playAllButton",2,"text-align","center","width","150px",3,"disabled","click"],[1,"items"],[3,"synthItem","i","storyId",4,"ngFor","ngForOf"],[1,"spinner-grow",2,"width","1rem","height","1rem"],[3,"synthItem","i","storyId"]],template:function(i,s){1&i&&(n.TgZ(0,"div",0)(1,"div")(2,"h1"),n._uU(3),n.qZA(),n.TgZ(4,"p"),n._uU(5),n.qZA()(),n.TgZ(6,"div",1)(7,"div",2),n.NdJ("click",function(){return s.refresh()}),n._uU(8,"\u21bb"),n.qZA(),n.TgZ(9,"synth-voice-select",3),n.NdJ("selectVoice",function(w){return s.refresh(w)}),n.qZA(),n.TgZ(10,"div",4),n.NdJ("click",function(){return s.goToFastSynthesiser()}),n._uU(11),n.qZA()(),n.TgZ(12,"div",5)(13,"button",6),n.NdJ("click",function(){return s.combineAndPlayAudio()}),n.YNc(14,dn,1,0,"div",7),n._uU(15),n.qZA(),n.TgZ(16,"button",8),n.NdJ("click",function(){return s.downloadAudio()}),n.YNc(17,nt,1,0,"div",7),n._uU(18),n.qZA()(),n._UZ(19,"hr"),n.TgZ(20,"div",9),n.YNc(21,Hi,1,3,"app-synth-item",10),n.qZA()()),2&i&&(n.Q6J("hidden",s.hideEntireSynthesisPlayer),n.xp6(3),n.Oqu(s.ts.l.listen_back_to_your_story?s.ts.l.listen_back_to_your_story:"listen_back_to_your_story"),n.xp6(2),n.hij("(",s.ts.l.dnn_synthesiser?s.ts.l.dnn_synthesiser:"dnn_synthesiser",")"),n.xp6(6),n.hij(" ",s.ts.l.go_to_fast_synthesiser?s.ts.l.go_to_fast_synthesiser:"go_to_fast_synthesiser"," "),n.xp6(2),n.Q6J("disabled",!s.audioLoaded()),n.xp6(1),n.Q6J("ngIf",!s.audioLoaded()),n.xp6(1),n.hij(" ",s.ts.l.play," "),n.xp6(1),n.Q6J("disabled",!s.audioLoaded()),n.xp6(1),n.Q6J("ngIf",!s.audioLoaded()),n.xp6(1),n.hij(" ",s.ts.l.download," "),n.xp6(3),n.Q6J("ngForOf",s.synthItems))},dependencies:[F.sg,F.O5,yr.Y,vt],styles:[".synth[_ngcontent-%COMP%]{display:grid;padding:20px;border-radius:15px;margin:30px;background-color:#ffffff80;border:2px}.synthHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]{font-family:Lucida Sans Unicode;font-size:20px;width:2rem;height:2rem;border-radius:.5em;padding:0;margin:0;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]:hover{color:#000;font-weight:700}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]{padding:3px;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]:hover{color:#000;border-radius:2px;font-weight:700}.items[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:3px;padding-left:1rem;padding-top:1rem;border-radius:3px;text-align:left;flex-wrap:wrap;justify-content:left}.playAllButton[_ngcontent-%COMP%]{padding:5px;border-radius:5px;border:none;width:100px;text-align:center;background-color:#95cdcd}.playAllButton[_ngcontent-%COMP%]:hover:enabled{color:#fff}"]}),u})();var Yt=E(1512),fe=E(8043),fn=E(8505);const zt=function Ji(){const _=Object.values({"no break whitespace":"\xa0","ogham space mark":"\u1680","zero width no-break space":"\ufeff","ideographic space":"\u3000","narrow no-break space":"\u202f","EN QUAD":"\u2000","EM QUAD":"\u2001","EN SPACE (nut)":"\u2002","EM SPACE (mutton)":"\u2003","THREE-PER-EM SPACE":"\u2004","FOUR-PER-EM SPACE (mid space)":"\u2005","SIX-PER-EM SPACE":"\u2006","FIGURE SPACE":"\u2007","PUNCTUATION SPACE":"\u2008","THIN SPACE":"\u2009","HAIR SPACE":"\u200a"}).join("");return new RegExp("["+_+"]","g")}();function Nn(u){return Object.assign({},u)}class Qe{constructor(){this.tagStore=new Map}storeTag(_){const i=this.tagStore.get(_.type);i?i.push(_):this.tagStore.set(_.type,[_])}getType(_){return this.tagStore.get(_)||[]}nonEmptyTypes(){const _=[];for(const i of fe.iR)this.tagStore.get(i)&&_.push(i);return _}typeIsNonEmpty(_){return!!this.tagStore.get(_)}}class Kt{constructor(_,i,s){this.errorsWithSentences=[],this.http=i,this.auth=s,this.grammarCheckers=_,this.cacheMap=new Map;for(const l of _)this.cacheMap.set(l.name,{})}check$(_){const i=new A.x,s=new Qe;return this.errorStoreForLatestCheck=s,this.check(function Qt(u){return u.replace(zt," ")}(_),i),i.pipe((0,fn.b)(function(l){s.storeTag(l)}))}check(_,i){var s=this;return(0,v.Z)(function*(){const w=function gn(u,_){const i=[];let s=0;for(let l of u)if(l){const N=s+_.slice(s).indexOf(l);i.push({sentence:l,offset:N}),s=N+l.length}return i}(yield(0,S.z)(s.http.post(W.Z.baseurl+"nlp/sentenceTokenize",{text:_})),_);s.errorsWithSentences=[];const N=(yield Promise.all(s.grammarCheckers.map(function(){var H=(0,v.Z)(function*(Q){return yield Promise.all(w.map(function(){var ie=(0,v.Z)(function*(ye,pe){const Ie=ye.sentence,Me=ye.offset;function Xe(ot){return ot.fromX+=Me,ot.toX+=Me,i.next(ot),ot}if(Ie in s.cacheMap.get(Q.name)){let ot=s.cacheMap.get(Q.name)[Ie].map(Nn).map(Xe);return s.errorsWithSentences[pe]=s.errorsWithSentences[pe]?[s.errorsWithSentences[pe][0].concat(ot),Ie,pe]:[ot,Ie,pe],ot}const it=yield Q.check(Ie,s.auth.getToken());s.cacheMap.get(Q.name)[Ie]=it;const Et=it.map(Nn).map(Xe);return s.errorsWithSentences[pe]=s.errorsWithSentences[pe]?[s.errorsWithSentences[pe][0].concat(it),Ie,pe]:[it,Ie,pe],Et});return function(ye,pe){return ie.apply(this,arguments)}}()))});return function(Q){return H.apply(this,arguments)}}()))).flat().filter(H=>H.length);return i.complete(),s.countNewErrors(N.flat()),N})()}countNewErrors(_){var i=this;return(0,v.Z)(function*(){i.previousErrorTags=_,i.countNewErrors=i._countNewErrorsAfterFirstTime})()}_countNewErrorsAfterFirstTime(_){return(0,v.Z)(function*(){const s=function Yi(u,_){return function N(H,Q){return Q.filter(ie=>!H.includes(ie)||(H[H.indexOf(ie)]=null,!1)).map(ie=>JSON.parse(ie)[1])}(w(u),w(_));function w(H){return H.map(Q=>JSON.stringify([Q.errorText,Q.type]))}}(i.previousErrorTags,_),w={countsByType:(u=s,u.reduce(function i(s,l){return s[l]||(s[l]=0),s[l]+=1,s},{}))};var u;i.http.post(W.Z.baseurl+"gramadoir/userGrammarCounts/",w).subscribe(),i.previousErrorTags=_})()}saveErrorsWithSentences(_){var i=this;return(0,v.Z)(function*(){if(!i.errorsWithSentences||!_)return;const s={Authorization:"Bearer "+i.auth.getToken()};i.http.post(W.Z.baseurl+"gramadoir/insert/",{storyId:_,sentences:i.errorsWithSentences},{headers:s}).subscribe()})()}}var zi=E(4968);const ht=B().import("parchment"),Qi=B().import("ui/tooltip");function Xt(u,_){return!(u.fromX>=_.toX||_.fromX>=u.toX)}B().register(new ht.Attributor.Attribute("highlight-tag","highlight-tag",{scope:ht.Scope.INLINE})),B().register(new ht.Attributor.Attribute("left-edge","left-edge",{scope:ht.Scope.INLINE})),B().register(new ht.Attributor.Attribute("right-edge","right-edge",{scope:ht.Scope.INLINE})),B().register(new ht.Attributor.Attribute("id","id",{scope:ht.Scope.INLINE}));class Ke{constructor(_,i,s){this.mostRecentHoveredMessage="",this.mergedGroupData=new Map,this.mergedGroupSpan=new Map,this.quillEditor=_,console.log(this.quillEditor),this.tooltip=new Qi(_),this.textChange$=(0,zi.R)(this.quillEditor,"text-change"),this.textChange$.subscribe({next:([l,w,N])=>{"api"!==N&&l.ops.every(Q=>"retain"in Q)&&l.ops.reduce((ie,ye)=>({i:ie.i+ye.retain,spans:"attributes"in ye?ie.spans.concat([{fromX:ie.i,toX:ie.i+ye.retain}]):ie.spans}),{i:0,spans:[]}).spans.forEach(ie=>this.tidyUp(ie))}}),this.tooltip.root.classList.add("custom-tooltip"),this.messageRenderer=i,this.engagement=s,this.editorElement=document.querySelector(".ql-editor"),this.editorElement.addEventListener("mouseover",l=>{if(l.target instanceof Element){const w=l.target.getAttribute("id");if(w){const N=this.mergedGroupSpan.get(w),H=this.mergedGroupData.get(w);N&&H&&this.mouseOverTagElem(H,N)}else this.tooltip.hide()}})}onlyUnique(_,i,s){return s.map(l=>l.symbol).indexOf(_.symbol)===i}tagDataForRange(_,i){let s=[];const l={fromX:_,toX:i};for(let H=_;H<=i;H++){const ie=this.quillEditor.getFormat(H).id;if(ie){const ye=this.mergedGroupData.get(ie),pe=this.mergedGroupSpan.get(ie);pe&&Xt(l,pe)&&(l.fromX=Math.min(l.fromX,pe.fromX),l.toX=Math.max(l.toX,pe.toX),s=s.concat(ye),H=pe.toX)}}const w={};return{tags:s.filter(H=>!w[H.id]&&(w[H.id]=!0,!0)),span:l}}addTag(_){let i=this.tagDataForRange(_.fromX,_.toX),s=i.tags,l=i.span;s.push(_),s=s.filter(Q=>Q).sort(function w(Q,ie){return Q.nameGA<ie.nameGA?-1:1});const N=crypto.randomUUID().toString();this.mergedGroupData.set(N,s),this.mergedGroupSpan.set(N,l),this.quillEditor.formatText(l.fromX,l.toX-l.fromX,{"highlight-tag":!0,id:N},"api");const H=this.editorElement.querySelectorAll(`[id="${N}"]`);H.forEach(function(Q){Q.removeAttribute("left-edge"),Q.removeAttribute("right-edge")}),H[0].setAttribute("left-edge",""),H[H.length-1].setAttribute("right-edge","")}tidyUp(_){let i=_.fromX;for(;i<_.toX;){const l=this.quillEditor.getFormat(i,1).id;if(!l){++i;continue}const w=this.editorElement.querySelectorAll(`[id="${l}"]`);w.forEach(function(H){H.removeAttribute("left-edge"),H.removeAttribute("right-edge")}),w[0].setAttribute("left-edge",""),w[w.length-1].setAttribute("right-edge","");const N=this.mergedGroupSpan.get(l);i=N?N.toX:i+1}}equivalentTag(_,i){return _.id===i.id}removeTag(_){const s=this.quillEditor.getFormat(Math.floor(_.fromX+_.toX)/2).id;if(s){const l=this.mergedGroupData.get(s),w=this.mergedGroupSpan.get(s);this.quillEditor.formatText(w.fromX,w.toX-w.fromX+1,{"highlight-tag":!1,id:!1},"api");const N=l.filter(H=>!this.equivalentTag(H,_));this.mergedGroupData.delete(s),this.mergedGroupSpan.delete(s);for(const H of N)this.addTag(H)}}show(_){for(const i of _)setTimeout(()=>{this.addTag(i)},0)}hide(_){_.forEach(i=>{this.removeTag(i)})}hideAll(){this.mergedGroupData=new Map,this.mergedGroupSpan=new Map,document.querySelectorAll("[data-selected]"),this.quillEditor.formatText(0,Number.MAX_SAFE_INTEGER,{"highlight-tag":null,"background-color":"","data-selected":null},"api"),this.tooltip.hide()}mouseOverTagElem(_,i){const s=this.quillEditor.root.scrollTop;this.quillEditor.root.scroll({top:+s+1}),this.quillEditor.root.scroll({top:+s});const l=this.makeTooltipContents(_);this.tooltip.root.innerHTML=l,this.mostRecentHoveredMessage=l,this.tooltip.show(),this.tooltip.position(this.quillEditor.getBounds(i.fromX,i.toX-i.fromX));let w=this.tooltip.root.getAttribute("style")||"";w+="\n          font-size: medium;\n          padding: 20px;\n          -webkit-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          -moz-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          border: 2px solid var(--scealai-med-brown);\n          border-radius: 2px;\n          max-width: 400px;\n        ",this.tooltip.root.setAttribute("style",w)}makeTooltipContents(_){return _.map(this.messageRenderer).join("<hr>")}}const $t={name:"Leathan_Caol",check:function jt(u){return yt.apply(this,arguments)}},At=["a","o","u","\xe1","\xf3","\xfa","A","O","U","\xc1","\xd3","\xda"],pn=["e","i","\xe9","\xed","E","I","\xc9","\xcd"],Vt=["b","c","d","f","g","h","l","m","n","p","r","s","t","v","z","B","C","D","F","G","H","L","M","N","P","R","S","T","V","Z"],Ki=["aniar","an\xedos","ar\xe9ir","ar\xeds","ar\xedst","anseo","ansin","ansi\xfad","c\xe9n","den","faoina","ina","inar","insa","lena","lenar"];function yt(){return(yt=(0,v.Z)(function*(u){return new Promise((_,i)=>{const s=Un(u);let l=[];for(const w of s){let N={errorText:u,messageGA:fe.UO["LEATHAN-CAOL"].messageGA,messageEN:fe.UO["LEATHAN-CAOL"].messageEN,context:u,nameEN:fe.UO["LEATHAN-CAOL"].nameEN,nameGA:fe.UO["LEATHAN-CAOL"].nameGA,color:fe.UO["LEATHAN-CAOL"].color,fromX:w.first,toX:w.second+1,type:"LEATHAN-CAOL",id:crypto.randomUUID()};l.push(N),crypto.randomUUID()}_(l)})})).apply(this,arguments)}function Un(u){const _=function qn(u){let _=[];for(let i of Ki){let l=Gn(u.toLowerCase(),i);for(let w of l)_[w]=i.length}return _}(u),i=[];for(let s=0;s<u.length-1;s++)if(_[s]>0&&(s+=_[s]),_n(u[s])&&mn(u[s+1])){let l=s++;for(;mn(u[s]);)s++;if(_n(u[s])&&!Jn(u[l],u[s])){const w=Wn(u[l]);i.push({broadFirst:w,first:l,second:s})}}return i}function Gn(u,_){var i=[];let s=new RegExp("[\\s.!?\\-]"+_+"[\\s.!?\\-]","g"),l=s.exec(u);for(;l;){s=new RegExp(_);let w=s.exec(l[0]);i.push(l.index+w.index),u=Hn(u,l.index,"#".repeat(5)),s=new RegExp("[\\s.!?\\-]"+_+"[\\s.!?\\-]","g"),l=s.exec(u)}return i}function Hn(u,_,i){return u.substr(0,_)+i+u.substr(_+i.length)}function _n(u){return At.includes(u)||pn.includes(u)}function Wn(u){return At.includes(u)}function mn(u){return Vt.includes(u)}function Jn(u,_){return At.includes(u)&&At.includes(_)||pn.includes(u)&&pn.includes(_)}const Xi={name:"AnGramadoir",check:function $i(u,_){return Yn.apply(this,arguments)}};function Yn(){return Yn=(0,v.Z)(function*(u,_){return new Promise(function(){var i=(0,v.Z)(function*(s,l){let w=[];try{w=yield zn(`${W.Z.baseurl}gramadoir/callAnGramadoir/${encodeURIComponent(u)}`,_)}catch{try{w=yield zn(`https://cadhan.com/api/gramadoir/1.0/en/${u}`)}catch{l()}}s(w.map(H=>{const Q=Vi(H.ruleId);Q in fe.UO||console.warn("INVALID ERROR TYPE:",Q);const ie=fe.UO[Q],pe=`"${function ye(Xe){const Et=Xe.match(/\/([^/]+)\//);return!!(Et&&Et.length>1)&&Et[1]}(H.msg)}"`,Ie=`"${H.errortext}"`;return{errorText:H.errortext,messageGA:ie.messageGA.replace("#suggestion#",pe).replace("#",Ie),messageEN:ie.messageEN.replace("#suggestion#",pe).replace("#",Ie),context:H.context,nameEN:ie.nameEN,nameGA:ie.nameGA,color:ie.color,fromX:+H.fromx,toX:+H.tox+1,type:Q,id:crypto.randomUUID()}}))});return function(s,l){return i.apply(this,arguments)}}())}),Yn.apply(this,arguments)}function zn(u,_){return vn.apply(this,arguments)}function vn(){return(vn=(0,v.Z)(function*(u,_){let i={};_&&(i={Authorization:"Bearer "+_});const s=yield fetch(u,{headers:i});if(s.ok)return yield s.json();throw new Error(s.statusText)})).apply(this,arguments)}function Vi(u){const _=u.replace(/[A-Za-z:]+\//,"");return/[A-Z]+/.exec(_)[0]}const ji={name:"RelativeClause",check:function to(u){return yn.apply(this,arguments)}},eo="https://phoneticsrv3.lcs.tcd.ie/gramsrv/api/grammar";function yn(){return yn=(0,v.Z)(function*(u){return new Promise(function(){var _=(0,v.Z)(function*(i,s){i((yield no(u)).map(N=>({errorText:u.slice(N.fromx,N.tox),messageGA:N.msg,messageEN:N.msg,context:N.context,nameEN:fe.UO["RELATIVE-CLAUSE"].nameEN,nameGA:fe.UO["RELATIVE-CLAUSE"].nameGA,color:fe.UO["RELATIVE-CLAUSE"].color,fromX:N.fromx,toX:N.tox,type:"RELATIVE-CLAUSE"})))});return function(i,s){return _.apply(this,arguments)}}())}),yn.apply(this,arguments)}function no(u){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,v.Z)(function*(u){const _=yield fetch(eo,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:ro(u.replace(/\n/g," "))});return _.ok?yield _.json():[]})).apply(this,arguments)}function ro(u){return`text=${encodeURIComponent(u)}&check=relclause`}var xn=E(529),rt=E(4006),Mt=E(3267),wr=E(5802),Sr=E(530),io=E(4412);class Kn extends io.i{constructor(){super(...arguments),this.createdWithPrompts=!1}}var Cr=E(4859),Xn=E(7392),bn=E(8255),oo=E(8443);let Tr=(()=>{class u{transform(i,s){return i?s?(s=s.toLocaleLowerCase(),i.filter(l=>l instanceof oo.n?l.username.toLocaleLowerCase().includes(s):l instanceof Kn?l.title.toLocaleLowerCase().includes(s)||l.text.toLocaleLowerCase().includes(s):void 0)):i:[]}}return u.\u0275fac=function(i){return new(i||u)},u.\u0275pipe=n.Yjl({name:"appFilter",type:u,pure:!0}),u})();function so(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div")(1,"div",5),n._uU(2),n.qZA(),n.TgZ(3,"div",6)(4,"input",7),n.NdJ("ngModelChange",function(l){n.CHM(i);const w=n.oxw();return n.KtG(w.searchText=l)}),n.qZA()()()}if(2&u){const i=n.oxw();n.xp6(2),n.Oqu(i.ts.l.my_stories),n.xp6(2),n.s9C("placeholder",i.ts.l.search_story_title_or_content),n.Q6J("ngModel",i.searchText)}}function ao(u,_){1&u&&(n.TgZ(0,"div",17),n._uU(1,"1"),n.qZA())}function co(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div",8),n.NdJ("click",function(){const w=n.CHM(i).$implicit,N=n.oxw();return n.KtG(N.setStory(w))}),n.TgZ(1,"div",9)(2,"div",10)(3,"div",11),n.NdJ("blur",function(){const l=n.CHM(i),w=l.index,N=l.$implicit,H=n.oxw();return n.KtG(H.saveStoryTitle(w,N))})("keydown.enter",function(){const l=n.CHM(i),w=l.index,N=l.$implicit,H=n.oxw();return n.KtG(H.saveStoryTitle(w,N))}),n._uU(4),n.qZA(),n.YNc(5,ao,2,0,"div",12),n.qZA(),n.TgZ(6,"div",13),n._uU(7),n.ALo(8,"date"),n.TgZ(9,"button",14)(10,"mat-icon"),n._uU(11,"more_vert"),n.qZA()(),n.TgZ(12,"mat-menu",null,15)(14,"button",16),n.NdJ("click",function(){const w=n.CHM(i).$implicit,N=n.oxw();return n.KtG(N.openDeleteStoryDialog(w._id))}),n.TgZ(15,"mat-icon"),n._uU(16,"delete"),n.qZA(),n.TgZ(17,"span"),n._uU(18),n.qZA()(),n.TgZ(19,"button",16),n.NdJ("click",function(){const w=n.CHM(i).index,N=n.oxw();return n.KtG(N.makeTitleDivEditable(w))}),n.TgZ(20,"mat-icon"),n._uU(21,"create"),n.qZA(),n.TgZ(22,"span"),n._uU(23),n.qZA()()()()(),n._UZ(24,"hr"),n.qZA()}if(2&u){const i=_.$implicit,s=_.index,l=n.MAs(13),w=n.oxw();n.xp6(1),n.uIk("id",i._id),n.xp6(2),n.uIk("id",s),n.xp6(1),n.hij(" ",null==i?null:i.title," "),n.xp6(1),n.Q6J("ngIf",w.hasUnreadFeedback(i)),n.xp6(2),n.hij(" ",n.xi3(8,8,i.lastUpdated,"d/M/yy")," "),n.xp6(2),n.Q6J("matMenuTriggerFor",l),n.xp6(9),n.Oqu(w.ts.l.delete),n.xp6(5),n.Oqu(w.ts.l.rename)}}let uo=(()=>{class u{constructor(i,s,l,w,N,H){this.ts=i,this.auth=s,this.storyService=l,this.engagement=w,this.recordingService=N,this.dialog=H,this.stories=[],this.lastClickedStoryId="",this.searchText="",this.storyEmitter=new n.vpe,this.hasFeedback=new n.vpe,this.titleUpdated=new n.vpe,this.storiesLoaded=new n.vpe,this.isFirstStory=new n.vpe}ngOnInit(){this.getStories()}getStories(){var i=this;return(0,v.Z)(function*(){i.stories=(yield(0,S.z)(i.storyService.getStoriesForLoggedInUser())).map(s=>(new Kn).fromJSON(s)),i.stories.length>0&&(i.stories.sort((s,l)=>s.date>l.date?-1:1),i.lastClickedStoryId=i.stories[0]._id,setTimeout(()=>{i.setStory(i.stories[0])})),setTimeout(()=>{i.storiesLoaded.emit(!0)})})()}setStory(i){null==i.htmlText&&(i.htmlText=i.text),this.storyEmitter.emit(i),this.hasFeedback.emit(!!(i.feedback.text||i.feedback.audioId||i.feedback.feedbackMarkup));let s=i._id,l=document.getElementById(s);l&&(this.lastClickedStoryId&&document.getElementById(this.lastClickedStoryId).classList.remove("clickedresultCard"),this.lastClickedStoryId=s,l.classList.add("clickedresultCard"))}hasUnreadFeedback(i){return(i.feedback.text||i.feedback.audioId||i.feedback.feedbackMarkup)&&!i.feedback.seenByStudent}createNewStory(){var i=this;this.isFirstStory.emit(0==this.stories.length),this.dialogRef=this.dialog.open(M.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var s=(0,v.Z)(function*(l){if(i.dialogRef=void 0,l)if(l[0]){let w="connemara";l[1]==i.ts.l.munster&&(w="kerry"),l[1]==i.ts.l.ulster&&(w="donegal"),i.storyService.saveStory(i.auth.getUserDetails()._id,l[0],new Date,w,"",i.auth.getUserDetails().username,!1).subscribe({next:()=>{i.getStories()},error:()=>{alert("Not able to create a new story")}})}else alert(i.ts.l.title_required)});return function(l){return s.apply(this,arguments)}}())}openDeleteStoryDialog(i){var s=this;this.dialogRef=this.dialog.open(M.p,{data:{title:this.ts.l.delete_story,message:this.ts.l.are_you_sure_delete_story,confirmText:this.ts.l.yes,cancelText:this.ts.l.no},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var l=(0,v.Z)(function*(w){s.dialogRef=void 0,w&&s.deleteStory(i)});return function(w){return l.apply(this,arguments)}}())}deleteStory(i){this.recordingService.deleteStoryRecordingAudio(i).subscribe(l=>{}),this.recordingService.deleteStoryRecording(i).subscribe(l=>{});const s=this.stories.findIndex(l=>l._id===i);this.storyService.deleteStory(i).subscribe(l=>{this.engagement.addEventForLoggedInUser(Yt.tw["DELETE-STORY"],{_id:i}),this.stories.splice(s,1),this.stories.length?this.setStory(this.stories[0]):this.storyEmitter.emit(null)})}makeTitleDivEditable(i){const s=document.getElementById(i);s.setAttribute("contenteditable","true"),window.setTimeout(()=>s.focus(),0)}saveStoryTitle(i,s){const l=document.getElementById(i);l.setAttribute("contenteditable","false"),s.title.trim()!=l.textContent.trim()&&(s.title=l.textContent,this.storyService.updateTitle(s._id,s.title.trim()).subscribe({next:()=>{this.titleUpdated.emit(s.title.trim())},error:()=>console.log("error updating title")}))}}return u.\u0275fac=function(i){return new(i||u)(n.Y36(L.D),n.Y36(ue.$),n.Y36(we.N),n.Y36(xe.M),n.Y36(Sr.s),n.Y36(h.uw))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-story-drawer"]],outputs:{storyEmitter:"storyEmitter",hasFeedback:"hasFeedback",titleUpdated:"titleUpdated",storiesLoaded:"storiesLoaded",isFirstStory:"isFirstStory"},decls:8,vars:5,consts:[[1,"body"],[4,"ngIf"],[1,"storyList"],[3,"click",4,"ngFor","ngForOf"],["mat-fab","",1,"newStoryButton",3,"click"],[1,"myStories"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control","searchBox",3,"ngModel","placeholder","ngModelChange"],[3,"click"],[1,"contentSection"],[2,"display","flex"],[1,"contentsTitle",3,"blur","keydown.enter"],["class","notificationBtn",4,"ngIf"],[1,"contentsDate"],["mat-icon-button","","aria-label","Options to delete or rename your story",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"notificationBtn"]],template:function(i,s){1&i&&(n.TgZ(0,"div",0),n.YNc(1,so,5,3,"div",1),n.TgZ(2,"div",2),n.YNc(3,co,25,11,"div",3),n.ALo(4,"appFilter"),n.qZA(),n.TgZ(5,"button",4),n.NdJ("click",function(){return s.createNewStory()}),n.TgZ(6,"mat-icon"),n._uU(7,"add"),n.qZA()()()),2&i&&(n.xp6(1),n.Q6J("ngIf",s.stories.length>0),n.xp6(2),n.Q6J("ngForOf",n.xi3(4,2,s.stories,s.searchText)))},dependencies:[F.sg,F.O5,rt.Fj,rt.JJ,rt.On,Cr.lW,Xn.Hw,bn.VK,bn.OP,bn.p6,F.uU,Tr],styles:[".body[_ngcontent-%COMP%]{display:flex;width:100%;height:98%;flex-direction:column}.storyList[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto}.myStories[_ngcontent-%COMP%]{color:var(--dark-text);font-size:16pt;padding-bottom:10px;text-align:left;font-weight:bolder}.searchBox[_ngcontent-%COMP%]{min-width:300px}.contentSection[_ngcontent-%COMP%]{display:flex;padding:5px}.contentSection[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#eee;border-radius:5px}.contentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;text-decoration:none;min-width:50%;flex:1 0 50%;overflow-wrap:break-word;padding-left:5px}.contentsTitle[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsDate[_ngcontent-%COMP%]{flex:1 0 50%;text-align:right}.newStoryButton[_ngcontent-%COMP%]{margin-left:auto}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%]{background-color:var(--scealai-green);box-shadow:none}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;font-weight:700;border-radius:5px}"]}),u})();var wn=E(1481);function lo(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div",9)(1,"label",10),n._uU(2),n.qZA(),n.TgZ(3,"input",11),n.NdJ("ngModelChange",function(l){n.CHM(i);const w=n.oxw();return n.KtG(w.wordLookedUp=l)})("keyup.enter",function(){n.CHM(i);const l=n.oxw();return n.KtG(l.lookupWord())})("click",function(){n.CHM(i);const l=n.oxw();return n.KtG(l.clearDictInput())}),n.qZA(),n.TgZ(4,"button",12),n.NdJ("click",function(){n.CHM(i);const l=n.oxw();return n.KtG(l.lookupWord())}),n._UZ(5,"i",13),n.qZA()()}if(2&u){const i=n.oxw();n.xp6(2),n.hij("",i.ts.l.search,":"),n.xp6(1),n.Q6J("ngModel",i.wordLookedUp)}}function Sn(u,_){if(1&u&&n._UZ(0,"iframe",14),2&u){const i=n.oxw();n.Q6J("src",i.defaultDictIframeText,n.uOi)}}function fo(u,_){1&u&&(n.TgZ(0,"div",15)(1,"ul")(2,"li")(3,"a",16),n._uU(4,"potafocal.com"),n.qZA()(),n.TgZ(5,"li")(6,"a",17),n._uU(7,"focloir.ie"),n.qZA()()()())}let Cn=(()=>{class u{constructor(i,s,l,w){this.ts=i,this.sanitizer=s,this.http=l,this.engagement=w,this.wordLookedUp="",this.selectTeanglann=!0,this.defaultDictIframeText=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/html;charset=utf-8,"+this.ts.l.search_for_words_in_dictionary),this.closeDictionaryEmitter=new n.vpe}ngOnInit(){}lookupWord(){var i=this;return(0,v.Z)(function*(){if(i.wordLookedUp){const s=i.http.post(W.Z.baseurl+"proxy/",{url:`https://www.teanglann.ie/en/fgb/${i.wordLookedUp}`}),l=yield(0,S.z)(s),w=(new DOMParser).parseFromString(l,"text/html");w.querySelectorAll(".ex > .head > a").forEach(ye=>ye.href=`https://www.teanglann.ie${ye.href.slice(ye.href.lastIndexOf("/en/"))}`),w.querySelector(".moar")?.remove();const Q=w.querySelector(".listings");Q.style.cssText+="margin-right: 0px; padding: 10px;",document.getElementById("dictiframe").src='data:text/html;charset=utf-8,<link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/template.css"><link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/fgb.css">'+Q.outerHTML,i.engagement.addEventForLoggedInUser(Yt.tw["USE-DICTIONARY"],null,i.wordLookedUp)}else alert(i.ts.l.enter_a_word_to_lookup)})()}clearDictInput(){this.wordLookedUp&&(this.wordLookedUp="")}}return u.\u0275fac=function(i){return new(i||u)(n.Y36(L.D),n.Y36(wn.H7),n.Y36(xn.eN),n.Y36(xe.M))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-dictionary-drawer"]],outputs:{closeDictionaryEmitter:"closeDictionaryEmitter"},decls:15,vars:5,consts:[[1,"dictionaryContainer"],[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"dictionarySubHeader"],[1,"dictionaryName",3,"click"],["class","dictionaryInput",4,"ngIf"],["class","dictionaryIframe","id","dictiframe",3,"src",4,"ngIf"],["class","dictionaryIframe externalLinks",4,"ngIf"],[1,"dictionaryInput"],["for","dictlookup"],["type","text","id","dictlookup","name","dictlookup","autofocus","",3,"ngModel","ngModelChange","keyup.enter","click"],[1,"searchDictionaryBtn",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["id","dictiframe",1,"dictionaryIframe",3,"src"],[1,"dictionaryIframe","externalLinks"],["href","http://www.potafocal.com/beo/","target","_blank"],["href","https://www.focloir.ie","target","_blank"]],template:function(i,s){1&i&&(n.TgZ(0,"div",0)(1,"div",1)(2,"h5"),n._uU(3),n.qZA(),n.TgZ(4,"div",2),n.NdJ("click",function(){return s.closeDictionaryEmitter.next(!0)}),n._UZ(5,"i",3),n.qZA()(),n.TgZ(6,"div",4)(7,"div",5),n.NdJ("click",function(){return s.selectTeanglann=!0}),n._uU(8," Teanglann "),n.qZA(),n._uU(9," | "),n.TgZ(10,"div",5),n.NdJ("click",function(){return s.selectTeanglann=!1}),n._uU(11),n.qZA()(),n.YNc(12,lo,6,2,"div",6),n.YNc(13,Sn,1,1,"iframe",7),n.YNc(14,fo,8,0,"div",8),n.qZA()),2&i&&(n.xp6(3),n.hij(" ",s.ts.l.dictionary," "),n.xp6(8),n.hij(" ",s.ts.l.external_links," "),n.xp6(1),n.Q6J("ngIf",s.selectTeanglann),n.xp6(1),n.Q6J("ngIf",s.selectTeanglann),n.xp6(1),n.Q6J("ngIf",!s.selectTeanglann))},dependencies:[F.O5,rt.Fj,rt.JJ,rt.On],styles:[".dictionaryContainer[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.dictionarySubHeader[_ngcontent-%COMP%]{padding-left:10px;padding-bottom:5px;background-color:var(--scealai-green);color:#fff;display:flex}.dictionaryName[_ngcontent-%COMP%]{background-color:var(--scealai-green);font-size:12px;color:#fff;padding-right:5px;padding-top:5px}.dictionaryName[_ngcontent-%COMP%]:hover{color:var(--scealai-light-green);text-decoration:none;cursor:pointer}.dictionaryInput[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;display:flex;padding-bottom:10px;padding-left:10px;gap:1rem}.searchDictionaryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.searchDictionaryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.dictionaryIframe[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:0 0 5px 5px}.externalLinks[_ngcontent-%COMP%]{text-align:left;padding-top:20px}"]}),u})();function ho(u,_){if(1&u&&n._UZ(0,"span",11),2&u){const i=n.oxw(2).$implicit,s=n.oxw(2);n.Q6J("innerHtml"," "+s.ERROR_INFO[i].nameEN,n.oJD)}}function go(u,_){if(1&u&&n._UZ(0,"span",11),2&u){const i=n.oxw(2).$implicit,s=n.oxw(2);n.Q6J("innerHtml"," "+s.ERROR_INFO[i].nameGA,n.oJD)}}const po=function(u){return{"background-color":u}};function Ar(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div",8),n.NdJ("click",function(){n.CHM(i);const l=n.oxw().$implicit,w=n.oxw(2);return n.KtG(w.toggleLegendTag(l))}),n._UZ(1,"div",9),n.YNc(2,ho,1,1,"span",10),n.YNc(3,go,1,1,"span",10),n._uU(4),n.qZA()}if(2&u){const i=n.oxw().$implicit,s=n.oxw(2);n.uIk("id",i),n.xp6(1),n.Q6J("ngStyle",n.VKq(5,po,s.ERROR_INFO[i].color)),n.xp6(1),n.Q6J("ngIf","en"==s.ts.l.iso_code),n.xp6(1),n.Q6J("ngIf","ga"==s.ts.l.iso_code),n.xp6(1),n.hij(" (",s.grammarEngine.errorStoreForLatestCheck.getType(i).length,") ")}}function Mr(u,_){if(1&u&&(n.ynx(0),n.YNc(1,Ar,5,7,"div",7),n.BQk()),2&u){const i=_.$implicit,s=n.oxw(2);n.xp6(1),n.Q6J("ngIf",s.displayTagType(i))}}function Er(u,_){if(1&u&&(n.TgZ(0,"div",5),n.YNc(1,Mr,2,1,"ng-container",6),n.qZA()),2&u){const i=n.oxw();n.xp6(1),n.Q6J("ngForOf",i.nonEmptyErrorTypes())}}function _o(u,_){if(1&u&&(n.TgZ(0,"div",13),n._uU(1),n.qZA()),2&u){const i=n.oxw(2);n.xp6(1),n.hij(" ",i.ts.l.no_grammar_errors," ")}}function mo(u,_){if(1&u&&(n.TgZ(0,"div",13),n._uU(1),n.qZA()),2&u){const i=n.oxw(2);n.xp6(1),n.hij(" ",i.ts.l.checking_grammar," ")}}function vo(u,_){if(1&u&&(n.YNc(0,_o,2,1,"div",12),n.YNc(1,mo,2,1,"div",12)),2&u){const i=n.oxw();n.Q6J("ngIf",i.grammarLoaded),n.xp6(1),n.Q6J("ngIf",!i.grammarLoaded)}}let yo=(()=>{class u{constructor(i){this.ts=i,this.closeGrammarEmitter=new n.vpe,this.ERROR_TYPES=fe.iR,this.ERROR_INFO=fe.UO}ngOnInit(){}displayTagType(i){return!(!this.grammarEngine||!this.grammarEngine.errorStoreForLatestCheck)&&this.grammarEngine.errorStoreForLatestCheck.typeIsNonEmpty(i)}toggleLegendTag(i){this.checkBoxes[i]=!this.checkBoxes[i];const s=this.grammarEngine.errorStoreForLatestCheck.getType(i);!s||!this.quillHighlighter||(console.log(s),this.checkBoxes[i]?this.quillHighlighter.show(s):this.quillHighlighter.hide(s),this.checkBoxes[i]?document.getElementById(i).classList.remove("hideLegendItem"):document.getElementById(i).classList.add("hideLegendItem"))}tickedTagTypes(){const i=[];for(const s of fe.iR)this.checkBoxes[s]&&i.push(s);return i}nonEmptyErrorTypes(){return this.grammarEngine&&this.grammarEngine.errorStoreForLatestCheck?this.grammarEngine.errorStoreForLatestCheck.nonEmptyTypes():[]}}return u.\u0275fac=function(i){return new(i||u)(n.Y36(L.D))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-grammar-error-drawer"]],inputs:{quillHighlighter:"quillHighlighter",grammarLoaded:"grammarLoaded",grammarErrorsTypeDict:"grammarErrorsTypeDict",grammarErrors:"grammarErrors",grammarEngine:"grammarEngine",checkBoxes:"checkBoxes"},outputs:{closeGrammarEmitter:"closeGrammarEmitter"},decls:8,vars:3,consts:[[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],["class","selectErrorCheckbox",4,"ngIf","ngIfElse"],["noGrammarErrorsMessage",""],[1,"selectErrorCheckbox"],[4,"ngFor","ngForOf"],["class","errorContainer",3,"click",4,"ngIf"],[1,"errorContainer",3,"click"],[1,"circle",3,"ngStyle"],[3,"innerHtml",4,"ngIf"],[3,"innerHtml"],["class","errorContainer",4,"ngIf"],[1,"errorContainer"]],template:function(i,s){if(1&i&&(n.TgZ(0,"div",0)(1,"h5"),n._uU(2),n.qZA(),n.TgZ(3,"div",1),n.NdJ("click",function(){return s.closeGrammarEmitter.next(!0)}),n._UZ(4,"i",2),n.qZA()(),n.YNc(5,Er,2,1,"div",3),n.YNc(6,vo,2,2,"ng-template",null,4,n.W1O)),2&i){const l=n.MAs(7);n.xp6(2),n.hij(" ",s.ts.message("grammar_errors")," "),n.xp6(3),n.Q6J("ngIf",s.nonEmptyErrorTypes().length>0)("ngIfElse",l)}},dependencies:[F.sg,F.O5,F.PC],styles:[".grammarMessageBanner[_ngcontent-%COMP%]{padding-bottom:20px}.circle[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border-radius:6px}.selectErrorCheckbox[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:space-around;text-align:left;padding-left:10px;padding-top:10px;gap:1.5rem;-webkit-user-select:none;-moz-user-select:none;user-select:none}.errorContainer[_ngcontent-%COMP%]{margin:20px}.errorContainer[_ngcontent-%COMP%]:hover{cursor:pointer}.errorColorBox[_ngcontent-%COMP%]{display:inline-flex;width:30px;height:15px}.hideLegendItem[_ngcontent-%COMP%]{text-decoration:line-through;opacity:.5}.dictionaryContainer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:wrap}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),u})();var Or=E(5042);function kr(u,_){if(1&u&&n._UZ(0,"audio",7,8),2&u){const i=n.oxw();n.Q6J("src",i.audioSource,n.LSH)}}function Ir(u,_){if(1&u&&n._UZ(0,"div",9),2&u){const i=n.oxw();n.Q6J("innerHTML",i.sanitizer.bypassSecurityTrustHtml(null==i.story||null==i.story.feedback?null:i.story.feedback.feedbackMarkup),n.oJD)}}let $n=(()=>{class u{constructor(i,s,l,w,N){this.ts=i,this.sanitizer=s,this.storyService=l,this.engagement=w,this.notificationService=N,this.closeFeedbackEmitter=new n.vpe}ngOnInit(){}ngOnChanges(i){this.story&&(this.story.feedback.text||this.story.feedback.audioId||this.story.feedback.feedbackMarkup)&&this.getFeedback()}getFeedback(){this.story.feedback.audioId&&this.getFeedbackAudio(),""!==this.story.feedback.text&&(this.story.feedback.seenByStudent=!0),this.storyService.viewFeedback(this.story._id).subscribe(()=>{this.engagement.addEventForLoggedInUser(Yt.tw["VIEW-FEEDBACK"],this.story),this.notificationService.getStudentNotifications()})}getFeedbackAudio(){this.storyService.getFeedbackAudio(this.story._id).subscribe(i=>{this.audioSource=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(i)),console.log(this.audioSource)})}}return u.\u0275fac=function(i){return new(i||u)(n.Y36(L.D),n.Y36(wn.H7),n.Y36(we.N),n.Y36(xe.M),n.Y36(Or.g))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-feedback-drawer"]],inputs:{story:"story"},outputs:{closeFeedbackEmitter:"closeFeedbackEmitter"},features:[n.TTD],decls:11,vars:5,consts:[[1,"feedbackHeader"],[1,"closeFeedbackBtn",3,"click"],[1,"fa","fa-times"],[1,"textFieldContainer"],["readonly","",1,"textField",3,"placeholder","value"],["id","audio","controls","","class","audioPlayer",3,"src",4,"ngIf"],["class","textField","style","text-align: left; padding-left:25%; padding-right:25%;",3,"innerHTML",4,"ngIf"],["id","audio","controls","",1,"audioPlayer",3,"src"],["audioTag",""],[1,"textField",2,"text-align","left","padding-left","25%","padding-right","25%",3,"innerHTML"]],template:function(i,s){1&i&&(n.TgZ(0,"div",0)(1,"div"),n._uU(2),n.qZA(),n.TgZ(3,"div",1),n.NdJ("click",function(){return s.closeFeedbackEmitter.next(!0)}),n._UZ(4,"i",2),n.qZA()(),n.TgZ(5,"div",3)(6,"textarea",4),n._uU(7,"    "),n.qZA(),n.YNc(8,kr,2,1,"audio",5),n._UZ(9,"hr"),n.YNc(10,Ir,1,1,"div",6),n.qZA()),2&i&&(n.xp6(2),n.hij(" ",s.ts.l.feedback," "),n.xp6(4),n.s9C("placeholder",s.ts.l.no_feedback_provided),n.s9C("value",null==s.story||null==s.story.feedback?null:s.story.feedback.text),n.xp6(2),n.Q6J("ngIf",s.audioSource&&(null==s.story||null==s.story.feedback?null:s.story.feedback.audioId)),n.xp6(2),n.Q6J("ngIf",null==s.story||null==s.story.feedback?null:s.story.feedback.feedbackMarkup))},dependencies:[F.O5],styles:[".feedbackHeader[_ngcontent-%COMP%]{width:100%;padding-left:20px;padding-right:20px;height:30px;background-color:var(--scealai-green);color:#fff;display:flex;align-items:center}.closeFeedbackBtn[_ngcontent-%COMP%]{margin-left:auto}.closeFeedbackBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.textFieldContainer[_ngcontent-%COMP%]{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px}.textField[_ngcontent-%COMP%]{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px;border:none}.audioPlayer[_ngcontent-%COMP%]{height:30px;width:90%;background-color:#f1f3f4;border:1px solid rgba(140,128,110,.5254901961)}"]}),u})();const xo=["rightDrawer"],Pr=["mySynthesisPlayer"];function Tn(u,_){1&u&&(n.TgZ(0,"span"),n._uU(1,"*"),n.qZA())}function Rr(u,_){if(1&u&&(n.TgZ(0,"span",23),n._uU(1),n.qZA()),2&u){const i=n.oxw(2);n.xp6(1),n.hij(" ",i.ts.l.made_using_prompts," ")}}function bo(u,_){if(1&u&&(n.TgZ(0,"div",24),n._uU(1),n._UZ(2,"i",25),n.qZA()),2&u){const i=n.oxw(2);n.xp6(1),n.hij(" ",i.ts.l.saved," ")}}function Fr(u,_){if(1&u&&(n.TgZ(0,"div",24),n._uU(1),n._UZ(2,"i",26),n.qZA()),2&u){const i=n.oxw(2);n.xp6(1),n.hij(" ",i.ts.l.saving," ")}}function Lr(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div",16)(1,"div",17)(2,"input",18),n.NdJ("ngModelChange",function(l){n.CHM(i);const w=n.oxw();return n.KtG(w.updatedTitle=l)})("blur",function(){n.CHM(i);const l=n.oxw();return n.KtG(l.updateStoryTitle())})("keydown.enter",function(){n.CHM(i);const l=n.oxw();return n.KtG(l.updateStoryTitle())}),n.qZA(),n.YNc(3,Tn,2,0,"span",19),n.YNc(4,Rr,2,1,"span",20),n.qZA(),n.TgZ(5,"div",21),n.YNc(6,bo,3,1,"div",22),n.YNc(7,Fr,3,1,"div",22),n.qZA()()}if(2&u){const i=n.oxw();n.xp6(2),n.s9C("size",i.updatedTitle.length),n.Q6J("ngStyle",i.titleStyle())("ngModel",i.updatedTitle),n.xp6(1),n.Q6J("ngIf",!i.storySaved),n.xp6(1),n.Q6J("ngIf",null==i.story?null:i.story.createdWithPrompts),n.xp6(2),n.Q6J("ngIf",i.storySaved),n.xp6(1),n.Q6J("ngIf",!i.storySaved)}}function Vn(u,_){1&u&&(n.TgZ(0,"span",40),n._uU(1,"speech_to_text"),n.qZA())}function wo(u,_){1&u&&(n.TgZ(0,"button",41),n._UZ(1,"i",42),n.qZA())}function Dr(u,_){1&u&&(n.TgZ(0,"div"),n._UZ(1,"div",43),n.qZA())}function jn(u,_){1&u&&(n.TgZ(0,"span",46),n._uU(1,"1"),n.qZA())}function er(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div",34),n.NdJ("click",function(){n.CHM(i);const l=n.oxw(2);return l.dontToggle=!0,n.KtG(l.toggleRightDrawer("feedback"))}),n._uU(1),n._UZ(2,"i",44),n.YNc(3,jn,2,0,"span",45),n.qZA()}if(2&u){const i=n.oxw(2);n.ekj("optionsBtnClicked",i.rightDrawerOpened&&"feedback"==i.selectedDrawer),n.xp6(1),n.hij(" ",i.ts.l.feedback," "),n.xp6(2),n.Q6J("ngIf",i.hasFeedback&&!i.story.feedback.seenByStudent)}}const Bt=function(u){return{disableDiv:u}};function Zr(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div",27)(1,"div",28),n.NdJ("click",function(){n.CHM(i);const l=n.oxw();return l.dontToggle=!0,n.KtG(l.speakStory())}),n._uU(2),n.YNc(3,Vn,2,0,"span",29),n.YNc(4,wo,2,0,"button",30),n.YNc(5,Dr,2,0,"div",19),n.qZA(),n.TgZ(6,"div",31),n.NdJ("click",function(){n.CHM(i);const l=n.oxw();return n.KtG(l.dontToggle=!0)}),n.TgZ(7,"button",32),n.NdJ("click",function(){n.CHM(i);const l=n.oxw();return n.KtG(l.downloadStory())}),n._uU(8),n._UZ(9,"i",33),n.qZA()(),n.TgZ(10,"div",34),n.NdJ("click",function(){n.CHM(i);const l=n.oxw();return l.dontToggle=!0,n.KtG(l.goToRecording())}),n._uU(11),n._UZ(12,"i",35),n.qZA(),n.YNc(13,er,4,4,"div",36),n.TgZ(14,"div",34),n.NdJ("click",function(){n.CHM(i);const l=n.oxw();return l.dontToggle=!0,n.KtG(l.synthesisPlayer.toggleHidden())}),n._uU(15),n._UZ(16,"i",37),n.qZA(),n.TgZ(17,"div",34),n.NdJ("click",function(){n.CHM(i);const l=n.oxw();return l.dontToggle=!0,n.KtG(l.toggleRightDrawer("grammar"))}),n._uU(18),n._UZ(19,"i",38),n.qZA(),n.TgZ(20,"div",34),n.NdJ("click",function(){n.CHM(i);const l=n.oxw();return l.dontToggle=!0,n.KtG(l.toggleRightDrawer("dictionary"))}),n._uU(21),n._UZ(22,"i",39),n.qZA()()}if(2&u){const i=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(16,Bt,i.isTranscribing)),n.xp6(1),n.hij(" ",i.ts.l.speak," "),n.xp6(1),n.Q6J("ngIf",!i.isRecording),n.xp6(1),n.Q6J("ngIf",i.isRecording&&!i.isTranscribing),n.xp6(1),n.Q6J("ngIf",i.isTranscribing),n.xp6(2),n.s9C("href",i.downloadStoryUrl()),n.xp6(1),n.hij(" ",i.ts.l.download," "),n.xp6(3),n.hij(" ",i.ts.l.recordings," "),n.xp6(2),n.Q6J("ngIf",i.hasFeedback),n.xp6(2),n.hij(" ",i.ts.l.audio_check," "),n.xp6(2),n.ekj("optionsBtnClicked",i.rightDrawerOpened&&"grammar"==i.selectedDrawer),n.xp6(1),n.hij(" ",i.ts.l.grammar_errors," "),n.xp6(2),n.ekj("optionsBtnClicked",i.rightDrawerOpened&&"dictionary"==i.selectedDrawer),n.xp6(1),n.hij(" ",i.ts.l.dictionary," ")}}function Br(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div",47,48)(2,"span",49),n.NdJ("click",function(){n.CHM(i),n.oxw();const l=n.MAs(4);return n.KtG(l.toggle())}),n._uU(3,"menu"),n.qZA(),n.TgZ(4,"quill-editor",50),n.NdJ("ngModelChange",function(l){n.CHM(i);const w=n.oxw();return n.KtG(w.story.htmlText=l)})("onContentChanged",function(l){n.CHM(i);const w=n.oxw();return n.KtG(w.onContentChanged(l))})("onEditorCreated",function(l){n.CHM(i);const w=n.oxw();return n.KtG(w.onEditorCreated(l))}),n.qZA()()}if(2&u){const i=n.oxw();n.Q6J("ngStyle",i.quillEditorStyle),n.xp6(4),n.Q6J("modules",i.quillToolbar)("preserveWhitespace",!0)("debounceTime",1500)("ngModel",i.story.htmlText)}}function So(u,_){1&u&&(n.TgZ(0,"div",52),n._UZ(1,"i",53),n.TgZ(2,"div"),n._uU(3,"Click on the '+' button to create your first story!"),n.qZA()())}function Nr(u,_){if(1&u&&n.YNc(0,So,4,0,"div",51),2&u){const i=n.oxw();n.Q6J("ngIf",i.storiesLoaded)}}function Ur(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"app-feedback-drawer",54),n.NdJ("closeFeedbackEmitter",function(){n.CHM(i);const l=n.oxw();return n.KtG(l.toggleRightDrawer("feedback"))}),n.qZA()}if(2&u){const i=n.oxw();n.Q6J("story",i.story)}}function qr(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"app-dictionary-drawer",55),n.NdJ("closeDictionaryEmitter",function(){n.CHM(i);const l=n.oxw();return n.KtG(l.toggleRightDrawer("dictionary"))}),n.qZA()}}function Gr(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"app-grammar-error-drawer",56),n.NdJ("closeGrammarEmitter",function(){n.CHM(i);const l=n.oxw();return n.KtG(l.toggleRightDrawer("grammar"))}),n.qZA()}if(2&u){const i=n.oxw();n.Q6J("quillHighlighter",i.quillHighlighter)("grammarLoaded",i.grammarLoaded)("grammarErrorsTypeDict",i.grammarErrorsTypeDict)("grammarErrors",i.grammarErrors)("grammarEngine",i.grammarEngine)("checkBoxes",i.checkBoxes)}}B().register("modules/imageCompress",ee());let Co=(()=>{class u{constructor(i,s,l,w,N,H,Q,ie,ye){this.ts=i,this.auth=s,this.storyService=l,this.recordAudioService=w,this.engagement=N,this.classroomService=H,this.dialog=Q,this.http=ie,this.router=ye,this.saveStoryDebounceId=0,this.mostRecentAttemptToSaveStory=new Date,this.storySaved=!0,this.storiesLoaded=!1,this.isFirstStory=!1,this.downloadStoryFormat=".pdf",this.hasFeedback=!1,this.updatedTitle="",this.grammarLoaded=!1,this.showErrorTags=!1,this.grammarCheckerOptions={anGramadoir:Xi,relativeClause:ji,broadSlender:$t},this.checkBoxes=fe._Q,this.grammarErrorsTypeDict={},this.showOptions=!0,this.dontToggle=!1,this.rightDrawerOpened=!1,this.selectedDrawer="grammar",this.words=[],this.wordCount=0,this.textUpdated=new A.x,this.quillToolbar={toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"],["image"]],imageCompress:{quality:.7,maxWidth:500,maxHeight:500,imageType:"image/png",debug:!1,suppressErrorLogging:!1,insertIntoEditor:void 0}},this.isRecording=!1,this.isTranscribing=!1,this.setUpGrammarChecking()}ngOnInit(){return(0,v.Z)(function*(){})()}setUpGrammarChecking(){var i=this;return(0,v.Z)(function*(){const s=i.auth.getUserDetails();if(!s)return;let l=yield(0,S.z)(i.classroomService.getClassroomOfStudent(s._id)),w=[];l&&l.grammarCheckers&&l.grammarCheckers.length>0?l.grammarCheckers.forEach(N=>{i.grammarCheckerOptions[N]&&w.push(i.grammarCheckerOptions[N])}):w=Object.values(i.grammarCheckerOptions),i.grammarEngine=new Kt(w,i.http,i.auth),i.textUpdated.pipe((0,b.x)()).subscribe((0,v.Z)(function*(){console.log("Text updated"),i.runGrammarCheck()}))})()}runGrammarCheck(){if(this.grammarLoaded=!1,this.quillHighlighter?.hideAll(),this.story.text.replace(/\n/g," "))try{this.grammarEngine.check$(this.story.text).subscribe({next:s=>{this.showErrorTags&&this.quillHighlighter.addTag(s)},error:function(){},complete:()=>{!this.quillHighlighter||(this.grammarEngine.saveErrorsWithSentences(this.story._id).then(console.log,console.error),this.grammarLoaded=!0)}})}catch(s){console.error(s)}}toggleRightDrawer(i){this.rightDrawerOpened?this.selectedDrawer===i&&(this.rightDrawer.close(),this.rightDrawerOpened=!1):(this.rightDrawer.open(),this.rightDrawerOpened=!0),this.selectedDrawer=i,"grammar"==this.selectedDrawer&&this.rightDrawerOpened?(this.showErrorTags=!0,this.runGrammarCheck(),this.toggleGrammarTags()):(this.showErrorTags=!1,this.toggleGrammarTags())}setCurrentStory(i){this.story=i,this.story&&(this.storySaved=!0,this.updatedTitle=this.story.title,this.getWordCount(this.story.text),this.textUpdated.next(i.text))}onContentChanged(i){this.story.text=i.text,this.getWordCount(i.text),"user"===i.source&&(this.storySaved=!1,this.textUpdated.next(i.text),this.debounceSaveStory())}onEditorCreated(i){i.history.options.userOnly=!0,this.quillEditor=i,this.quillEditor.root.setAttribute("spellcheck","false"),i.focus();const s=function(l){const[w,N]="en"==this.ts.l.iso_code?[l.nameEN,l.messageEN]:[l.nameGA,l.messageGA];return`<div style="white-space: pre-wrap; text-align: left;"><span class="circle" style="background: ${l.color}"></span> ${w}: ${N}</div>`}.bind(this);this.quillHighlighter=new Ke(this.quillEditor,s,this.engagement)}getWordCount(i){if(!i)return 0;const s=i.replace(/[\t\n\r\.\?\!]/gm," ").split(" ");this.words=[],s.map(l=>{const w=l.trim();w.length>0&&this.words.push(w)}),this.wordCount=this.words.length}debounceSaveStory(){this.saveStoryDebounceId++;const i=this.saveStoryDebounceId,s=new Date;setTimeout(()=>{i===this.saveStoryDebounceId&&this.saveStory(i,s)},1e3)}saveStory(i,s){var l=this;return(0,v.Z)(function*(){const w=new Date;if(l.mostRecentAttemptToSaveStory=w,!l.story._id)return window.alert("Cannot save story. The id is not known");const N=l.stripGramadoirAttributesFromHtml((0,q.clone)(l.story.htmlText)),H={title:l.story.title,dialect:l.story.dialect,text:l.story.text,htmlText:N,lastUpdated:s};l.engagement.addEventForLoggedInUser(Yt.tw["SAVE-STORY"],l.story);try{yield(0,S.z)(l.storyService.updateStory(H,l.story._id)),(i===l.saveStoryDebounceId||"modal"===i)&&(l.storySaved=!0)}catch(Q){throw window.alert("Error while trying to save story: "+Q.message),Q}try{w===l.mostRecentAttemptToSaveStory&&(l.storySaved=!0)}catch(Q){throw window.alert("Error setting storySaved to true: "+Q.message),Q}})()}stripGramadoirAttributesFromHtml(i){return i&&i.replace?i.replace(/\s*style="([^"])+"/g,"").replace(/\s*highlight-tag-type="([^"])+"/g,"").replace(/\s*highlight-tag="([^"])+"/g,""):""}toggleOptions(){this.dontToggle||(this.showOptions=!this.showOptions),this.dontToggle=!1}titleStyle(){return{"font-style":this.storySaved?"normal":"italic"}}updateStoryTitle(){this.updatedTitle!=this.story.title&&(this.storySaved=!1,this.story.title=this.updatedTitle,this.storyService.updateTitle(this.story._id,this.story.title).subscribe({next:()=>{this.storySaved=!0,console.log("title updated")},error:()=>console.log("error updating title")}))}downloadStory(){this.dialogRef=this.dialog.open(M.p,{data:{title:this.ts.l.download,type:"select",data:[this.story.title,[".pdf",".docx",".txt",".odt"]],confirmText:this.ts.l.download,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(i=>{this.dialogRef=void 0,i&&(this.downloadStoryFormat=i[1]?i[1]:".pdf",this.http.get(this.downloadStoryUrl(),{responseType:"blob"}).subscribe(s=>{const l=window.document.createElement("a");l.href=window.URL.createObjectURL(s),l.download=i[0]?i[0]:this.story.title,document.body.appendChild(l),l.click(),document.body.removeChild(l)}))})}downloadStoryUrl(){return W.Z.baseurl+"story/downloadStory/"+this.story._id+"/"+this.downloadStoryFormat}toggleGrammarTags(){var i=this;return(0,v.Z)(function*(){if(i.showErrorTags){for(const s of fe.iR)if(i.checkBoxes[s]){const l=i.grammarEngine.errorStoreForLatestCheck.getType(s);i.quillHighlighter?.show(l)}}else i.quillHighlighter.hideAll()})()}goToRecording(){this.router.navigateByUrl("/student/record-story/"+this.story._id)}speakStory(){var i=this;return(0,v.Z)(function*(){if(i.isRecording){i.isTranscribing=!0,i.recordAudioService.stopRecording();let s=yield i.recordAudioService.getAudioTranscription();if(i.isTranscribing=!1,s){let l=i.quillEditor.getSelection(!0);i.quillEditor.insertText(l.index,s+"."),i.story.text=i.quillEditor.getText(),i.story.htmlText=i.quillEditor.root.innerHTML,i.getWordCount(s),i.storySaved=!1,i.debounceSaveStory()}}else i.recordAudioService.recordAudio();i.isRecording=!i.isRecording})()}}return u.\u0275fac=function(i){return new(i||u)(n.Y36(L.D),n.Y36(ue.$),n.Y36(we.N),n.Y36(me.r),n.Y36(xe.M),n.Y36(qe.u),n.Y36(h.uw),n.Y36(xn.eN),n.Y36(c.F0))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-dashboard"]],viewQuery:function(i,s){if(1&i&&(n.Gf(xo,5),n.Gf(Pr,5)),2&i){let l;n.iGM(l=n.CRH())&&(s.rightDrawer=l.first),n.iGM(l=n.CRH())&&(s.synthesisPlayer=l.first)}},decls:18,vars:11,consts:[["class","storyTitleHeader",4,"ngIf"],["class","optionsBtnContainer",4,"ngIf"],["autosize","",1,"bodyContainer"],["mode","side",1,"storyListDrawer",3,"opened"],["storyDrawer",""],[3,"storyEmitter","hasFeedback","titleUpdated","storiesLoaded","isFirstStory"],[1,"storyContainer"],["class","ql-container",3,"ngStyle",4,"ngIf","ngIfElse"],["newStoryMessage",""],["mode","side","position","end",1,"rightDrawer"],["rightDrawer",""],[3,"story","closeFeedbackEmitter",4,"ngIf"],[3,"closeDictionaryEmitter",4,"ngIf"],[3,"quillHighlighter","grammarLoaded","grammarErrorsTypeDict","grammarErrors","grammarEngine","checkBoxes","closeGrammarEmitter",4,"ngIf"],[3,"text","storyId","storyTitle"],["mySynthesisPlayer",""],[1,"storyTitleHeader"],[1,"storyTitleContainer"],[1,"storyTitle",3,"ngStyle","size","ngModel","ngModelChange","blur","keydown.enter"],[4,"ngIf"],["style","color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"saveIcon"],["class","savedIcon",4,"ngIf"],[2,"color","rgba(0, 0, 0, 0.4)"],[1,"savedIcon"],[1,"fas","fa-check"],[1,"fas","fa-save"],[1,"optionsBtnContainer"],[1,"optionsBtn","optionsPopupBtn",3,"ngClass","click"],["class","material-symbols-outlined optionsBtnIcon",4,"ngIf"],["class","notRecordingBtn blink",4,"ngIf"],[2,"display","flex",3,"click"],["target","_blank",1,"optionsBtn","optionsPopupBtn",2,"text-decoration","none",3,"href","click"],[1,"fas","fa-download","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"click"],[1,"fas","fa-microphone","optionsBtnIcon"],["class","optionsBtn optionsPopupBtn",3,"optionsBtnClicked","click",4,"ngIf"],[1,"fas","fa-volume-up","optionsBtnIcon"],[1,"fas","fa-spell-check","optionsBtnIcon"],[1,"fas","fa-book","optionsBtnIcon"],[1,"material-symbols-outlined","optionsBtnIcon"],[1,"notRecordingBtn","blink"],[1,"fas","fa-stop-circle"],[1,"dot-flashing"],[1,"fas","fa-comment-dots","optionsBtnIcon"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"],[1,"ql-container",3,"ngStyle"],["quillHeightSpan",""],[1,"menuButton","material-symbols-outlined",3,"click"],["placeholder","",3,"modules","preserveWhitespace","debounceTime","ngModel","ngModelChange","onContentChanged","onEditorCreated"],["class","newStoryMessage",4,"ngIf"],[1,"newStoryMessage"],[1,"fas","fa-arrow-left","fa-3x",2,"animation","pulse 2s infinite linear"],[3,"story","closeFeedbackEmitter"],[3,"closeDictionaryEmitter"],[3,"quillHighlighter","grammarLoaded","grammarErrorsTypeDict","grammarErrors","grammarEngine","checkBoxes","closeGrammarEmitter"]],template:function(i,s){if(1&i&&(n.YNc(0,Lr,8,7,"div",0),n.YNc(1,Zr,23,18,"div",1),n.TgZ(2,"mat-drawer-container",2)(3,"mat-drawer",3,4)(5,"app-story-drawer",5,4),n.NdJ("storyEmitter",function(w){return s.setCurrentStory(w)})("hasFeedback",function(w){return s.hasFeedback=w})("titleUpdated",function(w){return s.updatedTitle=w})("storiesLoaded",function(w){return s.storiesLoaded=w})("isFirstStory",function(w){return s.isFirstStory=w}),n.qZA()(),n.TgZ(7,"div",6),n.YNc(8,Br,5,5,"div",7),n.YNc(9,Nr,1,1,"ng-template",null,8,n.W1O),n.qZA(),n.TgZ(11,"mat-drawer",9,10),n.YNc(13,Ur,1,1,"app-feedback-drawer",11),n.YNc(14,qr,1,0,"app-dictionary-drawer",12),n.YNc(15,Gr,1,6,"app-grammar-error-drawer",13),n.qZA()(),n._UZ(16,"app-synthesis-player",14,15)),2&i){const l=n.MAs(10);n.Q6J("ngIf",s.story),n.xp6(1),n.Q6J("ngIf",s.story),n.xp6(2),n.Q6J("opened",s.storiesLoaded&&(!s.story||s.isFirstStory)),n.xp6(5),n.Q6J("ngIf",s.storiesLoaded&&s.story)("ngIfElse",l),n.xp6(5),n.Q6J("ngIf","feedback"==s.selectedDrawer),n.xp6(1),n.Q6J("ngIf","dictionary"==s.selectedDrawer),n.xp6(1),n.Q6J("ngIf","grammar"==s.selectedDrawer),n.xp6(1),n.Q6J("text",null==s.story?null:s.story.text)("storyId",null==s.story?null:s.story._id)("storyTitle",null==s.story?null:s.story.title)}},dependencies:[F.mk,F.O5,F.PC,rt.Fj,rt.JJ,rt.On,Mt.jA,Mt.kh,wr.g6,Wi,uo,Cn,yo,$n],styles:['.storyTitleHeader{display:flex;justify-content:center;margin-top:-30px;padding-bottom:20px}.storyTitleContainer{margin:auto;overflow:auto;font-size:20px;font-weight:bolder}.storyTitle{border:1px solid transparent;text-align:center;resize:none}.storyTitle:hover{border:1px solid;border-radius:5px}.saveIcon{align-self:flex-end;white-space:nowrap;color:var(--dark-text);border-style:none;font-size:11pt;padding:5px;margin-right:20px}.savedIcon{color:var(--scealai-light-brown)}.optionsBtnContainer>*{height:2rem}.optionsBtnContainer{display:flex;justify-content:space-around;flex-wrap:wrap;--options-btn-background-color-hover: lightgray;margin-left:10%;margin-right:10%}.optionsBtn{background-color:var(--scealai-yellow);border-style:none;color:#464444;margin:0;border-radius:2px;display:flex;align-items:center;padding:5px;background:rgba(223,217,200,0)}.optionsBtn:hover{background-color:var(--options-btn-background-color-hover);color:#35322f;cursor:pointer;border-radius:2}.optionsPopupBtn{margin-right:4px}.optionsBtnIcon{margin-left:5px}.optionsBtnClicked{background-color:var(--options-btn-background-color-hover);color:#35322f;border-radius:2}.notRecordingBtn{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.bodyContainer{width:100%;height:100%}.storyListDrawer{padding:40px;max-width:35%;height:100%}.storyContainer{height:100%}.ql-container{background-color:#f8f9fa;height:100%}.ql-editor{background-color:#fff;z-index:1;margin-top:20px;font-size:14pt;font-family:Times New Roman,Times,serif;min-height:70vh!important;max-height:70vh!important}.menuButton{float:left;padding-left:10px;padding-top:7px;transform:scale(1.5);z-index:100}.menuButton:hover{cursor:pointer}.material-symbols-outlined{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 48}.newStoryMessage{font-weight:bolder;max-width:300px;padding-top:50px;padding-bottom:50px;padding-left:50px;height:80vh;width:100%;display:flex;align-items:end;justify-content:center}.rightDrawer{width:25%;height:100%}.blink{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}\n','.custom-tooltip:before{content:none!important}.circle{display:inline-block;width:12px;height:12px;border-radius:6px}[data-selected]{margin:.3em}.ql-editor *{padding-top:.1em!important;padding-bottom:.1em!important;max-width:150mm;margin:auto!important}.ql-editor span{position:relative}[highlight-tag]{position:relative;text-decoration:none}[highlight-tag]:after{content:"";position:absolute;left:0%;bottom:-1px;width:100%;height:3px;background:var(--highlight-error-red)}[highlight-tag][left-edge]:after{content:"";position:absolute;left:2.5px;bottom:-1px;width:calc(100% - 2.5px);height:3px;background:var(--highlight-error-red)}[highlight-tag][right-edge]:after{content:"";position:absolute;left:0;bottom:-1px;width:calc(100% - 2.5px);height:3px;background:var(--highlight-error-red)}[highlight-tag][left-edge][right-edge]:after{content:"";position:absolute;bottom:-1px;left:2.5px;width:calc(100% - 5px);height:3px;background:var(--highlight-error-red)}\n','.ql-editor{overflow-y:auto}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=times-new-roman]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=times-new-roman]:before{content:"Times New Roman";font-family:Times New Roman}.ql-font-times-new-roman{font-family:times new roman}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=arial]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=arial]:before{content:"Arial";font-family:arial}.ql-font-arial{font-family:arial}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=sans-serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=sans-serif]:before{content:"Sans Serif";font-family:"sans serif"}.ql-font-sans-serif{font-family:"sans serif"}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{content:"Monospace";font-family:"monospace"}.ql-font-monospace{font-family:"monospace"}\n'],encapsulation:2}),u})();var Hr=E(9121);let Wr=(()=>{class u{constructor(i){this.sanitizer=i}transform(i){return this.sanitizer.bypassSecurityTrustHtml(i)}}return u.\u0275fac=function(i){return new(i||u)(n.Y36(wn.H7,16))},u.\u0275pipe=n.Yjl({name:"safeHtml",type:u,pure:!0}),u})();function Jr(u,_){if(1&u&&(n.TgZ(0,"div",14)(1,"b"),n._uU(2),n.qZA(),n._UZ(3,"grid-spinner"),n.qZA()),2&u){const i=n.oxw();n.xp6(2),n.Oqu(i.ts.l.synthesising)}}function To(u,_){1&u&&(n._UZ(0,"span",18),n.ALo(1,"safeHtml")),2&u&&n.Q6J("innerHTML",n.lcZ(1,1,_.$implicit.outerHTML),n.oJD)}function Ao(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){n.CHM(i);const l=n.oxw().$implicit,w=n.oxw(2);return n.KtG(w.stopSection(l))}),n._UZ(1,"i",20),n.qZA()}}function Mo(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){n.CHM(i);const l=n.oxw().$implicit,w=n.oxw(2);return n.KtG(w.playSection(l))}),n._UZ(1,"i",21),n.qZA()}}function Eo(u,_){if(1&u&&(n.TgZ(0,"div",2),n.YNc(1,To,2,3,"span",16),n.YNc(2,Ao,2,0,"button",17),n.YNc(3,Mo,2,0,"button",17),n.qZA()),2&u){const i=_.$implicit;n.xp6(1),n.Q6J("ngForOf",i.spans),n.xp6(1),n.Q6J("ngIf",!i.audio.paused),n.xp6(1),n.Q6J("ngIf",i.audio.paused)}}function tr(u,_){if(1&u&&(n.TgZ(0,"div"),n.YNc(1,Eo,4,3,"div",15),n.qZA()),2&u){const i=n.oxw();n.xp6(1),n.Q6J("ngForOf",i.chosenSections)}}function Oo(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div")(1,"button",24),n._uU(2),n.qZA(),n.TgZ(3,"button",25),n.NdJ("click",function(){n.CHM(i);const l=n.oxw(2);return n.KtG(l.changeSections(l.sentences))}),n._uU(4),n.qZA()()}if(2&u){const i=n.oxw(2);n.xp6(2),n.Oqu(i.ts.l.paragraph),n.xp6(2),n.Oqu(i.ts.l.sentence)}}function ko(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div")(1,"button",25),n.NdJ("click",function(){n.CHM(i);const l=n.oxw(2);return n.KtG(l.changeSections(l.paragraphs))}),n._uU(2),n.qZA(),n.TgZ(3,"button",24),n._uU(4),n.qZA()()}if(2&u){const i=n.oxw(2);n.xp6(2),n.Oqu(i.ts.l.paragraph),n.xp6(2),n.Oqu(i.ts.l.sentence)}}function Io(u,_){if(1&u&&(n.TgZ(0,"div",22)(1,"div",23),n._uU(2),n.qZA(),n.YNc(3,Oo,5,2,"div",11),n.YNc(4,ko,5,2,"div",11),n.qZA()),2&u){const i=n.oxw();n.xp6(2),n.hij(" ",i.ts.l.listen_by," "),n.xp6(1),n.Q6J("ngIf",i.isParagraphMode()),n.xp6(1),n.Q6J("ngIf",i.isSentenceMode())}}let Po=(()=>{class u{constructor(i,s,l,w,N){this.storyService=i,this.route=s,this.router=l,this.ts=w,this.synthesis=N,this.paragraphs=[],this.sentences=[],this.audioFinishedLoading=!1}ngOnInit(){var i=this;return(0,v.Z)(function*(){i.storyId=i.route.snapshot.paramMap.get("id");let s=yield(0,S.z)(i.storyService.getStory(i.storyId));i.synthesis.synthesiseStory(s).then(([l,w])=>{i.paragraphs=l,i.sentences=w,i.chosenSections=i.paragraphs,i.audioFinishedLoading=!0})})()}isSentenceMode(){return this.chosenSections[0]instanceof ke.cj}isParagraphMode(){return this.chosenSections[0]instanceof ke.nv}changeSections(i){this.chosenSections=i,this.paragraphs.concat(this.sentences).forEach(l=>this.stopSection(l))}playSection(i){i.play(),i.highlight()}stopSection(i){i.stop(),i.removeHighlight()}goToDashboard(){this.router.navigateByUrl("/student/dashboard/"+this.storyId)}}return u.\u0275fac=function(i){return new(i||u)(n.Y36(we.N),n.Y36(c.gz),n.Y36(c.F0),n.Y36(L.D),n.Y36(ke.cf))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-synthesis"]],decls:18,vars:5,consts:[["src","assets/img/book.png",1,"bookImg"],[1,"page"],[1,"paragraphContainer"],[1,"bookContainerSynth"],[1,"bookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"storyContainer"],[1,"storyHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[4,"ngIf"],[1,"footer"],["class","btnContainer",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"btnContainer"],[1,"footerText"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"]],template:function(i,s){1&i&&(n._UZ(0,"img",0),n.TgZ(1,"div",1),n._UZ(2,"div",2),n.TgZ(3,"div",3)(4,"div",4)(5,"div",5),n.NdJ("click",function(){return s.goToDashboard()}),n._UZ(6,"i",6),n._uU(7),n.qZA(),n._UZ(8,"div"),n.qZA(),n.TgZ(9,"div",7)(10,"div",8),n._uU(11),n.qZA(),n.TgZ(12,"div")(13,"div",9),n.YNc(14,Jr,4,1,"div",10),n.YNc(15,tr,2,1,"div",11),n.qZA(),n.TgZ(16,"div",12),n.YNc(17,Io,5,3,"div",13),n.qZA()()()()()),2&i&&(n.xp6(7),n.hij(" ",s.ts.l.story,""),n.xp6(4),n.hij(" ",s.ts.l.listen_and_correct," "),n.xp6(3),n.Q6J("ngIf",!s.audioFinishedLoading),n.xp6(1),n.Q6J("ngIf",s.audioFinishedLoading),n.xp6(2),n.Q6J("ngIf",s.audioFinishedLoading))},dependencies:[F.sg,F.O5,Hr.P,Wr],styles:['.bookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:var(--dark-text);width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.storyContainer[_ngcontent-%COMP%]{margin-top:10px}.storyHeader[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]:hover, .selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),u})();class Ro{constructor(_,i=[],s=[],l=[],w=[],N=[],H=[]){this.paragraphAudioIds=i,this.paragraphIndices=s,this.paragraphTranscriptions=l,this.sentenceAudioIds=w,this.sentenceIndices=N,this.sentenceTranscriptions=H,this.storyData=_,this.date=new Date,this.archived=!1}}var ge=E(2754);function he(u,_){1&u&&(n.TgZ(0,"span"),n._uU(1,"*"),n.qZA())}function Fo(u,_){if(1&u&&(n.TgZ(0,"div",16),n._uU(1),n._UZ(2,"i",17),n.qZA()),2&u){const i=n.oxw(2);n.xp6(1),n.hij(" ",i.ts.l.saved," ")}}function Lo(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div",18),n.NdJ("click",function(){n.CHM(i);const l=n.oxw(2);return n.KtG(l.saveRecordings())}),n._uU(1),n._UZ(2,"i",19),n.qZA()}if(2&u){const i=n.oxw(2);n.xp6(1),n.hij(" ",i.ts.l.save," ")}}function Do(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div",8)(1,"div",9),n.NdJ("click",function(){n.CHM(i);const l=n.oxw();return n.KtG(l.goToDashboard())}),n._UZ(2,"i",10),n._uU(3),n.qZA(),n.TgZ(4,"div",11),n._uU(5),n.YNc(6,he,2,0,"span",12),n.qZA(),n.TgZ(7,"div",13),n.YNc(8,Fo,3,1,"div",14),n.YNc(9,Lo,3,1,"div",15),n.qZA()()}if(2&u){const i=n.oxw();n.xp6(3),n.hij(" ",i.ts.l.story," "),n.xp6(2),n.hij(" ",null==i.story?null:i.story.title,""),n.xp6(1),n.Q6J("ngIf",!i.recordingSaved),n.xp6(2),n.Q6J("ngIf",i.recordingSaved),n.xp6(1),n.Q6J("ngIf",!i.recordingSaved)}}function Zo(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div",20),n.NdJ("click",function(){n.CHM(i),n.oxw();const l=n.MAs(5);return n.KtG(l.toggle())}),n.TgZ(1,"mat-icon"),n._uU(2,"menu"),n.qZA(),n._uU(3),n.qZA()}if(2&u){const i=n.oxw();n.xp6(3),n.hij(" ",i.ts.l.archive," ")}}const Bo=function(u){return{"font-style":u}};function No(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div")(1,"div",21),n.NdJ("click",function(){const w=n.CHM(i).$implicit,N=n.oxw();return n.KtG(N.setCurrentRecording(w))}),n.TgZ(2,"div",22)(3,"div",23),n._uU(4),n.qZA()(),n.TgZ(5,"div",24),n._uU(6),n.ALo(7,"date"),n.qZA()(),n._UZ(8,"hr"),n.qZA()}if(2&u){const i=_.$implicit;n.xp6(1),n.uIk("id",i._id),n.xp6(2),n.Q6J("ngStyle",n.VKq(7,Bo,i.archived?"none":"italic")),n.xp6(1),n.hij(" ",null==i||null==i.storyData?null:i.storyData.title,""),n.xp6(2),n.hij(" ",n.xi3(7,4,i.date,"d/M/yy, h:mm a")," ")}}function Yr(u,_){if(1&u&&(n.TgZ(0,"div",30)(1,"b"),n._uU(2),n.qZA(),n._UZ(3,"grid-spinner"),n.qZA()),2&u){const i=n.oxw(2);n.xp6(2),n.Oqu(i.ts.l.synthesising)}}function Uo(u,_){1&u&&(n._UZ(0,"span",42),n.ALo(1,"safeHtml")),2&u&&n.Q6J("innerHTML",n.lcZ(1,1,_.$implicit.outerHTML),n.oJD)}function Ae(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"button",43),n.NdJ("click",function(){n.CHM(i);const l=n.oxw().$implicit,w=n.oxw(3);return n.KtG(w.stopSection(l))}),n._UZ(1,"i",44),n.qZA()}}function zr(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"button",43),n.NdJ("click",function(){n.CHM(i);const l=n.oxw().$implicit,w=n.oxw(3);return n.KtG(w.playSection(l))}),n._UZ(1,"i",45),n.qZA()}}function en(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"button",46),n.NdJ("click",function(){n.CHM(i);const l=n.oxw().index,w=n.oxw(3);return n.KtG(w.recordAudio(l))}),n._UZ(1,"i",47),n.qZA()}}function Qr(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"button",48),n.NdJ("click",function(){n.CHM(i);const l=n.oxw().index,w=n.oxw(3);return n.KtG(w.stopRecording(l))}),n._UZ(1,"i",49),n.qZA()}}function nr(u,_){1&u&&n._UZ(0,"hr",50)}function Ge(u,_){1&u&&(n.TgZ(0,"div",51),n._UZ(1,"div",52),n.qZA())}function Kr(u,_){if(1&u&&(n.TgZ(0,"div",53)(1,"span",54),n._uU(2),n.qZA(),n.TgZ(3,"span",55),n._uU(4),n.qZA()()),2&u){const i=n.oxw().index,s=n.oxw(3);n.xp6(2),n.hij("",s.ts.l.speech_recognition_output," "),n.xp6(2),n.Oqu(s.sectionTranscriptions[i])}}function Xr(u,_){if(1&u&&n._UZ(0,"audio",59,60),2&u){const i=n.oxw(2).index,s=n.oxw(3);n.uIk("src",s.sectionAudioSources[i],n.LSH)}}function $r(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"button",61),n.NdJ("click",function(){n.CHM(i);const l=n.oxw(2).index,w=n.oxw(3);return n.KtG(w.deleteRecording(l))}),n._UZ(1,"i",62),n.qZA()}}function Vr(u,_){if(1&u&&(n.TgZ(0,"div",56)(1,"div",54),n._uU(2),n.qZA(),n.YNc(3,Xr,2,1,"audio",57),n.YNc(4,$r,2,0,"button",58),n.qZA()),2&u){const i=n.oxw().index,s=n.oxw(3);n.xp6(2),n.Oqu(s.ts.l.your_recording),n.xp6(1),n.Q6J("ngIf",s.sectionAudioSources[i]),n.xp6(1),n.Q6J("ngIf",s.sectionAudioSources[i]&&!s.currentRecording.archived)}}function jr(u,_){if(1&u&&(n.TgZ(0,"div",32)(1,"div",33)(2,"div"),n.YNc(3,Uo,2,3,"span",34),n.YNc(4,Ae,2,0,"button",35),n.YNc(5,zr,2,0,"button",35),n.YNc(6,en,2,0,"button",36),n.YNc(7,Qr,2,0,"button",37),n.qZA(),n.YNc(8,nr,1,0,"hr",38),n.YNc(9,Ge,2,0,"div",39),n.YNc(10,Kr,5,2,"div",40),n.YNc(11,Vr,5,3,"div",41),n.qZA()()),2&u){const i=_.$implicit,s=_.index,l=n.oxw(3);n.xp6(3),n.Q6J("ngForOf",i.spans),n.xp6(1),n.Q6J("ngIf",!i.audio.paused),n.xp6(1),n.Q6J("ngIf",i.audio.paused),n.xp6(1),n.Q6J("ngIf",!l.isRecording(i,s)&&!l.currentRecording.archived),n.xp6(1),n.Q6J("ngIf",l.isRecording(i,s)&&!l.currentRecording.archived),n.xp6(1),n.Q6J("ngIf",l.sectionAudioSources[s]),n.xp6(1),n.Q6J("ngIf",l.isTranscribing[s]),n.xp6(1),n.Q6J("ngIf",l.sectionTranscriptions[s]),n.xp6(1),n.Q6J("ngIf",l.sectionAudioSources[s])}}function ei(u,_){if(1&u&&(n.TgZ(0,"div"),n.YNc(1,jr,12,9,"div",31),n.qZA()),2&u){const i=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",i.chosenSections)}}function De(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div")(1,"button",67),n._uU(2),n.qZA(),n.TgZ(3,"button",68),n.NdJ("click",function(){n.CHM(i);const l=n.oxw(3);return n.KtG(l.changeSections(l.sentences))}),n._uU(4),n.qZA()()}if(2&u){const i=n.oxw(3);n.xp6(2),n.hij(" ",i.ts.l.paragraph," "),n.xp6(2),n.hij(" ",i.ts.l.sentence," ")}}function qo(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"div")(1,"button",68),n.NdJ("click",function(){n.CHM(i);const l=n.oxw(3);return n.KtG(l.changeSections(l.paragraphs))}),n._uU(2),n.qZA(),n.TgZ(3,"button",67),n._uU(4),n.qZA()()}if(2&u){const i=n.oxw(3);n.xp6(2),n.hij(" ",i.ts.l.paragraph," "),n.xp6(2),n.hij(" ",i.ts.l.sentence," ")}}function He(u,_){if(1&u){const i=n.EpF();n.TgZ(0,"button",69),n.NdJ("click",function(){n.CHM(i);const l=n.oxw(3);return n.KtG(l.archiveRecording())}),n._uU(1),n.qZA()}if(2&u){const i=n.oxw(3);n.xp6(1),n.hij(" ",i.ts.l.archive_recording," ")}}function Go(u,_){if(1&u&&(n.TgZ(0,"div",63)(1,"div",64)(2,"div",65),n._uU(3),n.qZA(),n.YNc(4,De,5,2,"div",12),n.YNc(5,qo,5,2,"div",12),n.YNc(6,He,2,1,"button",66),n.qZA()()),2&u){const i=n.oxw(2);n.xp6(3),n.hij(" ",i.ts.l.listen_by," "),n.xp6(1),n.Q6J("ngIf",i.isParagraphMode()),n.xp6(1),n.Q6J("ngIf",i.isSentenceMode()),n.xp6(1),n.Q6J("ngIf",!i.currentRecording.archived&&i.currentRecording.storyData.text!=i.story.text)}}function ti(u,_){if(1&u&&(n.TgZ(0,"div",25)(1,"div",26),n._uU(2),n.qZA(),n.TgZ(3,"div",27),n.YNc(4,Yr,4,1,"div",28),n.YNc(5,ei,2,1,"div",12),n.qZA(),n.YNc(6,Go,7,4,"div",29),n.qZA()),2&u){const i=n.oxw();n.xp6(2),n.hij(" ",i.ts.l.listen_record_compare," "),n.xp6(2),n.Q6J("ngIf",!i.audioFinishedLoading&&!i.recordingsFinishedLoading),n.xp6(1),n.Q6J("ngIf",i.audioFinishedLoading),n.xp6(1),n.Q6J("ngIf",i.audioFinishedLoading)}}const An=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"dashboard",component:Co,canActivate:[y.P],canDeactivate:[g]},{path:"synthesis/:id",component:Po,canActivate:[y.P],canDeactivate:[T]},{path:"record-story/:id",component:(()=>{class u{constructor(i,s,l,w,N,H,Q,ie,ye){this.storyService=i,this.ts=s,this.sanitizer=l,this.route=w,this.router=N,this.recordingService=H,this.synthesis=Q,this.engagement=ie,this.dialog=ye,this.story=new Kn,this.paragraphs=[],this.sentences=[],this.isRecordingParagraph=[],this.isRecordingSentence=[],this.isRecordingSection=[],this.paragraphAudioSources=[],this.sentenceAudioSources=[],this.sectionAudioSources=[],this.paragraphBlobs=[],this.sentenceBlobs=[],this.sectionBlobs=[],this.paragraphChunks=[],this.sentenceChunks=[],this.sectionChunks=[],this.recordingSaved=!0,this.audioFinishedLoading=!1,this.url_ASR_API="https://phoneticsrv3.lcs.tcd.ie/asr_api/recognise",this.sentenceTranscriptions=[],this.paragraphTranscriptions=[],this.sectionTranscriptions=[],this.isTranscribing=[!1],this.recordings=[],this.currentRecording=null,this.lastClickedRecordingId=""}ngOnInit(){var i=this;return(0,v.Z)(function*(){i.chunks=[],i.sectionAudioSources=i.paragraphAudioSources,i.sectionBlobs=i.paragraphBlobs,i.sectionChunks=i.paragraphChunks,i.sectionTranscriptions=i.paragraphTranscriptions,i.isRecordingSection=i.isRecordingParagraph;const s=i.route.snapshot.paramMap.get("id");i.story=yield(0,S.z)(i.storyService.getStory(s)),(0,ge.TD)({audio:!0,video:!1}).then((0,v.Z)(function*(){i.story.activeRecording?i.loadRecordings():i.createNewRecording()})).catch(l=>{i.openMicRequestDialog()})})()}loadRecordings(){var i=this;return(0,v.Z)(function*(){i.recordings=yield(0,S.z)(i.recordingService.getRecordings(i.story._id)),i.recordings.sort((l,w)=>l.date>w.date?-1:1);let s=i.recordings.filter(l=>!1===l.archived);i.setCurrentRecording(s[0])})()}setCurrentRecording(i){this.currentRecording=i,this.loadSynthesis(this.currentRecording.storyData),this.loadAudio(this.currentRecording);let s=this.currentRecording._id,l=document.getElementById(s);l&&(this.lastClickedRecordingId&&document.getElementById(this.lastClickedRecordingId).classList.remove("clickedresultCard"),this.lastClickedRecordingId=s,l.classList.add("clickedresultCard"))}createNewRecording(){var i=this;return(0,v.Z)(function*(){const s=yield(0,S.z)(i.recordingService.create(new Ro(i.story)));i.story=yield(0,S.z)(i.storyService.updateActiveRecording(i.story._id,s._id)),i.loadRecordings()})()}archiveRecording(){var i=this;return(0,v.Z)(function*(){yield(0,S.z)(i.recordingService.updateArchiveStatus(i.currentRecording._id)),i.createNewRecording()})()}loadSynthesis(i){this.synthesis.synthesiseStory(i).then(([s,l])=>{this.paragraphs=s,this.sentences=l,this.chosenSections=this.paragraphs,this.audioFinishedLoading=!0})}loadAudio(i){var s=this;return(0,v.Z)(function*(){s.audioFinishedLoading=!1,s.paragraphAudioSources=[],s.paragraphTranscriptions=[],s.sentenceAudioSources=[],s.sentenceTranscriptions=[],s.sectionAudioSources=[],s.sectionTranscriptions=[];for(let l=0;l<i.paragraphIndices.length;++l){let w=yield(0,S.z)(s.recordingService.getAudio(i.paragraphAudioIds[l]));s.paragraphBlobs[l]=w,s.paragraphAudioSources[i.paragraphIndices[l]]=s.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(w)),s.paragraphTranscriptions[i.paragraphIndices[l]]=i.paragraphTranscriptions[i.paragraphIndices[l]]}for(let l=0;l<i.sentenceIndices.length;++l){let w=yield(0,S.z)(s.recordingService.getAudio(i.sentenceAudioIds[l]));s.sentenceBlobs[l]=w,s.sentenceAudioSources[i.sentenceIndices[l]]=s.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(w)),s.sentenceTranscriptions[i.sentenceIndices[l]]=i.sentenceTranscriptions[i.sentenceIndices[l]]}s.sectionTranscriptions=s.paragraphTranscriptions,s.sectionAudioSources=s.paragraphAudioSources})()}recordAudio(i){this.engagement.addEventForLoggedInUser(Yt.tw["RECORD-STORY"],this.story),navigator.mediaDevices.getUserMedia({audio:!0}).then(l=>{this.stream=l,this.recorder=new MediaRecorder(this.stream),this.sectionChunks[i]=[],this.recorder.start(),this.isRecordingSection[i]=!0,this.recorder.ondataavailable=w=>{this.sectionChunks[i].push(w.data)}}).catch()}stopRecording(i){this.recorder.stop(),this.isRecordingSection[i]=!1,this.stream.getTracks().forEach(s=>s.stop()),setTimeout(()=>{const s=new Blob(this.sectionChunks[i],{type:"audio/mp3"});this.sectionBlobs[i]=s,this.sectionAudioSources[i]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(s)),this.recordingSaved=!1;const l=new FileReader;l.readAsDataURL(s),l.onloadend=function(){let w=l.result.split(";base64,")[1];this.getTranscription(w,i)}.bind(this)},500)}getTranscription(i,s){this.isTranscribing[s]=!0,this.isParagraphMode()&&(this.paragraphTranscriptions[s]=null),this.isSentenceMode()&&(this.sentenceTranscriptions[s]=null),fetch(this.url_ASR_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({recogniseBlob:i,developer:!0})}).then(w=>w.json()).then(w=>{let N=w.transcriptions[0].utterance;this.isParagraphMode()?(this.paragraphTranscriptions[s]=N,this.sectionTranscriptions[s]=this.paragraphTranscriptions[s]):this.isSentenceMode()&&(this.sentenceTranscriptions[s]=N,this.sectionTranscriptions[s]=this.sentenceTranscriptions[s]),this.isTranscribing[s]=!1})}deleteRecording(i){this.recordingSaved=!1,delete this.sectionAudioSources[i],delete this.sectionChunks[i],delete this.sectionBlobs[i],delete this.sectionTranscriptions[i]}saveRecordings(){var i=this;return(0,v.Z)(function*(){const s=Object.entries(i.paragraphBlobs).map(function(){var Me=(0,v.Z)(function*([Xe,it]){return i.recordingService.saveAudio(i.story._id,it,Xe).toPromise()});return function(Xe){return Me.apply(this,arguments)}}()),l=Object.entries(i.sentenceBlobs).map(function(){var Me=(0,v.Z)(function*([Xe,it]){return i.recordingService.saveAudio(i.story._id,it,Xe).toPromise()});return function(Xe){return Me.apply(this,arguments)}}()),w=yield Promise.all(s),N=yield Promise.all(l);let H=[],Q=[];for(const Me of w)H.push(Me.index),Q.push(Me.fileId);let ie=[],ye=[];for(const Me of N)ie.push(Me.index),ye.push(Me.fileId);const pe={paragraphAudioIds:Q,paragraphIndices:H,paragraphTranscriptions:i.paragraphTranscriptions,sentenceIndices:ie,sentenceAudioIds:ye,sentenceTranscriptions:i.sentenceTranscriptions};let Ie=yield(0,S.z)(i.recordingService.update(i.story.activeRecording,pe));if(Ie){i.recordingSaved=!0;const Me=i.recordings.indexOf(i.currentRecording);i.recordings.splice(Me,1,Ie)}else alert("Error while saving audio")})()}isRecording(i,s){return i instanceof ke.cj?this.isRecordingSentence[s]:i instanceof ke.nv?this.isRecordingParagraph[s]:void 0}isSentenceMode(){return this.chosenSections[0]instanceof ke.cj}isParagraphMode(){return this.chosenSections[0]instanceof ke.nv}changeSections(i){this.chosenSections=i,this.paragraphs.concat(this.sentences).forEach(l=>this.stopSection(l)),this.isSentenceMode()?(this.sectionAudioSources=this.sentenceAudioSources,this.sectionBlobs=this.sentenceBlobs,this.sectionChunks=this.sentenceChunks,this.sectionTranscriptions=this.sentenceTranscriptions,this.isRecordingSection=this.isRecordingSentence):this.isParagraphMode()&&(this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.sectionTranscriptions=this.paragraphTranscriptions,this.isRecordingSection=this.isRecordingParagraph)}playSection(i){i.play(),i.highlight()}stopSection(i){i.stop(),i.removeHighlight()}goToDashboard(){this.router.navigateByUrl("student/dashboard")}openMicRequestDialog(){var i=this;this.dialogRef=this.dialog.open(M.p,{data:{title:this.ts.l.microphone_blocked,message:this.ts.l.page_requires_microphone,confirmText:this.ts.l.refresh,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var s=(0,v.Z)(function*(l){i.dialogRef=void 0,console.log(l),l?i.ngOnInit():i.goToDashboard()});return function(l){return s.apply(this,arguments)}}())}}return u.\u0275fac=function(i){return new(i||u)(n.Y36(we.N),n.Y36(L.D),n.Y36(wn.H7),n.Y36(c.gz),n.Y36(c.F0),n.Y36(Sr.s),n.Y36(ke.cf),n.Y36(xe.M),n.Y36(h.uw))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-recording"]],decls:8,vars:4,consts:[[1,"content"],["class","recordingBookHeader",4,"ngIf"],["class","archiveButton",3,"click",4,"ngIf"],["autosize","",1,"archiveNavContainer"],["mode","side",1,"sidenav"],["drawer",""],[4,"ngFor","ngForOf"],["class","recordingStoryContainer",4,"ngIf"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"archiveButton",3,"click"],[1,"contentSection",3,"click"],[1,"contentsLink"],[3,"ngStyle"],[1,"contentsDate"],[1,"recordingStoryContainer"],[1,"recordingStoryHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],["class","footer","style","padding-top: 10px",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],["class","recordingBtn",3,"click",4,"ngIf"],["class","notRecordingBtn blink",3,"click",4,"ngIf"],["class","dividerLine",4,"ngIf"],["class","recognisedSpeechContainer",4,"ngIf"],["style","height: 40px",4,"ngIf"],["class","audioContainer",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"recordingBtn",3,"click"],[1,"fas","fa-microphone"],[1,"notRecordingBtn","blink",3,"click"],[1,"fas","fa-stop-circle"],[1,"dividerLine"],[1,"recognisedSpeechContainer"],[1,"dot-flashing"],[2,"height","40px"],[2,"opacity","0.5"],[1,"recognisedSpeech"],[1,"audioContainer"],["controls","","class","audioPlayer",4,"ngIf"],["class","notRecordingBtn trashBtn",3,"click",4,"ngIf"],["controls","",1,"audioPlayer"],["audioTag",""],[1,"notRecordingBtn","trashBtn",3,"click"],[1,"fas","fa-trash-alt"],[1,"footer",2,"padding-top","10px"],[1,"btnContainer"],[1,"footerText"],["class","changeSplitBtn","style","margin-left: auto",3,"click",4,"ngIf"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"],[1,"changeSplitBtn",2,"margin-left","auto",3,"click"]],template:function(i,s){1&i&&(n.TgZ(0,"div",0),n.YNc(1,Do,10,5,"div",1),n.YNc(2,Zo,4,1,"div",2),n.TgZ(3,"mat-drawer-container",3)(4,"mat-drawer",4,5),n.YNc(6,No,9,9,"div",6),n.qZA(),n.YNc(7,ti,7,4,"div",7),n.qZA()()),2&i&&(n.xp6(1),n.Q6J("ngIf",s.story),n.xp6(1),n.Q6J("ngIf",s.recordings.length>0),n.xp6(4),n.Q6J("ngForOf",s.recordings),n.xp6(1),n.Q6J("ngIf",s.story))},dependencies:[F.sg,F.O5,F.PC,Hr.P,Mt.jA,Mt.kh,Xn.Hw,F.uU,Wr],styles:['.content[_ngcontent-%COMP%]{width:90%;margin-left:5%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.archiveNavContainer[_ngcontent-%COMP%]{height:70vh;background-color:#fff}.sidenav[_ngcontent-%COMP%]{padding:20px;width:20vw}.archiveButton[_ngcontent-%COMP%]{display:flex;margin-left:10px;margin-top:20px;font-size:16px}.archiveButton[_ngcontent-%COMP%]:hover, .contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:20px;height:80%}.textContainerSynth[_ngcontent-%COMP%]{box-shadow:0 0 11px 2px #0006;margin-left:5%;width:90%;color:var(--dark-text);background-color:#f8f9fa;text-align:left;overflow:auto;height:100%}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{white-space:nowrap;display:inline;border-style:none;color:var(--dark-text);width:10rem;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.bookTitle[_ngcontent-%COMP%]{overflow:auto;color:var(--dark-text);margin-left:2em;margin-right:2em;display:inline-block;font-size:16pt}.recordingSaveIcon[_ngcontent-%COMP%]{width:10rem;color:var(--dark-text);border-style:none;font-size:11pt;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{white-space:nowrap;color:var(--scealai-light-brown)}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);cursor:pointer;transition:.5s}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:10px;font-weight:700;border-radius:10px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.recordingBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px;float:right}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.recognisedSpeech[_ngcontent-%COMP%]{color:var(--scealai-green);font-style:italic;padding-left:5px}.audioContainer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.audioPlayer[_ngcontent-%COMP%]{width:25%;height:35px}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}.selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}.blink[_ngcontent-%COMP%]{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),u})(),canActivate:[y.P],canDeactivate:[Z]}];let rr=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=n.oAB({type:u}),u.\u0275inj=n.cJS({imports:[c.Bz.forChild(An),c.Bz]}),u})();var ve=E(3869);let bt=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=n.oAB({type:u}),u.\u0275inj=n.cJS({imports:[F.ez,rr,xr.LD,rt.u5,ve.F,Mt.SJ,Cr.ot,Xn.Ps,bn.Tx,yr.Q,wr.fi.forRoot({customOptions:[{import:"formats/font",whitelist:["sans-serif","serif","monospace","arial","times-new-roman"]}]})]}),u})()},7230:function(Ue){Ue.exports=function(Y){var E={};function F(c){if(E[c])return E[c].exports;var y=E[c]={i:c,l:!1,exports:{}};return Y[c].call(y.exports,y,y.exports,F),y.l=!0,y.exports}return F.m=Y,F.c=E,F.d=function(c,y,M){F.o(c,y)||Object.defineProperty(c,y,{enumerable:!0,get:M})},F.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},F.t=function(c,y){if(1&y&&(c=F(c)),8&y||4&y&&"object"==typeof c&&c&&c.__esModule)return c;var M=Object.create(null);if(F.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:c}),2&y&&"string"!=typeof c)for(var L in c)F.d(M,L,function(n){return c[n]}.bind(null,L));return M},F.n=function(c){var y=c&&c.__esModule?function(){return c.default}:function(){return c};return F.d(y,"a",y),y},F.o=function(c,y){return Object.prototype.hasOwnProperty.call(c,y)},F.p="",F(F.s=90)}({17:function(Y,E,F){"use strict";E.__esModule=!0,E.default=void 0;var c=F(18),y=function(){function M(){}return M.getFirstMatch=function(L,n){var h=n.match(L);return h&&h.length>0&&h[1]||""},M.getSecondMatch=function(L,n){var h=n.match(L);return h&&h.length>1&&h[2]||""},M.matchAndReturnConst=function(L,n,h){if(L.test(n))return h},M.getWindowsVersionName=function(L){switch(L){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},M.getMacOSVersionName=function(L){var n=L.split(".").splice(0,2).map(function(h){return parseInt(h,10)||0});if(n.push(0),10===n[0])switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},M.getAndroidVersionName=function(L){var n=L.split(".").splice(0,2).map(function(h){return parseInt(h,10)||0});if(n.push(0),!(1===n[0]&&n[1]<5))return 1===n[0]&&n[1]<6?"Cupcake":1===n[0]&&n[1]>=6?"Donut":2===n[0]&&n[1]<2?"Eclair":2===n[0]&&2===n[1]?"Froyo":2===n[0]&&n[1]>2?"Gingerbread":3===n[0]?"Honeycomb":4===n[0]&&n[1]<1?"Ice Cream Sandwich":4===n[0]&&n[1]<4?"Jelly Bean":4===n[0]&&n[1]>=4?"KitKat":5===n[0]?"Lollipop":6===n[0]?"Marshmallow":7===n[0]?"Nougat":8===n[0]?"Oreo":9===n[0]?"Pie":void 0},M.getVersionPrecision=function(L){return L.split(".").length},M.compareVersions=function(L,n,h){void 0===h&&(h=!1);var g=M.getVersionPrecision(L),Z=M.getVersionPrecision(n),T=Math.max(g,Z),v=0,A=M.map([L,n],function(S){var b=T-M.getVersionPrecision(S),D=S+new Array(b+1).join(".0");return M.map(D.split("."),function(B){return new Array(20-B.length).join("0")+B}).reverse()});for(h&&(v=T-Math.min(g,Z)),T-=1;T>=v;){if(A[0][T]>A[1][T])return 1;if(A[0][T]===A[1][T]){if(T===v)return 0;T-=1}else if(A[0][T]<A[1][T])return-1}},M.map=function(L,n){var h,g=[];if(Array.prototype.map)return Array.prototype.map.call(L,n);for(h=0;h<L.length;h+=1)g.push(n(L[h]));return g},M.find=function(L,n){var h,g;if(Array.prototype.find)return Array.prototype.find.call(L,n);for(h=0,g=L.length;h<g;h+=1){var Z=L[h];if(n(Z,h))return Z}},M.assign=function(L){for(var n,h,g=L,Z=arguments.length,T=new Array(Z>1?Z-1:0),v=1;v<Z;v++)T[v-1]=arguments[v];if(Object.assign)return Object.assign.apply(Object,[L].concat(T));var A=function(){var S=T[n];"object"==typeof S&&null!==S&&Object.keys(S).forEach(function(b){g[b]=S[b]})};for(n=0,h=T.length;n<h;n+=1)A();return L},M.getBrowserAlias=function(L){return c.BROWSER_ALIASES_MAP[L]},M.getBrowserTypeByAlias=function(L){return c.BROWSER_MAP[L]||""},M}();E.default=y,Y.exports=E.default},18:function(Y,E,F){"use strict";E.__esModule=!0,E.ENGINE_MAP=E.OS_MAP=E.PLATFORMS_MAP=E.BROWSER_MAP=E.BROWSER_ALIASES_MAP=void 0,E.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},E.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},E.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},E.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},E.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(Y,E,F){"use strict";E.__esModule=!0,E.default=void 0;var c,y=(c=F(91))&&c.__esModule?c:{default:c},M=F(18);function L(h,g){for(var Z=0;Z<g.length;Z++){var T=g[Z];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(h,T.key,T)}}var n=function(){function h(){}var g,T;return h.getParser=function(v,A){if(void 0===A&&(A=!1),"string"!=typeof v)throw new Error("UserAgent should be a string");return new y.default(v,A)},h.parse=function(v){return new y.default(v).getResult()},g=h,T=[{key:"BROWSER_MAP",get:function(){return M.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return M.ENGINE_MAP}},{key:"OS_MAP",get:function(){return M.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return M.PLATFORMS_MAP}}],null&&L(g.prototype,null),T&&L(g,T),h}();E.default=n,Y.exports=E.default},91:function(Y,E,F){"use strict";E.__esModule=!0,E.default=void 0;var c=h(F(92)),y=h(F(93)),M=h(F(94)),L=h(F(95)),n=h(F(17));function h(Z){return Z&&Z.__esModule?Z:{default:Z}}var g=function(){function Z(v,A){if(void 0===A&&(A=!1),null==v||""===v)throw new Error("UserAgent parameter can't be empty");this._ua=v,this.parsedResult={},!0!==A&&this.parse()}var T=Z.prototype;return T.getUA=function(){return this._ua},T.test=function(v){return v.test(this._ua)},T.parseBrowser=function(){var v=this;this.parsedResult.browser={};var A=n.default.find(c.default,function(S){if("function"==typeof S.test)return S.test(v);if(S.test instanceof Array)return S.test.some(function(b){return v.test(b)});throw new Error("Browser's test function is not valid")});return A&&(this.parsedResult.browser=A.describe(this.getUA())),this.parsedResult.browser},T.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},T.getBrowserName=function(v){return v?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},T.getBrowserVersion=function(){return this.getBrowser().version},T.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},T.parseOS=function(){var v=this;this.parsedResult.os={};var A=n.default.find(y.default,function(S){if("function"==typeof S.test)return S.test(v);if(S.test instanceof Array)return S.test.some(function(b){return v.test(b)});throw new Error("Browser's test function is not valid")});return A&&(this.parsedResult.os=A.describe(this.getUA())),this.parsedResult.os},T.getOSName=function(v){var A=this.getOS().name;return v?String(A).toLowerCase()||"":A||""},T.getOSVersion=function(){return this.getOS().version},T.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},T.getPlatformType=function(v){void 0===v&&(v=!1);var A=this.getPlatform().type;return v?String(A).toLowerCase()||"":A||""},T.parsePlatform=function(){var v=this;this.parsedResult.platform={};var A=n.default.find(M.default,function(S){if("function"==typeof S.test)return S.test(v);if(S.test instanceof Array)return S.test.some(function(b){return v.test(b)});throw new Error("Browser's test function is not valid")});return A&&(this.parsedResult.platform=A.describe(this.getUA())),this.parsedResult.platform},T.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},T.getEngineName=function(v){return v?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},T.parseEngine=function(){var v=this;this.parsedResult.engine={};var A=n.default.find(L.default,function(S){if("function"==typeof S.test)return S.test(v);if(S.test instanceof Array)return S.test.some(function(b){return v.test(b)});throw new Error("Browser's test function is not valid")});return A&&(this.parsedResult.engine=A.describe(this.getUA())),this.parsedResult.engine},T.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},T.getResult=function(){return n.default.assign({},this.parsedResult)},T.satisfies=function(v){var A=this,S={},b=0,D={},B=0;if(Object.keys(v).forEach(function(me){var qe=v[me];"string"==typeof qe?(D[me]=qe,B+=1):"object"==typeof qe&&(S[me]=qe,b+=1)}),b>0){var $=Object.keys(S),ee=n.default.find($,function(me){return A.isOS(me)});if(ee){var q=this.satisfies(S[ee]);if(void 0!==q)return q}var W=n.default.find($,function(me){return A.isPlatform(me)});if(W){var ue=this.satisfies(S[W]);if(void 0!==ue)return ue}}if(B>0){var we=Object.keys(D),xe=n.default.find(we,function(me){return A.isBrowser(me,!0)});if(void 0!==xe)return this.compareVersion(D[xe])}},T.isBrowser=function(v,A){void 0===A&&(A=!1);var S=this.getBrowserName().toLowerCase(),b=v.toLowerCase(),D=n.default.getBrowserTypeByAlias(b);return A&&D&&(b=D.toLowerCase()),b===S},T.compareVersion=function(v){var A=[0],S=v,b=!1,D=this.getBrowserVersion();if("string"==typeof D)return">"===v[0]||"<"===v[0]?(S=v.substr(1),"="===v[1]?(b=!0,S=v.substr(2)):A=[],A.push(">"===v[0]?1:-1)):"="===v[0]?S=v.substr(1):"~"===v[0]&&(b=!0,S=v.substr(1)),A.indexOf(n.default.compareVersions(D,S,b))>-1},T.isOS=function(v){return this.getOSName(!0)===String(v).toLowerCase()},T.isPlatform=function(v){return this.getPlatformType(!0)===String(v).toLowerCase()},T.isEngine=function(v){return this.getEngineName(!0)===String(v).toLowerCase()},T.is=function(v,A){return void 0===A&&(A=!1),this.isBrowser(v,A)||this.isOS(v)||this.isPlatform(v)},T.some=function(v){var A=this;return void 0===v&&(v=[]),v.some(function(S){return A.is(S)})},Z}();E.default=g,Y.exports=E.default},92:function(Y,E,F){"use strict";E.__esModule=!0,E.default=void 0;var c,y=(c=F(17))&&c.__esModule?c:{default:c},M=/version\/(\d+(\.?_?\d+)+)/i;E.default=[{test:[/googlebot/i],describe:function(n){var h={name:"Googlebot"},g=y.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,n)||y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/opera/i],describe:function(n){var h={name:"Opera"},g=y.default.getFirstMatch(M,n)||y.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/opr\/|opios/i],describe:function(n){var h={name:"Opera"},g=y.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,n)||y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/SamsungBrowser/i],describe:function(n){var h={name:"Samsung Internet for Android"},g=y.default.getFirstMatch(M,n)||y.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/Whale/i],describe:function(n){var h={name:"NAVER Whale Browser"},g=y.default.getFirstMatch(M,n)||y.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/MZBrowser/i],describe:function(n){var h={name:"MZ Browser"},g=y.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,n)||y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/focus/i],describe:function(n){var h={name:"Focus"},g=y.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,n)||y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/swing/i],describe:function(n){var h={name:"Swing"},g=y.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,n)||y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/coast/i],describe:function(n){var h={name:"Opera Coast"},g=y.default.getFirstMatch(M,n)||y.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(n){var h={name:"Opera Touch"},g=y.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,n)||y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/yabrowser/i],describe:function(n){var h={name:"Yandex Browser"},g=y.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,n)||y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/ucbrowser/i],describe:function(n){var h={name:"UC Browser"},g=y.default.getFirstMatch(M,n)||y.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/Maxthon|mxios/i],describe:function(n){var h={name:"Maxthon"},g=y.default.getFirstMatch(M,n)||y.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/epiphany/i],describe:function(n){var h={name:"Epiphany"},g=y.default.getFirstMatch(M,n)||y.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/puffin/i],describe:function(n){var h={name:"Puffin"},g=y.default.getFirstMatch(M,n)||y.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/sleipnir/i],describe:function(n){var h={name:"Sleipnir"},g=y.default.getFirstMatch(M,n)||y.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/k-meleon/i],describe:function(n){var h={name:"K-Meleon"},g=y.default.getFirstMatch(M,n)||y.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/micromessenger/i],describe:function(n){var h={name:"WeChat"},g=y.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,n)||y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/qqbrowser/i],describe:function(n){var h={name:/qqbrowserlite/i.test(n)?"QQ Browser Lite":"QQ Browser"},g=y.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,n)||y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/msie|trident/i],describe:function(n){var h={name:"Internet Explorer"},g=y.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/\sedg\//i],describe:function(n){var h={name:"Microsoft Edge"},g=y.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/edg([ea]|ios)/i],describe:function(n){var h={name:"Microsoft Edge"},g=y.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/vivaldi/i],describe:function(n){var h={name:"Vivaldi"},g=y.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/seamonkey/i],describe:function(n){var h={name:"SeaMonkey"},g=y.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/sailfish/i],describe:function(n){var h={name:"Sailfish"},g=y.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,n);return g&&(h.version=g),h}},{test:[/silk/i],describe:function(n){var h={name:"Amazon Silk"},g=y.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/phantom/i],describe:function(n){var h={name:"PhantomJS"},g=y.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/slimerjs/i],describe:function(n){var h={name:"SlimerJS"},g=y.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(n){var h={name:"BlackBerry"},g=y.default.getFirstMatch(M,n)||y.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/(web|hpw)[o0]s/i],describe:function(n){var h={name:"WebOS Browser"},g=y.default.getFirstMatch(M,n)||y.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/bada/i],describe:function(n){var h={name:"Bada"},g=y.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/tizen/i],describe:function(n){var h={name:"Tizen"},g=y.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,n)||y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/qupzilla/i],describe:function(n){var h={name:"QupZilla"},g=y.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,n)||y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/firefox|iceweasel|fxios/i],describe:function(n){var h={name:"Firefox"},g=y.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/electron/i],describe:function(n){var h={name:"Electron"},g=y.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/MiuiBrowser/i],describe:function(n){var h={name:"Miui"},g=y.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/chromium/i],describe:function(n){var h={name:"Chromium"},g=y.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,n)||y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/chrome|crios|crmo/i],describe:function(n){var h={name:"Chrome"},g=y.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/GSA/i],describe:function(n){var h={name:"Google Search"},g=y.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:function(n){var h=!n.test(/like android/i),g=n.test(/android/i);return h&&g},describe:function(n){var h={name:"Android Browser"},g=y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/playstation 4/i],describe:function(n){var h={name:"PlayStation 4"},g=y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/safari|applewebkit/i],describe:function(n){var h={name:"Safari"},g=y.default.getFirstMatch(M,n);return g&&(h.version=g),h}},{test:[/.*/i],describe:function(n){var h=-1!==n.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:y.default.getFirstMatch(h,n),version:y.default.getSecondMatch(h,n)}}}],Y.exports=E.default},93:function(Y,E,F){"use strict";E.__esModule=!0,E.default=void 0;var c,y=(c=F(17))&&c.__esModule?c:{default:c},M=F(18);E.default=[{test:[/Roku\/DVP/],describe:function(n){var h=y.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,n);return{name:M.OS_MAP.Roku,version:h}}},{test:[/windows phone/i],describe:function(n){var h=y.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,n);return{name:M.OS_MAP.WindowsPhone,version:h}}},{test:[/windows /i],describe:function(n){var h=y.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,n),g=y.default.getWindowsVersionName(h);return{name:M.OS_MAP.Windows,version:h,versionName:g}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(n){var h={name:M.OS_MAP.iOS},g=y.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,n);return g&&(h.version=g),h}},{test:[/macintosh/i],describe:function(n){var h=y.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,n).replace(/[_\s]/g,"."),g=y.default.getMacOSVersionName(h),Z={name:M.OS_MAP.MacOS,version:h};return g&&(Z.versionName=g),Z}},{test:[/(ipod|iphone|ipad)/i],describe:function(n){var h=y.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,n).replace(/[_\s]/g,".");return{name:M.OS_MAP.iOS,version:h}}},{test:function(n){var h=!n.test(/like android/i),g=n.test(/android/i);return h&&g},describe:function(n){var h=y.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,n),g=y.default.getAndroidVersionName(h),Z={name:M.OS_MAP.Android,version:h};return g&&(Z.versionName=g),Z}},{test:[/(web|hpw)[o0]s/i],describe:function(n){var h=y.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,n),g={name:M.OS_MAP.WebOS};return h&&h.length&&(g.version=h),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(n){var h=y.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,n)||y.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,n)||y.default.getFirstMatch(/\bbb(\d+)/i,n);return{name:M.OS_MAP.BlackBerry,version:h}}},{test:[/bada/i],describe:function(n){var h=y.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,n);return{name:M.OS_MAP.Bada,version:h}}},{test:[/tizen/i],describe:function(n){var h=y.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,n);return{name:M.OS_MAP.Tizen,version:h}}},{test:[/linux/i],describe:function(){return{name:M.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:M.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(n){var h=y.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,n);return{name:M.OS_MAP.PlayStation4,version:h}}}],Y.exports=E.default},94:function(Y,E,F){"use strict";E.__esModule=!0,E.default=void 0;var c,y=(c=F(17))&&c.__esModule?c:{default:c},M=F(18);E.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(n){var h=y.default.getFirstMatch(/(can-l01)/i,n)&&"Nova",g={type:M.PLATFORMS_MAP.mobile,vendor:"Huawei"};return h&&(g.model=h),g}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:M.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:M.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:M.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:M.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:M.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:M.PLATFORMS_MAP.tablet}}},{test:function(n){var h=n.test(/ipod|iphone/i),g=n.test(/like (ipod|iphone)/i);return h&&!g},describe:function(n){var h=y.default.getFirstMatch(/(ipod|iphone)/i,n);return{type:M.PLATFORMS_MAP.mobile,vendor:"Apple",model:h}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:M.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:M.PLATFORMS_MAP.mobile}}},{test:function(n){return"blackberry"===n.getBrowserName(!0)},describe:function(){return{type:M.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(n){return"bada"===n.getBrowserName(!0)},describe:function(){return{type:M.PLATFORMS_MAP.mobile}}},{test:function(n){return"windows phone"===n.getBrowserName()},describe:function(){return{type:M.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(n){var h=Number(String(n.getOSVersion()).split(".")[0]);return"android"===n.getOSName(!0)&&h>=3},describe:function(){return{type:M.PLATFORMS_MAP.tablet}}},{test:function(n){return"android"===n.getOSName(!0)},describe:function(){return{type:M.PLATFORMS_MAP.mobile}}},{test:function(n){return"macos"===n.getOSName(!0)},describe:function(){return{type:M.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(n){return"windows"===n.getOSName(!0)},describe:function(){return{type:M.PLATFORMS_MAP.desktop}}},{test:function(n){return"linux"===n.getOSName(!0)},describe:function(){return{type:M.PLATFORMS_MAP.desktop}}},{test:function(n){return"playstation 4"===n.getOSName(!0)},describe:function(){return{type:M.PLATFORMS_MAP.tv}}},{test:function(n){return"roku"===n.getOSName(!0)},describe:function(){return{type:M.PLATFORMS_MAP.tv}}}],Y.exports=E.default},95:function(Y,E,F){"use strict";E.__esModule=!0,E.default=void 0;var c,y=(c=F(17))&&c.__esModule?c:{default:c},M=F(18);E.default=[{test:function(n){return"microsoft edge"===n.getBrowserName(!0)},describe:function(n){if(/\sedg\//i.test(n))return{name:M.ENGINE_MAP.Blink};var h=y.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,n);return{name:M.ENGINE_MAP.EdgeHTML,version:h}}},{test:[/trident/i],describe:function(n){var h={name:M.ENGINE_MAP.Trident},g=y.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:function(n){return n.test(/presto/i)},describe:function(n){var h={name:M.ENGINE_MAP.Presto},g=y.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:function(n){var h=n.test(/gecko/i),g=n.test(/like gecko/i);return h&&!g},describe:function(n){var h={name:M.ENGINE_MAP.Gecko},g=y.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:M.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(n){var h={name:M.ENGINE_MAP.WebKit},g=y.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,n);return g&&(h.version=g),h}}],Y.exports=E.default}})},7489:function(Ue,Y,E){var F;Ue=E.nmd(Ue),function(){var c,n="Expected a function",g="__lodash_hash_undefined__",T="__lodash_placeholder__",Tt=1/0,vt=9007199254740991,nt=4294967295,Yt=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],fe="[object Arguments]",fn="[object Array]",zt="[object Boolean]",Qt="[object Date]",hn="[object Error]",gn="[object Function]",Nn="[object GeneratorFunction]",Qe="[object Map]",Kt="[object Number]",ft="[object Object]",ht="[object Promise]",Xt="[object RegExp]",Ke="[object Set]",$t="[object String]",At="[object Symbol]",Vt="[object WeakMap]",jt="[object ArrayBuffer]",yt="[object DataView]",Un="[object Float32Array]",qn="[object Float64Array]",Gn="[object Int8Array]",Hn="[object Int16Array]",_n="[object Int32Array]",Wn="[object Uint8Array]",br="[object Uint8ClampedArray]",mn="[object Uint16Array]",Jn="[object Uint32Array]",Xi=/\b__p \+= '';/g,$i=/\b(__p \+=) '' \+/g,Yn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zn=/&(?:amp|lt|gt|quot|#39);/g,vn=/[&<>"']/g,Vi=RegExp(zn.source),ji=RegExp(vn.source),eo=/<%-([\s\S]+?)%>/g,to=/<%([\s\S]+?)%>/g,yn=/<%=([\s\S]+?)%>/g,no=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qn=/^\w*$/,ro=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xn=/[\\^$.*+?()[\]{}|]/g,rt=RegExp(xn.source),Mt=/^\s+/,wr=/\s/,Sr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,io=/\{\n\/\* \[wrapped with (.+)\] \*/,Kn=/,? & /,Cr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xn=/[()=,{}\[\]\/\s]/,bn=/\\(\\)?/g,oo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Tr=/\w*$/,so=/^[-+]0x[0-9a-f]+$/i,ao=/^0b[01]+$/i,co=/^\[object .+?Constructor\]$/,uo=/^0o[0-7]+$/i,wn=/^(?:0|[1-9]\d*)$/,lo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Sn=/($^)/,fo=/['\n\r\u2028\u2029\\]/g,Cn="\\ud800-\\udfff",Ar="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Mr="\\u2700-\\u27bf",Er="a-z\\xdf-\\xf6\\xf8-\\xff",Or="A-Z\\xc0-\\xd6\\xd8-\\xde",kr="\\ufe0e\\ufe0f",Ir="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xo="["+Cn+"]",Pr="["+Ir+"]",Tn="["+Ar+"]",Rr="\\d+",bo="["+Mr+"]",Fr="["+Er+"]",Lr="[^"+Cn+Ir+Rr+Mr+Er+Or+"]",Vn="\\ud83c[\\udffb-\\udfff]",Dr="[^"+Cn+"]",jn="(?:\\ud83c[\\udde6-\\uddff]){2}",er="[\\ud800-\\udbff][\\udc00-\\udfff]",Bt="["+Or+"]",Br="(?:"+Fr+"|"+Lr+")",So="(?:"+Bt+"|"+Lr+")",Nr="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ur="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",qr="(?:"+Tn+"|"+Vn+")?",Gr="["+kr+"]?",Jr=Gr+qr+"(?:\\u200d(?:"+[Dr,jn,er].join("|")+")"+Gr+qr+")*",To="(?:"+[bo,jn,er].join("|")+")"+Jr,Ao="(?:"+[Dr+Tn+"?",Tn,jn,er,xo].join("|")+")",Mo=RegExp("['\u2019]","g"),Eo=RegExp(Tn,"g"),tr=RegExp(Vn+"(?="+Vn+")|"+Ao+Jr,"g"),Oo=RegExp([Bt+"?"+Fr+"+"+Nr+"(?="+[Pr,Bt,"$"].join("|")+")",So+"+"+Ur+"(?="+[Pr,Bt+Br,"$"].join("|")+")",Bt+"?"+Br+"+"+Nr,Bt+"+"+Ur,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Rr,To].join("|"),"g"),ko=RegExp("[\\u200d"+Cn+Ar+kr+"]"),Io=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Po=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ro=-1,ge={};ge[Un]=ge[qn]=ge[Gn]=ge[Hn]=ge[_n]=ge[Wn]=ge[br]=ge[mn]=ge[Jn]=!0,ge[fe]=ge[fn]=ge[jt]=ge[zt]=ge[yt]=ge[Qt]=ge[hn]=ge[gn]=ge[Qe]=ge[Kt]=ge[ft]=ge[Xt]=ge[Ke]=ge[$t]=ge[Vt]=!1;var he={};he[fe]=he[fn]=he[jt]=he[yt]=he[zt]=he[Qt]=he[Un]=he[qn]=he[Gn]=he[Hn]=he[_n]=he[Qe]=he[Kt]=he[ft]=he[Xt]=he[Ke]=he[$t]=he[At]=he[Wn]=he[br]=he[mn]=he[Jn]=!0,he[hn]=he[gn]=he[Vt]=!1;var Zo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bo=parseFloat,No=parseInt,Yr="object"==typeof global&&global&&global.Object===Object&&global,Uo="object"==typeof self&&self&&self.Object===Object&&self,Ae=Yr||Uo||Function("return this")(),zr=Y&&!Y.nodeType&&Y,en=zr&&Ue&&!Ue.nodeType&&Ue,Qr=en&&en.exports===zr,nr=Qr&&Yr.process,Ge=function(){try{return en&&en.require&&en.require("util").types||nr&&nr.binding&&nr.binding("util")}catch{}}(),Kr=Ge&&Ge.isArrayBuffer,Xr=Ge&&Ge.isDate,$r=Ge&&Ge.isMap,Vr=Ge&&Ge.isRegExp,jr=Ge&&Ge.isSet,ei=Ge&&Ge.isTypedArray;function De(x,k,O){switch(O.length){case 0:return x.call(k);case 1:return x.call(k,O[0]);case 2:return x.call(k,O[0],O[1]);case 3:return x.call(k,O[0],O[1],O[2])}return x.apply(k,O)}function qo(x,k,O,G){for(var V=-1,ce=null==x?0:x.length;++V<ce;){var Ee=x[V];k(G,Ee,O(Ee),x)}return G}function He(x,k){for(var O=-1,G=null==x?0:x.length;++O<G&&!1!==k(x[O],O,x););return x}function Go(x,k){for(var O=null==x?0:x.length;O--&&!1!==k(x[O],O,x););return x}function ti(x,k){for(var O=-1,G=null==x?0:x.length;++O<G;)if(!k(x[O],O,x))return!1;return!0}function xt(x,k){for(var O=-1,G=null==x?0:x.length,V=0,ce=[];++O<G;){var Ee=x[O];k(Ee,O,x)&&(ce[V++]=Ee)}return ce}function An(x,k){return!(null==x||!x.length)&&Q(x,k,0)>-1}function rr(x,k,O){for(var G=-1,V=null==x?0:x.length;++G<V;)if(O(k,x[G]))return!0;return!1}function ve(x,k){for(var O=-1,G=null==x?0:x.length,V=Array(G);++O<G;)V[O]=k(x[O],O,x);return V}function bt(x,k){for(var O=-1,G=k.length,V=x.length;++O<G;)x[V+O]=k[O];return x}function u(x,k,O,G){var V=-1,ce=null==x?0:x.length;for(G&&ce&&(O=x[++V]);++V<ce;)O=k(O,x[V],V,x);return O}function _(x,k,O,G){var V=null==x?0:x.length;for(G&&V&&(O=x[--V]);V--;)O=k(O,x[V],V,x);return O}function i(x,k){for(var O=-1,G=null==x?0:x.length;++O<G;)if(k(x[O],O,x))return!0;return!1}var s=Ie("length");function N(x,k,O){var G;return O(x,function(V,ce,Ee){if(k(V,ce,Ee))return G=ce,!1}),G}function H(x,k,O,G){for(var V=x.length,ce=O+(G?1:-1);G?ce--:++ce<V;)if(k(x[ce],ce,x))return ce;return-1}function Q(x,k,O){return k==k?function Gc(x,k,O){for(var G=O-1,V=x.length;++G<V;)if(x[G]===k)return G;return-1}(x,k,O):H(x,ye,O)}function ie(x,k,O,G){for(var V=O-1,ce=x.length;++V<ce;)if(G(x[V],k))return V;return-1}function ye(x){return x!=x}function pe(x,k){var O=null==x?0:x.length;return O?Et(x,k)/O:NaN}function Ie(x){return function(k){return null==k?c:k[x]}}function Me(x){return function(k){return null==x?c:x[k]}}function Xe(x,k,O,G,V){return V(x,function(ce,Ee,_e){O=G?(G=!1,ce):k(O,ce,Ee,_e)}),O}function Et(x,k){for(var O,G=-1,V=x.length;++G<V;){var ce=k(x[G]);ce!==c&&(O=O===c?ce:O+ce)}return O}function ot(x,k){for(var O=-1,G=Array(x);++O<x;)G[O]=k(O);return G}function Ns(x){return x&&x.slice(0,Hs(x)+1).replace(Mt,"")}function $e(x){return function(k){return x(k)}}function Ho(x,k){return ve(k,function(O){return x[O]})}function ir(x,k){return x.has(k)}function Us(x,k){for(var O=-1,G=x.length;++O<G&&Q(k,x[O],0)>-1;);return O}function qs(x,k){for(var O=x.length;O--&&Q(k,x[O],0)>-1;);return O}function Fc(x,k){for(var O=x.length,G=0;O--;)x[O]===k&&++G;return G}var Lc=Me({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Dc=Me({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Zc(x){return"\\"+Zo[x]}function Mn(x){return ko.test(x)}function Wo(x){var k=-1,O=Array(x.size);return x.forEach(function(G,V){O[++k]=[V,G]}),O}function Gs(x,k){return function(O){return x(k(O))}}function Nt(x,k){for(var O=-1,G=x.length,V=0,ce=[];++O<G;){var Ee=x[O];(Ee===k||Ee===T)&&(x[O]=T,ce[V++]=O)}return ce}function ni(x){var k=-1,O=Array(x.size);return x.forEach(function(G){O[++k]=G}),O}function En(x){return Mn(x)?function Jc(x){for(var k=tr.lastIndex=0;tr.test(x);)++k;return k}(x):s(x)}function gt(x){return Mn(x)?function Yc(x){return x.match(tr)||[]}(x):function l(x){return x.split("")}(x)}function Hs(x){for(var k=x.length;k--&&wr.test(x.charAt(k)););return k}var Wc=Me({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ri=function x(k){var e,O=(k=null==k?Ae:ri.defaults(Ae.Object(),k,ri.pick(Ae,Po))).Array,G=k.Date,V=k.Error,ce=k.Function,Ee=k.Math,_e=k.Object,Jo=k.RegExp,Kc=k.String,st=k.TypeError,ii=O.prototype,On=_e.prototype,oi=k["__core-js_shared__"],si=ce.prototype.toString,de=On.hasOwnProperty,$c=0,Ws=(e=/[^.]+$/.exec(oi&&oi.keys&&oi.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",ai=On.toString,Vc=si.call(_e),jc=Ae._,eu=Jo("^"+si.call(de).replace(xn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ci=Qr?k.Buffer:c,Ut=k.Symbol,ui=k.Uint8Array,Js=ci?ci.allocUnsafe:c,li=Gs(_e.getPrototypeOf,_e),Ys=_e.create,zs=On.propertyIsEnumerable,di=ii.splice,Qs=Ut?Ut.isConcatSpreadable:c,or=Ut?Ut.iterator:c,tn=Ut?Ut.toStringTag:c,fi=function(){try{var e=an(_e,"defineProperty");return e({},"",{}),e}catch{}}(),tu=k.clearTimeout!==Ae.clearTimeout&&k.clearTimeout,nu=G&&G.now!==Ae.Date.now&&G.now,ru=k.setTimeout!==Ae.setTimeout&&k.setTimeout,hi=Ee.ceil,gi=Ee.floor,Yo=_e.getOwnPropertySymbols,iu=ci?ci.isBuffer:c,Ks=k.isFinite,ou=ii.join,su=Gs(_e.keys,_e),Oe=Ee.max,Fe=Ee.min,au=G.now,cu=k.parseInt,Xs=Ee.random,uu=ii.reverse,zo=an(k,"DataView"),sr=an(k,"Map"),Qo=an(k,"Promise"),kn=an(k,"Set"),ar=an(k,"WeakMap"),cr=an(_e,"create"),pi=ar&&new ar,In={},lu=cn(zo),du=cn(sr),fu=cn(Qo),hu=cn(kn),gu=cn(ar),_i=Ut?Ut.prototype:c,ur=_i?_i.valueOf:c,$s=_i?_i.toString:c;function d(e){if(Se(e)&&!j(e)&&!(e instanceof se)){if(e instanceof at)return e;if(de.call(e,"__wrapped__"))return Va(e)}return new at(e)}var Pn=function(){function e(){}return function(t){if(!be(t))return{};if(Ys)return Ys(t);e.prototype=t;var r=new e;return e.prototype=c,r}}();function mi(){}function at(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=c}function se(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=nt,this.__views__=[]}function nn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function Ot(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function kt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}function rn(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new kt;++t<r;)this.add(e[t])}function pt(e){var t=this.__data__=new Ot(e);this.size=t.size}function Vs(e,t){var r=j(e),o=!r&&un(e),a=!r&&!o&&Jt(e),f=!r&&!o&&!a&&Dn(e),p=r||o||a||f,m=p?ot(e.length,Kc):[],C=m.length;for(var I in e)(t||de.call(e,I))&&(!p||!("length"==I||a&&("offset"==I||"parent"==I)||f&&("buffer"==I||"byteLength"==I||"byteOffset"==I)||Ft(I,C)))&&m.push(I);return m}function js(e){var t=e.length;return t?e[os(0,t-1)]:c}function Uu(e,t){return Ii(We(e),on(t,0,e.length))}function qu(e){return Ii(We(e))}function Ko(e,t,r){(r!==c&&!_t(e[t],r)||r===c&&!(t in e))&&It(e,t,r)}function lr(e,t,r){var o=e[t];(!de.call(e,t)||!_t(o,r)||r===c&&!(t in e))&&It(e,t,r)}function vi(e,t){for(var r=e.length;r--;)if(_t(e[r][0],t))return r;return-1}function Gu(e,t,r,o){return qt(e,function(a,f,p){t(o,a,r(a),p)}),o}function ea(e,t){return e&&St(t,Pe(t),e)}function It(e,t,r){"__proto__"==t&&fi?fi(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Xo(e,t){for(var r=-1,o=t.length,a=O(o),f=null==e;++r<o;)a[r]=f?c:ks(e,t[r]);return a}function on(e,t,r){return e==e&&(r!==c&&(e=e<=r?e:r),t!==c&&(e=e>=t?e:t)),e}function ct(e,t,r,o,a,f){var p,m=1&t,C=2&t,I=4&t;if(r&&(p=a?r(e,o,a,f):r(e)),p!==c)return p;if(!be(e))return e;var P=j(e);if(P){if(p=function Il(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&de.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!m)return We(e,p)}else{var R=Le(e),U=R==gn||R==Nn;if(Jt(e))return Ca(e,m);if(R==ft||R==fe||U&&!a){if(p=C||U?{}:Ha(e),!m)return C?function xl(e,t){return St(e,qa(e),t)}(e,function Hu(e,t){return e&&St(t,Ye(t),e)}(p,e)):function yl(e,t){return St(e,ys(e),t)}(e,ea(p,e))}else{if(!he[R])return a?e:{};p=function Pl(e,t,r){var o=e.constructor;switch(t){case jt:return fs(e);case zt:case Qt:return new o(+e);case yt:return function pl(e,t){var r=t?fs(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case Un:case qn:case Gn:case Hn:case _n:case Wn:case br:case mn:case Jn:return Ta(e,r);case Qe:return new o;case Kt:case $t:return new o(e);case Xt:return function _l(e){var t=new e.constructor(e.source,Tr.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Ke:return new o;case At:return function ml(e){return ur?_e(ur.call(e)):{}}(e)}}(e,R,m)}}f||(f=new pt);var J=f.get(e);if(J)return J;f.set(e,p),vc(e)?e.forEach(function(X){p.add(ct(X,t,r,X,e,f))}):_c(e)&&e.forEach(function(X,oe){p.set(oe,ct(X,t,r,oe,e,f))});var ne=P?c:(I?C?_s:ps:C?Ye:Pe)(e);return He(ne||e,function(X,oe){ne&&(X=e[oe=X]),lr(p,oe,ct(X,t,r,oe,e,f))}),p}function ta(e,t,r){var o=r.length;if(null==e)return!o;for(e=_e(e);o--;){var a=r[o],p=e[a];if(p===c&&!(a in e)||!(0,t[a])(p))return!1}return!0}function na(e,t,r){if("function"!=typeof e)throw new st(n);return mr(function(){e.apply(c,r)},t)}function dr(e,t,r,o){var a=-1,f=An,p=!0,m=e.length,C=[],I=t.length;if(!m)return C;r&&(t=ve(t,$e(r))),o?(f=rr,p=!1):t.length>=200&&(f=ir,p=!1,t=new rn(t));e:for(;++a<m;){var P=e[a],R=null==r?P:r(P);if(P=o||0!==P?P:0,p&&R==R){for(var U=I;U--;)if(t[U]===R)continue e;C.push(P)}else f(t,R,o)||C.push(P)}return C}d.templateSettings={escape:eo,evaluate:to,interpolate:yn,variable:"",imports:{_:d}},(d.prototype=mi.prototype).constructor=d,(at.prototype=Pn(mi.prototype)).constructor=at,(se.prototype=Pn(mi.prototype)).constructor=se,nn.prototype.clear=function vu(){this.__data__=cr?cr(null):{},this.size=0},nn.prototype.delete=function yu(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},nn.prototype.get=function xu(e){var t=this.__data__;if(cr){var r=t[e];return r===g?c:r}return de.call(t,e)?t[e]:c},nn.prototype.has=function bu(e){var t=this.__data__;return cr?t[e]!==c:de.call(t,e)},nn.prototype.set=function wu(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=cr&&t===c?g:t,this},Ot.prototype.clear=function Su(){this.__data__=[],this.size=0},Ot.prototype.delete=function Cu(e){var t=this.__data__,r=vi(t,e);return!(r<0||(r==t.length-1?t.pop():di.call(t,r,1),--this.size,0))},Ot.prototype.get=function Tu(e){var t=this.__data__,r=vi(t,e);return r<0?c:t[r][1]},Ot.prototype.has=function Au(e){return vi(this.__data__,e)>-1},Ot.prototype.set=function Mu(e,t){var r=this.__data__,o=vi(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this},kt.prototype.clear=function Eu(){this.size=0,this.__data__={hash:new nn,map:new(sr||Ot),string:new nn}},kt.prototype.delete=function Ou(e){var t=ki(this,e).delete(e);return this.size-=t?1:0,t},kt.prototype.get=function ku(e){return ki(this,e).get(e)},kt.prototype.has=function Iu(e){return ki(this,e).has(e)},kt.prototype.set=function Pu(e,t){var r=ki(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this},rn.prototype.add=rn.prototype.push=function Ru(e){return this.__data__.set(e,g),this},rn.prototype.has=function Fu(e){return this.__data__.has(e)},pt.prototype.clear=function Lu(){this.__data__=new Ot,this.size=0},pt.prototype.delete=function Du(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},pt.prototype.get=function Zu(e){return this.__data__.get(e)},pt.prototype.has=function Bu(e){return this.__data__.has(e)},pt.prototype.set=function Nu(e,t){var r=this.__data__;if(r instanceof Ot){var o=r.__data__;if(!sr||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new kt(o)}return r.set(e,t),this.size=r.size,this};var qt=Oa(wt),ra=Oa(Vo,!0);function Ju(e,t){var r=!0;return qt(e,function(o,a,f){return r=!!t(o,a,f)}),r}function yi(e,t,r){for(var o=-1,a=e.length;++o<a;){var f=e[o],p=t(f);if(null!=p&&(m===c?p==p&&!je(p):r(p,m)))var m=p,C=f}return C}function ia(e,t){var r=[];return qt(e,function(o,a,f){t(o,a,f)&&r.push(o)}),r}function Re(e,t,r,o,a){var f=-1,p=e.length;for(r||(r=Fl),a||(a=[]);++f<p;){var m=e[f];t>0&&r(m)?t>1?Re(m,t-1,r,o,a):bt(a,m):o||(a[a.length]=m)}return a}var $o=ka(),oa=ka(!0);function wt(e,t){return e&&$o(e,t,Pe)}function Vo(e,t){return e&&oa(e,t,Pe)}function xi(e,t){return xt(t,function(r){return Lt(e[r])})}function sn(e,t){for(var r=0,o=(t=Ht(t,e)).length;null!=e&&r<o;)e=e[Ct(t[r++])];return r&&r==o?e:c}function sa(e,t,r){var o=t(e);return j(e)?o:bt(o,r(e))}function Ze(e){return null==e?e===c?"[object Undefined]":"[object Null]":tn&&tn in _e(e)?function El(e){var t=de.call(e,tn),r=e[tn];try{e[tn]=c;var o=!0}catch{}var a=ai.call(e);return o&&(t?e[tn]=r:delete e[tn]),a}(e):function ql(e){return ai.call(e)}(e)}function jo(e,t){return e>t}function zu(e,t){return null!=e&&de.call(e,t)}function Qu(e,t){return null!=e&&t in _e(e)}function es(e,t,r){for(var o=r?rr:An,a=e[0].length,f=e.length,p=f,m=O(f),C=1/0,I=[];p--;){var P=e[p];p&&t&&(P=ve(P,$e(t))),C=Fe(P.length,C),m[p]=!r&&(t||a>=120&&P.length>=120)?new rn(p&&P):c}P=e[0];var R=-1,U=m[0];e:for(;++R<a&&I.length<C;){var J=P[R],K=t?t(J):J;if(J=r||0!==J?J:0,!(U?ir(U,K):o(I,K,r))){for(p=f;--p;){var ne=m[p];if(!(ne?ir(ne,K):o(e[p],K,r)))continue e}U&&U.push(K),I.push(J)}}return I}function fr(e,t,r){var o=null==(e=za(e,t=Ht(t,e)))?e:e[Ct(lt(t))];return null==o?c:De(o,e,r)}function aa(e){return Se(e)&&Ze(e)==fe}function hr(e,t,r,o,a){return e===t||(null==e||null==t||!Se(e)&&!Se(t)?e!=e&&t!=t:function ju(e,t,r,o,a,f){var p=j(e),m=j(t),C=p?fn:Le(e),I=m?fn:Le(t),P=(C=C==fe?ft:C)==ft,R=(I=I==fe?ft:I)==ft,U=C==I;if(U&&Jt(e)){if(!Jt(t))return!1;p=!0,P=!1}if(U&&!P)return f||(f=new pt),p||Dn(e)?Ua(e,t,r,o,a,f):function Al(e,t,r,o,a,f,p){switch(r){case yt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case jt:return!(e.byteLength!=t.byteLength||!f(new ui(e),new ui(t)));case zt:case Qt:case Kt:return _t(+e,+t);case hn:return e.name==t.name&&e.message==t.message;case Xt:case $t:return e==t+"";case Qe:var m=Wo;case Ke:if(m||(m=ni),e.size!=t.size&&!(1&o))return!1;var I=p.get(e);if(I)return I==t;o|=2,p.set(e,t);var P=Ua(m(e),m(t),o,a,f,p);return p.delete(e),P;case At:if(ur)return ur.call(e)==ur.call(t)}return!1}(e,t,C,r,o,a,f);if(!(1&r)){var J=P&&de.call(e,"__wrapped__"),K=R&&de.call(t,"__wrapped__");if(J||K){var ne=J?e.value():e,X=K?t.value():t;return f||(f=new pt),a(ne,X,r,o,f)}}return!!U&&(f||(f=new pt),function Ml(e,t,r,o,a,f){var p=1&r,m=ps(e),C=m.length;if(C!=ps(t).length&&!p)return!1;for(var R=C;R--;){var U=m[R];if(!(p?U in t:de.call(t,U)))return!1}var J=f.get(e),K=f.get(t);if(J&&K)return J==t&&K==e;var ne=!0;f.set(e,t),f.set(t,e);for(var X=p;++R<C;){var oe=e[U=m[R]],ae=t[U];if(o)var et=p?o(ae,oe,U,t,e,f):o(oe,ae,U,e,t,f);if(!(et===c?oe===ae||a(oe,ae,r,o,f):et)){ne=!1;break}X||(X="constructor"==U)}if(ne&&!X){var Ne=e.constructor,tt=t.constructor;Ne!=tt&&"constructor"in e&&"constructor"in t&&!("function"==typeof Ne&&Ne instanceof Ne&&"function"==typeof tt&&tt instanceof tt)&&(ne=!1)}return f.delete(e),f.delete(t),ne}(e,t,r,o,a,f))}(e,t,r,o,hr,a))}function ts(e,t,r,o){var a=r.length,f=a,p=!o;if(null==e)return!f;for(e=_e(e);a--;){var m=r[a];if(p&&m[2]?m[1]!==e[m[0]]:!(m[0]in e))return!1}for(;++a<f;){var C=(m=r[a])[0],I=e[C],P=m[1];if(p&&m[2]){if(I===c&&!(C in e))return!1}else{var R=new pt;if(o)var U=o(I,P,C,e,t,R);if(!(U===c?hr(P,I,3,o,R):U))return!1}}return!0}function ca(e){return!(!be(e)||function Dl(e){return!!Ws&&Ws in e}(e))&&(Lt(e)?eu:co).test(cn(e))}function ua(e){return"function"==typeof e?e:null==e?ze:"object"==typeof e?j(e)?fa(e[0],e[1]):da(e):Ic(e)}function ns(e){if(!_r(e))return su(e);var t=[];for(var r in _e(e))de.call(e,r)&&"constructor"!=r&&t.push(r);return t}function rs(e,t){return e<t}function la(e,t){var r=-1,o=Je(e)?O(e.length):[];return qt(e,function(a,f,p){o[++r]=t(a,f,p)}),o}function da(e){var t=vs(e);return 1==t.length&&t[0][2]?Ja(t[0][0],t[0][1]):function(r){return r===e||ts(r,e,t)}}function fa(e,t){return xs(e)&&Wa(t)?Ja(Ct(e),t):function(r){var o=ks(r,e);return o===c&&o===t?Is(r,e):hr(t,o,3)}}function bi(e,t,r,o,a){e!==t&&$o(t,function(f,p){if(a||(a=new pt),be(f))!function ol(e,t,r,o,a,f,p){var m=ws(e,r),C=ws(t,r),I=p.get(C);if(I)Ko(e,r,I);else{var P=f?f(m,C,r+"",e,t,p):c,R=P===c;if(R){var U=j(C),J=!U&&Jt(C),K=!U&&!J&&Dn(C);P=C,U||J||K?j(m)?P=m:Ce(m)?P=We(m):J?(R=!1,P=Ca(C,!0)):K?(R=!1,P=Ta(C,!0)):P=[]:vr(C)||un(C)?(P=m,un(m)?P=bc(m):(!be(m)||Lt(m))&&(P=Ha(C))):R=!1}R&&(p.set(C,P),a(P,C,o,f,p),p.delete(C)),Ko(e,r,P)}}(e,t,p,r,bi,o,a);else{var m=o?o(ws(e,p),f,p+"",e,t,a):c;m===c&&(m=f),Ko(e,p,m)}},Ye)}function ha(e,t){var r=e.length;if(r)return Ft(t+=t<0?r:0,r)?e[t]:c}function ga(e,t,r){t=t.length?ve(t,function(f){return j(f)?function(p){return sn(p,1===f.length?f[0]:f)}:f}):[ze];var o=-1;return t=ve(t,$e(z())),function it(x,k){var O=x.length;for(x.sort(k);O--;)x[O]=x[O].value;return x}(la(e,function(f,p,m){return{criteria:ve(t,function(I){return I(f)}),index:++o,value:f}}),function(f,p){return function vl(e,t,r){for(var o=-1,a=e.criteria,f=t.criteria,p=a.length,m=r.length;++o<p;){var C=Aa(a[o],f[o]);if(C)return o>=m?C:C*("desc"==r[o]?-1:1)}return e.index-t.index}(f,p,r)})}function pa(e,t,r){for(var o=-1,a=t.length,f={};++o<a;){var p=t[o],m=sn(e,p);r(m,p)&&gr(f,Ht(p,e),m)}return f}function is(e,t,r,o){var a=o?ie:Q,f=-1,p=t.length,m=e;for(e===t&&(t=We(t)),r&&(m=ve(e,$e(r)));++f<p;)for(var C=0,I=t[f],P=r?r(I):I;(C=a(m,P,C,o))>-1;)m!==e&&di.call(m,C,1),di.call(e,C,1);return e}function _a(e,t){for(var r=e?t.length:0,o=r-1;r--;){var a=t[r];if(r==o||a!==f){var f=a;Ft(a)?di.call(e,a,1):cs(e,a)}}return e}function os(e,t){return e+gi(Xs()*(t-e+1))}function ss(e,t){var r="";if(!e||t<1||t>vt)return r;do{t%2&&(r+=e),(t=gi(t/2))&&(e+=e)}while(t);return r}function re(e,t){return Ss(Ya(e,t,ze),e+"")}function ul(e){return js(Zn(e))}function ll(e,t){var r=Zn(e);return Ii(r,on(t,0,r.length))}function gr(e,t,r,o){if(!be(e))return e;for(var a=-1,f=(t=Ht(t,e)).length,p=f-1,m=e;null!=m&&++a<f;){var C=Ct(t[a]),I=r;if("__proto__"===C||"constructor"===C||"prototype"===C)return e;if(a!=p){var P=m[C];(I=o?o(P,C,m):c)===c&&(I=be(P)?P:Ft(t[a+1])?[]:{})}lr(m,C,I),m=m[C]}return e}var ma=pi?function(e,t){return pi.set(e,t),e}:ze,dl=fi?function(e,t){return fi(e,"toString",{configurable:!0,enumerable:!1,value:Rs(t),writable:!0})}:ze;function fl(e){return Ii(Zn(e))}function ut(e,t,r){var o=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var f=O(a);++o<a;)f[o]=e[o+t];return f}function hl(e,t){var r;return qt(e,function(o,a,f){return!(r=t(o,a,f))}),!!r}function wi(e,t,r){var o=0,a=null==e?o:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;o<a;){var f=o+a>>>1,p=e[f];null!==p&&!je(p)&&(r?p<=t:p<t)?o=f+1:a=f}return a}return as(e,t,ze,r)}function as(e,t,r,o){var a=0,f=null==e?0:e.length;if(0===f)return 0;for(var p=(t=r(t))!=t,m=null===t,C=je(t),I=t===c;a<f;){var P=gi((a+f)/2),R=r(e[P]),U=R!==c,J=null===R,K=R==R,ne=je(R);if(p)var X=o||K;else X=I?K&&(o||U):m?K&&U&&(o||!J):C?K&&U&&!J&&(o||!ne):!J&&!ne&&(o?R<=t:R<t);X?a=P+1:f=P}return Fe(f,4294967294)}function va(e,t){for(var r=-1,o=e.length,a=0,f=[];++r<o;){var p=e[r],m=t?t(p):p;if(!r||!_t(m,C)){var C=m;f[a++]=0===p?0:p}}return f}function ya(e){return"number"==typeof e?e:je(e)?NaN:+e}function Ve(e){if("string"==typeof e)return e;if(j(e))return ve(e,Ve)+"";if(je(e))return $s?$s.call(e):"";var t=e+"";return"0"==t&&1/e==-Tt?"-0":t}function Gt(e,t,r){var o=-1,a=An,f=e.length,p=!0,m=[],C=m;if(r)p=!1,a=rr;else if(f>=200){var I=t?null:Cl(e);if(I)return ni(I);p=!1,a=ir,C=new rn}else C=t?[]:m;e:for(;++o<f;){var P=e[o],R=t?t(P):P;if(P=r||0!==P?P:0,p&&R==R){for(var U=C.length;U--;)if(C[U]===R)continue e;t&&C.push(R),m.push(P)}else a(C,R,r)||(C!==m&&C.push(R),m.push(P))}return m}function cs(e,t){return null==(e=za(e,t=Ht(t,e)))||delete e[Ct(lt(t))]}function xa(e,t,r,o){return gr(e,t,r(sn(e,t)),o)}function Si(e,t,r,o){for(var a=e.length,f=o?a:-1;(o?f--:++f<a)&&t(e[f],f,e););return r?ut(e,o?0:f,o?f+1:a):ut(e,o?f+1:0,o?a:f)}function ba(e,t){var r=e;return r instanceof se&&(r=r.value()),u(t,function(o,a){return a.func.apply(a.thisArg,bt([o],a.args))},r)}function us(e,t,r){var o=e.length;if(o<2)return o?Gt(e[0]):[];for(var a=-1,f=O(o);++a<o;)for(var p=e[a],m=-1;++m<o;)m!=a&&(f[a]=dr(f[a]||p,e[m],t,r));return Gt(Re(f,1),t,r)}function wa(e,t,r){for(var o=-1,a=e.length,f=t.length,p={};++o<a;)r(p,e[o],o<f?t[o]:c);return p}function ls(e){return Ce(e)?e:[]}function ds(e){return"function"==typeof e?e:ze}function Ht(e,t){return j(e)?e:xs(e,t)?[e]:$a(le(e))}var gl=re;function Wt(e,t,r){var o=e.length;return r=r===c?o:r,!t&&r>=o?e:ut(e,t,r)}var Sa=tu||function(e){return Ae.clearTimeout(e)};function Ca(e,t){if(t)return e.slice();var r=e.length,o=Js?Js(r):new e.constructor(r);return e.copy(o),o}function fs(e){var t=new e.constructor(e.byteLength);return new ui(t).set(new ui(e)),t}function Ta(e,t){var r=t?fs(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Aa(e,t){if(e!==t){var r=e!==c,o=null===e,a=e==e,f=je(e),p=t!==c,m=null===t,C=t==t,I=je(t);if(!m&&!I&&!f&&e>t||f&&p&&C&&!m&&!I||o&&p&&C||!r&&C||!a)return 1;if(!o&&!f&&!I&&e<t||I&&r&&a&&!o&&!f||m&&r&&a||!p&&a||!C)return-1}return 0}function Ma(e,t,r,o){for(var a=-1,f=e.length,p=r.length,m=-1,C=t.length,I=Oe(f-p,0),P=O(C+I),R=!o;++m<C;)P[m]=t[m];for(;++a<p;)(R||a<f)&&(P[r[a]]=e[a]);for(;I--;)P[m++]=e[a++];return P}function Ea(e,t,r,o){for(var a=-1,f=e.length,p=-1,m=r.length,C=-1,I=t.length,P=Oe(f-m,0),R=O(P+I),U=!o;++a<P;)R[a]=e[a];for(var J=a;++C<I;)R[J+C]=t[C];for(;++p<m;)(U||a<f)&&(R[J+r[p]]=e[a++]);return R}function We(e,t){var r=-1,o=e.length;for(t||(t=O(o));++r<o;)t[r]=e[r];return t}function St(e,t,r,o){var a=!r;r||(r={});for(var f=-1,p=t.length;++f<p;){var m=t[f],C=o?o(r[m],e[m],m,r,e):c;C===c&&(C=e[m]),a?It(r,m,C):lr(r,m,C)}return r}function Ci(e,t){return function(r,o){var a=j(r)?qo:Gu,f=t?t():{};return a(r,e,z(o,2),f)}}function Rn(e){return re(function(t,r){var o=-1,a=r.length,f=a>1?r[a-1]:c,p=a>2?r[2]:c;for(f=e.length>3&&"function"==typeof f?(a--,f):c,p&&Be(r[0],r[1],p)&&(f=a<3?c:f,a=1),t=_e(t);++o<a;){var m=r[o];m&&e(t,m,o,f)}return t})}function Oa(e,t){return function(r,o){if(null==r)return r;if(!Je(r))return e(r,o);for(var a=r.length,f=t?a:-1,p=_e(r);(t?f--:++f<a)&&!1!==o(p[f],f,p););return r}}function ka(e){return function(t,r,o){for(var a=-1,f=_e(t),p=o(t),m=p.length;m--;){var C=p[e?m:++a];if(!1===r(f[C],C,f))break}return t}}function Ia(e){return function(t){var r=Mn(t=le(t))?gt(t):c,o=r?r[0]:t.charAt(0),a=r?Wt(r,1).join(""):t.slice(1);return o[e]()+a}}function Fn(e){return function(t){return u(Oc(Ec(t).replace(Mo,"")),e,"")}}function pr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Pn(e.prototype),o=e.apply(r,t);return be(o)?o:r}}function Pa(e){return function(t,r,o){var a=_e(t);if(!Je(t)){var f=z(r,3);t=Pe(t),r=function(m){return f(a[m],m,a)}}var p=e(t,r,o);return p>-1?a[f?t[p]:p]:c}}function Ra(e){return Rt(function(t){var r=t.length,o=r,a=at.prototype.thru;for(e&&t.reverse();o--;){var f=t[o];if("function"!=typeof f)throw new st(n);if(a&&!p&&"wrapper"==Oi(f))var p=new at([],!0)}for(o=p?o:r;++o<r;){var m=Oi(f=t[o]),C="wrapper"==m?ms(f):c;p=C&&bs(C[0])&&424==C[1]&&!C[4].length&&1==C[9]?p[Oi(C[0])].apply(p,C[3]):1==f.length&&bs(f)?p[m]():p.thru(f)}return function(){var I=arguments,P=I[0];if(p&&1==I.length&&j(P))return p.plant(P).value();for(var R=0,U=r?t[R].apply(this,I):P;++R<r;)U=t[R].call(this,U);return U}})}function Ti(e,t,r,o,a,f,p,m,C,I){var P=128&t,R=1&t,U=2&t,J=24&t,K=512&t,ne=U?c:pr(e);return function X(){for(var oe=arguments.length,ae=O(oe),et=oe;et--;)ae[et]=arguments[et];if(J)var Ne=Ln(X),tt=Fc(ae,Ne);if(o&&(ae=Ma(ae,o,a,J)),f&&(ae=Ea(ae,f,p,J)),oe-=tt,J&&oe<I){var Te=Nt(ae,Ne);return Da(e,t,Ti,X.placeholder,r,ae,Te,m,C,I-oe)}var mt=R?r:this,Zt=U?mt[e]:e;return oe=ae.length,m?ae=Gl(ae,m):K&&oe>1&&ae.reverse(),P&&C<oe&&(ae.length=C),this&&this!==Ae&&this instanceof X&&(Zt=ne||pr(Zt)),Zt.apply(mt,ae)}}function Fa(e,t){return function(r,o){return function Xu(e,t,r,o){return wt(e,function(a,f,p){t(o,r(a),f,p)}),o}(r,e,t(o),{})}}function Ai(e,t){return function(r,o){var a;if(r===c&&o===c)return t;if(r!==c&&(a=r),o!==c){if(a===c)return o;"string"==typeof r||"string"==typeof o?(r=Ve(r),o=Ve(o)):(r=ya(r),o=ya(o)),a=e(r,o)}return a}}function hs(e){return Rt(function(t){return t=ve(t,$e(z())),re(function(r){var o=this;return e(t,function(a){return De(a,o,r)})})})}function Mi(e,t){var r=(t=t===c?" ":Ve(t)).length;if(r<2)return r?ss(t,e):t;var o=ss(t,hi(e/En(t)));return Mn(t)?Wt(gt(o),0,e).join(""):o.slice(0,e)}function La(e){return function(t,r,o){return o&&"number"!=typeof o&&Be(t,r,o)&&(r=o=c),t=Dt(t),r===c?(r=t,t=0):r=Dt(r),function cl(e,t,r,o){for(var a=-1,f=Oe(hi((t-e)/(r||1)),0),p=O(f);f--;)p[o?f:++a]=e,e+=r;return p}(t,r,o=o===c?t<r?1:-1:Dt(o),e)}}function Ei(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=dt(t),r=dt(r)),e(t,r)}}function Da(e,t,r,o,a,f,p,m,C,I){var P=8&t;t|=P?32:64,4&(t&=~(P?64:32))||(t&=-4);var ne=[e,t,a,P?f:c,P?p:c,P?c:f,P?c:p,m,C,I],X=r.apply(c,ne);return bs(e)&&Qa(X,ne),X.placeholder=o,Ka(X,e,t)}function gs(e){var t=Ee[e];return function(r,o){if(r=dt(r),(o=null==o?0:Fe(te(o),292))&&Ks(r)){var a=(le(r)+"e").split("e");return+((a=(le(t(a[0]+"e"+(+a[1]+o)))+"e").split("e"))[0]+"e"+(+a[1]-o))}return t(r)}}var Cl=kn&&1/ni(new kn([,-0]))[1]==Tt?function(e){return new kn(e)}:Ds;function Za(e){return function(t){var r=Le(t);return r==Qe?Wo(t):r==Ke?function qc(x){var k=-1,O=Array(x.size);return x.forEach(function(G){O[++k]=[G,G]}),O}(t):function Rc(x,k){return ve(k,function(O){return[O,x[O]]})}(t,e(t))}}function Pt(e,t,r,o,a,f,p,m){var C=2&t;if(!C&&"function"!=typeof e)throw new st(n);var I=o?o.length:0;if(I||(t&=-97,o=a=c),p=p===c?p:Oe(te(p),0),m=m===c?m:te(m),I-=a?a.length:0,64&t){var P=o,R=a;o=a=c}var U=C?c:ms(e),J=[e,t,r,o,a,P,R,f,p,m];if(U&&function Nl(e,t){var r=e[1],o=t[1],a=r|o;if(!(a<131||(128==o&&8==r||128==o&&256==r&&e[7].length<=t[8]||384==o&&t[7].length<=t[8]&&8==r)))return e;1&o&&(e[2]=t[2],a|=1&r?0:4);var m=t[3];if(m){var C=e[3];e[3]=C?Ma(C,m,t[4]):m,e[4]=C?Nt(e[3],T):t[4]}(m=t[5])&&(e[5]=(C=e[5])?Ea(C,m,t[6]):m,e[6]=C?Nt(e[5],T):t[6]),(m=t[7])&&(e[7]=m),128&o&&(e[8]=null==e[8]?t[8]:Fe(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a}(J,U),e=J[0],t=J[1],r=J[2],o=J[3],a=J[4],!(m=J[9]=J[9]===c?C?0:e.length:Oe(J[9]-I,0))&&24&t&&(t&=-25),t&&1!=t)K=8==t||16==t?function wl(e,t,r){var o=pr(e);return function a(){for(var f=arguments.length,p=O(f),m=f,C=Ln(a);m--;)p[m]=arguments[m];var I=f<3&&p[0]!==C&&p[f-1]!==C?[]:Nt(p,C);return(f-=I.length)<r?Da(e,t,Ti,a.placeholder,c,p,I,c,c,r-f):De(this&&this!==Ae&&this instanceof a?o:e,this,p)}}(e,t,m):32!=t&&33!=t||a.length?Ti.apply(c,J):function Sl(e,t,r,o){var a=1&t,f=pr(e);return function p(){for(var m=-1,C=arguments.length,I=-1,P=o.length,R=O(P+C),U=this&&this!==Ae&&this instanceof p?f:e;++I<P;)R[I]=o[I];for(;C--;)R[I++]=arguments[++m];return De(U,a?r:this,R)}}(e,t,r,o);else var K=function bl(e,t,r){var o=1&t,a=pr(e);return function f(){return(this&&this!==Ae&&this instanceof f?a:e).apply(o?r:this,arguments)}}(e,t,r);return Ka((U?ma:Qa)(K,J),e,t)}function Ba(e,t,r,o){return e===c||_t(e,On[r])&&!de.call(o,r)?t:e}function Na(e,t,r,o,a,f){return be(e)&&be(t)&&(f.set(t,e),bi(e,t,c,Na,f),f.delete(t)),e}function Tl(e){return vr(e)?c:e}function Ua(e,t,r,o,a,f){var p=1&r,m=e.length,C=t.length;if(m!=C&&!(p&&C>m))return!1;var I=f.get(e),P=f.get(t);if(I&&P)return I==t&&P==e;var R=-1,U=!0,J=2&r?new rn:c;for(f.set(e,t),f.set(t,e);++R<m;){var K=e[R],ne=t[R];if(o)var X=p?o(ne,K,R,t,e,f):o(K,ne,R,e,t,f);if(X!==c){if(X)continue;U=!1;break}if(J){if(!i(t,function(oe,ae){if(!ir(J,ae)&&(K===oe||a(K,oe,r,o,f)))return J.push(ae)})){U=!1;break}}else if(K!==ne&&!a(K,ne,r,o,f)){U=!1;break}}return f.delete(e),f.delete(t),U}function Rt(e){return Ss(Ya(e,c,tc),e+"")}function ps(e){return sa(e,Pe,ys)}function _s(e){return sa(e,Ye,qa)}var ms=pi?function(e){return pi.get(e)}:Ds;function Oi(e){for(var t=e.name+"",r=In[t],o=de.call(In,t)?r.length:0;o--;){var a=r[o],f=a.func;if(null==f||f==e)return a.name}return t}function Ln(e){return(de.call(d,"placeholder")?d:e).placeholder}function z(){var e=d.iteratee||Fs;return e=e===Fs?ua:e,arguments.length?e(arguments[0],arguments[1]):e}function ki(e,t){var r=e.__data__;return function Ll(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function vs(e){for(var t=Pe(e),r=t.length;r--;){var o=t[r],a=e[o];t[r]=[o,a,Wa(a)]}return t}function an(e,t){var r=function Bc(x,k){return null==x?c:x[k]}(e,t);return ca(r)?r:c}var ys=Yo?function(e){return null==e?[]:(e=_e(e),xt(Yo(e),function(t){return zs.call(e,t)}))}:Zs,qa=Yo?function(e){for(var t=[];e;)bt(t,ys(e)),e=li(e);return t}:Zs,Le=Ze;function Ga(e,t,r){for(var o=-1,a=(t=Ht(t,e)).length,f=!1;++o<a;){var p=Ct(t[o]);if(!(f=null!=e&&r(e,p)))break;e=e[p]}return f||++o!=a?f:!!(a=null==e?0:e.length)&&Zi(a)&&Ft(p,a)&&(j(e)||un(e))}function Ha(e){return"function"!=typeof e.constructor||_r(e)?{}:Pn(li(e))}function Fl(e){return j(e)||un(e)||!!(Qs&&e&&e[Qs])}function Ft(e,t){var r=typeof e;return!!(t=t??vt)&&("number"==r||"symbol"!=r&&wn.test(e))&&e>-1&&e%1==0&&e<t}function Be(e,t,r){if(!be(r))return!1;var o=typeof t;return!!("number"==o?Je(r)&&Ft(t,r.length):"string"==o&&t in r)&&_t(r[t],e)}function xs(e,t){if(j(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!je(e))||Qn.test(e)||!no.test(e)||null!=t&&e in _e(t)}function bs(e){var t=Oi(e),r=d[t];if("function"!=typeof r||!(t in se.prototype))return!1;if(e===r)return!0;var o=ms(r);return!!o&&e===o[0]}(zo&&Le(new zo(new ArrayBuffer(1)))!=yt||sr&&Le(new sr)!=Qe||Qo&&Le(Qo.resolve())!=ht||kn&&Le(new kn)!=Ke||ar&&Le(new ar)!=Vt)&&(Le=function(e){var t=Ze(e),r=t==ft?e.constructor:c,o=r?cn(r):"";if(o)switch(o){case lu:return yt;case du:return Qe;case fu:return ht;case hu:return Ke;case gu:return Vt}return t});var Zl=oi?Lt:Bs;function _r(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||On)}function Wa(e){return e==e&&!be(e)}function Ja(e,t){return function(r){return null!=r&&r[e]===t&&(t!==c||e in _e(r))}}function Ya(e,t,r){return t=Oe(t===c?e.length-1:t,0),function(){for(var o=arguments,a=-1,f=Oe(o.length-t,0),p=O(f);++a<f;)p[a]=o[t+a];a=-1;for(var m=O(t+1);++a<t;)m[a]=o[a];return m[t]=r(p),De(e,this,m)}}function za(e,t){return t.length<2?e:sn(e,ut(t,0,-1))}function Gl(e,t){for(var r=e.length,o=Fe(t.length,r),a=We(e);o--;){var f=t[o];e[o]=Ft(f,r)?a[f]:c}return e}function ws(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Qa=Xa(ma),mr=ru||function(e,t){return Ae.setTimeout(e,t)},Ss=Xa(dl);function Ka(e,t,r){var o=t+"";return Ss(e,function Rl(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(Sr,"{\n/* [wrapped with "+t+"] */\n")}(o,function Hl(e,t){return He(Yt,function(r){var o="_."+r[0];t&r[1]&&!An(e,o)&&e.push(o)}),e.sort()}(function kl(e){var t=e.match(io);return t?t[1].split(Kn):[]}(o),r)))}function Xa(e){var t=0,r=0;return function(){var o=au(),a=16-(o-r);if(r=o,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(c,arguments)}}function Ii(e,t){var r=-1,o=e.length,a=o-1;for(t=t===c?o:t;++r<t;){var f=os(r,a),p=e[f];e[f]=e[r],e[r]=p}return e.length=t,e}var $a=function Bl(e){var t=Li(e,function(o){return 500===r.size&&r.clear(),o}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ro,function(r,o,a,f){t.push(a?f.replace(bn,"$1"):o||r)}),t});function Ct(e){if("string"==typeof e||je(e))return e;var t=e+"";return"0"==t&&1/e==-Tt?"-0":t}function cn(e){if(null!=e){try{return si.call(e)}catch{}try{return e+""}catch{}}return""}function Va(e){if(e instanceof se)return e.clone();var t=new at(e.__wrapped__,e.__chain__);return t.__actions__=We(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var zl=re(function(e,t){return Ce(e)?dr(e,Re(t,1,Ce,!0)):[]}),Ql=re(function(e,t){var r=lt(t);return Ce(r)&&(r=c),Ce(e)?dr(e,Re(t,1,Ce,!0),z(r,2)):[]}),Kl=re(function(e,t){var r=lt(t);return Ce(r)&&(r=c),Ce(e)?dr(e,Re(t,1,Ce,!0),c,r):[]});function ja(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var a=null==r?0:te(r);return a<0&&(a=Oe(o+a,0)),H(e,z(t,3),a)}function ec(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var a=o-1;return r!==c&&(a=te(r),a=r<0?Oe(o+a,0):Fe(a,o-1)),H(e,z(t,3),a,!0)}function tc(e){return null!=e&&e.length?Re(e,1):[]}function nc(e){return e&&e.length?e[0]:c}var sd=re(function(e){var t=ve(e,ls);return t.length&&t[0]===e[0]?es(t):[]}),ad=re(function(e){var t=lt(e),r=ve(e,ls);return t===lt(r)?t=c:r.pop(),r.length&&r[0]===e[0]?es(r,z(t,2)):[]}),cd=re(function(e){var t=lt(e),r=ve(e,ls);return(t="function"==typeof t?t:c)&&r.pop(),r.length&&r[0]===e[0]?es(r,c,t):[]});function lt(e){var t=null==e?0:e.length;return t?e[t-1]:c}var fd=re(rc);function rc(e,t){return e&&e.length&&t&&t.length?is(e,t):e}var pd=Rt(function(e,t){var r=null==e?0:e.length,o=Xo(e,t);return _a(e,ve(t,function(a){return Ft(a,r)?+a:a}).sort(Aa)),o});function Cs(e){return null==e?e:uu.call(e)}var Id=re(function(e){return Gt(Re(e,1,Ce,!0))}),Pd=re(function(e){var t=lt(e);return Ce(t)&&(t=c),Gt(Re(e,1,Ce,!0),z(t,2))}),Rd=re(function(e){var t=lt(e);return t="function"==typeof t?t:c,Gt(Re(e,1,Ce,!0),c,t)});function Ts(e){if(!e||!e.length)return[];var t=0;return e=xt(e,function(r){if(Ce(r))return t=Oe(r.length,t),!0}),ot(t,function(r){return ve(e,Ie(r))})}function ic(e,t){if(!e||!e.length)return[];var r=Ts(e);return null==t?r:ve(r,function(o){return De(t,c,o)})}var Zd=re(function(e,t){return Ce(e)?dr(e,t):[]}),Bd=re(function(e){return us(xt(e,Ce))}),Nd=re(function(e){var t=lt(e);return Ce(t)&&(t=c),us(xt(e,Ce),z(t,2))}),Ud=re(function(e){var t=lt(e);return t="function"==typeof t?t:c,us(xt(e,Ce),c,t)}),qd=re(Ts),Wd=re(function(e){var t=e.length,r=t>1?e[t-1]:c;return r="function"==typeof r?(e.pop(),r):c,ic(e,r)});function oc(e){var t=d(e);return t.__chain__=!0,t}function Pi(e,t){return t(e)}var Yd=Rt(function(e){var t=e.length,r=t?e[0]:0,o=this.__wrapped__,a=function(f){return Xo(f,e)};return!(t>1||this.__actions__.length)&&o instanceof se&&Ft(r)?((o=o.slice(r,+r+(t?1:0))).__actions__.push({func:Pi,args:[a],thisArg:c}),new at(o,this.__chain__).thru(function(f){return t&&!f.length&&f.push(c),f})):this.thru(a)}),ef=Ci(function(e,t,r){de.call(e,r)?++e[r]:It(e,r,1)}),rf=Pa(ja),of=Pa(ec);function sc(e,t){return(j(e)?He:qt)(e,z(t,3))}function ac(e,t){return(j(e)?Go:ra)(e,z(t,3))}var uf=Ci(function(e,t,r){de.call(e,r)?e[r].push(t):It(e,r,[t])}),df=re(function(e,t,r){var o=-1,a="function"==typeof t,f=Je(e)?O(e.length):[];return qt(e,function(p){f[++o]=a?De(t,p,r):fr(p,t,r)}),f}),ff=Ci(function(e,t,r){It(e,r,t)});function Ri(e,t){return(j(e)?ve:la)(e,z(t,3))}var gf=Ci(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),Sf=re(function(e,t){if(null==e)return[];var r=t.length;return r>1&&Be(e,t[0],t[1])?t=[]:r>2&&Be(t[0],t[1],t[2])&&(t=[t[0]]),ga(e,Re(t,1),[])}),Fi=nu||function(){return Ae.Date.now()};function cc(e,t,r){return t=r?c:t,Pt(e,128,c,c,c,c,t=e&&null==t?e.length:t)}function uc(e,t){var r;if("function"!=typeof t)throw new st(n);return e=te(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=c),r}}var As=re(function(e,t,r){var o=1;if(r.length){var a=Nt(r,Ln(As));o|=32}return Pt(e,o,t,r,a)}),lc=re(function(e,t,r){var o=3;if(r.length){var a=Nt(r,Ln(lc));o|=32}return Pt(t,o,e,r,a)});function hc(e,t,r){var o,a,f,p,m,C,I=0,P=!1,R=!1,U=!0;if("function"!=typeof e)throw new st(n);function J(Te){var mt=o,Zt=a;return o=a=c,I=Te,p=e.apply(Zt,mt)}function K(Te){return I=Te,m=mr(oe,t),P?J(Te):p}function X(Te){var mt=Te-C;return C===c||mt>=t||mt<0||R&&Te-I>=f}function oe(){var Te=Fi();if(X(Te))return ae(Te);m=mr(oe,function ne(Te){var Pc=t-(Te-C);return R?Fe(Pc,f-(Te-I)):Pc}(Te))}function ae(Te){return m=c,U&&o?J(Te):(o=a=c,p)}function tt(){var Te=Fi(),mt=X(Te);if(o=arguments,a=this,C=Te,mt){if(m===c)return K(C);if(R)return Sa(m),m=mr(oe,t),J(C)}return m===c&&(m=mr(oe,t)),p}return t=dt(t)||0,be(r)&&(P=!!r.leading,f=(R="maxWait"in r)?Oe(dt(r.maxWait)||0,t):f,U="trailing"in r?!!r.trailing:U),tt.cancel=function et(){m!==c&&Sa(m),I=0,o=C=a=m=c},tt.flush=function Ne(){return m===c?p:ae(Fi())},tt}var Tf=re(function(e,t){return na(e,1,t)}),Af=re(function(e,t,r){return na(e,dt(t)||0,r)});function Li(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new st(n);var r=function(){var o=arguments,a=t?t.apply(this,o):o[0],f=r.cache;if(f.has(a))return f.get(a);var p=e.apply(this,o);return r.cache=f.set(a,p)||f,p};return r.cache=new(Li.Cache||kt),r}function Di(e){if("function"!=typeof e)throw new st(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Li.Cache=kt;var Of=gl(function(e,t){var r=(t=1==t.length&&j(t[0])?ve(t[0],$e(z())):ve(Re(t,1),$e(z()))).length;return re(function(o){for(var a=-1,f=Fe(o.length,r);++a<f;)o[a]=t[a].call(this,o[a]);return De(e,this,o)})}),Ms=re(function(e,t){var r=Nt(t,Ln(Ms));return Pt(e,32,c,t,r)}),gc=re(function(e,t){var r=Nt(t,Ln(gc));return Pt(e,64,c,t,r)}),kf=Rt(function(e,t){return Pt(e,256,c,c,c,t)});function _t(e,t){return e===t||e!=e&&t!=t}var Gf=Ei(jo),Hf=Ei(function(e,t){return e>=t}),un=aa(function(){return arguments}())?aa:function(e){return Se(e)&&de.call(e,"callee")&&!zs.call(e,"callee")},j=O.isArray,Wf=Kr?$e(Kr):function $u(e){return Se(e)&&Ze(e)==jt};function Je(e){return null!=e&&Zi(e.length)&&!Lt(e)}function Ce(e){return Se(e)&&Je(e)}var Jt=iu||Bs,Yf=Xr?$e(Xr):function Vu(e){return Se(e)&&Ze(e)==Qt};function Es(e){if(!Se(e))return!1;var t=Ze(e);return t==hn||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!vr(e)}function Lt(e){if(!be(e))return!1;var t=Ze(e);return t==gn||t==Nn||"[object AsyncFunction]"==t||"[object Proxy]"==t}function pc(e){return"number"==typeof e&&e==te(e)}function Zi(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=vt}function be(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Se(e){return null!=e&&"object"==typeof e}var _c=$r?$e($r):function el(e){return Se(e)&&Le(e)==Qe};function mc(e){return"number"==typeof e||Se(e)&&Ze(e)==Kt}function vr(e){if(!Se(e)||Ze(e)!=ft)return!1;var t=li(e);if(null===t)return!0;var r=de.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&si.call(r)==Vc}var Os=Vr?$e(Vr):function tl(e){return Se(e)&&Ze(e)==Xt},vc=jr?$e(jr):function nl(e){return Se(e)&&Le(e)==Ke};function Bi(e){return"string"==typeof e||!j(e)&&Se(e)&&Ze(e)==$t}function je(e){return"symbol"==typeof e||Se(e)&&Ze(e)==At}var Dn=ei?$e(ei):function rl(e){return Se(e)&&Zi(e.length)&&!!ge[Ze(e)]},ch=Ei(rs),uh=Ei(function(e,t){return e<=t});function yc(e){if(!e)return[];if(Je(e))return Bi(e)?gt(e):We(e);if(or&&e[or])return function Uc(x){for(var k,O=[];!(k=x.next()).done;)O.push(k.value);return O}(e[or]());var t=Le(e);return(t==Qe?Wo:t==Ke?ni:Zn)(e)}function Dt(e){return e?(e=dt(e))===Tt||e===-Tt?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function te(e){var t=Dt(e),r=t%1;return t==t?r?t-r:t:0}function xc(e){return e?on(te(e),0,nt):0}function dt(e){if("number"==typeof e)return e;if(je(e))return NaN;if(be(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=be(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ns(e);var r=ao.test(e);return r||uo.test(e)?No(e.slice(2),r?2:8):so.test(e)?NaN:+e}function bc(e){return St(e,Ye(e))}function le(e){return null==e?"":Ve(e)}var dh=Rn(function(e,t){if(_r(t)||Je(t))St(t,Pe(t),e);else for(var r in t)de.call(t,r)&&lr(e,r,t[r])}),wc=Rn(function(e,t){St(t,Ye(t),e)}),Ni=Rn(function(e,t,r,o){St(t,Ye(t),e,o)}),fh=Rn(function(e,t,r,o){St(t,Pe(t),e,o)}),hh=Rt(Xo),ph=re(function(e,t){e=_e(e);var r=-1,o=t.length,a=o>2?t[2]:c;for(a&&Be(t[0],t[1],a)&&(o=1);++r<o;)for(var f=t[r],p=Ye(f),m=-1,C=p.length;++m<C;){var I=p[m],P=e[I];(P===c||_t(P,On[I])&&!de.call(e,I))&&(e[I]=f[I])}return e}),_h=re(function(e){return e.push(c,Na),De(Sc,c,e)});function ks(e,t,r){var o=null==e?c:sn(e,t);return o===c?r:o}function Is(e,t){return null!=e&&Ga(e,t,Qu)}var Ah=Fa(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ai.call(t)),e[t]=r},Rs(ze)),Mh=Fa(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ai.call(t)),de.call(e,t)?e[t].push(r):e[t]=[r]},z),Eh=re(fr);function Pe(e){return Je(e)?Vs(e):ns(e)}function Ye(e){return Je(e)?Vs(e,!0):function il(e){if(!be(e))return function Ul(e){var t=[];if(null!=e)for(var r in _e(e))t.push(r);return t}(e);var t=_r(e),r=[];for(var o in e)"constructor"==o&&(t||!de.call(e,o))||r.push(o);return r}(e)}var Ih=Rn(function(e,t,r){bi(e,t,r)}),Sc=Rn(function(e,t,r,o){bi(e,t,r,o)}),Ph=Rt(function(e,t){var r={};if(null==e)return r;var o=!1;t=ve(t,function(f){return f=Ht(f,e),o||(o=f.length>1),f}),St(e,_s(e),r),o&&(r=ct(r,7,Tl));for(var a=t.length;a--;)cs(r,t[a]);return r}),Fh=Rt(function(e,t){return null==e?{}:function sl(e,t){return pa(e,t,function(r,o){return Is(e,o)})}(e,t)});function Cc(e,t){if(null==e)return{};var r=ve(_s(e),function(o){return[o]});return t=z(t),pa(e,r,function(o,a){return t(o,a[0])})}var Tc=Za(Pe),Ac=Za(Ye);function Zn(e){return null==e?[]:Ho(e,Pe(e))}var Yh=Fn(function(e,t,r){return t=t.toLowerCase(),e+(r?Mc(t):t)});function Mc(e){return Ps(le(e).toLowerCase())}function Ec(e){return(e=le(e))&&e.replace(lo,Lc).replace(Eo,"")}var Xh=Fn(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),$h=Fn(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Vh=Ia("toLowerCase"),og=Fn(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),ag=Fn(function(e,t,r){return e+(r?" ":"")+Ps(t)}),mg=Fn(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Ps=Ia("toUpperCase");function Oc(e,t,r){return e=le(e),(t=r?c:t)===c?function Nc(x){return Io.test(x)}(e)?function zc(x){return x.match(Oo)||[]}(e):function w(x){return x.match(Cr)||[]}(e):e.match(t)||[]}var kc=re(function(e,t){try{return De(e,c,t)}catch(r){return Es(r)?r:new V(r)}}),vg=Rt(function(e,t){return He(t,function(r){r=Ct(r),It(e,r,As(e[r],e))}),e});function Rs(e){return function(){return e}}var wg=Ra(),Sg=Ra(!0);function ze(e){return e}function Fs(e){return ua("function"==typeof e?e:ct(e,1))}var Ag=re(function(e,t){return function(r){return fr(r,e,t)}}),Mg=re(function(e,t){return function(r){return fr(e,r,t)}});function Ls(e,t,r){var o=Pe(t),a=xi(t,o);null==r&&(!be(t)||!a.length&&o.length)&&(r=t,t=e,e=this,a=xi(t,Pe(t)));var f=!(be(r)&&"chain"in r&&!r.chain),p=Lt(e);return He(a,function(m){var C=t[m];e[m]=C,p&&(e.prototype[m]=function(){var I=this.__chain__;if(f||I){var P=e(this.__wrapped__),R=P.__actions__=We(this.__actions__);return R.push({func:C,args:arguments,thisArg:e}),P.__chain__=I,P}return C.apply(e,bt([this.value()],arguments))})}),e}function Ds(){}var kg=hs(ve),Ig=hs(ti),Pg=hs(i);function Ic(e){return xs(e)?Ie(Ct(e)):function al(e){return function(t){return sn(t,e)}}(e)}var Fg=La(),Lg=La(!0);function Zs(){return[]}function Bs(){return!1}var Gg=Ai(function(e,t){return e+t},0),Hg=gs("ceil"),Wg=Ai(function(e,t){return e/t},1),Jg=gs("floor"),Vg=Ai(function(e,t){return e*t},1),jg=gs("round"),ep=Ai(function(e,t){return e-t},0);return d.after=function Cf(e,t){if("function"!=typeof t)throw new st(n);return e=te(e),function(){if(--e<1)return t.apply(this,arguments)}},d.ary=cc,d.assign=dh,d.assignIn=wc,d.assignInWith=Ni,d.assignWith=fh,d.at=hh,d.before=uc,d.bind=As,d.bindAll=vg,d.bindKey=lc,d.castArray=function Df(){if(!arguments.length)return[];var e=arguments[0];return j(e)?e:[e]},d.chain=oc,d.chunk=function Wl(e,t,r){t=(r?Be(e,t,r):t===c)?1:Oe(te(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,f=0,p=O(hi(o/t));a<o;)p[f++]=ut(e,a,a+=t);return p},d.compact=function Jl(e){for(var t=-1,r=null==e?0:e.length,o=0,a=[];++t<r;){var f=e[t];f&&(a[o++]=f)}return a},d.concat=function Yl(){var e=arguments.length;if(!e)return[];for(var t=O(e-1),r=arguments[0],o=e;o--;)t[o-1]=arguments[o];return bt(j(r)?We(r):[r],Re(t,1))},d.cond=function yg(e){var t=null==e?0:e.length,r=z();return e=t?ve(e,function(o){if("function"!=typeof o[1])throw new st(n);return[r(o[0]),o[1]]}):[],re(function(o){for(var a=-1;++a<t;){var f=e[a];if(De(f[0],this,o))return De(f[1],this,o)}})},d.conforms=function xg(e){return function Wu(e){var t=Pe(e);return function(r){return ta(r,e,t)}}(ct(e,1))},d.constant=Rs,d.countBy=ef,d.create=function gh(e,t){var r=Pn(e);return null==t?r:ea(r,t)},d.curry=function dc(e,t,r){var o=Pt(e,8,c,c,c,c,c,t=r?c:t);return o.placeholder=dc.placeholder,o},d.curryRight=function fc(e,t,r){var o=Pt(e,16,c,c,c,c,c,t=r?c:t);return o.placeholder=fc.placeholder,o},d.debounce=hc,d.defaults=ph,d.defaultsDeep=_h,d.defer=Tf,d.delay=Af,d.difference=zl,d.differenceBy=Ql,d.differenceWith=Kl,d.drop=function Xl(e,t,r){var o=null==e?0:e.length;return o?ut(e,(t=r||t===c?1:te(t))<0?0:t,o):[]},d.dropRight=function $l(e,t,r){var o=null==e?0:e.length;return o?ut(e,0,(t=o-(t=r||t===c?1:te(t)))<0?0:t):[]},d.dropRightWhile=function Vl(e,t){return e&&e.length?Si(e,z(t,3),!0,!0):[]},d.dropWhile=function jl(e,t){return e&&e.length?Si(e,z(t,3),!0):[]},d.fill=function ed(e,t,r,o){var a=null==e?0:e.length;return a?(r&&"number"!=typeof r&&Be(e,t,r)&&(r=0,o=a),function Yu(e,t,r,o){var a=e.length;for((r=te(r))<0&&(r=-r>a?0:a+r),(o=o===c||o>a?a:te(o))<0&&(o+=a),o=r>o?0:xc(o);r<o;)e[r++]=t;return e}(e,t,r,o)):[]},d.filter=function nf(e,t){return(j(e)?xt:ia)(e,z(t,3))},d.flatMap=function sf(e,t){return Re(Ri(e,t),1)},d.flatMapDeep=function af(e,t){return Re(Ri(e,t),Tt)},d.flatMapDepth=function cf(e,t,r){return r=r===c?1:te(r),Re(Ri(e,t),r)},d.flatten=tc,d.flattenDeep=function td(e){return null!=e&&e.length?Re(e,Tt):[]},d.flattenDepth=function nd(e,t){return null!=e&&e.length?Re(e,t=t===c?1:te(t)):[]},d.flip=function Mf(e){return Pt(e,512)},d.flow=wg,d.flowRight=Sg,d.fromPairs=function rd(e){for(var t=-1,r=null==e?0:e.length,o={};++t<r;){var a=e[t];o[a[0]]=a[1]}return o},d.functions=function Sh(e){return null==e?[]:xi(e,Pe(e))},d.functionsIn=function Ch(e){return null==e?[]:xi(e,Ye(e))},d.groupBy=uf,d.initial=function od(e){return null!=e&&e.length?ut(e,0,-1):[]},d.intersection=sd,d.intersectionBy=ad,d.intersectionWith=cd,d.invert=Ah,d.invertBy=Mh,d.invokeMap=df,d.iteratee=Fs,d.keyBy=ff,d.keys=Pe,d.keysIn=Ye,d.map=Ri,d.mapKeys=function Oh(e,t){var r={};return t=z(t,3),wt(e,function(o,a,f){It(r,t(o,a,f),o)}),r},d.mapValues=function kh(e,t){var r={};return t=z(t,3),wt(e,function(o,a,f){It(r,a,t(o,a,f))}),r},d.matches=function Cg(e){return da(ct(e,1))},d.matchesProperty=function Tg(e,t){return fa(e,ct(t,1))},d.memoize=Li,d.merge=Ih,d.mergeWith=Sc,d.method=Ag,d.methodOf=Mg,d.mixin=Ls,d.negate=Di,d.nthArg=function Og(e){return e=te(e),re(function(t){return ha(t,e)})},d.omit=Ph,d.omitBy=function Rh(e,t){return Cc(e,Di(z(t)))},d.once=function Ef(e){return uc(2,e)},d.orderBy=function hf(e,t,r,o){return null==e?[]:(j(t)||(t=null==t?[]:[t]),j(r=o?c:r)||(r=null==r?[]:[r]),ga(e,t,r))},d.over=kg,d.overArgs=Of,d.overEvery=Ig,d.overSome=Pg,d.partial=Ms,d.partialRight=gc,d.partition=gf,d.pick=Fh,d.pickBy=Cc,d.property=Ic,d.propertyOf=function Rg(e){return function(t){return null==e?c:sn(e,t)}},d.pull=fd,d.pullAll=rc,d.pullAllBy=function hd(e,t,r){return e&&e.length&&t&&t.length?is(e,t,z(r,2)):e},d.pullAllWith=function gd(e,t,r){return e&&e.length&&t&&t.length?is(e,t,c,r):e},d.pullAt=pd,d.range=Fg,d.rangeRight=Lg,d.rearg=kf,d.reject=function mf(e,t){return(j(e)?xt:ia)(e,Di(z(t,3)))},d.remove=function _d(e,t){var r=[];if(!e||!e.length)return r;var o=-1,a=[],f=e.length;for(t=z(t,3);++o<f;){var p=e[o];t(p,o,e)&&(r.push(p),a.push(o))}return _a(e,a),r},d.rest=function If(e,t){if("function"!=typeof e)throw new st(n);return re(e,t=t===c?t:te(t))},d.reverse=Cs,d.sampleSize=function yf(e,t,r){return t=(r?Be(e,t,r):t===c)?1:te(t),(j(e)?Uu:ll)(e,t)},d.set=function Dh(e,t,r){return null==e?e:gr(e,t,r)},d.setWith=function Zh(e,t,r,o){return o="function"==typeof o?o:c,null==e?e:gr(e,t,r,o)},d.shuffle=function xf(e){return(j(e)?qu:fl)(e)},d.slice=function md(e,t,r){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&Be(e,t,r)?(t=0,r=o):(t=null==t?0:te(t),r=r===c?o:te(r)),ut(e,t,r)):[]},d.sortBy=Sf,d.sortedUniq=function Cd(e){return e&&e.length?va(e):[]},d.sortedUniqBy=function Td(e,t){return e&&e.length?va(e,z(t,2)):[]},d.split=function sg(e,t,r){return r&&"number"!=typeof r&&Be(e,t,r)&&(t=r=c),(r=r===c?nt:r>>>0)?(e=le(e))&&("string"==typeof t||null!=t&&!Os(t))&&!(t=Ve(t))&&Mn(e)?Wt(gt(e),0,r):e.split(t,r):[]},d.spread=function Pf(e,t){if("function"!=typeof e)throw new st(n);return t=null==t?0:Oe(te(t),0),re(function(r){var o=r[t],a=Wt(r,0,t);return o&&bt(a,o),De(e,this,a)})},d.tail=function Ad(e){var t=null==e?0:e.length;return t?ut(e,1,t):[]},d.take=function Md(e,t,r){return e&&e.length?ut(e,0,(t=r||t===c?1:te(t))<0?0:t):[]},d.takeRight=function Ed(e,t,r){var o=null==e?0:e.length;return o?ut(e,(t=o-(t=r||t===c?1:te(t)))<0?0:t,o):[]},d.takeRightWhile=function Od(e,t){return e&&e.length?Si(e,z(t,3),!1,!0):[]},d.takeWhile=function kd(e,t){return e&&e.length?Si(e,z(t,3)):[]},d.tap=function Jd(e,t){return t(e),e},d.throttle=function Rf(e,t,r){var o=!0,a=!0;if("function"!=typeof e)throw new st(n);return be(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),hc(e,t,{leading:o,maxWait:t,trailing:a})},d.thru=Pi,d.toArray=yc,d.toPairs=Tc,d.toPairsIn=Ac,d.toPath=function Ug(e){return j(e)?ve(e,Ct):je(e)?[e]:We($a(le(e)))},d.toPlainObject=bc,d.transform=function Bh(e,t,r){var o=j(e),a=o||Jt(e)||Dn(e);if(t=z(t,4),null==r){var f=e&&e.constructor;r=a?o?new f:[]:be(e)&&Lt(f)?Pn(li(e)):{}}return(a?He:wt)(e,function(p,m,C){return t(r,p,m,C)}),r},d.unary=function Ff(e){return cc(e,1)},d.union=Id,d.unionBy=Pd,d.unionWith=Rd,d.uniq=function Fd(e){return e&&e.length?Gt(e):[]},d.uniqBy=function Ld(e,t){return e&&e.length?Gt(e,z(t,2)):[]},d.uniqWith=function Dd(e,t){return t="function"==typeof t?t:c,e&&e.length?Gt(e,c,t):[]},d.unset=function Nh(e,t){return null==e||cs(e,t)},d.unzip=Ts,d.unzipWith=ic,d.update=function Uh(e,t,r){return null==e?e:xa(e,t,ds(r))},d.updateWith=function qh(e,t,r,o){return o="function"==typeof o?o:c,null==e?e:xa(e,t,ds(r),o)},d.values=Zn,d.valuesIn=function Gh(e){return null==e?[]:Ho(e,Ye(e))},d.without=Zd,d.words=Oc,d.wrap=function Lf(e,t){return Ms(ds(t),e)},d.xor=Bd,d.xorBy=Nd,d.xorWith=Ud,d.zip=qd,d.zipObject=function Gd(e,t){return wa(e||[],t||[],lr)},d.zipObjectDeep=function Hd(e,t){return wa(e||[],t||[],gr)},d.zipWith=Wd,d.entries=Tc,d.entriesIn=Ac,d.extend=wc,d.extendWith=Ni,Ls(d,d),d.add=Gg,d.attempt=kc,d.camelCase=Yh,d.capitalize=Mc,d.ceil=Hg,d.clamp=function Hh(e,t,r){return r===c&&(r=t,t=c),r!==c&&(r=(r=dt(r))==r?r:0),t!==c&&(t=(t=dt(t))==t?t:0),on(dt(e),t,r)},d.clone=function Zf(e){return ct(e,4)},d.cloneDeep=function Nf(e){return ct(e,5)},d.cloneDeepWith=function Uf(e,t){return ct(e,5,t="function"==typeof t?t:c)},d.cloneWith=function Bf(e,t){return ct(e,4,t="function"==typeof t?t:c)},d.conformsTo=function qf(e,t){return null==t||ta(e,t,Pe(t))},d.deburr=Ec,d.defaultTo=function bg(e,t){return null==e||e!=e?t:e},d.divide=Wg,d.endsWith=function zh(e,t,r){e=le(e),t=Ve(t);var o=e.length,a=r=r===c?o:on(te(r),0,o);return(r-=t.length)>=0&&e.slice(r,a)==t},d.eq=_t,d.escape=function Qh(e){return(e=le(e))&&ji.test(e)?e.replace(vn,Dc):e},d.escapeRegExp=function Kh(e){return(e=le(e))&&rt.test(e)?e.replace(xn,"\\$&"):e},d.every=function tf(e,t,r){var o=j(e)?ti:Ju;return r&&Be(e,t,r)&&(t=c),o(e,z(t,3))},d.find=rf,d.findIndex=ja,d.findKey=function mh(e,t){return N(e,z(t,3),wt)},d.findLast=of,d.findLastIndex=ec,d.findLastKey=function vh(e,t){return N(e,z(t,3),Vo)},d.floor=Jg,d.forEach=sc,d.forEachRight=ac,d.forIn=function yh(e,t){return null==e?e:$o(e,z(t,3),Ye)},d.forInRight=function xh(e,t){return null==e?e:oa(e,z(t,3),Ye)},d.forOwn=function bh(e,t){return e&&wt(e,z(t,3))},d.forOwnRight=function wh(e,t){return e&&Vo(e,z(t,3))},d.get=ks,d.gt=Gf,d.gte=Hf,d.has=function Th(e,t){return null!=e&&Ga(e,t,zu)},d.hasIn=Is,d.head=nc,d.identity=ze,d.includes=function lf(e,t,r,o){e=Je(e)?e:Zn(e),r=r&&!o?te(r):0;var a=e.length;return r<0&&(r=Oe(a+r,0)),Bi(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&Q(e,t,r)>-1},d.indexOf=function id(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var a=null==r?0:te(r);return a<0&&(a=Oe(o+a,0)),Q(e,t,a)},d.inRange=function Wh(e,t,r){return t=Dt(t),r===c?(r=t,t=0):r=Dt(r),function Ku(e,t,r){return e>=Fe(t,r)&&e<Oe(t,r)}(e=dt(e),t,r)},d.invoke=Eh,d.isArguments=un,d.isArray=j,d.isArrayBuffer=Wf,d.isArrayLike=Je,d.isArrayLikeObject=Ce,d.isBoolean=function Jf(e){return!0===e||!1===e||Se(e)&&Ze(e)==zt},d.isBuffer=Jt,d.isDate=Yf,d.isElement=function zf(e){return Se(e)&&1===e.nodeType&&!vr(e)},d.isEmpty=function Qf(e){if(null==e)return!0;if(Je(e)&&(j(e)||"string"==typeof e||"function"==typeof e.splice||Jt(e)||Dn(e)||un(e)))return!e.length;var t=Le(e);if(t==Qe||t==Ke)return!e.size;if(_r(e))return!ns(e).length;for(var r in e)if(de.call(e,r))return!1;return!0},d.isEqual=function Kf(e,t){return hr(e,t)},d.isEqualWith=function Xf(e,t,r){var o=(r="function"==typeof r?r:c)?r(e,t):c;return o===c?hr(e,t,c,r):!!o},d.isError=Es,d.isFinite=function $f(e){return"number"==typeof e&&Ks(e)},d.isFunction=Lt,d.isInteger=pc,d.isLength=Zi,d.isMap=_c,d.isMatch=function Vf(e,t){return e===t||ts(e,t,vs(t))},d.isMatchWith=function jf(e,t,r){return r="function"==typeof r?r:c,ts(e,t,vs(t),r)},d.isNaN=function eh(e){return mc(e)&&e!=+e},d.isNative=function th(e){if(Zl(e))throw new V("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ca(e)},d.isNil=function rh(e){return null==e},d.isNull=function nh(e){return null===e},d.isNumber=mc,d.isObject=be,d.isObjectLike=Se,d.isPlainObject=vr,d.isRegExp=Os,d.isSafeInteger=function ih(e){return pc(e)&&e>=-vt&&e<=vt},d.isSet=vc,d.isString=Bi,d.isSymbol=je,d.isTypedArray=Dn,d.isUndefined=function oh(e){return e===c},d.isWeakMap=function sh(e){return Se(e)&&Le(e)==Vt},d.isWeakSet=function ah(e){return Se(e)&&"[object WeakSet]"==Ze(e)},d.join=function ud(e,t){return null==e?"":ou.call(e,t)},d.kebabCase=Xh,d.last=lt,d.lastIndexOf=function ld(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var a=o;return r!==c&&(a=(a=te(r))<0?Oe(o+a,0):Fe(a,o-1)),t==t?function Hc(x,k,O){for(var G=O+1;G--;)if(x[G]===k)return G;return G}(e,t,a):H(e,ye,a,!0)},d.lowerCase=$h,d.lowerFirst=Vh,d.lt=ch,d.lte=uh,d.max=function Yg(e){return e&&e.length?yi(e,ze,jo):c},d.maxBy=function zg(e,t){return e&&e.length?yi(e,z(t,2),jo):c},d.mean=function Qg(e){return pe(e,ze)},d.meanBy=function Kg(e,t){return pe(e,z(t,2))},d.min=function Xg(e){return e&&e.length?yi(e,ze,rs):c},d.minBy=function $g(e,t){return e&&e.length?yi(e,z(t,2),rs):c},d.stubArray=Zs,d.stubFalse=Bs,d.stubObject=function Dg(){return{}},d.stubString=function Zg(){return""},d.stubTrue=function Bg(){return!0},d.multiply=Vg,d.nth=function dd(e,t){return e&&e.length?ha(e,te(t)):c},d.noConflict=function Eg(){return Ae._===this&&(Ae._=jc),this},d.noop=Ds,d.now=Fi,d.pad=function jh(e,t,r){e=le(e);var o=(t=te(t))?En(e):0;if(!t||o>=t)return e;var a=(t-o)/2;return Mi(gi(a),r)+e+Mi(hi(a),r)},d.padEnd=function eg(e,t,r){e=le(e);var o=(t=te(t))?En(e):0;return t&&o<t?e+Mi(t-o,r):e},d.padStart=function tg(e,t,r){e=le(e);var o=(t=te(t))?En(e):0;return t&&o<t?Mi(t-o,r)+e:e},d.parseInt=function ng(e,t,r){return r||null==t?t=0:t&&(t=+t),cu(le(e).replace(Mt,""),t||0)},d.random=function Jh(e,t,r){if(r&&"boolean"!=typeof r&&Be(e,t,r)&&(t=r=c),r===c&&("boolean"==typeof t?(r=t,t=c):"boolean"==typeof e&&(r=e,e=c)),e===c&&t===c?(e=0,t=1):(e=Dt(e),t===c?(t=e,e=0):t=Dt(t)),e>t){var o=e;e=t,t=o}if(r||e%1||t%1){var a=Xs();return Fe(e+a*(t-e+Bo("1e-"+((a+"").length-1))),t)}return os(e,t)},d.reduce=function pf(e,t,r){var o=j(e)?u:Xe,a=arguments.length<3;return o(e,z(t,4),r,a,qt)},d.reduceRight=function _f(e,t,r){var o=j(e)?_:Xe,a=arguments.length<3;return o(e,z(t,4),r,a,ra)},d.repeat=function rg(e,t,r){return t=(r?Be(e,t,r):t===c)?1:te(t),ss(le(e),t)},d.replace=function ig(){var e=arguments,t=le(e[0]);return e.length<3?t:t.replace(e[1],e[2])},d.result=function Lh(e,t,r){var o=-1,a=(t=Ht(t,e)).length;for(a||(a=1,e=c);++o<a;){var f=null==e?c:e[Ct(t[o])];f===c&&(o=a,f=r),e=Lt(f)?f.call(e):f}return e},d.round=jg,d.runInContext=x,d.sample=function vf(e){return(j(e)?js:ul)(e)},d.size=function bf(e){if(null==e)return 0;if(Je(e))return Bi(e)?En(e):e.length;var t=Le(e);return t==Qe||t==Ke?e.size:ns(e).length},d.snakeCase=og,d.some=function wf(e,t,r){var o=j(e)?i:hl;return r&&Be(e,t,r)&&(t=c),o(e,z(t,3))},d.sortedIndex=function vd(e,t){return wi(e,t)},d.sortedIndexBy=function yd(e,t,r){return as(e,t,z(r,2))},d.sortedIndexOf=function xd(e,t){var r=null==e?0:e.length;if(r){var o=wi(e,t);if(o<r&&_t(e[o],t))return o}return-1},d.sortedLastIndex=function bd(e,t){return wi(e,t,!0)},d.sortedLastIndexBy=function wd(e,t,r){return as(e,t,z(r,2),!0)},d.sortedLastIndexOf=function Sd(e,t){if(null!=e&&e.length){var o=wi(e,t,!0)-1;if(_t(e[o],t))return o}return-1},d.startCase=ag,d.startsWith=function cg(e,t,r){return e=le(e),r=null==r?0:on(te(r),0,e.length),t=Ve(t),e.slice(r,r+t.length)==t},d.subtract=ep,d.sum=function tp(e){return e&&e.length?Et(e,ze):0},d.sumBy=function np(e,t){return e&&e.length?Et(e,z(t,2)):0},d.template=function ug(e,t,r){var o=d.templateSettings;r&&Be(e,t,r)&&(t=c),e=le(e),t=Ni({},t,o,Ba);var m,C,a=Ni({},t.imports,o.imports,Ba),f=Pe(a),p=Ho(a,f),I=0,P=t.interpolate||Sn,R="__p += '",U=Jo((t.escape||Sn).source+"|"+P.source+"|"+(P===yn?oo:Sn).source+"|"+(t.evaluate||Sn).source+"|$","g"),J="//# sourceURL="+(de.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ro+"]")+"\n";e.replace(U,function(X,oe,ae,et,Ne,tt){return ae||(ae=et),R+=e.slice(I,tt).replace(fo,Zc),oe&&(m=!0,R+="' +\n__e("+oe+") +\n'"),Ne&&(C=!0,R+="';\n"+Ne+";\n__p += '"),ae&&(R+="' +\n((__t = ("+ae+")) == null ? '' : __t) +\n'"),I=tt+X.length,X}),R+="';\n";var K=de.call(t,"variable")&&t.variable;if(K){if(Xn.test(K))throw new V("Invalid `variable` option passed into `_.template`")}else R="with (obj) {\n"+R+"\n}\n";R=(C?R.replace(Xi,""):R).replace($i,"$1").replace(Yn,"$1;"),R="function("+(K||"obj")+") {\n"+(K?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(m?", __e = _.escape":"")+(C?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+R+"return __p\n}";var ne=kc(function(){return ce(f,J+"return "+R).apply(c,p)});if(ne.source=R,Es(ne))throw ne;return ne},d.times=function Ng(e,t){if((e=te(e))<1||e>vt)return[];var r=nt,o=Fe(e,nt);t=z(t),e-=nt;for(var a=ot(o,t);++r<e;)t(r);return a},d.toFinite=Dt,d.toInteger=te,d.toLength=xc,d.toLower=function lg(e){return le(e).toLowerCase()},d.toNumber=dt,d.toSafeInteger=function lh(e){return e?on(te(e),-vt,vt):0===e?e:0},d.toString=le,d.toUpper=function dg(e){return le(e).toUpperCase()},d.trim=function fg(e,t,r){if((e=le(e))&&(r||t===c))return Ns(e);if(!e||!(t=Ve(t)))return e;var o=gt(e),a=gt(t);return Wt(o,Us(o,a),qs(o,a)+1).join("")},d.trimEnd=function hg(e,t,r){if((e=le(e))&&(r||t===c))return e.slice(0,Hs(e)+1);if(!e||!(t=Ve(t)))return e;var o=gt(e);return Wt(o,0,qs(o,gt(t))+1).join("")},d.trimStart=function gg(e,t,r){if((e=le(e))&&(r||t===c))return e.replace(Mt,"");if(!e||!(t=Ve(t)))return e;var o=gt(e);return Wt(o,Us(o,gt(t))).join("")},d.truncate=function pg(e,t){var r=30,o="...";if(be(t)){var a="separator"in t?t.separator:a;r="length"in t?te(t.length):r,o="omission"in t?Ve(t.omission):o}var f=(e=le(e)).length;if(Mn(e)){var p=gt(e);f=p.length}if(r>=f)return e;var m=r-En(o);if(m<1)return o;var C=p?Wt(p,0,m).join(""):e.slice(0,m);if(a===c)return C+o;if(p&&(m+=C.length-m),Os(a)){if(e.slice(m).search(a)){var I,P=C;for(a.global||(a=Jo(a.source,le(Tr.exec(a))+"g")),a.lastIndex=0;I=a.exec(P);)var R=I.index;C=C.slice(0,R===c?m:R)}}else if(e.indexOf(Ve(a),m)!=m){var U=C.lastIndexOf(a);U>-1&&(C=C.slice(0,U))}return C+o},d.unescape=function _g(e){return(e=le(e))&&Vi.test(e)?e.replace(zn,Wc):e},d.uniqueId=function qg(e){var t=++$c;return le(e)+t},d.upperCase=mg,d.upperFirst=Ps,d.each=sc,d.eachRight=ac,d.first=nc,Ls(d,function(){var e={};return wt(d,function(t,r){de.call(d.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),d.VERSION="4.17.21",He(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){d[e].placeholder=d}),He(["drop","take"],function(e,t){se.prototype[e]=function(r){r=r===c?1:Oe(te(r),0);var o=this.__filtered__&&!t?new se(this):this.clone();return o.__filtered__?o.__takeCount__=Fe(r,o.__takeCount__):o.__views__.push({size:Fe(r,nt),type:e+(o.__dir__<0?"Right":"")}),o},se.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),He(["filter","map","takeWhile"],function(e,t){var r=t+1,o=1==r||3==r;se.prototype[e]=function(a){var f=this.clone();return f.__iteratees__.push({iteratee:z(a,3),type:r}),f.__filtered__=f.__filtered__||o,f}}),He(["head","last"],function(e,t){var r="take"+(t?"Right":"");se.prototype[e]=function(){return this[r](1).value()[0]}}),He(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");se.prototype[e]=function(){return this.__filtered__?new se(this):this[r](1)}}),se.prototype.compact=function(){return this.filter(ze)},se.prototype.find=function(e){return this.filter(e).head()},se.prototype.findLast=function(e){return this.reverse().find(e)},se.prototype.invokeMap=re(function(e,t){return"function"==typeof e?new se(this):this.map(function(r){return fr(r,e,t)})}),se.prototype.reject=function(e){return this.filter(Di(z(e)))},se.prototype.slice=function(e,t){e=te(e);var r=this;return r.__filtered__&&(e>0||t<0)?new se(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==c&&(r=(t=te(t))<0?r.dropRight(-t):r.take(t-e)),r)},se.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},se.prototype.toArray=function(){return this.take(nt)},wt(se.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),a=d[o?"take"+("last"==t?"Right":""):t],f=o||/^find/.test(t);!a||(d.prototype[t]=function(){var p=this.__wrapped__,m=o?[1]:arguments,C=p instanceof se,I=m[0],P=C||j(p),R=function(oe){var ae=a.apply(d,bt([oe],m));return o&&U?ae[0]:ae};P&&r&&"function"==typeof I&&1!=I.length&&(C=P=!1);var U=this.__chain__,J=!!this.__actions__.length,K=f&&!U,ne=C&&!J;if(!f&&P){p=ne?p:new se(this);var X=e.apply(p,m);return X.__actions__.push({func:Pi,args:[R],thisArg:c}),new at(X,U)}return K&&ne?e.apply(this,m):(X=this.thru(R),K?o?X.value()[0]:X.value():X)})}),He(["pop","push","shift","sort","splice","unshift"],function(e){var t=ii[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);d.prototype[e]=function(){var a=arguments;if(o&&!this.__chain__){var f=this.value();return t.apply(j(f)?f:[],a)}return this[r](function(p){return t.apply(j(p)?p:[],a)})}}),wt(se.prototype,function(e,t){var r=d[t];if(r){var o=r.name+"";de.call(In,o)||(In[o]=[]),In[o].push({name:t,func:r})}}),In[Ti(c,2).name]=[{name:"wrapper",func:c}],se.prototype.clone=function pu(){var e=new se(this.__wrapped__);return e.__actions__=We(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=We(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=We(this.__views__),e},se.prototype.reverse=function _u(){if(this.__filtered__){var e=new se(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},se.prototype.value=function mu(){var e=this.__wrapped__.value(),t=this.__dir__,r=j(e),o=t<0,a=r?e.length:0,f=function Ol(e,t,r){for(var o=-1,a=r.length;++o<a;){var f=r[o],p=f.size;switch(f.type){case"drop":e+=p;break;case"dropRight":t-=p;break;case"take":t=Fe(t,e+p);break;case"takeRight":e=Oe(e,t-p)}}return{start:e,end:t}}(0,a,this.__views__),p=f.start,m=f.end,C=m-p,I=o?m:p-1,P=this.__iteratees__,R=P.length,U=0,J=Fe(C,this.__takeCount__);if(!r||!o&&a==C&&J==C)return ba(e,this.__actions__);var K=[];e:for(;C--&&U<J;){for(var ne=-1,X=e[I+=t];++ne<R;){var oe=P[ne],et=oe.type,Ne=(0,oe.iteratee)(X);if(2==et)X=Ne;else if(!Ne){if(1==et)continue e;break e}}K[U++]=X}return K},d.prototype.at=Yd,d.prototype.chain=function zd(){return oc(this)},d.prototype.commit=function Qd(){return new at(this.value(),this.__chain__)},d.prototype.next=function Kd(){this.__values__===c&&(this.__values__=yc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?c:this.__values__[this.__index__++]}},d.prototype.plant=function $d(e){for(var t,r=this;r instanceof mi;){var o=Va(r);o.__index__=0,o.__values__=c,t?a.__wrapped__=o:t=o;var a=o;r=r.__wrapped__}return a.__wrapped__=e,t},d.prototype.reverse=function Vd(){var e=this.__wrapped__;if(e instanceof se){var t=e;return this.__actions__.length&&(t=new se(this)),(t=t.reverse()).__actions__.push({func:Pi,args:[Cs],thisArg:c}),new at(t,this.__chain__)}return this.thru(Cs)},d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=function jd(){return ba(this.__wrapped__,this.__actions__)},d.prototype.first=d.prototype.head,or&&(d.prototype[or]=function Xd(){return this}),d}();Ae._=ri,(F=function(){return ri}.call(Y,E,Y,Ue))!==c&&(Ue.exports=F)}.call(this)},2754:(Ue,Y,E)=>{"use strict";Y.TD=void 0;var c=E(4354);Object.defineProperty(Y,"TD",{enumerable:!0,get:function(){return c.requestMediaPermissions}})},4354:function(Ue,Y,E){"use strict";var F=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Y,"__esModule",{value:!0}),Y.requestVideoPermissions=Y.requestAudioPermissions=Y.requestMediaPermissions=Y.MediaPermissionsErrorType=void 0;const c=F(E(7230));var y,h;(h=y=Y.MediaPermissionsErrorType||(Y.MediaPermissionsErrorType={})).SystemPermissionDenied="SystemPermissionDenied",h.UserPermissionDenied="UserPermissionDenied",h.CouldNotStartVideoSource="CouldNotStartVideoSource",h.Generic="Generic",Y.requestMediaPermissions=h=>new Promise((g,Z)=>{navigator.mediaDevices.getUserMedia(h??{audio:!0,video:!0}).then(T=>{T.getTracks().forEach(v=>{v.stop()}),g(!0)}).catch(T=>{const A=c.default.getParser(window.navigator.userAgent).getBrowserName(),S=T.name,b=T.message;let D=y.Generic;"Chrome"===A?"NotAllowedError"===S?"Permission denied by system"===b?D=y.SystemPermissionDenied:"Permission denied"===b&&(D=y.UserPermissionDenied):"NotReadableError"===S&&(D=y.CouldNotStartVideoSource):"Safari"===A?"NotAllowedError"===S&&(D=y.UserPermissionDenied):"Microsoft Edge"===A?"NotAllowedError"===S?D=y.UserPermissionDenied:"NotReadableError"===S&&(D=y.CouldNotStartVideoSource):"Firefox"===A&&("NotFoundError"===S||"NotReadableError"===S?D=y.SystemPermissionDenied:"NotAllowedError"===S?D=y.UserPermissionDenied:"AbortError"===S&&(D=y.CouldNotStartVideoSource)),Z({type:D,name:T.name,message:T.message})})}),Y.requestAudioPermissions=()=>(0,Y.requestMediaPermissions)({audio:!0,video:!1}),Y.requestVideoPermissions=()=>(0,Y.requestMediaPermissions)({audio:!1,video:!0})},5439:Ue=>{window,Ue.exports=function(Y){var E={};function F(c){if(E[c])return E[c].exports;var y=E[c]={i:c,l:!1,exports:{}};return Y[c].call(y.exports,y,y.exports,F),y.l=!0,y.exports}return F.m=Y,F.c=E,F.d=function(c,y,M){F.o(c,y)||Object.defineProperty(c,y,{enumerable:!0,get:M})},F.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},F.t=function(c,y){if(1&y&&(c=F(c)),8&y||4&y&&"object"==typeof c&&c&&c.__esModule)return c;var M=Object.create(null);if(F.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:c}),2&y&&"string"!=typeof c)for(var L in c)F.d(M,L,function(n){return c[n]}.bind(null,L));return M},F.n=function(c){var y=c&&c.__esModule?function(){return c.default}:function(){return c};return F.d(y,"a",y),y},F.o=function(c,y){return Object.prototype.hasOwnProperty.call(c,y)},F.p="/dist/",F(F.s=1)}([function(Y,E,F){"use strict";var c=this&&this.__awaiter||function(M,L,n,h){return new(n||(n=Promise))(function(g,Z){function T(S){try{A(h.next(S))}catch(b){Z(b)}}function v(S){try{A(h.throw(S))}catch(b){Z(b)}}function A(S){var b;S.done?g(S.value):(b=S.value,b instanceof n?b:new n(function(D){D(b)})).then(T,v)}A((h=h.apply(M,L||[])).next())})},y=this&&this.__generator||function(M,L){var n,h,g,Z,T={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return Z={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(Z[Symbol.iterator]=function(){return this}),Z;function v(A){return function(S){return function(b){if(n)throw new TypeError("Generator is already executing.");for(;Z&&(Z=0,b[0]&&(T=0)),T;)try{if(n=1,h&&(g=2&b[0]?h.return:b[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,b[1])).done)return g;switch(h=0,g&&(b=[2&b[0],g.value]),b[0]){case 0:case 1:g=b;break;case 4:return T.label++,{value:b[1],done:!1};case 5:T.label++,h=b[1],b=[0];continue;case 7:b=T.ops.pop(),T.trys.pop();continue;default:if(!((g=(g=T.trys).length>0&&g[g.length-1])||6!==b[0]&&2!==b[0])){T=0;continue}if(3===b[0]&&(!g||b[1]>g[0]&&b[1]<g[3])){T.label=b[1];break}if(6===b[0]&&T.label<g[1]){T.label=g[1],g=b;break}if(g&&T.label<g[2]){T.label=g[2],T.ops.push(b);break}g[2]&&T.ops.pop(),T.trys.pop();continue}b=L.call(M,T)}catch(D){b=[6,D],h=0}finally{n=g=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([A,S])}}};Object.defineProperty(E,"__esModule",{value:!0}),E.file2b64=void 0,E.file2b64=function(M){return c(this,void 0,void 0,function(){var L,n;return y(this,function(h){return L=new FileReader,n=new Promise(function(g,Z){L.addEventListener("load",function(){var T,v=null===(T=L.result)||void 0===T?void 0:T.toString();v?g(v):Z("could not convert file to base64")},!1)}),L.readAsDataURL(M),[2,n]})})}},function(Y,E,F){"use strict";var c=this&&this.__awaiter||function(T,v,A,S){return new(A||(A=Promise))(function(b,D){function B(q){try{ee(S.next(q))}catch(W){D(W)}}function $(q){try{ee(S.throw(q))}catch(W){D(W)}}function ee(q){var W;q.done?b(q.value):(W=q.value,W instanceof A?W:new A(function(ue){ue(W)})).then(B,$)}ee((S=S.apply(T,v||[])).next())})},y=this&&this.__generator||function(T,v){var A,S,b,D,B={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return D={next:$(0),throw:$(1),return:$(2)},"function"==typeof Symbol&&(D[Symbol.iterator]=function(){return this}),D;function $(ee){return function(q){return function(W){if(A)throw new TypeError("Generator is already executing.");for(;D&&(D=0,W[0]&&(B=0)),B;)try{if(A=1,S&&(b=2&W[0]?S.return:W[0]?S.throw||((b=S.return)&&b.call(S),0):S.next)&&!(b=b.call(S,W[1])).done)return b;switch(S=0,b&&(W=[2&W[0],b.value]),W[0]){case 0:case 1:b=W;break;case 4:return B.label++,{value:W[1],done:!1};case 5:B.label++,S=W[1],W=[0];continue;case 7:W=B.ops.pop(),B.trys.pop();continue;default:if(!((b=(b=B.trys).length>0&&b[b.length-1])||6!==W[0]&&2!==W[0])){B=0;continue}if(3===W[0]&&(!b||W[1]>b[0]&&W[1]<b[3])){B.label=W[1];break}if(6===W[0]&&B.label<b[1]){B.label=b[1],b=W;break}if(b&&B.label<b[2]){B.label=b[2],B.ops.push(W);break}b[2]&&B.ops.pop(),B.trys.pop();continue}W=v.call(T,B)}catch(ue){W=[6,ue],S=0}finally{A=b=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([ee,q])}}};Object.defineProperty(E,"__esModule",{value:!0}),E.imageCompressor=void 0;var M=F(2),L=F(3),n=F(0),h=F(4),g=F(5),Z=function(){function T(v,A){var S=this;this.quill=v,this.options=A||{};var b=!!A.debug;this.Logger=new g.ConsoleLogger(b,!!A.suppressErrorLogging),(0,L.warnAboutOptions)(A,this.Logger),this.imageDrop=new M.ImageDrop(v,function($){return c(S,void 0,void 0,function(){var ee;return y(this,function(q){switch(q.label){case 0:return this.Logger.log("onImageDrop",{dataUrl:$}),[4,this.downscaleImageFromUrl($)];case 1:return ee=q.sent(),this.insertToEditor(ee,T.b64toBlob(ee)),[2]}})})},this.Logger),this.Logger.log("fileChanged",{options:A,quill:v,debug:b});var B=this.quill.getModule("toolbar");B?B.addHandler("image",function(){return S.selectLocalImage()}):this.Logger.error("Quill toolbar module not found! need { toolbar: // options } in Quill.modules for image icon to sit in")}return T.b64toBlob=function(v){for(var A=atob(v.split(",")[1]),S=v.slice(5).split(";")[0],b=new ArrayBuffer(A.length),D=new Uint8Array(b),B=0;B<A.length;B++)D[B]=A.charCodeAt(B);return new Blob([b],{type:S})},T.prototype.selectLocalImage=function(v){var A=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=function(){return A.fileChanged().then(function(){return v&&v()})},document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){A.fileHolder&&document.body.removeChild(A.fileHolder)})},T.prototype.fileChanged=function(v){var A;return c(this,void 0,void 0,function(){var S,b,D,B;return y(this,function($){switch($.label){case 0:return(S=v||(null===(A=this.fileHolder)||void 0===A?void 0:A.files))&&S.length?(this.Logger.log("fileChanged",{file:b=S[0]}),b?[4,(0,n.file2b64)(b)]:[2]):[2];case 1:return D=$.sent(),[4,this.downscaleImageFromUrl(D)];case 2:return B=$.sent(),this.insertToEditor(B,T.b64toBlob(B)),[2]}})})},T.prototype.downscaleImageFromUrl=function(v){return c(this,void 0,void 0,function(){var A;return y(this,function(S){switch(S.label){case 0:return[4,(0,h.downscaleImage)(this.Logger,v,this.options.maxWidth,this.options.maxHeight,this.options.imageType,this.options.keepImageTypes,this.options.ignoreImageTypes,this.options.quality)];case 1:return A=S.sent(),this.Logger.log("downscaleImageFromUrl",{dataUrl:v,dataUrlCompressed:A}),[2,A]}})})},T.prototype.insertToEditor=function(v,A){if(this.options.insertIntoEditor)this.options.insertIntoEditor(v,A);else{this.Logger.log("insertToEditor",{url:v}),this.range=this.quill.getSelection();var S=this.range;if(!S)return;this.logFileSize(v),this.quill.insertEmbed(S.index,"image","".concat(v),"user"),S.index++,this.quill.setSelection(S,"api")}},T.prototype.logFileSize=function(v){var A=(Math.round(3*(v.length-22)/4)/1024).toFixed(0);this.Logger.log("estimated img size: "+A+" kb")},T}();E.imageCompressor=Z,window.imageCompressor=Z,E.default=Z},function(Y,E,F){"use strict";var c=this&&this.__awaiter||function(Z,T,v,A){return new(v||(v=Promise))(function(S,b){function D(ee){try{$(A.next(ee))}catch(q){b(q)}}function B(ee){try{$(A.throw(ee))}catch(q){b(q)}}function $(ee){var q;ee.done?S(ee.value):(q=ee.value,q instanceof v?q:new v(function(W){W(q)})).then(D,B)}$((A=A.apply(Z,T||[])).next())})},y=this&&this.__generator||function(Z,T){var v,A,S,b,D={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return b={next:B(0),throw:B(1),return:B(2)},"function"==typeof Symbol&&(b[Symbol.iterator]=function(){return this}),b;function B($){return function(ee){return function(q){if(v)throw new TypeError("Generator is already executing.");for(;b&&(b=0,q[0]&&(D=0)),D;)try{if(v=1,A&&(S=2&q[0]?A.return:q[0]?A.throw||((S=A.return)&&S.call(A),0):A.next)&&!(S=S.call(A,q[1])).done)return S;switch(A=0,S&&(q=[2&q[0],S.value]),q[0]){case 0:case 1:S=q;break;case 4:return D.label++,{value:q[1],done:!1};case 5:D.label++,A=q[1],q=[0];continue;case 7:q=D.ops.pop(),D.trys.pop();continue;default:if(!((S=(S=D.trys).length>0&&S[S.length-1])||6!==q[0]&&2!==q[0])){D=0;continue}if(3===q[0]&&(!S||q[1]>S[0]&&q[1]<S[3])){D.label=q[1];break}if(6===q[0]&&D.label<S[1]){D.label=S[1],S=q;break}if(S&&D.label<S[2]){D.label=S[2],D.ops.push(q);break}S[2]&&D.ops.pop(),D.trys.pop();continue}q=T.call(Z,D)}catch(W){q=[6,W],A=0}finally{v=S=0}if(5&q[0])throw q[1];return{value:q[0]?q[1]:void 0,done:!0}}([$,ee])}}};Object.defineProperty(E,"__esModule",{value:!0}),E.ImageDrop=void 0;var M=F(0),L=function(){function Z(T,v,A){var S=this;this.quill=T,this.onNewDataUrl=v,this.logger=A,this.quill.root.addEventListener("drop",function(b){return S.handleDrop(b)},!1),this.quill.root.addEventListener("paste",function(b){return S.handlePaste(b)},!1)}return Z.prototype.handleDrop=function(T){return c(this,void 0,void 0,function(){var v,A,S,b,D,B,$;return y(this,function(ee){switch(ee.label){case 0:return T.preventDefault(),document.caretRangeFromPoint&&(v=document.getSelection(),A=document.caretRangeFromPoint(T.clientX,T.clientY),v&&A&&v.setBaseAndExtent(A.startContainer,A.startOffset,A.startContainer,A.startOffset)),[4,h(T)];case 1:return S=ee.sent(),b=Array.from(S||[]).filter(function(q){return g(q.type)}),(D=b?.[0])?[4,(0,M.file2b64)(D)]:[3,3];case 2:return $=ee.sent(),this.logger.log("handleNewImageFiles",{evt:T,files:S,filesFiltered:b,firstImage:D,base64ImageSrc:$}),this.onNewDataUrl($),[2];case 3:return[4,n(T)];case 4:return(B=ee.sent())?[4,(0,M.file2b64)(B)]:[3,6];case 5:return $=ee.sent(),this.logger.log("handleNewImageFiles",{evt:T,blob:B,base64ImageSrc:$}),this.onNewDataUrl($),[2];case 6:return[2]}})})},Z.prototype.handlePaste=function(T){var v,A;return c(this,void 0,void 0,function(){var S,b,D,B;return y(this,function($){switch($.label){case 0:return S=Array.from((null===(v=T?.clipboardData)||void 0===v?void 0:v.items)||[]),this.logger.log("handlePaste",{files:S,evt:T}),b=S.filter(function(ee){return g(ee.type)}),this.logger.log("handlePaste",{images:b,evt:T}),b.length?b.filter(function(ee){return"text/html"!==ee.type}).length?(T.preventDefault(),(D=null===(A=b.pop())||void 0===A?void 0:A.getAsFile())?[4,(0,M.file2b64)(D)]:[2]):(this.logger.log("handlePaste also detected html"),[2]):[2];case 1:return B=$.sent(),this.logger.log("handleNewImageFiles",{base64ImageSrc:B}),this.onNewDataUrl(B),[2]}})})},Z}();function n(Z){var T;return c(this,void 0,void 0,function(){var v;return y(this,function(A){switch(A.label){case 0:return(v=null===(T=Z.dataTransfer)||void 0===T?void 0:T.getData("URL"))?[4,fetch(v)]:[3,3];case 1:return[4,A.sent().blob()];case 2:return[2,A.sent()];case 3:return[2]}})})}function h(Z){var T;return c(this,void 0,void 0,function(){return y(this,function(v){return[2,null===(T=Z?.dataTransfer)||void 0===T?void 0:T.files]})})}function g(Z){return!!Z.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)/i)}E.ImageDrop=L},function(Y,E,F){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.warnAboutOptions=void 0,E.warnAboutOptions=function(c,y){c.maxWidth=c.maxWidth||1e3,c.maxHeight=c.maxHeight||1e3,c.maxWidth&&"number"!=typeof c.maxWidth&&(y.warn("[config error] 'maxWidth' is required to be a \"number\" (in pixels), \nreceived: ".concat(c.maxWidth,"\n-> using default 1000")),c.maxWidth=1e3),c.maxHeight&&"number"!=typeof c.maxHeight&&(y.warn("[config error] 'maxHeight' is required to be a \"number\" (in pixels), \nreceived: ".concat(c.maxHeight,"\n-> using default 1000")),c.maxHeight=1e3),c.quality&&"number"!=typeof c.quality&&(y.warn("quill.imageCompressor: [config error] 'quality' is required to be a \"number\", \nreceived: ".concat(c.quality,"\n-> using default 0.7")),c.quality=.7),!c.imageType||"string"==typeof c.imageType&&c.imageType.startsWith("image/")||(y.warn('quill.imageCompressor: [config error] \'imageType\' is required be in the form of "image/png" or "image/jpeg" etc ..., \nreceived: '.concat(c.imageType,"\n-> using default image/jpeg")),c.imageType="image/jpeg"),c.keepImageTypes||(c.keepImageTypes=[]),c.keepImageTypes&&!Array.isArray(c.keepImageTypes)&&(y.warn("quill.imageCompressor: [config error] 'keepImageTypes' is required to be a \"array\", received: ".concat(c.keepImageTypes," -> using default []")),c.keepImageTypes=[]),c.ignoreImageTypes||(c.ignoreImageTypes=[]),c.ignoreImageTypes&&!Array.isArray(c.ignoreImageTypes)&&(y.warn("quill.imageCompressor: [config error] 'ignoreImageTypes' is required to be a \"array\", received: ".concat(c.ignoreImageTypes," -> using default []")),c.ignoreImageTypes=[]),c.insertIntoEditor&&"function"!=typeof c.insertIntoEditor&&(y.warn("quill.imageCompressor: [config error] 'insertIntoEditor' is required to be a \"function\", received: ".concat(c.insertIntoEditor," -> using default undefined")),c.insertIntoEditor=void 0)}},function(Y,E,F){"use strict";var c=this&&this.__awaiter||function(M,L,n,h){return new(n||(n=Promise))(function(g,Z){function T(S){try{A(h.next(S))}catch(b){Z(b)}}function v(S){try{A(h.throw(S))}catch(b){Z(b)}}function A(S){var b;S.done?g(S.value):(b=S.value,b instanceof n?b:new n(function(D){D(b)})).then(T,v)}A((h=h.apply(M,L||[])).next())})},y=this&&this.__generator||function(M,L){var n,h,g,Z,T={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return Z={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(Z[Symbol.iterator]=function(){return this}),Z;function v(A){return function(S){return function(b){if(n)throw new TypeError("Generator is already executing.");for(;Z&&(Z=0,b[0]&&(T=0)),T;)try{if(n=1,h&&(g=2&b[0]?h.return:b[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,b[1])).done)return g;switch(h=0,g&&(b=[2&b[0],g.value]),b[0]){case 0:case 1:g=b;break;case 4:return T.label++,{value:b[1],done:!1};case 5:T.label++,h=b[1],b=[0];continue;case 7:b=T.ops.pop(),T.trys.pop();continue;default:if(!((g=(g=T.trys).length>0&&g[g.length-1])||6!==b[0]&&2!==b[0])){T=0;continue}if(3===b[0]&&(!g||b[1]>g[0]&&b[1]<g[3])){T.label=b[1];break}if(6===b[0]&&T.label<g[1]){T.label=g[1],g=b;break}if(g&&T.label<g[2]){T.label=g[2],T.ops.push(b);break}g[2]&&T.ops.pop(),T.trys.pop();continue}b=L.call(M,T)}catch(D){b=[6,D],h=0}finally{n=g=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([A,S])}}};Object.defineProperty(E,"__esModule",{value:!0}),E.downscaleImage=void 0,E.downscaleImage=function(M,L,n,h,g,Z,T,v){return c(this,void 0,void 0,function(){var A,S,b,D,B,$,ee,q;return y(this,function(W){switch(W.label){case 0:return A=L.split(";")[0].split(":")[1],g=g||"image/jpeg",v=v||.7,(S=new Image).src=L,[4,new Promise(function(ue){S.onload=function(){ue()}})];case 1:return W.sent(),b=function(ue,we,xe,me){if(xe&&me&&ue<=xe&&we<=me)return[ue,we];if(xe&&ue>xe){var qe=xe,ke=Math.floor(we/ue*qe);if(me&&ke>me){var ln=me;return[Math.floor(ue/we*ln),ln]}return[qe,ke]}return me&&we>me?(ke=me,[qe=Math.floor(ue/we*ke),ke]):[we,ue]}(S.width,S.height,n,h),D=b[0],B=b[1],($=document.createElement("canvas")).width=D,$.height=B,ee=$.getContext("2d"),"image/jpeg"===g&&(ee.fillStyle="#FFFFFF",ee.fillRect(0,0,S.width,S.height)),T?.includes(A)?[2,L]:(Z?.includes(A)&&(g=A),ee.drawImage(S,0,0,D,B),q=$.toDataURL(g,v),M.log("downscaling image...",{args:{dataUrl:L,maxWidth:n,maxHeight:h,imageType:g,ignoreImageTypes:T,keepImageTypes:Z,imageQuality:v},newHeight:B,newWidth:D}),[2,q])}})})}},function(Y,E,F){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.ConsoleLogger=void 0;var c=function(){function y(M,L){this.debug=M,this.suppressErrorLogging=L}return y.prototype.prefixString=function(){return"</> quill-image-compress: "},Object.defineProperty(y.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"error",{get:function(){return this.suppressErrorLogging?function(){}:console.error.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"warn",{get:function(){return this.suppressErrorLogging?function(){}:console.warn.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),y}();E.ConsoleLogger=c}])}}]);
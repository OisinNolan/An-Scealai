(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[999],{5999:(p,h,n)=>{"use strict";n.r(h),n.d(h,{StudentModule:()=>pn});var a=n(6895),o=n(1390),i=n(970),c=n(4633),f=n(8977),t=n(4650),r=n(5412);let s=(()=>{class l{canDeactivate(e,d,u){return!!e.storySaved||(e.showModal(),e.modalChoice)}}return l.\u0275fac=function(e){return new(e||l)},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),y=(()=>{class l{constructor(e,d){this.dialog=e,this.ts=d}canDeactivate(e){if(e.recordingSaved)return!0;let d;return d=this.dialog.open(c.p,{data:{title:this.ts.l.save_changes_made_to_this_recording,type:"",confirmText:this.ts.l.save,cancelText:this.ts.l.cancel},width:"30vh"}),d.afterClosed().subscribe(u=>{if(d=void 0,u)return e.saveRecordings(),!0}),!1}}return l.\u0275fac=function(e){return new(e||l)(t.LFG(r.uw),t.LFG(f.D))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),g=(()=>{class l{canDeactivate(e,d,u){if(e.chosenSections)for(const w of e.chosenSections)w.stop();return!0}}return l.\u0275fac=function(e){return new(e||l)},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var v=n(5861),b=n(4412);class _ extends b.i{constructor(){super(...arguments),this.createdWithPrompts=!1}}var m=n(1765),C=n(1745),M=n(1512),A=n(6469),k=n(4687),S=n(1245),T=n(25),F=n(5042),N=n(530),j=n(8443);let R=(()=>{class l{transform(e,d){return e?d?(d=d.toLocaleLowerCase(),e.filter(u=>u instanceof j.n?u.username.toLocaleLowerCase().includes(d):u instanceof _?u.title.toLocaleLowerCase().includes(d)||u.text.toLocaleLowerCase().includes(d):void 0)):e:[]}}return l.\u0275fac=function(e){return new(e||l)},l.\u0275pipe=t.Yjl({name:"appFilter",type:l,pure:!0}),l})();var Z=n(3905),E=n(4006),Y=n(9121);function P(l,x){1&l&&(t.TgZ(0,"div",17),t._UZ(1,"grid-spinner"),t.qZA())}function q(l,x){if(1&l&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&l){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.click_new_story," ")}}function ot(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"input",23),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().$implicit,w=t.oxw();return t.KtG(w.toggleDelete(u._id))}),t.qZA()}}function gt(l,x){if(1&l&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&l){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.lastUpdated,"M/d/yy, h:mm a"))}}function wt(l,x){if(1&l&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&l){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.lastUpdated,"d/M/yy, h:mm a"))}}const Ct=function(l){return["../dashboard",l]};function St(l,x){if(1&l&&(t.TgZ(0,"div")(1,"div",18)(2,"div",19),t.YNc(3,ot,1,0,"input",20),t.TgZ(4,"div",21),t._uU(5),t.qZA()(),t.YNc(6,gt,3,4,"div",22),t.YNc(7,wt,3,4,"div",22),t.qZA(),t._UZ(8,"hr"),t.qZA()),2&l){const e=x.$implicit,d=t.oxw();t.xp6(3),t.Q6J("ngIf",d.deleteMode),t.xp6(1),t.Q6J("searchedWord",d.searchText)("content",e.title)("classToApply","font-weight-bold")("setTitle","true")("routerLink",t.VKq(9,Ct,e._id)),t.xp6(1),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf",d.isFromAmerica),t.xp6(1),t.Q6J("ngIf",!d.isFromAmerica)}}function ht(l,x){if(1&l&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&l){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.unreadMessages," ")}}function Mt(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.goToMessages())}),t._uU(1),t.YNc(2,ht,2,1,"span",26),t.qZA()}if(2&l){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.messages," "),t.xp6(1),t.Q6J("ngIf",e.unreadMessages>0)}}function Tt(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.goToStats())}),t._uU(1),t.qZA()}if(2&l){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.stats," ")}}let At=(()=>{class l{constructor(e,d,u,w,O,H,U,K,B,et,ct){this.storyService=e,this.auth=d,this.engagement=u,this.ts=w,this.router=O,this.messageService=H,this.profileService=U,this.classroomService=K,this.notificationService=B,this.recordingService=et,this.dialog=ct,this.stories=[],this.toBeDeleted=[],this.userId="",this.messagesForNotifications=[],this.unreadMessages=0,this.isFromAmerica=!1,this.isEnrolled=!1,this.searchText="",this.storiesLoaded=!1}ngOnInit(){var e=this;return(0,v.Z)(function*(){const d=e.auth.getUserDetails();d?(e.stories=(yield(0,Z.z)(e.storyService.getStoriesForLoggedInUser())).map(u=>(new _).fromJSON(u)),e.stories.sort((u,w)=>u.date>w.date?-1:1),e.storiesLoaded=!0,e.userId=d._id,e.deleteMode=!1,e.toBeDeleted=[],e.notificationService.getStudentNotifications(),e.classroomService.getClassroomOfStudent(e.userId).subscribe(u=>{e.isEnrolled=null!=u}),e.messageService.getMessagesForLoggedInUser().subscribe(u=>{e.messagesForNotifications=u,e.unreadMessages=e.messageService.getNumberOfUnreadMessages(e.messagesForNotifications)}),e.profileService.getForUser(e.userId).subscribe(u=>{let O=u.profile.country;e.isFromAmerica="United States of America"==O||"America"==O||"USA"==O||"United States"==O},u=>{e.router.navigateByUrl("/register-profile")})):e.auth.logout()})()}toggleDeleteMode(){if(this.deleteMode&&this.toBeDeleted.length>0)for(let e of this.toBeDeleted)this.engagement.addEventForLoggedInUser(M.tw["DELETE-STORY"],{_id:e}),this.recordingService.deleteStoryRecordingAudio(e).subscribe(d=>{}),this.recordingService.deleteStoryRecording(e).subscribe(d=>{}),this.storyService.deleteStory(e).subscribe(d=>{this.ngOnInit()});else this.deleteMode=!this.deleteMode||0!==this.toBeDeleted.length}toggleEditMode(){this.editMode=!this.editMode}toggleDelete(e){if(this.toBeDeleted.includes(e)){var d=this.toBeDeleted.indexOf(e);this.toBeDeleted.splice(d,1)}else this.toBeDeleted.push(e)}goToMessages(){this.router.navigateByUrl("/messages/"+this.userId)}goToStats(){this.router.navigateByUrl("/stats-dashboard/"+this.userId)}createNewStory(){var e=this;this.dialogRef=this.dialog.open(c.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var d=(0,v.Z)(function*(u){if(e.dialogRef=void 0,u)if(u[0]){let w="connemara";u[1]==e.ts.l.munster&&(w="kerry"),u[1]==e.ts.l.ulster&&(w="donegal"),e.storyService.saveStory(e.auth.getUserDetails()._id,u[0],new Date,w,"",e.auth.getUserDetails().username,!1)}else alert(e.ts.l.title_required)});return function(u){return d.apply(this,arguments)}}())}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(m.N),t.Y36(C.$),t.Y36(A.M),t.Y36(f.D),t.Y36(o.F0),t.Y36(S.e),t.Y36(k.H),t.Y36(T.u),t.Y36(F.g),t.Y36(N.s),t.Y36(r.uw))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-book-contents"]],features:[t._Bn([R])],decls:27,vars:17,consts:[[1,"bookContainer"],[1,"contentsContainer"],[1,"bookContentsTitle"],[1,"contentsTitleContainer"],[1,"contentsLinkTitle"],[1,"contentsDateTitle"],["role","main"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"contentsLinkContainer"],["class","newStoryMessage",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"contentsBtnsContainer"],[1,"btn","deleteBtn",3,"click"],["src","assets/img/trash.ico",1,"trashImg"],["class","btn messagesBtn",3,"click",4,"ngIf"],["data-cy","create-story",1,"btn","newStoryBtn",3,"click"],[1,"newStoryMessage"],[1,"contentSection"],[1,"contentsLink"],["type","checkbox","class","deleteCheckbox",3,"click",4,"ngIf"],["appHighlight","",3,"searchedWord","content","classToApply","setTitle","routerLink"],["class","contentsDate",4,"ngIf"],["type","checkbox",1,"deleteCheckbox",3,"click"],[1,"contentsDate"],[1,"btn","messagesBtn",3,"click"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"]],template:function(e,d){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",6)(10,"div")(11,"div",7)(12,"input",8),t.NdJ("ngModelChange",function(w){return d.searchText=w}),t.qZA()()()(),t.TgZ(13,"div",9)(14,"div"),t._uU(15),t.qZA(),t.YNc(16,P,2,0,"div",10),t.YNc(17,q,2,1,"div",10),t.YNc(18,St,9,11,"div",11),t.ALo(19,"appFilter"),t.qZA(),t.TgZ(20,"div",12)(21,"button",13),t.NdJ("click",function(){return d.toggleDeleteMode()}),t._UZ(22,"img",14),t.qZA(),t.YNc(23,Mt,3,2,"button",15),t.YNc(24,Tt,2,1,"button",15),t.TgZ(25,"button",16),t.NdJ("click",function(){return d.createNewStory()}),t._uU(26),t.qZA()()()()),2&e&&(t.xp6(3),t.Oqu(d.ts.l.my_stories),t.xp6(3),t.Oqu(d.ts.l.title),t.xp6(2),t.Oqu(d.ts.l.last_updated),t.xp6(4),t.s9C("placeholder",d.ts.l.search_story_title_or_content),t.Q6J("ngModel",d.searchText),t.xp6(3),t.hij(" ",d.ts.l.loading," "),t.xp6(1),t.Q6J("ngIf",!d.storiesLoaded),t.xp6(1),t.Q6J("ngIf",0===d.stories.length&&d.storiesLoaded),t.xp6(1),t.Q6J("ngForOf",t.xi3(19,14,d.stories,d.searchText)),t.xp6(3),t.ekj("deleteModeBtn",d.deleteMode),t.xp6(2),t.Q6J("ngIf",d.isEnrolled),t.xp6(1),t.Q6J("ngIf",d.stories.length>0),t.xp6(2),t.hij("",d.ts.l.new_story," "))},dependencies:[a.sg,a.O5,o.rH,E.Fj,E.JJ,E.On,Y.P,a.uU,R],styles:[".bookContainer[_ngcontent-%COMP%]{height:auto;width:80%;background:url(https://www.abair.ie/scealai/assets/img/paperBg.jpg) no-repeat center fixed;margin-left:10%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.contentsContainer[_ngcontent-%COMP%]{padding:20px}.bookContentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);padding-left:5%;padding-right:5%;display:inline-block;font-size:18pt}.contentsLinkContainer[_ngcontent-%COMP%]{height:500px;overflow:auto;padding:10px;background-color:#f7f2e7;box-shadow:inset 0 0 12px #00000080;border-radius:5px}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.contentsDate[_ngcontent-%COMP%]{color:var(--dark-text)}.contentsBtnsContainer[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:1rem}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;padding:2px 7px 7px;height:38px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:24px}.messagesBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;border-radius:5px;display:flex}.messagesBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.newStoryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.newStoryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}@media only screen and (max-width: 700px){.contentsContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%}.contentsLinkContainer[_ngcontent-%COMP%]{height:270px;padding-top:10px}.contentsLinkTitle[_ngcontent-%COMP%], .contentsDateTitle[_ngcontent-%COMP%]{font-size:12pt}.optionsPopupBtn[_ngcontent-%COMP%]{padding:2px 5px 5px;margin:0 4px 0 0;height:30px;font-size:12pt}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:0 3px 3px;height:30px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:20px}}.newStoryMessage[_ngcontent-%COMP%]{color:#a79d88;width:80%;margin-left:10%;margin-top:30px}@media only screen and (min-width: 700px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}@media only screen and (min-width: 1400px) and (min-height: 800px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}"]}),l})();var V=n(7579),kt=n(9971),Ot=n.n(kt),Pt=n(5439),It=n.n(Pt),Bt=n(1094),Ft=n.n(Bt),$=n(8605),mt=n(3238),ut=n(2687),Dt=n(445),st=n(1281),vt=n(9521),D=n(3353),dt=n(4968),I=n(6451),z=n(9300),X=n(4004),_t=n(9718),G=n(2722),W=n(1884),L=n(5698),at=n(8675),lt=n(8372),J=n(7340);const pt=["*"],nt=["content"];function bt(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u._onBackdropClicked())}),t.qZA()}if(2&l){const e=t.oxw();t.ekj("mat-drawer-shown",e._isShowingBackdrop())}}function xt(l,x){1&l&&(t.TgZ(0,"mat-drawer-content"),t.Hsn(1,2),t.qZA())}const Rt=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],yt=["mat-drawer","mat-drawer-content","*"],Jt={transformDrawer:(0,J.X$)("transform",[(0,J.SB)("open, open-instant",(0,J.oB)({transform:"none",visibility:"visible"})),(0,J.SB)("void",(0,J.oB)({"box-shadow":"none",visibility:"hidden"})),(0,J.eR)("void => open-instant",(0,J.jt)("0ms")),(0,J.eR)("void <=> open, open-instant => void",(0,J.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Qt=new t.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function qt(){return!1}}),Lt=new t.OlP("MAT_DRAWER_CONTAINER");let Zt=(()=>{class l extends $.PQ{constructor(e,d,u,w,O){super(u,w,O),this._changeDetectorRef=e,this._container=d}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(t.sBO),t.Y36((0,t.Gpc)(()=>Nt)),t.Y36(t.SBq),t.Y36($.mF),t.Y36(t.R0b))},l.\u0275cmp=t.Xpm({type:l,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,d){2&e&&t.Udp("margin-left",d._container._contentMargins.left,"px")("margin-right",d._container._contentMargins.right,"px")},features:[t._Bn([{provide:$.PQ,useExisting:l}]),t.qOj],ngContentSelectors:pt,decls:1,vars:0,template:function(e,d){1&e&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),l})(),Et=(()=>{class l{constructor(e,d,u,w,O,H,U,K){this._elementRef=e,this._focusTrapFactory=d,this._focusMonitor=u,this._platform=w,this._ngZone=O,this._interactivityChecker=H,this._doc=U,this._container=K,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new V.x,this._animationEnd=new V.x,this._animationState="void",this.openedChange=new t.vpe(!0),this._openedStream=this.openedChange.pipe((0,z.h)(B=>B),(0,X.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,z.h)(B=>B.fromState!==B.toState&&0===B.toState.indexOf("open")),(0,_t.h)(void 0)),this._closedStream=this.openedChange.pipe((0,z.h)(B=>!B),(0,X.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,z.h)(B=>B.fromState!==B.toState&&"void"===B.toState),(0,_t.h)(void 0)),this._destroyed=new V.x,this.onPositionChanged=new t.vpe,this._modeChanged=new V.x,this.openedChange.subscribe(B=>{B?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,dt.R)(this._elementRef.nativeElement,"keydown").pipe((0,z.h)(B=>B.keyCode===vt.hY&&!this.disableClose&&!(0,vt.Vb)(B)),(0,G.R)(this._destroyed)).subscribe(B=>this._ngZone.run(()=>{this.close(),B.stopPropagation(),B.preventDefault()}))}),this._animationEnd.pipe((0,W.x)((B,et)=>B.fromState===et.fromState&&B.toState===et.toState)).subscribe(B=>{const{fromState:et,toState:ct}=B;(0===ct.indexOf("open")&&"void"===et||"void"===ct&&0===et.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=(0,st.Ig)(e)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=(0,st.Ig)(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle((0,st.Ig)(e))}_forceFocus(e,d){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const u=()=>{e.removeEventListener("blur",u),e.removeEventListener("mousedown",u),e.removeAttribute("tabindex")};e.addEventListener("blur",u),e.addEventListener("mousedown",u)})),e.focus(d)}_focusByCssSelector(e,d){let u=this._elementRef.nativeElement.querySelector(e);u&&this._forceFocus(u,d)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(d=>{!d&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,d){e&&d&&(this._openedVia=d);const u=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),u}_setOpen(e,d,u){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",d&&this._restoreFocus(u)),this._updateFocusTrapState(),new Promise(w=>{this.openedChange.pipe((0,L.q)(1)).subscribe(O=>w(O?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(e){const d=this._elementRef.nativeElement,u=d.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),u.insertBefore(this._anchor,d)),u.appendChild(d)):this._anchor&&this._anchor.parentNode.insertBefore(d,this._anchor)}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(t.SBq),t.Y36(ut.qV),t.Y36(ut.tE),t.Y36(D.t4),t.Y36(t.R0b),t.Y36(ut.ic),t.Y36(a.K0,8),t.Y36(Lt,8))},l.\u0275cmp=t.Xpm({type:l,selectors:[["mat-drawer"]],viewQuery:function(e,d){if(1&e&&t.Gf(nt,5),2&e){let u;t.iGM(u=t.CRH())&&(d._content=u.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,d){1&e&&t.WFA("@transform.start",function(w){return d._animationStarted.next(w)})("@transform.done",function(w){return d._animationEnd.next(w)}),2&e&&(t.uIk("align",null),t.d8E("@transform",d._animationState),t.ekj("mat-drawer-end","end"===d.position)("mat-drawer-over","over"===d.mode)("mat-drawer-push","push"===d.mode)("mat-drawer-side","side"===d.mode)("mat-drawer-opened",d.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:pt,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,d){1&e&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA())},dependencies:[$.PQ],encapsulation:2,data:{animation:[Jt.transformDrawer]},changeDetection:0}),l})(),Nt=(()=>{class l{constructor(e,d,u,w,O,H=!1,U){this._dir=e,this._element=d,this._ngZone=u,this._changeDetectorRef=w,this._animationMode=U,this._drawers=new t.n_E,this.backdropClick=new t.vpe,this._destroyed=new V.x,this._doCheckSubject=new V.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new V.x,e&&e.change.pipe((0,G.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),O.change().pipe((0,G.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=H}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=(0,st.Ig)(e)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(e){this._backdropOverride=null==e?null:(0,st.Ig)(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,at.O)(this._allDrawers),(0,G.R)(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(d=>!d._container||d._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,at.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,lt.b)(10),(0,G.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,d=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const u=this._left._getWidth();e+=u,d-=u}if(this._right&&this._right.opened)if("side"==this._right.mode)d+=this._right._getWidth();else if("push"==this._right.mode){const u=this._right._getWidth();d+=u,e-=u}e=e||null,d=d||null,(e!==this._contentMargins.left||d!==this._contentMargins.right)&&(this._contentMargins={left:e,right:d},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe((0,z.h)(d=>d.fromState!==d.toState),(0,G.R)(this._drawers.changes)).subscribe(d=>{"open-instant"!==d.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe((0,G.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe((0,G.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,L.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe((0,G.R)((0,I.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const d=this._element.nativeElement.classList,u="mat-drawer-container-has-open";e?d.add(u):d.remove(u)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(Dt.Is,8),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36($.rL),t.Y36(Qt),t.Y36(t.QbO,8))},l.\u0275cmp=t.Xpm({type:l,selectors:[["mat-drawer-container"]],contentQueries:function(e,d,u){if(1&e&&(t.Suo(u,Zt,5),t.Suo(u,Et,5)),2&e){let w;t.iGM(w=t.CRH())&&(d._content=w.first),t.iGM(w=t.CRH())&&(d._allDrawers=w)}},viewQuery:function(e,d){if(1&e&&t.Gf(Zt,5),2&e){let u;t.iGM(u=t.CRH())&&(d._userContent=u.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,d){2&e&&t.ekj("mat-drawer-container-explicit-backdrop",d._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[t._Bn([{provide:Lt,useExisting:l}])],ngContentSelectors:yt,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,d){1&e&&(t.F$t(Rt),t.YNc(0,bt,1,2,"div",0),t.Hsn(1),t.Hsn(2,1),t.YNc(3,xt,2,0,"mat-drawer-content",1)),2&e&&(t.Q6J("ngIf",d.hasBackdrop),t.xp6(3),t.Q6J("ngIf",!d._content))},dependencies:[a.O5,Zt],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),l})(),Vt=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[a.ez,mt.BQ,$.ZD,$.ZD,mt.BQ]}),l})();var Ht=n(4859),jt=n(7392),Gt=n(5802);function Wt(l,x){1&l&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function Kt(l,x){if(1&l&&(t.TgZ(0,"span",29),t._uU(1),t.qZA()),2&l){const e=t.oxw(2);t.xp6(1),t.Oqu(e.ts.l.made_using_prompts)}}function $t(l,x){if(1&l&&(t.TgZ(0,"div",30),t._uU(1),t._UZ(2,"i",31),t.qZA()),2&l){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.saved," ")}}function Xt(l,x){if(1&l&&(t.TgZ(0,"div",30),t._uU(1),t._UZ(2,"i",32),t.qZA()),2&l){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.saving," ")}}function te(l,x){1&l&&t._UZ(0,"i",33)}function ee(l,x){1&l&&t._UZ(0,"i",34)}function ne(l,x){1&l&&(t.TgZ(0,"span",38),t._uU(1,"speech_to_text"),t.qZA())}function re(l,x){1&l&&(t.TgZ(0,"button",39),t._UZ(1,"i",40),t.qZA())}function ie(l,x){1&l&&(t.TgZ(0,"div"),t._UZ(1,"div",41),t.qZA())}const oe=function(l){return{disableDiv:l}};function se(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div",35),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.speakStory())}),t._uU(1),t.YNc(2,ne,2,0,"span",36),t.YNc(3,re,2,0,"button",37),t.YNc(4,ie,2,0,"div",4),t.qZA()}if(2&l){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(5,oe,e.isTranscribing)),t.xp6(1),t.hij(" ",e.ts.l.speak," "),t.xp6(1),t.Q6J("ngIf",!e.isRecording),t.xp6(1),t.Q6J("ngIf",e.isRecording&&!e.isTranscribing),t.xp6(1),t.Q6J("ngIf",e.isTranscribing)}}function ae(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div",42),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return t.KtG(u.dontToggle=!0)}),t.TgZ(1,"button",43),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return t.KtG(u.downloadStory())}),t._uU(2),t._UZ(3,"i",44),t.qZA()()}if(2&l){const e=t.oxw(2);t.xp6(1),t.s9C("href",e.downloadStoryUrl()),t.xp6(1),t.hij(" ",e.ts.l.download," ")}}function ce(l,x){1&l&&(t.TgZ(0,"span",48),t._uU(1,"1"),t.qZA())}function de(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div",45),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.getFeedback())}),t._uU(1),t._UZ(2,"i",46),t.YNc(3,ce,2,0,"span",47),t.qZA()}if(2&l){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.feedback," "),t.xp6(2),t.Q6J("ngIf",e.hasNewFeedback())}}function le(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div",45),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.dictionaryVisible=!u.dictionaryVisible)}),t._uU(1),t._UZ(2,"i",49),t.qZA()}if(2&l){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.dictionary," ")}}function ue(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div",45),t.NdJ("click",function(){t.CHM(e),t.oxw();const u=t.MAs(33),w=t.oxw();return w.dontToggle=!0,w.goToSynthesis(),t.KtG(u.toggle())}),t._uU(1),t._UZ(2,"i",50),t.qZA()}if(2&l){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.audio_check," ")}}function pe(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div",45),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.toggleGrammarTags())}),t._uU(1),t._UZ(2,"i",51),t.qZA()}if(2&l){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.toggleGrammarButton()," ")}}function fe(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div",52),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.goToRecording())}),t._uU(1),t._UZ(2,"i",53),t.qZA()}if(2&l){const e=t.oxw(2);t.Q6J("hidden",e.story.text&&0===e.story.text.length),t.xp6(1),t.hij(" ",e.ts.l.recordings," ")}}function ge(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div",54),t.NdJ("click",function(){const w=t.CHM(e).$implicit,O=t.oxw(2);return t.KtG(O.setStory(w))}),t.TgZ(1,"div",55)(2,"div",56)(3,"div"),t._uU(4),t.qZA()(),t.TgZ(5,"div",57),t._uU(6),t.ALo(7,"date"),t.qZA()(),t._UZ(8,"hr"),t.qZA()}if(2&l){const e=x.$implicit;t.xp6(1),t.uIk("id",e._id),t.xp6(3),t.Oqu(null==e?null:e.title),t.xp6(2),t.hij(" ",t.xi3(7,3,e.lastUpdated,"d/M/yy")," ")}}function he(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div",58,59)(2,"mat-icon",60),t.NdJ("click",function(){t.CHM(e),t.oxw();const u=t.MAs(22);return t.KtG(u.toggle())}),t._uU(3,"menu"),t.qZA(),t.TgZ(4,"quill-editor",61),t.NdJ("ngModelChange",function(u){t.CHM(e);const w=t.oxw(2);return t.KtG(w.story.htmlText=u)})("onContentChanged",function(u){t.CHM(e);const w=t.oxw(2);return t.KtG(w.onContentChanged(u))})("onEditorCreated",function(u){t.CHM(e);const w=t.oxw(2);return t.KtG(w.onEditorCreated(u))}),t.qZA()()}if(2&l){const e=t.oxw(2);t.Q6J("ngStyle",e.quillEditorStyle),t.xp6(4),t.Q6J("modules",e.quillToolbar)("preserveWhitespace",!0)("debounceTime",1500)("ngModel",e.story.htmlText)}}function me(l,x){1&l&&(t.TgZ(0,"div",62),t._uU(1," Click on the '+' button below to create your first story! "),t.qZA())}function ve(l,x){1&l&&(t.TgZ(0,"p"),t._uU(1,"Lorem, ipsum dolor sit amet consectetur."),t.qZA())}function _e(l,x){1&l&&(t.TgZ(0,"p"),t._uU(1,"Drawer 3."),t.qZA())}function be(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div")(1,"div",2)(2,"div",3),t._uU(3),t.YNc(4,Wt,2,0,"span",4),t.YNc(5,Kt,2,1,"span",5),t.qZA(),t.TgZ(6,"div",6),t.YNc(7,$t,3,1,"div",7),t.YNc(8,Xt,3,1,"div",7),t.qZA()(),t.TgZ(9,"div",8),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.toggleOptions())}),t.TgZ(10,"div",9),t.YNc(11,te,1,0,"i",10),t.YNc(12,ee,1,0,"i",11),t.qZA(),t.YNc(13,se,5,7,"div",12),t.YNc(14,ae,4,2,"div",13),t.YNc(15,de,4,2,"div",14),t.YNc(16,le,3,1,"div",14),t.YNc(17,ue,3,1,"div",14),t.YNc(18,pe,3,1,"div",14),t.YNc(19,fe,3,2,"div",15),t.qZA(),t.TgZ(20,"mat-drawer-container",16)(21,"mat-drawer",17,18)(23,"div",19),t.YNc(24,ge,9,6,"div",20),t.qZA(),t.TgZ(25,"button",21),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.createNewStory())}),t.TgZ(26,"mat-icon"),t._uU(27,"add"),t.qZA()()(),t.TgZ(28,"div",22),t.YNc(29,he,5,5,"div",23),t.YNc(30,me,2,0,"ng-template",null,24,t.W1O),t.qZA(),t.TgZ(32,"mat-drawer",25,26)(34,"p"),t._uU(35,"Drwaer sdfasdfas2"),t.qZA(),t.YNc(36,ve,2,0,"p",4),t.TgZ(37,"button",27),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.showFiller=!u.showFiller)}),t._uU(38," Toggle extra text "),t.qZA()(),t.TgZ(39,"mat-drawer",25,28)(41,"p"),t._uU(42,"ADrawer 3"),t.qZA(),t.YNc(43,_e,2,0,"p",4),t.TgZ(44,"button",27),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.showFiller=!u.showFiller)}),t._uU(45," Toggle extra text "),t.qZA()()()()}if(2&l){const e=t.MAs(31),d=t.oxw();let u;t.xp6(2),t.Q6J("ngStyle",d.titleStyle()),t.xp6(1),t.hij(" ",null!==(u=null==d.story?null:d.story.title)&&void 0!==u?u:"..."," "),t.xp6(1),t.Q6J("ngIf",!d.storySaved),t.xp6(1),t.Q6J("ngIf",null==d.story?null:d.story.createdWithPrompts),t.xp6(2),t.Q6J("ngIf",d.storySaved),t.xp6(1),t.Q6J("ngIf",!d.storySaved),t.xp6(3),t.Q6J("ngIf",!d.showOptions),t.xp6(1),t.Q6J("ngIf",d.showOptions),t.xp6(1),t.Q6J("ngIf",d.showOptions),t.xp6(1),t.Q6J("ngIf",d.showOptions),t.xp6(1),t.Q6J("ngIf",d.showOptions),t.xp6(1),t.Q6J("ngIf",d.showOptions),t.xp6(1),t.Q6J("ngIf",d.showOptions),t.xp6(1),t.Q6J("ngIf",d.showOptions),t.xp6(1),t.Q6J("ngIf",d.showOptions),t.xp6(5),t.Q6J("ngForOf",d.stories),t.xp6(5),t.Q6J("ngIf",d.story)("ngIfElse",e),t.xp6(7),t.Q6J("ngIf",d.showFiller),t.xp6(7),t.Q6J("ngIf",d.showFiller)}}function xe(l,x){1&l&&t._UZ(0,"grid-spinner")}Ot().register("modules/imageCompress",It());let ye=(()=>{class l{constructor(e,d,u,w,O,H,U,K){this.ts=e,this.auth=d,this.profileService=u,this.router=w,this.storyService=O,this.notificationService=H,this.dialog=U,this.engagement=K,this.stories=[],this.story=new _,this.saveStoryDebounceId=0,this.mostRecentAttemptToSaveStory=new Date,this.storySaved=!0,this.showErrorTags=!1,this.showOptions=!0,this.dontToggle=!1,this.textUpdated=new V.x,this.quillToolbar={toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"],["image"]],imageCompress:{quality:.7,maxWidth:500,maxHeight:500,imageType:"image/png",debug:!1,suppressErrorLogging:!1,insertIntoEditor:void 0}}}ngOnInit(){var e=this;return(0,v.Z)(function*(){const d=e.auth.getUserDetails();d?(e.notificationService.getStudentNotifications(),e.checkIfProfileFilledOut(d._id),yield e.getStories(),e.story&&(e.storySaved=!0,e.textUpdated.next(),e.getWordCount(e.story.text),null==e.story.htmlText&&(e.story.htmlText=e.story.text))):e.auth.logout()})()}getStories(){var e=this;return(0,v.Z)(function*(){e.stories=(yield(0,Z.z)(e.storyService.getStoriesForLoggedInUser())).map(d=>(new _).fromJSON(d)),e.stories.sort((d,u)=>d.date>u.date?-1:1),e.story=e.stories[0]})()}setStory(e){this.story=e,null==this.story.htmlText&&(this.story.htmlText=this.story.text)}checkIfProfileFilledOut(e){this.profileService.getForUser(e).subscribe({next:()=>{},error:()=>this.router.navigateByUrl("/register-profile")})}onContentChanged(e){"user"===(this.story.text=e.text,this.getWordCount(e.text),e.source)&&(this.storySaved=!1,this.textUpdated.next(e.text),this.debounceSaveStory())}onEditorCreated(e){e.history.options.userOnly=!0,this.quillEditor=e,this.quillEditor.root.setAttribute("spellcheck","false"),e.focus()}createNewStory(){var e=this;this.dialogRef=this.dialog.open(c.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var d=(0,v.Z)(function*(u){if(e.dialogRef=void 0,u)if(u[0]){let w="connemara";u[1]==e.ts.l.munster&&(w="kerry"),u[1]==e.ts.l.ulster&&(w="donegal"),e.storyService.saveStory(e.auth.getUserDetails()._id,u[0],new Date,w,"",e.auth.getUserDetails().username,!1).subscribe({next:()=>{e.getStories()},error:()=>{alert("Not able to create a new story")}})}else alert(e.ts.l.title_required)});return function(u){return d.apply(this,arguments)}}())}getWordCount(e){}debounceSaveStory(){this.saveStoryDebounceId++;const e=this.saveStoryDebounceId,d=new Date;setTimeout(()=>{e===this.saveStoryDebounceId&&this.saveStory(e,d)},1e3)}saveStory(e,d){var u=this;return(0,v.Z)(function*(){const w=new Date;if(u.mostRecentAttemptToSaveStory=w,!u.story._id)return window.alert("Cannot save story. The id is not known");const O=u.stripGramadoirAttributesFromHtml(Ft()(u.story.htmlText)),H={title:u.story.title,dialect:u.story.dialect,text:u.story.text,htmlText:O,lastUpdated:d};u.engagement.addEventForLoggedInUser(M.tw["SAVE-STORY"],u.story);try{yield(0,Z.z)(u.storyService.updateStory(H,u.story._id)),(e===u.saveStoryDebounceId||"modal"===e)&&(u.storySaved=!0)}catch(U){throw window.alert("Error while trying to save story: "+U.message),U}try{w===u.mostRecentAttemptToSaveStory&&(u.storySaved=!0)}catch(U){throw window.alert("Error setting storySaved to true: "+U.message),U}})()}stripGramadoirAttributesFromHtml(e){return e&&e.replace?e.replace(/\s*style="([^"])+"/g,"").replace(/\s*highlight-tag-type="([^"])+"/g,"").replace(/\s*highlight-tag="([^"])+"/g,""):""}toggleOptions(){this.dontToggle||(this.showOptions=!this.showOptions),this.dontToggle=!1}titleStyle(){return{"font-style":this.storySaved?"normal":"italic"}}downloadStoryUrl(){}hasNewFeedback(){}toggleGrammarButton(){return this.ts.message(this.showErrorTags?"hide_grammar_suggestions":"show_grammar_suggestions")}toggleGrammarTags(){}showModal(){}selectedGrammarSuggestion(){return"test"}goToSynthesis(){}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(f.D),t.Y36(C.$),t.Y36(k.H),t.Y36(o.F0),t.Y36(m.N),t.Y36(F.g),t.Y36(r.uw),t.Y36(A.M))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-dashboard"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["storiesLoading",""],[1,"storyTitleHeader"],["data-cy","title","contenteditable","true",1,"storyTitle",3,"ngStyle"],[4,"ngIf"],["style","color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"saveIcon"],["class","savedIcon",4,"ngIf"],[1,"optionsBtnContainer",3,"click"],[1,"optionsBtn"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-right",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"ngClass","click",4,"ngIf"],["style","display: flex",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"hidden","click",4,"ngIf"],["autosize","",1,"bodyContainer"],["mode","side","opened","true",1,"storyListDrawer"],["drawer",""],[1,"storyList"],[3,"click",4,"ngFor","ngForOf"],["mat-fab","",1,"newStoryButton",3,"click"],[1,"storyContainer"],["class","ql-container",3,"ngStyle",4,"ngIf","ngIfElse"],["newStoryMessage",""],["mode","side","position","end",1,"storyListDrawer"],["drawer2",""],["mat-raised-button","",3,"click"],["drawer3",""],[2,"color","rgba(0, 0, 0, 0.4)"],[1,"savedIcon"],[1,"fas","fa-check"],[1,"fas","fa-save"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-right"],[1,"optionsBtn","optionsPopupBtn",3,"ngClass","click"],["class","material-symbols-outlined optionsBtnIcon",4,"ngIf"],["class","notRecordingBtn blink",4,"ngIf"],[1,"material-symbols-outlined","optionsBtnIcon"],[1,"notRecordingBtn","blink"],[1,"fas","fa-stop-circle"],[1,"dot-flashing"],[2,"display","flex",3,"click"],["target","_blank",1,"optionsBtn","optionsPopupBtn",2,"text-decoration","none",3,"href","click"],[1,"fas","fa-download","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"click"],[1,"fas","fa-comment-dots","optionsBtnIcon"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"],[1,"fas","fa-book","optionsBtnIcon"],[1,"fas","fa-volume-up","optionsBtnIcon"],[1,"fas","fa-spell-check","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"hidden","click"],[1,"fas","fa-microphone","optionsBtnIcon"],[3,"click"],[1,"contentSection"],[1,"contentsLink"],[1,"contentsDate"],[1,"ql-container",3,"ngStyle"],["quillHeightSpan",""],[1,"menuButton",3,"click"],["placeholder","",3,"modules","preserveWhitespace","debounceTime","ngModel","ngModelChange","onContentChanged","onEditorCreated"],[1,"newStoryMessage"]],template:function(e,d){if(1&e&&(t.YNc(0,be,46,20,"div",0),t.YNc(1,xe,1,0,"ng-template",null,1,t.W1O)),2&e){const u=t.MAs(2);t.Q6J("ngIf",d.stories.length>0)("ngIfElse",u)}},dependencies:[a.mk,a.sg,a.O5,a.PC,E.JJ,E.On,Y.P,Et,Nt,Ht.lW,jt.Hw,Gt.g6,a.uU],styles:[".storyTitleHeader{display:flex;justify-content:center;margin-top:-30px;padding-bottom:20px}.storyTitle{margin:auto;overflow:auto;font-size:20px;font-weight:bolder;padding-left:20px;padding-right:20px}.saveIcon{align-self:flex-end;white-space:nowrap;color:var(--dark-text);border-style:none;font-size:11pt;padding:5px}.savedIcon{color:var(--scealai-light-brown)}.optionsBtnContainer>*{height:2rem}.optionsBtnContainer{display:flex;justify-content:space-between;flex-wrap:wrap;--options-btn-background-color-hover: lightgray;margin-left:2%;margin-right:2%}.optionsBtn{background-color:var(--scealai-yellow);border-style:none;color:#464444;margin:0;border-radius:2px;display:flex;align-items:center;padding:5px;background:rgba(223,217,200,0)}.optionsBtn:hover{background-color:var(--options-btn-background-color-hover);color:#35322f;cursor:pointer;border-radius:2}.optionsPopupBtn{margin-right:4px}.optionsBtnIcon{margin-left:5px}.notRecordingBtn{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.bodyContainer{width:100%;height:100%}.storyListDrawer{padding:40px}.storyList{height:90%;overflow-y:scroll}.newStoryButton{float:right}.mat-fab.mat-accent,.mat-mini-fab.mat-accent{background-color:var(--scealai-green)}.newStoryMessage{font-weight:bolder;max-width:200px;padding-top:50px;padding-bottom:50px;height:80vh;width:100%}.storyContainer{height:100%}.ql-container{background-color:#f8f9fa;height:100%}.menuButton{float:left;padding-left:10px;padding-top:5px;transform:scale(2);z-index:100}.menuButton:hover{cursor:pointer}.ql-editor{background-color:#fff;z-index:1;margin-top:20px;font-size:14pt;font-family:Times New Roman,Times,serif;min-height:70vh!important;max-height:70vh!important}.blink{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}.contentSection:hover{cursor:pointer}.contentsLink{color:var(--dark-text);text-align:left;text-decoration:none;padding-right:20px}.contentsLink:hover{text-decoration:underline;cursor:pointer}.contentsDate{padding-right:20px}\n",".custom-tooltip:before{content:none!important}[data-selected]{margin:.3em}[highlight-tag-type]{border-radius:3px}span[highlight-tag-type]:hover{cursor:pointer}span:not[highlight-tag-type]{border-radius:0;padding-left:0;padding-right:0}[highlight-tag-type=LEATHAN-CAOL]{border:1px solid gray;border-radius:0!important;padding-left:0!important;padding-right:0!important}\n",'.ql-editor{overflow-y:auto}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=times-new-roman]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=times-new-roman]:before{content:"Times New Roman";font-family:Times New Roman}.ql-font-times-new-roman{font-family:times new roman}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=arial]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=arial]:before{content:"Arial";font-family:arial}.ql-font-arial{font-family:arial}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=sans-serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=sans-serif]:before{content:"Sans Serif";font-family:"sans serif"}.ql-font-sans-serif{font-family:"sans serif"}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{content:"Monospace";font-family:"monospace"}.ql-font-monospace{font-family:"monospace"}\n'],encapsulation:2}),l})();var it=n(9742),Yt=n(1481);let zt=(()=>{class l{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(Yt.H7,16))},l.\u0275pipe=t.Yjl({name:"safeHtml",type:l,pure:!0}),l})();function we(l,x){if(1&l&&(t.TgZ(0,"div",14)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&l){const e=t.oxw();t.xp6(2),t.Oqu(e.ts.l.synthesising)}}function Ce(l,x){1&l&&(t._UZ(0,"span",18),t.ALo(1,"safeHtml")),2&l&&t.Q6J("innerHTML",t.lcZ(1,1,x.$implicit.outerHTML),t.oJD)}function Se(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().$implicit,w=t.oxw(2);return t.KtG(w.stopSection(u))}),t._UZ(1,"i",20),t.qZA()}}function Me(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().$implicit,w=t.oxw(2);return t.KtG(w.playSection(u))}),t._UZ(1,"i",21),t.qZA()}}function Te(l,x){if(1&l&&(t.TgZ(0,"div",2),t.YNc(1,Ce,2,3,"span",16),t.YNc(2,Se,2,0,"button",17),t.YNc(3,Me,2,0,"button",17),t.qZA()),2&l){const e=x.$implicit;t.xp6(1),t.Q6J("ngForOf",e.spans),t.xp6(1),t.Q6J("ngIf",!e.audio.paused),t.xp6(1),t.Q6J("ngIf",e.audio.paused)}}function Ae(l,x){if(1&l&&(t.TgZ(0,"div"),t.YNc(1,Te,4,3,"div",15),t.qZA()),2&l){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.chosenSections)}}function ke(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div")(1,"button",24),t._uU(2),t.qZA(),t.TgZ(3,"button",25),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return t.KtG(u.changeSections(u.sentences))}),t._uU(4),t.qZA()()}if(2&l){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.paragraph),t.xp6(2),t.Oqu(e.ts.l.sentence)}}function Oe(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div")(1,"button",25),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return t.KtG(u.changeSections(u.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",24),t._uU(4),t.qZA()()}if(2&l){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.paragraph),t.xp6(2),t.Oqu(e.ts.l.sentence)}}function Pe(l,x){if(1&l&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t.qZA(),t.YNc(3,ke,5,2,"div",11),t.YNc(4,Oe,5,2,"div",11),t.qZA()),2&l){const e=t.oxw();t.xp6(2),t.hij(" ",e.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",e.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",e.isSentenceMode())}}let Ie=(()=>{class l{constructor(e,d,u,w,O){this.storyService=e,this.route=d,this.router=u,this.ts=w,this.synthesis=O,this.paragraphs=[],this.sentences=[],this.audioFinishedLoading=!1}ngOnInit(){var e=this;return(0,v.Z)(function*(){e.storyId=e.route.snapshot.paramMap.get("id");let d=yield(0,Z.z)(e.storyService.getStory(e.storyId));e.synthesis.synthesiseStory(d).then(([u,w])=>{e.paragraphs=u,e.sentences=w,e.chosenSections=e.paragraphs,e.audioFinishedLoading=!0})})()}isSentenceMode(){return this.chosenSections[0]instanceof it.cj}isParagraphMode(){return this.chosenSections[0]instanceof it.nv}changeSections(e){this.chosenSections=e,this.paragraphs.concat(this.sentences).forEach(u=>this.stopSection(u))}playSection(e){e.play(),e.highlight()}stopSection(e){e.stop(),e.removeHighlight()}goToDashboard(){this.router.navigateByUrl("/student/dashboard/"+this.storyId)}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(m.N),t.Y36(o.gz),t.Y36(o.F0),t.Y36(f.D),t.Y36(it.cf))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-synthesis"]],decls:18,vars:5,consts:[["src","assets/img/book.png",1,"bookImg"],[1,"page"],[1,"paragraphContainer"],[1,"bookContainerSynth"],[1,"bookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"storyContainer"],[1,"storyHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[4,"ngIf"],[1,"footer"],["class","btnContainer",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"btnContainer"],[1,"footerText"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"]],template:function(e,d){1&e&&(t._UZ(0,"img",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t.NdJ("click",function(){return d.goToDashboard()}),t._UZ(6,"i",6),t._uU(7),t.qZA(),t._UZ(8,"div"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8),t._uU(11),t.qZA(),t.TgZ(12,"div")(13,"div",9),t.YNc(14,we,4,1,"div",10),t.YNc(15,Ae,2,1,"div",11),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,Pe,5,3,"div",13),t.qZA()()()()()),2&e&&(t.xp6(7),t.hij(" ",d.ts.l.story,""),t.xp6(4),t.hij(" ",d.ts.l.listen_and_correct," "),t.xp6(3),t.Q6J("ngIf",!d.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",d.audioFinishedLoading),t.xp6(2),t.Q6J("ngIf",d.audioFinishedLoading))},dependencies:[a.sg,a.O5,Y.P,zt],styles:['.bookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:var(--dark-text);width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.storyContainer[_ngcontent-%COMP%]{margin-top:10px}.storyHeader[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]:hover, .selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),l})();class Be{constructor(x,e=[],d=[],u=[],w=[],O=[],H=[]){this.paragraphAudioIds=e,this.paragraphIndices=d,this.paragraphTranscriptions=u,this.sentenceAudioIds=w,this.sentenceIndices=O,this.sentenceTranscriptions=H,this.storyData=x,this.date=new Date,this.archived=!1}}var Fe=n(2754);function De(l,x){1&l&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function Re(l,x){if(1&l&&(t.TgZ(0,"div",16),t._uU(1),t._UZ(2,"i",17),t.qZA()),2&l){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.saved," ")}}function Ze(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2);return t.KtG(u.saveRecordings())}),t._uU(1),t._UZ(2,"i",19),t.qZA()}if(2&l){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.save," ")}}function Ee(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t.NdJ("click",function(){t.CHM(e);const u=t.oxw();return t.KtG(u.goToDashboard())}),t._UZ(2,"i",10),t._uU(3),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.YNc(6,De,2,0,"span",12),t.qZA(),t.TgZ(7,"div",13),t.YNc(8,Re,3,1,"div",14),t.YNc(9,Ze,3,1,"div",15),t.qZA()()}if(2&l){const e=t.oxw();t.xp6(3),t.hij(" ",e.ts.l.story," "),t.xp6(2),t.hij(" ",null==e.story?null:e.story.title,""),t.xp6(1),t.Q6J("ngIf",!e.recordingSaved),t.xp6(2),t.Q6J("ngIf",e.recordingSaved),t.xp6(1),t.Q6J("ngIf",!e.recordingSaved)}}function Ne(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){t.CHM(e),t.oxw();const u=t.MAs(5);return t.KtG(u.toggle())}),t.TgZ(1,"mat-icon"),t._uU(2,"menu"),t.qZA(),t._uU(3),t.qZA()}if(2&l){const e=t.oxw();t.xp6(3),t.hij(" ",e.ts.l.archive," ")}}const je=function(l){return{"font-style":l}};function Ue(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div")(1,"div",21),t.NdJ("click",function(){const w=t.CHM(e).$implicit,O=t.oxw();return t.KtG(O.setCurrentRecording(w))}),t.TgZ(2,"div",22)(3,"div",23),t._uU(4),t.qZA()(),t.TgZ(5,"div",24),t._uU(6),t.ALo(7,"date"),t.qZA()(),t._UZ(8,"hr"),t.qZA()}if(2&l){const e=x.$implicit;t.xp6(1),t.uIk("id",e._id),t.xp6(2),t.Q6J("ngStyle",t.VKq(7,je,e.archived?"none":"italic")),t.xp6(1),t.hij(" ",null==e||null==e.storyData?null:e.storyData.title,""),t.xp6(2),t.hij(" ",t.xi3(7,4,e.date,"d/M/yy, h:mm a")," ")}}function Le(l,x){if(1&l&&(t.TgZ(0,"div",30)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&l){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.synthesising)}}function He(l,x){1&l&&(t._UZ(0,"span",42),t.ALo(1,"safeHtml")),2&l&&t.Q6J("innerHTML",t.lcZ(1,1,x.$implicit.outerHTML),t.oJD)}function Ge(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().$implicit,w=t.oxw(3);return t.KtG(w.stopSection(u))}),t._UZ(1,"i",44),t.qZA()}}function Ye(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().$implicit,w=t.oxw(3);return t.KtG(w.playSection(u))}),t._UZ(1,"i",45),t.qZA()}}function ze(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().index,w=t.oxw(3);return t.KtG(w.recordAudio(u))}),t._UZ(1,"i",47),t.qZA()}}function Je(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(e);const u=t.oxw().index,w=t.oxw(3);return t.KtG(w.stopRecording(u))}),t._UZ(1,"i",49),t.qZA()}}function Qe(l,x){1&l&&t._UZ(0,"hr",50)}function qe(l,x){1&l&&(t.TgZ(0,"div",51),t._UZ(1,"div",52),t.qZA())}function Ve(l,x){if(1&l&&(t.TgZ(0,"div",53)(1,"span",54),t._uU(2),t.qZA(),t.TgZ(3,"span",55),t._uU(4),t.qZA()()),2&l){const e=t.oxw().index,d=t.oxw(3);t.xp6(2),t.hij("",d.ts.l.speech_recognition_output," "),t.xp6(2),t.Oqu(d.sectionTranscriptions[e])}}function We(l,x){if(1&l&&t._UZ(0,"audio",59,60),2&l){const e=t.oxw(2).index,d=t.oxw(3);t.uIk("src",d.sectionAudioSources[e],t.LSH)}}function Ke(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(2).index,w=t.oxw(3);return t.KtG(w.deleteRecording(u))}),t._UZ(1,"i",62),t.qZA()}}function $e(l,x){if(1&l&&(t.TgZ(0,"div",56)(1,"div",54),t._uU(2),t.qZA(),t.YNc(3,We,2,1,"audio",57),t.YNc(4,Ke,2,0,"button",58),t.qZA()),2&l){const e=t.oxw().index,d=t.oxw(3);t.xp6(2),t.Oqu(d.ts.l.your_recording),t.xp6(1),t.Q6J("ngIf",d.sectionAudioSources[e]),t.xp6(1),t.Q6J("ngIf",d.sectionAudioSources[e]&&!d.currentRecording.archived)}}function Xe(l,x){if(1&l&&(t.TgZ(0,"div",32)(1,"div",33)(2,"div"),t.YNc(3,He,2,3,"span",34),t.YNc(4,Ge,2,0,"button",35),t.YNc(5,Ye,2,0,"button",35),t.YNc(6,ze,2,0,"button",36),t.YNc(7,Je,2,0,"button",37),t.qZA(),t.YNc(8,Qe,1,0,"hr",38),t.YNc(9,qe,2,0,"div",39),t.YNc(10,Ve,5,2,"div",40),t.YNc(11,$e,5,3,"div",41),t.qZA()()),2&l){const e=x.$implicit,d=x.index,u=t.oxw(3);t.xp6(3),t.Q6J("ngForOf",e.spans),t.xp6(1),t.Q6J("ngIf",!e.audio.paused),t.xp6(1),t.Q6J("ngIf",e.audio.paused),t.xp6(1),t.Q6J("ngIf",!u.isRecording(e,d)&&!u.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",u.isRecording(e,d)&&!u.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",u.sectionAudioSources[d]),t.xp6(1),t.Q6J("ngIf",u.isTranscribing[d]),t.xp6(1),t.Q6J("ngIf",u.sectionTranscriptions[d]),t.xp6(1),t.Q6J("ngIf",u.sectionAudioSources[d])}}function tn(l,x){if(1&l&&(t.TgZ(0,"div"),t.YNc(1,Xe,12,9,"div",31),t.qZA()),2&l){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.chosenSections)}}function en(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div")(1,"button",67),t._uU(2),t.qZA(),t.TgZ(3,"button",68),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(3);return t.KtG(u.changeSections(u.sentences))}),t._uU(4),t.qZA()()}if(2&l){const e=t.oxw(3);t.xp6(2),t.hij(" ",e.ts.l.paragraph," "),t.xp6(2),t.hij(" ",e.ts.l.sentence," ")}}function nn(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"div")(1,"button",68),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(3);return t.KtG(u.changeSections(u.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",67),t._uU(4),t.qZA()()}if(2&l){const e=t.oxw(3);t.xp6(2),t.hij(" ",e.ts.l.paragraph," "),t.xp6(2),t.hij(" ",e.ts.l.sentence," ")}}function rn(l,x){if(1&l){const e=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(e);const u=t.oxw(3);return t.KtG(u.archiveRecording())}),t._uU(1),t.qZA()}if(2&l){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.ts.l.archive_recording," ")}}function on(l,x){if(1&l&&(t.TgZ(0,"div",63)(1,"div",64)(2,"div",65),t._uU(3),t.qZA(),t.YNc(4,en,5,2,"div",12),t.YNc(5,nn,5,2,"div",12),t.YNc(6,rn,2,1,"button",66),t.qZA()()),2&l){const e=t.oxw(2);t.xp6(3),t.hij(" ",e.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",e.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",e.isSentenceMode()),t.xp6(1),t.Q6J("ngIf",!e.currentRecording.archived&&e.currentRecording.storyData.text!=e.story.text)}}function sn(l,x){if(1&l&&(t.TgZ(0,"div",25)(1,"div",26),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t.YNc(4,Le,4,1,"div",28),t.YNc(5,tn,2,1,"div",12),t.qZA(),t.YNc(6,on,7,4,"div",29),t.qZA()),2&l){const e=t.oxw();t.xp6(2),t.hij(" ",e.ts.l.listen_record_compare," "),t.xp6(2),t.Q6J("ngIf",!e.audioFinishedLoading&&!e.recordingsFinishedLoading),t.xp6(1),t.Q6J("ngIf",e.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",e.audioFinishedLoading)}}const cn=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"contents",component:At,canActivate:[i.P]},{path:"dashboard",component:ye,canActivate:[i.P],canDeactivate:[s]},{path:"synthesis/:id",component:Ie,canActivate:[i.P],canDeactivate:[g]},{path:"record-story/:id",component:(()=>{class l{constructor(e,d,u,w,O,H,U,K,B){this.storyService=e,this.ts=d,this.sanitizer=u,this.route=w,this.router=O,this.recordingService=H,this.synthesis=U,this.engagement=K,this.dialog=B,this.story=new _,this.paragraphs=[],this.sentences=[],this.isRecordingParagraph=[],this.isRecordingSentence=[],this.isRecordingSection=[],this.paragraphAudioSources=[],this.sentenceAudioSources=[],this.sectionAudioSources=[],this.paragraphBlobs=[],this.sentenceBlobs=[],this.sectionBlobs=[],this.paragraphChunks=[],this.sentenceChunks=[],this.sectionChunks=[],this.recordingSaved=!0,this.audioFinishedLoading=!1,this.url_ASR_API="https://phoneticsrv3.lcs.tcd.ie/asr_api/recognise",this.sentenceTranscriptions=[],this.paragraphTranscriptions=[],this.sectionTranscriptions=[],this.isTranscribing=[!1],this.recordings=[],this.currentRecording=null,this.lastClickedRecordingId=""}ngOnInit(){var e=this;return(0,v.Z)(function*(){e.chunks=[],e.sectionAudioSources=e.paragraphAudioSources,e.sectionBlobs=e.paragraphBlobs,e.sectionChunks=e.paragraphChunks,e.sectionTranscriptions=e.paragraphTranscriptions,e.isRecordingSection=e.isRecordingParagraph;const d=e.route.snapshot.paramMap.get("id");e.story=yield(0,Z.z)(e.storyService.getStory(d)),(0,Fe.TD)({audio:!0,video:!1}).then((0,v.Z)(function*(){e.story.activeRecording?e.loadRecordings():e.createNewRecording()})).catch(u=>{e.openMicRequestDialog()})})()}loadRecordings(){var e=this;return(0,v.Z)(function*(){e.recordings=yield(0,Z.z)(e.recordingService.getRecordings(e.story._id)),e.recordings.sort((u,w)=>u.date>w.date?-1:1);let d=e.recordings.filter(u=>!1===u.archived);e.setCurrentRecording(d[0])})()}setCurrentRecording(e){this.currentRecording=e,this.loadSynthesis(this.currentRecording.storyData),this.loadAudio(this.currentRecording);let d=this.currentRecording._id,u=document.getElementById(d);u&&(this.lastClickedRecordingId&&document.getElementById(this.lastClickedRecordingId).classList.remove("clickedresultCard"),this.lastClickedRecordingId=d,u.classList.add("clickedresultCard"))}createNewRecording(){var e=this;return(0,v.Z)(function*(){const d=yield(0,Z.z)(e.recordingService.create(new Be(e.story)));e.story=yield(0,Z.z)(e.storyService.updateActiveRecording(e.story._id,d._id)),e.loadRecordings()})()}archiveRecording(){var e=this;return(0,v.Z)(function*(){yield(0,Z.z)(e.recordingService.updateArchiveStatus(e.currentRecording._id)),e.createNewRecording()})()}loadSynthesis(e){this.synthesis.synthesiseStory(e).then(([d,u])=>{this.paragraphs=d,this.sentences=u,this.chosenSections=this.paragraphs,this.audioFinishedLoading=!0})}loadAudio(e){var d=this;return(0,v.Z)(function*(){d.audioFinishedLoading=!1,d.paragraphAudioSources=[],d.paragraphTranscriptions=[],d.sentenceAudioSources=[],d.sentenceTranscriptions=[],d.sectionAudioSources=[],d.sectionTranscriptions=[];for(let u=0;u<e.paragraphIndices.length;++u){let w=yield(0,Z.z)(d.recordingService.getAudio(e.paragraphAudioIds[u]));d.paragraphBlobs[u]=w,d.paragraphAudioSources[e.paragraphIndices[u]]=d.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(w)),d.paragraphTranscriptions[e.paragraphIndices[u]]=e.paragraphTranscriptions[e.paragraphIndices[u]]}for(let u=0;u<e.sentenceIndices.length;++u){let w=yield(0,Z.z)(d.recordingService.getAudio(e.sentenceAudioIds[u]));d.sentenceBlobs[u]=w,d.sentenceAudioSources[e.sentenceIndices[u]]=d.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(w)),d.sentenceTranscriptions[e.sentenceIndices[u]]=e.sentenceTranscriptions[e.sentenceIndices[u]]}d.sectionTranscriptions=d.paragraphTranscriptions,d.sectionAudioSources=d.paragraphAudioSources})()}recordAudio(e){this.engagement.addEventForLoggedInUser(M.tw["RECORD-STORY"],this.story),navigator.mediaDevices.getUserMedia({audio:!0}).then(u=>{this.stream=u,this.recorder=new MediaRecorder(this.stream),this.sectionChunks[e]=[],this.recorder.start(),this.isRecordingSection[e]=!0,this.recorder.ondataavailable=w=>{this.sectionChunks[e].push(w.data)}}).catch()}stopRecording(e){this.recorder.stop(),this.isRecordingSection[e]=!1,this.stream.getTracks().forEach(d=>d.stop()),setTimeout(()=>{const d=new Blob(this.sectionChunks[e],{type:"audio/mp3"});this.sectionBlobs[e]=d,this.sectionAudioSources[e]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(d)),this.recordingSaved=!1;const u=new FileReader;u.readAsDataURL(d),u.onloadend=function(){let w=u.result.split(";base64,")[1];this.getTranscription(w,e)}.bind(this)},500)}getTranscription(e,d){this.isTranscribing[d]=!0,this.isParagraphMode()&&(this.paragraphTranscriptions[d]=null),this.isSentenceMode()&&(this.sentenceTranscriptions[d]=null),fetch(this.url_ASR_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({recogniseBlob:e,developer:!0})}).then(w=>w.json()).then(w=>{let O=w.transcriptions[0].utterance;this.isParagraphMode()?(this.paragraphTranscriptions[d]=O,this.sectionTranscriptions[d]=this.paragraphTranscriptions[d]):this.isSentenceMode()&&(this.sentenceTranscriptions[d]=O,this.sectionTranscriptions[d]=this.sentenceTranscriptions[d]),this.isTranscribing[d]=!1})}deleteRecording(e){this.recordingSaved=!1,delete this.sectionAudioSources[e],delete this.sectionChunks[e],delete this.sectionBlobs[e],delete this.sectionTranscriptions[e]}saveRecordings(){var e=this;return(0,v.Z)(function*(){const d=Object.entries(e.paragraphBlobs).map(function(){var Q=(0,v.Z)(function*([ft,Ut]){return e.recordingService.saveAudio(e.story._id,Ut,ft).toPromise()});return function(ft){return Q.apply(this,arguments)}}()),u=Object.entries(e.sentenceBlobs).map(function(){var Q=(0,v.Z)(function*([ft,Ut]){return e.recordingService.saveAudio(e.story._id,Ut,ft).toPromise()});return function(ft){return Q.apply(this,arguments)}}()),w=yield Promise.all(d),O=yield Promise.all(u);let H=[],U=[];for(const Q of w)H.push(Q.index),U.push(Q.fileId);let K=[],B=[];for(const Q of O)K.push(Q.index),B.push(Q.fileId);const et={paragraphAudioIds:U,paragraphIndices:H,paragraphTranscriptions:e.paragraphTranscriptions,sentenceIndices:K,sentenceAudioIds:B,sentenceTranscriptions:e.sentenceTranscriptions};let ct=yield(0,Z.z)(e.recordingService.update(e.story.activeRecording,et));if(ct){e.recordingSaved=!0;const Q=e.recordings.indexOf(e.currentRecording);e.recordings.splice(Q,1,ct)}else alert("Error while saving audio")})()}isRecording(e,d){return e instanceof it.cj?this.isRecordingSentence[d]:e instanceof it.nv?this.isRecordingParagraph[d]:void 0}isSentenceMode(){return this.chosenSections[0]instanceof it.cj}isParagraphMode(){return this.chosenSections[0]instanceof it.nv}changeSections(e){this.chosenSections=e,this.paragraphs.concat(this.sentences).forEach(u=>this.stopSection(u)),this.isSentenceMode()?(this.sectionAudioSources=this.sentenceAudioSources,this.sectionBlobs=this.sentenceBlobs,this.sectionChunks=this.sentenceChunks,this.sectionTranscriptions=this.sentenceTranscriptions,this.isRecordingSection=this.isRecordingSentence):this.isParagraphMode()&&(this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.sectionTranscriptions=this.paragraphTranscriptions,this.isRecordingSection=this.isRecordingParagraph)}playSection(e){e.play(),e.highlight()}stopSection(e){e.stop(),e.removeHighlight()}goToDashboard(){this.router.navigateByUrl("student/dashboard/"+this.story._id)}openMicRequestDialog(){var e=this;this.dialogRef=this.dialog.open(c.p,{data:{title:this.ts.l.microphone_blocked,message:this.ts.l.page_requires_microphone,confirmText:this.ts.l.refresh,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var d=(0,v.Z)(function*(u){e.dialogRef=void 0,console.log(u),u?e.ngOnInit():e.goToDashboard()});return function(u){return d.apply(this,arguments)}}())}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(m.N),t.Y36(f.D),t.Y36(Yt.H7),t.Y36(o.gz),t.Y36(o.F0),t.Y36(N.s),t.Y36(it.cf),t.Y36(A.M),t.Y36(r.uw))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-recording"]],decls:8,vars:4,consts:[[1,"content"],["class","recordingBookHeader",4,"ngIf"],["class","archiveButton",3,"click",4,"ngIf"],["autosize","",1,"archiveNavContainer"],["mode","side",1,"sidenav"],["drawer",""],[4,"ngFor","ngForOf"],["class","recordingStoryContainer",4,"ngIf"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"archiveButton",3,"click"],[1,"contentSection",3,"click"],[1,"contentsLink"],[3,"ngStyle"],[1,"contentsDate"],[1,"recordingStoryContainer"],[1,"recordingStoryHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],["class","footer","style","padding-top: 10px",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],["class","recordingBtn",3,"click",4,"ngIf"],["class","notRecordingBtn blink",3,"click",4,"ngIf"],["class","dividerLine",4,"ngIf"],["class","recognisedSpeechContainer",4,"ngIf"],["style","height: 40px",4,"ngIf"],["class","audioContainer",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"recordingBtn",3,"click"],[1,"fas","fa-microphone"],[1,"notRecordingBtn","blink",3,"click"],[1,"fas","fa-stop-circle"],[1,"dividerLine"],[1,"recognisedSpeechContainer"],[1,"dot-flashing"],[2,"height","40px"],[2,"opacity","0.5"],[1,"recognisedSpeech"],[1,"audioContainer"],["controls","","class","audioPlayer",4,"ngIf"],["class","notRecordingBtn trashBtn",3,"click",4,"ngIf"],["controls","",1,"audioPlayer"],["audioTag",""],[1,"notRecordingBtn","trashBtn",3,"click"],[1,"fas","fa-trash-alt"],[1,"footer",2,"padding-top","10px"],[1,"btnContainer"],[1,"footerText"],["class","changeSplitBtn","style","margin-left: auto",3,"click",4,"ngIf"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"],[1,"changeSplitBtn",2,"margin-left","auto",3,"click"]],template:function(e,d){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ee,10,5,"div",1),t.YNc(2,Ne,4,1,"div",2),t.TgZ(3,"mat-drawer-container",3)(4,"mat-drawer",4,5),t.YNc(6,Ue,9,9,"div",6),t.qZA(),t.YNc(7,sn,7,4,"div",7),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",d.story),t.xp6(1),t.Q6J("ngIf",d.recordings.length>0),t.xp6(4),t.Q6J("ngForOf",d.recordings),t.xp6(1),t.Q6J("ngIf",d.story))},dependencies:[a.sg,a.O5,a.PC,Y.P,Et,Nt,jt.Hw,a.uU,zt],styles:['.content[_ngcontent-%COMP%]{width:90%;margin-left:5%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.archiveNavContainer[_ngcontent-%COMP%]{height:70vh;background-color:#fff}.sidenav[_ngcontent-%COMP%]{padding:20px;width:20vw}.archiveButton[_ngcontent-%COMP%]{display:flex;margin-left:10px;margin-top:20px;font-size:16px}.archiveButton[_ngcontent-%COMP%]:hover, .contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:20px;height:80%}.textContainerSynth[_ngcontent-%COMP%]{box-shadow:0 0 11px 2px #0006;margin-left:5%;width:90%;color:var(--dark-text);background-color:#f8f9fa;text-align:left;overflow:auto;height:100%}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{white-space:nowrap;display:inline;border-style:none;color:var(--dark-text);width:10rem;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.bookTitle[_ngcontent-%COMP%]{overflow:auto;color:var(--dark-text);margin-left:2em;margin-right:2em;display:inline-block;font-size:16pt}.recordingSaveIcon[_ngcontent-%COMP%]{width:10rem;color:var(--dark-text);border-style:none;font-size:11pt;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{white-space:nowrap;color:var(--scealai-light-brown)}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);cursor:pointer;transition:.5s}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:10px;font-weight:700;border-radius:10px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.recordingBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px;float:right}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.recognisedSpeech[_ngcontent-%COMP%]{color:var(--scealai-green);font-style:italic;padding-left:5px}.audioContainer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.audioPlayer[_ngcontent-%COMP%]{width:25%;height:35px}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}.selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}.blink[_ngcontent-%COMP%]{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),l})(),canActivate:[i.P],canDeactivate:[y]}];let dn=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[o.Bz.forChild(cn),o.Bz]}),l})();var ln=n(3869),un=n(4385);let pn=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[a.ez,dn,un.LD,E.u5,ln.F,Vt,Ht.ot,jt.Ps,Gt.fi.forRoot({customOptions:[{import:"formats/font",whitelist:["sans-serif","serif","monospace","arial","times-new-roman"]}]})]}),l})()},7230:function(p){p.exports=function(h){var n={};function a(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return h[o].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=h,a.c=n,a.d=function(o,i,c){a.o(o,i)||Object.defineProperty(o,i,{enumerable:!0,get:c})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,i){if(1&i&&(o=a(o)),8&i||4&i&&"object"==typeof o&&o&&o.__esModule)return o;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),2&i&&"string"!=typeof o)for(var f in o)a.d(c,f,function(t){return o[t]}.bind(null,f));return c},a.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(i,"a",i),i},a.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},a.p="",a(a.s=90)}({17:function(h,n,a){"use strict";n.__esModule=!0,n.default=void 0;var o=a(18),i=function(){function c(){}return c.getFirstMatch=function(f,t){var r=t.match(f);return r&&r.length>0&&r[1]||""},c.getSecondMatch=function(f,t){var r=t.match(f);return r&&r.length>1&&r[2]||""},c.matchAndReturnConst=function(f,t,r){if(f.test(t))return r},c.getWindowsVersionName=function(f){switch(f){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},c.getMacOSVersionName=function(f){var t=f.split(".").splice(0,2).map(function(r){return parseInt(r,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},c.getAndroidVersionName=function(f){var t=f.split(".").splice(0,2).map(function(r){return parseInt(r,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},c.getVersionPrecision=function(f){return f.split(".").length},c.compareVersions=function(f,t,r){void 0===r&&(r=!1);var s=c.getVersionPrecision(f),y=c.getVersionPrecision(t),g=Math.max(s,y),v=0,b=c.map([f,t],function(_){var m=g-c.getVersionPrecision(_),C=_+new Array(m+1).join(".0");return c.map(C.split("."),function(M){return new Array(20-M.length).join("0")+M}).reverse()});for(r&&(v=g-Math.min(s,y)),g-=1;g>=v;){if(b[0][g]>b[1][g])return 1;if(b[0][g]===b[1][g]){if(g===v)return 0;g-=1}else if(b[0][g]<b[1][g])return-1}},c.map=function(f,t){var r,s=[];if(Array.prototype.map)return Array.prototype.map.call(f,t);for(r=0;r<f.length;r+=1)s.push(t(f[r]));return s},c.find=function(f,t){var r,s;if(Array.prototype.find)return Array.prototype.find.call(f,t);for(r=0,s=f.length;r<s;r+=1){var y=f[r];if(t(y,r))return y}},c.assign=function(f){for(var t,r,s=f,y=arguments.length,g=new Array(y>1?y-1:0),v=1;v<y;v++)g[v-1]=arguments[v];if(Object.assign)return Object.assign.apply(Object,[f].concat(g));var b=function(){var _=g[t];"object"==typeof _&&null!==_&&Object.keys(_).forEach(function(m){s[m]=_[m]})};for(t=0,r=g.length;t<r;t+=1)b();return f},c.getBrowserAlias=function(f){return o.BROWSER_ALIASES_MAP[f]},c.getBrowserTypeByAlias=function(f){return o.BROWSER_MAP[f]||""},c}();n.default=i,h.exports=n.default},18:function(h,n,a){"use strict";n.__esModule=!0,n.ENGINE_MAP=n.OS_MAP=n.PLATFORMS_MAP=n.BROWSER_MAP=n.BROWSER_ALIASES_MAP=void 0,n.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},n.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},n.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},n.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},n.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(h,n,a){"use strict";n.__esModule=!0,n.default=void 0;var o,i=(o=a(91))&&o.__esModule?o:{default:o},c=a(18);function f(r,s){for(var y=0;y<s.length;y++){var g=s[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(r,g.key,g)}}var t=function(){function r(){}var s,g;return r.getParser=function(v,b){if(void 0===b&&(b=!1),"string"!=typeof v)throw new Error("UserAgent should be a string");return new i.default(v,b)},r.parse=function(v){return new i.default(v).getResult()},s=r,g=[{key:"BROWSER_MAP",get:function(){return c.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return c.ENGINE_MAP}},{key:"OS_MAP",get:function(){return c.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return c.PLATFORMS_MAP}}],null&&f(s.prototype,null),g&&f(s,g),r}();n.default=t,h.exports=n.default},91:function(h,n,a){"use strict";n.__esModule=!0,n.default=void 0;var o=r(a(92)),i=r(a(93)),c=r(a(94)),f=r(a(95)),t=r(a(17));function r(y){return y&&y.__esModule?y:{default:y}}var s=function(){function y(v,b){if(void 0===b&&(b=!1),null==v||""===v)throw new Error("UserAgent parameter can't be empty");this._ua=v,this.parsedResult={},!0!==b&&this.parse()}var g=y.prototype;return g.getUA=function(){return this._ua},g.test=function(v){return v.test(this._ua)},g.parseBrowser=function(){var v=this;this.parsedResult.browser={};var b=t.default.find(o.default,function(_){if("function"==typeof _.test)return _.test(v);if(_.test instanceof Array)return _.test.some(function(m){return v.test(m)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.browser=b.describe(this.getUA())),this.parsedResult.browser},g.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},g.getBrowserName=function(v){return v?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},g.getBrowserVersion=function(){return this.getBrowser().version},g.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},g.parseOS=function(){var v=this;this.parsedResult.os={};var b=t.default.find(i.default,function(_){if("function"==typeof _.test)return _.test(v);if(_.test instanceof Array)return _.test.some(function(m){return v.test(m)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.os=b.describe(this.getUA())),this.parsedResult.os},g.getOSName=function(v){var b=this.getOS().name;return v?String(b).toLowerCase()||"":b||""},g.getOSVersion=function(){return this.getOS().version},g.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},g.getPlatformType=function(v){void 0===v&&(v=!1);var b=this.getPlatform().type;return v?String(b).toLowerCase()||"":b||""},g.parsePlatform=function(){var v=this;this.parsedResult.platform={};var b=t.default.find(c.default,function(_){if("function"==typeof _.test)return _.test(v);if(_.test instanceof Array)return _.test.some(function(m){return v.test(m)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.platform=b.describe(this.getUA())),this.parsedResult.platform},g.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},g.getEngineName=function(v){return v?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},g.parseEngine=function(){var v=this;this.parsedResult.engine={};var b=t.default.find(f.default,function(_){if("function"==typeof _.test)return _.test(v);if(_.test instanceof Array)return _.test.some(function(m){return v.test(m)});throw new Error("Browser's test function is not valid")});return b&&(this.parsedResult.engine=b.describe(this.getUA())),this.parsedResult.engine},g.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},g.getResult=function(){return t.default.assign({},this.parsedResult)},g.satisfies=function(v){var b=this,_={},m=0,C={},M=0;if(Object.keys(v).forEach(function(R){var Z=v[R];"string"==typeof Z?(C[R]=Z,M+=1):"object"==typeof Z&&(_[R]=Z,m+=1)}),m>0){var A=Object.keys(_),k=t.default.find(A,function(R){return b.isOS(R)});if(k){var S=this.satisfies(_[k]);if(void 0!==S)return S}var T=t.default.find(A,function(R){return b.isPlatform(R)});if(T){var F=this.satisfies(_[T]);if(void 0!==F)return F}}if(M>0){var N=Object.keys(C),j=t.default.find(N,function(R){return b.isBrowser(R,!0)});if(void 0!==j)return this.compareVersion(C[j])}},g.isBrowser=function(v,b){void 0===b&&(b=!1);var _=this.getBrowserName().toLowerCase(),m=v.toLowerCase(),C=t.default.getBrowserTypeByAlias(m);return b&&C&&(m=C.toLowerCase()),m===_},g.compareVersion=function(v){var b=[0],_=v,m=!1,C=this.getBrowserVersion();if("string"==typeof C)return">"===v[0]||"<"===v[0]?(_=v.substr(1),"="===v[1]?(m=!0,_=v.substr(2)):b=[],b.push(">"===v[0]?1:-1)):"="===v[0]?_=v.substr(1):"~"===v[0]&&(m=!0,_=v.substr(1)),b.indexOf(t.default.compareVersions(C,_,m))>-1},g.isOS=function(v){return this.getOSName(!0)===String(v).toLowerCase()},g.isPlatform=function(v){return this.getPlatformType(!0)===String(v).toLowerCase()},g.isEngine=function(v){return this.getEngineName(!0)===String(v).toLowerCase()},g.is=function(v,b){return void 0===b&&(b=!1),this.isBrowser(v,b)||this.isOS(v)||this.isPlatform(v)},g.some=function(v){var b=this;return void 0===v&&(v=[]),v.some(function(_){return b.is(_)})},y}();n.default=s,h.exports=n.default},92:function(h,n,a){"use strict";n.__esModule=!0,n.default=void 0;var o,i=(o=a(17))&&o.__esModule?o:{default:o},c=/version\/(\d+(\.?_?\d+)+)/i;n.default=[{test:[/googlebot/i],describe:function(t){var r={name:"Googlebot"},s=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/opera/i],describe:function(t){var r={name:"Opera"},s=i.default.getFirstMatch(c,t)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/opr\/|opios/i],describe:function(t){var r={name:"Opera"},s=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/SamsungBrowser/i],describe:function(t){var r={name:"Samsung Internet for Android"},s=i.default.getFirstMatch(c,t)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/Whale/i],describe:function(t){var r={name:"NAVER Whale Browser"},s=i.default.getFirstMatch(c,t)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/MZBrowser/i],describe:function(t){var r={name:"MZ Browser"},s=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/focus/i],describe:function(t){var r={name:"Focus"},s=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/swing/i],describe:function(t){var r={name:"Swing"},s=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/coast/i],describe:function(t){var r={name:"Opera Coast"},s=i.default.getFirstMatch(c,t)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var r={name:"Opera Touch"},s=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/yabrowser/i],describe:function(t){var r={name:"Yandex Browser"},s=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/ucbrowser/i],describe:function(t){var r={name:"UC Browser"},s=i.default.getFirstMatch(c,t)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/Maxthon|mxios/i],describe:function(t){var r={name:"Maxthon"},s=i.default.getFirstMatch(c,t)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/epiphany/i],describe:function(t){var r={name:"Epiphany"},s=i.default.getFirstMatch(c,t)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/puffin/i],describe:function(t){var r={name:"Puffin"},s=i.default.getFirstMatch(c,t)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/sleipnir/i],describe:function(t){var r={name:"Sleipnir"},s=i.default.getFirstMatch(c,t)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/k-meleon/i],describe:function(t){var r={name:"K-Meleon"},s=i.default.getFirstMatch(c,t)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/micromessenger/i],describe:function(t){var r={name:"WeChat"},s=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/qqbrowser/i],describe:function(t){var r={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},s=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/msie|trident/i],describe:function(t){var r={name:"Internet Explorer"},s=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/\sedg\//i],describe:function(t){var r={name:"Microsoft Edge"},s=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/edg([ea]|ios)/i],describe:function(t){var r={name:"Microsoft Edge"},s=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/vivaldi/i],describe:function(t){var r={name:"Vivaldi"},s=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/seamonkey/i],describe:function(t){var r={name:"SeaMonkey"},s=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/sailfish/i],describe:function(t){var r={name:"Sailfish"},s=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return s&&(r.version=s),r}},{test:[/silk/i],describe:function(t){var r={name:"Amazon Silk"},s=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/phantom/i],describe:function(t){var r={name:"PhantomJS"},s=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/slimerjs/i],describe:function(t){var r={name:"SlimerJS"},s=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var r={name:"BlackBerry"},s=i.default.getFirstMatch(c,t)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var r={name:"WebOS Browser"},s=i.default.getFirstMatch(c,t)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/bada/i],describe:function(t){var r={name:"Bada"},s=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/tizen/i],describe:function(t){var r={name:"Tizen"},s=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/qupzilla/i],describe:function(t){var r={name:"QupZilla"},s=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var r={name:"Firefox"},s=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/electron/i],describe:function(t){var r={name:"Electron"},s=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/MiuiBrowser/i],describe:function(t){var r={name:"Miui"},s=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/chromium/i],describe:function(t){var r={name:"Chromium"},s=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/chrome|crios|crmo/i],describe:function(t){var r={name:"Chrome"},s=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/GSA/i],describe:function(t){var r={name:"Google Search"},s=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:function(t){var r=!t.test(/like android/i),s=t.test(/android/i);return r&&s},describe:function(t){var r={name:"Android Browser"},s=i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/playstation 4/i],describe:function(t){var r={name:"PlayStation 4"},s=i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/safari|applewebkit/i],describe:function(t){var r={name:"Safari"},s=i.default.getFirstMatch(c,t);return s&&(r.version=s),r}},{test:[/.*/i],describe:function(t){var r=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(r,t),version:i.default.getSecondMatch(r,t)}}}],h.exports=n.default},93:function(h,n,a){"use strict";n.__esModule=!0,n.default=void 0;var o,i=(o=a(17))&&o.__esModule?o:{default:o},c=a(18);n.default=[{test:[/Roku\/DVP/],describe:function(t){var r=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:c.OS_MAP.Roku,version:r}}},{test:[/windows phone/i],describe:function(t){var r=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:c.OS_MAP.WindowsPhone,version:r}}},{test:[/windows /i],describe:function(t){var r=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),s=i.default.getWindowsVersionName(r);return{name:c.OS_MAP.Windows,version:r,versionName:s}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var r={name:c.OS_MAP.iOS},s=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return s&&(r.version=s),r}},{test:[/macintosh/i],describe:function(t){var r=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),s=i.default.getMacOSVersionName(r),y={name:c.OS_MAP.MacOS,version:r};return s&&(y.versionName=s),y}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var r=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:c.OS_MAP.iOS,version:r}}},{test:function(t){var r=!t.test(/like android/i),s=t.test(/android/i);return r&&s},describe:function(t){var r=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),s=i.default.getAndroidVersionName(r),y={name:c.OS_MAP.Android,version:r};return s&&(y.versionName=s),y}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var r=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),s={name:c.OS_MAP.WebOS};return r&&r.length&&(s.version=r),s}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var r=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||i.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:c.OS_MAP.BlackBerry,version:r}}},{test:[/bada/i],describe:function(t){var r=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:c.OS_MAP.Bada,version:r}}},{test:[/tizen/i],describe:function(t){var r=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:c.OS_MAP.Tizen,version:r}}},{test:[/linux/i],describe:function(){return{name:c.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:c.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var r=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:c.OS_MAP.PlayStation4,version:r}}}],h.exports=n.default},94:function(h,n,a){"use strict";n.__esModule=!0,n.default=void 0;var o,i=(o=a(17))&&o.__esModule?o:{default:o},c=a(18);n.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var r=i.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",s={type:c.PLATFORMS_MAP.mobile,vendor:"Huawei"};return r&&(s.model=r),s}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:c.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:c.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:c.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:c.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:c.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:c.PLATFORMS_MAP.tablet}}},{test:function(t){var r=t.test(/ipod|iphone/i),s=t.test(/like (ipod|iphone)/i);return r&&!s},describe:function(t){var r=i.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:c.PLATFORMS_MAP.mobile,vendor:"Apple",model:r}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:c.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:c.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:c.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:c.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:c.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var r=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&r>=3},describe:function(){return{type:c.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:c.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:c.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:c.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:c.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:c.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:c.PLATFORMS_MAP.tv}}}],h.exports=n.default},95:function(h,n,a){"use strict";n.__esModule=!0,n.default=void 0;var o,i=(o=a(17))&&o.__esModule?o:{default:o},c=a(18);n.default=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:c.ENGINE_MAP.Blink};var r=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:c.ENGINE_MAP.EdgeHTML,version:r}}},{test:[/trident/i],describe:function(t){var r={name:c.ENGINE_MAP.Trident},s=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:function(t){return t.test(/presto/i)},describe:function(t){var r={name:c.ENGINE_MAP.Presto},s=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:function(t){var r=t.test(/gecko/i),s=t.test(/like gecko/i);return r&&!s},describe:function(t){var r={name:c.ENGINE_MAP.Gecko},s=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:c.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var r={name:c.ENGINE_MAP.WebKit},s=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}}],h.exports=n.default}})},7244:(p,h,n)=>{var i=n(3436)(n(2119),"DataView");p.exports=i},4994:(p,h,n)=>{var a=n(4312),o=n(6421),i=n(13),c=n(8685),f=n(6676);function t(r){var s=-1,y=null==r?0:r.length;for(this.clear();++s<y;){var g=r[s];this.set(g[0],g[1])}}t.prototype.clear=a,t.prototype.delete=o,t.prototype.get=i,t.prototype.has=c,t.prototype.set=f,p.exports=t},9215:(p,h,n)=>{var a=n(1840),o=n(4378),i=n(4981),c=n(7343),f=n(8895);function t(r){var s=-1,y=null==r?0:r.length;for(this.clear();++s<y;){var g=r[s];this.set(g[0],g[1])}}t.prototype.clear=a,t.prototype.delete=o,t.prototype.get=i,t.prototype.has=c,t.prototype.set=f,p.exports=t},1501:(p,h,n)=>{var i=n(3436)(n(2119),"Map");p.exports=i},9850:(p,h,n)=>{var a=n(638),o=n(1184),i=n(866),c=n(3771),f=n(1772);function t(r){var s=-1,y=null==r?0:r.length;for(this.clear();++s<y;){var g=r[s];this.set(g[0],g[1])}}t.prototype.clear=a,t.prototype.delete=o,t.prototype.get=i,t.prototype.has=c,t.prototype.set=f,p.exports=t},4267:(p,h,n)=>{var i=n(3436)(n(2119),"Promise");p.exports=i},6323:(p,h,n)=>{var i=n(3436)(n(2119),"Set");p.exports=i},2858:(p,h,n)=>{var a=n(9215),o=n(3720),i=n(4410),c=n(5576),f=n(2247),t=n(1585);function r(s){var y=this.__data__=new a(s);this.size=y.size}r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=c,r.prototype.has=f,r.prototype.set=t,p.exports=r},443:(p,h,n)=>{var a=n(2119);p.exports=a.Symbol},3457:(p,h,n)=>{var a=n(2119);p.exports=a.Uint8Array},4243:(p,h,n)=>{var i=n(3436)(n(2119),"WeakMap");p.exports=i},6837:p=>{p.exports=function h(n,a){for(var o=-1,i=null==n?0:n.length;++o<i&&!1!==a(n[o],o,n););return n}},9779:p=>{p.exports=function h(n,a){for(var o=-1,i=null==n?0:n.length,c=0,f=[];++o<i;){var t=n[o];a(t,o,n)&&(f[c++]=t)}return f}},2271:(p,h,n)=>{var a=n(5334),o=n(7151),i=n(1503),c=n(891),f=n(8442),t=n(8159),s=Object.prototype.hasOwnProperty;p.exports=function y(g,v){var b=i(g),_=!b&&o(g),m=!b&&!_&&c(g),C=!b&&!_&&!m&&t(g),M=b||_||m||C,A=M?a(g.length,String):[],k=A.length;for(var S in g)(v||s.call(g,S))&&(!M||!("length"==S||m&&("offset"==S||"parent"==S)||C&&("buffer"==S||"byteLength"==S||"byteOffset"==S)||f(S,k)))&&A.push(S);return A}},5059:p=>{p.exports=function h(n,a){for(var o=-1,i=a.length,c=n.length;++o<i;)n[c+o]=a[o];return n}},9719:(p,h,n)=>{var a=n(5683),o=n(217),c=Object.prototype.hasOwnProperty;p.exports=function f(t,r,s){var y=t[r];(!c.call(t,r)||!o(y,s)||void 0===s&&!(r in t))&&a(t,r,s)}},3503:(p,h,n)=>{var a=n(217);p.exports=function o(i,c){for(var f=i.length;f--;)if(a(i[f][0],c))return f;return-1}},4121:(p,h,n)=>{var a=n(1989),o=n(118);p.exports=function i(c,f){return c&&a(f,o(f),c)}},9287:(p,h,n)=>{var a=n(1989),o=n(6555);p.exports=function i(c,f){return c&&a(f,o(f),c)}},5683:(p,h,n)=>{var a=n(6713);p.exports=function o(i,c,f){"__proto__"==c&&a?a(i,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):i[c]=f}},4462:(p,h,n)=>{var a=n(2858),o=n(6837),i=n(9719),c=n(4121),f=n(9287),t=n(9292),r=n(9454),s=n(4444),y=n(9905),g=n(7597),v=n(6967),b=n(8794),_=n(6782),m=n(7878),C=n(4264),M=n(1503),A=n(891),k=n(3222),S=n(5940),T=n(799),F=n(118),N=n(6555),E="[object Arguments]",gt="[object Function]",ht="[object Object]",D={};D[E]=D["[object Array]"]=D["[object ArrayBuffer]"]=D["[object DataView]"]=D["[object Boolean]"]=D["[object Date]"]=D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Map]"]=D["[object Number]"]=D[ht]=D["[object RegExp]"]=D["[object Set]"]=D["[object String]"]=D["[object Symbol]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D["[object Error]"]=D[gt]=D["[object WeakMap]"]=!1,p.exports=function dt(I,z,X,_t,G,W){var L,at=1&z,lt=2&z,J=4&z;if(X&&(L=G?X(I,_t,G,W):X(I)),void 0!==L)return L;if(!S(I))return I;var pt=M(I);if(pt){if(L=_(I),!at)return r(I,L)}else{var nt=b(I),bt=nt==gt||"[object GeneratorFunction]"==nt;if(A(I))return t(I,at);if(nt==ht||nt==E||bt&&!G){if(L=lt||bt?{}:C(I),!at)return lt?y(I,f(L,I)):s(I,c(L,I))}else{if(!D[nt])return G?I:{};L=m(I,nt,at)}}W||(W=new a);var xt=W.get(I);if(xt)return xt;W.set(I,L),T(I)?I.forEach(function(tt){L.add(dt(tt,z,X,tt,I,W))}):k(I)&&I.forEach(function(tt,rt){L.set(rt,dt(tt,z,X,rt,I,W))});var yt=pt?void 0:(J?lt?v:g:lt?N:F)(I);return o(yt||I,function(tt,rt){yt&&(tt=I[rt=tt]),i(L,rt,dt(tt,z,X,rt,I,W))}),L}},8858:(p,h,n)=>{var a=n(5940),o=Object.create,i=function(){function c(){}return function(f){if(!a(f))return{};if(o)return o(f);c.prototype=f;var t=new c;return c.prototype=void 0,t}}();p.exports=i},8247:(p,h,n)=>{var a=n(5059),o=n(1503);p.exports=function i(c,f,t){var r=f(c);return o(c)?r:a(r,t(c))}},3337:(p,h,n)=>{var a=n(443),o=n(1318),i=n(2902),t=a?a.toStringTag:void 0;p.exports=function r(s){return null==s?void 0===s?"[object Undefined]":"[object Null]":t&&t in Object(s)?o(s):i(s)}},186:(p,h,n)=>{var a=n(3337),o=n(2671);p.exports=function c(f){return o(f)&&"[object Arguments]"==a(f)}},7021:(p,h,n)=>{var a=n(8794),o=n(2671);p.exports=function c(f){return o(f)&&"[object Map]"==a(f)}},7304:(p,h,n)=>{var a=n(5946),o=n(1943),i=n(5940),c=n(2827),t=/^\[object .+?Constructor\]$/,v=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");p.exports=function b(_){return!(!i(_)||o(_))&&(a(_)?v:t).test(c(_))}},771:(p,h,n)=>{var a=n(8794),o=n(2671);p.exports=function c(f){return o(f)&&"[object Set]"==a(f)}},1083:(p,h,n)=>{var a=n(3337),o=n(6231),i=n(2671),P={};P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Arguments]"]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object Boolean]"]=P["[object DataView]"]=P["[object Date]"]=P["[object Error]"]=P["[object Function]"]=P["[object Map]"]=P["[object Number]"]=P["[object Object]"]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object WeakMap]"]=!1,p.exports=function q(ot){return i(ot)&&o(ot.length)&&!!P[a(ot)]}},1172:(p,h,n)=>{var a=n(5488),o=n(5491),c=Object.prototype.hasOwnProperty;p.exports=function f(t){if(!a(t))return o(t);var r=[];for(var s in Object(t))c.call(t,s)&&"constructor"!=s&&r.push(s);return r}},2809:(p,h,n)=>{var a=n(5940),o=n(5488),i=n(2158),f=Object.prototype.hasOwnProperty;p.exports=function t(r){if(!a(r))return i(r);var s=o(r),y=[];for(var g in r)"constructor"==g&&(s||!f.call(r,g))||y.push(g);return y}},5334:p=>{p.exports=function h(n,a){for(var o=-1,i=Array(n);++o<n;)i[o]=a(o);return i}},5647:p=>{p.exports=function h(n){return function(a){return n(a)}}},3362:(p,h,n)=>{var a=n(3457);p.exports=function o(i){var c=new i.constructor(i.byteLength);return new a(c).set(new a(i)),c}},9292:(p,h,n)=>{p=n.nmd(p);var a=n(2119),o=h&&!h.nodeType&&h,i=o&&p&&!p.nodeType&&p,f=i&&i.exports===o?a.Buffer:void 0,t=f?f.allocUnsafe:void 0;p.exports=function r(s,y){if(y)return s.slice();var g=s.length,v=t?t(g):new s.constructor(g);return s.copy(v),v}},7e3:(p,h,n)=>{var a=n(3362);p.exports=function o(i,c){var f=c?a(i.buffer):i.buffer;return new i.constructor(f,i.byteOffset,i.byteLength)}},4098:p=>{var h=/\w*$/;p.exports=function n(a){var o=new a.constructor(a.source,h.exec(a));return o.lastIndex=a.lastIndex,o}},2533:(p,h,n)=>{var a=n(443),o=a?a.prototype:void 0,i=o?o.valueOf:void 0;p.exports=function c(f){return i?Object(i.call(f)):{}}},5208:(p,h,n)=>{var a=n(3362);p.exports=function o(i,c){var f=c?a(i.buffer):i.buffer;return new i.constructor(f,i.byteOffset,i.length)}},9454:p=>{p.exports=function h(n,a){var o=-1,i=n.length;for(a||(a=Array(i));++o<i;)a[o]=n[o];return a}},1989:(p,h,n)=>{var a=n(9719),o=n(5683);p.exports=function i(c,f,t,r){var s=!t;t||(t={});for(var y=-1,g=f.length;++y<g;){var v=f[y],b=r?r(t[v],c[v],v,t,c):void 0;void 0===b&&(b=c[v]),s?o(t,v,b):a(t,v,b)}return t}},4444:(p,h,n)=>{var a=n(1989),o=n(9383);p.exports=function i(c,f){return a(c,o(c),f)}},9905:(p,h,n)=>{var a=n(1989),o=n(3051);p.exports=function i(c,f){return a(c,o(c),f)}},4610:(p,h,n)=>{var a=n(2119);p.exports=a["__core-js_shared__"]},6713:(p,h,n)=>{var a=n(3436),o=function(){try{var i=a(Object,"defineProperty");return i({},"",{}),i}catch{}}();p.exports=o},9122:p=>{var h="object"==typeof global&&global&&global.Object===Object&&global;p.exports=h},7597:(p,h,n)=>{var a=n(8247),o=n(9383),i=n(118);p.exports=function c(f){return a(f,i,o)}},6967:(p,h,n)=>{var a=n(8247),o=n(3051),i=n(6555);p.exports=function c(f){return a(f,i,o)}},4537:(p,h,n)=>{var a=n(3819);p.exports=function o(i,c){var f=i.__data__;return a(c)?f["string"==typeof c?"string":"hash"]:f.map}},3436:(p,h,n)=>{var a=n(7304),o=n(1990);p.exports=function i(c,f){var t=o(c,f);return a(t)?t:void 0}},9519:(p,h,n)=>{var o=n(9385)(Object.getPrototypeOf,Object);p.exports=o},1318:(p,h,n)=>{var a=n(443),o=Object.prototype,i=o.hasOwnProperty,c=o.toString,f=a?a.toStringTag:void 0;p.exports=function t(r){var s=i.call(r,f),y=r[f];try{r[f]=void 0;var g=!0}catch{}var v=c.call(r);return g&&(s?r[f]=y:delete r[f]),v}},9383:(p,h,n)=>{var a=n(9779),o=n(9975),c=Object.prototype.propertyIsEnumerable,f=Object.getOwnPropertySymbols;p.exports=f?function(r){return null==r?[]:(r=Object(r),a(f(r),function(s){return c.call(r,s)}))}:o},3051:(p,h,n)=>{var a=n(5059),o=n(9519),i=n(9383),c=n(9975);p.exports=Object.getOwnPropertySymbols?function(r){for(var s=[];r;)a(s,i(r)),r=o(r);return s}:c},8794:(p,h,n)=>{var a=n(7244),o=n(1501),i=n(4267),c=n(6323),f=n(4243),t=n(3337),r=n(2827),s="[object Map]",g="[object Promise]",v="[object Set]",b="[object WeakMap]",_="[object DataView]",m=r(a),C=r(o),M=r(i),A=r(c),k=r(f),S=t;(a&&S(new a(new ArrayBuffer(1)))!=_||o&&S(new o)!=s||i&&S(i.resolve())!=g||c&&S(new c)!=v||f&&S(new f)!=b)&&(S=function(T){var F=t(T),N="[object Object]"==F?T.constructor:void 0,j=N?r(N):"";if(j)switch(j){case m:return _;case C:return s;case M:return g;case A:return v;case k:return b}return F}),p.exports=S},1990:p=>{p.exports=function h(n,a){return n?.[a]}},4312:(p,h,n)=>{var a=n(862);p.exports=function o(){this.__data__=a?a(null):{},this.size=0}},6421:p=>{p.exports=function h(n){var a=this.has(n)&&delete this.__data__[n];return this.size-=a?1:0,a}},13:(p,h,n)=>{var a=n(862),c=Object.prototype.hasOwnProperty;p.exports=function f(t){var r=this.__data__;if(a){var s=r[t];return"__lodash_hash_undefined__"===s?void 0:s}return c.call(r,t)?r[t]:void 0}},8685:(p,h,n)=>{var a=n(862),i=Object.prototype.hasOwnProperty;p.exports=function c(f){var t=this.__data__;return a?void 0!==t[f]:i.call(t,f)}},6676:(p,h,n)=>{var a=n(862);p.exports=function i(c,f){var t=this.__data__;return this.size+=this.has(c)?0:1,t[c]=a&&void 0===f?"__lodash_hash_undefined__":f,this}},6782:p=>{var n=Object.prototype.hasOwnProperty;p.exports=function a(o){var i=o.length,c=new o.constructor(i);return i&&"string"==typeof o[0]&&n.call(o,"index")&&(c.index=o.index,c.input=o.input),c}},7878:(p,h,n)=>{var a=n(3362),o=n(7e3),i=n(4098),c=n(2533),f=n(5208);p.exports=function Z(E,Y,P){var q=E.constructor;switch(Y){case"[object ArrayBuffer]":return a(E);case"[object Boolean]":case"[object Date]":return new q(+E);case"[object DataView]":return o(E,P);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return f(E,P);case"[object Map]":case"[object Set]":return new q;case"[object Number]":case"[object String]":return new q(E);case"[object RegExp]":return i(E);case"[object Symbol]":return c(E)}}},4264:(p,h,n)=>{var a=n(8858),o=n(9519),i=n(5488);p.exports=function c(f){return"function"!=typeof f.constructor||i(f)?{}:a(o(f))}},8442:p=>{var n=/^(?:0|[1-9]\d*)$/;p.exports=function a(o,i){var c=typeof o;return!!(i=i??9007199254740991)&&("number"==c||"symbol"!=c&&n.test(o))&&o>-1&&o%1==0&&o<i}},3819:p=>{p.exports=function h(n){var a=typeof n;return"string"==a||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==n:null===n}},1943:(p,h,n)=>{var c,a=n(4610),o=(c=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";p.exports=function i(c){return!!o&&o in c}},5488:p=>{var h=Object.prototype;p.exports=function n(a){var o=a&&a.constructor;return a===("function"==typeof o&&o.prototype||h)}},1840:p=>{p.exports=function h(){this.__data__=[],this.size=0}},4378:(p,h,n)=>{var a=n(3503),i=Array.prototype.splice;p.exports=function c(f){var t=this.__data__,r=a(t,f);return!(r<0||(r==t.length-1?t.pop():i.call(t,r,1),--this.size,0))}},4981:(p,h,n)=>{var a=n(3503);p.exports=function o(i){var c=this.__data__,f=a(c,i);return f<0?void 0:c[f][1]}},7343:(p,h,n)=>{var a=n(3503);p.exports=function o(i){return a(this.__data__,i)>-1}},8895:(p,h,n)=>{var a=n(3503);p.exports=function o(i,c){var f=this.__data__,t=a(f,i);return t<0?(++this.size,f.push([i,c])):f[t][1]=c,this}},638:(p,h,n)=>{var a=n(4994),o=n(9215),i=n(1501);p.exports=function c(){this.size=0,this.__data__={hash:new a,map:new(i||o),string:new a}}},1184:(p,h,n)=>{var a=n(4537);p.exports=function o(i){var c=a(this,i).delete(i);return this.size-=c?1:0,c}},866:(p,h,n)=>{var a=n(4537);p.exports=function o(i){return a(this,i).get(i)}},3771:(p,h,n)=>{var a=n(4537);p.exports=function o(i){return a(this,i).has(i)}},1772:(p,h,n)=>{var a=n(4537);p.exports=function o(i,c){var f=a(this,i),t=f.size;return f.set(i,c),this.size+=f.size==t?0:1,this}},862:(p,h,n)=>{var o=n(3436)(Object,"create");p.exports=o},5491:(p,h,n)=>{var o=n(9385)(Object.keys,Object);p.exports=o},2158:p=>{p.exports=function h(n){var a=[];if(null!=n)for(var o in Object(n))a.push(o);return a}},3597:(p,h,n)=>{p=n.nmd(p);var a=n(9122),o=h&&!h.nodeType&&h,i=o&&p&&!p.nodeType&&p,f=i&&i.exports===o&&a.process,t=function(){try{return i&&i.require&&i.require("util").types||f&&f.binding&&f.binding("util")}catch{}}();p.exports=t},2902:p=>{var n=Object.prototype.toString;p.exports=function a(o){return n.call(o)}},9385:p=>{p.exports=function h(n,a){return function(o){return n(a(o))}}},2119:(p,h,n)=>{var a=n(9122),o="object"==typeof self&&self&&self.Object===Object&&self,i=a||o||Function("return this")();p.exports=i},3720:(p,h,n)=>{var a=n(9215);p.exports=function o(){this.__data__=new a,this.size=0}},4410:p=>{p.exports=function h(n){var a=this.__data__,o=a.delete(n);return this.size=a.size,o}},5576:p=>{p.exports=function h(n){return this.__data__.get(n)}},2247:p=>{p.exports=function h(n){return this.__data__.has(n)}},1585:(p,h,n)=>{var a=n(9215),o=n(1501),i=n(9850);p.exports=function f(t,r){var s=this.__data__;if(s instanceof a){var y=s.__data__;if(!o||y.length<199)return y.push([t,r]),this.size=++s.size,this;s=this.__data__=new i(y)}return s.set(t,r),this.size=s.size,this}},2827:p=>{var n=Function.prototype.toString;p.exports=function a(o){if(null!=o){try{return n.call(o)}catch{}try{return o+""}catch{}}return""}},1094:(p,h,n)=>{var a=n(4462);p.exports=function i(c){return a(c,4)}},217:p=>{p.exports=function h(n,a){return n===a||n!=n&&a!=a}},7151:(p,h,n)=>{var a=n(186),o=n(2671),i=Object.prototype,c=i.hasOwnProperty,f=i.propertyIsEnumerable,t=a(function(){return arguments}())?a:function(r){return o(r)&&c.call(r,"callee")&&!f.call(r,"callee")};p.exports=t},1503:p=>{p.exports=Array.isArray},6507:(p,h,n)=>{var a=n(5946),o=n(6231);p.exports=function i(c){return null!=c&&o(c.length)&&!a(c)}},891:(p,h,n)=>{p=n.nmd(p);var a=n(2119),o=n(3580),i=h&&!h.nodeType&&h,c=i&&p&&!p.nodeType&&p,t=c&&c.exports===i?a.Buffer:void 0;p.exports=(t?t.isBuffer:void 0)||o},5946:(p,h,n)=>{var a=n(3337),o=n(5940);p.exports=function r(s){if(!o(s))return!1;var y=a(s);return"[object Function]"==y||"[object GeneratorFunction]"==y||"[object AsyncFunction]"==y||"[object Proxy]"==y}},6231:p=>{p.exports=function n(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=9007199254740991}},3222:(p,h,n)=>{var a=n(7021),o=n(5647),i=n(3597),c=i&&i.isMap,f=c?o(c):a;p.exports=f},5940:p=>{p.exports=function h(n){var a=typeof n;return null!=n&&("object"==a||"function"==a)}},2671:p=>{p.exports=function h(n){return null!=n&&"object"==typeof n}},799:(p,h,n)=>{var a=n(771),o=n(5647),i=n(3597),c=i&&i.isSet,f=c?o(c):a;p.exports=f},8159:(p,h,n)=>{var a=n(1083),o=n(5647),i=n(3597),c=i&&i.isTypedArray,f=c?o(c):a;p.exports=f},118:(p,h,n)=>{var a=n(2271),o=n(1172),i=n(6507);p.exports=function c(f){return i(f)?a(f):o(f)}},6555:(p,h,n)=>{var a=n(2271),o=n(2809),i=n(6507);p.exports=function c(f){return i(f)?a(f,!0):o(f)}},9975:p=>{p.exports=function h(){return[]}},3580:p=>{p.exports=function h(){return!1}},2754:(p,h,n)=>{"use strict";h.TD=void 0;var o=n(4354);Object.defineProperty(h,"TD",{enumerable:!0,get:function(){return o.requestMediaPermissions}})},4354:function(p,h,n){"use strict";var a=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(h,"__esModule",{value:!0}),h.requestVideoPermissions=h.requestAudioPermissions=h.requestMediaPermissions=h.MediaPermissionsErrorType=void 0;const o=a(n(7230));var i,r;(r=i=h.MediaPermissionsErrorType||(h.MediaPermissionsErrorType={})).SystemPermissionDenied="SystemPermissionDenied",r.UserPermissionDenied="UserPermissionDenied",r.CouldNotStartVideoSource="CouldNotStartVideoSource",r.Generic="Generic",h.requestMediaPermissions=r=>new Promise((s,y)=>{navigator.mediaDevices.getUserMedia(r??{audio:!0,video:!0}).then(g=>{g.getTracks().forEach(v=>{v.stop()}),s(!0)}).catch(g=>{const b=o.default.getParser(window.navigator.userAgent).getBrowserName(),_=g.name,m=g.message;let C=i.Generic;"Chrome"===b?"NotAllowedError"===_?"Permission denied by system"===m?C=i.SystemPermissionDenied:"Permission denied"===m&&(C=i.UserPermissionDenied):"NotReadableError"===_&&(C=i.CouldNotStartVideoSource):"Safari"===b?"NotAllowedError"===_&&(C=i.UserPermissionDenied):"Microsoft Edge"===b?"NotAllowedError"===_?C=i.UserPermissionDenied:"NotReadableError"===_&&(C=i.CouldNotStartVideoSource):"Firefox"===b&&("NotFoundError"===_||"NotReadableError"===_?C=i.SystemPermissionDenied:"NotAllowedError"===_?C=i.UserPermissionDenied:"AbortError"===_&&(C=i.CouldNotStartVideoSource)),y({type:C,name:g.name,message:g.message})})}),h.requestAudioPermissions=()=>(0,h.requestMediaPermissions)({audio:!0,video:!1}),h.requestVideoPermissions=()=>(0,h.requestMediaPermissions)({audio:!1,video:!0})},5439:p=>{window,p.exports=function(h){var n={};function a(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return h[o].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=h,a.c=n,a.d=function(o,i,c){a.o(o,i)||Object.defineProperty(o,i,{enumerable:!0,get:c})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,i){if(1&i&&(o=a(o)),8&i||4&i&&"object"==typeof o&&o&&o.__esModule)return o;var c=Object.create(null);if(a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:o}),2&i&&"string"!=typeof o)for(var f in o)a.d(c,f,function(t){return o[t]}.bind(null,f));return c},a.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(i,"a",i),i},a.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},a.p="/dist/",a(a.s=1)}([function(h,n,a){"use strict";var o=this&&this.__awaiter||function(c,f,t,r){return new(t||(t=Promise))(function(s,y){function g(_){try{b(r.next(_))}catch(m){y(m)}}function v(_){try{b(r.throw(_))}catch(m){y(m)}}function b(_){var m;_.done?s(_.value):(m=_.value,m instanceof t?m:new t(function(C){C(m)})).then(g,v)}b((r=r.apply(c,f||[])).next())})},i=this&&this.__generator||function(c,f){var t,r,s,y,g={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return y={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y;function v(b){return function(_){return function(m){if(t)throw new TypeError("Generator is already executing.");for(;y&&(y=0,m[0]&&(g=0)),g;)try{if(t=1,r&&(s=2&m[0]?r.return:m[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,m[1])).done)return s;switch(r=0,s&&(m=[2&m[0],s.value]),m[0]){case 0:case 1:s=m;break;case 4:return g.label++,{value:m[1],done:!1};case 5:g.label++,r=m[1],m=[0];continue;case 7:m=g.ops.pop(),g.trys.pop();continue;default:if(!((s=(s=g.trys).length>0&&s[s.length-1])||6!==m[0]&&2!==m[0])){g=0;continue}if(3===m[0]&&(!s||m[1]>s[0]&&m[1]<s[3])){g.label=m[1];break}if(6===m[0]&&g.label<s[1]){g.label=s[1],s=m;break}if(s&&g.label<s[2]){g.label=s[2],g.ops.push(m);break}s[2]&&g.ops.pop(),g.trys.pop();continue}m=f.call(c,g)}catch(C){m=[6,C],r=0}finally{t=s=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([b,_])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.file2b64=void 0,n.file2b64=function(c){return o(this,void 0,void 0,function(){var f,t;return i(this,function(r){return f=new FileReader,t=new Promise(function(s,y){f.addEventListener("load",function(){var g,v=null===(g=f.result)||void 0===g?void 0:g.toString();v?s(v):y("could not convert file to base64")},!1)}),f.readAsDataURL(c),[2,t]})})}},function(h,n,a){"use strict";var o=this&&this.__awaiter||function(g,v,b,_){return new(b||(b=Promise))(function(m,C){function M(S){try{k(_.next(S))}catch(T){C(T)}}function A(S){try{k(_.throw(S))}catch(T){C(T)}}function k(S){var T;S.done?m(S.value):(T=S.value,T instanceof b?T:new b(function(F){F(T)})).then(M,A)}k((_=_.apply(g,v||[])).next())})},i=this&&this.__generator||function(g,v){var b,_,m,C,M={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return C={next:A(0),throw:A(1),return:A(2)},"function"==typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function A(k){return function(S){return function(T){if(b)throw new TypeError("Generator is already executing.");for(;C&&(C=0,T[0]&&(M=0)),M;)try{if(b=1,_&&(m=2&T[0]?_.return:T[0]?_.throw||((m=_.return)&&m.call(_),0):_.next)&&!(m=m.call(_,T[1])).done)return m;switch(_=0,m&&(T=[2&T[0],m.value]),T[0]){case 0:case 1:m=T;break;case 4:return M.label++,{value:T[1],done:!1};case 5:M.label++,_=T[1],T=[0];continue;case 7:T=M.ops.pop(),M.trys.pop();continue;default:if(!((m=(m=M.trys).length>0&&m[m.length-1])||6!==T[0]&&2!==T[0])){M=0;continue}if(3===T[0]&&(!m||T[1]>m[0]&&T[1]<m[3])){M.label=T[1];break}if(6===T[0]&&M.label<m[1]){M.label=m[1],m=T;break}if(m&&M.label<m[2]){M.label=m[2],M.ops.push(T);break}m[2]&&M.ops.pop(),M.trys.pop();continue}T=v.call(g,M)}catch(F){T=[6,F],_=0}finally{b=m=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([k,S])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.imageCompressor=void 0;var c=a(2),f=a(3),t=a(0),r=a(4),s=a(5),y=function(){function g(v,b){var _=this;this.quill=v,this.options=b||{};var m=!!b.debug;this.Logger=new s.ConsoleLogger(m,!!b.suppressErrorLogging),(0,f.warnAboutOptions)(b,this.Logger),this.imageDrop=new c.ImageDrop(v,function(A){return o(_,void 0,void 0,function(){var k;return i(this,function(S){switch(S.label){case 0:return this.Logger.log("onImageDrop",{dataUrl:A}),[4,this.downscaleImageFromUrl(A)];case 1:return k=S.sent(),this.insertToEditor(k,g.b64toBlob(k)),[2]}})})},this.Logger),this.Logger.log("fileChanged",{options:b,quill:v,debug:m});var M=this.quill.getModule("toolbar");M?M.addHandler("image",function(){return _.selectLocalImage()}):this.Logger.error("Quill toolbar module not found! need { toolbar: // options } in Quill.modules for image icon to sit in")}return g.b64toBlob=function(v){for(var b=atob(v.split(",")[1]),_=v.slice(5).split(";")[0],m=new ArrayBuffer(b.length),C=new Uint8Array(m),M=0;M<b.length;M++)C[M]=b.charCodeAt(M);return new Blob([m],{type:_})},g.prototype.selectLocalImage=function(v){var b=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=function(){return b.fileChanged().then(function(){return v&&v()})},document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){b.fileHolder&&document.body.removeChild(b.fileHolder)})},g.prototype.fileChanged=function(v){var b;return o(this,void 0,void 0,function(){var _,m,C,M;return i(this,function(A){switch(A.label){case 0:return(_=v||(null===(b=this.fileHolder)||void 0===b?void 0:b.files))&&_.length?(this.Logger.log("fileChanged",{file:m=_[0]}),m?[4,(0,t.file2b64)(m)]:[2]):[2];case 1:return C=A.sent(),[4,this.downscaleImageFromUrl(C)];case 2:return M=A.sent(),this.insertToEditor(M,g.b64toBlob(M)),[2]}})})},g.prototype.downscaleImageFromUrl=function(v){return o(this,void 0,void 0,function(){var b;return i(this,function(_){switch(_.label){case 0:return[4,(0,r.downscaleImage)(this.Logger,v,this.options.maxWidth,this.options.maxHeight,this.options.imageType,this.options.keepImageTypes,this.options.ignoreImageTypes,this.options.quality)];case 1:return b=_.sent(),this.Logger.log("downscaleImageFromUrl",{dataUrl:v,dataUrlCompressed:b}),[2,b]}})})},g.prototype.insertToEditor=function(v,b){if(this.options.insertIntoEditor)this.options.insertIntoEditor(v,b);else{this.Logger.log("insertToEditor",{url:v}),this.range=this.quill.getSelection();var _=this.range;if(!_)return;this.logFileSize(v),this.quill.insertEmbed(_.index,"image","".concat(v),"user"),_.index++,this.quill.setSelection(_,"api")}},g.prototype.logFileSize=function(v){var b=(Math.round(3*(v.length-22)/4)/1024).toFixed(0);this.Logger.log("estimated img size: "+b+" kb")},g}();n.imageCompressor=y,window.imageCompressor=y,n.default=y},function(h,n,a){"use strict";var o=this&&this.__awaiter||function(y,g,v,b){return new(v||(v=Promise))(function(_,m){function C(k){try{A(b.next(k))}catch(S){m(S)}}function M(k){try{A(b.throw(k))}catch(S){m(S)}}function A(k){var S;k.done?_(k.value):(S=k.value,S instanceof v?S:new v(function(T){T(S)})).then(C,M)}A((b=b.apply(y,g||[])).next())})},i=this&&this.__generator||function(y,g){var v,b,_,m,C={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return m={next:M(0),throw:M(1),return:M(2)},"function"==typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m;function M(A){return function(k){return function(S){if(v)throw new TypeError("Generator is already executing.");for(;m&&(m=0,S[0]&&(C=0)),C;)try{if(v=1,b&&(_=2&S[0]?b.return:S[0]?b.throw||((_=b.return)&&_.call(b),0):b.next)&&!(_=_.call(b,S[1])).done)return _;switch(b=0,_&&(S=[2&S[0],_.value]),S[0]){case 0:case 1:_=S;break;case 4:return C.label++,{value:S[1],done:!1};case 5:C.label++,b=S[1],S=[0];continue;case 7:S=C.ops.pop(),C.trys.pop();continue;default:if(!((_=(_=C.trys).length>0&&_[_.length-1])||6!==S[0]&&2!==S[0])){C=0;continue}if(3===S[0]&&(!_||S[1]>_[0]&&S[1]<_[3])){C.label=S[1];break}if(6===S[0]&&C.label<_[1]){C.label=_[1],_=S;break}if(_&&C.label<_[2]){C.label=_[2],C.ops.push(S);break}_[2]&&C.ops.pop(),C.trys.pop();continue}S=g.call(y,C)}catch(T){S=[6,T],b=0}finally{v=_=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([A,k])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ImageDrop=void 0;var c=a(0),f=function(){function y(g,v,b){var _=this;this.quill=g,this.onNewDataUrl=v,this.logger=b,this.quill.root.addEventListener("drop",function(m){return _.handleDrop(m)},!1),this.quill.root.addEventListener("paste",function(m){return _.handlePaste(m)},!1)}return y.prototype.handleDrop=function(g){return o(this,void 0,void 0,function(){var v,b,_,m,C,M,A;return i(this,function(k){switch(k.label){case 0:return g.preventDefault(),document.caretRangeFromPoint&&(v=document.getSelection(),b=document.caretRangeFromPoint(g.clientX,g.clientY),v&&b&&v.setBaseAndExtent(b.startContainer,b.startOffset,b.startContainer,b.startOffset)),[4,r(g)];case 1:return _=k.sent(),m=Array.from(_||[]).filter(function(S){return s(S.type)}),(C=m?.[0])?[4,(0,c.file2b64)(C)]:[3,3];case 2:return A=k.sent(),this.logger.log("handleNewImageFiles",{evt:g,files:_,filesFiltered:m,firstImage:C,base64ImageSrc:A}),this.onNewDataUrl(A),[2];case 3:return[4,t(g)];case 4:return(M=k.sent())?[4,(0,c.file2b64)(M)]:[3,6];case 5:return A=k.sent(),this.logger.log("handleNewImageFiles",{evt:g,blob:M,base64ImageSrc:A}),this.onNewDataUrl(A),[2];case 6:return[2]}})})},y.prototype.handlePaste=function(g){var v,b;return o(this,void 0,void 0,function(){var _,m,C,M;return i(this,function(A){switch(A.label){case 0:return _=Array.from((null===(v=g?.clipboardData)||void 0===v?void 0:v.items)||[]),this.logger.log("handlePaste",{files:_,evt:g}),m=_.filter(function(k){return s(k.type)}),this.logger.log("handlePaste",{images:m,evt:g}),m.length?m.filter(function(k){return"text/html"!==k.type}).length?(g.preventDefault(),(C=null===(b=m.pop())||void 0===b?void 0:b.getAsFile())?[4,(0,c.file2b64)(C)]:[2]):(this.logger.log("handlePaste also detected html"),[2]):[2];case 1:return M=A.sent(),this.logger.log("handleNewImageFiles",{base64ImageSrc:M}),this.onNewDataUrl(M),[2]}})})},y}();function t(y){var g;return o(this,void 0,void 0,function(){var v;return i(this,function(b){switch(b.label){case 0:return(v=null===(g=y.dataTransfer)||void 0===g?void 0:g.getData("URL"))?[4,fetch(v)]:[3,3];case 1:return[4,b.sent().blob()];case 2:return[2,b.sent()];case 3:return[2]}})})}function r(y){var g;return o(this,void 0,void 0,function(){return i(this,function(v){return[2,null===(g=y?.dataTransfer)||void 0===g?void 0:g.files]})})}function s(y){return!!y.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)/i)}n.ImageDrop=f},function(h,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.warnAboutOptions=void 0,n.warnAboutOptions=function(o,i){o.maxWidth=o.maxWidth||1e3,o.maxHeight=o.maxHeight||1e3,o.maxWidth&&"number"!=typeof o.maxWidth&&(i.warn("[config error] 'maxWidth' is required to be a \"number\" (in pixels), \nreceived: ".concat(o.maxWidth,"\n-> using default 1000")),o.maxWidth=1e3),o.maxHeight&&"number"!=typeof o.maxHeight&&(i.warn("[config error] 'maxHeight' is required to be a \"number\" (in pixels), \nreceived: ".concat(o.maxHeight,"\n-> using default 1000")),o.maxHeight=1e3),o.quality&&"number"!=typeof o.quality&&(i.warn("quill.imageCompressor: [config error] 'quality' is required to be a \"number\", \nreceived: ".concat(o.quality,"\n-> using default 0.7")),o.quality=.7),!o.imageType||"string"==typeof o.imageType&&o.imageType.startsWith("image/")||(i.warn('quill.imageCompressor: [config error] \'imageType\' is required be in the form of "image/png" or "image/jpeg" etc ..., \nreceived: '.concat(o.imageType,"\n-> using default image/jpeg")),o.imageType="image/jpeg"),o.keepImageTypes||(o.keepImageTypes=[]),o.keepImageTypes&&!Array.isArray(o.keepImageTypes)&&(i.warn("quill.imageCompressor: [config error] 'keepImageTypes' is required to be a \"array\", received: ".concat(o.keepImageTypes," -> using default []")),o.keepImageTypes=[]),o.ignoreImageTypes||(o.ignoreImageTypes=[]),o.ignoreImageTypes&&!Array.isArray(o.ignoreImageTypes)&&(i.warn("quill.imageCompressor: [config error] 'ignoreImageTypes' is required to be a \"array\", received: ".concat(o.ignoreImageTypes," -> using default []")),o.ignoreImageTypes=[]),o.insertIntoEditor&&"function"!=typeof o.insertIntoEditor&&(i.warn("quill.imageCompressor: [config error] 'insertIntoEditor' is required to be a \"function\", received: ".concat(o.insertIntoEditor," -> using default undefined")),o.insertIntoEditor=void 0)}},function(h,n,a){"use strict";var o=this&&this.__awaiter||function(c,f,t,r){return new(t||(t=Promise))(function(s,y){function g(_){try{b(r.next(_))}catch(m){y(m)}}function v(_){try{b(r.throw(_))}catch(m){y(m)}}function b(_){var m;_.done?s(_.value):(m=_.value,m instanceof t?m:new t(function(C){C(m)})).then(g,v)}b((r=r.apply(c,f||[])).next())})},i=this&&this.__generator||function(c,f){var t,r,s,y,g={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return y={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y;function v(b){return function(_){return function(m){if(t)throw new TypeError("Generator is already executing.");for(;y&&(y=0,m[0]&&(g=0)),g;)try{if(t=1,r&&(s=2&m[0]?r.return:m[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,m[1])).done)return s;switch(r=0,s&&(m=[2&m[0],s.value]),m[0]){case 0:case 1:s=m;break;case 4:return g.label++,{value:m[1],done:!1};case 5:g.label++,r=m[1],m=[0];continue;case 7:m=g.ops.pop(),g.trys.pop();continue;default:if(!((s=(s=g.trys).length>0&&s[s.length-1])||6!==m[0]&&2!==m[0])){g=0;continue}if(3===m[0]&&(!s||m[1]>s[0]&&m[1]<s[3])){g.label=m[1];break}if(6===m[0]&&g.label<s[1]){g.label=s[1],s=m;break}if(s&&g.label<s[2]){g.label=s[2],g.ops.push(m);break}s[2]&&g.ops.pop(),g.trys.pop();continue}m=f.call(c,g)}catch(C){m=[6,C],r=0}finally{t=s=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([b,_])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.downscaleImage=void 0,n.downscaleImage=function(c,f,t,r,s,y,g,v){return o(this,void 0,void 0,function(){var b,_,m,C,M,A,k,S;return i(this,function(T){switch(T.label){case 0:return b=f.split(";")[0].split(":")[1],s=s||"image/jpeg",v=v||.7,(_=new Image).src=f,[4,new Promise(function(F){_.onload=function(){F()}})];case 1:return T.sent(),m=function(F,N,j,R){if(j&&R&&F<=j&&N<=R)return[F,N];if(j&&F>j){var Z=j,E=Math.floor(N/F*Z);if(R&&E>R){var Y=R;return[Math.floor(F/N*Y),Y]}return[Z,E]}return R&&N>R?(E=R,[Z=Math.floor(F/N*E),E]):[N,F]}(_.width,_.height,t,r),C=m[0],M=m[1],(A=document.createElement("canvas")).width=C,A.height=M,k=A.getContext("2d"),"image/jpeg"===s&&(k.fillStyle="#FFFFFF",k.fillRect(0,0,_.width,_.height)),g?.includes(b)?[2,f]:(y?.includes(b)&&(s=b),k.drawImage(_,0,0,C,M),S=A.toDataURL(s,v),c.log("downscaling image...",{args:{dataUrl:f,maxWidth:t,maxHeight:r,imageType:s,ignoreImageTypes:g,keepImageTypes:y,imageQuality:v},newHeight:M,newWidth:C}),[2,S])}})})}},function(h,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ConsoleLogger=void 0;var o=function(){function i(c,f){this.debug=c,this.suppressErrorLogging=f}return i.prototype.prefixString=function(){return"</> quill-image-compress: "},Object.defineProperty(i.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"error",{get:function(){return this.suppressErrorLogging?function(){}:console.error.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"warn",{get:function(){return this.suppressErrorLogging?function(){}:console.warn.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),i}();n.ConsoleLogger=o}])}}]);
(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[588],{9588:(qe,J,M)=>{"use strict";M.r(J),M.d(J,{StudentModule:()=>_i});var R=M(6895),u=M(1390),x=M(970),E=M(4633),B=M(8977),t=M(4650),h=M(5412);let p=(()=>{class a{canDeactivate(i,s,l){if(i.storySaved)return!0}}return a.\u0275fac=function(i){return new(i||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Z=(()=>{class a{constructor(i,s){this.dialog=i,this.ts=s}canDeactivate(i){if(i.recordingSaved)return!0;let s;return s=this.dialog.open(E.p,{data:{title:this.ts.l.save_changes_made_to_this_recording,type:"",confirmText:this.ts.l.save,cancelText:this.ts.l.cancel},width:"30vh"}),s.afterClosed().subscribe(l=>{if(s=void 0,l)return i.saveRecordings(),!0}),!1}}return a.\u0275fac=function(i){return new(i||a)(t.LFG(h.uw),t.LFG(B.D))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),T=(()=>{class a{canDeactivate(i,s,l){if(i.chosenSections)for(const v of i.chosenSections)v.stop();return!0}}return a.\u0275fac=function(i){return new(i||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var w=M(5861),A=M(7579),C=M(3905),b=M(1884),L=M(9971),q=M.n(L),V=M(5439),ee=M.n(V),H=M(7489),G=M(4186),ue=M(1745),xe=M(1765),ye=M(6469),ge=M(5592),He=M(25),Ie=M(9742),vn=M(6618);let ji=(()=>{class a{constructor(){}convertHtmlTextToArrayOfSentences(i){return this.sentences(this.convertHtmlToPlainText(i))}sentences(i){return this.naiveSentences(i)}splitWithReplacement(i,s){const l=i.split(s);return l.slice(0,-1).filter(Boolean).map(v=>v+s).concat(l.slice(-1).filter(Boolean))}extraShortening(i){return i.flatMap(s=>" "==s?[]:s.charAt(100)?this.splitWithReplacement(s,","):[s])}naiveSentences(i){let s=i.split("\n").filter(Boolean);for(const l of[".","!","?"])s=s.flatMap(v=>this.splitWithReplacement(v,l));return this.extraShortening(s)}convertHtmlToPlainText(i){const s=document.createElement("div");return s.innerHTML=i,s.textContent||s.innerText||""}}return a.\u0275fac=function(i){return new(i||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Pr=M(2791),Gn=M(9549),Rr=M(4385),Wn=M(3238);function xt(a,g){if(1&a&&(t.TgZ(0,"mat-option",3),t._uU(1),t.qZA()),2&a){const i=g.$implicit,s=t.oxw();t.s9C("gender",i.gender),t.Q6J("value",i),t.xp6(1),t.hij(" ",i.note+i.name+" ("+s.ts.message(i.dialect)+") "," ")}}let gt=(()=>{class a{constructor(i){this.ts=i,this.voices=Ie.be,this.selected=this.voices[0],this.selectVoice=new t.vpe}ngOnInit(){this.selectVoice.emit(this.selected)}color(i){return i.startsWith("f")?"rgba(255, 191, 194)":"rgba(194, 218, 255)"}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(B.D))},a.\u0275cmp=t.Xpm({type:a,selectors:[["synth-voice-select"]],outputs:{selectVoice:"selectVoice"},decls:5,vars:3,consts:[["appearance","fill"],[3,"value","valueChange","selectionChange"],["matNativeControl","","required","",3,"gender","value",4,"ngFor","ngForOf"],["matNativeControl","","required","",3,"gender","value"]],template:function(i,s){1&i&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",1),t.NdJ("valueChange",function(v){return s.selected=v})("selectionChange",function(v){return s.selectVoice.emit(v.value)}),t.YNc(4,xt,2,3,"mat-option",2),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(s.ts.message("voice")),t.xp6(1),t.Q6J("value",s.selected),t.xp6(1),t.Q6J("ngForOf",s.voices))},dependencies:[R.sg,Gn.KE,Gn.hX,Rr.gD,Wn.ey],encapsulation:2}),a})();const eo=["voiceSelect"];function yn(a,g){1&a&&t._UZ(0,"div",11)}function nt(a,g){1&a&&t._UZ(0,"div",11)}function to(a,g){if(1&a&&t._UZ(0,"app-synth-item",12),2&a){const i=g.$implicit,s=g.index,l=t.oxw();t.Q6J("synthItem",i)("i",s)("storyId",l.storyId)}}let no=(()=>{class a{constructor(i,s,l,v,F){this.router=i,this.textProcessor=s,this.cdref=l,this.synth=v,this.ts=F,this.hideEntireSynthesisPlayer=!0,this.synthItems=[],this.allAudioSources=[]}ngOnInit(){this.refresh()}refresh(i){i&&(this.selected=i),this.synthItems.map(s=>{s.audioUrl=void 0,s.dispose()}),this.text&&setTimeout(()=>{this.synthItems=this.textProcessor.sentences(this.text).map(s=>this.getSynthItem(s)),this.cdref.detectChanges(),this.audio=null},50)}getSynthItem(i){return new vn.e(i,this.selected,this.synth)}audioLoaded(){return this.synthItems.every(i=>null!=i.audioUrl||i.exceptions.length>0)}combineAndPlayAudio(){var i=this;return(0,w.Z)(function*(){i.audio||(yield i.combineAudioSources()),i.playAllAudio()})()}combineAudioSources(){var i=this;return(0,w.Z)(function*(){i.allAudioSources=i.synthItems.map(l=>l.audioUrl);let s=i.allAudioSources.map(l=>fetch(l).then(v=>v.blob()));yield Promise.all(s).then(l=>{let v=new Blob(l);i.blobUrl=URL.createObjectURL(v),i.audio=new Audio(i.blobUrl)})})()}playAllAudio(){this.audio.paused?this.audio.play():(this.audio.pause(),this.audio.currentTime=0)}downloadAudio(){var i=this;return(0,w.Z)(function*(){i.audio||(yield i.combineAudioSources());const s=document.createElement("a");s.style.display="none",s.href=i.blobUrl,s.download=i.storyTitle+".mp3",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i.blobUrl)})()}goToFastSynthesiser(){this.router.navigateByUrl("/student/synthesis/"+this.storyId)}stopSynthesis(){this.synthItems.map(i=>{i.audioUrl=void 0,i.dispose()})}toggleHidden(){this.hideEntireSynthesisPlayer=!this.hideEntireSynthesisPlayer,this.refresh()}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(u.F0),t.Y36(ji),t.Y36(t.sBO),t.Y36(Ie.cf),t.Y36(B.D))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-synthesis-player"]],viewQuery:function(i,s){if(1&i&&t.Gf(eo,5),2&i){let l;t.iGM(l=t.CRH())&&(s.voiceSelect=l.first)}},inputs:{storyId:"storyId",text:"text",storyTitle:"storyTitle"},decls:22,vars:11,consts:[[1,"synth",3,"hidden"],[1,"synthHeader"],[1,"reload",3,"click"],[3,"selectVoice"],[1,"fast-synth",3,"click"],[1,"btnContainer",2,"justify-content","space-between"],[1,"playAllButton",2,"text-align","center","width","100px",3,"disabled","click"],["class","spinner-grow","style","width: 1rem; height: 1rem;",4,"ngIf"],[1,"playAllButton",2,"text-align","center","width","150px",3,"disabled","click"],[1,"items"],[3,"synthItem","i","storyId",4,"ngFor","ngForOf"],[1,"spinner-grow",2,"width","1rem","height","1rem"],[3,"synthItem","i","storyId"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div")(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()(),t.TgZ(6,"div",1)(7,"div",2),t.NdJ("click",function(){return s.refresh()}),t._uU(8,"\u21bb"),t.qZA(),t.TgZ(9,"synth-voice-select",3),t.NdJ("selectVoice",function(v){return s.refresh(v)}),t.qZA(),t.TgZ(10,"div",4),t.NdJ("click",function(){return s.goToFastSynthesiser()}),t._uU(11),t.qZA()(),t.TgZ(12,"div",5)(13,"button",6),t.NdJ("click",function(){return s.combineAndPlayAudio()}),t.YNc(14,yn,1,0,"div",7),t._uU(15),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){return s.downloadAudio()}),t.YNc(17,nt,1,0,"div",7),t._uU(18),t.qZA()(),t._UZ(19,"hr"),t.TgZ(20,"div",9),t.YNc(21,to,1,3,"app-synth-item",10),t.qZA()()),2&i&&(t.Q6J("hidden",s.hideEntireSynthesisPlayer),t.xp6(3),t.Oqu(s.ts.l.listen_back_to_your_story?s.ts.l.listen_back_to_your_story:"listen_back_to_your_story"),t.xp6(2),t.hij("(",s.ts.l.dnn_synthesiser?s.ts.l.dnn_synthesiser:"dnn_synthesiser",")"),t.xp6(6),t.hij(" ",s.ts.l.go_to_fast_synthesiser?s.ts.l.go_to_fast_synthesiser:"go_to_fast_synthesiser"," "),t.xp6(2),t.Q6J("disabled",!s.audioLoaded()),t.xp6(1),t.Q6J("ngIf",!s.audioLoaded()),t.xp6(1),t.hij(" ",s.ts.l.play," "),t.xp6(1),t.Q6J("disabled",!s.audioLoaded()),t.xp6(1),t.Q6J("ngIf",!s.audioLoaded()),t.xp6(1),t.hij(" ",s.ts.l.download," "),t.xp6(3),t.Q6J("ngForOf",s.synthItems))},dependencies:[R.sg,R.O5,Pr.Y,gt],styles:[".synth[_ngcontent-%COMP%]{display:grid;padding:20px;border-radius:15px;margin:30px;background-color:#ffffff80;border:2px}.synthHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]{font-family:Lucida Sans Unicode;font-size:20px;width:2rem;height:2rem;border-radius:.5em;padding:0;margin:0;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]:hover{color:#000;font-weight:700}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]{padding:3px;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]:hover{color:#000;border-radius:2px;font-weight:700}.items[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:3px;padding-left:1rem;padding-top:1rem;border-radius:3px;text-align:left;flex-wrap:wrap;justify-content:left}.playAllButton[_ngcontent-%COMP%]{padding:5px;border-radius:5px;border:none;width:100px;text-align:center;background-color:#95cdcd}.playAllButton[_ngcontent-%COMP%]:hover:enabled{color:#fff}"]}),a})();var Jt=M(1512);const wn=function Rt(){const g=Object.values({"no break whitespace":"\xa0","ogham space mark":"\u1680","zero width no-break space":"\ufeff","ideographic space":"\u3000","narrow no-break space":"\u202f","EN QUAD":"\u2000","EM QUAD":"\u2001","EN SPACE (nut)":"\u2002","EM SPACE (mutton)":"\u2003","THREE-PER-EM SPACE":"\u2004","FOUR-PER-EM SPACE (mid space)":"\u2005","SIX-PER-EM SPACE":"\u2006","FIGURE SPACE":"\u2007","PUNCTUATION SPACE":"\u2008","THIN SPACE":"\u2009","HAIR SPACE":"\u200a"}).join("");return new RegExp("["+g+"]","g")}();function Qt(a){return Object.assign({},a)}class xn{constructor(g,i,s){this.errorsWithSentences=[],this.http=i,this.auth=s,this.grammarCheckers=g,this.cacheMap=new Map;for(const l of g)this.cacheMap.set(l.name,{})}check$(g){const i=new A.x;return this.check(function ro(a){return a.replace(wn," ")}(g),i),i}check(g,i){var s=this;return(0,w.Z)(function*(){const v=function io(a,g){const i=[];let s=0;for(let l of a)if(l){const F=s+g.slice(s).indexOf(l);i.push({sentence:l,offset:F}),s=F+l.length}return i}(yield(0,C.z)(s.http.post(G.Z.baseurl+"nlp/sentenceTokenize",{text:g})),g);s.errorsWithSentences=[];const F=(yield Promise.all(s.grammarCheckers.map(function(){var Y=(0,w.Z)(function*(ne){return yield Promise.all(v.map(function(){var ve=(0,w.Z)(function*(X,me){const ke=X.sentence,Ae=X.offset;function y(N){return N.fromX+=Ae,N.toX+=Ae,i.next(N),N}if(ke in s.cacheMap.get(ne.name)){let N=s.cacheMap.get(ne.name)[ke].map(Qt).map(y);return s.errorsWithSentences[me]=s.errorsWithSentences[me]?[s.errorsWithSentences[me][0].concat(N),ke,me]:[N,ke,me],N}const O=yield ne.check(ke,s.auth.getToken());s.cacheMap.get(ne.name)[ke]=O;const k=O.map(Qt).map(y);return s.errorsWithSentences[me]=s.errorsWithSentences[me]?[s.errorsWithSentences[me][0].concat(O),ke,me]:[O,ke,me],k});return function(X,me){return ve.apply(this,arguments)}}()))});return function(ne){return Y.apply(this,arguments)}}()))).flat().filter(Y=>Y.length);return i.complete(),s.countNewErrors(F.flat()),F})()}countNewErrors(g){var i=this;return(0,w.Z)(function*(){i.previousErrorTags=g,i.countNewErrors=i._countNewErrorsAfterFirstTime})()}_countNewErrorsAfterFirstTime(g){return(0,w.Z)(function*(){const s=function Yt(a,g){return function F(Y,ne){return ne.filter(ve=>!Y.includes(ve)||(Y[Y.indexOf(ve)]=null,!1)).map(ve=>JSON.parse(ve)[1])}(v(a),v(g));function v(Y){return Y.map(ne=>JSON.stringify([ne.errorText,ne.type]))}}(i.previousErrorTags,g),v={countsByType:(a=s,a.reduce(function i(s,l){return s[l]||(s[l]=0),s[l]+=1,s},{}))};var a;i.http.post(G.Z.baseurl+"gramadoir/userGrammarCounts/",v).subscribe(),i.previousErrorTags=g})()}saveErrorsWithSentences(g){var i=this;return(0,w.Z)(function*(){if(!i.errorsWithSentences||!g)return;const s={Authorization:"Bearer "+i.auth.getToken()};i.http.post(G.Z.baseurl+"gramadoir/insert/",{storyId:g,sentences:i.errorsWithSentences},{headers:s}).subscribe()})()}}const Jn=q().import("parchment"),Ke=q().import("ui/tooltip");q().register(new Jn.Attributor.Attribute("highlight-tag","highlight-tag",{scope:Jn.Scope.INLINE}));class Kt{constructor(g,i,s){this.mostRecentHoveredMessage="",this.quillEditor=g,this.ts=i,this.engagement=s}show(g){g&&((g=this.mergeTags(g)).forEach(s=>{this.quillEditor.formatText(s.fromX,s.toX-s.fromX,{"highlight-tag":JSON.stringify(s)},"api")}),document.querySelectorAll("[highlight-tag]").forEach(s=>{const l=s.getAttribute("highlight-tag");if(!l)return;const v=JSON.parse(l),F=new Ke(this.quillEditor);F.root.classList.add("custom-tooltip"),s.addEventListener("mouseover",()=>{this.mouseOverTagElem(v,s,F)}),s.addEventListener("mouseout",()=>{s.removeAttribute("data-selected"),F.hide()})}))}hide(g){g.forEach(i=>{this.quillEditor.formatText(i.fromX,i.toX-i.fromX,{"highlight-tag":null,"background-color":"","data-selected":null})}),document.querySelectorAll(".custom-tooltip").forEach(i=>i.remove())}hideAll(){document.querySelectorAll("[data-selected]").forEach(i=>i.removeAttribute("data-selected")),this.quillEditor.formatText(0,this.quillEditor.getLength(),{"highlight-tag":null,"background-color":"","data-selected":null}),document.querySelectorAll(".custom-tooltip").forEach(i=>i.remove())}mouseOverTagElem(g,i,s){i.setAttribute("data-selected","");const l=this.quillEditor.root.scrollTop;this.quillEditor.root.scroll({top:+l+1}),this.quillEditor.root.scroll({top:+l});const v=this.makeTooltipContents(g.data,this.ts.l.iso_code);s.root.innerHTML=v,this.mostRecentHoveredMessage=v,s.show(),s.position(this.quillEditor.getBounds(g.fromX,g.toX-g.fromX));let F=s.root.getAttribute("style")||"";F+="\n          font-size: medium;\n          padding: 20px;\n          -webkit-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          -moz-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          border: 2px solid var(--scealai-med-brown);\n          border-radius: 2px;\n        ",s.root.setAttribute("style",F);const Y=s.root.offsetLeft+s.root.offsetWidth-this.quillEditor.root.offsetWidth;s.root.style.left=Y>0?s.root.offsetLeft-Y-5+"px":s.root.style.left,s.root.style.left=s.root.offsetLeft<0?s.root.offsetLeft-s.root.offsetLeft+5+"px":s.root.style.left,this.engagement.mouseOverGrammarSuggestionEvent(g)}getGrammarMessage(g){return g?this.mostRecentHoveredMessage?this.mostRecentHoveredMessage:this.ts.message("hover_over_a_highlighted_word_for_a_grammar_suggestion"):this.ts.message("checking_grammar")}makeTooltipContents(g,i){return g.map(v=>`<div style="white-space: pre-wrap; text-align: left;"><span class="circle" style="background: ${v.color}"></span> ${(v=>"en"==i?v.nameEN:v.nameGA)(v)}: ${(v=>"en"==i?v.messageEN:v.messageGA)(v)}</div>`).join("<hr>")}overlaps(g,i){return g.fromX<=i.toX&&g.toX>=i.fromX}makeMergedTag(g){const i=Math.min(...g.map(v=>v.fromX)),s=Math.max(...g.map(v=>v.toX));return{data:g.reduce((v,F)=>this.arrayToSet(v.concat(F.data)),[]),fromX:i,toX:s}}mergeTags(g,i=0){if(!g.length)return g;const s=g[0],l=g.filter(ne=>this.overlaps(s,ne)),v=this.makeMergedTag(l),F=g.filter(ne=>!l.includes(ne)).concat([v]),Y=g.length==F.length;return Y&&i==g.length-1?g:this.mergeTags(F,Y?i+1:i)}arrayToSet(g){return g.filter((i,s,l)=>s===l.findIndex(v=>JSON.stringify(v)===JSON.stringify(i)))}}var Te=M(8043);const ut={name:"Leathan_Caol",check:function Xt(a){return Dt.apply(this,arguments)}},Vt=["a","o","u","\xe1","\xf3","\xfa","A","O","U","\xc1","\xd3","\xda"],bn=["e","i","\xe9","\xed","E","I","\xc9","\xcd"],$t=["b","c","d","f","g","h","l","m","n","p","r","s","t","v","z","B","C","D","F","G","H","L","M","N","P","R","S","T","V","Z"],Ve=["aniar","an\xedos","ar\xe9ir","ar\xeds","ar\xedst","anseo","ansin","ansi\xfad","c\xe9n","den","faoina","ina","inar","insa","lena","lenar"];function Dt(){return(Dt=(0,w.Z)(function*(a){return new Promise((g,i)=>{const s=oo(a);let l=[];for(const v of s)l.push({errorText:a,messageGA:Te.U["LEATHAN-CAOL"].messageGA,messageEN:Te.U["LEATHAN-CAOL"].messageEN,context:a,nameEN:Te.U["LEATHAN-CAOL"].nameEN,nameGA:Te.U["LEATHAN-CAOL"].nameGA,color:Te.U["LEATHAN-CAOL"].color,fromX:v.first,toX:v.first+1,type:"LEATHAN-CAOL"}),l.push({errorText:a,messageGA:Te.U["LEATHAN-CAOL"].messageGA,messageEN:Te.U["LEATHAN-CAOL"].messageEN,context:a,nameEN:Te.U["LEATHAN-CAOL"].nameEN,nameGA:Te.U["LEATHAN-CAOL"].nameGA,color:Te.U["LEATHAN-CAOL"].color,fromX:v.second,toX:v.second+1,type:"LEATHAN-CAOL"});g(l)})})).apply(this,arguments)}function oo(a){const g=function jt(a){let g=[];for(let i of Ve){let l=so(a.toLowerCase(),i);for(let v of l)g[v]=i.length}return g}(a),i=[];for(let s=0;s<a.length-1;s++)if(g[s]>0&&(s+=g[s]),bt(a[s])&&Cn(a[s+1])){let l=s++;for(;Cn(a[s]);)s++;if(bt(a[s])&&!zn(a[l],a[s])){const v=Yn(a[l]);i.push({broadFirst:v,first:l,second:s})}}return i}function so(a,g){var i=[];let s=new RegExp("[\\s.!?\\-]"+g+"[\\s.!?\\-]","g"),l=s.exec(a);for(;l;){s=new RegExp(g);let v=s.exec(l[0]);i.push(l.index+v.index),a=en(a,l.index,"#".repeat(5)),s=new RegExp("[\\s.!?\\-]"+g+"[\\s.!?\\-]","g"),l=s.exec(a)}return i}function en(a,g,i){return a.substr(0,g)+i+a.substr(g+i.length)}function bt(a){return Vt.includes(a)||bn.includes(a)}function Yn(a){return Vt.includes(a)}function Cn(a){return $t.includes(a)}function zn(a,g){return Vt.includes(a)&&Vt.includes(g)||bn.includes(a)&&bn.includes(g)}const Qn={name:"AnGramadoir",check:function Kn(a,g){return tn.apply(this,arguments)}};function tn(){return tn=(0,w.Z)(function*(a,g){return new Promise(function(){var i=(0,w.Z)(function*(s,l){let v=[];try{v=yield Sn(`${G.Z.baseurl}gramadoir/callAnGramadoir/${encodeURIComponent(a)}`,g)}catch{try{v=yield Sn(`https://cadhan.com/api/gramadoir/1.0/en/${a}`)}catch{l()}}s(v.map(Y=>{const ne=ao(Y.ruleId),ve=Te.U[ne],me=`"${function X(y){const k=y.match(/\/([^/]+)\//);return!!(k&&k.length>1)&&k[1]}(Y.msg)}"`,ke=`"${Y.errortext}"`;return{errorText:Y.errortext,messageGA:ve.messageGA.replace("#suggestion#",me).replace("#",ke),messageEN:ve.messageEN.replace("#suggestion#",me).replace("#",ke),context:Y.context,nameEN:ve.nameEN,nameGA:ve.nameGA,color:ve.color,fromX:+Y.fromx,toX:+Y.tox+1,type:ne}}))});return function(s,l){return i.apply(this,arguments)}}())}),tn.apply(this,arguments)}function Sn(a,g){return nn.apply(this,arguments)}function nn(){return(nn=(0,w.Z)(function*(a,g){let i={};g&&(i={Authorization:"Bearer "+g});const s=yield fetch(a,{headers:i});if(s.ok)return yield s.json();throw new Error(s.statusText)})).apply(this,arguments)}function ao(a){if(!a)return"";const g=a.replace(/[A-Za-z:]+\//,"");if(!g)return"";const i=/[A-Z]+/.exec(g);return i&&i[0]?i[0]:""}const co={name:"RelativeClause",check:function Fr(a){return Tn.apply(this,arguments)}},uo="https://phoneticsrv3.lcs.tcd.ie/gramsrv/api/grammar";function Tn(){return Tn=(0,w.Z)(function*(a){return new Promise(function(){var g=(0,w.Z)(function*(i,s){i((yield lo(a)).map(F=>({errorText:a.slice(F.fromx,F.tox),messageGA:F.msg,messageEN:F.msg,context:F.context,nameEN:Te.U["RELATIVE-CLAUSE"].nameEN,nameGA:Te.U["RELATIVE-CLAUSE"].nameGA,color:Te.U["RELATIVE-CLAUSE"].color,fromX:F.fromx,toX:F.tox,type:"RELATIVE-CLAUSE"})))});return function(i,s){return g.apply(this,arguments)}}())}),Tn.apply(this,arguments)}function lo(a){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,w.Z)(function*(a){const g=yield fetch(uo,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:fo(a.replace(/\n/g," "))});return g.ok?yield g.json():[]})).apply(this,arguments)}function fo(a){return`text=${encodeURIComponent(a)}&check=relclause`}var Br=M(529),$e=M(4006),$n=M(9121),Ct=M(5589),Xn=M(2687),jn=M(445),rn=M(1281),An=M(9521),ho=M(3353),po=M(4968),go=M(6451),Ft=M(9300),Lr=M(4004),Zr=M(9718),lt=M(2722),Nr=M(5698),er=M(8675),_o=M(8372),dt=M(7340);const Ur=["*"],mo=["content"];function vo(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l._onBackdropClicked())}),t.qZA()}if(2&a){const i=t.oxw();t.ekj("mat-drawer-shown",i._isShowingBackdrop())}}function yo(a,g){1&a&&(t.TgZ(0,"mat-drawer-content"),t.Hsn(1,2),t.qZA())}const Mn=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],wo=["mat-drawer","mat-drawer-content","*"],qr={transformDrawer:(0,dt.X$)("transform",[(0,dt.SB)("open, open-instant",(0,dt.oB)({transform:"none",visibility:"visible"})),(0,dt.SB)("void",(0,dt.oB)({"box-shadow":"none",visibility:"hidden"})),(0,dt.eR)("void => open-instant",(0,dt.jt)("0ms")),(0,dt.eR)("void <=> open, open-instant => void",(0,dt.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Co=new t.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function So(){return!1}}),Hr=new t.OlP("MAT_DRAWER_CONTAINER");let nr=(()=>{class a extends Ct.PQ{constructor(i,s,l,v,F){super(l,v,F),this._changeDetectorRef=i,this._container=s}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(t.sBO),t.Y36((0,t.Gpc)(()=>En)),t.Y36(t.SBq),t.Y36(Ct.mF),t.Y36(t.R0b))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(i,s){2&i&&t.Udp("margin-left",s._container._contentMargins.left,"px")("margin-right",s._container._contentMargins.right,"px")},features:[t._Bn([{provide:Ct.PQ,useExisting:a}]),t.qOj],ngContentSelectors:Ur,decls:1,vars:0,template:function(i,s){1&i&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),a})(),kn=(()=>{class a{constructor(i,s,l,v,F,Y,ne,ve){this._elementRef=i,this._focusTrapFactory=s,this._focusMonitor=l,this._platform=v,this._ngZone=F,this._interactivityChecker=Y,this._doc=ne,this._container=ve,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new A.x,this._animationEnd=new A.x,this._animationState="void",this.openedChange=new t.vpe(!0),this._openedStream=this.openedChange.pipe((0,Ft.h)(X=>X),(0,Lr.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,Ft.h)(X=>X.fromState!==X.toState&&0===X.toState.indexOf("open")),(0,Zr.h)(void 0)),this._closedStream=this.openedChange.pipe((0,Ft.h)(X=>!X),(0,Lr.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,Ft.h)(X=>X.fromState!==X.toState&&"void"===X.toState),(0,Zr.h)(void 0)),this._destroyed=new A.x,this.onPositionChanged=new t.vpe,this._modeChanged=new A.x,this.openedChange.subscribe(X=>{X?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,po.R)(this._elementRef.nativeElement,"keydown").pipe((0,Ft.h)(X=>X.keyCode===An.hY&&!this.disableClose&&!(0,An.Vb)(X)),(0,lt.R)(this._destroyed)).subscribe(X=>this._ngZone.run(()=>{this.close(),X.stopPropagation(),X.preventDefault()}))}),this._animationEnd.pipe((0,b.x)((X,me)=>X.fromState===me.fromState&&X.toState===me.toState)).subscribe(X=>{const{fromState:me,toState:ke}=X;(0===ke.indexOf("open")&&"void"===me||"void"===ke&&0===me.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(i){(i="end"===i?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(i),this._position=i,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(i){this._mode=i,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(i){this._disableClose=(0,rn.Ig)(i)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(i){("true"===i||"false"===i||null==i)&&(i=(0,rn.Ig)(i)),this._autoFocus=i}get opened(){return this._opened}set opened(i){this.toggle((0,rn.Ig)(i))}_forceFocus(i,s){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const l=()=>{i.removeEventListener("blur",l),i.removeEventListener("mousedown",l),i.removeAttribute("tabindex")};i.addEventListener("blur",l),i.addEventListener("mousedown",l)})),i.focus(s)}_focusByCssSelector(i,s){let l=this._elementRef.nativeElement.querySelector(i);l&&this._forceFocus(l,s)}_takeFocus(){if(!this._focusTrap)return;const i=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(s=>{!s&&"function"==typeof this._elementRef.nativeElement.focus&&i.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(i){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,i):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const i=this._doc.activeElement;return!!i&&this._elementRef.nativeElement.contains(i)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(i){return this.toggle(!0,i)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(i=!this.opened,s){i&&s&&(this._openedVia=s);const l=this._setOpen(i,!i&&this._isFocusWithinDrawer(),this._openedVia||"program");return i||(this._openedVia=null),l}_setOpen(i,s,l){return this._opened=i,i?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",s&&this._restoreFocus(l)),this._updateFocusTrapState(),new Promise(v=>{this.openedChange.pipe((0,Nr.q)(1)).subscribe(F=>v(F?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(i){const s=this._elementRef.nativeElement,l=s.parentNode;"end"===i?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),l.insertBefore(this._anchor,s)),l.appendChild(s)):this._anchor&&this._anchor.parentNode.insertBefore(s,this._anchor)}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(t.SBq),t.Y36(Xn.qV),t.Y36(Xn.tE),t.Y36(ho.t4),t.Y36(t.R0b),t.Y36(Xn.ic),t.Y36(R.K0,8),t.Y36(Hr,8))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-drawer"]],viewQuery:function(i,s){if(1&i&&t.Gf(mo,5),2&i){let l;t.iGM(l=t.CRH())&&(s._content=l.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(i,s){1&i&&t.WFA("@transform.start",function(v){return s._animationStarted.next(v)})("@transform.done",function(v){return s._animationEnd.next(v)}),2&i&&(t.uIk("align",null),t.d8E("@transform",s._animationState),t.ekj("mat-drawer-end","end"===s.position)("mat-drawer-over","over"===s.mode)("mat-drawer-push","push"===s.mode)("mat-drawer-side","side"===s.mode)("mat-drawer-opened",s.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Ur,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(i,s){1&i&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA())},dependencies:[Ct.PQ],encapsulation:2,data:{animation:[qr.transformDrawer]},changeDetection:0}),a})(),En=(()=>{class a{constructor(i,s,l,v,F,Y=!1,ne){this._dir=i,this._element=s,this._ngZone=l,this._changeDetectorRef=v,this._animationMode=ne,this._drawers=new t.n_E,this.backdropClick=new t.vpe,this._destroyed=new A.x,this._doCheckSubject=new A.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new A.x,i&&i.change.pipe((0,lt.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),F.change().pipe((0,lt.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=Y}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(i){this._autosize=(0,rn.Ig)(i)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(i){this._backdropOverride=null==i?null:(0,rn.Ig)(i)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,er.O)(this._allDrawers),(0,lt.R)(this._destroyed)).subscribe(i=>{this._drawers.reset(i.filter(s=>!s._container||s._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,er.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(i=>{this._watchDrawerToggle(i),this._watchDrawerPosition(i),this._watchDrawerMode(i)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,_o.b)(10),(0,lt.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(i=>i.open())}close(){this._drawers.forEach(i=>i.close())}updateContentMargins(){let i=0,s=0;if(this._left&&this._left.opened)if("side"==this._left.mode)i+=this._left._getWidth();else if("push"==this._left.mode){const l=this._left._getWidth();i+=l,s-=l}if(this._right&&this._right.opened)if("side"==this._right.mode)s+=this._right._getWidth();else if("push"==this._right.mode){const l=this._right._getWidth();s+=l,i-=l}i=i||null,s=s||null,(i!==this._contentMargins.left||s!==this._contentMargins.right)&&(this._contentMargins={left:i,right:s},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(i){i._animationStarted.pipe((0,Ft.h)(s=>s.fromState!==s.toState),(0,lt.R)(this._drawers.changes)).subscribe(s=>{"open-instant"!==s.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==i.mode&&i.openedChange.pipe((0,lt.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(i.opened))}_watchDrawerPosition(i){!i||i.onPositionChanged.pipe((0,lt.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Nr.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(i){i&&i._modeChanged.pipe((0,lt.R)((0,go.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(i){const s=this._element.nativeElement.classList,l="mat-drawer-container-has-open";i?s.add(l):s.remove(l)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(i=>{"end"==i.position?this._end=i:this._start=i}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(i=>i&&!i.disableClose&&this._canHaveBackdrop(i)).forEach(i=>i._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(i){return"side"!==i.mode||!!this._backdropOverride}_isDrawerOpen(i){return null!=i&&i.opened}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(jn.Is,8),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(Ct.rL),t.Y36(Co),t.Y36(t.QbO,8))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-drawer-container"]],contentQueries:function(i,s,l){if(1&i&&(t.Suo(l,nr,5),t.Suo(l,kn,5)),2&i){let v;t.iGM(v=t.CRH())&&(s._content=v.first),t.iGM(v=t.CRH())&&(s._allDrawers=v)}},viewQuery:function(i,s){if(1&i&&t.Gf(nr,5),2&i){let l;t.iGM(l=t.CRH())&&(s._userContent=l.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(i,s){2&i&&t.ekj("mat-drawer-container-explicit-backdrop",s._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[t._Bn([{provide:Hr,useExisting:a}])],ngContentSelectors:wo,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(i,s){1&i&&(t.F$t(Mn),t.YNc(0,vo,1,2,"div",0),t.Hsn(1),t.Hsn(2,1),t.YNc(3,yo,2,0,"mat-drawer-content",1)),2&i&&(t.Q6J("ngIf",s.hasBackdrop),t.xp6(3),t.Q6J("ngIf",!s._content))},dependencies:[R.O5,nr],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),a})(),Wr=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[R.ez,Wn.BQ,Ct.ZD,Ct.ZD,Wn.BQ]}),a})();var on=M(5802),rr=M(530),Ao=M(4412);class On extends Ao.i{constructor(){super(...arguments),this.createdWithPrompts=!1}}var ir=M(4859),sn=M(7392),In=M(8255),Jr=M(8443);let or=(()=>{class a{transform(i,s){return i?s?(s=s.toLocaleLowerCase(),i.filter(l=>l instanceof Jr.n?l.username.toLocaleLowerCase().includes(s):l instanceof On?l.title.toLocaleLowerCase().includes(s)||l.text.toLocaleLowerCase().includes(s):void 0)):i:[]}}return a.\u0275fac=function(i){return new(i||a)},a.\u0275pipe=t.Yjl({name:"appFilter",type:a,pure:!0}),a})();function sr(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div")(1,"div",5),t._uU(2),t.qZA(),t.TgZ(3,"div",6)(4,"input",7),t.NdJ("ngModelChange",function(l){t.CHM(i);const v=t.oxw();return t.KtG(v.searchText=l)}),t.qZA()()()}if(2&a){const i=t.oxw();t.xp6(2),t.Oqu(i.ts.l.my_stories),t.xp6(2),t.s9C("placeholder",i.ts.l.search_story_title_or_content),t.Q6J("ngModel",i.searchText)}}function Bt(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",8),t.NdJ("click",function(){const v=t.CHM(i).$implicit,F=t.oxw();return t.KtG(F.setStory(v))}),t.TgZ(1,"div",9)(2,"div",10),t.NdJ("blur",function(){const l=t.CHM(i),v=l.index,F=l.$implicit,Y=t.oxw();return t.KtG(Y.saveStoryTitle(v,F))})("keydown.enter",function(){const l=t.CHM(i),v=l.index,F=l.$implicit,Y=t.oxw();return t.KtG(Y.saveStoryTitle(v,F))}),t._uU(3),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.ALo(6,"date"),t.TgZ(7,"button",12)(8,"mat-icon"),t._uU(9,"more_vert"),t.qZA()(),t.TgZ(10,"mat-menu",null,13)(12,"button",14),t.NdJ("click",function(){const v=t.CHM(i).$implicit,F=t.oxw();return t.KtG(F.openDeleteStoryDialog(v._id))}),t.TgZ(13,"mat-icon"),t._uU(14,"delete"),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.qZA()(),t.TgZ(17,"button",14),t.NdJ("click",function(){const v=t.CHM(i).index,F=t.oxw();return t.KtG(F.makeTitleDivEditable(v))}),t.TgZ(18,"mat-icon"),t._uU(19,"create"),t.qZA(),t.TgZ(20,"span"),t._uU(21),t.qZA()()()()(),t._UZ(22,"hr"),t.qZA()}if(2&a){const i=g.$implicit,s=g.index,l=t.MAs(11),v=t.oxw();t.xp6(1),t.uIk("id",i._id),t.xp6(1),t.uIk("id",s),t.xp6(1),t.hij(" ",null==i?null:i.title," "),t.xp6(2),t.hij(" ",t.xi3(6,7,i.lastUpdated,"d/M/yy")," "),t.xp6(2),t.Q6J("matMenuTriggerFor",l),t.xp6(9),t.Oqu(v.ts.l.delete),t.xp6(5),t.Oqu(v.ts.l.rename)}}let Yr=(()=>{class a{constructor(i,s,l,v,F,Y){this.ts=i,this.auth=s,this.storyService=l,this.engagement=v,this.recordingService=F,this.dialog=Y,this.stories=[],this.lastClickedStoryId="",this.searchText="",this.storyEmitter=new t.vpe,this.hasFeedback=new t.vpe,this.titleUpdated=new t.vpe,this.storiesLoaded=new t.vpe}ngOnInit(){this.getStories()}getStories(){var i=this;return(0,w.Z)(function*(){i.stories=(yield(0,C.z)(i.storyService.getStoriesForLoggedInUser())).map(s=>(new On).fromJSON(s)),i.stories.length>0&&(i.stories.sort((s,l)=>s.date>l.date?-1:1),i.lastClickedStoryId=i.stories[0]._id,setTimeout(()=>{i.setStory(i.stories[0])})),i.storiesLoaded.emit(!0)})()}setStory(i){null==i.htmlText&&(i.htmlText=i.text),this.storyEmitter.emit(i),this.hasFeedback.emit(!!(i.feedback.text||i.feedback.audioId||i.feedback.feedbackMarkup));let s=i._id,l=document.getElementById(s);l&&(this.lastClickedStoryId&&document.getElementById(this.lastClickedStoryId).classList.remove("clickedresultCard"),this.lastClickedStoryId=s,l.classList.add("clickedresultCard"))}createNewStory(){var i=this;this.dialogRef=this.dialog.open(E.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var s=(0,w.Z)(function*(l){if(i.dialogRef=void 0,l)if(l[0]){let v="connemara";l[1]==i.ts.l.munster&&(v="kerry"),l[1]==i.ts.l.ulster&&(v="donegal"),i.storyService.saveStory(i.auth.getUserDetails()._id,l[0],new Date,v,"",i.auth.getUserDetails().username,!1).subscribe({next:()=>{i.getStories()},error:()=>{alert("Not able to create a new story")}})}else alert(i.ts.l.title_required)});return function(l){return s.apply(this,arguments)}}())}openDeleteStoryDialog(i){var s=this;this.dialogRef=this.dialog.open(E.p,{data:{title:this.ts.l.delete_story,message:this.ts.l.are_you_sure_delete_story,confirmText:this.ts.l.yes,cancelText:this.ts.l.no},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var l=(0,w.Z)(function*(v){s.dialogRef=void 0,v&&s.deleteStory(i)});return function(v){return l.apply(this,arguments)}}())}deleteStory(i){this.recordingService.deleteStoryRecordingAudio(i).subscribe(l=>{}),this.recordingService.deleteStoryRecording(i).subscribe(l=>{});const s=this.stories.findIndex(l=>l._id===i);this.storyService.deleteStory(i).subscribe(l=>{this.engagement.addEventForLoggedInUser(Jt.tw["DELETE-STORY"],{_id:i}),this.stories.splice(s,1),this.stories.length?this.setStory(this.stories[0]):this.storyEmitter.emit(null)})}makeTitleDivEditable(i){const s=document.getElementById(i);s.setAttribute("contenteditable","true"),window.setTimeout(()=>s.focus(),0)}saveStoryTitle(i,s){const l=document.getElementById(i);l.setAttribute("contenteditable","false"),s.title.trim()!=l.textContent.trim()&&(s.title=l.textContent,this.storyService.updateTitle(s._id,s.title.trim()).subscribe({next:()=>{this.titleUpdated.emit(s.title.trim())},error:()=>console.log("error updating title")}))}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(B.D),t.Y36(ue.$),t.Y36(xe.N),t.Y36(ye.M),t.Y36(rr.s),t.Y36(h.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-story-drawer"]],outputs:{storyEmitter:"storyEmitter",hasFeedback:"hasFeedback",titleUpdated:"titleUpdated",storiesLoaded:"storiesLoaded"},decls:8,vars:5,consts:[[1,"body"],[4,"ngIf"],[1,"storyList"],[3,"click",4,"ngFor","ngForOf"],["mat-fab","",1,"newStoryButton",3,"click"],[1,"myStories"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control","searchBox",3,"ngModel","placeholder","ngModelChange"],[3,"click"],[1,"contentSection"],[1,"contentsTitle",3,"blur","keydown.enter"],[1,"contentsDate"],["mat-icon-button","","aria-label","Options to delete or rename your story",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0),t.YNc(1,sr,5,3,"div",1),t.TgZ(2,"div",2),t.YNc(3,Bt,23,10,"div",3),t.ALo(4,"appFilter"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return s.createNewStory()}),t.TgZ(6,"mat-icon"),t._uU(7,"add"),t.qZA()()()),2&i&&(t.xp6(1),t.Q6J("ngIf",s.stories.length>0),t.xp6(2),t.Q6J("ngForOf",t.xi3(4,2,s.stories,s.searchText)))},dependencies:[R.sg,R.O5,$e.Fj,$e.JJ,$e.On,ir.lW,sn.Hw,In.VK,In.OP,In.p6,R.uU,or],styles:[".body[_ngcontent-%COMP%]{display:flex;width:100%;height:98%;flex-direction:column}.storyList[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto}.myStories[_ngcontent-%COMP%]{color:var(--dark-text);font-size:16pt;padding-bottom:10px;text-align:left;font-weight:bolder}.searchBox[_ngcontent-%COMP%]{min-width:300px}.contentSection[_ngcontent-%COMP%]{display:flex}.contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;text-decoration:none;min-width:50%;flex:1 0 50%;overflow-wrap:break-word}.contentsTitle[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsDate[_ngcontent-%COMP%]{flex:1 0 50%;text-align:right;padding-right:20px}.newStoryButton[_ngcontent-%COMP%]{margin-left:auto}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%]{background-color:var(--scealai-green);box-shadow:none}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:2px;font-weight:bolder;border-radius:10px}"]}),a})();var an=M(1481);function Mo(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",10)(1,"label",11),t._uU(2),t.qZA(),t.TgZ(3,"input",12),t.NdJ("ngModelChange",function(l){t.CHM(i);const v=t.oxw();return t.KtG(v.wordLookedUp=l)})("keyup.enter",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.lookupWord())})("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.clearDictInput())}),t.qZA(),t.TgZ(4,"button",13),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.lookupWord())}),t._UZ(5,"i",14),t.qZA()()}if(2&a){const i=t.oxw();t.xp6(2),t.hij("",i.ts.l.search,":"),t.xp6(1),t.Q6J("ngModel",i.wordLookedUp)}}function zr(a,g){if(1&a&&t._UZ(0,"iframe",15),2&a){const i=t.oxw();t.Q6J("src",i.defaultDictIframeText,t.uOi)}}function Qr(a,g){1&a&&(t.TgZ(0,"div",16)(1,"ul")(2,"li")(3,"a",17),t._uU(4,"potafocal.com"),t.qZA()(),t.TgZ(5,"li")(6,"a",18),t._uU(7,"focloir.ie"),t.qZA()()()())}let Kr=(()=>{class a{constructor(i,s,l,v){this.ts=i,this.sanitizer=s,this.http=l,this.engagement=v,this.wordLookedUp="",this.selectTeanglann=!0,this.defaultDictIframeText=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/html;charset=utf-8,"+this.ts.l.search_for_words_in_dictionary),this.closeDictionaryEmitter=new t.vpe}ngOnInit(){}lookupWord(){var i=this;return(0,w.Z)(function*(){if(i.wordLookedUp){const s=i.http.post(G.Z.baseurl+"proxy/",{url:`https://www.teanglann.ie/en/fgb/${i.wordLookedUp}`}),l=yield(0,C.z)(s),v=(new DOMParser).parseFromString(l,"text/html");v.querySelectorAll(".ex > .head > a").forEach(X=>X.href=`https://www.teanglann.ie${X.href.slice(X.href.lastIndexOf("/en/"))}`),v.querySelector(".moar")?.remove();const ne=v.querySelector(".listings");ne.style.cssText+="margin-right: 0px; padding: 10px;",document.getElementById("dictiframe").src='data:text/html;charset=utf-8,<link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/template.css"><link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/fgb.css">'+ne.outerHTML,i.engagement.addEventForLoggedInUser(Jt.tw["USE-DICTIONARY"],null,i.wordLookedUp)}else alert(i.ts.l.enter_a_word_to_lookup)})()}clearDictInput(){this.wordLookedUp&&(this.wordLookedUp="")}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(B.D),t.Y36(an.H7),t.Y36(Br.eN),t.Y36(ye.M))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dictionary-drawer"]],outputs:{closeDictionaryEmitter:"closeDictionaryEmitter"},decls:16,vars:5,consts:[[1,"dictionaryContainer"],[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"dictionarySubHeader"],[1,"dictionaryName",3,"click"],["class","dictionaryInput",4,"ngIf"],[2,"height","100%"],["class","dictionaryIframe","id","dictiframe",3,"src",4,"ngIf"],["class","dictionaryIframe","style","text-align: left",4,"ngIf"],[1,"dictionaryInput"],["for","dictlookup"],["type","text","id","dictlookup","name","dictlookup","autofocus","",3,"ngModel","ngModelChange","keyup.enter","click"],[1,"searchDictionaryBtn",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["id","dictiframe",1,"dictionaryIframe",3,"src"],[1,"dictionaryIframe",2,"text-align","left"],["href","http://www.potafocal.com/beo/","target","_blank"],["href","https://www.focloir.ie","target","_blank"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3),t.qZA(),t.TgZ(4,"div",2),t.NdJ("click",function(){return s.closeDictionaryEmitter.next(!0)}),t._UZ(5,"i",3),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5),t.NdJ("click",function(){return s.selectTeanglann=!0}),t._uU(8," Teanglann "),t.qZA(),t._uU(9," | "),t.TgZ(10,"div",5),t.NdJ("click",function(){return s.selectTeanglann=!1}),t._uU(11),t.qZA()(),t.YNc(12,Mo,6,2,"div",6),t.TgZ(13,"div",7),t.YNc(14,zr,1,1,"iframe",8),t.qZA(),t.YNc(15,Qr,8,0,"div",9),t.qZA()),2&i&&(t.xp6(3),t.hij(" ",s.ts.l.dictionary," "),t.xp6(8),t.hij(" ",s.ts.l.external_links," "),t.xp6(1),t.Q6J("ngIf",s.selectTeanglann),t.xp6(2),t.Q6J("ngIf",s.selectTeanglann),t.xp6(1),t.Q6J("ngIf",!s.selectTeanglann))},dependencies:[R.O5,$e.Fj,$e.JJ,$e.On],styles:[".dictionaryContainer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:wrap}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.dictionarySubHeader[_ngcontent-%COMP%]{padding-left:10px;padding-bottom:5px;background-color:var(--scealai-green);color:#fff;display:flex}.dictionaryName[_ngcontent-%COMP%]{background-color:var(--scealai-green);font-size:12px;color:#fff;padding-right:5px;padding-top:5px}.dictionaryName[_ngcontent-%COMP%]:hover{color:var(--scealai-light-green);text-decoration:none;cursor:pointer}.dictionaryInput[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;display:flex;padding-bottom:10px;padding-left:10px;gap:1rem}.searchDictionaryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.searchDictionaryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.dictionaryIframe[_ngcontent-%COMP%]{width:100%;border-radius:0 0 5px 5px}"]}),a})();function Vr(a,g){if(1&a&&t._UZ(0,"span",8),2&a){const i=t.oxw().$implicit;t.Q6J("innerHtml"," "+i.value[0].nameEN,t.oJD)}}function ko(a,g){if(1&a&&t._UZ(0,"span",8),2&a){const i=t.oxw().$implicit;t.Q6J("innerHtml"," "+i.value[0].nameGA,t.oJD)}}const Eo=function(a){return{"background-color":a}};function Oo(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",5),t.NdJ("click",function(){const v=t.CHM(i).$implicit,F=t.oxw();return t.KtG(F.toggleLegendTag(v.key))}),t._UZ(1,"div",6),t.YNc(2,Vr,1,1,"span",7),t.YNc(3,ko,1,1,"span",7),t._uU(4),t.qZA()}if(2&a){const i=g.$implicit,s=t.oxw();t.uIk("id",i.key),t.xp6(1),t.Q6J("ngStyle",t.VKq(5,Eo,i.value[0].color)),t.xp6(1),t.Q6J("ngIf","en"==s.ts.l.iso_code),t.xp6(1),t.Q6J("ngIf","ga"==s.ts.l.iso_code),t.xp6(1),t.hij(" (","Broad/Slender"==i.value[0].nameEN?i.value.length/2:i.value.length,") ")}}let $r=(()=>{class a{constructor(i){this.ts=i,this.closeGrammarEmitter=new t.vpe}ngOnInit(){}toggleLegendTag(i){this.checkBoxes[i]=!this.checkBoxes[i],this.quillHighlighter.hideAll(),this.quillHighlighter.show(this.grammarErrors.filter(s=>this.checkBoxes[s.type]).map(Te.j)),this.checkBoxes[i]?document.getElementById(i).classList.remove("hideLegendItem"):document.getElementById(i).classList.add("hideLegendItem")}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(B.D))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-grammar-error-drawer"]],inputs:{quillHighlighter:"quillHighlighter",grammarLoaded:"grammarLoaded",grammarErrorsTypeDict:"grammarErrorsTypeDict",grammarErrors:"grammarErrors",checkBoxes:"checkBoxes"},outputs:{closeGrammarEmitter:"closeGrammarEmitter"},decls:8,vars:4,consts:[[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"selectErrorCheckbox"],["class","errorContainer",3,"click",4,"ngFor","ngForOf"],[1,"errorContainer",3,"click"],[1,"circle",3,"ngStyle"],[3,"innerHtml",4,"ngIf"],[3,"innerHtml"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"h5"),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.NdJ("click",function(){return s.closeGrammarEmitter.next(!0)}),t._UZ(4,"i",2),t.qZA()(),t.TgZ(5,"div",3),t.YNc(6,Oo,5,7,"div",4),t.ALo(7,"keyvalue"),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",s.ts.message("grammar_errors")," "),t.xp6(4),t.Q6J("ngForOf",t.lcZ(7,2,s.grammarErrorsTypeDict)))},dependencies:[R.sg,R.O5,R.PC,R.Nd],styles:[".grammarMessageBanner[_ngcontent-%COMP%]{padding-bottom:20px}.circle[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border-radius:6px}.selectErrorCheckbox[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:space-around;text-align:left;padding-left:10px;padding-top:10px;gap:1.5rem;-webkit-user-select:none;-moz-user-select:none;user-select:none}.errorContainer[_ngcontent-%COMP%]{margin:2px}.errorContainer[_ngcontent-%COMP%]:hover{cursor:pointer}.errorColorBox[_ngcontent-%COMP%]{display:inline-flex;width:30px;height:15px}.hideLegendItem[_ngcontent-%COMP%]{text-decoration:line-through;opacity:.5}.dictionaryContainer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:wrap}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),a})();var Io=M(5042);function Po(a,g){if(1&a&&t._UZ(0,"audio",7,8),2&a){const i=t.oxw();t.Q6J("src",i.audioSource,t.LSH)}}function Ro(a,g){if(1&a&&t._UZ(0,"div",9),2&a){const i=t.oxw();t.Q6J("innerHTML",i.sanitizer.bypassSecurityTrustHtml(null==i.story||null==i.story.feedback?null:i.story.feedback.feedbackMarkup),t.oJD)}}let Do=(()=>{class a{constructor(i,s,l,v,F){this.ts=i,this.sanitizer=s,this.storyService=l,this.engagement=v,this.notificationService=F,this.closeFeedbackEmitter=new t.vpe}ngOnInit(){}ngOnChanges(i){this.story&&(this.story.feedback.text||this.story.feedback.audioId||this.story.feedback.feedbackMarkup)&&this.getFeedback()}getFeedback(){this.story.feedback.audioId&&this.getFeedbackAudio(),""!==this.story.feedback.text&&(this.story.feedback.seenByStudent=!0),this.storyService.viewFeedback(this.story._id).subscribe(()=>{this.engagement.addEventForLoggedInUser(Jt.tw["VIEW-FEEDBACK"],this.story),this.notificationService.getStudentNotifications()})}getFeedbackAudio(){this.storyService.getFeedbackAudio(this.story._id).subscribe(i=>{this.audioSource=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(i)),console.log(this.audioSource)})}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(B.D),t.Y36(an.H7),t.Y36(xe.N),t.Y36(ye.M),t.Y36(Io.g))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-feedback-drawer"]],inputs:{story:"story"},outputs:{closeFeedbackEmitter:"closeFeedbackEmitter"},features:[t.TTD],decls:11,vars:5,consts:[[1,"feedbackHeader"],[1,"closeFeedbackBtn",3,"click"],[1,"fa","fa-times"],[1,"textFieldContainer"],["readonly","",1,"textField",3,"placeholder","value"],["id","audio","controls","","class","audioPlayer",3,"src",4,"ngIf"],["class","textField","style","text-align: left; padding-left:25%; padding-right:25%;",3,"innerHTML",4,"ngIf"],["id","audio","controls","",1,"audioPlayer",3,"src"],["audioTag",""],[1,"textField",2,"text-align","left","padding-left","25%","padding-right","25%",3,"innerHTML"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.NdJ("click",function(){return s.closeFeedbackEmitter.next(!0)}),t._UZ(4,"i",2),t.qZA()(),t.TgZ(5,"div",3)(6,"textarea",4),t._uU(7,"    "),t.qZA(),t.YNc(8,Po,2,1,"audio",5),t._UZ(9,"hr"),t.YNc(10,Ro,1,1,"div",6),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",s.ts.l.feedback," "),t.xp6(4),t.s9C("placeholder",s.ts.l.no_feedback_provided),t.s9C("value",null==s.story||null==s.story.feedback?null:s.story.feedback.text),t.xp6(2),t.Q6J("ngIf",s.audioSource&&(null==s.story||null==s.story.feedback?null:s.story.feedback.audioId)),t.xp6(2),t.Q6J("ngIf",null==s.story||null==s.story.feedback?null:s.story.feedback.feedbackMarkup))},dependencies:[R.O5],styles:[".feedbackHeader[_ngcontent-%COMP%]{width:100%;padding-left:20px;padding-right:20px;height:30px;background-color:var(--scealai-green);color:#fff;display:flex;align-items:center}.closeFeedbackBtn[_ngcontent-%COMP%]{margin-left:auto}.closeFeedbackBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.textFieldContainer[_ngcontent-%COMP%]{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px}.textField[_ngcontent-%COMP%]{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px;border:none}.audioPlayer[_ngcontent-%COMP%]{height:30px;width:90%;background-color:#f1f3f4;border:1px solid rgba(140,128,110,.5254901961)}"]}),a})();const ar=["rightDrawer"],Fo=["mySynthesisPlayer"];function Bo(a,g){1&a&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function Lo(a,g){if(1&a&&(t.TgZ(0,"span",23),t._uU(1),t.qZA()),2&a){const i=t.oxw(2);t.xp6(1),t.hij(" ",i.ts.l.made_using_prompts," ")}}function Zo(a,g){if(1&a&&(t.TgZ(0,"div",24),t._uU(1),t._UZ(2,"i",25),t.qZA()),2&a){const i=t.oxw(2);t.xp6(1),t.hij(" ",i.ts.l.saved," ")}}function No(a,g){if(1&a&&(t.TgZ(0,"div",24),t._uU(1),t._UZ(2,"i",26),t.qZA()),2&a){const i=t.oxw(2);t.xp6(1),t.hij(" ",i.ts.l.saving," ")}}function he(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"input",18),t.NdJ("ngModelChange",function(l){t.CHM(i);const v=t.oxw();return t.KtG(v.updatedTitle=l)})("blur",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.updateStoryTitle())}),t.qZA(),t.YNc(3,Bo,2,0,"span",19),t.YNc(4,Lo,2,1,"span",20),t.qZA(),t.TgZ(5,"div",21),t.YNc(6,Zo,3,1,"div",22),t.YNc(7,No,3,1,"div",22),t.qZA()()}if(2&a){const i=t.oxw();t.xp6(2),t.s9C("size",i.updatedTitle.length),t.Q6J("ngStyle",i.titleStyle())("ngModel",i.updatedTitle),t.xp6(1),t.Q6J("ngIf",!i.storySaved),t.xp6(1),t.Q6J("ngIf",null==i.story?null:i.story.createdWithPrompts),t.xp6(2),t.Q6J("ngIf",i.storySaved),t.xp6(1),t.Q6J("ngIf",!i.storySaved)}}function fe(a,g){1&a&&t._UZ(0,"i",35)}function Uo(a,g){1&a&&t._UZ(0,"i",36)}function qo(a,g){1&a&&(t.TgZ(0,"span",40),t._uU(1,"speech_to_text"),t.qZA())}function Ho(a,g){1&a&&(t.TgZ(0,"button",41),t._UZ(1,"i",42),t.qZA())}function Go(a,g){1&a&&(t.TgZ(0,"div"),t._UZ(1,"div",43),t.qZA())}const Wo=function(a){return{disableDiv:a}};function Jo(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",37),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2);return l.dontToggle=!0,t.KtG(l.speakStory())}),t._uU(1),t.YNc(2,qo,2,0,"span",38),t.YNc(3,Ho,2,0,"button",39),t.YNc(4,Go,2,0,"div",19),t.qZA()}if(2&a){const i=t.oxw(2);t.Q6J("ngClass",t.VKq(5,Wo,i.isTranscribing)),t.xp6(1),t.hij(" ",i.ts.l.speak," "),t.xp6(1),t.Q6J("ngIf",!i.isRecording),t.xp6(1),t.Q6J("ngIf",i.isRecording&&!i.isTranscribing),t.xp6(1),t.Q6J("ngIf",i.isTranscribing)}}function Xr(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",44),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2);return t.KtG(l.dontToggle=!0)}),t.TgZ(1,"button",45),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2);return t.KtG(l.downloadStory())}),t._uU(2),t._UZ(3,"i",46),t.qZA()()}if(2&a){const i=t.oxw(2);t.xp6(1),t.s9C("href",i.downloadStoryUrl()),t.xp6(1),t.hij(" ",i.ts.l.download," ")}}function Yo(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2);return l.dontToggle=!0,t.KtG(l.goToRecording())}),t._uU(1),t._UZ(2,"i",48),t.qZA()}if(2&a){const i=t.oxw(2);t.xp6(1),t.hij(" ",i.ts.l.recordings," ")}}function Me(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2);return l.dontToggle=!0,t.KtG(l.toggleRightDrawer("feedback"))}),t._uU(1),t._UZ(2,"i",49),t.qZA()}if(2&a){const i=t.oxw(2);t.ekj("optionsBtnClicked",i.rightDrawerOpened&&"feedback"==i.selectedDrawer),t.xp6(1),t.hij(" ",i.ts.l.feedback," ")}}function jr(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2);return l.dontToggle=!0,t.KtG(l.synthesisPlayer.toggleHidden())}),t._uU(1),t._UZ(2,"i",50),t.qZA()}if(2&a){const i=t.oxw(2);t.xp6(1),t.hij(" ",i.ts.l.audio_check," ")}}function cn(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2);return l.dontToggle=!0,t.KtG(l.toggleRightDrawer("grammar"))}),t._uU(1),t._UZ(2,"i",51),t.qZA()}if(2&a){const i=t.oxw(2);t.ekj("optionsBtnClicked",i.rightDrawerOpened&&"grammar"==i.selectedDrawer),t.xp6(1),t.hij(" ",i.ts.l.grammar_errors," ")}}function ei(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2);return l.dontToggle=!0,t.KtG(l.toggleRightDrawer("dictionary"))}),t._uU(1),t._UZ(2,"i",52),t.qZA()}if(2&a){const i=t.oxw(2);t.ekj("optionsBtnClicked",i.rightDrawerOpened&&"dictionary"==i.selectedDrawer),t.xp6(1),t.hij(" ",i.ts.l.dictionary," ")}}function cr(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",27),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.toggleOptions())}),t.TgZ(1,"div",28),t.YNc(2,fe,1,0,"i",29),t.YNc(3,Uo,1,0,"i",30),t.qZA(),t.YNc(4,Jo,5,7,"div",31),t.YNc(5,Xr,4,2,"div",32),t.YNc(6,Yo,3,1,"div",33),t.YNc(7,Me,3,3,"div",34),t.YNc(8,jr,3,1,"div",33),t.YNc(9,cn,3,3,"div",34),t.YNc(10,ei,3,3,"div",34),t.qZA()}if(2&a){const i=t.oxw();t.xp6(2),t.Q6J("ngIf",!i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions&&i.hasFeedback),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions)}}function Ge(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",53,54)(2,"span",55),t.NdJ("click",function(){t.CHM(i),t.oxw();const l=t.MAs(4);return t.KtG(l.toggle())}),t._uU(3,"menu"),t.qZA(),t.TgZ(4,"quill-editor",56),t.NdJ("ngModelChange",function(l){t.CHM(i);const v=t.oxw();return t.KtG(v.story.htmlText=l)})("onContentChanged",function(l){t.CHM(i);const v=t.oxw();return t.KtG(v.onContentChanged(l))})("onEditorCreated",function(l){t.CHM(i);const v=t.oxw();return t.KtG(v.onEditorCreated(l))}),t.qZA()()}if(2&a){const i=t.oxw();t.Q6J("ngStyle",i.quillEditorStyle),t.xp6(4),t.Q6J("modules",i.quillToolbar)("preserveWhitespace",!0)("debounceTime",1500)("ngModel",i.story.htmlText)}}function ti(a,g){1&a&&(t.TgZ(0,"div"),t._UZ(1,"grid-spinner"),t.qZA())}function ni(a,g){1&a&&(t.TgZ(0,"div",58),t._uU(1," Click on the '+' button to create your first story! "),t.qZA())}function ri(a,g){if(1&a&&(t.YNc(0,ti,2,0,"div",19),t.YNc(1,ni,2,0,"div",57)),2&a){const i=t.oxw();t.Q6J("ngIf",!i.storiesLoaded),t.xp6(1),t.Q6J("ngIf",i.storiesLoaded)}}function ii(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"app-feedback-drawer",59),t.NdJ("closeFeedbackEmitter",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.toggleRightDrawer("feedback"))}),t.qZA()}if(2&a){const i=t.oxw();t.Q6J("story",i.story)}}function oi(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"app-dictionary-drawer",60),t.NdJ("closeDictionaryEmitter",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.toggleRightDrawer("dictionary"))}),t.qZA()}}function si(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"app-grammar-error-drawer",61),t.NdJ("closeGrammarEmitter",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.toggleRightDrawer("grammar"))}),t.qZA()}if(2&a){const i=t.oxw();t.Q6J("quillHighlighter",i.quillHighlighter)("grammarLoaded",i.grammarLoaded)("grammarErrorsTypeDict",i.grammarErrorsTypeDict)("grammarErrors",i.grammarErrors)("checkBoxes",i.checkBoxes)}}q().register("modules/imageCompress",ee());let Be=(()=>{class a{constructor(i,s,l,v,F,Y,ne,ve,X){this.ts=i,this.auth=s,this.storyService=l,this.recordAudioService=v,this.engagement=F,this.classroomService=Y,this.dialog=ne,this.http=ve,this.router=X,this.stories=[],this.saveStoryDebounceId=0,this.mostRecentAttemptToSaveStory=new Date,this.storySaved=!0,this.storiesLoaded=!1,this.downloadStoryFormat=".pdf",this.hasFeedback=!1,this.updatedTitle="",this.grammarLoaded=!1,this.grammarErrors=[],this.showErrorTags=!1,this.grammarCheckerOptions={anGramadoir:Qn,relativeClause:co,broadSlender:ut},this.checkBoxes={},this.grammarErrorsTypeDict={},this.showOptions=!0,this.dontToggle=!1,this.rightDrawerOpened=!1,this.selectedDrawer="grammar",this.words=[],this.wordCount=0,this.textUpdated=new A.x,this.quillToolbar={toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"],["image"]],imageCompress:{quality:.7,maxWidth:500,maxHeight:500,imageType:"image/png",debug:!1,suppressErrorLogging:!1,insertIntoEditor:void 0}},this.isRecording=!1,this.isTranscribing=!1,this.setUpGrammarChecking()}ngOnInit(){return(0,w.Z)(function*(){})()}setUpGrammarChecking(){var i=this;return(0,w.Z)(function*(){const s=i.auth.getUserDetails();if(!s)return;let l=yield(0,C.z)(i.classroomService.getClassroomOfStudent(s._id)),v=[];l&&l.grammarCheckers&&l.grammarCheckers.length>0?l.grammarCheckers.forEach(F=>{i.grammarCheckerOptions[F]&&v.push(i.grammarCheckerOptions[F])}):v=Object.values(i.grammarCheckerOptions),i.grammarEngine=new xn(v,i.http,i.auth),i.textUpdated.pipe((0,b.x)()).subscribe((0,w.Z)(function*(){i.runGrammarCheck()}))})()}runGrammarCheck(){if(this.grammarLoaded=!1,this.story.text.replace(/\n/g," "))try{this.grammarErrors=[],this.grammarEngine.check$(this.story.text).subscribe({next:s=>{this.grammarErrors.push(s),this.showErrorTags&&this.quillHighlighter.show([(0,Te.j)(s)])},error:function(){},complete:()=>{if(this.quillHighlighter){this.grammarErrors&&this.grammarEngine.saveErrorsWithSentences(this.story._id).then(console.log,console.error),this.grammarErrorsTypeDict=this.grammarErrors.reduce(function(s,l){return s[l.type]||(s[l.type]=[]),s[l.type].push(l),s},{});for(const s of Object.keys(this.grammarErrorsTypeDict))this.checkBoxes[s]=!0;this.quillHighlighter.hideAll(),this.showErrorTags&&this.quillHighlighter.show(this.grammarErrors.filter(s=>this.checkBoxes[s.type]).map(Te.j)),this.grammarLoaded=!0}}})}catch(s){this.grammarErrors||window.alert("There was an error while trying to fetch grammar suggestions from the Gramad\xf3ir server:\n"+s.message+"\nSee the browser console for more information"),console.dir(s)}}toggleRightDrawer(i){this.rightDrawerOpened?this.selectedDrawer===i&&(this.rightDrawer.close(),this.rightDrawerOpened=!1):(this.rightDrawer.open(),this.rightDrawerOpened=!0),this.selectedDrawer=i,"grammar"==this.selectedDrawer&&this.rightDrawerOpened?(this.showErrorTags=!0,this.runGrammarCheck(),this.toggleGrammarTags()):(this.showErrorTags=!1,this.toggleGrammarTags())}setCurrentStory(i){this.story=i,this.story&&(this.storySaved=!0,this.updatedTitle=this.story.title,this.getWordCount(this.story.text),this.textUpdated.next(i.text))}onContentChanged(i){"user"===(this.story.text=i.text,this.getWordCount(i.text),i.source)&&(this.storySaved=!1,this.textUpdated.next(i.text),this.debounceSaveStory())}onEditorCreated(i){i.history.options.userOnly=!0,this.quillEditor=i,this.quillEditor.root.setAttribute("spellcheck","false"),i.focus(),this.quillHighlighter=new Kt(this.quillEditor,this.ts,this.engagement)}getWordCount(i){if(!i)return 0;const s=i.replace(/[\t\n\r\.\?\!]/gm," ").split(" ");this.words=[],s.map(l=>{const v=l.trim();v.length>0&&this.words.push(v)}),this.wordCount=this.words.length}debounceSaveStory(){this.saveStoryDebounceId++;const i=this.saveStoryDebounceId,s=new Date;setTimeout(()=>{i===this.saveStoryDebounceId&&this.saveStory(i,s)},1e3)}saveStory(i,s){var l=this;return(0,w.Z)(function*(){const v=new Date;if(l.mostRecentAttemptToSaveStory=v,!l.story._id)return window.alert("Cannot save story. The id is not known");const F=l.stripGramadoirAttributesFromHtml((0,H.clone)(l.story.htmlText)),Y={title:l.story.title,dialect:l.story.dialect,text:l.story.text,htmlText:F,lastUpdated:s};l.engagement.addEventForLoggedInUser(Jt.tw["SAVE-STORY"],l.story);try{yield(0,C.z)(l.storyService.updateStory(Y,l.story._id)),(i===l.saveStoryDebounceId||"modal"===i)&&(l.storySaved=!0)}catch(ne){throw window.alert("Error while trying to save story: "+ne.message),ne}try{v===l.mostRecentAttemptToSaveStory&&(l.storySaved=!0)}catch(ne){throw window.alert("Error setting storySaved to true: "+ne.message),ne}})()}stripGramadoirAttributesFromHtml(i){return i&&i.replace?i.replace(/\s*style="([^"])+"/g,"").replace(/\s*highlight-tag-type="([^"])+"/g,"").replace(/\s*highlight-tag="([^"])+"/g,""):""}toggleOptions(){this.dontToggle||(this.showOptions=!this.showOptions),this.dontToggle=!1}titleStyle(){return{"font-style":this.storySaved?"normal":"italic"}}updateStoryTitle(){this.updatedTitle!=this.story.title&&(this.storySaved=!1,this.story.title=this.updatedTitle,this.storyService.updateTitle(this.story._id,this.story.title).subscribe({next:()=>{this.storySaved=!0,console.log("title updated")},error:()=>console.log("error updating title")}))}downloadStory(){this.dialogRef=this.dialog.open(E.p,{data:{title:this.ts.l.download,type:"select",data:[this.story.title,[".pdf",".docx",".txt",".odt"]],confirmText:this.ts.l.download,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(i=>{this.dialogRef=void 0,i&&(this.downloadStoryFormat=i[1]?i[1]:".pdf",this.http.get(this.downloadStoryUrl(),{responseType:"blob"}).subscribe(s=>{const l=window.document.createElement("a");l.href=window.URL.createObjectURL(s),l.download=i[0]?i[0]:this.story.title,document.body.appendChild(l),l.click(),document.body.removeChild(l)}))})}downloadStoryUrl(){return G.Z.baseurl+"story/downloadStory/"+this.story._id+"/"+this.downloadStoryFormat}toggleGrammarTags(){var i=this;return(0,w.Z)(function*(){i.showErrorTags?i.quillHighlighter.show(i.grammarErrors.filter(s=>i.checkBoxes[s.type]).map(Te.j)):i.quillHighlighter.hideAll()})()}goToRecording(){this.router.navigateByUrl("/student/record-story/"+this.story._id)}speakStory(){var i=this;return(0,w.Z)(function*(){if(i.isRecording){i.isTranscribing=!0,i.recordAudioService.stopRecording();let s=yield i.recordAudioService.getAudioTranscription();if(i.isTranscribing=!1,s){let l=i.quillEditor.getSelection(!0);i.quillEditor.insertText(l.index,s+"."),i.story.text=i.quillEditor.getText(),i.story.htmlText=i.quillEditor.root.innerHTML,i.getWordCount(s),i.storySaved=!1,i.debounceSaveStory()}}else i.recordAudioService.recordAudio();i.isRecording=!i.isRecording})()}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(B.D),t.Y36(ue.$),t.Y36(xe.N),t.Y36(ge.r),t.Y36(ye.M),t.Y36(He.u),t.Y36(h.uw),t.Y36(Br.eN),t.Y36(u.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard"]],viewQuery:function(i,s){if(1&i&&(t.Gf(ar,5),t.Gf(Fo,5)),2&i){let l;t.iGM(l=t.CRH())&&(s.rightDrawer=l.first),t.iGM(l=t.CRH())&&(s.synthesisPlayer=l.first)}},decls:18,vars:11,consts:[["class","storyTitleHeader",4,"ngIf"],["class","optionsBtnContainer",3,"click",4,"ngIf"],["autosize","",1,"bodyContainer"],["mode","side",1,"storyListDrawer",3,"opened"],["storyDrawer",""],[3,"storyEmitter","hasFeedback","titleUpdated","storiesLoaded"],[1,"storyContainer"],["class","ql-container",3,"ngStyle",4,"ngIf","ngIfElse"],["newStoryMessage",""],["mode","side","position","end",1,"rightDrawer"],["rightDrawer",""],[3,"story","closeFeedbackEmitter",4,"ngIf"],[3,"closeDictionaryEmitter",4,"ngIf"],[3,"quillHighlighter","grammarLoaded","grammarErrorsTypeDict","grammarErrors","checkBoxes","closeGrammarEmitter",4,"ngIf"],[3,"text","storyId","storyTitle"],["mySynthesisPlayer",""],[1,"storyTitleHeader"],[1,"storyTitleContainer"],[1,"storyTitle",3,"ngStyle","size","ngModel","ngModelChange","blur"],[4,"ngIf"],["style","color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"saveIcon"],["class","savedIcon",4,"ngIf"],[2,"color","rgba(0, 0, 0, 0.4)"],[1,"savedIcon"],[1,"fas","fa-check"],[1,"fas","fa-save"],[1,"optionsBtnContainer",3,"click"],[1,"optionsBtn"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-right",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"ngClass","click",4,"ngIf"],["style","display: flex",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"optionsBtnClicked","click",4,"ngIf"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-right"],[1,"optionsBtn","optionsPopupBtn",3,"ngClass","click"],["class","material-symbols-outlined optionsBtnIcon",4,"ngIf"],["class","notRecordingBtn blink",4,"ngIf"],[1,"material-symbols-outlined","optionsBtnIcon"],[1,"notRecordingBtn","blink"],[1,"fas","fa-stop-circle"],[1,"dot-flashing"],[2,"display","flex",3,"click"],["target","_blank",1,"optionsBtn","optionsPopupBtn",2,"text-decoration","none",3,"href","click"],[1,"fas","fa-download","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"click"],[1,"fas","fa-microphone","optionsBtnIcon"],[1,"fas","fa-comment-dots","optionsBtnIcon"],[1,"fas","fa-volume-up","optionsBtnIcon"],[1,"fas","fa-spell-check","optionsBtnIcon"],[1,"fas","fa-book","optionsBtnIcon"],[1,"ql-container",3,"ngStyle"],["quillHeightSpan",""],[1,"menuButton","material-symbols-outlined",3,"click"],["placeholder","",3,"modules","preserveWhitespace","debounceTime","ngModel","ngModelChange","onContentChanged","onEditorCreated"],["class","newStoryMessage",4,"ngIf"],[1,"newStoryMessage"],[3,"story","closeFeedbackEmitter"],[3,"closeDictionaryEmitter"],[3,"quillHighlighter","grammarLoaded","grammarErrorsTypeDict","grammarErrors","checkBoxes","closeGrammarEmitter"]],template:function(i,s){if(1&i&&(t.YNc(0,he,8,7,"div",0),t.YNc(1,cr,11,9,"div",1),t.TgZ(2,"mat-drawer-container",2)(3,"mat-drawer",3,4)(5,"app-story-drawer",5,4),t.NdJ("storyEmitter",function(v){return s.setCurrentStory(v)})("hasFeedback",function(v){return s.hasFeedback=v})("titleUpdated",function(v){return s.updatedTitle=v})("storiesLoaded",function(v){return s.storiesLoaded=v}),t.qZA()(),t.TgZ(7,"div",6),t.YNc(8,Ge,5,5,"div",7),t.YNc(9,ri,2,2,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(11,"mat-drawer",9,10),t.YNc(13,ii,1,1,"app-feedback-drawer",11),t.YNc(14,oi,1,0,"app-dictionary-drawer",12),t.YNc(15,si,1,5,"app-grammar-error-drawer",13),t.qZA()(),t._UZ(16,"app-synthesis-player",14,15)),2&i){const l=t.MAs(10);t.Q6J("ngIf",s.story),t.xp6(1),t.Q6J("ngIf",s.story),t.xp6(2),t.Q6J("opened",!s.story&&s.storiesLoaded),t.xp6(5),t.Q6J("ngIf",s.story)("ngIfElse",l),t.xp6(5),t.Q6J("ngIf","feedback"==s.selectedDrawer),t.xp6(1),t.Q6J("ngIf","dictionary"==s.selectedDrawer),t.xp6(1),t.Q6J("ngIf","grammar"==s.selectedDrawer),t.xp6(1),t.Q6J("text",null==s.story?null:s.story.text)("storyId",null==s.story?null:s.story._id)("storyTitle",null==s.story?null:s.story.title)}},dependencies:[R.mk,R.O5,R.PC,$e.Fj,$e.JJ,$e.On,$n.P,kn,En,on.g6,no,Yr,Kr,$r,Do],styles:['.storyTitleHeader{display:flex;justify-content:center;margin-top:-30px;padding-bottom:20px}.storyTitleContainer{margin:auto;overflow:auto;font-size:20px;font-weight:bolder}.storyTitle{border:1px solid transparent;text-align:center;resize:none}.storyTitle:hover{border:1px solid;border-radius:5px}.saveIcon{align-self:flex-end;white-space:nowrap;color:var(--dark-text);border-style:none;font-size:11pt;padding:5px}.savedIcon{color:var(--scealai-light-brown)}.optionsBtnContainer>*{height:2rem}.optionsBtnContainer{display:flex;justify-content:space-between;flex-wrap:wrap;--options-btn-background-color-hover: lightgray;margin-left:2%;margin-right:2%}.optionsBtn{background-color:var(--scealai-yellow);border-style:none;color:#464444;margin:0;border-radius:2px;display:flex;align-items:center;padding:5px;background:rgba(223,217,200,0)}.optionsBtn:hover{background-color:var(--options-btn-background-color-hover);color:#35322f;cursor:pointer;border-radius:2}.optionsPopupBtn{margin-right:4px}.optionsBtnIcon{margin-left:5px}.optionsBtnClicked{background-color:var(--options-btn-background-color-hover);color:#35322f;border-radius:2}.notRecordingBtn{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.bodyContainer{width:100%;height:100%}.storyListDrawer{padding:40px;max-width:35%;height:100%}.storyContainer{height:100%}.ql-container{background-color:#f8f9fa;height:100%}.ql-editor{background-color:#fff;z-index:1;margin-top:20px;font-size:14pt;font-family:Times New Roman,Times,serif;min-height:70vh!important;max-height:70vh!important}.menuButton{float:left;padding-left:10px;padding-top:7px;transform:scale(1.5);z-index:100}.menuButton:hover{cursor:pointer}.material-symbols-outlined{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 48}.newStoryMessage{font-weight:bolder;max-width:200px;padding-top:50px;padding-bottom:50px;height:80vh;width:100%}.rightDrawer{width:25%;height:100%}.blink{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}\n',".custom-tooltip:before{content:none!important}.circle{display:inline-block;width:12px;height:12px;border-radius:6px}[data-selected]{margin:.3em}[highlight-tag]{text-decoration:underline;text-decoration-color:var(--highlight-error-red);text-decoration-thickness:3px;position:relative}span[highlight-tag]:hover{cursor:pointer}span:not[highlight-tag-type]{border-radius:0;padding-left:0;padding-right:0}\n",'.ql-editor{overflow-y:auto}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=times-new-roman]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=times-new-roman]:before{content:"Times New Roman";font-family:Times New Roman}.ql-font-times-new-roman{font-family:times new roman}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=arial]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=arial]:before{content:"Arial";font-family:arial}.ql-font-arial{font-family:arial}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=sans-serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=sans-serif]:before{content:"Sans Serif";font-family:"sans serif"}.ql-font-sans-serif{font-family:"sans serif"}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{content:"Monospace";font-family:"monospace"}.ql-font-monospace{font-family:"monospace"}\n'],encapsulation:2}),a})(),ai=(()=>{class a{constructor(i){this.sanitizer=i}transform(i){return this.sanitizer.bypassSecurityTrustHtml(i)}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(an.H7,16))},a.\u0275pipe=t.Yjl({name:"safeHtml",type:a,pure:!0}),a})();function We(a,g){if(1&a&&(t.TgZ(0,"div",14)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&a){const i=t.oxw();t.xp6(2),t.Oqu(i.ts.l.synthesising)}}function zo(a,g){1&a&&(t._UZ(0,"span",18),t.ALo(1,"safeHtml")),2&a&&t.Q6J("innerHTML",t.lcZ(1,1,g.$implicit.outerHTML),t.oJD)}function ci(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,v=t.oxw(2);return t.KtG(v.stopSection(l))}),t._UZ(1,"i",20),t.qZA()}}function _t(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,v=t.oxw(2);return t.KtG(v.playSection(l))}),t._UZ(1,"i",21),t.qZA()}}function Pn(a,g){if(1&a&&(t.TgZ(0,"div",2),t.YNc(1,zo,2,3,"span",16),t.YNc(2,ci,2,0,"button",17),t.YNc(3,_t,2,0,"button",17),t.qZA()),2&a){const i=g.$implicit;t.xp6(1),t.Q6J("ngForOf",i.spans),t.xp6(1),t.Q6J("ngIf",!i.audio.paused),t.xp6(1),t.Q6J("ngIf",i.audio.paused)}}function ur(a,g){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,Pn,4,3,"div",15),t.qZA()),2&a){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.chosenSections)}}function _e(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div")(1,"button",24),t._uU(2),t.qZA(),t.TgZ(3,"button",25),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2);return t.KtG(l.changeSections(l.sentences))}),t._uU(4),t.qZA()()}if(2&a){const i=t.oxw(2);t.xp6(2),t.Oqu(i.ts.l.paragraph),t.xp6(2),t.Oqu(i.ts.l.sentence)}}function mt(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div")(1,"button",25),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2);return t.KtG(l.changeSections(l.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",24),t._uU(4),t.qZA()()}if(2&a){const i=t.oxw(2);t.xp6(2),t.Oqu(i.ts.l.paragraph),t.xp6(2),t.Oqu(i.ts.l.sentence)}}function lr(a,g){if(1&a&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t.qZA(),t.YNc(3,_e,5,2,"div",11),t.YNc(4,mt,5,2,"div",11),t.qZA()),2&a){const i=t.oxw();t.xp6(2),t.hij(" ",i.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",i.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",i.isSentenceMode())}}let Qo=(()=>{class a{constructor(i,s,l,v,F){this.storyService=i,this.route=s,this.router=l,this.ts=v,this.synthesis=F,this.paragraphs=[],this.sentences=[],this.audioFinishedLoading=!1}ngOnInit(){var i=this;return(0,w.Z)(function*(){i.storyId=i.route.snapshot.paramMap.get("id");let s=yield(0,C.z)(i.storyService.getStory(i.storyId));i.synthesis.synthesiseStory(s).then(([l,v])=>{i.paragraphs=l,i.sentences=v,i.chosenSections=i.paragraphs,i.audioFinishedLoading=!0})})()}isSentenceMode(){return this.chosenSections[0]instanceof Ie.cj}isParagraphMode(){return this.chosenSections[0]instanceof Ie.nv}changeSections(i){this.chosenSections=i,this.paragraphs.concat(this.sentences).forEach(l=>this.stopSection(l))}playSection(i){i.play(),i.highlight()}stopSection(i){i.stop(),i.removeHighlight()}goToDashboard(){this.router.navigateByUrl("/student/dashboard/"+this.storyId)}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(xe.N),t.Y36(u.gz),t.Y36(u.F0),t.Y36(B.D),t.Y36(Ie.cf))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-synthesis"]],decls:18,vars:5,consts:[["src","assets/img/book.png",1,"bookImg"],[1,"page"],[1,"paragraphContainer"],[1,"bookContainerSynth"],[1,"bookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"storyContainer"],[1,"storyHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[4,"ngIf"],[1,"footer"],["class","btnContainer",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"btnContainer"],[1,"footerText"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"]],template:function(i,s){1&i&&(t._UZ(0,"img",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t.NdJ("click",function(){return s.goToDashboard()}),t._UZ(6,"i",6),t._uU(7),t.qZA(),t._UZ(8,"div"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8),t._uU(11),t.qZA(),t.TgZ(12,"div")(13,"div",9),t.YNc(14,We,4,1,"div",10),t.YNc(15,ur,2,1,"div",11),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,lr,5,3,"div",13),t.qZA()()()()()),2&i&&(t.xp6(7),t.hij(" ",s.ts.l.story,""),t.xp6(4),t.hij(" ",s.ts.l.listen_and_correct," "),t.xp6(3),t.Q6J("ngIf",!s.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",s.audioFinishedLoading),t.xp6(2),t.Q6J("ngIf",s.audioFinishedLoading))},dependencies:[R.sg,R.O5,$n.P,ai],styles:['.bookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:var(--dark-text);width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.storyContainer[_ngcontent-%COMP%]{margin-top:10px}.storyHeader[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]:hover, .selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),a})();class dr{constructor(g,i=[],s=[],l=[],v=[],F=[],Y=[]){this.paragraphAudioIds=i,this.paragraphIndices=s,this.paragraphTranscriptions=l,this.sentenceAudioIds=v,this.sentenceIndices=F,this.sentenceTranscriptions=Y,this.storyData=g,this.date=new Date,this.archived=!1}}var Ko=M(2754);function Vo(a,g){1&a&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function $o(a,g){if(1&a&&(t.TgZ(0,"div",16),t._uU(1),t._UZ(2,"i",17),t.qZA()),2&a){const i=t.oxw(2);t.xp6(1),t.hij(" ",i.ts.l.saved," ")}}function ui(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2);return t.KtG(l.saveRecordings())}),t._uU(1),t._UZ(2,"i",19),t.qZA()}if(2&a){const i=t.oxw(2);t.xp6(1),t.hij(" ",i.ts.l.save," ")}}function Rn(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t.NdJ("click",function(){t.CHM(i);const l=t.oxw();return t.KtG(l.goToDashboard())}),t._UZ(2,"i",10),t._uU(3),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.YNc(6,Vo,2,0,"span",12),t.qZA(),t.TgZ(7,"div",13),t.YNc(8,$o,3,1,"div",14),t.YNc(9,ui,3,1,"div",15),t.qZA()()}if(2&a){const i=t.oxw();t.xp6(3),t.hij(" ",i.ts.l.story," "),t.xp6(2),t.hij(" ",null==i.story?null:i.story.title,""),t.xp6(1),t.Q6J("ngIf",!i.recordingSaved),t.xp6(2),t.Q6J("ngIf",i.recordingSaved),t.xp6(1),t.Q6J("ngIf",!i.recordingSaved)}}function Lt(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){t.CHM(i),t.oxw();const l=t.MAs(5);return t.KtG(l.toggle())}),t.TgZ(1,"mat-icon"),t._uU(2,"menu"),t.qZA(),t._uU(3),t.qZA()}if(2&a){const i=t.oxw();t.xp6(3),t.hij(" ",i.ts.l.archive," ")}}const Xo=function(a){return{"font-style":a}};function li(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div")(1,"div",21),t.NdJ("click",function(){const v=t.CHM(i).$implicit,F=t.oxw();return t.KtG(F.setCurrentRecording(v))}),t.TgZ(2,"div",22)(3,"div",23),t._uU(4),t.qZA()(),t.TgZ(5,"div",24),t._uU(6),t.ALo(7,"date"),t.qZA()(),t._UZ(8,"hr"),t.qZA()}if(2&a){const i=g.$implicit;t.xp6(1),t.uIk("id",i._id),t.xp6(2),t.Q6J("ngStyle",t.VKq(7,Xo,i.archived?"none":"italic")),t.xp6(1),t.hij(" ",null==i||null==i.storyData?null:i.storyData.title,""),t.xp6(2),t.hij(" ",t.xi3(7,4,i.date,"d/M/yy, h:mm a")," ")}}function di(a,g){if(1&a&&(t.TgZ(0,"div",30)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&a){const i=t.oxw(2);t.xp6(2),t.Oqu(i.ts.l.synthesising)}}function fr(a,g){1&a&&(t._UZ(0,"span",42),t.ALo(1,"safeHtml")),2&a&&t.Q6J("innerHTML",t.lcZ(1,1,g.$implicit.outerHTML),t.oJD)}function hr(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,v=t.oxw(3);return t.KtG(v.stopSection(l))}),t._UZ(1,"i",44),t.qZA()}}function fi(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().$implicit,v=t.oxw(3);return t.KtG(v.playSection(l))}),t._UZ(1,"i",45),t.qZA()}}function jo(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().index,v=t.oxw(3);return t.KtG(v.recordAudio(l))}),t._UZ(1,"i",47),t.qZA()}}function pr(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(i);const l=t.oxw().index,v=t.oxw(3);return t.KtG(v.stopRecording(l))}),t._UZ(1,"i",49),t.qZA()}}function gr(a,g){1&a&&t._UZ(0,"hr",50)}function es(a,g){1&a&&(t.TgZ(0,"div",51),t._UZ(1,"div",52),t.qZA())}function hi(a,g){if(1&a&&(t.TgZ(0,"div",53)(1,"span",54),t._uU(2),t.qZA(),t.TgZ(3,"span",55),t._uU(4),t.qZA()()),2&a){const i=t.oxw().index,s=t.oxw(3);t.xp6(2),t.hij("",s.ts.l.speech_recognition_output," "),t.xp6(2),t.Oqu(s.sectionTranscriptions[i])}}function Le(a,g){if(1&a&&t._UZ(0,"audio",59,60),2&a){const i=t.oxw(2).index,s=t.oxw(3);t.uIk("src",s.sectionAudioSources[i],t.LSH)}}function _r(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(2).index,v=t.oxw(3);return t.KtG(v.deleteRecording(l))}),t._UZ(1,"i",62),t.qZA()}}function un(a,g){if(1&a&&(t.TgZ(0,"div",56)(1,"div",54),t._uU(2),t.qZA(),t.YNc(3,Le,2,1,"audio",57),t.YNc(4,_r,2,0,"button",58),t.qZA()),2&a){const i=t.oxw().index,s=t.oxw(3);t.xp6(2),t.Oqu(s.ts.l.your_recording),t.xp6(1),t.Q6J("ngIf",s.sectionAudioSources[i]),t.xp6(1),t.Q6J("ngIf",s.sectionAudioSources[i]&&!s.currentRecording.archived)}}function pi(a,g){if(1&a&&(t.TgZ(0,"div",32)(1,"div",33)(2,"div"),t.YNc(3,fr,2,3,"span",34),t.YNc(4,hr,2,0,"button",35),t.YNc(5,fi,2,0,"button",35),t.YNc(6,jo,2,0,"button",36),t.YNc(7,pr,2,0,"button",37),t.qZA(),t.YNc(8,gr,1,0,"hr",38),t.YNc(9,es,2,0,"div",39),t.YNc(10,hi,5,2,"div",40),t.YNc(11,un,5,3,"div",41),t.qZA()()),2&a){const i=g.$implicit,s=g.index,l=t.oxw(3);t.xp6(3),t.Q6J("ngForOf",i.spans),t.xp6(1),t.Q6J("ngIf",!i.audio.paused),t.xp6(1),t.Q6J("ngIf",i.audio.paused),t.xp6(1),t.Q6J("ngIf",!l.isRecording(i,s)&&!l.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",l.isRecording(i,s)&&!l.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",l.sectionAudioSources[s]),t.xp6(1),t.Q6J("ngIf",l.isTranscribing[s]),t.xp6(1),t.Q6J("ngIf",l.sectionTranscriptions[s]),t.xp6(1),t.Q6J("ngIf",l.sectionAudioSources[s])}}function gi(a,g){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,pi,12,9,"div",31),t.qZA()),2&a){const i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",i.chosenSections)}}function ts(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div")(1,"button",67),t._uU(2),t.qZA(),t.TgZ(3,"button",68),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.changeSections(l.sentences))}),t._uU(4),t.qZA()()}if(2&a){const i=t.oxw(3);t.xp6(2),t.hij(" ",i.ts.l.paragraph," "),t.xp6(2),t.hij(" ",i.ts.l.sentence," ")}}function ns(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"div")(1,"button",68),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.changeSections(l.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",67),t._uU(4),t.qZA()()}if(2&a){const i=t.oxw(3);t.xp6(2),t.hij(" ",i.ts.l.paragraph," "),t.xp6(2),t.hij(" ",i.ts.l.sentence," ")}}function rs(a,g){if(1&a){const i=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(i);const l=t.oxw(3);return t.KtG(l.archiveRecording())}),t._uU(1),t.qZA()}if(2&a){const i=t.oxw(3);t.xp6(1),t.hij(" ",i.ts.l.archive_recording," ")}}function is(a,g){if(1&a&&(t.TgZ(0,"div",63)(1,"div",64)(2,"div",65),t._uU(3),t.qZA(),t.YNc(4,ts,5,2,"div",12),t.YNc(5,ns,5,2,"div",12),t.YNc(6,rs,2,1,"button",66),t.qZA()()),2&a){const i=t.oxw(2);t.xp6(3),t.hij(" ",i.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",i.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",i.isSentenceMode()),t.xp6(1),t.Q6J("ngIf",!i.currentRecording.archived&&i.currentRecording.storyData.text!=i.story.text)}}function os(a,g){if(1&a&&(t.TgZ(0,"div",25)(1,"div",26),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t.YNc(4,di,4,1,"div",28),t.YNc(5,gi,2,1,"div",12),t.qZA(),t.YNc(6,is,7,4,"div",29),t.qZA()),2&a){const i=t.oxw();t.xp6(2),t.hij(" ",i.ts.l.listen_record_compare," "),t.xp6(2),t.Q6J("ngIf",!i.audioFinishedLoading&&!i.recordingsFinishedLoading),t.xp6(1),t.Q6J("ngIf",i.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",i.audioFinishedLoading)}}const ss=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"dashboard",component:Be,canActivate:[x.P],canDeactivate:[p]},{path:"synthesis/:id",component:Qo,canActivate:[x.P],canDeactivate:[T]},{path:"record-story/:id",component:(()=>{class a{constructor(i,s,l,v,F,Y,ne,ve,X){this.storyService=i,this.ts=s,this.sanitizer=l,this.route=v,this.router=F,this.recordingService=Y,this.synthesis=ne,this.engagement=ve,this.dialog=X,this.story=new On,this.paragraphs=[],this.sentences=[],this.isRecordingParagraph=[],this.isRecordingSentence=[],this.isRecordingSection=[],this.paragraphAudioSources=[],this.sentenceAudioSources=[],this.sectionAudioSources=[],this.paragraphBlobs=[],this.sentenceBlobs=[],this.sectionBlobs=[],this.paragraphChunks=[],this.sentenceChunks=[],this.sectionChunks=[],this.recordingSaved=!0,this.audioFinishedLoading=!1,this.url_ASR_API="https://phoneticsrv3.lcs.tcd.ie/asr_api/recognise",this.sentenceTranscriptions=[],this.paragraphTranscriptions=[],this.sectionTranscriptions=[],this.isTranscribing=[!1],this.recordings=[],this.currentRecording=null,this.lastClickedRecordingId=""}ngOnInit(){var i=this;return(0,w.Z)(function*(){i.chunks=[],i.sectionAudioSources=i.paragraphAudioSources,i.sectionBlobs=i.paragraphBlobs,i.sectionChunks=i.paragraphChunks,i.sectionTranscriptions=i.paragraphTranscriptions,i.isRecordingSection=i.isRecordingParagraph;const s=i.route.snapshot.paramMap.get("id");i.story=yield(0,C.z)(i.storyService.getStory(s)),(0,Ko.TD)({audio:!0,video:!1}).then((0,w.Z)(function*(){i.story.activeRecording?i.loadRecordings():i.createNewRecording()})).catch(l=>{i.openMicRequestDialog()})})()}loadRecordings(){var i=this;return(0,w.Z)(function*(){i.recordings=yield(0,C.z)(i.recordingService.getRecordings(i.story._id)),i.recordings.sort((l,v)=>l.date>v.date?-1:1);let s=i.recordings.filter(l=>!1===l.archived);i.setCurrentRecording(s[0])})()}setCurrentRecording(i){this.currentRecording=i,this.loadSynthesis(this.currentRecording.storyData),this.loadAudio(this.currentRecording);let s=this.currentRecording._id,l=document.getElementById(s);l&&(this.lastClickedRecordingId&&document.getElementById(this.lastClickedRecordingId).classList.remove("clickedresultCard"),this.lastClickedRecordingId=s,l.classList.add("clickedresultCard"))}createNewRecording(){var i=this;return(0,w.Z)(function*(){const s=yield(0,C.z)(i.recordingService.create(new dr(i.story)));i.story=yield(0,C.z)(i.storyService.updateActiveRecording(i.story._id,s._id)),i.loadRecordings()})()}archiveRecording(){var i=this;return(0,w.Z)(function*(){yield(0,C.z)(i.recordingService.updateArchiveStatus(i.currentRecording._id)),i.createNewRecording()})()}loadSynthesis(i){this.synthesis.synthesiseStory(i).then(([s,l])=>{this.paragraphs=s,this.sentences=l,this.chosenSections=this.paragraphs,this.audioFinishedLoading=!0})}loadAudio(i){var s=this;return(0,w.Z)(function*(){s.audioFinishedLoading=!1,s.paragraphAudioSources=[],s.paragraphTranscriptions=[],s.sentenceAudioSources=[],s.sentenceTranscriptions=[],s.sectionAudioSources=[],s.sectionTranscriptions=[];for(let l=0;l<i.paragraphIndices.length;++l){let v=yield(0,C.z)(s.recordingService.getAudio(i.paragraphAudioIds[l]));s.paragraphBlobs[l]=v,s.paragraphAudioSources[i.paragraphIndices[l]]=s.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(v)),s.paragraphTranscriptions[i.paragraphIndices[l]]=i.paragraphTranscriptions[i.paragraphIndices[l]]}for(let l=0;l<i.sentenceIndices.length;++l){let v=yield(0,C.z)(s.recordingService.getAudio(i.sentenceAudioIds[l]));s.sentenceBlobs[l]=v,s.sentenceAudioSources[i.sentenceIndices[l]]=s.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(v)),s.sentenceTranscriptions[i.sentenceIndices[l]]=i.sentenceTranscriptions[i.sentenceIndices[l]]}s.sectionTranscriptions=s.paragraphTranscriptions,s.sectionAudioSources=s.paragraphAudioSources})()}recordAudio(i){this.engagement.addEventForLoggedInUser(Jt.tw["RECORD-STORY"],this.story),navigator.mediaDevices.getUserMedia({audio:!0}).then(l=>{this.stream=l,this.recorder=new MediaRecorder(this.stream),this.sectionChunks[i]=[],this.recorder.start(),this.isRecordingSection[i]=!0,this.recorder.ondataavailable=v=>{this.sectionChunks[i].push(v.data)}}).catch()}stopRecording(i){this.recorder.stop(),this.isRecordingSection[i]=!1,this.stream.getTracks().forEach(s=>s.stop()),setTimeout(()=>{const s=new Blob(this.sectionChunks[i],{type:"audio/mp3"});this.sectionBlobs[i]=s,this.sectionAudioSources[i]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(s)),this.recordingSaved=!1;const l=new FileReader;l.readAsDataURL(s),l.onloadend=function(){let v=l.result.split(";base64,")[1];this.getTranscription(v,i)}.bind(this)},500)}getTranscription(i,s){this.isTranscribing[s]=!0,this.isParagraphMode()&&(this.paragraphTranscriptions[s]=null),this.isSentenceMode()&&(this.sentenceTranscriptions[s]=null),fetch(this.url_ASR_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({recogniseBlob:i,developer:!0})}).then(v=>v.json()).then(v=>{let F=v.transcriptions[0].utterance;this.isParagraphMode()?(this.paragraphTranscriptions[s]=F,this.sectionTranscriptions[s]=this.paragraphTranscriptions[s]):this.isSentenceMode()&&(this.sentenceTranscriptions[s]=F,this.sectionTranscriptions[s]=this.sentenceTranscriptions[s]),this.isTranscribing[s]=!1})}deleteRecording(i){this.recordingSaved=!1,delete this.sectionAudioSources[i],delete this.sectionChunks[i],delete this.sectionBlobs[i],delete this.sectionTranscriptions[i]}saveRecordings(){var i=this;return(0,w.Z)(function*(){const s=Object.entries(i.paragraphBlobs).map(function(){var Ae=(0,w.Z)(function*([y,O]){return i.recordingService.saveAudio(i.story._id,O,y).toPromise()});return function(y){return Ae.apply(this,arguments)}}()),l=Object.entries(i.sentenceBlobs).map(function(){var Ae=(0,w.Z)(function*([y,O]){return i.recordingService.saveAudio(i.story._id,O,y).toPromise()});return function(y){return Ae.apply(this,arguments)}}()),v=yield Promise.all(s),F=yield Promise.all(l);let Y=[],ne=[];for(const Ae of v)Y.push(Ae.index),ne.push(Ae.fileId);let ve=[],X=[];for(const Ae of F)ve.push(Ae.index),X.push(Ae.fileId);const me={paragraphAudioIds:ne,paragraphIndices:Y,paragraphTranscriptions:i.paragraphTranscriptions,sentenceIndices:ve,sentenceAudioIds:X,sentenceTranscriptions:i.sentenceTranscriptions};let ke=yield(0,C.z)(i.recordingService.update(i.story.activeRecording,me));if(ke){i.recordingSaved=!0;const Ae=i.recordings.indexOf(i.currentRecording);i.recordings.splice(Ae,1,ke)}else alert("Error while saving audio")})()}isRecording(i,s){return i instanceof Ie.cj?this.isRecordingSentence[s]:i instanceof Ie.nv?this.isRecordingParagraph[s]:void 0}isSentenceMode(){return this.chosenSections[0]instanceof Ie.cj}isParagraphMode(){return this.chosenSections[0]instanceof Ie.nv}changeSections(i){this.chosenSections=i,this.paragraphs.concat(this.sentences).forEach(l=>this.stopSection(l)),this.isSentenceMode()?(this.sectionAudioSources=this.sentenceAudioSources,this.sectionBlobs=this.sentenceBlobs,this.sectionChunks=this.sentenceChunks,this.sectionTranscriptions=this.sentenceTranscriptions,this.isRecordingSection=this.isRecordingSentence):this.isParagraphMode()&&(this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.sectionTranscriptions=this.paragraphTranscriptions,this.isRecordingSection=this.isRecordingParagraph)}playSection(i){i.play(),i.highlight()}stopSection(i){i.stop(),i.removeHighlight()}goToDashboard(){this.router.navigateByUrl("student/dashboard")}openMicRequestDialog(){var i=this;this.dialogRef=this.dialog.open(E.p,{data:{title:this.ts.l.microphone_blocked,message:this.ts.l.page_requires_microphone,confirmText:this.ts.l.refresh,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var s=(0,w.Z)(function*(l){i.dialogRef=void 0,console.log(l),l?i.ngOnInit():i.goToDashboard()});return function(l){return s.apply(this,arguments)}}())}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(xe.N),t.Y36(B.D),t.Y36(an.H7),t.Y36(u.gz),t.Y36(u.F0),t.Y36(rr.s),t.Y36(Ie.cf),t.Y36(ye.M),t.Y36(h.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-recording"]],decls:8,vars:4,consts:[[1,"content"],["class","recordingBookHeader",4,"ngIf"],["class","archiveButton",3,"click",4,"ngIf"],["autosize","",1,"archiveNavContainer"],["mode","side",1,"sidenav"],["drawer",""],[4,"ngFor","ngForOf"],["class","recordingStoryContainer",4,"ngIf"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"archiveButton",3,"click"],[1,"contentSection",3,"click"],[1,"contentsLink"],[3,"ngStyle"],[1,"contentsDate"],[1,"recordingStoryContainer"],[1,"recordingStoryHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],["class","footer","style","padding-top: 10px",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],["class","recordingBtn",3,"click",4,"ngIf"],["class","notRecordingBtn blink",3,"click",4,"ngIf"],["class","dividerLine",4,"ngIf"],["class","recognisedSpeechContainer",4,"ngIf"],["style","height: 40px",4,"ngIf"],["class","audioContainer",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"recordingBtn",3,"click"],[1,"fas","fa-microphone"],[1,"notRecordingBtn","blink",3,"click"],[1,"fas","fa-stop-circle"],[1,"dividerLine"],[1,"recognisedSpeechContainer"],[1,"dot-flashing"],[2,"height","40px"],[2,"opacity","0.5"],[1,"recognisedSpeech"],[1,"audioContainer"],["controls","","class","audioPlayer",4,"ngIf"],["class","notRecordingBtn trashBtn",3,"click",4,"ngIf"],["controls","",1,"audioPlayer"],["audioTag",""],[1,"notRecordingBtn","trashBtn",3,"click"],[1,"fas","fa-trash-alt"],[1,"footer",2,"padding-top","10px"],[1,"btnContainer"],[1,"footerText"],["class","changeSplitBtn","style","margin-left: auto",3,"click",4,"ngIf"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"],[1,"changeSplitBtn",2,"margin-left","auto",3,"click"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0),t.YNc(1,Rn,10,5,"div",1),t.YNc(2,Lt,4,1,"div",2),t.TgZ(3,"mat-drawer-container",3)(4,"mat-drawer",4,5),t.YNc(6,li,9,9,"div",6),t.qZA(),t.YNc(7,os,7,4,"div",7),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("ngIf",s.story),t.xp6(1),t.Q6J("ngIf",s.recordings.length>0),t.xp6(4),t.Q6J("ngForOf",s.recordings),t.xp6(1),t.Q6J("ngIf",s.story))},dependencies:[R.sg,R.O5,R.PC,$n.P,kn,En,sn.Hw,R.uU,ai],styles:['.content[_ngcontent-%COMP%]{width:90%;margin-left:5%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.archiveNavContainer[_ngcontent-%COMP%]{height:70vh;background-color:#fff}.sidenav[_ngcontent-%COMP%]{padding:20px;width:20vw}.archiveButton[_ngcontent-%COMP%]{display:flex;margin-left:10px;margin-top:20px;font-size:16px}.archiveButton[_ngcontent-%COMP%]:hover, .contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:20px;height:80%}.textContainerSynth[_ngcontent-%COMP%]{box-shadow:0 0 11px 2px #0006;margin-left:5%;width:90%;color:var(--dark-text);background-color:#f8f9fa;text-align:left;overflow:auto;height:100%}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{white-space:nowrap;display:inline;border-style:none;color:var(--dark-text);width:10rem;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.bookTitle[_ngcontent-%COMP%]{overflow:auto;color:var(--dark-text);margin-left:2em;margin-right:2em;display:inline-block;font-size:16pt}.recordingSaveIcon[_ngcontent-%COMP%]{width:10rem;color:var(--dark-text);border-style:none;font-size:11pt;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{white-space:nowrap;color:var(--scealai-light-brown)}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);cursor:pointer;transition:.5s}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:10px;font-weight:700;border-radius:10px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.recordingBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px;float:right}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.recognisedSpeech[_ngcontent-%COMP%]{color:var(--scealai-green);font-style:italic;padding-left:5px}.audioContainer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.audioPlayer[_ngcontent-%COMP%]{width:25%;height:35px}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}.selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}.blink[_ngcontent-%COMP%]{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),a})(),canActivate:[x.P],canDeactivate:[Z]}];let as=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[u.Bz.forChild(ss),u.Bz]}),a})();var mr=M(3869);let _i=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[R.ez,as,Rr.LD,$e.u5,mr.F,Wr,ir.ot,sn.Ps,In.Tx,Pr.Q,on.fi.forRoot({customOptions:[{import:"formats/font",whitelist:["sans-serif","serif","monospace","arial","times-new-roman"]}]})]}),a})()},7230:function(qe){qe.exports=function(J){var M={};function R(u){if(M[u])return M[u].exports;var x=M[u]={i:u,l:!1,exports:{}};return J[u].call(x.exports,x,x.exports,R),x.l=!0,x.exports}return R.m=J,R.c=M,R.d=function(u,x,E){R.o(u,x)||Object.defineProperty(u,x,{enumerable:!0,get:E})},R.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},R.t=function(u,x){if(1&x&&(u=R(u)),8&x||4&x&&"object"==typeof u&&u&&u.__esModule)return u;var E=Object.create(null);if(R.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:u}),2&x&&"string"!=typeof u)for(var B in u)R.d(E,B,function(t){return u[t]}.bind(null,B));return E},R.n=function(u){var x=u&&u.__esModule?function(){return u.default}:function(){return u};return R.d(x,"a",x),x},R.o=function(u,x){return Object.prototype.hasOwnProperty.call(u,x)},R.p="",R(R.s=90)}({17:function(J,M,R){"use strict";M.__esModule=!0,M.default=void 0;var u=R(18),x=function(){function E(){}return E.getFirstMatch=function(B,t){var h=t.match(B);return h&&h.length>0&&h[1]||""},E.getSecondMatch=function(B,t){var h=t.match(B);return h&&h.length>1&&h[2]||""},E.matchAndReturnConst=function(B,t,h){if(B.test(t))return h},E.getWindowsVersionName=function(B){switch(B){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},E.getMacOSVersionName=function(B){var t=B.split(".").splice(0,2).map(function(h){return parseInt(h,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},E.getAndroidVersionName=function(B){var t=B.split(".").splice(0,2).map(function(h){return parseInt(h,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},E.getVersionPrecision=function(B){return B.split(".").length},E.compareVersions=function(B,t,h){void 0===h&&(h=!1);var p=E.getVersionPrecision(B),Z=E.getVersionPrecision(t),T=Math.max(p,Z),w=0,A=E.map([B,t],function(C){var b=T-E.getVersionPrecision(C),L=C+new Array(b+1).join(".0");return E.map(L.split("."),function(q){return new Array(20-q.length).join("0")+q}).reverse()});for(h&&(w=T-Math.min(p,Z)),T-=1;T>=w;){if(A[0][T]>A[1][T])return 1;if(A[0][T]===A[1][T]){if(T===w)return 0;T-=1}else if(A[0][T]<A[1][T])return-1}},E.map=function(B,t){var h,p=[];if(Array.prototype.map)return Array.prototype.map.call(B,t);for(h=0;h<B.length;h+=1)p.push(t(B[h]));return p},E.find=function(B,t){var h,p;if(Array.prototype.find)return Array.prototype.find.call(B,t);for(h=0,p=B.length;h<p;h+=1){var Z=B[h];if(t(Z,h))return Z}},E.assign=function(B){for(var t,h,p=B,Z=arguments.length,T=new Array(Z>1?Z-1:0),w=1;w<Z;w++)T[w-1]=arguments[w];if(Object.assign)return Object.assign.apply(Object,[B].concat(T));var A=function(){var C=T[t];"object"==typeof C&&null!==C&&Object.keys(C).forEach(function(b){p[b]=C[b]})};for(t=0,h=T.length;t<h;t+=1)A();return B},E.getBrowserAlias=function(B){return u.BROWSER_ALIASES_MAP[B]},E.getBrowserTypeByAlias=function(B){return u.BROWSER_MAP[B]||""},E}();M.default=x,J.exports=M.default},18:function(J,M,R){"use strict";M.__esModule=!0,M.ENGINE_MAP=M.OS_MAP=M.PLATFORMS_MAP=M.BROWSER_MAP=M.BROWSER_ALIASES_MAP=void 0,M.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},M.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},M.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},M.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},M.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(J,M,R){"use strict";M.__esModule=!0,M.default=void 0;var u,x=(u=R(91))&&u.__esModule?u:{default:u},E=R(18);function B(h,p){for(var Z=0;Z<p.length;Z++){var T=p[Z];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(h,T.key,T)}}var t=function(){function h(){}var p,T;return h.getParser=function(w,A){if(void 0===A&&(A=!1),"string"!=typeof w)throw new Error("UserAgent should be a string");return new x.default(w,A)},h.parse=function(w){return new x.default(w).getResult()},p=h,T=[{key:"BROWSER_MAP",get:function(){return E.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return E.ENGINE_MAP}},{key:"OS_MAP",get:function(){return E.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return E.PLATFORMS_MAP}}],null&&B(p.prototype,null),T&&B(p,T),h}();M.default=t,J.exports=M.default},91:function(J,M,R){"use strict";M.__esModule=!0,M.default=void 0;var u=h(R(92)),x=h(R(93)),E=h(R(94)),B=h(R(95)),t=h(R(17));function h(Z){return Z&&Z.__esModule?Z:{default:Z}}var p=function(){function Z(w,A){if(void 0===A&&(A=!1),null==w||""===w)throw new Error("UserAgent parameter can't be empty");this._ua=w,this.parsedResult={},!0!==A&&this.parse()}var T=Z.prototype;return T.getUA=function(){return this._ua},T.test=function(w){return w.test(this._ua)},T.parseBrowser=function(){var w=this;this.parsedResult.browser={};var A=t.default.find(u.default,function(C){if("function"==typeof C.test)return C.test(w);if(C.test instanceof Array)return C.test.some(function(b){return w.test(b)});throw new Error("Browser's test function is not valid")});return A&&(this.parsedResult.browser=A.describe(this.getUA())),this.parsedResult.browser},T.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},T.getBrowserName=function(w){return w?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},T.getBrowserVersion=function(){return this.getBrowser().version},T.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},T.parseOS=function(){var w=this;this.parsedResult.os={};var A=t.default.find(x.default,function(C){if("function"==typeof C.test)return C.test(w);if(C.test instanceof Array)return C.test.some(function(b){return w.test(b)});throw new Error("Browser's test function is not valid")});return A&&(this.parsedResult.os=A.describe(this.getUA())),this.parsedResult.os},T.getOSName=function(w){var A=this.getOS().name;return w?String(A).toLowerCase()||"":A||""},T.getOSVersion=function(){return this.getOS().version},T.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},T.getPlatformType=function(w){void 0===w&&(w=!1);var A=this.getPlatform().type;return w?String(A).toLowerCase()||"":A||""},T.parsePlatform=function(){var w=this;this.parsedResult.platform={};var A=t.default.find(E.default,function(C){if("function"==typeof C.test)return C.test(w);if(C.test instanceof Array)return C.test.some(function(b){return w.test(b)});throw new Error("Browser's test function is not valid")});return A&&(this.parsedResult.platform=A.describe(this.getUA())),this.parsedResult.platform},T.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},T.getEngineName=function(w){return w?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},T.parseEngine=function(){var w=this;this.parsedResult.engine={};var A=t.default.find(B.default,function(C){if("function"==typeof C.test)return C.test(w);if(C.test instanceof Array)return C.test.some(function(b){return w.test(b)});throw new Error("Browser's test function is not valid")});return A&&(this.parsedResult.engine=A.describe(this.getUA())),this.parsedResult.engine},T.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},T.getResult=function(){return t.default.assign({},this.parsedResult)},T.satisfies=function(w){var A=this,C={},b=0,L={},q=0;if(Object.keys(w).forEach(function(ge){var He=w[ge];"string"==typeof He?(L[ge]=He,q+=1):"object"==typeof He&&(C[ge]=He,b+=1)}),b>0){var V=Object.keys(C),ee=t.default.find(V,function(ge){return A.isOS(ge)});if(ee){var H=this.satisfies(C[ee]);if(void 0!==H)return H}var G=t.default.find(V,function(ge){return A.isPlatform(ge)});if(G){var ue=this.satisfies(C[G]);if(void 0!==ue)return ue}}if(q>0){var xe=Object.keys(L),ye=t.default.find(xe,function(ge){return A.isBrowser(ge,!0)});if(void 0!==ye)return this.compareVersion(L[ye])}},T.isBrowser=function(w,A){void 0===A&&(A=!1);var C=this.getBrowserName().toLowerCase(),b=w.toLowerCase(),L=t.default.getBrowserTypeByAlias(b);return A&&L&&(b=L.toLowerCase()),b===C},T.compareVersion=function(w){var A=[0],C=w,b=!1,L=this.getBrowserVersion();if("string"==typeof L)return">"===w[0]||"<"===w[0]?(C=w.substr(1),"="===w[1]?(b=!0,C=w.substr(2)):A=[],A.push(">"===w[0]?1:-1)):"="===w[0]?C=w.substr(1):"~"===w[0]&&(b=!0,C=w.substr(1)),A.indexOf(t.default.compareVersions(L,C,b))>-1},T.isOS=function(w){return this.getOSName(!0)===String(w).toLowerCase()},T.isPlatform=function(w){return this.getPlatformType(!0)===String(w).toLowerCase()},T.isEngine=function(w){return this.getEngineName(!0)===String(w).toLowerCase()},T.is=function(w,A){return void 0===A&&(A=!1),this.isBrowser(w,A)||this.isOS(w)||this.isPlatform(w)},T.some=function(w){var A=this;return void 0===w&&(w=[]),w.some(function(C){return A.is(C)})},Z}();M.default=p,J.exports=M.default},92:function(J,M,R){"use strict";M.__esModule=!0,M.default=void 0;var u,x=(u=R(17))&&u.__esModule?u:{default:u},E=/version\/(\d+(\.?_?\d+)+)/i;M.default=[{test:[/googlebot/i],describe:function(t){var h={name:"Googlebot"},p=x.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/opera/i],describe:function(t){var h={name:"Opera"},p=x.default.getFirstMatch(E,t)||x.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/opr\/|opios/i],describe:function(t){var h={name:"Opera"},p=x.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/SamsungBrowser/i],describe:function(t){var h={name:"Samsung Internet for Android"},p=x.default.getFirstMatch(E,t)||x.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/Whale/i],describe:function(t){var h={name:"NAVER Whale Browser"},p=x.default.getFirstMatch(E,t)||x.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/MZBrowser/i],describe:function(t){var h={name:"MZ Browser"},p=x.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/focus/i],describe:function(t){var h={name:"Focus"},p=x.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/swing/i],describe:function(t){var h={name:"Swing"},p=x.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/coast/i],describe:function(t){var h={name:"Opera Coast"},p=x.default.getFirstMatch(E,t)||x.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var h={name:"Opera Touch"},p=x.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/yabrowser/i],describe:function(t){var h={name:"Yandex Browser"},p=x.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/ucbrowser/i],describe:function(t){var h={name:"UC Browser"},p=x.default.getFirstMatch(E,t)||x.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/Maxthon|mxios/i],describe:function(t){var h={name:"Maxthon"},p=x.default.getFirstMatch(E,t)||x.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/epiphany/i],describe:function(t){var h={name:"Epiphany"},p=x.default.getFirstMatch(E,t)||x.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/puffin/i],describe:function(t){var h={name:"Puffin"},p=x.default.getFirstMatch(E,t)||x.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/sleipnir/i],describe:function(t){var h={name:"Sleipnir"},p=x.default.getFirstMatch(E,t)||x.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/k-meleon/i],describe:function(t){var h={name:"K-Meleon"},p=x.default.getFirstMatch(E,t)||x.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/micromessenger/i],describe:function(t){var h={name:"WeChat"},p=x.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/qqbrowser/i],describe:function(t){var h={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},p=x.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/msie|trident/i],describe:function(t){var h={name:"Internet Explorer"},p=x.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/\sedg\//i],describe:function(t){var h={name:"Microsoft Edge"},p=x.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/edg([ea]|ios)/i],describe:function(t){var h={name:"Microsoft Edge"},p=x.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/vivaldi/i],describe:function(t){var h={name:"Vivaldi"},p=x.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/seamonkey/i],describe:function(t){var h={name:"SeaMonkey"},p=x.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/sailfish/i],describe:function(t){var h={name:"Sailfish"},p=x.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return p&&(h.version=p),h}},{test:[/silk/i],describe:function(t){var h={name:"Amazon Silk"},p=x.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/phantom/i],describe:function(t){var h={name:"PhantomJS"},p=x.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/slimerjs/i],describe:function(t){var h={name:"SlimerJS"},p=x.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var h={name:"BlackBerry"},p=x.default.getFirstMatch(E,t)||x.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var h={name:"WebOS Browser"},p=x.default.getFirstMatch(E,t)||x.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/bada/i],describe:function(t){var h={name:"Bada"},p=x.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/tizen/i],describe:function(t){var h={name:"Tizen"},p=x.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/qupzilla/i],describe:function(t){var h={name:"QupZilla"},p=x.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var h={name:"Firefox"},p=x.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/electron/i],describe:function(t){var h={name:"Electron"},p=x.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/MiuiBrowser/i],describe:function(t){var h={name:"Miui"},p=x.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/chromium/i],describe:function(t){var h={name:"Chromium"},p=x.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/chrome|crios|crmo/i],describe:function(t){var h={name:"Chrome"},p=x.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/GSA/i],describe:function(t){var h={name:"Google Search"},p=x.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:function(t){var h=!t.test(/like android/i),p=t.test(/android/i);return h&&p},describe:function(t){var h={name:"Android Browser"},p=x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/playstation 4/i],describe:function(t){var h={name:"PlayStation 4"},p=x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/safari|applewebkit/i],describe:function(t){var h={name:"Safari"},p=x.default.getFirstMatch(E,t);return p&&(h.version=p),h}},{test:[/.*/i],describe:function(t){var h=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:x.default.getFirstMatch(h,t),version:x.default.getSecondMatch(h,t)}}}],J.exports=M.default},93:function(J,M,R){"use strict";M.__esModule=!0,M.default=void 0;var u,x=(u=R(17))&&u.__esModule?u:{default:u},E=R(18);M.default=[{test:[/Roku\/DVP/],describe:function(t){var h=x.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:E.OS_MAP.Roku,version:h}}},{test:[/windows phone/i],describe:function(t){var h=x.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:E.OS_MAP.WindowsPhone,version:h}}},{test:[/windows /i],describe:function(t){var h=x.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),p=x.default.getWindowsVersionName(h);return{name:E.OS_MAP.Windows,version:h,versionName:p}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var h={name:E.OS_MAP.iOS},p=x.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return p&&(h.version=p),h}},{test:[/macintosh/i],describe:function(t){var h=x.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),p=x.default.getMacOSVersionName(h),Z={name:E.OS_MAP.MacOS,version:h};return p&&(Z.versionName=p),Z}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var h=x.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:E.OS_MAP.iOS,version:h}}},{test:function(t){var h=!t.test(/like android/i),p=t.test(/android/i);return h&&p},describe:function(t){var h=x.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),p=x.default.getAndroidVersionName(h),Z={name:E.OS_MAP.Android,version:h};return p&&(Z.versionName=p),Z}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var h=x.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),p={name:E.OS_MAP.WebOS};return h&&h.length&&(p.version=h),p}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var h=x.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||x.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||x.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:E.OS_MAP.BlackBerry,version:h}}},{test:[/bada/i],describe:function(t){var h=x.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:E.OS_MAP.Bada,version:h}}},{test:[/tizen/i],describe:function(t){var h=x.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:E.OS_MAP.Tizen,version:h}}},{test:[/linux/i],describe:function(){return{name:E.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:E.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var h=x.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:E.OS_MAP.PlayStation4,version:h}}}],J.exports=M.default},94:function(J,M,R){"use strict";M.__esModule=!0,M.default=void 0;var u,x=(u=R(17))&&u.__esModule?u:{default:u},E=R(18);M.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var h=x.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",p={type:E.PLATFORMS_MAP.mobile,vendor:"Huawei"};return h&&(p.model=h),p}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet}}},{test:function(t){var h=t.test(/ipod|iphone/i),p=t.test(/like (ipod|iphone)/i);return h&&!p},describe:function(t){var h=x.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:E.PLATFORMS_MAP.mobile,vendor:"Apple",model:h}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:E.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:E.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:E.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var h=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&h>=3},describe:function(){return{type:E.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.tv}}}],J.exports=M.default},95:function(J,M,R){"use strict";M.__esModule=!0,M.default=void 0;var u,x=(u=R(17))&&u.__esModule?u:{default:u},E=R(18);M.default=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:E.ENGINE_MAP.Blink};var h=x.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:E.ENGINE_MAP.EdgeHTML,version:h}}},{test:[/trident/i],describe:function(t){var h={name:E.ENGINE_MAP.Trident},p=x.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:function(t){return t.test(/presto/i)},describe:function(t){var h={name:E.ENGINE_MAP.Presto},p=x.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:function(t){var h=t.test(/gecko/i),p=t.test(/like gecko/i);return h&&!p},describe:function(t){var h={name:E.ENGINE_MAP.Gecko},p=x.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:E.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var h={name:E.ENGINE_MAP.WebKit},p=x.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return p&&(h.version=p),h}}],J.exports=M.default}})},7489:function(qe,J,M){var R;qe=M.nmd(qe),function(){var u,t="Expected a function",p="__lodash_hash_undefined__",T="__lodash_placeholder__",xt=1/0,gt=9007199254740991,nt=4294967295,Jt=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Rt="[object Arguments]",wn="[object Array]",Yt="[object Boolean]",zt="[object Date]",Qt="[object Error]",xn="[object Function]",Jn="[object GeneratorFunction]",Ke="[object Map]",Kt="[object Number]",ut="[object Object]",Vt="[object Promise]",$t="[object RegExp]",Ve="[object Set]",Xt="[object String]",Dt="[object Symbol]",jt="[object WeakMap]",en="[object ArrayBuffer]",bt="[object DataView]",Yn="[object Float32Array]",Dr="[object Float64Array]",Cn="[object Int8Array]",zn="[object Int16Array]",Qn="[object Int32Array]",Kn="[object Uint8Array]",tn="[object Uint8ClampedArray]",Sn="[object Uint16Array]",nn="[object Uint32Array]",ao=/\b__p \+= '';/g,co=/\b(__p \+=) '' \+/g,uo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Fr=/&(?:amp|lt|gt|quot|#39);/g,Tn=/[&<>"']/g,lo=RegExp(Fr.source),Vn=RegExp(Tn.source),fo=/<%-([\s\S]+?)%>/g,Br=/<%([\s\S]+?)%>/g,$e=/<%=([\s\S]+?)%>/g,$n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ct=/^\w*$/,Xn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jn=/[\\^$.*+?()[\]{}|]/g,rn=RegExp(jn.source),An=/^\s+/,ho=/\s/,po=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,go=/\{\n\/\* \[wrapped with (.+)\] \*/,Ft=/,? & /,Lr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zr=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,Nr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,er=/\w*$/,_o=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,Ur=/^\[object .+?Constructor\]$/,mo=/^0o[0-7]+$/i,vo=/^(?:0|[1-9]\d*)$/,yo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mn=/($^)/,wo=/['\n\r\u2028\u2029\\]/g,tr="\\ud800-\\udfff",xo="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",qr="\\u2700-\\u27bf",bo="a-z\\xdf-\\xf6\\xf8-\\xff",kn="A-Z\\xc0-\\xd6\\xd8-\\xde",En="\\ufe0e\\ufe0f",To="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",oa="["+tr+"]",Wr="["+To+"]",on="["+xo+"]",rr="\\d+",Ao="["+qr+"]",On="["+bo+"]",ir="[^"+tr+To+rr+qr+bo+kn+"]",sn="\\ud83c[\\udffb-\\udfff]",Jr="[^"+tr+"]",or="(?:\\ud83c[\\udde6-\\uddff]){2}",sr="[\\ud800-\\udbff][\\udc00-\\udfff]",Bt="["+kn+"]",an="(?:"+On+"|"+ir+")",Mo="(?:"+Bt+"|"+ir+")",zr="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Qr="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Kr="(?:"+on+"|"+sn+")?",Vr="["+En+"]?",$r=Vr+Kr+"(?:\\u200d(?:"+[Jr,or,sr].join("|")+")"+Vr+Kr+")*",Io="(?:"+[Ao,or,sr].join("|")+")"+$r,Po="(?:"+[Jr+on+"?",on,or,sr,oa].join("|")+")",Ro=RegExp("['\u2019]","g"),Do=RegExp(on,"g"),ar=RegExp(sn+"(?="+sn+")|"+Po+$r,"g"),Fo=RegExp([Bt+"?"+On+"+"+zr+"(?="+[Wr,Bt,"$"].join("|")+")",Mo+"+"+Qr+"(?="+[Wr,Bt+an,"$"].join("|")+")",Bt+"?"+an+"+"+zr,Bt+"+"+Qr,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rr,Io].join("|"),"g"),Bo=RegExp("[\\u200d"+tr+xo+En+"]"),Lo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],No=-1,he={};he[Yn]=he[Dr]=he[Cn]=he[zn]=he[Qn]=he[Kn]=he[tn]=he[Sn]=he[nn]=!0,he[Rt]=he[wn]=he[en]=he[Yt]=he[bt]=he[zt]=he[Qt]=he[xn]=he[Ke]=he[Kt]=he[ut]=he[$t]=he[Ve]=he[Xt]=he[jt]=!1;var fe={};fe[Rt]=fe[wn]=fe[en]=fe[bt]=fe[Yt]=fe[zt]=fe[Yn]=fe[Dr]=fe[Cn]=fe[zn]=fe[Qn]=fe[Ke]=fe[Kt]=fe[ut]=fe[$t]=fe[Ve]=fe[Xt]=fe[Dt]=fe[Kn]=fe[tn]=fe[Sn]=fe[nn]=!0,fe[Qt]=fe[xn]=fe[jt]=!1;var Go={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wo=parseFloat,Jo=parseInt,Xr="object"==typeof global&&global&&global.Object===Object&&global,Yo="object"==typeof self&&self&&self.Object===Object&&self,Me=Xr||Yo||Function("return this")(),jr=J&&!J.nodeType&&J,cn=jr&&qe&&!qe.nodeType&&qe,ei=cn&&cn.exports===jr,cr=ei&&Xr.process,Ge=function(){try{return cn&&cn.require&&cn.require("util").types||cr&&cr.binding&&cr.binding("util")}catch{}}(),ti=Ge&&Ge.isArrayBuffer,ni=Ge&&Ge.isDate,ri=Ge&&Ge.isMap,ii=Ge&&Ge.isRegExp,oi=Ge&&Ge.isSet,si=Ge&&Ge.isTypedArray;function Be(y,O,k){switch(k.length){case 0:return y.call(O);case 1:return y.call(O,k[0]);case 2:return y.call(O,k[0],k[1]);case 3:return y.call(O,k[0],k[1],k[2])}return y.apply(O,k)}function ai(y,O,k,N){for(var $=-1,ce=null==y?0:y.length;++$<ce;){var Ee=y[$];O(N,Ee,k(Ee),y)}return N}function We(y,O){for(var k=-1,N=null==y?0:y.length;++k<N&&!1!==O(y[k],k,y););return y}function zo(y,O){for(var k=null==y?0:y.length;k--&&!1!==O(y[k],k,y););return y}function ci(y,O){for(var k=-1,N=null==y?0:y.length;++k<N;)if(!O(y[k],k,y))return!1;return!0}function _t(y,O){for(var k=-1,N=null==y?0:y.length,$=0,ce=[];++k<N;){var Ee=y[k];O(Ee,k,y)&&(ce[$++]=Ee)}return ce}function Pn(y,O){return!(null==y||!y.length)&&Lt(y,O,0)>-1}function ur(y,O,k){for(var N=-1,$=null==y?0:y.length;++N<$;)if(k(O,y[N]))return!0;return!1}function _e(y,O){for(var k=-1,N=null==y?0:y.length,$=Array(N);++k<N;)$[k]=O(y[k],k,y);return $}function mt(y,O){for(var k=-1,N=O.length,$=y.length;++k<N;)y[$+k]=O[k];return y}function lr(y,O,k,N){var $=-1,ce=null==y?0:y.length;for(N&&ce&&(k=y[++$]);++$<ce;)k=O(k,y[$],$,y);return k}function Qo(y,O,k,N){var $=null==y?0:y.length;for(N&&$&&(k=y[--$]);$--;)k=O(k,y[$],$,y);return k}function dr(y,O){for(var k=-1,N=null==y?0:y.length;++k<N;)if(O(y[k],k,y))return!0;return!1}var Ko=fr("length");function ui(y,O,k){var N;return k(y,function($,ce,Ee){if(O($,ce,Ee))return N=ce,!1}),N}function Rn(y,O,k,N){for(var $=y.length,ce=k+(N?1:-1);N?ce--:++ce<$;)if(O(y[ce],ce,y))return ce;return-1}function Lt(y,O,k){return O==O?function s(y,O,k){for(var N=k-1,$=y.length;++N<$;)if(y[N]===O)return N;return-1}(y,O,k):Rn(y,li,k)}function Xo(y,O,k,N){for(var $=k-1,ce=y.length;++$<ce;)if(N(y[$],O))return $;return-1}function li(y){return y!=y}function di(y,O){var k=null==y?0:y.length;return k?pr(y,O)/k:NaN}function fr(y){return function(O){return null==O?u:O[y]}}function hr(y){return function(O){return null==y?u:y[O]}}function fi(y,O,k,N,$){return $(y,function(ce,Ee,pe){k=N?(N=!1,ce):O(k,ce,Ee,pe)}),k}function pr(y,O){for(var k,N=-1,$=y.length;++N<$;){var ce=O(y[N]);ce!==u&&(k=k===u?ce:k+ce)}return k}function gr(y,O){for(var k=-1,N=Array(y);++k<y;)N[k]=O(k);return N}function hi(y){return y&&y.slice(0,Y(y)+1).replace(An,"")}function Le(y){return function(O){return y(O)}}function _r(y,O){return _e(O,function(k){return y[k]})}function un(y,O){return y.has(O)}function pi(y,O){for(var k=-1,N=y.length;++k<N&&Lt(O,y[k],0)>-1;);return k}function gi(y,O){for(var k=y.length;k--&&Lt(O,y[k],0)>-1;);return k}function ts(y,O){for(var k=y.length,N=0;k--;)y[k]===O&&++N;return N}var ns=hr({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),rs=hr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function is(y){return"\\"+Go[y]}function Zt(y){return Bo.test(y)}function mr(y){var O=-1,k=Array(y.size);return y.forEach(function(N,$){k[++O]=[$,N]}),k}function _i(y,O){return function(k){return y(O(k))}}function a(y,O){for(var k=-1,N=y.length,$=0,ce=[];++k<N;){var Ee=y[k];(Ee===O||Ee===T)&&(y[k]=T,ce[$++]=k)}return ce}function g(y){var O=-1,k=Array(y.size);return y.forEach(function(N){k[++O]=N}),k}function v(y){return Zt(y)?function ve(y){for(var O=ar.lastIndex=0;ar.test(y);)++O;return O}(y):Ko(y)}function F(y){return Zt(y)?function X(y){return y.match(ar)||[]}(y):function Vo(y){return y.split("")}(y)}function Y(y){for(var O=y.length;O--&&ho.test(y.charAt(O)););return O}var ne=hr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ae=function y(O){var e,k=(O=null==O?Me:Ae.defaults(Me.Object(),O,Ae.pick(Me,Zo))).Array,N=O.Date,$=O.Error,ce=O.Function,Ee=O.Math,pe=O.Object,cs=O.RegExp,Kc=O.String,rt=O.TypeError,mi=k.prototype,Dn=pe.prototype,vi=O["__core-js_shared__"],yi=ce.prototype.toString,de=Dn.hasOwnProperty,$c=0,sa=(e=/[^.]+$/.exec(vi&&vi.keys&&vi.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",wi=Dn.toString,Xc=yi.call(pe),jc=Me._,eu=cs("^"+yi.call(de).replace(jn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xi=ei?O.Buffer:u,Nt=O.Symbol,bi=O.Uint8Array,aa=xi?xi.allocUnsafe:u,Ci=_i(pe.getPrototypeOf,pe),ca=pe.create,ua=Dn.propertyIsEnumerable,Si=mi.splice,la=Nt?Nt.isConcatSpreadable:u,vr=Nt?Nt.iterator:u,ln=Nt?Nt.toStringTag:u,Ti=function(){try{var e=gn(pe,"defineProperty");return e({},"",{}),e}catch{}}(),tu=O.clearTimeout!==Me.clearTimeout&&O.clearTimeout,nu=N&&N.now!==Me.Date.now&&N.now,ru=O.setTimeout!==Me.setTimeout&&O.setTimeout,Ai=Ee.ceil,Mi=Ee.floor,us=pe.getOwnPropertySymbols,iu=xi?xi.isBuffer:u,da=O.isFinite,ou=mi.join,su=_i(pe.keys,pe),Oe=Ee.max,De=Ee.min,au=N.now,cu=O.parseInt,fa=Ee.random,uu=mi.reverse,ls=gn(O,"DataView"),yr=gn(O,"Map"),ds=gn(O,"Promise"),Fn=gn(O,"Set"),wr=gn(O,"WeakMap"),xr=gn(pe,"create"),ki=wr&&new wr,Bn={},lu=_n(ls),du=_n(yr),fu=_n(ds),hu=_n(Fn),pu=_n(wr),Ei=Nt?Nt.prototype:u,br=Ei?Ei.valueOf:u,ha=Ei?Ei.toString:u;function d(e){if(be(e)&&!j(e)&&!(e instanceof se)){if(e instanceof it)return e;if(de.call(e,"__wrapped__"))return pc(e)}return new it(e)}var Ln=function(){function e(){}return function(n){if(!we(n))return{};if(ca)return ca(n);e.prototype=n;var r=new e;return e.prototype=u,r}}();function Oi(){}function it(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=u}function se(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=nt,this.__views__=[]}function dn(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}function St(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}function Tt(e){var n=-1,r=null==e?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}function fn(e){var n=-1,r=null==e?0:e.length;for(this.__data__=new Tt;++n<r;)this.add(e[n])}function ft(e){var n=this.__data__=new St(e);this.size=n.size}function pa(e,n){var r=j(e),o=!r&&mn(e),c=!r&&!o&&Wt(e),f=!r&&!o&&!c&&qn(e),_=r||o||c||f,m=_?gr(e.length,Kc):[],S=m.length;for(var I in e)(n||de.call(e,I))&&(!_||!("length"==I||c&&("offset"==I||"parent"==I)||f&&("buffer"==I||"byteLength"==I||"byteOffset"==I)||Et(I,S)))&&m.push(I);return m}function ga(e){var n=e.length;return n?e[bs(0,n-1)]:u}function Uu(e,n){return Wi(Je(e),hn(n,0,e.length))}function qu(e){return Wi(Je(e))}function fs(e,n,r){(r!==u&&!ht(e[n],r)||r===u&&!(n in e))&&At(e,n,r)}function Cr(e,n,r){var o=e[n];(!de.call(e,n)||!ht(o,r)||r===u&&!(n in e))&&At(e,n,r)}function Ii(e,n){for(var r=e.length;r--;)if(ht(e[r][0],n))return r;return-1}function Hu(e,n,r,o){return Ut(e,function(c,f,_){n(o,c,r(c),_)}),o}function _a(e,n){return e&&yt(n,Pe(n),e)}function At(e,n,r){"__proto__"==n&&Ti?Ti(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}function hs(e,n){for(var r=-1,o=n.length,c=k(o),f=null==e;++r<o;)c[r]=f?u:zs(e,n[r]);return c}function hn(e,n,r){return e==e&&(r!==u&&(e=e<=r?e:r),n!==u&&(e=e>=n?e:n)),e}function ot(e,n,r,o,c,f){var _,m=1&n,S=2&n,I=4&n;if(r&&(_=c?r(e,o,c,f):r(e)),_!==u)return _;if(!we(e))return e;var P=j(e);if(P){if(_=function Il(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&de.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!m)return Je(e,_)}else{var D=Fe(e),U=D==xn||D==Jn;if(Wt(e))return Ua(e,m);if(D==ut||D==Rt||U&&!c){if(_=S||U?{}:oc(e),!m)return S?function wl(e,n){return yt(e,rc(e),n)}(e,function Gu(e,n){return e&&yt(n,ze(n),e)}(_,e)):function yl(e,n){return yt(e,Bs(e),n)}(e,_a(_,e))}else{if(!fe[D])return c?e:{};_=function Pl(e,n,r){var o=e.constructor;switch(n){case en:return Es(e);case Yt:case zt:return new o(+e);case bt:return function gl(e,n){var r=n?Es(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case Yn:case Dr:case Cn:case zn:case Qn:case Kn:case tn:case Sn:case nn:return qa(e,r);case Ke:return new o;case Kt:case Xt:return new o(e);case $t:return function _l(e){var n=new e.constructor(e.source,er.exec(e));return n.lastIndex=e.lastIndex,n}(e);case Ve:return new o;case Dt:return function ml(e){return br?pe(br.call(e)):{}}(e)}}(e,D,m)}}f||(f=new ft);var W=f.get(e);if(W)return W;f.set(e,_),Dc(e)?e.forEach(function(K){_.add(ot(K,n,r,K,e,f))}):Pc(e)&&e.forEach(function(K,oe){_.set(oe,ot(K,n,r,oe,e,f))});var re=P?u:(I?S?Rs:Ps:S?ze:Pe)(e);return We(re||e,function(K,oe){re&&(K=e[oe=K]),Cr(_,oe,ot(K,n,r,oe,e,f))}),_}function ma(e,n,r){var o=r.length;if(null==e)return!o;for(e=pe(e);o--;){var c=r[o],_=e[c];if(_===u&&!(c in e)||!(0,n[c])(_))return!1}return!0}function va(e,n,r){if("function"!=typeof e)throw new rt(t);return Or(function(){e.apply(u,r)},n)}function Sr(e,n,r,o){var c=-1,f=Pn,_=!0,m=e.length,S=[],I=n.length;if(!m)return S;r&&(n=_e(n,Le(r))),o?(f=ur,_=!1):n.length>=200&&(f=un,_=!1,n=new fn(n));e:for(;++c<m;){var P=e[c],D=null==r?P:r(P);if(P=o||0!==P?P:0,_&&D==D){for(var U=I;U--;)if(n[U]===D)continue e;S.push(P)}else f(n,D,o)||S.push(P)}return S}d.templateSettings={escape:fo,evaluate:Br,interpolate:$e,variable:"",imports:{_:d}},(d.prototype=Oi.prototype).constructor=d,(it.prototype=Ln(Oi.prototype)).constructor=it,(se.prototype=Ln(Oi.prototype)).constructor=se,dn.prototype.clear=function vu(){this.__data__=xr?xr(null):{},this.size=0},dn.prototype.delete=function yu(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},dn.prototype.get=function wu(e){var n=this.__data__;if(xr){var r=n[e];return r===p?u:r}return de.call(n,e)?n[e]:u},dn.prototype.has=function xu(e){var n=this.__data__;return xr?n[e]!==u:de.call(n,e)},dn.prototype.set=function bu(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=xr&&n===u?p:n,this},St.prototype.clear=function Cu(){this.__data__=[],this.size=0},St.prototype.delete=function Su(e){var n=this.__data__,r=Ii(n,e);return!(r<0||(r==n.length-1?n.pop():Si.call(n,r,1),--this.size,0))},St.prototype.get=function Tu(e){var n=this.__data__,r=Ii(n,e);return r<0?u:n[r][1]},St.prototype.has=function Au(e){return Ii(this.__data__,e)>-1},St.prototype.set=function Mu(e,n){var r=this.__data__,o=Ii(r,e);return o<0?(++this.size,r.push([e,n])):r[o][1]=n,this},Tt.prototype.clear=function ku(){this.size=0,this.__data__={hash:new dn,map:new(yr||St),string:new dn}},Tt.prototype.delete=function Eu(e){var n=Gi(this,e).delete(e);return this.size-=n?1:0,n},Tt.prototype.get=function Ou(e){return Gi(this,e).get(e)},Tt.prototype.has=function Iu(e){return Gi(this,e).has(e)},Tt.prototype.set=function Pu(e,n){var r=Gi(this,e),o=r.size;return r.set(e,n),this.size+=r.size==o?0:1,this},fn.prototype.add=fn.prototype.push=function Ru(e){return this.__data__.set(e,p),this},fn.prototype.has=function Du(e){return this.__data__.has(e)},ft.prototype.clear=function Fu(){this.__data__=new St,this.size=0},ft.prototype.delete=function Bu(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r},ft.prototype.get=function Lu(e){return this.__data__.get(e)},ft.prototype.has=function Zu(e){return this.__data__.has(e)},ft.prototype.set=function Nu(e,n){var r=this.__data__;if(r instanceof St){var o=r.__data__;if(!yr||o.length<199)return o.push([e,n]),this.size=++r.size,this;r=this.__data__=new Tt(o)}return r.set(e,n),this.size=r.size,this};var Ut=Ja(vt),ya=Ja(gs,!0);function Ju(e,n){var r=!0;return Ut(e,function(o,c,f){return r=!!n(o,c,f)}),r}function Pi(e,n,r){for(var o=-1,c=e.length;++o<c;){var f=e[o],_=n(f);if(null!=_&&(m===u?_==_&&!je(_):r(_,m)))var m=_,S=f}return S}function wa(e,n){var r=[];return Ut(e,function(o,c,f){n(o,c,f)&&r.push(o)}),r}function Re(e,n,r,o,c){var f=-1,_=e.length;for(r||(r=Dl),c||(c=[]);++f<_;){var m=e[f];n>0&&r(m)?n>1?Re(m,n-1,r,o,c):mt(c,m):o||(c[c.length]=m)}return c}var ps=Ya(),xa=Ya(!0);function vt(e,n){return e&&ps(e,n,Pe)}function gs(e,n){return e&&xa(e,n,Pe)}function Ri(e,n){return _t(n,function(r){return Ot(e[r])})}function pn(e,n){for(var r=0,o=(n=Ht(n,e)).length;null!=e&&r<o;)e=e[wt(n[r++])];return r&&r==o?e:u}function ba(e,n,r){var o=n(e);return j(e)?o:mt(o,r(e))}function Ze(e){return null==e?e===u?"[object Undefined]":"[object Null]":ln&&ln in pe(e)?function kl(e){var n=de.call(e,ln),r=e[ln];try{e[ln]=u;var o=!0}catch{}var c=wi.call(e);return o&&(n?e[ln]=r:delete e[ln]),c}(e):function ql(e){return wi.call(e)}(e)}function _s(e,n){return e>n}function zu(e,n){return null!=e&&de.call(e,n)}function Qu(e,n){return null!=e&&n in pe(e)}function ms(e,n,r){for(var o=r?ur:Pn,c=e[0].length,f=e.length,_=f,m=k(f),S=1/0,I=[];_--;){var P=e[_];_&&n&&(P=_e(P,Le(n))),S=De(P.length,S),m[_]=!r&&(n||c>=120&&P.length>=120)?new fn(_&&P):u}P=e[0];var D=-1,U=m[0];e:for(;++D<c&&I.length<S;){var W=P[D],Q=n?n(W):W;if(W=r||0!==W?W:0,!(U?un(U,Q):o(I,Q,r))){for(_=f;--_;){var re=m[_];if(!(re?un(re,Q):o(e[_],Q,r)))continue e}U&&U.push(Q),I.push(W)}}return I}function Tr(e,n,r){var o=null==(e=uc(e,n=Ht(n,e)))?e:e[wt(at(n))];return null==o?u:Be(o,e,r)}function Ca(e){return be(e)&&Ze(e)==Rt}function Ar(e,n,r,o,c){return e===n||(null==e||null==n||!be(e)&&!be(n)?e!=e&&n!=n:function ju(e,n,r,o,c,f){var _=j(e),m=j(n),S=_?wn:Fe(e),I=m?wn:Fe(n),P=(S=S==Rt?ut:S)==ut,D=(I=I==Rt?ut:I)==ut,U=S==I;if(U&&Wt(e)){if(!Wt(n))return!1;_=!0,P=!1}if(U&&!P)return f||(f=new ft),_||qn(e)?nc(e,n,r,o,c,f):function Al(e,n,r,o,c,f,_){switch(r){case bt:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case en:return!(e.byteLength!=n.byteLength||!f(new bi(e),new bi(n)));case Yt:case zt:case Kt:return ht(+e,+n);case Qt:return e.name==n.name&&e.message==n.message;case $t:case Xt:return e==n+"";case Ke:var m=mr;case Ve:if(m||(m=g),e.size!=n.size&&!(1&o))return!1;var I=_.get(e);if(I)return I==n;o|=2,_.set(e,n);var P=nc(m(e),m(n),o,c,f,_);return _.delete(e),P;case Dt:if(br)return br.call(e)==br.call(n)}return!1}(e,n,S,r,o,c,f);if(!(1&r)){var W=P&&de.call(e,"__wrapped__"),Q=D&&de.call(n,"__wrapped__");if(W||Q){var re=W?e.value():e,K=Q?n.value():n;return f||(f=new ft),c(re,K,r,o,f)}}return!!U&&(f||(f=new ft),function Ml(e,n,r,o,c,f){var _=1&r,m=Ps(e),S=m.length;if(S!=Ps(n).length&&!_)return!1;for(var D=S;D--;){var U=m[D];if(!(_?U in n:de.call(n,U)))return!1}var W=f.get(e),Q=f.get(n);if(W&&Q)return W==n&&Q==e;var re=!0;f.set(e,n),f.set(n,e);for(var K=_;++D<S;){var oe=e[U=m[D]],ae=n[U];if(o)var et=_?o(ae,oe,U,n,e,f):o(oe,ae,U,e,n,f);if(!(et===u?oe===ae||c(oe,ae,r,o,f):et)){re=!1;break}K||(K="constructor"==U)}if(re&&!K){var Ue=e.constructor,tt=n.constructor;Ue!=tt&&"constructor"in e&&"constructor"in n&&!("function"==typeof Ue&&Ue instanceof Ue&&"function"==typeof tt&&tt instanceof tt)&&(re=!1)}return f.delete(e),f.delete(n),re}(e,n,r,o,c,f))}(e,n,r,o,Ar,c))}function vs(e,n,r,o){var c=r.length,f=c,_=!o;if(null==e)return!f;for(e=pe(e);c--;){var m=r[c];if(_&&m[2]?m[1]!==e[m[0]]:!(m[0]in e))return!1}for(;++c<f;){var S=(m=r[c])[0],I=e[S],P=m[1];if(_&&m[2]){if(I===u&&!(S in e))return!1}else{var D=new ft;if(o)var U=o(I,P,S,e,n,D);if(!(U===u?Ar(P,I,3,o,D):U))return!1}}return!0}function Sa(e){return!(!we(e)||function Bl(e){return!!sa&&sa in e}(e))&&(Ot(e)?eu:Ur).test(_n(e))}function Ta(e){return"function"==typeof e?e:null==e?Qe:"object"==typeof e?j(e)?ka(e[0],e[1]):Ma(e):zc(e)}function ys(e){if(!Er(e))return su(e);var n=[];for(var r in pe(e))de.call(e,r)&&"constructor"!=r&&n.push(r);return n}function ws(e,n){return e<n}function Aa(e,n){var r=-1,o=Ye(e)?k(e.length):[];return Ut(e,function(c,f,_){o[++r]=n(c,f,_)}),o}function Ma(e){var n=Fs(e);return 1==n.length&&n[0][2]?ac(n[0][0],n[0][1]):function(r){return r===e||vs(r,e,n)}}function ka(e,n){return Ls(e)&&sc(n)?ac(wt(e),n):function(r){var o=zs(r,e);return o===u&&o===n?Qs(r,e):Ar(n,o,3)}}function Di(e,n,r,o,c){e!==n&&ps(n,function(f,_){if(c||(c=new ft),we(f))!function ol(e,n,r,o,c,f,_){var m=Ns(e,r),S=Ns(n,r),I=_.get(S);if(I)fs(e,r,I);else{var P=f?f(m,S,r+"",e,n,_):u,D=P===u;if(D){var U=j(S),W=!U&&Wt(S),Q=!U&&!W&&qn(S);P=S,U||W||Q?j(m)?P=m:Ce(m)?P=Je(m):W?(D=!1,P=Ua(S,!0)):Q?(D=!1,P=qa(S,!0)):P=[]:Ir(S)||mn(S)?(P=m,mn(m)?P=Lc(m):(!we(m)||Ot(m))&&(P=oc(S))):D=!1}D&&(_.set(S,P),c(P,S,o,f,_),_.delete(S)),fs(e,r,P)}}(e,n,_,r,Di,o,c);else{var m=o?o(Ns(e,_),f,_+"",e,n,c):u;m===u&&(m=f),fs(e,_,m)}},ze)}function Ea(e,n){var r=e.length;if(r)return Et(n+=n<0?r:0,r)?e[n]:u}function Oa(e,n,r){n=n.length?_e(n,function(f){return j(f)?function(_){return pn(_,1===f.length?f[0]:f)}:f}):[Qe];var o=-1;return n=_e(n,Le(z())),function jo(y,O){var k=y.length;for(y.sort(O);k--;)y[k]=y[k].value;return y}(Aa(e,function(f,_,m){return{criteria:_e(n,function(I){return I(f)}),index:++o,value:f}}),function(f,_){return function vl(e,n,r){for(var o=-1,c=e.criteria,f=n.criteria,_=c.length,m=r.length;++o<_;){var S=Ha(c[o],f[o]);if(S)return o>=m?S:S*("desc"==r[o]?-1:1)}return e.index-n.index}(f,_,r)})}function Ia(e,n,r){for(var o=-1,c=n.length,f={};++o<c;){var _=n[o],m=pn(e,_);r(m,_)&&Mr(f,Ht(_,e),m)}return f}function xs(e,n,r,o){var c=o?Xo:Lt,f=-1,_=n.length,m=e;for(e===n&&(n=Je(n)),r&&(m=_e(e,Le(r)));++f<_;)for(var S=0,I=n[f],P=r?r(I):I;(S=c(m,P,S,o))>-1;)m!==e&&Si.call(m,S,1),Si.call(e,S,1);return e}function Pa(e,n){for(var r=e?n.length:0,o=r-1;r--;){var c=n[r];if(r==o||c!==f){var f=c;Et(c)?Si.call(e,c,1):Ts(e,c)}}return e}function bs(e,n){return e+Mi(fa()*(n-e+1))}function Cs(e,n){var r="";if(!e||n<1||n>gt)return r;do{n%2&&(r+=e),(n=Mi(n/2))&&(e+=e)}while(n);return r}function ie(e,n){return Us(cc(e,n,Qe),e+"")}function ul(e){return ga(Hn(e))}function ll(e,n){var r=Hn(e);return Wi(r,hn(n,0,r.length))}function Mr(e,n,r,o){if(!we(e))return e;for(var c=-1,f=(n=Ht(n,e)).length,_=f-1,m=e;null!=m&&++c<f;){var S=wt(n[c]),I=r;if("__proto__"===S||"constructor"===S||"prototype"===S)return e;if(c!=_){var P=m[S];(I=o?o(P,S,m):u)===u&&(I=we(P)?P:Et(n[c+1])?[]:{})}Cr(m,S,I),m=m[S]}return e}var Ra=ki?function(e,n){return ki.set(e,n),e}:Qe,dl=Ti?function(e,n){return Ti(e,"toString",{configurable:!0,enumerable:!1,value:Vs(n),writable:!0})}:Qe;function fl(e){return Wi(Hn(e))}function st(e,n,r){var o=-1,c=e.length;n<0&&(n=-n>c?0:c+n),(r=r>c?c:r)<0&&(r+=c),c=n>r?0:r-n>>>0,n>>>=0;for(var f=k(c);++o<c;)f[o]=e[o+n];return f}function hl(e,n){var r;return Ut(e,function(o,c,f){return!(r=n(o,c,f))}),!!r}function Fi(e,n,r){var o=0,c=null==e?o:e.length;if("number"==typeof n&&n==n&&c<=2147483647){for(;o<c;){var f=o+c>>>1,_=e[f];null!==_&&!je(_)&&(r?_<=n:_<n)?o=f+1:c=f}return c}return Ss(e,n,Qe,r)}function Ss(e,n,r,o){var c=0,f=null==e?0:e.length;if(0===f)return 0;for(var _=(n=r(n))!=n,m=null===n,S=je(n),I=n===u;c<f;){var P=Mi((c+f)/2),D=r(e[P]),U=D!==u,W=null===D,Q=D==D,re=je(D);if(_)var K=o||Q;else K=I?Q&&(o||U):m?Q&&U&&(o||!W):S?Q&&U&&!W&&(o||!re):!W&&!re&&(o?D<=n:D<n);K?c=P+1:f=P}return De(f,4294967294)}function Da(e,n){for(var r=-1,o=e.length,c=0,f=[];++r<o;){var _=e[r],m=n?n(_):_;if(!r||!ht(m,S)){var S=m;f[c++]=0===_?0:_}}return f}function Fa(e){return"number"==typeof e?e:je(e)?NaN:+e}function Xe(e){if("string"==typeof e)return e;if(j(e))return _e(e,Xe)+"";if(je(e))return ha?ha.call(e):"";var n=e+"";return"0"==n&&1/e==-xt?"-0":n}function qt(e,n,r){var o=-1,c=Pn,f=e.length,_=!0,m=[],S=m;if(r)_=!1,c=ur;else if(f>=200){var I=n?null:Sl(e);if(I)return g(I);_=!1,c=un,S=new fn}else S=n?[]:m;e:for(;++o<f;){var P=e[o],D=n?n(P):P;if(P=r||0!==P?P:0,_&&D==D){for(var U=S.length;U--;)if(S[U]===D)continue e;n&&S.push(D),m.push(P)}else c(S,D,r)||(S!==m&&S.push(D),m.push(P))}return m}function Ts(e,n){return null==(e=uc(e,n=Ht(n,e)))||delete e[wt(at(n))]}function Ba(e,n,r,o){return Mr(e,n,r(pn(e,n)),o)}function Bi(e,n,r,o){for(var c=e.length,f=o?c:-1;(o?f--:++f<c)&&n(e[f],f,e););return r?st(e,o?0:f,o?f+1:c):st(e,o?f+1:0,o?c:f)}function La(e,n){var r=e;return r instanceof se&&(r=r.value()),lr(n,function(o,c){return c.func.apply(c.thisArg,mt([o],c.args))},r)}function As(e,n,r){var o=e.length;if(o<2)return o?qt(e[0]):[];for(var c=-1,f=k(o);++c<o;)for(var _=e[c],m=-1;++m<o;)m!=c&&(f[c]=Sr(f[c]||_,e[m],n,r));return qt(Re(f,1),n,r)}function Za(e,n,r){for(var o=-1,c=e.length,f=n.length,_={};++o<c;)r(_,e[o],o<f?n[o]:u);return _}function Ms(e){return Ce(e)?e:[]}function ks(e){return"function"==typeof e?e:Qe}function Ht(e,n){return j(e)?e:Ls(e,n)?[e]:hc(le(e))}var pl=ie;function Gt(e,n,r){var o=e.length;return r=r===u?o:r,!n&&r>=o?e:st(e,n,r)}var Na=tu||function(e){return Me.clearTimeout(e)};function Ua(e,n){if(n)return e.slice();var r=e.length,o=aa?aa(r):new e.constructor(r);return e.copy(o),o}function Es(e){var n=new e.constructor(e.byteLength);return new bi(n).set(new bi(e)),n}function qa(e,n){var r=n?Es(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ha(e,n){if(e!==n){var r=e!==u,o=null===e,c=e==e,f=je(e),_=n!==u,m=null===n,S=n==n,I=je(n);if(!m&&!I&&!f&&e>n||f&&_&&S&&!m&&!I||o&&_&&S||!r&&S||!c)return 1;if(!o&&!f&&!I&&e<n||I&&r&&c&&!o&&!f||m&&r&&c||!_&&c||!S)return-1}return 0}function Ga(e,n,r,o){for(var c=-1,f=e.length,_=r.length,m=-1,S=n.length,I=Oe(f-_,0),P=k(S+I),D=!o;++m<S;)P[m]=n[m];for(;++c<_;)(D||c<f)&&(P[r[c]]=e[c]);for(;I--;)P[m++]=e[c++];return P}function Wa(e,n,r,o){for(var c=-1,f=e.length,_=-1,m=r.length,S=-1,I=n.length,P=Oe(f-m,0),D=k(P+I),U=!o;++c<P;)D[c]=e[c];for(var W=c;++S<I;)D[W+S]=n[S];for(;++_<m;)(U||c<f)&&(D[W+r[_]]=e[c++]);return D}function Je(e,n){var r=-1,o=e.length;for(n||(n=k(o));++r<o;)n[r]=e[r];return n}function yt(e,n,r,o){var c=!r;r||(r={});for(var f=-1,_=n.length;++f<_;){var m=n[f],S=o?o(r[m],e[m],m,r,e):u;S===u&&(S=e[m]),c?At(r,m,S):Cr(r,m,S)}return r}function Li(e,n){return function(r,o){var c=j(r)?ai:Hu,f=n?n():{};return c(r,e,z(o,2),f)}}function Zn(e){return ie(function(n,r){var o=-1,c=r.length,f=c>1?r[c-1]:u,_=c>2?r[2]:u;for(f=e.length>3&&"function"==typeof f?(c--,f):u,_&&Ne(r[0],r[1],_)&&(f=c<3?u:f,c=1),n=pe(n);++o<c;){var m=r[o];m&&e(n,m,o,f)}return n})}function Ja(e,n){return function(r,o){if(null==r)return r;if(!Ye(r))return e(r,o);for(var c=r.length,f=n?c:-1,_=pe(r);(n?f--:++f<c)&&!1!==o(_[f],f,_););return r}}function Ya(e){return function(n,r,o){for(var c=-1,f=pe(n),_=o(n),m=_.length;m--;){var S=_[e?m:++c];if(!1===r(f[S],S,f))break}return n}}function za(e){return function(n){var r=Zt(n=le(n))?F(n):u,o=r?r[0]:n.charAt(0),c=r?Gt(r,1).join(""):n.slice(1);return o[e]()+c}}function Nn(e){return function(n){return lr(Jc(Wc(n).replace(Ro,"")),e,"")}}function kr(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var r=Ln(e.prototype),o=e.apply(r,n);return we(o)?o:r}}function Qa(e){return function(n,r,o){var c=pe(n);if(!Ye(n)){var f=z(r,3);n=Pe(n),r=function(m){return f(c[m],m,c)}}var _=e(n,r,o);return _>-1?c[f?n[_]:_]:u}}function Ka(e){return kt(function(n){var r=n.length,o=r,c=it.prototype.thru;for(e&&n.reverse();o--;){var f=n[o];if("function"!=typeof f)throw new rt(t);if(c&&!_&&"wrapper"==Hi(f))var _=new it([],!0)}for(o=_?o:r;++o<r;){var m=Hi(f=n[o]),S="wrapper"==m?Ds(f):u;_=S&&Zs(S[0])&&424==S[1]&&!S[4].length&&1==S[9]?_[Hi(S[0])].apply(_,S[3]):1==f.length&&Zs(f)?_[m]():_.thru(f)}return function(){var I=arguments,P=I[0];if(_&&1==I.length&&j(P))return _.plant(P).value();for(var D=0,U=r?n[D].apply(this,I):P;++D<r;)U=n[D].call(this,U);return U}})}function Zi(e,n,r,o,c,f,_,m,S,I){var P=128&n,D=1&n,U=2&n,W=24&n,Q=512&n,re=U?u:kr(e);return function K(){for(var oe=arguments.length,ae=k(oe),et=oe;et--;)ae[et]=arguments[et];if(W)var Ue=Un(K),tt=ts(ae,Ue);if(o&&(ae=Ga(ae,o,c,W)),f&&(ae=Wa(ae,f,_,W)),oe-=tt,W&&oe<I){var Se=a(ae,Ue);return Xa(e,n,Zi,K.placeholder,r,ae,Se,m,S,I-oe)}var pt=D?r:this,Pt=U?pt[e]:e;return oe=ae.length,m?ae=Hl(ae,m):Q&&oe>1&&ae.reverse(),P&&S<oe&&(ae.length=S),this&&this!==Me&&this instanceof K&&(Pt=re||kr(Pt)),Pt.apply(pt,ae)}}function Va(e,n){return function(r,o){return function Vu(e,n,r,o){return vt(e,function(c,f,_){n(o,r(c),f,_)}),o}(r,e,n(o),{})}}function Ni(e,n){return function(r,o){var c;if(r===u&&o===u)return n;if(r!==u&&(c=r),o!==u){if(c===u)return o;"string"==typeof r||"string"==typeof o?(r=Xe(r),o=Xe(o)):(r=Fa(r),o=Fa(o)),c=e(r,o)}return c}}function Os(e){return kt(function(n){return n=_e(n,Le(z())),ie(function(r){var o=this;return e(n,function(c){return Be(c,o,r)})})})}function Ui(e,n){var r=(n=n===u?" ":Xe(n)).length;if(r<2)return r?Cs(n,e):n;var o=Cs(n,Ai(e/v(n)));return Zt(n)?Gt(F(o),0,e).join(""):o.slice(0,e)}function $a(e){return function(n,r,o){return o&&"number"!=typeof o&&Ne(n,r,o)&&(r=o=u),n=It(n),r===u?(r=n,n=0):r=It(r),function cl(e,n,r,o){for(var c=-1,f=Oe(Ai((n-e)/(r||1)),0),_=k(f);f--;)_[o?f:++c]=e,e+=r;return _}(n,r,o=o===u?n<r?1:-1:It(o),e)}}function qi(e){return function(n,r){return"string"==typeof n&&"string"==typeof r||(n=ct(n),r=ct(r)),e(n,r)}}function Xa(e,n,r,o,c,f,_,m,S,I){var P=8&n;n|=P?32:64,4&(n&=~(P?64:32))||(n&=-4);var re=[e,n,c,P?f:u,P?_:u,P?u:f,P?u:_,m,S,I],K=r.apply(u,re);return Zs(e)&&lc(K,re),K.placeholder=o,dc(K,e,n)}function Is(e){var n=Ee[e];return function(r,o){if(r=ct(r),(o=null==o?0:De(te(o),292))&&da(r)){var c=(le(r)+"e").split("e");return+((c=(le(n(c[0]+"e"+(+c[1]+o)))+"e").split("e"))[0]+"e"+(+c[1]-o))}return n(r)}}var Sl=Fn&&1/g(new Fn([,-0]))[1]==xt?function(e){return new Fn(e)}:js;function ja(e){return function(n){var r=Fe(n);return r==Ke?mr(n):r==Ve?function i(y){var O=-1,k=Array(y.size);return y.forEach(function(N){k[++O]=[N,N]}),k}(n):function es(y,O){return _e(O,function(k){return[k,y[k]]})}(n,e(n))}}function Mt(e,n,r,o,c,f,_,m){var S=2&n;if(!S&&"function"!=typeof e)throw new rt(t);var I=o?o.length:0;if(I||(n&=-97,o=c=u),_=_===u?_:Oe(te(_),0),m=m===u?m:te(m),I-=c?c.length:0,64&n){var P=o,D=c;o=c=u}var U=S?u:Ds(e),W=[e,n,r,o,c,P,D,f,_,m];if(U&&function Nl(e,n){var r=e[1],o=n[1],c=r|o;if(!(c<131||(128==o&&8==r||128==o&&256==r&&e[7].length<=n[8]||384==o&&n[7].length<=n[8]&&8==r)))return e;1&o&&(e[2]=n[2],c|=1&r?0:4);var m=n[3];if(m){var S=e[3];e[3]=S?Ga(S,m,n[4]):m,e[4]=S?a(e[3],T):n[4]}(m=n[5])&&(e[5]=(S=e[5])?Wa(S,m,n[6]):m,e[6]=S?a(e[5],T):n[6]),(m=n[7])&&(e[7]=m),128&o&&(e[8]=null==e[8]?n[8]:De(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=c}(W,U),e=W[0],n=W[1],r=W[2],o=W[3],c=W[4],!(m=W[9]=W[9]===u?S?0:e.length:Oe(W[9]-I,0))&&24&n&&(n&=-25),n&&1!=n)Q=8==n||16==n?function bl(e,n,r){var o=kr(e);return function c(){for(var f=arguments.length,_=k(f),m=f,S=Un(c);m--;)_[m]=arguments[m];var I=f<3&&_[0]!==S&&_[f-1]!==S?[]:a(_,S);return(f-=I.length)<r?Xa(e,n,Zi,c.placeholder,u,_,I,u,u,r-f):Be(this&&this!==Me&&this instanceof c?o:e,this,_)}}(e,n,m):32!=n&&33!=n||c.length?Zi.apply(u,W):function Cl(e,n,r,o){var c=1&n,f=kr(e);return function _(){for(var m=-1,S=arguments.length,I=-1,P=o.length,D=k(P+S),U=this&&this!==Me&&this instanceof _?f:e;++I<P;)D[I]=o[I];for(;S--;)D[I++]=arguments[++m];return Be(U,c?r:this,D)}}(e,n,r,o);else var Q=function xl(e,n,r){var o=1&n,c=kr(e);return function f(){return(this&&this!==Me&&this instanceof f?c:e).apply(o?r:this,arguments)}}(e,n,r);return dc((U?Ra:lc)(Q,W),e,n)}function ec(e,n,r,o){return e===u||ht(e,Dn[r])&&!de.call(o,r)?n:e}function tc(e,n,r,o,c,f){return we(e)&&we(n)&&(f.set(n,e),Di(e,n,u,tc,f),f.delete(n)),e}function Tl(e){return Ir(e)?u:e}function nc(e,n,r,o,c,f){var _=1&r,m=e.length,S=n.length;if(m!=S&&!(_&&S>m))return!1;var I=f.get(e),P=f.get(n);if(I&&P)return I==n&&P==e;var D=-1,U=!0,W=2&r?new fn:u;for(f.set(e,n),f.set(n,e);++D<m;){var Q=e[D],re=n[D];if(o)var K=_?o(re,Q,D,n,e,f):o(Q,re,D,e,n,f);if(K!==u){if(K)continue;U=!1;break}if(W){if(!dr(n,function(oe,ae){if(!un(W,ae)&&(Q===oe||c(Q,oe,r,o,f)))return W.push(ae)})){U=!1;break}}else if(Q!==re&&!c(Q,re,r,o,f)){U=!1;break}}return f.delete(e),f.delete(n),U}function kt(e){return Us(cc(e,u,mc),e+"")}function Ps(e){return ba(e,Pe,Bs)}function Rs(e){return ba(e,ze,rc)}var Ds=ki?function(e){return ki.get(e)}:js;function Hi(e){for(var n=e.name+"",r=Bn[n],o=de.call(Bn,n)?r.length:0;o--;){var c=r[o],f=c.func;if(null==f||f==e)return c.name}return n}function Un(e){return(de.call(d,"placeholder")?d:e).placeholder}function z(){var e=d.iteratee||$s;return e=e===$s?Ta:e,arguments.length?e(arguments[0],arguments[1]):e}function Gi(e,n){var r=e.__data__;return function Fl(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}(n)?r["string"==typeof n?"string":"hash"]:r.map}function Fs(e){for(var n=Pe(e),r=n.length;r--;){var o=n[r],c=e[o];n[r]=[o,c,sc(c)]}return n}function gn(e,n){var r=function os(y,O){return null==y?u:y[O]}(e,n);return Sa(r)?r:u}var Bs=us?function(e){return null==e?[]:(e=pe(e),_t(us(e),function(n){return ua.call(e,n)}))}:ea,rc=us?function(e){for(var n=[];e;)mt(n,Bs(e)),e=Ci(e);return n}:ea,Fe=Ze;function ic(e,n,r){for(var o=-1,c=(n=Ht(n,e)).length,f=!1;++o<c;){var _=wt(n[o]);if(!(f=null!=e&&r(e,_)))break;e=e[_]}return f||++o!=c?f:!!(c=null==e?0:e.length)&&Vi(c)&&Et(_,c)&&(j(e)||mn(e))}function oc(e){return"function"!=typeof e.constructor||Er(e)?{}:Ln(Ci(e))}function Dl(e){return j(e)||mn(e)||!!(la&&e&&e[la])}function Et(e,n){var r=typeof e;return!!(n=n??gt)&&("number"==r||"symbol"!=r&&vo.test(e))&&e>-1&&e%1==0&&e<n}function Ne(e,n,r){if(!we(r))return!1;var o=typeof n;return!!("number"==o?Ye(r)&&Et(n,r.length):"string"==o&&n in r)&&ht(r[n],e)}function Ls(e,n){if(j(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!je(e))||Ct.test(e)||!$n.test(e)||null!=n&&e in pe(n)}function Zs(e){var n=Hi(e),r=d[n];if("function"!=typeof r||!(n in se.prototype))return!1;if(e===r)return!0;var o=Ds(r);return!!o&&e===o[0]}(ls&&Fe(new ls(new ArrayBuffer(1)))!=bt||yr&&Fe(new yr)!=Ke||ds&&Fe(ds.resolve())!=Vt||Fn&&Fe(new Fn)!=Ve||wr&&Fe(new wr)!=jt)&&(Fe=function(e){var n=Ze(e),r=n==ut?e.constructor:u,o=r?_n(r):"";if(o)switch(o){case lu:return bt;case du:return Ke;case fu:return Vt;case hu:return Ve;case pu:return jt}return n});var Ll=vi?Ot:ta;function Er(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||Dn)}function sc(e){return e==e&&!we(e)}function ac(e,n){return function(r){return null!=r&&r[e]===n&&(n!==u||e in pe(r))}}function cc(e,n,r){return n=Oe(n===u?e.length-1:n,0),function(){for(var o=arguments,c=-1,f=Oe(o.length-n,0),_=k(f);++c<f;)_[c]=o[n+c];c=-1;for(var m=k(n+1);++c<n;)m[c]=o[c];return m[n]=r(_),Be(e,this,m)}}function uc(e,n){return n.length<2?e:pn(e,st(n,0,-1))}function Hl(e,n){for(var r=e.length,o=De(n.length,r),c=Je(e);o--;){var f=n[o];e[o]=Et(f,r)?c[f]:u}return e}function Ns(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var lc=fc(Ra),Or=ru||function(e,n){return Me.setTimeout(e,n)},Us=fc(dl);function dc(e,n,r){var o=n+"";return Us(e,function Rl(e,n){var r=n.length;if(!r)return e;var o=r-1;return n[o]=(r>1?"& ":"")+n[o],n=n.join(r>2?", ":" "),e.replace(po,"{\n/* [wrapped with "+n+"] */\n")}(o,function Gl(e,n){return We(Jt,function(r){var o="_."+r[0];n&r[1]&&!Pn(e,o)&&e.push(o)}),e.sort()}(function Ol(e){var n=e.match(go);return n?n[1].split(Ft):[]}(o),r)))}function fc(e){var n=0,r=0;return function(){var o=au(),c=16-(o-r);if(r=o,c>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(u,arguments)}}function Wi(e,n){var r=-1,o=e.length,c=o-1;for(n=n===u?o:n;++r<n;){var f=bs(r,c),_=e[f];e[f]=e[r],e[r]=_}return e.length=n,e}var hc=function Zl(e){var n=Qi(e,function(o){return 500===r.size&&r.clear(),o}),r=n.cache;return n}(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(Xn,function(r,o,c,f){n.push(c?f.replace(lt,"$1"):o||r)}),n});function wt(e){if("string"==typeof e||je(e))return e;var n=e+"";return"0"==n&&1/e==-xt?"-0":n}function _n(e){if(null!=e){try{return yi.call(e)}catch{}try{return e+""}catch{}}return""}function pc(e){if(e instanceof se)return e.clone();var n=new it(e.__wrapped__,e.__chain__);return n.__actions__=Je(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var zl=ie(function(e,n){return Ce(e)?Sr(e,Re(n,1,Ce,!0)):[]}),Ql=ie(function(e,n){var r=at(n);return Ce(r)&&(r=u),Ce(e)?Sr(e,Re(n,1,Ce,!0),z(r,2)):[]}),Kl=ie(function(e,n){var r=at(n);return Ce(r)&&(r=u),Ce(e)?Sr(e,Re(n,1,Ce,!0),u,r):[]});function gc(e,n,r){var o=null==e?0:e.length;if(!o)return-1;var c=null==r?0:te(r);return c<0&&(c=Oe(o+c,0)),Rn(e,z(n,3),c)}function _c(e,n,r){var o=null==e?0:e.length;if(!o)return-1;var c=o-1;return r!==u&&(c=te(r),c=r<0?Oe(o+c,0):De(c,o-1)),Rn(e,z(n,3),c,!0)}function mc(e){return null!=e&&e.length?Re(e,1):[]}function vc(e){return e&&e.length?e[0]:u}var sd=ie(function(e){var n=_e(e,Ms);return n.length&&n[0]===e[0]?ms(n):[]}),ad=ie(function(e){var n=at(e),r=_e(e,Ms);return n===at(r)?n=u:r.pop(),r.length&&r[0]===e[0]?ms(r,z(n,2)):[]}),cd=ie(function(e){var n=at(e),r=_e(e,Ms);return(n="function"==typeof n?n:u)&&r.pop(),r.length&&r[0]===e[0]?ms(r,u,n):[]});function at(e){var n=null==e?0:e.length;return n?e[n-1]:u}var fd=ie(yc);function yc(e,n){return e&&e.length&&n&&n.length?xs(e,n):e}var gd=kt(function(e,n){var r=null==e?0:e.length,o=hs(e,n);return Pa(e,_e(n,function(c){return Et(c,r)?+c:c}).sort(Ha)),o});function qs(e){return null==e?e:uu.call(e)}var Id=ie(function(e){return qt(Re(e,1,Ce,!0))}),Pd=ie(function(e){var n=at(e);return Ce(n)&&(n=u),qt(Re(e,1,Ce,!0),z(n,2))}),Rd=ie(function(e){var n=at(e);return n="function"==typeof n?n:u,qt(Re(e,1,Ce,!0),u,n)});function Hs(e){if(!e||!e.length)return[];var n=0;return e=_t(e,function(r){if(Ce(r))return n=Oe(r.length,n),!0}),gr(n,function(r){return _e(e,fr(r))})}function wc(e,n){if(!e||!e.length)return[];var r=Hs(e);return null==n?r:_e(r,function(o){return Be(n,u,o)})}var Ld=ie(function(e,n){return Ce(e)?Sr(e,n):[]}),Zd=ie(function(e){return As(_t(e,Ce))}),Nd=ie(function(e){var n=at(e);return Ce(n)&&(n=u),As(_t(e,Ce),z(n,2))}),Ud=ie(function(e){var n=at(e);return n="function"==typeof n?n:u,As(_t(e,Ce),u,n)}),qd=ie(Hs),Wd=ie(function(e){var n=e.length,r=n>1?e[n-1]:u;return r="function"==typeof r?(e.pop(),r):u,wc(e,r)});function xc(e){var n=d(e);return n.__chain__=!0,n}function Ji(e,n){return n(e)}var Yd=kt(function(e){var n=e.length,r=n?e[0]:0,o=this.__wrapped__,c=function(f){return hs(f,e)};return!(n>1||this.__actions__.length)&&o instanceof se&&Et(r)?((o=o.slice(r,+r+(n?1:0))).__actions__.push({func:Ji,args:[c],thisArg:u}),new it(o,this.__chain__).thru(function(f){return n&&!f.length&&f.push(u),f})):this.thru(c)}),ef=Li(function(e,n,r){de.call(e,r)?++e[r]:At(e,r,1)}),rf=Qa(gc),of=Qa(_c);function bc(e,n){return(j(e)?We:Ut)(e,z(n,3))}function Cc(e,n){return(j(e)?zo:ya)(e,z(n,3))}var uf=Li(function(e,n,r){de.call(e,r)?e[r].push(n):At(e,r,[n])}),df=ie(function(e,n,r){var o=-1,c="function"==typeof n,f=Ye(e)?k(e.length):[];return Ut(e,function(_){f[++o]=c?Be(n,_,r):Tr(_,n,r)}),f}),ff=Li(function(e,n,r){At(e,r,n)});function Yi(e,n){return(j(e)?_e:Aa)(e,z(n,3))}var pf=Li(function(e,n,r){e[r?0:1].push(n)},function(){return[[],[]]}),Cf=ie(function(e,n){if(null==e)return[];var r=n.length;return r>1&&Ne(e,n[0],n[1])?n=[]:r>2&&Ne(n[0],n[1],n[2])&&(n=[n[0]]),Oa(e,Re(n,1),[])}),zi=nu||function(){return Me.Date.now()};function Sc(e,n,r){return n=r?u:n,Mt(e,128,u,u,u,u,n=e&&null==n?e.length:n)}function Tc(e,n){var r;if("function"!=typeof n)throw new rt(t);return e=te(e),function(){return--e>0&&(r=n.apply(this,arguments)),e<=1&&(n=u),r}}var Gs=ie(function(e,n,r){var o=1;if(r.length){var c=a(r,Un(Gs));o|=32}return Mt(e,o,n,r,c)}),Ac=ie(function(e,n,r){var o=3;if(r.length){var c=a(r,Un(Ac));o|=32}return Mt(n,o,e,r,c)});function Ec(e,n,r){var o,c,f,_,m,S,I=0,P=!1,D=!1,U=!0;if("function"!=typeof e)throw new rt(t);function W(Se){var pt=o,Pt=c;return o=c=u,I=Se,_=e.apply(Pt,pt)}function Q(Se){return I=Se,m=Or(oe,n),P?W(Se):_}function K(Se){var pt=Se-S;return S===u||pt>=n||pt<0||D&&Se-I>=f}function oe(){var Se=zi();if(K(Se))return ae(Se);m=Or(oe,function re(Se){var Qc=n-(Se-S);return D?De(Qc,f-(Se-I)):Qc}(Se))}function ae(Se){return m=u,U&&o?W(Se):(o=c=u,_)}function tt(){var Se=zi(),pt=K(Se);if(o=arguments,c=this,S=Se,pt){if(m===u)return Q(S);if(D)return Na(m),m=Or(oe,n),W(S)}return m===u&&(m=Or(oe,n)),_}return n=ct(n)||0,we(r)&&(P=!!r.leading,f=(D="maxWait"in r)?Oe(ct(r.maxWait)||0,n):f,U="trailing"in r?!!r.trailing:U),tt.cancel=function et(){m!==u&&Na(m),I=0,o=S=c=m=u},tt.flush=function Ue(){return m===u?_:ae(zi())},tt}var Tf=ie(function(e,n){return va(e,1,n)}),Af=ie(function(e,n,r){return va(e,ct(n)||0,r)});function Qi(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new rt(t);var r=function(){var o=arguments,c=n?n.apply(this,o):o[0],f=r.cache;if(f.has(c))return f.get(c);var _=e.apply(this,o);return r.cache=f.set(c,_)||f,_};return r.cache=new(Qi.Cache||Tt),r}function Ki(e){if("function"!=typeof e)throw new rt(t);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}Qi.Cache=Tt;var Ef=pl(function(e,n){var r=(n=1==n.length&&j(n[0])?_e(n[0],Le(z())):_e(Re(n,1),Le(z()))).length;return ie(function(o){for(var c=-1,f=De(o.length,r);++c<f;)o[c]=n[c].call(this,o[c]);return Be(e,this,o)})}),Ws=ie(function(e,n){var r=a(n,Un(Ws));return Mt(e,32,u,n,r)}),Oc=ie(function(e,n){var r=a(n,Un(Oc));return Mt(e,64,u,n,r)}),Of=kt(function(e,n){return Mt(e,256,u,u,u,n)});function ht(e,n){return e===n||e!=e&&n!=n}var Hf=qi(_s),Gf=qi(function(e,n){return e>=n}),mn=Ca(function(){return arguments}())?Ca:function(e){return be(e)&&de.call(e,"callee")&&!ua.call(e,"callee")},j=k.isArray,Wf=ti?Le(ti):function $u(e){return be(e)&&Ze(e)==en};function Ye(e){return null!=e&&Vi(e.length)&&!Ot(e)}function Ce(e){return be(e)&&Ye(e)}var Wt=iu||ta,Yf=ni?Le(ni):function Xu(e){return be(e)&&Ze(e)==zt};function Js(e){if(!be(e))return!1;var n=Ze(e);return n==Qt||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!Ir(e)}function Ot(e){if(!we(e))return!1;var n=Ze(e);return n==xn||n==Jn||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Ic(e){return"number"==typeof e&&e==te(e)}function Vi(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=gt}function we(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function be(e){return null!=e&&"object"==typeof e}var Pc=ri?Le(ri):function el(e){return be(e)&&Fe(e)==Ke};function Rc(e){return"number"==typeof e||be(e)&&Ze(e)==Kt}function Ir(e){if(!be(e)||Ze(e)!=ut)return!1;var n=Ci(e);if(null===n)return!0;var r=de.call(n,"constructor")&&n.constructor;return"function"==typeof r&&r instanceof r&&yi.call(r)==Xc}var Ys=ii?Le(ii):function tl(e){return be(e)&&Ze(e)==$t},Dc=oi?Le(oi):function nl(e){return be(e)&&Fe(e)==Ve};function $i(e){return"string"==typeof e||!j(e)&&be(e)&&Ze(e)==Xt}function je(e){return"symbol"==typeof e||be(e)&&Ze(e)==Dt}var qn=si?Le(si):function rl(e){return be(e)&&Vi(e.length)&&!!he[Ze(e)]},ch=qi(ws),uh=qi(function(e,n){return e<=n});function Fc(e){if(!e)return[];if(Ye(e))return $i(e)?F(e):Je(e);if(vr&&e[vr])return function as(y){for(var O,k=[];!(O=y.next()).done;)k.push(O.value);return k}(e[vr]());var n=Fe(e);return(n==Ke?mr:n==Ve?g:Hn)(e)}function It(e){return e?(e=ct(e))===xt||e===-xt?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function te(e){var n=It(e),r=n%1;return n==n?r?n-r:n:0}function Bc(e){return e?hn(te(e),0,nt):0}function ct(e){if("number"==typeof e)return e;if(je(e))return NaN;if(we(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=we(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=hi(e);var r=dt.test(e);return r||mo.test(e)?Jo(e.slice(2),r?2:8):_o.test(e)?NaN:+e}function Lc(e){return yt(e,ze(e))}function le(e){return null==e?"":Xe(e)}var dh=Zn(function(e,n){if(Er(n)||Ye(n))yt(n,Pe(n),e);else for(var r in n)de.call(n,r)&&Cr(e,r,n[r])}),Zc=Zn(function(e,n){yt(n,ze(n),e)}),Xi=Zn(function(e,n,r,o){yt(n,ze(n),e,o)}),fh=Zn(function(e,n,r,o){yt(n,Pe(n),e,o)}),hh=kt(hs),gh=ie(function(e,n){e=pe(e);var r=-1,o=n.length,c=o>2?n[2]:u;for(c&&Ne(n[0],n[1],c)&&(o=1);++r<o;)for(var f=n[r],_=ze(f),m=-1,S=_.length;++m<S;){var I=_[m],P=e[I];(P===u||ht(P,Dn[I])&&!de.call(e,I))&&(e[I]=f[I])}return e}),_h=ie(function(e){return e.push(u,tc),Be(Nc,u,e)});function zs(e,n,r){var o=null==e?u:pn(e,n);return o===u?r:o}function Qs(e,n){return null!=e&&ic(e,n,Qu)}var Ah=Va(function(e,n,r){null!=n&&"function"!=typeof n.toString&&(n=wi.call(n)),e[n]=r},Vs(Qe)),Mh=Va(function(e,n,r){null!=n&&"function"!=typeof n.toString&&(n=wi.call(n)),de.call(e,n)?e[n].push(r):e[n]=[r]},z),kh=ie(Tr);function Pe(e){return Ye(e)?pa(e):ys(e)}function ze(e){return Ye(e)?pa(e,!0):function il(e){if(!we(e))return function Ul(e){var n=[];if(null!=e)for(var r in pe(e))n.push(r);return n}(e);var n=Er(e),r=[];for(var o in e)"constructor"==o&&(n||!de.call(e,o))||r.push(o);return r}(e)}var Ih=Zn(function(e,n,r){Di(e,n,r)}),Nc=Zn(function(e,n,r,o){Di(e,n,r,o)}),Ph=kt(function(e,n){var r={};if(null==e)return r;var o=!1;n=_e(n,function(f){return f=Ht(f,e),o||(o=f.length>1),f}),yt(e,Rs(e),r),o&&(r=ot(r,7,Tl));for(var c=n.length;c--;)Ts(r,n[c]);return r}),Dh=kt(function(e,n){return null==e?{}:function sl(e,n){return Ia(e,n,function(r,o){return Qs(e,o)})}(e,n)});function Uc(e,n){if(null==e)return{};var r=_e(Rs(e),function(o){return[o]});return n=z(n),Ia(e,r,function(o,c){return n(o,c[0])})}var qc=ja(Pe),Hc=ja(ze);function Hn(e){return null==e?[]:_r(e,Pe(e))}var Yh=Nn(function(e,n,r){return n=n.toLowerCase(),e+(r?Gc(n):n)});function Gc(e){return Ks(le(e).toLowerCase())}function Wc(e){return(e=le(e))&&e.replace(yo,ns).replace(Do,"")}var Vh=Nn(function(e,n,r){return e+(r?"-":"")+n.toLowerCase()}),$h=Nn(function(e,n,r){return e+(r?" ":"")+n.toLowerCase()}),Xh=za("toLowerCase"),op=Nn(function(e,n,r){return e+(r?"_":"")+n.toLowerCase()}),ap=Nn(function(e,n,r){return e+(r?" ":"")+Ks(n)}),mp=Nn(function(e,n,r){return e+(r?" ":"")+n.toUpperCase()}),Ks=za("toUpperCase");function Jc(e,n,r){return e=le(e),(n=r?u:n)===u?function ss(y){return Lo.test(y)}(e)?function me(y){return y.match(Fo)||[]}(e):function $o(y){return y.match(Lr)||[]}(e):e.match(n)||[]}var Yc=ie(function(e,n){try{return Be(e,u,n)}catch(r){return Js(r)?r:new $(r)}}),vp=kt(function(e,n){return We(n,function(r){r=wt(r),At(e,r,Gs(e[r],e))}),e});function Vs(e){return function(){return e}}var bp=Ka(),Cp=Ka(!0);function Qe(e){return e}function $s(e){return Ta("function"==typeof e?e:ot(e,1))}var Ap=ie(function(e,n){return function(r){return Tr(r,e,n)}}),Mp=ie(function(e,n){return function(r){return Tr(e,r,n)}});function Xs(e,n,r){var o=Pe(n),c=Ri(n,o);null==r&&(!we(n)||!c.length&&o.length)&&(r=n,n=e,e=this,c=Ri(n,Pe(n)));var f=!(we(r)&&"chain"in r&&!r.chain),_=Ot(e);return We(c,function(m){var S=n[m];e[m]=S,_&&(e.prototype[m]=function(){var I=this.__chain__;if(f||I){var P=e(this.__wrapped__),D=P.__actions__=Je(this.__actions__);return D.push({func:S,args:arguments,thisArg:e}),P.__chain__=I,P}return S.apply(e,mt([this.value()],arguments))})}),e}function js(){}var Op=Os(_e),Ip=Os(ci),Pp=Os(dr);function zc(e){return Ls(e)?fr(wt(e)):function al(e){return function(n){return pn(n,e)}}(e)}var Dp=$a(),Fp=$a(!0);function ea(){return[]}function ta(){return!1}var Hp=Ni(function(e,n){return e+n},0),Gp=Is("ceil"),Wp=Ni(function(e,n){return e/n},1),Jp=Is("floor"),Xp=Ni(function(e,n){return e*n},1),jp=Is("round"),eg=Ni(function(e,n){return e-n},0);return d.after=function Sf(e,n){if("function"!=typeof n)throw new rt(t);return e=te(e),function(){if(--e<1)return n.apply(this,arguments)}},d.ary=Sc,d.assign=dh,d.assignIn=Zc,d.assignInWith=Xi,d.assignWith=fh,d.at=hh,d.before=Tc,d.bind=Gs,d.bindAll=vp,d.bindKey=Ac,d.castArray=function Bf(){if(!arguments.length)return[];var e=arguments[0];return j(e)?e:[e]},d.chain=xc,d.chunk=function Wl(e,n,r){n=(r?Ne(e,n,r):n===u)?1:Oe(te(n),0);var o=null==e?0:e.length;if(!o||n<1)return[];for(var c=0,f=0,_=k(Ai(o/n));c<o;)_[f++]=st(e,c,c+=n);return _},d.compact=function Jl(e){for(var n=-1,r=null==e?0:e.length,o=0,c=[];++n<r;){var f=e[n];f&&(c[o++]=f)}return c},d.concat=function Yl(){var e=arguments.length;if(!e)return[];for(var n=k(e-1),r=arguments[0],o=e;o--;)n[o-1]=arguments[o];return mt(j(r)?Je(r):[r],Re(n,1))},d.cond=function yp(e){var n=null==e?0:e.length,r=z();return e=n?_e(e,function(o){if("function"!=typeof o[1])throw new rt(t);return[r(o[0]),o[1]]}):[],ie(function(o){for(var c=-1;++c<n;){var f=e[c];if(Be(f[0],this,o))return Be(f[1],this,o)}})},d.conforms=function wp(e){return function Wu(e){var n=Pe(e);return function(r){return ma(r,e,n)}}(ot(e,1))},d.constant=Vs,d.countBy=ef,d.create=function ph(e,n){var r=Ln(e);return null==n?r:_a(r,n)},d.curry=function Mc(e,n,r){var o=Mt(e,8,u,u,u,u,u,n=r?u:n);return o.placeholder=Mc.placeholder,o},d.curryRight=function kc(e,n,r){var o=Mt(e,16,u,u,u,u,u,n=r?u:n);return o.placeholder=kc.placeholder,o},d.debounce=Ec,d.defaults=gh,d.defaultsDeep=_h,d.defer=Tf,d.delay=Af,d.difference=zl,d.differenceBy=Ql,d.differenceWith=Kl,d.drop=function Vl(e,n,r){var o=null==e?0:e.length;return o?st(e,(n=r||n===u?1:te(n))<0?0:n,o):[]},d.dropRight=function $l(e,n,r){var o=null==e?0:e.length;return o?st(e,0,(n=o-(n=r||n===u?1:te(n)))<0?0:n):[]},d.dropRightWhile=function Xl(e,n){return e&&e.length?Bi(e,z(n,3),!0,!0):[]},d.dropWhile=function jl(e,n){return e&&e.length?Bi(e,z(n,3),!0):[]},d.fill=function ed(e,n,r,o){var c=null==e?0:e.length;return c?(r&&"number"!=typeof r&&Ne(e,n,r)&&(r=0,o=c),function Yu(e,n,r,o){var c=e.length;for((r=te(r))<0&&(r=-r>c?0:c+r),(o=o===u||o>c?c:te(o))<0&&(o+=c),o=r>o?0:Bc(o);r<o;)e[r++]=n;return e}(e,n,r,o)):[]},d.filter=function nf(e,n){return(j(e)?_t:wa)(e,z(n,3))},d.flatMap=function sf(e,n){return Re(Yi(e,n),1)},d.flatMapDeep=function af(e,n){return Re(Yi(e,n),xt)},d.flatMapDepth=function cf(e,n,r){return r=r===u?1:te(r),Re(Yi(e,n),r)},d.flatten=mc,d.flattenDeep=function td(e){return null!=e&&e.length?Re(e,xt):[]},d.flattenDepth=function nd(e,n){return null!=e&&e.length?Re(e,n=n===u?1:te(n)):[]},d.flip=function Mf(e){return Mt(e,512)},d.flow=bp,d.flowRight=Cp,d.fromPairs=function rd(e){for(var n=-1,r=null==e?0:e.length,o={};++n<r;){var c=e[n];o[c[0]]=c[1]}return o},d.functions=function Ch(e){return null==e?[]:Ri(e,Pe(e))},d.functionsIn=function Sh(e){return null==e?[]:Ri(e,ze(e))},d.groupBy=uf,d.initial=function od(e){return null!=e&&e.length?st(e,0,-1):[]},d.intersection=sd,d.intersectionBy=ad,d.intersectionWith=cd,d.invert=Ah,d.invertBy=Mh,d.invokeMap=df,d.iteratee=$s,d.keyBy=ff,d.keys=Pe,d.keysIn=ze,d.map=Yi,d.mapKeys=function Eh(e,n){var r={};return n=z(n,3),vt(e,function(o,c,f){At(r,n(o,c,f),o)}),r},d.mapValues=function Oh(e,n){var r={};return n=z(n,3),vt(e,function(o,c,f){At(r,c,n(o,c,f))}),r},d.matches=function Sp(e){return Ma(ot(e,1))},d.matchesProperty=function Tp(e,n){return ka(e,ot(n,1))},d.memoize=Qi,d.merge=Ih,d.mergeWith=Nc,d.method=Ap,d.methodOf=Mp,d.mixin=Xs,d.negate=Ki,d.nthArg=function Ep(e){return e=te(e),ie(function(n){return Ea(n,e)})},d.omit=Ph,d.omitBy=function Rh(e,n){return Uc(e,Ki(z(n)))},d.once=function kf(e){return Tc(2,e)},d.orderBy=function hf(e,n,r,o){return null==e?[]:(j(n)||(n=null==n?[]:[n]),j(r=o?u:r)||(r=null==r?[]:[r]),Oa(e,n,r))},d.over=Op,d.overArgs=Ef,d.overEvery=Ip,d.overSome=Pp,d.partial=Ws,d.partialRight=Oc,d.partition=pf,d.pick=Dh,d.pickBy=Uc,d.property=zc,d.propertyOf=function Rp(e){return function(n){return null==e?u:pn(e,n)}},d.pull=fd,d.pullAll=yc,d.pullAllBy=function hd(e,n,r){return e&&e.length&&n&&n.length?xs(e,n,z(r,2)):e},d.pullAllWith=function pd(e,n,r){return e&&e.length&&n&&n.length?xs(e,n,u,r):e},d.pullAt=gd,d.range=Dp,d.rangeRight=Fp,d.rearg=Of,d.reject=function mf(e,n){return(j(e)?_t:wa)(e,Ki(z(n,3)))},d.remove=function _d(e,n){var r=[];if(!e||!e.length)return r;var o=-1,c=[],f=e.length;for(n=z(n,3);++o<f;){var _=e[o];n(_,o,e)&&(r.push(_),c.push(o))}return Pa(e,c),r},d.rest=function If(e,n){if("function"!=typeof e)throw new rt(t);return ie(e,n=n===u?n:te(n))},d.reverse=qs,d.sampleSize=function yf(e,n,r){return n=(r?Ne(e,n,r):n===u)?1:te(n),(j(e)?Uu:ll)(e,n)},d.set=function Bh(e,n,r){return null==e?e:Mr(e,n,r)},d.setWith=function Lh(e,n,r,o){return o="function"==typeof o?o:u,null==e?e:Mr(e,n,r,o)},d.shuffle=function wf(e){return(j(e)?qu:fl)(e)},d.slice=function md(e,n,r){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&Ne(e,n,r)?(n=0,r=o):(n=null==n?0:te(n),r=r===u?o:te(r)),st(e,n,r)):[]},d.sortBy=Cf,d.sortedUniq=function Sd(e){return e&&e.length?Da(e):[]},d.sortedUniqBy=function Td(e,n){return e&&e.length?Da(e,z(n,2)):[]},d.split=function sp(e,n,r){return r&&"number"!=typeof r&&Ne(e,n,r)&&(n=r=u),(r=r===u?nt:r>>>0)?(e=le(e))&&("string"==typeof n||null!=n&&!Ys(n))&&!(n=Xe(n))&&Zt(e)?Gt(F(e),0,r):e.split(n,r):[]},d.spread=function Pf(e,n){if("function"!=typeof e)throw new rt(t);return n=null==n?0:Oe(te(n),0),ie(function(r){var o=r[n],c=Gt(r,0,n);return o&&mt(c,o),Be(e,this,c)})},d.tail=function Ad(e){var n=null==e?0:e.length;return n?st(e,1,n):[]},d.take=function Md(e,n,r){return e&&e.length?st(e,0,(n=r||n===u?1:te(n))<0?0:n):[]},d.takeRight=function kd(e,n,r){var o=null==e?0:e.length;return o?st(e,(n=o-(n=r||n===u?1:te(n)))<0?0:n,o):[]},d.takeRightWhile=function Ed(e,n){return e&&e.length?Bi(e,z(n,3),!1,!0):[]},d.takeWhile=function Od(e,n){return e&&e.length?Bi(e,z(n,3)):[]},d.tap=function Jd(e,n){return n(e),e},d.throttle=function Rf(e,n,r){var o=!0,c=!0;if("function"!=typeof e)throw new rt(t);return we(r)&&(o="leading"in r?!!r.leading:o,c="trailing"in r?!!r.trailing:c),Ec(e,n,{leading:o,maxWait:n,trailing:c})},d.thru=Ji,d.toArray=Fc,d.toPairs=qc,d.toPairsIn=Hc,d.toPath=function Up(e){return j(e)?_e(e,wt):je(e)?[e]:Je(hc(le(e)))},d.toPlainObject=Lc,d.transform=function Zh(e,n,r){var o=j(e),c=o||Wt(e)||qn(e);if(n=z(n,4),null==r){var f=e&&e.constructor;r=c?o?new f:[]:we(e)&&Ot(f)?Ln(Ci(e)):{}}return(c?We:vt)(e,function(_,m,S){return n(r,_,m,S)}),r},d.unary=function Df(e){return Sc(e,1)},d.union=Id,d.unionBy=Pd,d.unionWith=Rd,d.uniq=function Dd(e){return e&&e.length?qt(e):[]},d.uniqBy=function Fd(e,n){return e&&e.length?qt(e,z(n,2)):[]},d.uniqWith=function Bd(e,n){return n="function"==typeof n?n:u,e&&e.length?qt(e,u,n):[]},d.unset=function Nh(e,n){return null==e||Ts(e,n)},d.unzip=Hs,d.unzipWith=wc,d.update=function Uh(e,n,r){return null==e?e:Ba(e,n,ks(r))},d.updateWith=function qh(e,n,r,o){return o="function"==typeof o?o:u,null==e?e:Ba(e,n,ks(r),o)},d.values=Hn,d.valuesIn=function Hh(e){return null==e?[]:_r(e,ze(e))},d.without=Ld,d.words=Jc,d.wrap=function Ff(e,n){return Ws(ks(n),e)},d.xor=Zd,d.xorBy=Nd,d.xorWith=Ud,d.zip=qd,d.zipObject=function Hd(e,n){return Za(e||[],n||[],Cr)},d.zipObjectDeep=function Gd(e,n){return Za(e||[],n||[],Mr)},d.zipWith=Wd,d.entries=qc,d.entriesIn=Hc,d.extend=Zc,d.extendWith=Xi,Xs(d,d),d.add=Hp,d.attempt=Yc,d.camelCase=Yh,d.capitalize=Gc,d.ceil=Gp,d.clamp=function Gh(e,n,r){return r===u&&(r=n,n=u),r!==u&&(r=(r=ct(r))==r?r:0),n!==u&&(n=(n=ct(n))==n?n:0),hn(ct(e),n,r)},d.clone=function Lf(e){return ot(e,4)},d.cloneDeep=function Nf(e){return ot(e,5)},d.cloneDeepWith=function Uf(e,n){return ot(e,5,n="function"==typeof n?n:u)},d.cloneWith=function Zf(e,n){return ot(e,4,n="function"==typeof n?n:u)},d.conformsTo=function qf(e,n){return null==n||ma(e,n,Pe(n))},d.deburr=Wc,d.defaultTo=function xp(e,n){return null==e||e!=e?n:e},d.divide=Wp,d.endsWith=function zh(e,n,r){e=le(e),n=Xe(n);var o=e.length,c=r=r===u?o:hn(te(r),0,o);return(r-=n.length)>=0&&e.slice(r,c)==n},d.eq=ht,d.escape=function Qh(e){return(e=le(e))&&Vn.test(e)?e.replace(Tn,rs):e},d.escapeRegExp=function Kh(e){return(e=le(e))&&rn.test(e)?e.replace(jn,"\\$&"):e},d.every=function tf(e,n,r){var o=j(e)?ci:Ju;return r&&Ne(e,n,r)&&(n=u),o(e,z(n,3))},d.find=rf,d.findIndex=gc,d.findKey=function mh(e,n){return ui(e,z(n,3),vt)},d.findLast=of,d.findLastIndex=_c,d.findLastKey=function vh(e,n){return ui(e,z(n,3),gs)},d.floor=Jp,d.forEach=bc,d.forEachRight=Cc,d.forIn=function yh(e,n){return null==e?e:ps(e,z(n,3),ze)},d.forInRight=function wh(e,n){return null==e?e:xa(e,z(n,3),ze)},d.forOwn=function xh(e,n){return e&&vt(e,z(n,3))},d.forOwnRight=function bh(e,n){return e&&gs(e,z(n,3))},d.get=zs,d.gt=Hf,d.gte=Gf,d.has=function Th(e,n){return null!=e&&ic(e,n,zu)},d.hasIn=Qs,d.head=vc,d.identity=Qe,d.includes=function lf(e,n,r,o){e=Ye(e)?e:Hn(e),r=r&&!o?te(r):0;var c=e.length;return r<0&&(r=Oe(c+r,0)),$i(e)?r<=c&&e.indexOf(n,r)>-1:!!c&&Lt(e,n,r)>-1},d.indexOf=function id(e,n,r){var o=null==e?0:e.length;if(!o)return-1;var c=null==r?0:te(r);return c<0&&(c=Oe(o+c,0)),Lt(e,n,c)},d.inRange=function Wh(e,n,r){return n=It(n),r===u?(r=n,n=0):r=It(r),function Ku(e,n,r){return e>=De(n,r)&&e<Oe(n,r)}(e=ct(e),n,r)},d.invoke=kh,d.isArguments=mn,d.isArray=j,d.isArrayBuffer=Wf,d.isArrayLike=Ye,d.isArrayLikeObject=Ce,d.isBoolean=function Jf(e){return!0===e||!1===e||be(e)&&Ze(e)==Yt},d.isBuffer=Wt,d.isDate=Yf,d.isElement=function zf(e){return be(e)&&1===e.nodeType&&!Ir(e)},d.isEmpty=function Qf(e){if(null==e)return!0;if(Ye(e)&&(j(e)||"string"==typeof e||"function"==typeof e.splice||Wt(e)||qn(e)||mn(e)))return!e.length;var n=Fe(e);if(n==Ke||n==Ve)return!e.size;if(Er(e))return!ys(e).length;for(var r in e)if(de.call(e,r))return!1;return!0},d.isEqual=function Kf(e,n){return Ar(e,n)},d.isEqualWith=function Vf(e,n,r){var o=(r="function"==typeof r?r:u)?r(e,n):u;return o===u?Ar(e,n,u,r):!!o},d.isError=Js,d.isFinite=function $f(e){return"number"==typeof e&&da(e)},d.isFunction=Ot,d.isInteger=Ic,d.isLength=Vi,d.isMap=Pc,d.isMatch=function Xf(e,n){return e===n||vs(e,n,Fs(n))},d.isMatchWith=function jf(e,n,r){return r="function"==typeof r?r:u,vs(e,n,Fs(n),r)},d.isNaN=function eh(e){return Rc(e)&&e!=+e},d.isNative=function th(e){if(Ll(e))throw new $("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Sa(e)},d.isNil=function rh(e){return null==e},d.isNull=function nh(e){return null===e},d.isNumber=Rc,d.isObject=we,d.isObjectLike=be,d.isPlainObject=Ir,d.isRegExp=Ys,d.isSafeInteger=function ih(e){return Ic(e)&&e>=-gt&&e<=gt},d.isSet=Dc,d.isString=$i,d.isSymbol=je,d.isTypedArray=qn,d.isUndefined=function oh(e){return e===u},d.isWeakMap=function sh(e){return be(e)&&Fe(e)==jt},d.isWeakSet=function ah(e){return be(e)&&"[object WeakSet]"==Ze(e)},d.join=function ud(e,n){return null==e?"":ou.call(e,n)},d.kebabCase=Vh,d.last=at,d.lastIndexOf=function ld(e,n,r){var o=null==e?0:e.length;if(!o)return-1;var c=o;return r!==u&&(c=(c=te(r))<0?Oe(o+c,0):De(c,o-1)),n==n?function l(y,O,k){for(var N=k+1;N--;)if(y[N]===O)return N;return N}(e,n,c):Rn(e,li,c,!0)},d.lowerCase=$h,d.lowerFirst=Xh,d.lt=ch,d.lte=uh,d.max=function Yp(e){return e&&e.length?Pi(e,Qe,_s):u},d.maxBy=function zp(e,n){return e&&e.length?Pi(e,z(n,2),_s):u},d.mean=function Qp(e){return di(e,Qe)},d.meanBy=function Kp(e,n){return di(e,z(n,2))},d.min=function Vp(e){return e&&e.length?Pi(e,Qe,ws):u},d.minBy=function $p(e,n){return e&&e.length?Pi(e,z(n,2),ws):u},d.stubArray=ea,d.stubFalse=ta,d.stubObject=function Bp(){return{}},d.stubString=function Lp(){return""},d.stubTrue=function Zp(){return!0},d.multiply=Xp,d.nth=function dd(e,n){return e&&e.length?Ea(e,te(n)):u},d.noConflict=function kp(){return Me._===this&&(Me._=jc),this},d.noop=js,d.now=zi,d.pad=function jh(e,n,r){e=le(e);var o=(n=te(n))?v(e):0;if(!n||o>=n)return e;var c=(n-o)/2;return Ui(Mi(c),r)+e+Ui(Ai(c),r)},d.padEnd=function ep(e,n,r){e=le(e);var o=(n=te(n))?v(e):0;return n&&o<n?e+Ui(n-o,r):e},d.padStart=function tp(e,n,r){e=le(e);var o=(n=te(n))?v(e):0;return n&&o<n?Ui(n-o,r)+e:e},d.parseInt=function np(e,n,r){return r||null==n?n=0:n&&(n=+n),cu(le(e).replace(An,""),n||0)},d.random=function Jh(e,n,r){if(r&&"boolean"!=typeof r&&Ne(e,n,r)&&(n=r=u),r===u&&("boolean"==typeof n?(r=n,n=u):"boolean"==typeof e&&(r=e,e=u)),e===u&&n===u?(e=0,n=1):(e=It(e),n===u?(n=e,e=0):n=It(n)),e>n){var o=e;e=n,n=o}if(r||e%1||n%1){var c=fa();return De(e+c*(n-e+Wo("1e-"+((c+"").length-1))),n)}return bs(e,n)},d.reduce=function gf(e,n,r){var o=j(e)?lr:fi,c=arguments.length<3;return o(e,z(n,4),r,c,Ut)},d.reduceRight=function _f(e,n,r){var o=j(e)?Qo:fi,c=arguments.length<3;return o(e,z(n,4),r,c,ya)},d.repeat=function rp(e,n,r){return n=(r?Ne(e,n,r):n===u)?1:te(n),Cs(le(e),n)},d.replace=function ip(){var e=arguments,n=le(e[0]);return e.length<3?n:n.replace(e[1],e[2])},d.result=function Fh(e,n,r){var o=-1,c=(n=Ht(n,e)).length;for(c||(c=1,e=u);++o<c;){var f=null==e?u:e[wt(n[o])];f===u&&(o=c,f=r),e=Ot(f)?f.call(e):f}return e},d.round=jp,d.runInContext=y,d.sample=function vf(e){return(j(e)?ga:ul)(e)},d.size=function xf(e){if(null==e)return 0;if(Ye(e))return $i(e)?v(e):e.length;var n=Fe(e);return n==Ke||n==Ve?e.size:ys(e).length},d.snakeCase=op,d.some=function bf(e,n,r){var o=j(e)?dr:hl;return r&&Ne(e,n,r)&&(n=u),o(e,z(n,3))},d.sortedIndex=function vd(e,n){return Fi(e,n)},d.sortedIndexBy=function yd(e,n,r){return Ss(e,n,z(r,2))},d.sortedIndexOf=function wd(e,n){var r=null==e?0:e.length;if(r){var o=Fi(e,n);if(o<r&&ht(e[o],n))return o}return-1},d.sortedLastIndex=function xd(e,n){return Fi(e,n,!0)},d.sortedLastIndexBy=function bd(e,n,r){return Ss(e,n,z(r,2),!0)},d.sortedLastIndexOf=function Cd(e,n){if(null!=e&&e.length){var o=Fi(e,n,!0)-1;if(ht(e[o],n))return o}return-1},d.startCase=ap,d.startsWith=function cp(e,n,r){return e=le(e),r=null==r?0:hn(te(r),0,e.length),n=Xe(n),e.slice(r,r+n.length)==n},d.subtract=eg,d.sum=function tg(e){return e&&e.length?pr(e,Qe):0},d.sumBy=function ng(e,n){return e&&e.length?pr(e,z(n,2)):0},d.template=function up(e,n,r){var o=d.templateSettings;r&&Ne(e,n,r)&&(n=u),e=le(e),n=Xi({},n,o,ec);var m,S,c=Xi({},n.imports,o.imports,ec),f=Pe(c),_=_r(c,f),I=0,P=n.interpolate||Mn,D="__p += '",U=cs((n.escape||Mn).source+"|"+P.source+"|"+(P===$e?Nr:Mn).source+"|"+(n.evaluate||Mn).source+"|$","g"),W="//# sourceURL="+(de.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++No+"]")+"\n";e.replace(U,function(K,oe,ae,et,Ue,tt){return ae||(ae=et),D+=e.slice(I,tt).replace(wo,is),oe&&(m=!0,D+="' +\n__e("+oe+") +\n'"),Ue&&(S=!0,D+="';\n"+Ue+";\n__p += '"),ae&&(D+="' +\n((__t = ("+ae+")) == null ? '' : __t) +\n'"),I=tt+K.length,K}),D+="';\n";var Q=de.call(n,"variable")&&n.variable;if(Q){if(Zr.test(Q))throw new $("Invalid `variable` option passed into `_.template`")}else D="with (obj) {\n"+D+"\n}\n";D=(S?D.replace(ao,""):D).replace(co,"$1").replace(uo,"$1;"),D="function("+(Q||"obj")+") {\n"+(Q?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(m?", __e = _.escape":"")+(S?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+D+"return __p\n}";var re=Yc(function(){return ce(f,W+"return "+D).apply(u,_)});if(re.source=D,Js(re))throw re;return re},d.times=function Np(e,n){if((e=te(e))<1||e>gt)return[];var r=nt,o=De(e,nt);n=z(n),e-=nt;for(var c=gr(o,n);++r<e;)n(r);return c},d.toFinite=It,d.toInteger=te,d.toLength=Bc,d.toLower=function lp(e){return le(e).toLowerCase()},d.toNumber=ct,d.toSafeInteger=function lh(e){return e?hn(te(e),-gt,gt):0===e?e:0},d.toString=le,d.toUpper=function dp(e){return le(e).toUpperCase()},d.trim=function fp(e,n,r){if((e=le(e))&&(r||n===u))return hi(e);if(!e||!(n=Xe(n)))return e;var o=F(e),c=F(n);return Gt(o,pi(o,c),gi(o,c)+1).join("")},d.trimEnd=function hp(e,n,r){if((e=le(e))&&(r||n===u))return e.slice(0,Y(e)+1);if(!e||!(n=Xe(n)))return e;var o=F(e);return Gt(o,0,gi(o,F(n))+1).join("")},d.trimStart=function pp(e,n,r){if((e=le(e))&&(r||n===u))return e.replace(An,"");if(!e||!(n=Xe(n)))return e;var o=F(e);return Gt(o,pi(o,F(n))).join("")},d.truncate=function gp(e,n){var r=30,o="...";if(we(n)){var c="separator"in n?n.separator:c;r="length"in n?te(n.length):r,o="omission"in n?Xe(n.omission):o}var f=(e=le(e)).length;if(Zt(e)){var _=F(e);f=_.length}if(r>=f)return e;var m=r-v(o);if(m<1)return o;var S=_?Gt(_,0,m).join(""):e.slice(0,m);if(c===u)return S+o;if(_&&(m+=S.length-m),Ys(c)){if(e.slice(m).search(c)){var I,P=S;for(c.global||(c=cs(c.source,le(er.exec(c))+"g")),c.lastIndex=0;I=c.exec(P);)var D=I.index;S=S.slice(0,D===u?m:D)}}else if(e.indexOf(Xe(c),m)!=m){var U=S.lastIndexOf(c);U>-1&&(S=S.slice(0,U))}return S+o},d.unescape=function _p(e){return(e=le(e))&&lo.test(e)?e.replace(Fr,ne):e},d.uniqueId=function qp(e){var n=++$c;return le(e)+n},d.upperCase=mp,d.upperFirst=Ks,d.each=bc,d.eachRight=Cc,d.first=vc,Xs(d,function(){var e={};return vt(d,function(n,r){de.call(d.prototype,r)||(e[r]=n)}),e}(),{chain:!1}),d.VERSION="4.17.21",We(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){d[e].placeholder=d}),We(["drop","take"],function(e,n){se.prototype[e]=function(r){r=r===u?1:Oe(te(r),0);var o=this.__filtered__&&!n?new se(this):this.clone();return o.__filtered__?o.__takeCount__=De(r,o.__takeCount__):o.__views__.push({size:De(r,nt),type:e+(o.__dir__<0?"Right":"")}),o},se.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),We(["filter","map","takeWhile"],function(e,n){var r=n+1,o=1==r||3==r;se.prototype[e]=function(c){var f=this.clone();return f.__iteratees__.push({iteratee:z(c,3),type:r}),f.__filtered__=f.__filtered__||o,f}}),We(["head","last"],function(e,n){var r="take"+(n?"Right":"");se.prototype[e]=function(){return this[r](1).value()[0]}}),We(["initial","tail"],function(e,n){var r="drop"+(n?"":"Right");se.prototype[e]=function(){return this.__filtered__?new se(this):this[r](1)}}),se.prototype.compact=function(){return this.filter(Qe)},se.prototype.find=function(e){return this.filter(e).head()},se.prototype.findLast=function(e){return this.reverse().find(e)},se.prototype.invokeMap=ie(function(e,n){return"function"==typeof e?new se(this):this.map(function(r){return Tr(r,e,n)})}),se.prototype.reject=function(e){return this.filter(Ki(z(e)))},se.prototype.slice=function(e,n){e=te(e);var r=this;return r.__filtered__&&(e>0||n<0)?new se(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),n!==u&&(r=(n=te(n))<0?r.dropRight(-n):r.take(n-e)),r)},se.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},se.prototype.toArray=function(){return this.take(nt)},vt(se.prototype,function(e,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),o=/^(?:head|last)$/.test(n),c=d[o?"take"+("last"==n?"Right":""):n],f=o||/^find/.test(n);!c||(d.prototype[n]=function(){var _=this.__wrapped__,m=o?[1]:arguments,S=_ instanceof se,I=m[0],P=S||j(_),D=function(oe){var ae=c.apply(d,mt([oe],m));return o&&U?ae[0]:ae};P&&r&&"function"==typeof I&&1!=I.length&&(S=P=!1);var U=this.__chain__,W=!!this.__actions__.length,Q=f&&!U,re=S&&!W;if(!f&&P){_=re?_:new se(this);var K=e.apply(_,m);return K.__actions__.push({func:Ji,args:[D],thisArg:u}),new it(K,U)}return Q&&re?e.apply(this,m):(K=this.thru(D),Q?o?K.value()[0]:K.value():K)})}),We(["pop","push","shift","sort","splice","unshift"],function(e){var n=mi[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);d.prototype[e]=function(){var c=arguments;if(o&&!this.__chain__){var f=this.value();return n.apply(j(f)?f:[],c)}return this[r](function(_){return n.apply(j(_)?_:[],c)})}}),vt(se.prototype,function(e,n){var r=d[n];if(r){var o=r.name+"";de.call(Bn,o)||(Bn[o]=[]),Bn[o].push({name:n,func:r})}}),Bn[Zi(u,2).name]=[{name:"wrapper",func:u}],se.prototype.clone=function gu(){var e=new se(this.__wrapped__);return e.__actions__=Je(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Je(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Je(this.__views__),e},se.prototype.reverse=function _u(){if(this.__filtered__){var e=new se(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},se.prototype.value=function mu(){var e=this.__wrapped__.value(),n=this.__dir__,r=j(e),o=n<0,c=r?e.length:0,f=function El(e,n,r){for(var o=-1,c=r.length;++o<c;){var f=r[o],_=f.size;switch(f.type){case"drop":e+=_;break;case"dropRight":n-=_;break;case"take":n=De(n,e+_);break;case"takeRight":e=Oe(e,n-_)}}return{start:e,end:n}}(0,c,this.__views__),_=f.start,m=f.end,S=m-_,I=o?m:_-1,P=this.__iteratees__,D=P.length,U=0,W=De(S,this.__takeCount__);if(!r||!o&&c==S&&W==S)return La(e,this.__actions__);var Q=[];e:for(;S--&&U<W;){for(var re=-1,K=e[I+=n];++re<D;){var oe=P[re],et=oe.type,Ue=(0,oe.iteratee)(K);if(2==et)K=Ue;else if(!Ue){if(1==et)continue e;break e}}Q[U++]=K}return Q},d.prototype.at=Yd,d.prototype.chain=function zd(){return xc(this)},d.prototype.commit=function Qd(){return new it(this.value(),this.__chain__)},d.prototype.next=function Kd(){this.__values__===u&&(this.__values__=Fc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?u:this.__values__[this.__index__++]}},d.prototype.plant=function $d(e){for(var n,r=this;r instanceof Oi;){var o=pc(r);o.__index__=0,o.__values__=u,n?c.__wrapped__=o:n=o;var c=o;r=r.__wrapped__}return c.__wrapped__=e,n},d.prototype.reverse=function Xd(){var e=this.__wrapped__;if(e instanceof se){var n=e;return this.__actions__.length&&(n=new se(this)),(n=n.reverse()).__actions__.push({func:Ji,args:[qs],thisArg:u}),new it(n,this.__chain__)}return this.thru(qs)},d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=function jd(){return La(this.__wrapped__,this.__actions__)},d.prototype.first=d.prototype.head,vr&&(d.prototype[vr]=function Vd(){return this}),d}();Me._=Ae,(R=function(){return Ae}.call(J,M,J,qe))!==u&&(qe.exports=R)}.call(this)},2754:(qe,J,M)=>{"use strict";J.TD=void 0;var u=M(4354);Object.defineProperty(J,"TD",{enumerable:!0,get:function(){return u.requestMediaPermissions}})},4354:function(qe,J,M){"use strict";var R=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(J,"__esModule",{value:!0}),J.requestVideoPermissions=J.requestAudioPermissions=J.requestMediaPermissions=J.MediaPermissionsErrorType=void 0;const u=R(M(7230));var x,h;(h=x=J.MediaPermissionsErrorType||(J.MediaPermissionsErrorType={})).SystemPermissionDenied="SystemPermissionDenied",h.UserPermissionDenied="UserPermissionDenied",h.CouldNotStartVideoSource="CouldNotStartVideoSource",h.Generic="Generic",J.requestMediaPermissions=h=>new Promise((p,Z)=>{navigator.mediaDevices.getUserMedia(h??{audio:!0,video:!0}).then(T=>{T.getTracks().forEach(w=>{w.stop()}),p(!0)}).catch(T=>{const A=u.default.getParser(window.navigator.userAgent).getBrowserName(),C=T.name,b=T.message;let L=x.Generic;"Chrome"===A?"NotAllowedError"===C?"Permission denied by system"===b?L=x.SystemPermissionDenied:"Permission denied"===b&&(L=x.UserPermissionDenied):"NotReadableError"===C&&(L=x.CouldNotStartVideoSource):"Safari"===A?"NotAllowedError"===C&&(L=x.UserPermissionDenied):"Microsoft Edge"===A?"NotAllowedError"===C?L=x.UserPermissionDenied:"NotReadableError"===C&&(L=x.CouldNotStartVideoSource):"Firefox"===A&&("NotFoundError"===C||"NotReadableError"===C?L=x.SystemPermissionDenied:"NotAllowedError"===C?L=x.UserPermissionDenied:"AbortError"===C&&(L=x.CouldNotStartVideoSource)),Z({type:L,name:T.name,message:T.message})})}),J.requestAudioPermissions=()=>(0,J.requestMediaPermissions)({audio:!0,video:!1}),J.requestVideoPermissions=()=>(0,J.requestMediaPermissions)({audio:!1,video:!0})},5439:qe=>{window,qe.exports=function(J){var M={};function R(u){if(M[u])return M[u].exports;var x=M[u]={i:u,l:!1,exports:{}};return J[u].call(x.exports,x,x.exports,R),x.l=!0,x.exports}return R.m=J,R.c=M,R.d=function(u,x,E){R.o(u,x)||Object.defineProperty(u,x,{enumerable:!0,get:E})},R.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},R.t=function(u,x){if(1&x&&(u=R(u)),8&x||4&x&&"object"==typeof u&&u&&u.__esModule)return u;var E=Object.create(null);if(R.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:u}),2&x&&"string"!=typeof u)for(var B in u)R.d(E,B,function(t){return u[t]}.bind(null,B));return E},R.n=function(u){var x=u&&u.__esModule?function(){return u.default}:function(){return u};return R.d(x,"a",x),x},R.o=function(u,x){return Object.prototype.hasOwnProperty.call(u,x)},R.p="/dist/",R(R.s=1)}([function(J,M,R){"use strict";var u=this&&this.__awaiter||function(E,B,t,h){return new(t||(t=Promise))(function(p,Z){function T(C){try{A(h.next(C))}catch(b){Z(b)}}function w(C){try{A(h.throw(C))}catch(b){Z(b)}}function A(C){var b;C.done?p(C.value):(b=C.value,b instanceof t?b:new t(function(L){L(b)})).then(T,w)}A((h=h.apply(E,B||[])).next())})},x=this&&this.__generator||function(E,B){var t,h,p,Z,T={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return Z={next:w(0),throw:w(1),return:w(2)},"function"==typeof Symbol&&(Z[Symbol.iterator]=function(){return this}),Z;function w(A){return function(C){return function(b){if(t)throw new TypeError("Generator is already executing.");for(;Z&&(Z=0,b[0]&&(T=0)),T;)try{if(t=1,h&&(p=2&b[0]?h.return:b[0]?h.throw||((p=h.return)&&p.call(h),0):h.next)&&!(p=p.call(h,b[1])).done)return p;switch(h=0,p&&(b=[2&b[0],p.value]),b[0]){case 0:case 1:p=b;break;case 4:return T.label++,{value:b[1],done:!1};case 5:T.label++,h=b[1],b=[0];continue;case 7:b=T.ops.pop(),T.trys.pop();continue;default:if(!((p=(p=T.trys).length>0&&p[p.length-1])||6!==b[0]&&2!==b[0])){T=0;continue}if(3===b[0]&&(!p||b[1]>p[0]&&b[1]<p[3])){T.label=b[1];break}if(6===b[0]&&T.label<p[1]){T.label=p[1],p=b;break}if(p&&T.label<p[2]){T.label=p[2],T.ops.push(b);break}p[2]&&T.ops.pop(),T.trys.pop();continue}b=B.call(E,T)}catch(L){b=[6,L],h=0}finally{t=p=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([A,C])}}};Object.defineProperty(M,"__esModule",{value:!0}),M.file2b64=void 0,M.file2b64=function(E){return u(this,void 0,void 0,function(){var B,t;return x(this,function(h){return B=new FileReader,t=new Promise(function(p,Z){B.addEventListener("load",function(){var T,w=null===(T=B.result)||void 0===T?void 0:T.toString();w?p(w):Z("could not convert file to base64")},!1)}),B.readAsDataURL(E),[2,t]})})}},function(J,M,R){"use strict";var u=this&&this.__awaiter||function(T,w,A,C){return new(A||(A=Promise))(function(b,L){function q(H){try{ee(C.next(H))}catch(G){L(G)}}function V(H){try{ee(C.throw(H))}catch(G){L(G)}}function ee(H){var G;H.done?b(H.value):(G=H.value,G instanceof A?G:new A(function(ue){ue(G)})).then(q,V)}ee((C=C.apply(T,w||[])).next())})},x=this&&this.__generator||function(T,w){var A,C,b,L,q={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return L={next:V(0),throw:V(1),return:V(2)},"function"==typeof Symbol&&(L[Symbol.iterator]=function(){return this}),L;function V(ee){return function(H){return function(G){if(A)throw new TypeError("Generator is already executing.");for(;L&&(L=0,G[0]&&(q=0)),q;)try{if(A=1,C&&(b=2&G[0]?C.return:G[0]?C.throw||((b=C.return)&&b.call(C),0):C.next)&&!(b=b.call(C,G[1])).done)return b;switch(C=0,b&&(G=[2&G[0],b.value]),G[0]){case 0:case 1:b=G;break;case 4:return q.label++,{value:G[1],done:!1};case 5:q.label++,C=G[1],G=[0];continue;case 7:G=q.ops.pop(),q.trys.pop();continue;default:if(!((b=(b=q.trys).length>0&&b[b.length-1])||6!==G[0]&&2!==G[0])){q=0;continue}if(3===G[0]&&(!b||G[1]>b[0]&&G[1]<b[3])){q.label=G[1];break}if(6===G[0]&&q.label<b[1]){q.label=b[1],b=G;break}if(b&&q.label<b[2]){q.label=b[2],q.ops.push(G);break}b[2]&&q.ops.pop(),q.trys.pop();continue}G=w.call(T,q)}catch(ue){G=[6,ue],C=0}finally{A=b=0}if(5&G[0])throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}([ee,H])}}};Object.defineProperty(M,"__esModule",{value:!0}),M.imageCompressor=void 0;var E=R(2),B=R(3),t=R(0),h=R(4),p=R(5),Z=function(){function T(w,A){var C=this;this.quill=w,this.options=A||{};var b=!!A.debug;this.Logger=new p.ConsoleLogger(b,!!A.suppressErrorLogging),(0,B.warnAboutOptions)(A,this.Logger),this.imageDrop=new E.ImageDrop(w,function(V){return u(C,void 0,void 0,function(){var ee;return x(this,function(H){switch(H.label){case 0:return this.Logger.log("onImageDrop",{dataUrl:V}),[4,this.downscaleImageFromUrl(V)];case 1:return ee=H.sent(),this.insertToEditor(ee,T.b64toBlob(ee)),[2]}})})},this.Logger),this.Logger.log("fileChanged",{options:A,quill:w,debug:b});var q=this.quill.getModule("toolbar");q?q.addHandler("image",function(){return C.selectLocalImage()}):this.Logger.error("Quill toolbar module not found! need { toolbar: // options } in Quill.modules for image icon to sit in")}return T.b64toBlob=function(w){for(var A=atob(w.split(",")[1]),C=w.slice(5).split(";")[0],b=new ArrayBuffer(A.length),L=new Uint8Array(b),q=0;q<A.length;q++)L[q]=A.charCodeAt(q);return new Blob([b],{type:C})},T.prototype.selectLocalImage=function(w){var A=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=function(){return A.fileChanged().then(function(){return w&&w()})},document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){A.fileHolder&&document.body.removeChild(A.fileHolder)})},T.prototype.fileChanged=function(w){var A;return u(this,void 0,void 0,function(){var C,b,L,q;return x(this,function(V){switch(V.label){case 0:return(C=w||(null===(A=this.fileHolder)||void 0===A?void 0:A.files))&&C.length?(this.Logger.log("fileChanged",{file:b=C[0]}),b?[4,(0,t.file2b64)(b)]:[2]):[2];case 1:return L=V.sent(),[4,this.downscaleImageFromUrl(L)];case 2:return q=V.sent(),this.insertToEditor(q,T.b64toBlob(q)),[2]}})})},T.prototype.downscaleImageFromUrl=function(w){return u(this,void 0,void 0,function(){var A;return x(this,function(C){switch(C.label){case 0:return[4,(0,h.downscaleImage)(this.Logger,w,this.options.maxWidth,this.options.maxHeight,this.options.imageType,this.options.keepImageTypes,this.options.ignoreImageTypes,this.options.quality)];case 1:return A=C.sent(),this.Logger.log("downscaleImageFromUrl",{dataUrl:w,dataUrlCompressed:A}),[2,A]}})})},T.prototype.insertToEditor=function(w,A){if(this.options.insertIntoEditor)this.options.insertIntoEditor(w,A);else{this.Logger.log("insertToEditor",{url:w}),this.range=this.quill.getSelection();var C=this.range;if(!C)return;this.logFileSize(w),this.quill.insertEmbed(C.index,"image","".concat(w),"user"),C.index++,this.quill.setSelection(C,"api")}},T.prototype.logFileSize=function(w){var A=(Math.round(3*(w.length-22)/4)/1024).toFixed(0);this.Logger.log("estimated img size: "+A+" kb")},T}();M.imageCompressor=Z,window.imageCompressor=Z,M.default=Z},function(J,M,R){"use strict";var u=this&&this.__awaiter||function(Z,T,w,A){return new(w||(w=Promise))(function(C,b){function L(ee){try{V(A.next(ee))}catch(H){b(H)}}function q(ee){try{V(A.throw(ee))}catch(H){b(H)}}function V(ee){var H;ee.done?C(ee.value):(H=ee.value,H instanceof w?H:new w(function(G){G(H)})).then(L,q)}V((A=A.apply(Z,T||[])).next())})},x=this&&this.__generator||function(Z,T){var w,A,C,b,L={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return b={next:q(0),throw:q(1),return:q(2)},"function"==typeof Symbol&&(b[Symbol.iterator]=function(){return this}),b;function q(V){return function(ee){return function(H){if(w)throw new TypeError("Generator is already executing.");for(;b&&(b=0,H[0]&&(L=0)),L;)try{if(w=1,A&&(C=2&H[0]?A.return:H[0]?A.throw||((C=A.return)&&C.call(A),0):A.next)&&!(C=C.call(A,H[1])).done)return C;switch(A=0,C&&(H=[2&H[0],C.value]),H[0]){case 0:case 1:C=H;break;case 4:return L.label++,{value:H[1],done:!1};case 5:L.label++,A=H[1],H=[0];continue;case 7:H=L.ops.pop(),L.trys.pop();continue;default:if(!((C=(C=L.trys).length>0&&C[C.length-1])||6!==H[0]&&2!==H[0])){L=0;continue}if(3===H[0]&&(!C||H[1]>C[0]&&H[1]<C[3])){L.label=H[1];break}if(6===H[0]&&L.label<C[1]){L.label=C[1],C=H;break}if(C&&L.label<C[2]){L.label=C[2],L.ops.push(H);break}C[2]&&L.ops.pop(),L.trys.pop();continue}H=T.call(Z,L)}catch(G){H=[6,G],A=0}finally{w=C=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([V,ee])}}};Object.defineProperty(M,"__esModule",{value:!0}),M.ImageDrop=void 0;var E=R(0),B=function(){function Z(T,w,A){var C=this;this.quill=T,this.onNewDataUrl=w,this.logger=A,this.quill.root.addEventListener("drop",function(b){return C.handleDrop(b)},!1),this.quill.root.addEventListener("paste",function(b){return C.handlePaste(b)},!1)}return Z.prototype.handleDrop=function(T){return u(this,void 0,void 0,function(){var w,A,C,b,L,q,V;return x(this,function(ee){switch(ee.label){case 0:return T.preventDefault(),document.caretRangeFromPoint&&(w=document.getSelection(),A=document.caretRangeFromPoint(T.clientX,T.clientY),w&&A&&w.setBaseAndExtent(A.startContainer,A.startOffset,A.startContainer,A.startOffset)),[4,h(T)];case 1:return C=ee.sent(),b=Array.from(C||[]).filter(function(H){return p(H.type)}),(L=b?.[0])?[4,(0,E.file2b64)(L)]:[3,3];case 2:return V=ee.sent(),this.logger.log("handleNewImageFiles",{evt:T,files:C,filesFiltered:b,firstImage:L,base64ImageSrc:V}),this.onNewDataUrl(V),[2];case 3:return[4,t(T)];case 4:return(q=ee.sent())?[4,(0,E.file2b64)(q)]:[3,6];case 5:return V=ee.sent(),this.logger.log("handleNewImageFiles",{evt:T,blob:q,base64ImageSrc:V}),this.onNewDataUrl(V),[2];case 6:return[2]}})})},Z.prototype.handlePaste=function(T){var w,A;return u(this,void 0,void 0,function(){var C,b,L,q;return x(this,function(V){switch(V.label){case 0:return C=Array.from((null===(w=T?.clipboardData)||void 0===w?void 0:w.items)||[]),this.logger.log("handlePaste",{files:C,evt:T}),b=C.filter(function(ee){return p(ee.type)}),this.logger.log("handlePaste",{images:b,evt:T}),b.length?b.filter(function(ee){return"text/html"!==ee.type}).length?(T.preventDefault(),(L=null===(A=b.pop())||void 0===A?void 0:A.getAsFile())?[4,(0,E.file2b64)(L)]:[2]):(this.logger.log("handlePaste also detected html"),[2]):[2];case 1:return q=V.sent(),this.logger.log("handleNewImageFiles",{base64ImageSrc:q}),this.onNewDataUrl(q),[2]}})})},Z}();function t(Z){var T;return u(this,void 0,void 0,function(){var w;return x(this,function(A){switch(A.label){case 0:return(w=null===(T=Z.dataTransfer)||void 0===T?void 0:T.getData("URL"))?[4,fetch(w)]:[3,3];case 1:return[4,A.sent().blob()];case 2:return[2,A.sent()];case 3:return[2]}})})}function h(Z){var T;return u(this,void 0,void 0,function(){return x(this,function(w){return[2,null===(T=Z?.dataTransfer)||void 0===T?void 0:T.files]})})}function p(Z){return!!Z.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)/i)}M.ImageDrop=B},function(J,M,R){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.warnAboutOptions=void 0,M.warnAboutOptions=function(u,x){u.maxWidth=u.maxWidth||1e3,u.maxHeight=u.maxHeight||1e3,u.maxWidth&&"number"!=typeof u.maxWidth&&(x.warn("[config error] 'maxWidth' is required to be a \"number\" (in pixels), \nreceived: ".concat(u.maxWidth,"\n-> using default 1000")),u.maxWidth=1e3),u.maxHeight&&"number"!=typeof u.maxHeight&&(x.warn("[config error] 'maxHeight' is required to be a \"number\" (in pixels), \nreceived: ".concat(u.maxHeight,"\n-> using default 1000")),u.maxHeight=1e3),u.quality&&"number"!=typeof u.quality&&(x.warn("quill.imageCompressor: [config error] 'quality' is required to be a \"number\", \nreceived: ".concat(u.quality,"\n-> using default 0.7")),u.quality=.7),!u.imageType||"string"==typeof u.imageType&&u.imageType.startsWith("image/")||(x.warn('quill.imageCompressor: [config error] \'imageType\' is required be in the form of "image/png" or "image/jpeg" etc ..., \nreceived: '.concat(u.imageType,"\n-> using default image/jpeg")),u.imageType="image/jpeg"),u.keepImageTypes||(u.keepImageTypes=[]),u.keepImageTypes&&!Array.isArray(u.keepImageTypes)&&(x.warn("quill.imageCompressor: [config error] 'keepImageTypes' is required to be a \"array\", received: ".concat(u.keepImageTypes," -> using default []")),u.keepImageTypes=[]),u.ignoreImageTypes||(u.ignoreImageTypes=[]),u.ignoreImageTypes&&!Array.isArray(u.ignoreImageTypes)&&(x.warn("quill.imageCompressor: [config error] 'ignoreImageTypes' is required to be a \"array\", received: ".concat(u.ignoreImageTypes," -> using default []")),u.ignoreImageTypes=[]),u.insertIntoEditor&&"function"!=typeof u.insertIntoEditor&&(x.warn("quill.imageCompressor: [config error] 'insertIntoEditor' is required to be a \"function\", received: ".concat(u.insertIntoEditor," -> using default undefined")),u.insertIntoEditor=void 0)}},function(J,M,R){"use strict";var u=this&&this.__awaiter||function(E,B,t,h){return new(t||(t=Promise))(function(p,Z){function T(C){try{A(h.next(C))}catch(b){Z(b)}}function w(C){try{A(h.throw(C))}catch(b){Z(b)}}function A(C){var b;C.done?p(C.value):(b=C.value,b instanceof t?b:new t(function(L){L(b)})).then(T,w)}A((h=h.apply(E,B||[])).next())})},x=this&&this.__generator||function(E,B){var t,h,p,Z,T={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return Z={next:w(0),throw:w(1),return:w(2)},"function"==typeof Symbol&&(Z[Symbol.iterator]=function(){return this}),Z;function w(A){return function(C){return function(b){if(t)throw new TypeError("Generator is already executing.");for(;Z&&(Z=0,b[0]&&(T=0)),T;)try{if(t=1,h&&(p=2&b[0]?h.return:b[0]?h.throw||((p=h.return)&&p.call(h),0):h.next)&&!(p=p.call(h,b[1])).done)return p;switch(h=0,p&&(b=[2&b[0],p.value]),b[0]){case 0:case 1:p=b;break;case 4:return T.label++,{value:b[1],done:!1};case 5:T.label++,h=b[1],b=[0];continue;case 7:b=T.ops.pop(),T.trys.pop();continue;default:if(!((p=(p=T.trys).length>0&&p[p.length-1])||6!==b[0]&&2!==b[0])){T=0;continue}if(3===b[0]&&(!p||b[1]>p[0]&&b[1]<p[3])){T.label=b[1];break}if(6===b[0]&&T.label<p[1]){T.label=p[1],p=b;break}if(p&&T.label<p[2]){T.label=p[2],T.ops.push(b);break}p[2]&&T.ops.pop(),T.trys.pop();continue}b=B.call(E,T)}catch(L){b=[6,L],h=0}finally{t=p=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([A,C])}}};Object.defineProperty(M,"__esModule",{value:!0}),M.downscaleImage=void 0,M.downscaleImage=function(E,B,t,h,p,Z,T,w){return u(this,void 0,void 0,function(){var A,C,b,L,q,V,ee,H;return x(this,function(G){switch(G.label){case 0:return A=B.split(";")[0].split(":")[1],p=p||"image/jpeg",w=w||.7,(C=new Image).src=B,[4,new Promise(function(ue){C.onload=function(){ue()}})];case 1:return G.sent(),b=function(ue,xe,ye,ge){if(ye&&ge&&ue<=ye&&xe<=ge)return[ue,xe];if(ye&&ue>ye){var He=ye,Ie=Math.floor(xe/ue*He);if(ge&&Ie>ge){var vn=ge;return[Math.floor(ue/xe*vn),vn]}return[He,Ie]}return ge&&xe>ge?(Ie=ge,[He=Math.floor(ue/xe*Ie),Ie]):[xe,ue]}(C.width,C.height,t,h),L=b[0],q=b[1],(V=document.createElement("canvas")).width=L,V.height=q,ee=V.getContext("2d"),"image/jpeg"===p&&(ee.fillStyle="#FFFFFF",ee.fillRect(0,0,C.width,C.height)),T?.includes(A)?[2,B]:(Z?.includes(A)&&(p=A),ee.drawImage(C,0,0,L,q),H=V.toDataURL(p,w),E.log("downscaling image...",{args:{dataUrl:B,maxWidth:t,maxHeight:h,imageType:p,ignoreImageTypes:T,keepImageTypes:Z,imageQuality:w},newHeight:q,newWidth:L}),[2,H])}})})}},function(J,M,R){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.ConsoleLogger=void 0;var u=function(){function x(E,B){this.debug=E,this.suppressErrorLogging=B}return x.prototype.prefixString=function(){return"</> quill-image-compress: "},Object.defineProperty(x.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"error",{get:function(){return this.suppressErrorLogging?function(){}:console.error.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"warn",{get:function(){return this.suppressErrorLogging?function(){}:console.warn.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),x}();M.ConsoleLogger=u}])}}]);
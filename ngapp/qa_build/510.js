(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[510],{4510:(p,v,n)=>{"use strict";n.r(v),n.d(v,{StudentModule:()=>rr});var d=n(6895),a=n(1390),s=n(970),u=n(4633),h=n(8977),t=n(4650),o=n(5412);let c=(()=>{class i{canDeactivate(e,r,l){return!!e.storySaved||(e.showModal(),e.modalChoice)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),w=(()=>{class i{constructor(e,r){this.dialog=e,this.ts=r}canDeactivate(e){if(e.recordingSaved)return!0;let r;return r=this.dialog.open(u.p,{data:{title:this.ts.l.save_changes_made_to_this_recording,type:"",confirmText:this.ts.l.save,cancelText:this.ts.l.cancel},width:"30vh"}),r.afterClosed().subscribe(l=>{if(r=void 0,l)return e.saveRecordings(),!0}),!1}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(o.uw),t.LFG(h.D))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),m=(()=>{class i{canDeactivate(e,r,l){if(e.chosenSections)for(const b of e.chosenSections)b.stop();return!0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var g=n(5861),x=n(4412);class y extends x.i{constructor(){super(...arguments),this.createdWithPrompts=!1}}var _=n(1765),C=n(1745),M=n(1512),k=n(6469),P=n(4687),S=n(1245),A=n(25),N=n(5042),H=n(530),G=n(8443);let L=(()=>{class i{transform(e,r){return e?r?(r=r.toLocaleLowerCase(),e.filter(l=>l instanceof G.n?l.username.toLocaleLowerCase().includes(r):l instanceof y?l.title.toLocaleLowerCase().includes(r)||l.text.toLocaleLowerCase().includes(r):void 0)):e:[]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"appFilter",type:i,pure:!0}),i})();var F=n(3905),Z=n(4006),W=n(9121);function D(i,f){1&i&&(t.TgZ(0,"div",17),t._UZ(1,"grid-spinner"),t.qZA())}function K(i,f){if(1&i&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.click_new_story," ")}}function lt(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"input",23),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,b=t.oxw();return t.KtG(b.toggleDelete(l._id))}),t.qZA()}}function bt(i,f){if(1&i&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.lastUpdated,"M/d/yy, h:mm a"))}}function At(i,f){if(1&i&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.lastUpdated,"d/M/yy, h:mm a"))}}const kt=function(i){return["../dashboard",i]};function Ot(i,f){if(1&i&&(t.TgZ(0,"div")(1,"div",18)(2,"div",19),t.YNc(3,lt,1,0,"input",20),t.TgZ(4,"div",21),t._uU(5),t.qZA()(),t.YNc(6,bt,3,4,"div",22),t.YNc(7,At,3,4,"div",22),t.qZA(),t._UZ(8,"hr"),t.qZA()),2&i){const e=f.$implicit,r=t.oxw();t.xp6(3),t.Q6J("ngIf",r.deleteMode),t.xp6(1),t.Q6J("searchedWord",r.searchText)("content",e.title)("classToApply","font-weight-bold")("setTitle","true")("routerLink",t.VKq(9,kt,e._id)),t.xp6(1),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf",r.isFromAmerica),t.xp6(1),t.Q6J("ngIf",!r.isFromAmerica)}}function wt(i,f){if(1&i&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.unreadMessages," ")}}function Pt(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.goToMessages())}),t._uU(1),t.YNc(2,wt,2,1,"span",26),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.messages," "),t.xp6(1),t.Q6J("ngIf",e.unreadMessages>0)}}function Et(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.goToStats())}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.stats," ")}}let It=(()=>{class i{constructor(e,r,l,b,T,O,E,U,I,j,z){this.storyService=e,this.auth=r,this.engagement=l,this.ts=b,this.router=T,this.messageService=O,this.profileService=E,this.classroomService=U,this.notificationService=I,this.recordingService=j,this.dialog=z,this.stories=[],this.toBeDeleted=[],this.userId="",this.messagesForNotifications=[],this.unreadMessages=0,this.isFromAmerica=!1,this.isEnrolled=!1,this.searchText="",this.storiesLoaded=!1}ngOnInit(){var e=this;return(0,g.Z)(function*(){const r=e.auth.getUserDetails();r?(e.stories=(yield(0,F.z)(e.storyService.getStoriesForLoggedInUser())).map(l=>(new y).fromJSON(l)),e.stories.sort((l,b)=>l.date>b.date?-1:1),e.storiesLoaded=!0,e.userId=r._id,e.deleteMode=!1,e.toBeDeleted=[],e.notificationService.getStudentNotifications(),e.classroomService.getClassroomOfStudent(e.userId).subscribe(l=>{e.isEnrolled=null!=l}),e.messageService.getMessagesForLoggedInUser().subscribe(l=>{e.messagesForNotifications=l,e.unreadMessages=e.messageService.getNumberOfUnreadMessages(e.messagesForNotifications)}),e.profileService.getForUser(e.userId).subscribe(l=>{let T=l.profile.country;e.isFromAmerica="United States of America"==T||"America"==T||"USA"==T||"United States"==T},l=>{e.router.navigateByUrl("/register-profile")})):e.auth.logout()})()}toggleDeleteMode(){if(this.deleteMode&&this.toBeDeleted.length>0)for(let e of this.toBeDeleted)this.engagement.addEventForLoggedInUser(M.tw["DELETE-STORY"],{_id:e}),this.recordingService.deleteStoryRecordingAudio(e).subscribe(r=>{}),this.recordingService.deleteStoryRecording(e).subscribe(r=>{}),this.storyService.deleteStory(e).subscribe(r=>{this.ngOnInit()});else this.deleteMode=!this.deleteMode||0!==this.toBeDeleted.length}toggleEditMode(){this.editMode=!this.editMode}toggleDelete(e){if(this.toBeDeleted.includes(e)){var r=this.toBeDeleted.indexOf(e);this.toBeDeleted.splice(r,1)}else this.toBeDeleted.push(e)}goToMessages(){this.router.navigateByUrl("/messages/"+this.userId)}goToStats(){this.router.navigateByUrl("/stats-dashboard/"+this.userId)}createNewStory(){var e=this;this.dialogRef=this.dialog.open(u.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var r=(0,g.Z)(function*(l){if(e.dialogRef=void 0,l)if(l[0]){let b="connemara";l[1]==e.ts.l.munster&&(b="kerry"),l[1]==e.ts.l.ulster&&(b="donegal"),e.storyService.saveStory(e.auth.getUserDetails()._id,l[0],new Date,b,"",e.auth.getUserDetails().username,!1)}else alert(e.ts.l.title_required)});return function(l){return r.apply(this,arguments)}}())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.N),t.Y36(C.$),t.Y36(k.M),t.Y36(h.D),t.Y36(a.F0),t.Y36(S.e),t.Y36(P.H),t.Y36(A.u),t.Y36(N.g),t.Y36(H.s),t.Y36(o.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-book-contents"]],features:[t._Bn([L])],decls:27,vars:17,consts:[[1,"bookContainer"],[1,"contentsContainer"],[1,"bookContentsTitle"],[1,"contentsTitleContainer"],[1,"contentsLinkTitle"],[1,"contentsDateTitle"],["role","main"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"contentsLinkContainer"],["class","newStoryMessage",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"contentsBtnsContainer"],[1,"btn","deleteBtn",3,"click"],["src","assets/img/trash.ico",1,"trashImg"],["class","btn messagesBtn",3,"click",4,"ngIf"],["data-cy","create-story",1,"btn","newStoryBtn",3,"click"],[1,"newStoryMessage"],[1,"contentSection"],[1,"contentsLink"],["type","checkbox","class","deleteCheckbox",3,"click",4,"ngIf"],["appHighlight","",3,"searchedWord","content","classToApply","setTitle","routerLink"],["class","contentsDate",4,"ngIf"],["type","checkbox",1,"deleteCheckbox",3,"click"],[1,"contentsDate"],[1,"btn","messagesBtn",3,"click"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",6)(10,"div")(11,"div",7)(12,"input",8),t.NdJ("ngModelChange",function(b){return r.searchText=b}),t.qZA()()()(),t.TgZ(13,"div",9)(14,"div"),t._uU(15),t.qZA(),t.YNc(16,D,2,0,"div",10),t.YNc(17,K,2,1,"div",10),t.YNc(18,Ot,9,11,"div",11),t.ALo(19,"appFilter"),t.qZA(),t.TgZ(20,"div",12)(21,"button",13),t.NdJ("click",function(){return r.toggleDeleteMode()}),t._UZ(22,"img",14),t.qZA(),t.YNc(23,Pt,3,2,"button",15),t.YNc(24,Et,2,1,"button",15),t.TgZ(25,"button",16),t.NdJ("click",function(){return r.createNewStory()}),t._uU(26),t.qZA()()()()),2&e&&(t.xp6(3),t.Oqu(r.ts.l.my_stories),t.xp6(3),t.Oqu(r.ts.l.title),t.xp6(2),t.Oqu(r.ts.l.last_updated),t.xp6(4),t.s9C("placeholder",r.ts.l.search_story_title_or_content),t.Q6J("ngModel",r.searchText),t.xp6(3),t.hij(" ",r.ts.l.loading," "),t.xp6(1),t.Q6J("ngIf",!r.storiesLoaded),t.xp6(1),t.Q6J("ngIf",0===r.stories.length&&r.storiesLoaded),t.xp6(1),t.Q6J("ngForOf",t.xi3(19,14,r.stories,r.searchText)),t.xp6(3),t.ekj("deleteModeBtn",r.deleteMode),t.xp6(2),t.Q6J("ngIf",r.isEnrolled),t.xp6(1),t.Q6J("ngIf",r.stories.length>0),t.xp6(2),t.hij("",r.ts.l.new_story," "))},dependencies:[d.sg,d.O5,a.rH,Z.Fj,Z.JJ,Z.On,W.P,d.uU,L],styles:[".bookContainer[_ngcontent-%COMP%]{height:auto;width:80%;background:url(https://www.abair.ie/scealai/assets/img/paperBg.jpg) no-repeat center fixed;margin-left:10%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.contentsContainer[_ngcontent-%COMP%]{padding:20px}.bookContentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);padding-left:5%;padding-right:5%;display:inline-block;font-size:18pt}.contentsLinkContainer[_ngcontent-%COMP%]{height:500px;overflow:auto;padding:10px;background-color:#f7f2e7;box-shadow:inset 0 0 12px #00000080;border-radius:5px}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.contentsDate[_ngcontent-%COMP%]{color:var(--dark-text)}.contentsBtnsContainer[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:1rem}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;padding:2px 7px 7px;height:38px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:24px}.messagesBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;border-radius:5px;display:flex}.messagesBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.newStoryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.newStoryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}@media only screen and (max-width: 700px){.contentsContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%}.contentsLinkContainer[_ngcontent-%COMP%]{height:270px;padding-top:10px}.contentsLinkTitle[_ngcontent-%COMP%], .contentsDateTitle[_ngcontent-%COMP%]{font-size:12pt}.optionsPopupBtn[_ngcontent-%COMP%]{padding:2px 5px 5px;margin:0 4px 0 0;height:30px;font-size:12pt}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:0 3px 3px;height:30px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:20px}}.newStoryMessage[_ngcontent-%COMP%]{color:#a79d88;width:80%;margin-left:10%;margin-top:30px}@media only screen and (min-width: 700px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}@media only screen and (min-width: 1400px) and (min-height: 800px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}"]}),i})();var V=n(7579),Ct=n(1884),Bt=n(9971),ut=n.n(Bt),Dt=n(5439),Ft=n.n(Dt),Zt=n(1094),Rt=n.n(Zt),et=n(4186),Nt=n(5592);function R(i){return Object.assign({},i)}class ht{constructor(f,e,r){this.errorsWithSentences=[],this.http=e,this.auth=r,this.grammarCheckers=f,this.cacheMap=new Map;for(const l of f)this.cacheMap.set(l.name,{})}check$(f){const e=new V.x;return this.check(f,e),e}check(f,e){var r=this;return(0,g.Z)(function*(){const b=function jt(i,f){const e=[];let r=0;for(let l of i)if(l){const T=r+f.slice(r).indexOf(l);e.push({sentence:l,offset:T}),r=T+l.length}return e}(yield(0,F.z)(r.http.post(et.Z.baseurl+"nlp/sentenceTokenize",{text:f})),f);r.errorsWithSentences=[];const T=(yield Promise.all(r.grammarCheckers.map(function(){var O=(0,g.Z)(function*(E){return yield Promise.all(b.map(function(){var U=(0,g.Z)(function*(I,j){const z=I.sentence,q=I.offset;function at(dt){return dt.fromX+=q,dt.toX+=q,e.next(dt),dt}if(z in r.cacheMap.get(E.name)){let dt=r.cacheMap.get(E.name)[z].map(R).map(at);return r.errorsWithSentences[j]=r.errorsWithSentences[j]?[r.errorsWithSentences[j][0].concat(dt),z,j]:[dt,z,j],dt}const ct=yield E.check(z,r.auth.getToken());r.cacheMap.get(E.name)[z]=ct;const or=ct.map(R).map(at);return r.errorsWithSentences[j]=r.errorsWithSentences[j]?[r.errorsWithSentences[j][0].concat(ct),z,j]:[ct,z,j],or});return function(I,j){return U.apply(this,arguments)}}()))});return function(E){return O.apply(this,arguments)}}()))).flat().filter(O=>O.length);return e.complete(),r.countNewErrors(T.flat()),T})()}countNewErrors(f){var e=this;return(0,g.Z)(function*(){e.previousErrorTags=f,e.countNewErrors=e._countNewErrorsAfterFirstTime})()}_countNewErrorsAfterFirstTime(f){return(0,g.Z)(function*(){const r=function Lt(i,f){return function T(O,E){return E.filter(U=>!O.includes(U)||(O[O.indexOf(U)]=null,!1)).map(U=>JSON.parse(U)[1])}(b(i),b(f));function b(O){return O.map(E=>JSON.stringify([E.errorText,E.type]))}}(e.previousErrorTags,f),b={countsByType:(i=r,i.reduce(function e(r,l){return r[l]||(r[l]=0),r[l]+=1,r},{}))};var i;e.http.post(et.Z.baseurl+"gramadoir/userGrammarCounts/",b).subscribe(),e.previousErrorTags=f})()}saveErrorsWithSentences(f){var e=this;return(0,g.Z)(function*(){if(!e.errorsWithSentences)return;const r={Authorization:"Bearer "+e.auth.getToken()};e.http.post(et.Z.baseurl+"gramadoir/insert/",{storyId:f,sentences:e.errorsWithSentences},{headers:r}).subscribe()})()}}const B=ut().import("parchment"),nt=ut().import("ui/tooltip");ut().register(new B.Attributor.Attribute("highlight-tag","highlight-tag",{scope:B.Scope.INLINE})),ut().register(new B.Attributor.Attribute("highlight-tag-type","highlight-tag-type",{scope:B.Scope.INLINE}));class rt{constructor(f,e,r){this.mostRecentHoveredMessage="",this.quillEditor=f,this.ts=e,this.engagement=r}show(f){f&&(f.forEach(r=>{this.quillEditor.formatText(r.fromX,r.toX-r.fromX,{"highlight-tag":JSON.stringify(r),"highlight-tag-type":r.type,"background-color":r.color},"api")}),document.querySelectorAll("[highlight-tag]").forEach(r=>{const l=r.getAttribute("highlight-tag");if(!l)return;const b=JSON.parse(l),T=new nt(this.quillEditor);T.root.classList.add("custom-tooltip"),r.addEventListener("mouseover",()=>{this.mouseOverTagElem(b,r,T)}),r.addEventListener("mouseout",()=>{r.removeAttribute("data-selected"),T.hide()})}))}hide(f){f.forEach(e=>{this.quillEditor.formatText(e.fromX,e.toX-e.fromX,{"highlight-tag":null,"highlight-tag-type":null,"background-color":"","data-selected":null})}),document.querySelectorAll(".custom-tooltip").forEach(e=>e.remove())}hideAll(){document.querySelectorAll("[data-selected]").forEach(e=>e.removeAttribute("data-selected")),this.quillEditor.formatText(0,this.quillEditor.getLength(),{"highlight-tag":null,"highlight-tag-type":null,"background-color":"","data-selected":null}),document.querySelectorAll(".custom-tooltip").forEach(e=>e.remove())}mouseOverTagElem(f,e,r){e.setAttribute("data-selected","");const l=this.quillEditor.root.scrollTop;this.quillEditor.root.scroll({top:+l+1}),this.quillEditor.root.scroll({top:+l}),r.root.innerHTML="en"==this.ts.l.iso_code?f.messageEN:f.messageGA,this.mostRecentHoveredMessage="en"==this.ts.l.iso_code?f.messageEN:f.messageGA,r.show(),r.position(this.quillEditor.getBounds(f.fromX,f.toX-f.fromX));let b=r.root.getAttribute("style")||"";b+="font-size: medium; z-index: 10000001;",r.root.setAttribute("style",b);const T=r.root.offsetLeft+r.root.offsetWidth-this.quillEditor.root.offsetWidth;r.root.style.left=T>0?r.root.offsetLeft-T-5+"px":r.root.style.left,r.root.style.left=r.root.offsetLeft<0?r.root.offsetLeft-r.root.offsetLeft+5+"px":r.root.style.left,this.engagement.mouseOverGrammarSuggestionEvent(f)}getGrammarMessage(f){return f?this.mostRecentHoveredMessage?this.mostRecentHoveredMessage:this.ts.message("hover_over_a_highlighted_word_for_a_grammar_suggestion"):this.ts.message("checking_grammar")}}var Y=n(8043);const ft={name:"Leathan_Caol",check:function Ht(i){return vt.apply(this,arguments)}},Q=["a","o","u","\xe1","\xf3","\xfa","A","O","U","\xc1","\xd3","\xda"],J=["e","i","\xe9","\xed","E","I","\xc9","\xcd"],gt=["b","c","d","f","g","h","l","m","n","p","r","s","t","v","z","B","C","D","F","G","H","L","M","N","P","R","S","T","V","Z"],mt=["aniar","an\xedos","ar\xe9ir","ar\xeds","ar\xedst","anseo","ansin","ansi\xfad","c\xe9n","den","faoina","ina","inar","insa","lena","lenar"];function vt(){return(vt=(0,g.Z)(function*(i){return new Promise((f,e)=>{const r=ot(i);let l=[];for(const b of r)l.push({errorText:i,messageGA:Y.U["LEATHAN-CAOL"].messageGA,messageEN:Y.U["LEATHAN-CAOL"].messageEN,context:i,nameEN:Y.U["LEATHAN-CAOL"].nameEN,nameGA:Y.U["LEATHAN-CAOL"].nameGA,color:Y.U["LEATHAN-CAOL"].color,fromX:b.first,toX:b.first+1,type:"LEATHAN-CAOL"}),l.push({errorText:i,messageGA:Y.U["LEATHAN-CAOL"].messageGA,messageEN:Y.U["LEATHAN-CAOL"].messageEN,context:i,nameEN:Y.U["LEATHAN-CAOL"].nameEN,nameGA:Y.U["LEATHAN-CAOL"].nameGA,color:Y.U["LEATHAN-CAOL"].color,fromX:b.second,toX:b.second+1,type:"LEATHAN-CAOL"});f(l)})})).apply(this,arguments)}function ot(i){const f=function St(i){let f=[];for(let e of mt){let l=Tt(i.toLowerCase(),e);for(let b of l)f[b]=e.length}return f}(i),e=[];for(let r=0;r<i.length-1;r++)if(f[r]>0&&(r+=f[r]),yt(i[r])&&Xt(i[r+1])){let l=r++;for(;Xt(i[r]);)r++;if(yt(i[r])&&!he(i[l],i[r])){const b=$(i[l]);e.push({broadFirst:b,first:l,second:r})}}return e}function Tt(i,f){var e=[];let r=new RegExp("[\\s.!?\\-]"+f+"[\\s.!?\\-]","g"),l=r.exec(i);for(;l;){r=new RegExp(f);let b=r.exec(l[0]);e.push(l.index+b.index),i=Gt(i,l.index,"#".repeat(5)),r=new RegExp("[\\s.!?\\-]"+f+"[\\s.!?\\-]","g"),l=r.exec(i)}return e}function Gt(i,f,e){return i.substr(0,f)+e+i.substr(f+e.length)}function yt(i){return Q.includes(i)||J.includes(i)}function $(i){return Q.includes(i)}function Xt(i){return gt.includes(i)}function he(i,f){return Q.includes(i)&&Q.includes(f)||J.includes(i)&&J.includes(f)}const fe={name:"AnGramadoir",check:function ge(i,f){return Jt.apply(this,arguments)}};function Jt(){return Jt=(0,g.Z)(function*(i,f){return new Promise(function(){var e=(0,g.Z)(function*(r,l){let b=[];try{b=yield te(`${et.Z.baseurl}gramadoir/callAnGramadoir/${encodeURIComponent(i)}`,f)}catch{try{b=yield te(`https://cadhan.com/api/gramadoir/1.0/en/${i}`)}catch{l()}}r(b.map(O=>{const E=me(O.ruleId),U=Y.U[E];return{errorText:O.errortext,messageGA:U.messageGA.replace("#",O.errortext),messageEN:U.messageEN.replace("#",O.errortext),context:O.context,nameEN:U.nameEN,nameGA:U.nameGA,color:U.color,fromX:+O.fromx,toX:+O.tox+1,type:E}}))});return function(r,l){return e.apply(this,arguments)}}())}),Jt.apply(this,arguments)}function te(i,f){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,g.Z)(function*(i,f){let e={};f&&(e={Authorization:"Bearer "+f});const r=yield fetch(i,{headers:e,method:"POST"});if(r.ok)return yield r.json();throw new Error(r.statusText)})).apply(this,arguments)}function me(i){if(!i)return"";const f=i.replace(/[A-Za-z:]+\//,"");if(!f)return"";const e=/[A-Z]+/.exec(f);return e&&e[0]?e[0]:""}const ve={name:"RelativeClause",check:function ye(i){return zt.apply(this,arguments)}},_e="https://phoneticsrv3.lcs.tcd.ie/gramsrv/api/grammar";function zt(){return zt=(0,g.Z)(function*(i){return new Promise(function(){var f=(0,g.Z)(function*(e,r){e((yield xe(i)).map(T=>({errorText:i.slice(T.fromx,T.tox),messageGA:T.msg,messageEN:T.msg,context:T.context,nameEN:Y.U["RELATIVE-CLAUSE"].nameEN,nameGA:Y.U["RELATIVE-CLAUSE"].nameGA,color:Y.U["RELATIVE-CLAUSE"].color,fromX:T.fromx,toX:T.tox,type:"RELATIVE-CLAUSE"})))});return function(e,r){return f.apply(this,arguments)}}())}),zt.apply(this,arguments)}function xe(i){return qt.apply(this,arguments)}function qt(){return(qt=(0,g.Z)(function*(i){const f=yield fetch(_e,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:be(i.replace(/\n/g," "))});return f.ok?yield f.json():[]})).apply(this,arguments)}function be(i){return`text=${encodeURIComponent(i)}&check=relclause`}var ee=n(529),pt=n(8605),ne=n(3238),Qt=n(2687),we=n(445),xt=n(1281),re=n(9521),Ce=n(3353),Se=n(4968),Te=n(6451),_t=n(9300),oe=n(4004),ie=n(9718),X=n(2722),se=n(5698),ae=n(8675),Me=n(8372),tt=n(7340);const ce=["*"],Ae=["content"];function ke(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l._onBackdropClicked())}),t.qZA()}if(2&i){const e=t.oxw();t.ekj("mat-drawer-shown",e._isShowingBackdrop())}}function Oe(i,f){1&i&&(t.TgZ(0,"mat-drawer-content"),t.Hsn(1,2),t.qZA())}const Pe=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Ee=["mat-drawer","mat-drawer-content","*"],Ie={transformDrawer:(0,tt.X$)("transform",[(0,tt.SB)("open, open-instant",(0,tt.oB)({transform:"none",visibility:"visible"})),(0,tt.SB)("void",(0,tt.oB)({"box-shadow":"none",visibility:"hidden"})),(0,tt.eR)("void => open-instant",(0,tt.jt)("0ms")),(0,tt.eR)("void <=> open, open-instant => void",(0,tt.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Be=new t.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function De(){return!1}}),de=new t.OlP("MAT_DRAWER_CONTAINER");let Wt=(()=>{class i extends pt.PQ{constructor(e,r,l,b,T){super(l,b,T),this._changeDetectorRef=e,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.sBO),t.Y36((0,t.Gpc)(()=>Kt)),t.Y36(t.SBq),t.Y36(pt.mF),t.Y36(t.R0b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,r){2&e&&t.Udp("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[t._Bn([{provide:pt.PQ,useExisting:i}]),t.qOj],ngContentSelectors:ce,decls:1,vars:0,template:function(e,r){1&e&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),i})(),Vt=(()=>{class i{constructor(e,r,l,b,T,O,E,U){this._elementRef=e,this._focusTrapFactory=r,this._focusMonitor=l,this._platform=b,this._ngZone=T,this._interactivityChecker=O,this._doc=E,this._container=U,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new V.x,this._animationEnd=new V.x,this._animationState="void",this.openedChange=new t.vpe(!0),this._openedStream=this.openedChange.pipe((0,_t.h)(I=>I),(0,oe.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,_t.h)(I=>I.fromState!==I.toState&&0===I.toState.indexOf("open")),(0,ie.h)(void 0)),this._closedStream=this.openedChange.pipe((0,_t.h)(I=>!I),(0,oe.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,_t.h)(I=>I.fromState!==I.toState&&"void"===I.toState),(0,ie.h)(void 0)),this._destroyed=new V.x,this.onPositionChanged=new t.vpe,this._modeChanged=new V.x,this.openedChange.subscribe(I=>{I?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,Se.R)(this._elementRef.nativeElement,"keydown").pipe((0,_t.h)(I=>I.keyCode===re.hY&&!this.disableClose&&!(0,re.Vb)(I)),(0,X.R)(this._destroyed)).subscribe(I=>this._ngZone.run(()=>{this.close(),I.stopPropagation(),I.preventDefault()}))}),this._animationEnd.pipe((0,Ct.x)((I,j)=>I.fromState===j.fromState&&I.toState===j.toState)).subscribe(I=>{const{fromState:j,toState:z}=I;(0===z.indexOf("open")&&"void"===j||"void"===z&&0===j.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=(0,xt.Ig)(e)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=(0,xt.Ig)(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle((0,xt.Ig)(e))}_forceFocus(e,r){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const l=()=>{e.removeEventListener("blur",l),e.removeEventListener("mousedown",l),e.removeAttribute("tabindex")};e.addEventListener("blur",l),e.addEventListener("mousedown",l)})),e.focus(r)}_focusByCssSelector(e,r){let l=this._elementRef.nativeElement.querySelector(e);l&&this._forceFocus(l,r)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,r){e&&r&&(this._openedVia=r);const l=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),l}_setOpen(e,r,l){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(l)),this._updateFocusTrapState(),new Promise(b=>{this.openedChange.pipe((0,se.q)(1)).subscribe(T=>b(T?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(e){const r=this._elementRef.nativeElement,l=r.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),l.insertBefore(this._anchor,r)),l.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(Qt.qV),t.Y36(Qt.tE),t.Y36(Ce.t4),t.Y36(t.R0b),t.Y36(Qt.ic),t.Y36(d.K0,8),t.Y36(de,8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mat-drawer"]],viewQuery:function(e,r){if(1&e&&t.Gf(Ae,5),2&e){let l;t.iGM(l=t.CRH())&&(r._content=l.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,r){1&e&&t.WFA("@transform.start",function(b){return r._animationStarted.next(b)})("@transform.done",function(b){return r._animationEnd.next(b)}),2&e&&(t.uIk("align",null),t.d8E("@transform",r._animationState),t.ekj("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:ce,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,r){1&e&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA())},dependencies:[pt.PQ],encapsulation:2,data:{animation:[Ie.transformDrawer]},changeDetection:0}),i})(),Kt=(()=>{class i{constructor(e,r,l,b,T,O=!1,E){this._dir=e,this._element=r,this._ngZone=l,this._changeDetectorRef=b,this._animationMode=E,this._drawers=new t.n_E,this.backdropClick=new t.vpe,this._destroyed=new V.x,this._doCheckSubject=new V.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new V.x,e&&e.change.pipe((0,X.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),T.change().pipe((0,X.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=O}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=(0,xt.Ig)(e)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(e){this._backdropOverride=null==e?null:(0,xt.Ig)(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,ae.O)(this._allDrawers),(0,X.R)(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,ae.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Me.b)(10),(0,X.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const l=this._left._getWidth();e+=l,r-=l}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const l=this._right._getWidth();r+=l,e-=l}e=e||null,r=r||null,(e!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:e,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe((0,_t.h)(r=>r.fromState!==r.toState),(0,X.R)(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe((0,X.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe((0,X.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,se.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe((0,X.R)((0,Te.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const r=this._element.nativeElement.classList,l="mat-drawer-container-has-open";e?r.add(l):r.remove(l)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(we.Is,8),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(pt.rL),t.Y36(Be),t.Y36(t.QbO,8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["mat-drawer-container"]],contentQueries:function(e,r,l){if(1&e&&(t.Suo(l,Wt,5),t.Suo(l,Vt,5)),2&e){let b;t.iGM(b=t.CRH())&&(r._content=b.first),t.iGM(b=t.CRH())&&(r._allDrawers=b)}},viewQuery:function(e,r){if(1&e&&t.Gf(Wt,5),2&e){let l;t.iGM(l=t.CRH())&&(r._userContent=l.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,r){2&e&&t.ekj("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[t._Bn([{provide:de,useExisting:i}])],ngContentSelectors:Ee,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,r){1&e&&(t.F$t(Pe),t.YNc(0,ke,1,2,"div",0),t.Hsn(1),t.Hsn(2,1),t.YNc(3,Oe,2,0,"mat-drawer-content",1)),2&e&&(t.Q6J("ngIf",r.hasBackdrop),t.xp6(3),t.Q6J("ngIf",!r._content))},dependencies:[d.O5,Wt],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),i})(),Fe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,ne.BQ,pt.ZD,pt.ZD,ne.BQ]}),i})();var Mt=n(7392),le=n(5802),ue=n(4859);function Ze(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(){const b=t.CHM(e).$implicit,T=t.oxw();return t.KtG(T.setStory(b))}),t.TgZ(1,"div",4)(2,"div",5)(3,"div"),t._uU(4),t.qZA()(),t.TgZ(5,"div",6),t._uU(6),t.ALo(7,"date"),t.qZA()(),t._UZ(8,"hr"),t.qZA()}if(2&i){const e=f.$implicit;t.xp6(1),t.uIk("id",e._id),t.xp6(3),t.Oqu(null==e?null:e.title),t.xp6(2),t.hij(" ",t.xi3(7,3,e.lastUpdated,"d/M/yy")," ")}}let Re=(()=>{class i{constructor(e,r,l,b){this.ts=e,this.auth=r,this.storyService=l,this.dialog=b,this.stories=[],this.lastClickedStoryId="",this.storyEmitter=new t.vpe,this.storiesLoadedEmitter=new t.vpe}ngOnInit(){this.getStories()}getStories(){var e=this;return(0,g.Z)(function*(){e.stories=(yield(0,F.z)(e.storyService.getStoriesForLoggedInUser())).map(r=>(new y).fromJSON(r)),e.stories.sort((r,l)=>r.date>l.date?-1:1),e.storyEmitter.emit(e.stories[0]),e.storiesLoadedEmitter.emit(!0)})()}setStory(e){null==e.htmlText&&(e.htmlText=e.text),this.storyEmitter.emit(e);let r=e._id,l=document.getElementById(r);l&&(this.lastClickedStoryId&&document.getElementById(this.lastClickedStoryId).classList.remove("clickedresultCard"),this.lastClickedStoryId=r,l.classList.add("clickedresultCard"))}createNewStory(){var e=this;this.dialogRef=this.dialog.open(u.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var r=(0,g.Z)(function*(l){if(e.dialogRef=void 0,l)if(l[0]){let b="connemara";l[1]==e.ts.l.munster&&(b="kerry"),l[1]==e.ts.l.ulster&&(b="donegal"),e.storyService.saveStory(e.auth.getUserDetails()._id,l[0],new Date,b,"",e.auth.getUserDetails().username,!1).subscribe({next:()=>{e.getStories()},error:()=>{alert("Not able to create a new story")}})}else alert(e.ts.l.title_required)});return function(l){return r.apply(this,arguments)}}())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.D),t.Y36(C.$),t.Y36(_.N),t.Y36(o.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-story-drawer"]],outputs:{storyEmitter:"storyEmitter",storiesLoadedEmitter:"storiesLoadedEmitter"},decls:5,vars:1,consts:[[1,"storyList"],[3,"click",4,"ngFor","ngForOf"],["mat-fab","",1,"newStoryButton",3,"click"],[3,"click"],[1,"contentSection"],[1,"contentsLink"],[1,"contentsDate"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ze,9,6,"div",1),t.qZA(),t.TgZ(2,"button",2),t.NdJ("click",function(){return r.createNewStory()}),t.TgZ(3,"mat-icon"),t._uU(4,"add"),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngForOf",r.stories))},dependencies:[d.sg,ue.lW,Mt.Hw,d.uU],styles:[".storyList[_ngcontent-%COMP%]{height:90%;overflow-y:scroll}.newStoryButton[_ngcontent-%COMP%]{float:right}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%]{background-color:var(--scealai-green)}.contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;text-decoration:none;padding-right:20px}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.contentsDate[_ngcontent-%COMP%]{padding-right:20px}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:2px;font-weight:bolder;border-radius:10px}"]}),i})();var $t=n(1481);function Ne(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",10)(1,"label",11),t._uU(2),t.qZA(),t.TgZ(3,"input",12),t.NdJ("ngModelChange",function(l){t.CHM(e);const b=t.oxw();return t.KtG(b.wordLookedUp=l)})("keyup.enter",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.lookupWord())})("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.clearDictInput())}),t.qZA(),t.TgZ(4,"button",13),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.lookupWord())}),t._UZ(5,"i",14),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.hij("",e.ts.l.search,":"),t.xp6(1),t.Q6J("ngModel",e.wordLookedUp)}}function Le(i,f){if(1&i&&t._UZ(0,"iframe",15),2&i){const e=t.oxw();t.Q6J("src",e.defaultDictIframeText,t.uOi)}}function Ue(i,f){1&i&&(t.TgZ(0,"div",16)(1,"ul")(2,"li")(3,"a",17),t._uU(4,"potafocal.com"),t.qZA()(),t.TgZ(5,"li")(6,"a",18),t._uU(7,"focloir.ie"),t.qZA()()()())}let je=(()=>{class i{constructor(e,r,l,b){this.ts=e,this.sanitizer=r,this.http=l,this.engagement=b,this.wordLookedUp="",this.selectTeanglann=!0,this.selectExternalLinks=!1,this.defaultDictIframeText=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/html;charset=utf-8,"+this.ts.l.search_for_words_in_dictionary),this.closeDictionaryEmitter=new t.vpe}ngOnInit(){}lookupWord(){var e=this;return(0,g.Z)(function*(){if(e.wordLookedUp){const r=e.http.post(et.Z.baseurl+"proxy/",{url:`https://www.teanglann.ie/en/fgb/${e.wordLookedUp}`}),l=yield(0,F.z)(r),b=(new DOMParser).parseFromString(l,"text/html");b.querySelectorAll(".ex > .head > a").forEach(I=>I.href=`https://www.teanglann.ie${I.href.slice(I.href.lastIndexOf("/en/"))}`),b.querySelector(".moar")?.remove();const E=b.querySelector(".listings");E.style.cssText+="margin-right: 0px; padding: 10px;",document.getElementById("dictiframe").src='data:text/html;charset=utf-8,<link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/template.css"><link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/fgb.css">'+E.outerHTML,e.engagement.addEventForLoggedInUser(M.tw["USE-DICTIONARY"],null,e.wordLookedUp)}else alert(e.ts.l.enter_a_word_to_lookup)})()}clearDictInput(){this.wordLookedUp&&(this.wordLookedUp="")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.D),t.Y36($t.H7),t.Y36(ee.eN),t.Y36(k.M))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-dictionary-drawer"]],outputs:{closeDictionaryEmitter:"closeDictionaryEmitter"},decls:16,vars:5,consts:[[1,"dictionaryContainer"],[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"dictionarySubHeader"],[1,"dictionaryName",3,"click"],["class","dictionaryInput",4,"ngIf"],[2,"height","100%"],["class","dictionaryIframe","id","dictiframe",3,"src",4,"ngIf"],["class","dictionaryIframe","style","text-align: left",4,"ngIf"],[1,"dictionaryInput"],["for","dictlookup"],["type","text","id","dictlookup","name","dictlookup","autofocus","",3,"ngModel","ngModelChange","keyup.enter","click"],[1,"searchDictionaryBtn",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["id","dictiframe",1,"dictionaryIframe",3,"src"],[1,"dictionaryIframe",2,"text-align","left"],["href","http://www.potafocal.com/beo/","target","_blank"],["href","https://www.focloir.ie","target","_blank"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3),t.qZA(),t.TgZ(4,"div",2),t.NdJ("click",function(){return r.closeDictionaryEmitter.next(!0)}),t._UZ(5,"i",3),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5),t.NdJ("click",function(){return r.selectTeanglann=!0,r.selectExternalLinks=!1}),t._uU(8," Teanglann "),t.qZA(),t._uU(9," | "),t.TgZ(10,"div",5),t.NdJ("click",function(){return r.selectExternalLinks=!0,r.selectTeanglann=!1}),t._uU(11),t.qZA()(),t.YNc(12,Ne,6,2,"div",6),t.TgZ(13,"div",7),t.YNc(14,Le,1,1,"iframe",8),t.qZA(),t.YNc(15,Ue,8,0,"div",9),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",r.ts.l.dictionary," "),t.xp6(8),t.hij(" ",r.ts.l.external_links," "),t.xp6(1),t.Q6J("ngIf",r.selectTeanglann),t.xp6(2),t.Q6J("ngIf",r.selectTeanglann),t.xp6(1),t.Q6J("ngIf",r.selectExternalLinks))},dependencies:[d.O5,Z.Fj,Z.JJ,Z.On],styles:[".dictionaryContainer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:wrap}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.dictionarySubHeader[_ngcontent-%COMP%]{padding-left:10px;padding-bottom:5px;background-color:var(--scealai-green);color:#fff;display:flex}.dictionaryName[_ngcontent-%COMP%]{background-color:var(--scealai-green);font-size:12px;color:#fff;padding-right:5px;padding-top:5px}.dictionaryName[_ngcontent-%COMP%]:hover{color:var(--scealai-light-green);text-decoration:none;cursor:pointer}.dictionaryInput[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;display:flex;padding-bottom:10px;padding-left:10px;gap:1rem}.searchDictionaryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.searchDictionaryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.dictionaryIframe[_ngcontent-%COMP%]{width:100%;border-radius:0 0 5px 5px}"]}),i})();function He(i,f){1&i&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function Ge(i,f){if(1&i&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Oqu(e.ts.l.made_using_prompts)}}function Je(i,f){if(1&i&&(t.TgZ(0,"div",28),t._uU(1),t._UZ(2,"i",29),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.saved," ")}}function Ye(i,f){if(1&i&&(t.TgZ(0,"div",28),t._uU(1),t._UZ(2,"i",30),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.saving," ")}}function ze(i,f){if(1&i&&(t.TgZ(0,"div",21)(1,"div",22),t._uU(2),t.YNc(3,He,2,0,"span",23),t.YNc(4,Ge,2,1,"span",24),t.qZA(),t.TgZ(5,"div",25),t.YNc(6,Je,3,1,"div",26),t.YNc(7,Ye,3,1,"div",26),t.qZA()()),2&i){const e=t.oxw();let r;t.xp6(1),t.Q6J("ngStyle",e.titleStyle()),t.xp6(1),t.hij(" ",null!==(r=null==e.story?null:e.story.title)&&void 0!==r?r:"..."," "),t.xp6(1),t.Q6J("ngIf",!e.storySaved),t.xp6(1),t.Q6J("ngIf",null==e.story?null:e.story.createdWithPrompts),t.xp6(2),t.Q6J("ngIf",e.storySaved),t.xp6(1),t.Q6J("ngIf",!e.storySaved)}}function qe(i,f){1&i&&t._UZ(0,"i",39)}function Qe(i,f){1&i&&t._UZ(0,"i",40)}function We(i,f){1&i&&(t.TgZ(0,"span",44),t._uU(1,"speech_to_text"),t.qZA())}function Ve(i,f){1&i&&(t.TgZ(0,"button",45),t._UZ(1,"i",46),t.qZA())}function Ke(i,f){1&i&&(t.TgZ(0,"div"),t._UZ(1,"div",47),t.qZA())}const $e=function(i){return{disableDiv:i}};function Xe(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",41),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return l.dontToggle=!0,t.KtG(l.speakStory())}),t._uU(1),t.YNc(2,We,2,0,"span",42),t.YNc(3,Ve,2,0,"button",43),t.YNc(4,Ke,2,0,"div",23),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(5,$e,e.isTranscribing)),t.xp6(1),t.hij(" ",e.ts.l.speak," "),t.xp6(1),t.Q6J("ngIf",!e.isRecording),t.xp6(1),t.Q6J("ngIf",e.isRecording&&!e.isTranscribing),t.xp6(1),t.Q6J("ngIf",e.isTranscribing)}}function tn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",48),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.dontToggle=!0)}),t.TgZ(1,"button",49),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.downloadStory())}),t._uU(2),t._UZ(3,"i",50),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.s9C("href",e.downloadStoryUrl()),t.xp6(1),t.hij(" ",e.ts.l.download," ")}}function en(i,f){1&i&&(t.TgZ(0,"span",54),t._uU(1,"1"),t.qZA())}function nn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",51),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return l.dontToggle=!0,t.KtG(l.getFeedback())}),t._uU(1),t._UZ(2,"i",52),t.YNc(3,en,2,0,"span",53),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.feedback," "),t.xp6(2),t.Q6J("ngIf",e.hasNewFeedback())}}function rn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",51),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2),b=t.MAs(24);return l.dontToggle=!0,l.dictionaryVisible=!l.dictionaryVisible,t.KtG(b.toggle())}),t._uU(1),t._UZ(2,"i",55),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.dictionary," ")}}function on(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",51),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return l.dontToggle=!0,l.goToSynthesis(),t.KtG(l.drawer2.toggle())}),t._uU(1),t._UZ(2,"i",56),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.audio_check," ")}}function sn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",51),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2),b=t.MAs(12);return l.dontToggle=!0,l.toggleGrammarTags(),t.KtG(b.toggle())}),t._uU(1),t._UZ(2,"i",57),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.grammar_errors," ")}}function an(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",58),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return l.dontToggle=!0,t.KtG(l.goToRecording())}),t._uU(1),t._UZ(2,"i",59),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("hidden",e.story.text&&0===e.story.text.length),t.xp6(1),t.hij(" ",e.ts.l.recordings," ")}}function cn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",31),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.toggleOptions())}),t.TgZ(1,"div",32),t.YNc(2,qe,1,0,"i",33),t.YNc(3,Qe,1,0,"i",34),t.qZA(),t.YNc(4,Xe,5,7,"div",35),t.YNc(5,tn,4,2,"div",36),t.YNc(6,nn,4,2,"div",37),t.YNc(7,rn,3,1,"div",37),t.YNc(8,on,3,1,"div",37),t.YNc(9,sn,3,1,"div",37),t.YNc(10,an,3,2,"div",38),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions),t.xp6(1),t.Q6J("ngIf",e.showOptions)}}function dn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",60,61)(2,"mat-icon",62),t.NdJ("click",function(){t.CHM(e),t.oxw();const l=t.MAs(4);return t.KtG(l.toggle())}),t._uU(3,"menu"),t.qZA(),t.TgZ(4,"quill-editor",63),t.NdJ("ngModelChange",function(l){t.CHM(e);const b=t.oxw();return t.KtG(b.story.htmlText=l)})("onContentChanged",function(l){t.CHM(e);const b=t.oxw();return t.KtG(b.onContentChanged(l))})("onEditorCreated",function(l){t.CHM(e);const b=t.oxw();return t.KtG(b.onEditorCreated(l))}),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("ngStyle",e.quillEditorStyle),t.xp6(4),t.Q6J("modules",e.quillToolbar)("preserveWhitespace",!0)("debounceTime",1500)("ngModel",e.story.htmlText)}}function ln(i,f){1&i&&(t.TgZ(0,"div",64),t._uU(1," Click on the '+' button below to create your first story! "),t.qZA())}const un=function(i){return{"background-color":i}};function pn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",65),t.NdJ("click",function(){const b=t.CHM(e).$implicit,T=t.oxw();return t.KtG(T.setCheckBox(b.key,b.value))}),t._UZ(1,"div",66),t._uU(2),t.ALo(3,"titlecase"),t.ALo(4,"titlecase"),t._uU(5),t.qZA()}if(2&i){const e=f.$implicit,r=t.oxw();t.uIk("id",e.key),t.xp6(1),t.Q6J("ngStyle",t.VKq(8,un,e.value[0].color)),t.xp6(1),t.hij(" ","en"==r.ts.l.iso_code?t.lcZ(3,4,e.value[0].nameEN):t.lcZ(4,6,e.value[0].nameGA)," "),t.xp6(3),t.hij(" (","Broad/Slender"==e.value[0].nameEN?e.value.length/2:e.value.length,") ")}}ut().register("modules/imageCompress",Ft());let hn=(()=>{class i{constructor(e,r,l,b,T,O,E,U,I){this.ts=e,this.auth=r,this.storyService=l,this.recordAudioService=b,this.engagement=T,this.classroomService=O,this.dialog=E,this.http=U,this.router=I,this.stories=[],this.story=new y,this.saveStoryDebounceId=0,this.mostRecentAttemptToSaveStory=new Date,this.storySaved=!0,this.storiesLoaded=!1,this.downloadStoryFormat=".pdf",this.lastClickedStoryId="",this.grammarLoaded=!1,this.grammarErrors=[],this.showErrorTags=!1,this.grammarSettingsHidden=!1,this.grammarCheckerOptions={anGramadoir:fe,relativeClause:ve,broadSlender:ft},this.checkBoxes={showAll:!0},this.grammarErrorsTypeDict={},this.showOptions=!0,this.dontToggle=!1,this.textUpdated=new V.x,this.quillToolbar={toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"],["image"]],imageCompress:{quality:.7,maxWidth:500,maxHeight:500,imageType:"image/png",debug:!1,suppressErrorLogging:!1,insertIntoEditor:void 0}},this.isRecording=!1,this.isTranscribing=!1,this.setUpGrammarChecking()}ngOnInit(){var e=this;return(0,g.Z)(function*(){e.auth.getUserDetails()?!e.story||(e.storySaved=!0,e.textUpdated.next(),e.getWordCount(e.story.text),null==e.story.htmlText&&(e.story.htmlText=e.story.text)):e.auth.logout()})()}setUpGrammarChecking(){var e=this;return(0,g.Z)(function*(){const r=e.auth.getUserDetails();if(!r)return;let l=yield(0,F.z)(e.classroomService.getClassroomOfStudent(r._id)),b=[];l&&l.grammarCheckers&&l.grammarCheckers.length>0?l.grammarCheckers.forEach(T=>{e.grammarCheckerOptions[T]&&b.push(e.grammarCheckerOptions[T])}):b=Object.values(e.grammarCheckerOptions),e.grammarEngine=new ht(b,e.http,e.auth),e.textUpdated.pipe((0,Ct.x)()).subscribe((0,g.Z)(function*(){if(e.grammarLoaded=!1,e.story.text.replace(/\n/g," "))try{e.grammarErrors=[],e.grammarEngine.check$(e.story.text).subscribe({next:O=>{e.grammarErrors.push(O),e.showErrorTags&&e.quillHighlighter.show([O])},error:function(){},complete:()=>{if(e.quillHighlighter){e.quillHighlighter.hideAll(),e.showErrorTags&&e.quillHighlighter.show(e.grammarErrors.filter(O=>e.checkBoxes[O.type]||e.checkBoxes.showAll)),e.grammarErrors&&e.grammarEngine.saveErrorsWithSentences(e.story._id).then(console.log,console.error),e.grammarErrorsTypeDict=e.grammarErrors.reduce(function(O,E){return O[E.type]||(O[E.type]=[]),O[E.type].push(E),O},{});for(const O of Object.keys(e.grammarErrorsTypeDict))e.checkBoxes[O]=!0;e.grammarLoaded=!0}}})}catch(O){e.grammarErrors||window.alert("There was an error while trying to fetch grammar suggestions from the Gramad\xf3ir server:\n"+O.message+"\nSee the browser console for more information"),console.dir(O)}}))})()}onContentChanged(e){"user"===(this.story.text=e.text,this.getWordCount(e.text),e.source)&&(this.storySaved=!1,this.textUpdated.next(e.text),this.debounceSaveStory())}onEditorCreated(e){e.history.options.userOnly=!0,this.quillEditor=e,this.quillEditor.root.setAttribute("spellcheck","false"),e.focus(),this.quillHighlighter=new rt(this.quillEditor,this.ts,this.engagement)}getWordCount(e){}debounceSaveStory(){this.saveStoryDebounceId++;const e=this.saveStoryDebounceId,r=new Date;setTimeout(()=>{e===this.saveStoryDebounceId&&this.saveStory(e,r)},1e3)}saveStory(e,r){var l=this;return(0,g.Z)(function*(){const b=new Date;if(l.mostRecentAttemptToSaveStory=b,!l.story._id)return window.alert("Cannot save story. The id is not known");const T=l.stripGramadoirAttributesFromHtml(Rt()(l.story.htmlText)),O={title:l.story.title,dialect:l.story.dialect,text:l.story.text,htmlText:T,lastUpdated:r};l.engagement.addEventForLoggedInUser(M.tw["SAVE-STORY"],l.story);try{yield(0,F.z)(l.storyService.updateStory(O,l.story._id)),(e===l.saveStoryDebounceId||"modal"===e)&&(l.storySaved=!0)}catch(E){throw window.alert("Error while trying to save story: "+E.message),E}try{b===l.mostRecentAttemptToSaveStory&&(l.storySaved=!0)}catch(E){throw window.alert("Error setting storySaved to true: "+E.message),E}})()}stripGramadoirAttributesFromHtml(e){return e&&e.replace?e.replace(/\s*style="([^"])+"/g,"").replace(/\s*highlight-tag-type="([^"])+"/g,"").replace(/\s*highlight-tag="([^"])+"/g,""):""}toggleOptions(){this.dontToggle||(this.showOptions=!this.showOptions),this.dontToggle=!1}titleStyle(){return{"font-style":this.storySaved?"normal":"italic"}}downloadStory(){this.dialogRef=this.dialog.open(u.p,{data:{title:this.ts.l.download,type:"select",data:[this.story.title,[".pdf",".docx",".txt",".odt"]],confirmText:this.ts.l.download,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(e=>{this.dialogRef=void 0,e&&(this.downloadStoryFormat=e[1]?e[1]:".pdf",this.http.get(this.downloadStoryUrl(),{responseType:"blob"}).subscribe(r=>{const l=window.document.createElement("a");l.href=window.URL.createObjectURL(r),l.download=e[0]?e[0]:this.story.title,document.body.appendChild(l),l.click(),document.body.removeChild(l)}))})}downloadStoryUrl(){return et.Z.baseurl+"story/downloadStory/"+this.story._id+"/"+this.downloadStoryFormat}hasNewFeedback(){}toggleGrammarButton(){return this.ts.message(this.showErrorTags?"hide_grammar_suggestions":"show_grammar_suggestions")}setCheckBox(e,r){this.checkBoxes[e]=!this.checkBoxes[e],this.checkBoxes.showAll&&(this.checkBoxes.showAll=!1),this.checkBoxes[e]?(this.quillHighlighter.show(r),document.getElementById(e).classList.remove("hideLegendItem")):(this.quillHighlighter.hide(r),document.getElementById(e).classList.add("hideLegendItem"))}setAllCheckBoxes(){this.checkBoxes.showAll?this.quillHighlighter.show(this.grammarErrors):this.quillHighlighter.hideAll(),Object.keys(this.checkBoxes).forEach(e=>{this.checkBoxes[e]=this.checkBoxes.showAll})}selectedGrammarSuggestion(){return this.quillHighlighter?this.quillHighlighter.getGrammarMessage(this.grammarLoaded):""}toggleGrammarTags(){var e=this;return(0,g.Z)(function*(){e.showErrorTags?e.quillHighlighter.hideAll():e.quillHighlighter.show(e.grammarErrors.filter(r=>e.checkBoxes[r.type]||e.checkBoxes.showAll)),e.showErrorTags=!e.showErrorTags})()}goToRecording(){this.router.navigateByUrl("/student/record-story/"+this.story._id)}goToSynthesis(){}speakStory(){var e=this;return(0,g.Z)(function*(){if(e.isRecording){e.isTranscribing=!0,e.recordAudioService.stopRecording();let r=yield e.recordAudioService.getAudioTranscription();if(e.isTranscribing=!1,r){let l=e.quillEditor.getSelection(!0);e.quillEditor.insertText(l.index,r+"."),e.story.text=e.quillEditor.getText(),e.story.htmlText=e.quillEditor.root.innerHTML,e.getWordCount(r),e.storySaved=!1,e.debounceSaveStory()}}else e.recordAudioService.recordAudio();e.isRecording=!e.isRecording})()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.D),t.Y36(C.$),t.Y36(_.N),t.Y36(Nt.r),t.Y36(k.M),t.Y36(A.u),t.Y36(o.uw),t.Y36(ee.eN),t.Y36(a.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-dashboard"]],decls:26,vars:9,consts:[["class","storyTitleHeader",4,"ngIf"],["class","optionsBtnContainer",3,"click",4,"ngIf"],["autosize","",1,"bodyContainer"],["mode","side",1,"storyListDrawer"],["storyDrawer",""],[3,"storyEmitter","storiesLoadedEmitter"],[1,"storyContainer"],["class","ql-container",3,"ngStyle",4,"ngIf","ngIfElse"],["newStoryMessage",""],["mode","side","position","end",1,"grammarErrorDrawer"],["grammarErrorDrawer",""],[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"grammarMessageBanner"],[1,"grammarMessage",3,"innerHTML"],[1,"selectErrorCheckbox"],["class","errorContainer",3,"click",4,"ngFor","ngForOf"],["mode","side","position","end",1,"dictionaryDrawer"],["dictionaryDrawer",""],[3,"closeDictionaryEmitter"],[1,"storyTitleHeader"],["data-cy","title","contenteditable","true",1,"storyTitle",3,"ngStyle"],[4,"ngIf"],["style","color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"saveIcon"],["class","savedIcon",4,"ngIf"],[2,"color","rgba(0, 0, 0, 0.4)"],[1,"savedIcon"],[1,"fas","fa-check"],[1,"fas","fa-save"],[1,"optionsBtnContainer",3,"click"],[1,"optionsBtn"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-right",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"ngClass","click",4,"ngIf"],["style","display: flex",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"hidden","click",4,"ngIf"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-right"],[1,"optionsBtn","optionsPopupBtn",3,"ngClass","click"],["class","material-symbols-outlined optionsBtnIcon",4,"ngIf"],["class","notRecordingBtn blink",4,"ngIf"],[1,"material-symbols-outlined","optionsBtnIcon"],[1,"notRecordingBtn","blink"],[1,"fas","fa-stop-circle"],[1,"dot-flashing"],[2,"display","flex",3,"click"],["target","_blank",1,"optionsBtn","optionsPopupBtn",2,"text-decoration","none",3,"href","click"],[1,"fas","fa-download","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"click"],[1,"fas","fa-comment-dots","optionsBtnIcon"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"],[1,"fas","fa-book","optionsBtnIcon"],[1,"fas","fa-volume-up","optionsBtnIcon"],[1,"fas","fa-spell-check","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"hidden","click"],[1,"fas","fa-microphone","optionsBtnIcon"],[1,"ql-container",3,"ngStyle"],["quillHeightSpan",""],[1,"menuButton",3,"click"],["placeholder","",3,"modules","preserveWhitespace","debounceTime","ngModel","ngModelChange","onContentChanged","onEditorCreated"],[1,"newStoryMessage"],[1,"errorContainer",3,"click"],[1,"errorColorBox",3,"ngStyle"]],template:function(e,r){if(1&e){const l=t.EpF();t.YNc(0,ze,8,6,"div",0),t.YNc(1,cn,11,9,"div",1),t.TgZ(2,"mat-drawer-container",2)(3,"mat-drawer",3,4)(5,"app-story-drawer",5,4),t.NdJ("storyEmitter",function(T){return r.story=T,r.textUpdated.next(r.story.text)})("storiesLoadedEmitter",function(T){return r.storiesLoaded=T}),t.qZA()(),t.TgZ(7,"div",6),t.YNc(8,dn,5,5,"div",7),t.YNc(9,ln,2,0,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(11,"mat-drawer",9,10)(13,"div",11)(14,"h5"),t._uU(15),t.qZA(),t.TgZ(16,"div",12),t.NdJ("click",function(){return t.CHM(l),t.MAs(12).toggle(),t.KtG(r.toggleGrammarTags())}),t._UZ(17,"i",13),t.qZA()(),t.TgZ(18,"div",14),t._UZ(19,"div",15),t.qZA(),t.TgZ(20,"div",16),t.YNc(21,pn,6,10,"div",17),t.ALo(22,"keyvalue"),t.qZA()(),t.TgZ(23,"mat-drawer",18,19)(25,"app-dictionary-drawer",20),t.NdJ("closeDictionaryEmitter",function(){t.CHM(l);const T=t.MAs(24);return t.KtG(T.toggle())}),t.qZA()()()}if(2&e){const l=t.MAs(10);t.Q6J("ngIf",r.story),t.xp6(1),t.Q6J("ngIf",r.story),t.xp6(7),t.Q6J("ngIf",r.story)("ngIfElse",l),t.xp6(7),t.hij(" ",r.ts.message("grammar_errors")," "),t.xp6(4),t.Q6J("innerHTML",r.selectedGrammarSuggestion(),t.oJD),t.xp6(2),t.Q6J("ngForOf",t.lcZ(22,7,r.grammarErrorsTypeDict))}},dependencies:[d.mk,d.sg,d.O5,d.PC,Z.JJ,Z.On,Vt,Kt,Mt.Hw,le.g6,Re,je,d.rS,d.Nd],styles:[".storyTitleHeader{display:flex;justify-content:center;margin-top:-30px;padding-bottom:20px}.storyTitle{margin:auto;overflow:auto;font-size:20px;font-weight:bolder;padding-left:20px;padding-right:20px}.saveIcon{align-self:flex-end;white-space:nowrap;color:var(--dark-text);border-style:none;font-size:11pt;padding:5px}.savedIcon{color:var(--scealai-light-brown)}.optionsBtnContainer>*{height:2rem}.optionsBtnContainer{display:flex;justify-content:space-between;flex-wrap:wrap;--options-btn-background-color-hover: lightgray;margin-left:2%;margin-right:2%}.optionsBtn{background-color:var(--scealai-yellow);border-style:none;color:#464444;margin:0;border-radius:2px;display:flex;align-items:center;padding:5px;background:rgba(223,217,200,0)}.optionsBtn:hover{background-color:var(--options-btn-background-color-hover);color:#35322f;cursor:pointer;border-radius:2}.optionsPopupBtn{margin-right:4px}.optionsBtnIcon{margin-left:5px}.notRecordingBtn{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.bodyContainer{width:100%;height:100%}.storyListDrawer{padding:40px}.dictionaryDrawer,.grammarErrorDrawer{width:25%;height:100%}.grammarMessageBanner{display:flex;align-items:center;padding-bottom:10px}.grammarMessage{display:block;flex:1}.selectErrorCheckbox{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:space-around;text-align:left;padding-left:10px;gap:1.5rem}.errorContainer{margin:2px}.errorContainer:hover{cursor:pointer}.errorColorBox{display:inline-flex;width:30px;height:15px}.hideLegendItem{text-decoration:line-through;opacity:.5}.newStoryMessage{font-weight:bolder;max-width:200px;padding-top:50px;padding-bottom:50px;height:80vh;width:100%}.storyContainer{height:100%}.ql-container{background-color:#f8f9fa;height:100%}.menuButton{float:left;padding-left:10px;padding-top:5px;transform:scale(2);z-index:100}.menuButton:hover{cursor:pointer}.ql-editor{background-color:#fff;z-index:1;margin-top:20px;font-size:14pt;font-family:Times New Roman,Times,serif;min-height:70vh!important;max-height:70vh!important}.blink{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}.dictionaryHeader{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn{margin-left:auto}.closeDictionaryBtn:hover{cursor:pointer}\n",".custom-tooltip:before{content:none!important}[data-selected]{margin:.3em}[highlight-tag-type]{border-radius:3px}span[highlight-tag-type]:hover{cursor:pointer}span:not[highlight-tag-type]{border-radius:0;padding-left:0;padding-right:0}[highlight-tag-type=LEATHAN-CAOL]{border:1px solid gray;border-radius:0!important;padding-left:0!important;padding-right:0!important}\n",'.ql-editor{overflow-y:auto}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=times-new-roman]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=times-new-roman]:before{content:"Times New Roman";font-family:Times New Roman}.ql-font-times-new-roman{font-family:times new roman}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=arial]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=arial]:before{content:"Arial";font-family:arial}.ql-font-arial{font-family:arial}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=sans-serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=sans-serif]:before{content:"Sans Serif";font-family:"sans serif"}.ql-font-sans-serif{font-family:"sans serif"}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{content:"Monospace";font-family:"monospace"}.ql-font-monospace{font-family:"monospace"}\n'],encapsulation:2}),i})();var st=n(9742);let pe=(()=>{class i{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t.H7,16))},i.\u0275pipe=t.Yjl({name:"safeHtml",type:i,pure:!0}),i})();function fn(i,f){if(1&i&&(t.TgZ(0,"div",14)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.Oqu(e.ts.l.synthesising)}}function gn(i,f){1&i&&(t._UZ(0,"span",18),t.ALo(1,"safeHtml")),2&i&&t.Q6J("innerHTML",t.lcZ(1,1,f.$implicit.outerHTML),t.oJD)}function mn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,b=t.oxw(2);return t.KtG(b.stopSection(l))}),t._UZ(1,"i",20),t.qZA()}}function vn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,b=t.oxw(2);return t.KtG(b.playSection(l))}),t._UZ(1,"i",21),t.qZA()}}function _n(i,f){if(1&i&&(t.TgZ(0,"div",2),t.YNc(1,gn,2,3,"span",16),t.YNc(2,mn,2,0,"button",17),t.YNc(3,vn,2,0,"button",17),t.qZA()),2&i){const e=f.$implicit;t.xp6(1),t.Q6J("ngForOf",e.spans),t.xp6(1),t.Q6J("ngIf",!e.audio.paused),t.xp6(1),t.Q6J("ngIf",e.audio.paused)}}function yn(i,f){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,_n,4,3,"div",15),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.chosenSections)}}function xn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",24),t._uU(2),t.qZA(),t.TgZ(3,"button",25),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.changeSections(l.sentences))}),t._uU(4),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.paragraph),t.xp6(2),t.Oqu(e.ts.l.sentence)}}function bn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",25),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.changeSections(l.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",24),t._uU(4),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.paragraph),t.xp6(2),t.Oqu(e.ts.l.sentence)}}function wn(i,f){if(1&i&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t.qZA(),t.YNc(3,xn,5,2,"div",11),t.YNc(4,bn,5,2,"div",11),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.hij(" ",e.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",e.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",e.isSentenceMode())}}let Cn=(()=>{class i{constructor(e,r,l,b,T){this.storyService=e,this.route=r,this.router=l,this.ts=b,this.synthesis=T,this.paragraphs=[],this.sentences=[],this.audioFinishedLoading=!1}ngOnInit(){var e=this;return(0,g.Z)(function*(){e.storyId=e.route.snapshot.paramMap.get("id");let r=yield(0,F.z)(e.storyService.getStory(e.storyId));e.synthesis.synthesiseStory(r).then(([l,b])=>{e.paragraphs=l,e.sentences=b,e.chosenSections=e.paragraphs,e.audioFinishedLoading=!0})})()}isSentenceMode(){return this.chosenSections[0]instanceof st.cj}isParagraphMode(){return this.chosenSections[0]instanceof st.nv}changeSections(e){this.chosenSections=e,this.paragraphs.concat(this.sentences).forEach(l=>this.stopSection(l))}playSection(e){e.play(),e.highlight()}stopSection(e){e.stop(),e.removeHighlight()}goToDashboard(){this.router.navigateByUrl("/student/dashboard/"+this.storyId)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.N),t.Y36(a.gz),t.Y36(a.F0),t.Y36(h.D),t.Y36(st.cf))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-synthesis"]],decls:18,vars:5,consts:[["src","assets/img/book.png",1,"bookImg"],[1,"page"],[1,"paragraphContainer"],[1,"bookContainerSynth"],[1,"bookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"storyContainer"],[1,"storyHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[4,"ngIf"],[1,"footer"],["class","btnContainer",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"btnContainer"],[1,"footerText"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"]],template:function(e,r){1&e&&(t._UZ(0,"img",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t.NdJ("click",function(){return r.goToDashboard()}),t._UZ(6,"i",6),t._uU(7),t.qZA(),t._UZ(8,"div"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8),t._uU(11),t.qZA(),t.TgZ(12,"div")(13,"div",9),t.YNc(14,fn,4,1,"div",10),t.YNc(15,yn,2,1,"div",11),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,wn,5,3,"div",13),t.qZA()()()()()),2&e&&(t.xp6(7),t.hij(" ",r.ts.l.story,""),t.xp6(4),t.hij(" ",r.ts.l.listen_and_correct," "),t.xp6(3),t.Q6J("ngIf",!r.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",r.audioFinishedLoading),t.xp6(2),t.Q6J("ngIf",r.audioFinishedLoading))},dependencies:[d.sg,d.O5,W.P,pe],styles:['.bookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:var(--dark-text);width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.storyContainer[_ngcontent-%COMP%]{margin-top:10px}.storyHeader[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]:hover, .selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),i})();class Sn{constructor(f,e=[],r=[],l=[],b=[],T=[],O=[]){this.paragraphAudioIds=e,this.paragraphIndices=r,this.paragraphTranscriptions=l,this.sentenceAudioIds=b,this.sentenceIndices=T,this.sentenceTranscriptions=O,this.storyData=f,this.date=new Date,this.archived=!1}}var Tn=n(2754);function Mn(i,f){1&i&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function An(i,f){if(1&i&&(t.TgZ(0,"div",16),t._uU(1),t._UZ(2,"i",17),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.saved," ")}}function kn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.saveRecordings())}),t._uU(1),t._UZ(2,"i",19),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.save," ")}}function On(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.goToDashboard())}),t._UZ(2,"i",10),t._uU(3),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.YNc(6,Mn,2,0,"span",12),t.qZA(),t.TgZ(7,"div",13),t.YNc(8,An,3,1,"div",14),t.YNc(9,kn,3,1,"div",15),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.ts.l.story," "),t.xp6(2),t.hij(" ",null==e.story?null:e.story.title,""),t.xp6(1),t.Q6J("ngIf",!e.recordingSaved),t.xp6(2),t.Q6J("ngIf",e.recordingSaved),t.xp6(1),t.Q6J("ngIf",!e.recordingSaved)}}function Pn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){t.CHM(e),t.oxw();const l=t.MAs(5);return t.KtG(l.toggle())}),t.TgZ(1,"mat-icon"),t._uU(2,"menu"),t.qZA(),t._uU(3),t.qZA()}if(2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.ts.l.archive," ")}}const En=function(i){return{"font-style":i}};function In(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",21),t.NdJ("click",function(){const b=t.CHM(e).$implicit,T=t.oxw();return t.KtG(T.setCurrentRecording(b))}),t.TgZ(2,"div",22)(3,"div",23),t._uU(4),t.qZA()(),t.TgZ(5,"div",24),t._uU(6),t.ALo(7,"date"),t.qZA()(),t._UZ(8,"hr"),t.qZA()}if(2&i){const e=f.$implicit;t.xp6(1),t.uIk("id",e._id),t.xp6(2),t.Q6J("ngStyle",t.VKq(7,En,e.archived?"none":"italic")),t.xp6(1),t.hij(" ",null==e||null==e.storyData?null:e.storyData.title,""),t.xp6(2),t.hij(" ",t.xi3(7,4,e.date,"d/M/yy, h:mm a")," ")}}function Bn(i,f){if(1&i&&(t.TgZ(0,"div",30)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.synthesising)}}function Dn(i,f){1&i&&(t._UZ(0,"span",42),t.ALo(1,"safeHtml")),2&i&&t.Q6J("innerHTML",t.lcZ(1,1,f.$implicit.outerHTML),t.oJD)}function Fn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,b=t.oxw(3);return t.KtG(b.stopSection(l))}),t._UZ(1,"i",44),t.qZA()}}function Zn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,b=t.oxw(3);return t.KtG(b.playSection(l))}),t._UZ(1,"i",45),t.qZA()}}function Rn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().index,b=t.oxw(3);return t.KtG(b.recordAudio(l))}),t._UZ(1,"i",47),t.qZA()}}function Nn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().index,b=t.oxw(3);return t.KtG(b.stopRecording(l))}),t._UZ(1,"i",49),t.qZA()}}function Ln(i,f){1&i&&t._UZ(0,"hr",50)}function Un(i,f){1&i&&(t.TgZ(0,"div",51),t._UZ(1,"div",52),t.qZA())}function jn(i,f){if(1&i&&(t.TgZ(0,"div",53)(1,"span",54),t._uU(2),t.qZA(),t.TgZ(3,"span",55),t._uU(4),t.qZA()()),2&i){const e=t.oxw().index,r=t.oxw(3);t.xp6(2),t.hij("",r.ts.l.speech_recognition_output," "),t.xp6(2),t.Oqu(r.sectionTranscriptions[e])}}function Hn(i,f){if(1&i&&t._UZ(0,"audio",59,60),2&i){const e=t.oxw(2).index,r=t.oxw(3);t.uIk("src",r.sectionAudioSources[e],t.LSH)}}function Gn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2).index,b=t.oxw(3);return t.KtG(b.deleteRecording(l))}),t._UZ(1,"i",62),t.qZA()}}function Jn(i,f){if(1&i&&(t.TgZ(0,"div",56)(1,"div",54),t._uU(2),t.qZA(),t.YNc(3,Hn,2,1,"audio",57),t.YNc(4,Gn,2,0,"button",58),t.qZA()),2&i){const e=t.oxw().index,r=t.oxw(3);t.xp6(2),t.Oqu(r.ts.l.your_recording),t.xp6(1),t.Q6J("ngIf",r.sectionAudioSources[e]),t.xp6(1),t.Q6J("ngIf",r.sectionAudioSources[e]&&!r.currentRecording.archived)}}function Yn(i,f){if(1&i&&(t.TgZ(0,"div",32)(1,"div",33)(2,"div"),t.YNc(3,Dn,2,3,"span",34),t.YNc(4,Fn,2,0,"button",35),t.YNc(5,Zn,2,0,"button",35),t.YNc(6,Rn,2,0,"button",36),t.YNc(7,Nn,2,0,"button",37),t.qZA(),t.YNc(8,Ln,1,0,"hr",38),t.YNc(9,Un,2,0,"div",39),t.YNc(10,jn,5,2,"div",40),t.YNc(11,Jn,5,3,"div",41),t.qZA()()),2&i){const e=f.$implicit,r=f.index,l=t.oxw(3);t.xp6(3),t.Q6J("ngForOf",e.spans),t.xp6(1),t.Q6J("ngIf",!e.audio.paused),t.xp6(1),t.Q6J("ngIf",e.audio.paused),t.xp6(1),t.Q6J("ngIf",!l.isRecording(e,r)&&!l.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",l.isRecording(e,r)&&!l.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",l.sectionAudioSources[r]),t.xp6(1),t.Q6J("ngIf",l.isTranscribing[r]),t.xp6(1),t.Q6J("ngIf",l.sectionTranscriptions[r]),t.xp6(1),t.Q6J("ngIf",l.sectionAudioSources[r])}}function zn(i,f){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Yn,12,9,"div",31),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.chosenSections)}}function qn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",67),t._uU(2),t.qZA(),t.TgZ(3,"button",68),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(3);return t.KtG(l.changeSections(l.sentences))}),t._uU(4),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(2),t.hij(" ",e.ts.l.paragraph," "),t.xp6(2),t.hij(" ",e.ts.l.sentence," ")}}function Qn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",68),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(3);return t.KtG(l.changeSections(l.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",67),t._uU(4),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(2),t.hij(" ",e.ts.l.paragraph," "),t.xp6(2),t.hij(" ",e.ts.l.sentence," ")}}function Wn(i,f){if(1&i){const e=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(3);return t.KtG(l.archiveRecording())}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.ts.l.archive_recording," ")}}function Vn(i,f){if(1&i&&(t.TgZ(0,"div",63)(1,"div",64)(2,"div",65),t._uU(3),t.qZA(),t.YNc(4,qn,5,2,"div",12),t.YNc(5,Qn,5,2,"div",12),t.YNc(6,Wn,2,1,"button",66),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(3),t.hij(" ",e.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",e.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",e.isSentenceMode()),t.xp6(1),t.Q6J("ngIf",!e.currentRecording.archived&&e.currentRecording.storyData.text!=e.story.text)}}function Kn(i,f){if(1&i&&(t.TgZ(0,"div",25)(1,"div",26),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t.YNc(4,Bn,4,1,"div",28),t.YNc(5,zn,2,1,"div",12),t.qZA(),t.YNc(6,Vn,7,4,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.hij(" ",e.ts.l.listen_record_compare," "),t.xp6(2),t.Q6J("ngIf",!e.audioFinishedLoading&&!e.recordingsFinishedLoading),t.xp6(1),t.Q6J("ngIf",e.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",e.audioFinishedLoading)}}const Xn=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"contents",component:It,canActivate:[s.P]},{path:"dashboard",component:hn,canActivate:[s.P],canDeactivate:[c]},{path:"synthesis/:id",component:Cn,canActivate:[s.P],canDeactivate:[m]},{path:"record-story/:id",component:(()=>{class i{constructor(e,r,l,b,T,O,E,U,I){this.storyService=e,this.ts=r,this.sanitizer=l,this.route=b,this.router=T,this.recordingService=O,this.synthesis=E,this.engagement=U,this.dialog=I,this.story=new y,this.paragraphs=[],this.sentences=[],this.isRecordingParagraph=[],this.isRecordingSentence=[],this.isRecordingSection=[],this.paragraphAudioSources=[],this.sentenceAudioSources=[],this.sectionAudioSources=[],this.paragraphBlobs=[],this.sentenceBlobs=[],this.sectionBlobs=[],this.paragraphChunks=[],this.sentenceChunks=[],this.sectionChunks=[],this.recordingSaved=!0,this.audioFinishedLoading=!1,this.url_ASR_API="https://phoneticsrv3.lcs.tcd.ie/asr_api/recognise",this.sentenceTranscriptions=[],this.paragraphTranscriptions=[],this.sectionTranscriptions=[],this.isTranscribing=[!1],this.recordings=[],this.currentRecording=null,this.lastClickedRecordingId=""}ngOnInit(){var e=this;return(0,g.Z)(function*(){e.chunks=[],e.sectionAudioSources=e.paragraphAudioSources,e.sectionBlobs=e.paragraphBlobs,e.sectionChunks=e.paragraphChunks,e.sectionTranscriptions=e.paragraphTranscriptions,e.isRecordingSection=e.isRecordingParagraph;const r=e.route.snapshot.paramMap.get("id");e.story=yield(0,F.z)(e.storyService.getStory(r)),(0,Tn.TD)({audio:!0,video:!1}).then((0,g.Z)(function*(){e.story.activeRecording?e.loadRecordings():e.createNewRecording()})).catch(l=>{e.openMicRequestDialog()})})()}loadRecordings(){var e=this;return(0,g.Z)(function*(){e.recordings=yield(0,F.z)(e.recordingService.getRecordings(e.story._id)),e.recordings.sort((l,b)=>l.date>b.date?-1:1);let r=e.recordings.filter(l=>!1===l.archived);e.setCurrentRecording(r[0])})()}setCurrentRecording(e){this.currentRecording=e,this.loadSynthesis(this.currentRecording.storyData),this.loadAudio(this.currentRecording);let r=this.currentRecording._id,l=document.getElementById(r);l&&(this.lastClickedRecordingId&&document.getElementById(this.lastClickedRecordingId).classList.remove("clickedresultCard"),this.lastClickedRecordingId=r,l.classList.add("clickedresultCard"))}createNewRecording(){var e=this;return(0,g.Z)(function*(){const r=yield(0,F.z)(e.recordingService.create(new Sn(e.story)));e.story=yield(0,F.z)(e.storyService.updateActiveRecording(e.story._id,r._id)),e.loadRecordings()})()}archiveRecording(){var e=this;return(0,g.Z)(function*(){yield(0,F.z)(e.recordingService.updateArchiveStatus(e.currentRecording._id)),e.createNewRecording()})()}loadSynthesis(e){this.synthesis.synthesiseStory(e).then(([r,l])=>{this.paragraphs=r,this.sentences=l,this.chosenSections=this.paragraphs,this.audioFinishedLoading=!0})}loadAudio(e){var r=this;return(0,g.Z)(function*(){r.audioFinishedLoading=!1,r.paragraphAudioSources=[],r.paragraphTranscriptions=[],r.sentenceAudioSources=[],r.sentenceTranscriptions=[],r.sectionAudioSources=[],r.sectionTranscriptions=[];for(let l=0;l<e.paragraphIndices.length;++l){let b=yield(0,F.z)(r.recordingService.getAudio(e.paragraphAudioIds[l]));r.paragraphBlobs[l]=b,r.paragraphAudioSources[e.paragraphIndices[l]]=r.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(b)),r.paragraphTranscriptions[e.paragraphIndices[l]]=e.paragraphTranscriptions[e.paragraphIndices[l]]}for(let l=0;l<e.sentenceIndices.length;++l){let b=yield(0,F.z)(r.recordingService.getAudio(e.sentenceAudioIds[l]));r.sentenceBlobs[l]=b,r.sentenceAudioSources[e.sentenceIndices[l]]=r.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(b)),r.sentenceTranscriptions[e.sentenceIndices[l]]=e.sentenceTranscriptions[e.sentenceIndices[l]]}r.sectionTranscriptions=r.paragraphTranscriptions,r.sectionAudioSources=r.paragraphAudioSources})()}recordAudio(e){this.engagement.addEventForLoggedInUser(M.tw["RECORD-STORY"],this.story),navigator.mediaDevices.getUserMedia({audio:!0}).then(l=>{this.stream=l,this.recorder=new MediaRecorder(this.stream),this.sectionChunks[e]=[],this.recorder.start(),this.isRecordingSection[e]=!0,this.recorder.ondataavailable=b=>{this.sectionChunks[e].push(b.data)}}).catch()}stopRecording(e){this.recorder.stop(),this.isRecordingSection[e]=!1,this.stream.getTracks().forEach(r=>r.stop()),setTimeout(()=>{const r=new Blob(this.sectionChunks[e],{type:"audio/mp3"});this.sectionBlobs[e]=r,this.sectionAudioSources[e]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(r)),this.recordingSaved=!1;const l=new FileReader;l.readAsDataURL(r),l.onloadend=function(){let b=l.result.split(";base64,")[1];this.getTranscription(b,e)}.bind(this)},500)}getTranscription(e,r){this.isTranscribing[r]=!0,this.isParagraphMode()&&(this.paragraphTranscriptions[r]=null),this.isSentenceMode()&&(this.sentenceTranscriptions[r]=null),fetch(this.url_ASR_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({recogniseBlob:e,developer:!0})}).then(b=>b.json()).then(b=>{let T=b.transcriptions[0].utterance;this.isParagraphMode()?(this.paragraphTranscriptions[r]=T,this.sectionTranscriptions[r]=this.paragraphTranscriptions[r]):this.isSentenceMode()&&(this.sentenceTranscriptions[r]=T,this.sectionTranscriptions[r]=this.sentenceTranscriptions[r]),this.isTranscribing[r]=!1})}deleteRecording(e){this.recordingSaved=!1,delete this.sectionAudioSources[e],delete this.sectionChunks[e],delete this.sectionBlobs[e],delete this.sectionTranscriptions[e]}saveRecordings(){var e=this;return(0,g.Z)(function*(){const r=Object.entries(e.paragraphBlobs).map(function(){var q=(0,g.Z)(function*([at,ct]){return e.recordingService.saveAudio(e.story._id,ct,at).toPromise()});return function(at){return q.apply(this,arguments)}}()),l=Object.entries(e.sentenceBlobs).map(function(){var q=(0,g.Z)(function*([at,ct]){return e.recordingService.saveAudio(e.story._id,ct,at).toPromise()});return function(at){return q.apply(this,arguments)}}()),b=yield Promise.all(r),T=yield Promise.all(l);let O=[],E=[];for(const q of b)O.push(q.index),E.push(q.fileId);let U=[],I=[];for(const q of T)U.push(q.index),I.push(q.fileId);const j={paragraphAudioIds:E,paragraphIndices:O,paragraphTranscriptions:e.paragraphTranscriptions,sentenceIndices:U,sentenceAudioIds:I,sentenceTranscriptions:e.sentenceTranscriptions};let z=yield(0,F.z)(e.recordingService.update(e.story.activeRecording,j));if(z){e.recordingSaved=!0;const q=e.recordings.indexOf(e.currentRecording);e.recordings.splice(q,1,z)}else alert("Error while saving audio")})()}isRecording(e,r){return e instanceof st.cj?this.isRecordingSentence[r]:e instanceof st.nv?this.isRecordingParagraph[r]:void 0}isSentenceMode(){return this.chosenSections[0]instanceof st.cj}isParagraphMode(){return this.chosenSections[0]instanceof st.nv}changeSections(e){this.chosenSections=e,this.paragraphs.concat(this.sentences).forEach(l=>this.stopSection(l)),this.isSentenceMode()?(this.sectionAudioSources=this.sentenceAudioSources,this.sectionBlobs=this.sentenceBlobs,this.sectionChunks=this.sentenceChunks,this.sectionTranscriptions=this.sentenceTranscriptions,this.isRecordingSection=this.isRecordingSentence):this.isParagraphMode()&&(this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.sectionTranscriptions=this.paragraphTranscriptions,this.isRecordingSection=this.isRecordingParagraph)}playSection(e){e.play(),e.highlight()}stopSection(e){e.stop(),e.removeHighlight()}goToDashboard(){this.router.navigateByUrl("student/dashboard")}openMicRequestDialog(){var e=this;this.dialogRef=this.dialog.open(u.p,{data:{title:this.ts.l.microphone_blocked,message:this.ts.l.page_requires_microphone,confirmText:this.ts.l.refresh,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var r=(0,g.Z)(function*(l){e.dialogRef=void 0,console.log(l),l?e.ngOnInit():e.goToDashboard()});return function(l){return r.apply(this,arguments)}}())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.N),t.Y36(h.D),t.Y36($t.H7),t.Y36(a.gz),t.Y36(a.F0),t.Y36(H.s),t.Y36(st.cf),t.Y36(k.M),t.Y36(o.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-recording"]],decls:8,vars:4,consts:[[1,"content"],["class","recordingBookHeader",4,"ngIf"],["class","archiveButton",3,"click",4,"ngIf"],["autosize","",1,"archiveNavContainer"],["mode","side",1,"sidenav"],["drawer",""],[4,"ngFor","ngForOf"],["class","recordingStoryContainer",4,"ngIf"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"archiveButton",3,"click"],[1,"contentSection",3,"click"],[1,"contentsLink"],[3,"ngStyle"],[1,"contentsDate"],[1,"recordingStoryContainer"],[1,"recordingStoryHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],["class","footer","style","padding-top: 10px",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],["class","recordingBtn",3,"click",4,"ngIf"],["class","notRecordingBtn blink",3,"click",4,"ngIf"],["class","dividerLine",4,"ngIf"],["class","recognisedSpeechContainer",4,"ngIf"],["style","height: 40px",4,"ngIf"],["class","audioContainer",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"recordingBtn",3,"click"],[1,"fas","fa-microphone"],[1,"notRecordingBtn","blink",3,"click"],[1,"fas","fa-stop-circle"],[1,"dividerLine"],[1,"recognisedSpeechContainer"],[1,"dot-flashing"],[2,"height","40px"],[2,"opacity","0.5"],[1,"recognisedSpeech"],[1,"audioContainer"],["controls","","class","audioPlayer",4,"ngIf"],["class","notRecordingBtn trashBtn",3,"click",4,"ngIf"],["controls","",1,"audioPlayer"],["audioTag",""],[1,"notRecordingBtn","trashBtn",3,"click"],[1,"fas","fa-trash-alt"],[1,"footer",2,"padding-top","10px"],[1,"btnContainer"],[1,"footerText"],["class","changeSplitBtn","style","margin-left: auto",3,"click",4,"ngIf"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"],[1,"changeSplitBtn",2,"margin-left","auto",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.YNc(1,On,10,5,"div",1),t.YNc(2,Pn,4,1,"div",2),t.TgZ(3,"mat-drawer-container",3)(4,"mat-drawer",4,5),t.YNc(6,In,9,9,"div",6),t.qZA(),t.YNc(7,Kn,7,4,"div",7),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",r.story),t.xp6(1),t.Q6J("ngIf",r.recordings.length>0),t.xp6(4),t.Q6J("ngForOf",r.recordings),t.xp6(1),t.Q6J("ngIf",r.story))},dependencies:[d.sg,d.O5,d.PC,W.P,Vt,Kt,Mt.Hw,d.uU,pe],styles:['.content[_ngcontent-%COMP%]{width:90%;margin-left:5%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.archiveNavContainer[_ngcontent-%COMP%]{height:70vh;background-color:#fff}.sidenav[_ngcontent-%COMP%]{padding:20px;width:20vw}.archiveButton[_ngcontent-%COMP%]{display:flex;margin-left:10px;margin-top:20px;font-size:16px}.archiveButton[_ngcontent-%COMP%]:hover, .contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:20px;height:80%}.textContainerSynth[_ngcontent-%COMP%]{box-shadow:0 0 11px 2px #0006;margin-left:5%;width:90%;color:var(--dark-text);background-color:#f8f9fa;text-align:left;overflow:auto;height:100%}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{white-space:nowrap;display:inline;border-style:none;color:var(--dark-text);width:10rem;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.bookTitle[_ngcontent-%COMP%]{overflow:auto;color:var(--dark-text);margin-left:2em;margin-right:2em;display:inline-block;font-size:16pt}.recordingSaveIcon[_ngcontent-%COMP%]{width:10rem;color:var(--dark-text);border-style:none;font-size:11pt;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{white-space:nowrap;color:var(--scealai-light-brown)}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);cursor:pointer;transition:.5s}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:10px;font-weight:700;border-radius:10px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.recordingBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px;float:right}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.recognisedSpeech[_ngcontent-%COMP%]{color:var(--scealai-green);font-style:italic;padding-left:5px}.audioContainer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.audioPlayer[_ngcontent-%COMP%]{width:25%;height:35px}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}.selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}.blink[_ngcontent-%COMP%]{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),i})(),canActivate:[s.P],canDeactivate:[w]}];let tr=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[a.Bz.forChild(Xn),a.Bz]}),i})();var er=n(3869),nr=n(4385);let rr=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,tr,nr.LD,Z.u5,er.F,Fe,ue.ot,Mt.Ps,le.fi.forRoot({customOptions:[{import:"formats/font",whitelist:["sans-serif","serif","monospace","arial","times-new-roman"]}]})]}),i})()},7230:function(p){p.exports=function(v){var n={};function d(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return v[a].call(s.exports,s,s.exports,d),s.l=!0,s.exports}return d.m=v,d.c=n,d.d=function(a,s,u){d.o(a,s)||Object.defineProperty(a,s,{enumerable:!0,get:u})},d.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},d.t=function(a,s){if(1&s&&(a=d(a)),8&s||4&s&&"object"==typeof a&&a&&a.__esModule)return a;var u=Object.create(null);if(d.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),2&s&&"string"!=typeof a)for(var h in a)d.d(u,h,function(t){return a[t]}.bind(null,h));return u},d.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return d.d(s,"a",s),s},d.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},d.p="",d(d.s=90)}({17:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var a=d(18),s=function(){function u(){}return u.getFirstMatch=function(h,t){var o=t.match(h);return o&&o.length>0&&o[1]||""},u.getSecondMatch=function(h,t){var o=t.match(h);return o&&o.length>1&&o[2]||""},u.matchAndReturnConst=function(h,t,o){if(h.test(t))return o},u.getWindowsVersionName=function(h){switch(h){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},u.getMacOSVersionName=function(h){var t=h.split(".").splice(0,2).map(function(o){return parseInt(o,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},u.getAndroidVersionName=function(h){var t=h.split(".").splice(0,2).map(function(o){return parseInt(o,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},u.getVersionPrecision=function(h){return h.split(".").length},u.compareVersions=function(h,t,o){void 0===o&&(o=!1);var c=u.getVersionPrecision(h),w=u.getVersionPrecision(t),m=Math.max(c,w),g=0,x=u.map([h,t],function(y){var _=m-u.getVersionPrecision(y),C=y+new Array(_+1).join(".0");return u.map(C.split("."),function(M){return new Array(20-M.length).join("0")+M}).reverse()});for(o&&(g=m-Math.min(c,w)),m-=1;m>=g;){if(x[0][m]>x[1][m])return 1;if(x[0][m]===x[1][m]){if(m===g)return 0;m-=1}else if(x[0][m]<x[1][m])return-1}},u.map=function(h,t){var o,c=[];if(Array.prototype.map)return Array.prototype.map.call(h,t);for(o=0;o<h.length;o+=1)c.push(t(h[o]));return c},u.find=function(h,t){var o,c;if(Array.prototype.find)return Array.prototype.find.call(h,t);for(o=0,c=h.length;o<c;o+=1){var w=h[o];if(t(w,o))return w}},u.assign=function(h){for(var t,o,c=h,w=arguments.length,m=new Array(w>1?w-1:0),g=1;g<w;g++)m[g-1]=arguments[g];if(Object.assign)return Object.assign.apply(Object,[h].concat(m));var x=function(){var y=m[t];"object"==typeof y&&null!==y&&Object.keys(y).forEach(function(_){c[_]=y[_]})};for(t=0,o=m.length;t<o;t+=1)x();return h},u.getBrowserAlias=function(h){return a.BROWSER_ALIASES_MAP[h]},u.getBrowserTypeByAlias=function(h){return a.BROWSER_MAP[h]||""},u}();n.default=s,v.exports=n.default},18:function(v,n,d){"use strict";n.__esModule=!0,n.ENGINE_MAP=n.OS_MAP=n.PLATFORMS_MAP=n.BROWSER_MAP=n.BROWSER_ALIASES_MAP=void 0,n.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},n.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},n.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},n.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},n.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var a,s=(a=d(91))&&a.__esModule?a:{default:a},u=d(18);function h(o,c){for(var w=0;w<c.length;w++){var m=c[w];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(o,m.key,m)}}var t=function(){function o(){}var c,m;return o.getParser=function(g,x){if(void 0===x&&(x=!1),"string"!=typeof g)throw new Error("UserAgent should be a string");return new s.default(g,x)},o.parse=function(g){return new s.default(g).getResult()},c=o,m=[{key:"BROWSER_MAP",get:function(){return u.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return u.ENGINE_MAP}},{key:"OS_MAP",get:function(){return u.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return u.PLATFORMS_MAP}}],null&&h(c.prototype,null),m&&h(c,m),o}();n.default=t,v.exports=n.default},91:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var a=o(d(92)),s=o(d(93)),u=o(d(94)),h=o(d(95)),t=o(d(17));function o(w){return w&&w.__esModule?w:{default:w}}var c=function(){function w(g,x){if(void 0===x&&(x=!1),null==g||""===g)throw new Error("UserAgent parameter can't be empty");this._ua=g,this.parsedResult={},!0!==x&&this.parse()}var m=w.prototype;return m.getUA=function(){return this._ua},m.test=function(g){return g.test(this._ua)},m.parseBrowser=function(){var g=this;this.parsedResult.browser={};var x=t.default.find(a.default,function(y){if("function"==typeof y.test)return y.test(g);if(y.test instanceof Array)return y.test.some(function(_){return g.test(_)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.browser=x.describe(this.getUA())),this.parsedResult.browser},m.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},m.getBrowserName=function(g){return g?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},m.getBrowserVersion=function(){return this.getBrowser().version},m.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},m.parseOS=function(){var g=this;this.parsedResult.os={};var x=t.default.find(s.default,function(y){if("function"==typeof y.test)return y.test(g);if(y.test instanceof Array)return y.test.some(function(_){return g.test(_)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.os=x.describe(this.getUA())),this.parsedResult.os},m.getOSName=function(g){var x=this.getOS().name;return g?String(x).toLowerCase()||"":x||""},m.getOSVersion=function(){return this.getOS().version},m.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},m.getPlatformType=function(g){void 0===g&&(g=!1);var x=this.getPlatform().type;return g?String(x).toLowerCase()||"":x||""},m.parsePlatform=function(){var g=this;this.parsedResult.platform={};var x=t.default.find(u.default,function(y){if("function"==typeof y.test)return y.test(g);if(y.test instanceof Array)return y.test.some(function(_){return g.test(_)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.platform=x.describe(this.getUA())),this.parsedResult.platform},m.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},m.getEngineName=function(g){return g?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},m.parseEngine=function(){var g=this;this.parsedResult.engine={};var x=t.default.find(h.default,function(y){if("function"==typeof y.test)return y.test(g);if(y.test instanceof Array)return y.test.some(function(_){return g.test(_)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.engine=x.describe(this.getUA())),this.parsedResult.engine},m.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},m.getResult=function(){return t.default.assign({},this.parsedResult)},m.satisfies=function(g){var x=this,y={},_=0,C={},M=0;if(Object.keys(g).forEach(function(L){var F=g[L];"string"==typeof F?(C[L]=F,M+=1):"object"==typeof F&&(y[L]=F,_+=1)}),_>0){var k=Object.keys(y),P=t.default.find(k,function(L){return x.isOS(L)});if(P){var S=this.satisfies(y[P]);if(void 0!==S)return S}var A=t.default.find(k,function(L){return x.isPlatform(L)});if(A){var N=this.satisfies(y[A]);if(void 0!==N)return N}}if(M>0){var H=Object.keys(C),G=t.default.find(H,function(L){return x.isBrowser(L,!0)});if(void 0!==G)return this.compareVersion(C[G])}},m.isBrowser=function(g,x){void 0===x&&(x=!1);var y=this.getBrowserName().toLowerCase(),_=g.toLowerCase(),C=t.default.getBrowserTypeByAlias(_);return x&&C&&(_=C.toLowerCase()),_===y},m.compareVersion=function(g){var x=[0],y=g,_=!1,C=this.getBrowserVersion();if("string"==typeof C)return">"===g[0]||"<"===g[0]?(y=g.substr(1),"="===g[1]?(_=!0,y=g.substr(2)):x=[],x.push(">"===g[0]?1:-1)):"="===g[0]?y=g.substr(1):"~"===g[0]&&(_=!0,y=g.substr(1)),x.indexOf(t.default.compareVersions(C,y,_))>-1},m.isOS=function(g){return this.getOSName(!0)===String(g).toLowerCase()},m.isPlatform=function(g){return this.getPlatformType(!0)===String(g).toLowerCase()},m.isEngine=function(g){return this.getEngineName(!0)===String(g).toLowerCase()},m.is=function(g,x){return void 0===x&&(x=!1),this.isBrowser(g,x)||this.isOS(g)||this.isPlatform(g)},m.some=function(g){var x=this;return void 0===g&&(g=[]),g.some(function(y){return x.is(y)})},w}();n.default=c,v.exports=n.default},92:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var a,s=(a=d(17))&&a.__esModule?a:{default:a},u=/version\/(\d+(\.?_?\d+)+)/i;n.default=[{test:[/googlebot/i],describe:function(t){var o={name:"Googlebot"},c=s.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/opera/i],describe:function(t){var o={name:"Opera"},c=s.default.getFirstMatch(u,t)||s.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/opr\/|opios/i],describe:function(t){var o={name:"Opera"},c=s.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/SamsungBrowser/i],describe:function(t){var o={name:"Samsung Internet for Android"},c=s.default.getFirstMatch(u,t)||s.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/Whale/i],describe:function(t){var o={name:"NAVER Whale Browser"},c=s.default.getFirstMatch(u,t)||s.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/MZBrowser/i],describe:function(t){var o={name:"MZ Browser"},c=s.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/focus/i],describe:function(t){var o={name:"Focus"},c=s.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/swing/i],describe:function(t){var o={name:"Swing"},c=s.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/coast/i],describe:function(t){var o={name:"Opera Coast"},c=s.default.getFirstMatch(u,t)||s.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var o={name:"Opera Touch"},c=s.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/yabrowser/i],describe:function(t){var o={name:"Yandex Browser"},c=s.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/ucbrowser/i],describe:function(t){var o={name:"UC Browser"},c=s.default.getFirstMatch(u,t)||s.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/Maxthon|mxios/i],describe:function(t){var o={name:"Maxthon"},c=s.default.getFirstMatch(u,t)||s.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/epiphany/i],describe:function(t){var o={name:"Epiphany"},c=s.default.getFirstMatch(u,t)||s.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/puffin/i],describe:function(t){var o={name:"Puffin"},c=s.default.getFirstMatch(u,t)||s.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/sleipnir/i],describe:function(t){var o={name:"Sleipnir"},c=s.default.getFirstMatch(u,t)||s.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/k-meleon/i],describe:function(t){var o={name:"K-Meleon"},c=s.default.getFirstMatch(u,t)||s.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/micromessenger/i],describe:function(t){var o={name:"WeChat"},c=s.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/qqbrowser/i],describe:function(t){var o={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},c=s.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/msie|trident/i],describe:function(t){var o={name:"Internet Explorer"},c=s.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/\sedg\//i],describe:function(t){var o={name:"Microsoft Edge"},c=s.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/edg([ea]|ios)/i],describe:function(t){var o={name:"Microsoft Edge"},c=s.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/vivaldi/i],describe:function(t){var o={name:"Vivaldi"},c=s.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/seamonkey/i],describe:function(t){var o={name:"SeaMonkey"},c=s.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/sailfish/i],describe:function(t){var o={name:"Sailfish"},c=s.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return c&&(o.version=c),o}},{test:[/silk/i],describe:function(t){var o={name:"Amazon Silk"},c=s.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/phantom/i],describe:function(t){var o={name:"PhantomJS"},c=s.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/slimerjs/i],describe:function(t){var o={name:"SlimerJS"},c=s.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var o={name:"BlackBerry"},c=s.default.getFirstMatch(u,t)||s.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var o={name:"WebOS Browser"},c=s.default.getFirstMatch(u,t)||s.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/bada/i],describe:function(t){var o={name:"Bada"},c=s.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/tizen/i],describe:function(t){var o={name:"Tizen"},c=s.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/qupzilla/i],describe:function(t){var o={name:"QupZilla"},c=s.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var o={name:"Firefox"},c=s.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/electron/i],describe:function(t){var o={name:"Electron"},c=s.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/MiuiBrowser/i],describe:function(t){var o={name:"Miui"},c=s.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/chromium/i],describe:function(t){var o={name:"Chromium"},c=s.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/chrome|crios|crmo/i],describe:function(t){var o={name:"Chrome"},c=s.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/GSA/i],describe:function(t){var o={name:"Google Search"},c=s.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:function(t){var o=!t.test(/like android/i),c=t.test(/android/i);return o&&c},describe:function(t){var o={name:"Android Browser"},c=s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/playstation 4/i],describe:function(t){var o={name:"PlayStation 4"},c=s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/safari|applewebkit/i],describe:function(t){var o={name:"Safari"},c=s.default.getFirstMatch(u,t);return c&&(o.version=c),o}},{test:[/.*/i],describe:function(t){var o=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:s.default.getFirstMatch(o,t),version:s.default.getSecondMatch(o,t)}}}],v.exports=n.default},93:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var a,s=(a=d(17))&&a.__esModule?a:{default:a},u=d(18);n.default=[{test:[/Roku\/DVP/],describe:function(t){var o=s.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:u.OS_MAP.Roku,version:o}}},{test:[/windows phone/i],describe:function(t){var o=s.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:u.OS_MAP.WindowsPhone,version:o}}},{test:[/windows /i],describe:function(t){var o=s.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),c=s.default.getWindowsVersionName(o);return{name:u.OS_MAP.Windows,version:o,versionName:c}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var o={name:u.OS_MAP.iOS},c=s.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return c&&(o.version=c),o}},{test:[/macintosh/i],describe:function(t){var o=s.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),c=s.default.getMacOSVersionName(o),w={name:u.OS_MAP.MacOS,version:o};return c&&(w.versionName=c),w}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var o=s.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:u.OS_MAP.iOS,version:o}}},{test:function(t){var o=!t.test(/like android/i),c=t.test(/android/i);return o&&c},describe:function(t){var o=s.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),c=s.default.getAndroidVersionName(o),w={name:u.OS_MAP.Android,version:o};return c&&(w.versionName=c),w}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var o=s.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),c={name:u.OS_MAP.WebOS};return o&&o.length&&(c.version=o),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var o=s.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||s.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||s.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:u.OS_MAP.BlackBerry,version:o}}},{test:[/bada/i],describe:function(t){var o=s.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:u.OS_MAP.Bada,version:o}}},{test:[/tizen/i],describe:function(t){var o=s.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:u.OS_MAP.Tizen,version:o}}},{test:[/linux/i],describe:function(){return{name:u.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:u.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var o=s.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:u.OS_MAP.PlayStation4,version:o}}}],v.exports=n.default},94:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var a,s=(a=d(17))&&a.__esModule?a:{default:a},u=d(18);n.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var o=s.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",c={type:u.PLATFORMS_MAP.mobile,vendor:"Huawei"};return o&&(c.model=o),c}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet}}},{test:function(t){var o=t.test(/ipod|iphone/i),c=t.test(/like (ipod|iphone)/i);return o&&!c},describe:function(t){var o=s.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:u.PLATFORMS_MAP.mobile,vendor:"Apple",model:o}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var o=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&o>=3},describe:function(){return{type:u.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.tv}}}],v.exports=n.default},95:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var a,s=(a=d(17))&&a.__esModule?a:{default:a},u=d(18);n.default=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:u.ENGINE_MAP.Blink};var o=s.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:u.ENGINE_MAP.EdgeHTML,version:o}}},{test:[/trident/i],describe:function(t){var o={name:u.ENGINE_MAP.Trident},c=s.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:function(t){return t.test(/presto/i)},describe:function(t){var o={name:u.ENGINE_MAP.Presto},c=s.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:function(t){var o=t.test(/gecko/i),c=t.test(/like gecko/i);return o&&!c},describe:function(t){var o={name:u.ENGINE_MAP.Gecko},c=s.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:u.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var o={name:u.ENGINE_MAP.WebKit},c=s.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return c&&(o.version=c),o}}],v.exports=n.default}})},7244:(p,v,n)=>{var s=n(3436)(n(2119),"DataView");p.exports=s},4994:(p,v,n)=>{var d=n(4312),a=n(6421),s=n(13),u=n(8685),h=n(6676);function t(o){var c=-1,w=null==o?0:o.length;for(this.clear();++c<w;){var m=o[c];this.set(m[0],m[1])}}t.prototype.clear=d,t.prototype.delete=a,t.prototype.get=s,t.prototype.has=u,t.prototype.set=h,p.exports=t},9215:(p,v,n)=>{var d=n(1840),a=n(4378),s=n(4981),u=n(7343),h=n(8895);function t(o){var c=-1,w=null==o?0:o.length;for(this.clear();++c<w;){var m=o[c];this.set(m[0],m[1])}}t.prototype.clear=d,t.prototype.delete=a,t.prototype.get=s,t.prototype.has=u,t.prototype.set=h,p.exports=t},1501:(p,v,n)=>{var s=n(3436)(n(2119),"Map");p.exports=s},9850:(p,v,n)=>{var d=n(638),a=n(1184),s=n(866),u=n(3771),h=n(1772);function t(o){var c=-1,w=null==o?0:o.length;for(this.clear();++c<w;){var m=o[c];this.set(m[0],m[1])}}t.prototype.clear=d,t.prototype.delete=a,t.prototype.get=s,t.prototype.has=u,t.prototype.set=h,p.exports=t},4267:(p,v,n)=>{var s=n(3436)(n(2119),"Promise");p.exports=s},6323:(p,v,n)=>{var s=n(3436)(n(2119),"Set");p.exports=s},2858:(p,v,n)=>{var d=n(9215),a=n(3720),s=n(4410),u=n(5576),h=n(2247),t=n(1585);function o(c){var w=this.__data__=new d(c);this.size=w.size}o.prototype.clear=a,o.prototype.delete=s,o.prototype.get=u,o.prototype.has=h,o.prototype.set=t,p.exports=o},443:(p,v,n)=>{var d=n(2119);p.exports=d.Symbol},3457:(p,v,n)=>{var d=n(2119);p.exports=d.Uint8Array},4243:(p,v,n)=>{var s=n(3436)(n(2119),"WeakMap");p.exports=s},6837:p=>{p.exports=function v(n,d){for(var a=-1,s=null==n?0:n.length;++a<s&&!1!==d(n[a],a,n););return n}},9779:p=>{p.exports=function v(n,d){for(var a=-1,s=null==n?0:n.length,u=0,h=[];++a<s;){var t=n[a];d(t,a,n)&&(h[u++]=t)}return h}},2271:(p,v,n)=>{var d=n(5334),a=n(7151),s=n(1503),u=n(891),h=n(8442),t=n(8159),c=Object.prototype.hasOwnProperty;p.exports=function w(m,g){var x=s(m),y=!x&&a(m),_=!x&&!y&&u(m),C=!x&&!y&&!_&&t(m),M=x||y||_||C,k=M?d(m.length,String):[],P=k.length;for(var S in m)(g||c.call(m,S))&&(!M||!("length"==S||_&&("offset"==S||"parent"==S)||C&&("buffer"==S||"byteLength"==S||"byteOffset"==S)||h(S,P)))&&k.push(S);return k}},5059:p=>{p.exports=function v(n,d){for(var a=-1,s=d.length,u=n.length;++a<s;)n[u+a]=d[a];return n}},9719:(p,v,n)=>{var d=n(5683),a=n(217),u=Object.prototype.hasOwnProperty;p.exports=function h(t,o,c){var w=t[o];(!u.call(t,o)||!a(w,c)||void 0===c&&!(o in t))&&d(t,o,c)}},3503:(p,v,n)=>{var d=n(217);p.exports=function a(s,u){for(var h=s.length;h--;)if(d(s[h][0],u))return h;return-1}},4121:(p,v,n)=>{var d=n(1989),a=n(118);p.exports=function s(u,h){return u&&d(h,a(h),u)}},9287:(p,v,n)=>{var d=n(1989),a=n(6555);p.exports=function s(u,h){return u&&d(h,a(h),u)}},5683:(p,v,n)=>{var d=n(6713);p.exports=function a(s,u,h){"__proto__"==u&&d?d(s,u,{configurable:!0,enumerable:!0,value:h,writable:!0}):s[u]=h}},4462:(p,v,n)=>{var d=n(2858),a=n(6837),s=n(9719),u=n(4121),h=n(9287),t=n(9292),o=n(9454),c=n(4444),w=n(9905),m=n(7597),g=n(6967),x=n(8794),y=n(6782),_=n(7878),C=n(4264),M=n(1503),k=n(891),P=n(3222),S=n(5940),A=n(799),N=n(118),H=n(6555),Z="[object Arguments]",bt="[object Function]",wt="[object Object]",R={};R[Z]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object DataView]"]=R["[object Boolean]"]=R["[object Date]"]=R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Map]"]=R["[object Number]"]=R[wt]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object Symbol]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R["[object Error]"]=R[bt]=R["[object WeakMap]"]=!1,p.exports=function ht(B,nt,rt,Y,ft,Q){var J,gt=1&nt,mt=2&nt,Ht=4&nt;if(rt&&(J=ft?rt(B,Y,ft,Q):rt(B)),void 0!==J)return J;if(!S(B))return B;var vt=M(B);if(vt){if(J=y(B),!gt)return o(B,J)}else{var ot=x(B),St=ot==bt||"[object GeneratorFunction]"==ot;if(k(B))return t(B,gt);if(ot==wt||ot==Z||St&&!ft){if(J=mt||St?{}:C(B),!gt)return mt?w(B,h(J,B)):c(B,u(J,B))}else{if(!R[ot])return ft?B:{};J=_(B,ot,gt)}}Q||(Q=new d);var Tt=Q.get(B);if(Tt)return Tt;Q.set(B,J),A(B)?B.forEach(function($){J.add(ht($,nt,rt,$,B,Q))}):P(B)&&B.forEach(function($,it){J.set(it,ht($,nt,rt,it,B,Q))});var yt=vt?void 0:(Ht?mt?g:m:mt?H:N)(B);return a(yt||B,function($,it){yt&&($=B[it=$]),s(J,it,ht($,nt,rt,it,B,Q))}),J}},8858:(p,v,n)=>{var d=n(5940),a=Object.create,s=function(){function u(){}return function(h){if(!d(h))return{};if(a)return a(h);u.prototype=h;var t=new u;return u.prototype=void 0,t}}();p.exports=s},8247:(p,v,n)=>{var d=n(5059),a=n(1503);p.exports=function s(u,h,t){var o=h(u);return a(u)?o:d(o,t(u))}},3337:(p,v,n)=>{var d=n(443),a=n(1318),s=n(2902),t=d?d.toStringTag:void 0;p.exports=function o(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":t&&t in Object(c)?a(c):s(c)}},186:(p,v,n)=>{var d=n(3337),a=n(2671);p.exports=function u(h){return a(h)&&"[object Arguments]"==d(h)}},7021:(p,v,n)=>{var d=n(8794),a=n(2671);p.exports=function u(h){return a(h)&&"[object Map]"==d(h)}},7304:(p,v,n)=>{var d=n(5946),a=n(1943),s=n(5940),u=n(2827),t=/^\[object .+?Constructor\]$/,g=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");p.exports=function x(y){return!(!s(y)||a(y))&&(d(y)?g:t).test(u(y))}},771:(p,v,n)=>{var d=n(8794),a=n(2671);p.exports=function u(h){return a(h)&&"[object Set]"==d(h)}},1083:(p,v,n)=>{var d=n(3337),a=n(6231),s=n(2671),D={};D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D["[object Arguments]"]=D["[object Array]"]=D["[object ArrayBuffer]"]=D["[object Boolean]"]=D["[object DataView]"]=D["[object Date]"]=D["[object Error]"]=D["[object Function]"]=D["[object Map]"]=D["[object Number]"]=D["[object Object]"]=D["[object RegExp]"]=D["[object Set]"]=D["[object String]"]=D["[object WeakMap]"]=!1,p.exports=function K(lt){return s(lt)&&a(lt.length)&&!!D[d(lt)]}},1172:(p,v,n)=>{var d=n(5488),a=n(5491),u=Object.prototype.hasOwnProperty;p.exports=function h(t){if(!d(t))return a(t);var o=[];for(var c in Object(t))u.call(t,c)&&"constructor"!=c&&o.push(c);return o}},2809:(p,v,n)=>{var d=n(5940),a=n(5488),s=n(2158),h=Object.prototype.hasOwnProperty;p.exports=function t(o){if(!d(o))return s(o);var c=a(o),w=[];for(var m in o)"constructor"==m&&(c||!h.call(o,m))||w.push(m);return w}},5334:p=>{p.exports=function v(n,d){for(var a=-1,s=Array(n);++a<n;)s[a]=d(a);return s}},5647:p=>{p.exports=function v(n){return function(d){return n(d)}}},3362:(p,v,n)=>{var d=n(3457);p.exports=function a(s){var u=new s.constructor(s.byteLength);return new d(u).set(new d(s)),u}},9292:(p,v,n)=>{p=n.nmd(p);var d=n(2119),a=v&&!v.nodeType&&v,s=a&&p&&!p.nodeType&&p,h=s&&s.exports===a?d.Buffer:void 0,t=h?h.allocUnsafe:void 0;p.exports=function o(c,w){if(w)return c.slice();var m=c.length,g=t?t(m):new c.constructor(m);return c.copy(g),g}},7e3:(p,v,n)=>{var d=n(3362);p.exports=function a(s,u){var h=u?d(s.buffer):s.buffer;return new s.constructor(h,s.byteOffset,s.byteLength)}},4098:p=>{var v=/\w*$/;p.exports=function n(d){var a=new d.constructor(d.source,v.exec(d));return a.lastIndex=d.lastIndex,a}},2533:(p,v,n)=>{var d=n(443),a=d?d.prototype:void 0,s=a?a.valueOf:void 0;p.exports=function u(h){return s?Object(s.call(h)):{}}},5208:(p,v,n)=>{var d=n(3362);p.exports=function a(s,u){var h=u?d(s.buffer):s.buffer;return new s.constructor(h,s.byteOffset,s.length)}},9454:p=>{p.exports=function v(n,d){var a=-1,s=n.length;for(d||(d=Array(s));++a<s;)d[a]=n[a];return d}},1989:(p,v,n)=>{var d=n(9719),a=n(5683);p.exports=function s(u,h,t,o){var c=!t;t||(t={});for(var w=-1,m=h.length;++w<m;){var g=h[w],x=o?o(t[g],u[g],g,t,u):void 0;void 0===x&&(x=u[g]),c?a(t,g,x):d(t,g,x)}return t}},4444:(p,v,n)=>{var d=n(1989),a=n(9383);p.exports=function s(u,h){return d(u,a(u),h)}},9905:(p,v,n)=>{var d=n(1989),a=n(3051);p.exports=function s(u,h){return d(u,a(u),h)}},4610:(p,v,n)=>{var d=n(2119);p.exports=d["__core-js_shared__"]},6713:(p,v,n)=>{var d=n(3436),a=function(){try{var s=d(Object,"defineProperty");return s({},"",{}),s}catch{}}();p.exports=a},9122:p=>{var v="object"==typeof global&&global&&global.Object===Object&&global;p.exports=v},7597:(p,v,n)=>{var d=n(8247),a=n(9383),s=n(118);p.exports=function u(h){return d(h,s,a)}},6967:(p,v,n)=>{var d=n(8247),a=n(3051),s=n(6555);p.exports=function u(h){return d(h,s,a)}},4537:(p,v,n)=>{var d=n(3819);p.exports=function a(s,u){var h=s.__data__;return d(u)?h["string"==typeof u?"string":"hash"]:h.map}},3436:(p,v,n)=>{var d=n(7304),a=n(1990);p.exports=function s(u,h){var t=a(u,h);return d(t)?t:void 0}},9519:(p,v,n)=>{var a=n(9385)(Object.getPrototypeOf,Object);p.exports=a},1318:(p,v,n)=>{var d=n(443),a=Object.prototype,s=a.hasOwnProperty,u=a.toString,h=d?d.toStringTag:void 0;p.exports=function t(o){var c=s.call(o,h),w=o[h];try{o[h]=void 0;var m=!0}catch{}var g=u.call(o);return m&&(c?o[h]=w:delete o[h]),g}},9383:(p,v,n)=>{var d=n(9779),a=n(9975),u=Object.prototype.propertyIsEnumerable,h=Object.getOwnPropertySymbols;p.exports=h?function(o){return null==o?[]:(o=Object(o),d(h(o),function(c){return u.call(o,c)}))}:a},3051:(p,v,n)=>{var d=n(5059),a=n(9519),s=n(9383),u=n(9975);p.exports=Object.getOwnPropertySymbols?function(o){for(var c=[];o;)d(c,s(o)),o=a(o);return c}:u},8794:(p,v,n)=>{var d=n(7244),a=n(1501),s=n(4267),u=n(6323),h=n(4243),t=n(3337),o=n(2827),c="[object Map]",m="[object Promise]",g="[object Set]",x="[object WeakMap]",y="[object DataView]",_=o(d),C=o(a),M=o(s),k=o(u),P=o(h),S=t;(d&&S(new d(new ArrayBuffer(1)))!=y||a&&S(new a)!=c||s&&S(s.resolve())!=m||u&&S(new u)!=g||h&&S(new h)!=x)&&(S=function(A){var N=t(A),H="[object Object]"==N?A.constructor:void 0,G=H?o(H):"";if(G)switch(G){case _:return y;case C:return c;case M:return m;case k:return g;case P:return x}return N}),p.exports=S},1990:p=>{p.exports=function v(n,d){return n?.[d]}},4312:(p,v,n)=>{var d=n(862);p.exports=function a(){this.__data__=d?d(null):{},this.size=0}},6421:p=>{p.exports=function v(n){var d=this.has(n)&&delete this.__data__[n];return this.size-=d?1:0,d}},13:(p,v,n)=>{var d=n(862),u=Object.prototype.hasOwnProperty;p.exports=function h(t){var o=this.__data__;if(d){var c=o[t];return"__lodash_hash_undefined__"===c?void 0:c}return u.call(o,t)?o[t]:void 0}},8685:(p,v,n)=>{var d=n(862),s=Object.prototype.hasOwnProperty;p.exports=function u(h){var t=this.__data__;return d?void 0!==t[h]:s.call(t,h)}},6676:(p,v,n)=>{var d=n(862);p.exports=function s(u,h){var t=this.__data__;return this.size+=this.has(u)?0:1,t[u]=d&&void 0===h?"__lodash_hash_undefined__":h,this}},6782:p=>{var n=Object.prototype.hasOwnProperty;p.exports=function d(a){var s=a.length,u=new a.constructor(s);return s&&"string"==typeof a[0]&&n.call(a,"index")&&(u.index=a.index,u.input=a.input),u}},7878:(p,v,n)=>{var d=n(3362),a=n(7e3),s=n(4098),u=n(2533),h=n(5208);p.exports=function F(Z,W,D){var K=Z.constructor;switch(W){case"[object ArrayBuffer]":return d(Z);case"[object Boolean]":case"[object Date]":return new K(+Z);case"[object DataView]":return a(Z,D);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return h(Z,D);case"[object Map]":case"[object Set]":return new K;case"[object Number]":case"[object String]":return new K(Z);case"[object RegExp]":return s(Z);case"[object Symbol]":return u(Z)}}},4264:(p,v,n)=>{var d=n(8858),a=n(9519),s=n(5488);p.exports=function u(h){return"function"!=typeof h.constructor||s(h)?{}:d(a(h))}},8442:p=>{var n=/^(?:0|[1-9]\d*)$/;p.exports=function d(a,s){var u=typeof a;return!!(s=s??9007199254740991)&&("number"==u||"symbol"!=u&&n.test(a))&&a>-1&&a%1==0&&a<s}},3819:p=>{p.exports=function v(n){var d=typeof n;return"string"==d||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==n:null===n}},1943:(p,v,n)=>{var u,d=n(4610),a=(u=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"";p.exports=function s(u){return!!a&&a in u}},5488:p=>{var v=Object.prototype;p.exports=function n(d){var a=d&&d.constructor;return d===("function"==typeof a&&a.prototype||v)}},1840:p=>{p.exports=function v(){this.__data__=[],this.size=0}},4378:(p,v,n)=>{var d=n(3503),s=Array.prototype.splice;p.exports=function u(h){var t=this.__data__,o=d(t,h);return!(o<0||(o==t.length-1?t.pop():s.call(t,o,1),--this.size,0))}},4981:(p,v,n)=>{var d=n(3503);p.exports=function a(s){var u=this.__data__,h=d(u,s);return h<0?void 0:u[h][1]}},7343:(p,v,n)=>{var d=n(3503);p.exports=function a(s){return d(this.__data__,s)>-1}},8895:(p,v,n)=>{var d=n(3503);p.exports=function a(s,u){var h=this.__data__,t=d(h,s);return t<0?(++this.size,h.push([s,u])):h[t][1]=u,this}},638:(p,v,n)=>{var d=n(4994),a=n(9215),s=n(1501);p.exports=function u(){this.size=0,this.__data__={hash:new d,map:new(s||a),string:new d}}},1184:(p,v,n)=>{var d=n(4537);p.exports=function a(s){var u=d(this,s).delete(s);return this.size-=u?1:0,u}},866:(p,v,n)=>{var d=n(4537);p.exports=function a(s){return d(this,s).get(s)}},3771:(p,v,n)=>{var d=n(4537);p.exports=function a(s){return d(this,s).has(s)}},1772:(p,v,n)=>{var d=n(4537);p.exports=function a(s,u){var h=d(this,s),t=h.size;return h.set(s,u),this.size+=h.size==t?0:1,this}},862:(p,v,n)=>{var a=n(3436)(Object,"create");p.exports=a},5491:(p,v,n)=>{var a=n(9385)(Object.keys,Object);p.exports=a},2158:p=>{p.exports=function v(n){var d=[];if(null!=n)for(var a in Object(n))d.push(a);return d}},3597:(p,v,n)=>{p=n.nmd(p);var d=n(9122),a=v&&!v.nodeType&&v,s=a&&p&&!p.nodeType&&p,h=s&&s.exports===a&&d.process,t=function(){try{return s&&s.require&&s.require("util").types||h&&h.binding&&h.binding("util")}catch{}}();p.exports=t},2902:p=>{var n=Object.prototype.toString;p.exports=function d(a){return n.call(a)}},9385:p=>{p.exports=function v(n,d){return function(a){return n(d(a))}}},2119:(p,v,n)=>{var d=n(9122),a="object"==typeof self&&self&&self.Object===Object&&self,s=d||a||Function("return this")();p.exports=s},3720:(p,v,n)=>{var d=n(9215);p.exports=function a(){this.__data__=new d,this.size=0}},4410:p=>{p.exports=function v(n){var d=this.__data__,a=d.delete(n);return this.size=d.size,a}},5576:p=>{p.exports=function v(n){return this.__data__.get(n)}},2247:p=>{p.exports=function v(n){return this.__data__.has(n)}},1585:(p,v,n)=>{var d=n(9215),a=n(1501),s=n(9850);p.exports=function h(t,o){var c=this.__data__;if(c instanceof d){var w=c.__data__;if(!a||w.length<199)return w.push([t,o]),this.size=++c.size,this;c=this.__data__=new s(w)}return c.set(t,o),this.size=c.size,this}},2827:p=>{var n=Function.prototype.toString;p.exports=function d(a){if(null!=a){try{return n.call(a)}catch{}try{return a+""}catch{}}return""}},1094:(p,v,n)=>{var d=n(4462);p.exports=function s(u){return d(u,4)}},217:p=>{p.exports=function v(n,d){return n===d||n!=n&&d!=d}},7151:(p,v,n)=>{var d=n(186),a=n(2671),s=Object.prototype,u=s.hasOwnProperty,h=s.propertyIsEnumerable,t=d(function(){return arguments}())?d:function(o){return a(o)&&u.call(o,"callee")&&!h.call(o,"callee")};p.exports=t},1503:p=>{p.exports=Array.isArray},6507:(p,v,n)=>{var d=n(5946),a=n(6231);p.exports=function s(u){return null!=u&&a(u.length)&&!d(u)}},891:(p,v,n)=>{p=n.nmd(p);var d=n(2119),a=n(3580),s=v&&!v.nodeType&&v,u=s&&p&&!p.nodeType&&p,t=u&&u.exports===s?d.Buffer:void 0;p.exports=(t?t.isBuffer:void 0)||a},5946:(p,v,n)=>{var d=n(3337),a=n(5940);p.exports=function o(c){if(!a(c))return!1;var w=d(c);return"[object Function]"==w||"[object GeneratorFunction]"==w||"[object AsyncFunction]"==w||"[object Proxy]"==w}},6231:p=>{p.exports=function n(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=9007199254740991}},3222:(p,v,n)=>{var d=n(7021),a=n(5647),s=n(3597),u=s&&s.isMap,h=u?a(u):d;p.exports=h},5940:p=>{p.exports=function v(n){var d=typeof n;return null!=n&&("object"==d||"function"==d)}},2671:p=>{p.exports=function v(n){return null!=n&&"object"==typeof n}},799:(p,v,n)=>{var d=n(771),a=n(5647),s=n(3597),u=s&&s.isSet,h=u?a(u):d;p.exports=h},8159:(p,v,n)=>{var d=n(1083),a=n(5647),s=n(3597),u=s&&s.isTypedArray,h=u?a(u):d;p.exports=h},118:(p,v,n)=>{var d=n(2271),a=n(1172),s=n(6507);p.exports=function u(h){return s(h)?d(h):a(h)}},6555:(p,v,n)=>{var d=n(2271),a=n(2809),s=n(6507);p.exports=function u(h){return s(h)?d(h,!0):a(h)}},9975:p=>{p.exports=function v(){return[]}},3580:p=>{p.exports=function v(){return!1}},2754:(p,v,n)=>{"use strict";v.TD=void 0;var a=n(4354);Object.defineProperty(v,"TD",{enumerable:!0,get:function(){return a.requestMediaPermissions}})},4354:function(p,v,n){"use strict";var d=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(v,"__esModule",{value:!0}),v.requestVideoPermissions=v.requestAudioPermissions=v.requestMediaPermissions=v.MediaPermissionsErrorType=void 0;const a=d(n(7230));var s,o;(o=s=v.MediaPermissionsErrorType||(v.MediaPermissionsErrorType={})).SystemPermissionDenied="SystemPermissionDenied",o.UserPermissionDenied="UserPermissionDenied",o.CouldNotStartVideoSource="CouldNotStartVideoSource",o.Generic="Generic",v.requestMediaPermissions=o=>new Promise((c,w)=>{navigator.mediaDevices.getUserMedia(o??{audio:!0,video:!0}).then(m=>{m.getTracks().forEach(g=>{g.stop()}),c(!0)}).catch(m=>{const x=a.default.getParser(window.navigator.userAgent).getBrowserName(),y=m.name,_=m.message;let C=s.Generic;"Chrome"===x?"NotAllowedError"===y?"Permission denied by system"===_?C=s.SystemPermissionDenied:"Permission denied"===_&&(C=s.UserPermissionDenied):"NotReadableError"===y&&(C=s.CouldNotStartVideoSource):"Safari"===x?"NotAllowedError"===y&&(C=s.UserPermissionDenied):"Microsoft Edge"===x?"NotAllowedError"===y?C=s.UserPermissionDenied:"NotReadableError"===y&&(C=s.CouldNotStartVideoSource):"Firefox"===x&&("NotFoundError"===y||"NotReadableError"===y?C=s.SystemPermissionDenied:"NotAllowedError"===y?C=s.UserPermissionDenied:"AbortError"===y&&(C=s.CouldNotStartVideoSource)),w({type:C,name:m.name,message:m.message})})}),v.requestAudioPermissions=()=>(0,v.requestMediaPermissions)({audio:!0,video:!1}),v.requestVideoPermissions=()=>(0,v.requestMediaPermissions)({audio:!1,video:!0})},5439:p=>{window,p.exports=function(v){var n={};function d(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return v[a].call(s.exports,s,s.exports,d),s.l=!0,s.exports}return d.m=v,d.c=n,d.d=function(a,s,u){d.o(a,s)||Object.defineProperty(a,s,{enumerable:!0,get:u})},d.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},d.t=function(a,s){if(1&s&&(a=d(a)),8&s||4&s&&"object"==typeof a&&a&&a.__esModule)return a;var u=Object.create(null);if(d.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),2&s&&"string"!=typeof a)for(var h in a)d.d(u,h,function(t){return a[t]}.bind(null,h));return u},d.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return d.d(s,"a",s),s},d.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},d.p="/dist/",d(d.s=1)}([function(v,n,d){"use strict";var a=this&&this.__awaiter||function(u,h,t,o){return new(t||(t=Promise))(function(c,w){function m(y){try{x(o.next(y))}catch(_){w(_)}}function g(y){try{x(o.throw(y))}catch(_){w(_)}}function x(y){var _;y.done?c(y.value):(_=y.value,_ instanceof t?_:new t(function(C){C(_)})).then(m,g)}x((o=o.apply(u,h||[])).next())})},s=this&&this.__generator||function(u,h){var t,o,c,w,m={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return w={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function g(x){return function(y){return function(_){if(t)throw new TypeError("Generator is already executing.");for(;w&&(w=0,_[0]&&(m=0)),m;)try{if(t=1,o&&(c=2&_[0]?o.return:_[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,_[1])).done)return c;switch(o=0,c&&(_=[2&_[0],c.value]),_[0]){case 0:case 1:c=_;break;case 4:return m.label++,{value:_[1],done:!1};case 5:m.label++,o=_[1],_=[0];continue;case 7:_=m.ops.pop(),m.trys.pop();continue;default:if(!((c=(c=m.trys).length>0&&c[c.length-1])||6!==_[0]&&2!==_[0])){m=0;continue}if(3===_[0]&&(!c||_[1]>c[0]&&_[1]<c[3])){m.label=_[1];break}if(6===_[0]&&m.label<c[1]){m.label=c[1],c=_;break}if(c&&m.label<c[2]){m.label=c[2],m.ops.push(_);break}c[2]&&m.ops.pop(),m.trys.pop();continue}_=h.call(u,m)}catch(C){_=[6,C],o=0}finally{t=c=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([x,y])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.file2b64=void 0,n.file2b64=function(u){return a(this,void 0,void 0,function(){var h,t;return s(this,function(o){return h=new FileReader,t=new Promise(function(c,w){h.addEventListener("load",function(){var m,g=null===(m=h.result)||void 0===m?void 0:m.toString();g?c(g):w("could not convert file to base64")},!1)}),h.readAsDataURL(u),[2,t]})})}},function(v,n,d){"use strict";var a=this&&this.__awaiter||function(m,g,x,y){return new(x||(x=Promise))(function(_,C){function M(S){try{P(y.next(S))}catch(A){C(A)}}function k(S){try{P(y.throw(S))}catch(A){C(A)}}function P(S){var A;S.done?_(S.value):(A=S.value,A instanceof x?A:new x(function(N){N(A)})).then(M,k)}P((y=y.apply(m,g||[])).next())})},s=this&&this.__generator||function(m,g){var x,y,_,C,M={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return C={next:k(0),throw:k(1),return:k(2)},"function"==typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function k(P){return function(S){return function(A){if(x)throw new TypeError("Generator is already executing.");for(;C&&(C=0,A[0]&&(M=0)),M;)try{if(x=1,y&&(_=2&A[0]?y.return:A[0]?y.throw||((_=y.return)&&_.call(y),0):y.next)&&!(_=_.call(y,A[1])).done)return _;switch(y=0,_&&(A=[2&A[0],_.value]),A[0]){case 0:case 1:_=A;break;case 4:return M.label++,{value:A[1],done:!1};case 5:M.label++,y=A[1],A=[0];continue;case 7:A=M.ops.pop(),M.trys.pop();continue;default:if(!((_=(_=M.trys).length>0&&_[_.length-1])||6!==A[0]&&2!==A[0])){M=0;continue}if(3===A[0]&&(!_||A[1]>_[0]&&A[1]<_[3])){M.label=A[1];break}if(6===A[0]&&M.label<_[1]){M.label=_[1],_=A;break}if(_&&M.label<_[2]){M.label=_[2],M.ops.push(A);break}_[2]&&M.ops.pop(),M.trys.pop();continue}A=g.call(m,M)}catch(N){A=[6,N],y=0}finally{x=_=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([P,S])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.imageCompressor=void 0;var u=d(2),h=d(3),t=d(0),o=d(4),c=d(5),w=function(){function m(g,x){var y=this;this.quill=g,this.options=x||{};var _=!!x.debug;this.Logger=new c.ConsoleLogger(_,!!x.suppressErrorLogging),(0,h.warnAboutOptions)(x,this.Logger),this.imageDrop=new u.ImageDrop(g,function(k){return a(y,void 0,void 0,function(){var P;return s(this,function(S){switch(S.label){case 0:return this.Logger.log("onImageDrop",{dataUrl:k}),[4,this.downscaleImageFromUrl(k)];case 1:return P=S.sent(),this.insertToEditor(P,m.b64toBlob(P)),[2]}})})},this.Logger),this.Logger.log("fileChanged",{options:x,quill:g,debug:_});var M=this.quill.getModule("toolbar");M?M.addHandler("image",function(){return y.selectLocalImage()}):this.Logger.error("Quill toolbar module not found! need { toolbar: // options } in Quill.modules for image icon to sit in")}return m.b64toBlob=function(g){for(var x=atob(g.split(",")[1]),y=g.slice(5).split(";")[0],_=new ArrayBuffer(x.length),C=new Uint8Array(_),M=0;M<x.length;M++)C[M]=x.charCodeAt(M);return new Blob([_],{type:y})},m.prototype.selectLocalImage=function(g){var x=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=function(){return x.fileChanged().then(function(){return g&&g()})},document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){x.fileHolder&&document.body.removeChild(x.fileHolder)})},m.prototype.fileChanged=function(g){var x;return a(this,void 0,void 0,function(){var y,_,C,M;return s(this,function(k){switch(k.label){case 0:return(y=g||(null===(x=this.fileHolder)||void 0===x?void 0:x.files))&&y.length?(this.Logger.log("fileChanged",{file:_=y[0]}),_?[4,(0,t.file2b64)(_)]:[2]):[2];case 1:return C=k.sent(),[4,this.downscaleImageFromUrl(C)];case 2:return M=k.sent(),this.insertToEditor(M,m.b64toBlob(M)),[2]}})})},m.prototype.downscaleImageFromUrl=function(g){return a(this,void 0,void 0,function(){var x;return s(this,function(y){switch(y.label){case 0:return[4,(0,o.downscaleImage)(this.Logger,g,this.options.maxWidth,this.options.maxHeight,this.options.imageType,this.options.keepImageTypes,this.options.ignoreImageTypes,this.options.quality)];case 1:return x=y.sent(),this.Logger.log("downscaleImageFromUrl",{dataUrl:g,dataUrlCompressed:x}),[2,x]}})})},m.prototype.insertToEditor=function(g,x){if(this.options.insertIntoEditor)this.options.insertIntoEditor(g,x);else{this.Logger.log("insertToEditor",{url:g}),this.range=this.quill.getSelection();var y=this.range;if(!y)return;this.logFileSize(g),this.quill.insertEmbed(y.index,"image","".concat(g),"user"),y.index++,this.quill.setSelection(y,"api")}},m.prototype.logFileSize=function(g){var x=(Math.round(3*(g.length-22)/4)/1024).toFixed(0);this.Logger.log("estimated img size: "+x+" kb")},m}();n.imageCompressor=w,window.imageCompressor=w,n.default=w},function(v,n,d){"use strict";var a=this&&this.__awaiter||function(w,m,g,x){return new(g||(g=Promise))(function(y,_){function C(P){try{k(x.next(P))}catch(S){_(S)}}function M(P){try{k(x.throw(P))}catch(S){_(S)}}function k(P){var S;P.done?y(P.value):(S=P.value,S instanceof g?S:new g(function(A){A(S)})).then(C,M)}k((x=x.apply(w,m||[])).next())})},s=this&&this.__generator||function(w,m){var g,x,y,_,C={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return _={next:M(0),throw:M(1),return:M(2)},"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_;function M(k){return function(P){return function(S){if(g)throw new TypeError("Generator is already executing.");for(;_&&(_=0,S[0]&&(C=0)),C;)try{if(g=1,x&&(y=2&S[0]?x.return:S[0]?x.throw||((y=x.return)&&y.call(x),0):x.next)&&!(y=y.call(x,S[1])).done)return y;switch(x=0,y&&(S=[2&S[0],y.value]),S[0]){case 0:case 1:y=S;break;case 4:return C.label++,{value:S[1],done:!1};case 5:C.label++,x=S[1],S=[0];continue;case 7:S=C.ops.pop(),C.trys.pop();continue;default:if(!((y=(y=C.trys).length>0&&y[y.length-1])||6!==S[0]&&2!==S[0])){C=0;continue}if(3===S[0]&&(!y||S[1]>y[0]&&S[1]<y[3])){C.label=S[1];break}if(6===S[0]&&C.label<y[1]){C.label=y[1],y=S;break}if(y&&C.label<y[2]){C.label=y[2],C.ops.push(S);break}y[2]&&C.ops.pop(),C.trys.pop();continue}S=m.call(w,C)}catch(A){S=[6,A],x=0}finally{g=y=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([k,P])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ImageDrop=void 0;var u=d(0),h=function(){function w(m,g,x){var y=this;this.quill=m,this.onNewDataUrl=g,this.logger=x,this.quill.root.addEventListener("drop",function(_){return y.handleDrop(_)},!1),this.quill.root.addEventListener("paste",function(_){return y.handlePaste(_)},!1)}return w.prototype.handleDrop=function(m){return a(this,void 0,void 0,function(){var g,x,y,_,C,M,k;return s(this,function(P){switch(P.label){case 0:return m.preventDefault(),document.caretRangeFromPoint&&(g=document.getSelection(),x=document.caretRangeFromPoint(m.clientX,m.clientY),g&&x&&g.setBaseAndExtent(x.startContainer,x.startOffset,x.startContainer,x.startOffset)),[4,o(m)];case 1:return y=P.sent(),_=Array.from(y||[]).filter(function(S){return c(S.type)}),(C=_?.[0])?[4,(0,u.file2b64)(C)]:[3,3];case 2:return k=P.sent(),this.logger.log("handleNewImageFiles",{evt:m,files:y,filesFiltered:_,firstImage:C,base64ImageSrc:k}),this.onNewDataUrl(k),[2];case 3:return[4,t(m)];case 4:return(M=P.sent())?[4,(0,u.file2b64)(M)]:[3,6];case 5:return k=P.sent(),this.logger.log("handleNewImageFiles",{evt:m,blob:M,base64ImageSrc:k}),this.onNewDataUrl(k),[2];case 6:return[2]}})})},w.prototype.handlePaste=function(m){var g,x;return a(this,void 0,void 0,function(){var y,_,C,M;return s(this,function(k){switch(k.label){case 0:return y=Array.from((null===(g=m?.clipboardData)||void 0===g?void 0:g.items)||[]),this.logger.log("handlePaste",{files:y,evt:m}),_=y.filter(function(P){return c(P.type)}),this.logger.log("handlePaste",{images:_,evt:m}),_.length?_.filter(function(P){return"text/html"!==P.type}).length?(m.preventDefault(),(C=null===(x=_.pop())||void 0===x?void 0:x.getAsFile())?[4,(0,u.file2b64)(C)]:[2]):(this.logger.log("handlePaste also detected html"),[2]):[2];case 1:return M=k.sent(),this.logger.log("handleNewImageFiles",{base64ImageSrc:M}),this.onNewDataUrl(M),[2]}})})},w}();function t(w){var m;return a(this,void 0,void 0,function(){var g;return s(this,function(x){switch(x.label){case 0:return(g=null===(m=w.dataTransfer)||void 0===m?void 0:m.getData("URL"))?[4,fetch(g)]:[3,3];case 1:return[4,x.sent().blob()];case 2:return[2,x.sent()];case 3:return[2]}})})}function o(w){var m;return a(this,void 0,void 0,function(){return s(this,function(g){return[2,null===(m=w?.dataTransfer)||void 0===m?void 0:m.files]})})}function c(w){return!!w.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)/i)}n.ImageDrop=h},function(v,n,d){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.warnAboutOptions=void 0,n.warnAboutOptions=function(a,s){a.maxWidth=a.maxWidth||1e3,a.maxHeight=a.maxHeight||1e3,a.maxWidth&&"number"!=typeof a.maxWidth&&(s.warn("[config error] 'maxWidth' is required to be a \"number\" (in pixels), \nreceived: ".concat(a.maxWidth,"\n-> using default 1000")),a.maxWidth=1e3),a.maxHeight&&"number"!=typeof a.maxHeight&&(s.warn("[config error] 'maxHeight' is required to be a \"number\" (in pixels), \nreceived: ".concat(a.maxHeight,"\n-> using default 1000")),a.maxHeight=1e3),a.quality&&"number"!=typeof a.quality&&(s.warn("quill.imageCompressor: [config error] 'quality' is required to be a \"number\", \nreceived: ".concat(a.quality,"\n-> using default 0.7")),a.quality=.7),!a.imageType||"string"==typeof a.imageType&&a.imageType.startsWith("image/")||(s.warn('quill.imageCompressor: [config error] \'imageType\' is required be in the form of "image/png" or "image/jpeg" etc ..., \nreceived: '.concat(a.imageType,"\n-> using default image/jpeg")),a.imageType="image/jpeg"),a.keepImageTypes||(a.keepImageTypes=[]),a.keepImageTypes&&!Array.isArray(a.keepImageTypes)&&(s.warn("quill.imageCompressor: [config error] 'keepImageTypes' is required to be a \"array\", received: ".concat(a.keepImageTypes," -> using default []")),a.keepImageTypes=[]),a.ignoreImageTypes||(a.ignoreImageTypes=[]),a.ignoreImageTypes&&!Array.isArray(a.ignoreImageTypes)&&(s.warn("quill.imageCompressor: [config error] 'ignoreImageTypes' is required to be a \"array\", received: ".concat(a.ignoreImageTypes," -> using default []")),a.ignoreImageTypes=[]),a.insertIntoEditor&&"function"!=typeof a.insertIntoEditor&&(s.warn("quill.imageCompressor: [config error] 'insertIntoEditor' is required to be a \"function\", received: ".concat(a.insertIntoEditor," -> using default undefined")),a.insertIntoEditor=void 0)}},function(v,n,d){"use strict";var a=this&&this.__awaiter||function(u,h,t,o){return new(t||(t=Promise))(function(c,w){function m(y){try{x(o.next(y))}catch(_){w(_)}}function g(y){try{x(o.throw(y))}catch(_){w(_)}}function x(y){var _;y.done?c(y.value):(_=y.value,_ instanceof t?_:new t(function(C){C(_)})).then(m,g)}x((o=o.apply(u,h||[])).next())})},s=this&&this.__generator||function(u,h){var t,o,c,w,m={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return w={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function g(x){return function(y){return function(_){if(t)throw new TypeError("Generator is already executing.");for(;w&&(w=0,_[0]&&(m=0)),m;)try{if(t=1,o&&(c=2&_[0]?o.return:_[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,_[1])).done)return c;switch(o=0,c&&(_=[2&_[0],c.value]),_[0]){case 0:case 1:c=_;break;case 4:return m.label++,{value:_[1],done:!1};case 5:m.label++,o=_[1],_=[0];continue;case 7:_=m.ops.pop(),m.trys.pop();continue;default:if(!((c=(c=m.trys).length>0&&c[c.length-1])||6!==_[0]&&2!==_[0])){m=0;continue}if(3===_[0]&&(!c||_[1]>c[0]&&_[1]<c[3])){m.label=_[1];break}if(6===_[0]&&m.label<c[1]){m.label=c[1],c=_;break}if(c&&m.label<c[2]){m.label=c[2],m.ops.push(_);break}c[2]&&m.ops.pop(),m.trys.pop();continue}_=h.call(u,m)}catch(C){_=[6,C],o=0}finally{t=c=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([x,y])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.downscaleImage=void 0,n.downscaleImage=function(u,h,t,o,c,w,m,g){return a(this,void 0,void 0,function(){var x,y,_,C,M,k,P,S;return s(this,function(A){switch(A.label){case 0:return x=h.split(";")[0].split(":")[1],c=c||"image/jpeg",g=g||.7,(y=new Image).src=h,[4,new Promise(function(N){y.onload=function(){N()}})];case 1:return A.sent(),_=function(N,H,G,L){if(G&&L&&N<=G&&H<=L)return[N,H];if(G&&N>G){var F=G,Z=Math.floor(H/N*F);if(L&&Z>L){var W=L;return[Math.floor(N/H*W),W]}return[F,Z]}return L&&H>L?(Z=L,[F=Math.floor(N/H*Z),Z]):[H,N]}(y.width,y.height,t,o),C=_[0],M=_[1],(k=document.createElement("canvas")).width=C,k.height=M,P=k.getContext("2d"),"image/jpeg"===c&&(P.fillStyle="#FFFFFF",P.fillRect(0,0,y.width,y.height)),m?.includes(x)?[2,h]:(w?.includes(x)&&(c=x),P.drawImage(y,0,0,C,M),S=k.toDataURL(c,g),u.log("downscaling image...",{args:{dataUrl:h,maxWidth:t,maxHeight:o,imageType:c,ignoreImageTypes:m,keepImageTypes:w,imageQuality:g},newHeight:M,newWidth:C}),[2,S])}})})}},function(v,n,d){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ConsoleLogger=void 0;var a=function(){function s(u,h){this.debug=u,this.suppressErrorLogging=h}return s.prototype.prefixString=function(){return"</> quill-image-compress: "},Object.defineProperty(s.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"error",{get:function(){return this.suppressErrorLogging?function(){}:console.error.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"warn",{get:function(){return this.suppressErrorLogging?function(){}:console.warn.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),s}();n.ConsoleLogger=a}])}}]);
(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[653],{6653:(br,ln,M)=>{"use strict";M.r(ln),M.d(ln,{AdminModule:()=>Fd});var H=M(6895),z=M(4006),ye=M(1390),Ue=M(8977),e=M(4650);let dn=(()=>{class n{constructor(t){this.ts=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ue.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-dashboard"]],decls:21,vars:3,consts:[[1,"content"],[1,"adminTitle"],[1,"buttonContainer"],[1,"buttonRow"],["routerLink","teachers",1,"adminBtnContainer"],["routerLink","find-user",1,"adminBtnContainer"],[1,"adminBtnContainer"],["href","https://analytics.google.com/analytics/web/?authuser=2#/report-home/a178889778w247370276p229672953","target","_blank",1,"adminBtnContainer",2,"text-decoration","none"],["routerLink","database-stats",1,"adminBtnContainer"],["routerLink","profile-stats",1,"adminBtnContainer"],["routerLink","feature-stats",1,"adminBtnContainer"],["routerLink","add-content",1,"adminBtnContainer"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"div",5),e._uU(8),e.qZA(),e.TgZ(9,"div",6)(10,"a",7),e._uU(11," Google Analytics "),e.qZA()()(),e.TgZ(12,"div",3)(13,"div",8),e._uU(14," DB Stats "),e.qZA(),e.TgZ(15,"div",9),e._uU(16," Profile Stats "),e.qZA(),e.TgZ(17,"div",10),e._uU(18," Feature Stats "),e.qZA(),e.TgZ(19,"div",11),e._uU(20," Add Content "),e.qZA()()()()),2&t&&(e.xp6(2),e.hij(" ",i.ts.l.admin_dashboard," "),e.xp6(4),e.hij(" ",i.ts.l.teachers," "),e.xp6(2),e.hij(" ",i.ts.l.find_user," "))},dependencies:[ye.rH],styles:[".content[_ngcontent-%COMP%]{width:90%;margin-left:5%;height:72vh;background-color:#fff;border-radius:5px;box-shadow:-1px 5px 32px 10px #0003}.adminTitle[_ngcontent-%COMP%]{font-size:20pt;height:6vh;display:flex;align-items:center;justify-content:center;color:#fff;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0}.buttonContainer[_ngcontent-%COMP%]{padding:10%;padding-top:25vh;align-items:center;justify-content:center;overflow:auto;flex-wrap:wrap}.buttonRow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:5px;flex-wrap:wrap}.adminBtnContainer[_ngcontent-%COMP%]{width:150px;height:80px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:16pt;background-color:var(--scealai-med-brown);margin:5px;border-radius:5px}.adminBtnContainer[_ngcontent-%COMP%]:hover{color:var(--orange-text);background-color:var(--scealai-med-brown-hover);transition:color,background-color,.5s;cursor:pointer}@media (max-width: 550px){.content[_ngcontent-%COMP%]{flex-direction:column;flex-wrap:nowrap;padding-left:5%;padding-right:5%;margin-top:0vh}.adminBtnContainer[_ngcontent-%COMP%]{width:90%;height:80px;padding:10px}}"]}),n})();var fn=M(1042),De=M(4186),ct=M(4633),Qe=M(529),un=M(5412);function Tt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",13),e._uU(1),e.TgZ(2,"i",14),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.openDeleteCodeDialog(o.code))}),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function pn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.goToUser(o._id))}),e._uU(1),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.username," ")}}let Qn=(()=>{class n{constructor(t,i,r,o){this.http=t,this.router=i,this.ts=r,this.dialog=o,this.copiedTextClass="hidden",this.baseUrl=De.Z.baseurl}ngOnInit(){this.getActiveTeacherCodes(),this.getTeachers()}generateCode(){this.teacherCode=(0,fn.Z)(),this.http.post(this.baseUrl+"teacherCode/create",{code:this.teacherCode}).subscribe(i=>{this.getActiveTeacherCodes()})}getActiveTeacherCodes(){this.http.get(this.baseUrl+"teacherCode/activeCodes").subscribe(t=>{this.activeTeacherCodes=t})}getTeachers(){this.http.get(this.baseUrl+"user/teachers").subscribe(t=>{this.teachers=t})}deleteTeacherCode(){null!=this.codeToDelete&&this.http.get(this.baseUrl+"teacherCode/delete/"+this.codeToDelete).subscribe(t=>{this.getActiveTeacherCodes()})}copyToClipboard(){document.addEventListener("copy",t=>{t.clipboardData.setData("text/plain",this.teacherCode.toString()),t.preventDefault(),document.removeEventListener("copy",null)}),document.execCommand("copy"),this.copiedTextClass="visible",setTimeout(()=>this.copiedTextClass="hiddenFade",1e3)}openDeleteCodeDialog(t){this.codeToDelete=t,this.dialogRef=this.dialog.open(ct.p,{data:{title:this.ts.l.sure_you_want_to_delete_code,confirmText:this.ts.l.delete,cancelText:this.ts.l.cancel},width:"50%"}),this.dialogRef.afterClosed().subscribe(i=>{this.dialogRef=void 0,i&&this.deleteTeacherCode()})}goToUser(t){this.router.navigateByUrl("admin/user/"+t.toString())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Qe.eN),e.Y36(ye.F0),e.Y36(Ue.D),e.Y36(un.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-teachers"]],decls:23,vars:11,consts:[[1,"adminContent"],[1,"generateCodeTitle"],[1,"teacherCodeTitle"],[1,"teacherCodeButton",3,"click"],[1,"teacherCodeDisplay"],["readonly","",1,"teacherCodeTextarea"],[1,"far","fa-copy","copyIcon",3,"click"],[1,"teacherAccountsContainer"],[1,"teacherAccountsDisplay"],[1,"teacherAccountsHeader"],[1,"teacherAccountsBody"],["class","activeTeacherCodeContainer",4,"ngFor","ngForOf"],["class","activeTeacherCodeContainer whiteBtn",3,"click",4,"ngFor","ngForOf"],[1,"activeTeacherCodeContainer"],["aria-hidden","true",1,"fa","fa-times","greenBtn",3,"click"],[1,"activeTeacherCodeContainer","whiteBtn",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return i.generateCode()}),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"textarea",5),e._uU(8),e.qZA(),e.TgZ(9,"i",6),e.NdJ("click",function(){return i.copyToClipboard()}),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA()(),e.TgZ(12,"div",7)(13,"div",8)(14,"div",9),e._uU(15),e.qZA(),e.TgZ(16,"div",10),e.YNc(17,Tt,3,1,"div",11),e.qZA()(),e.TgZ(18,"div",8)(19,"div",9),e._uU(20),e.qZA(),e.TgZ(21,"div",10),e.YNc(22,pn,2,1,"div",12),e.qZA()()()()),2&t&&(e.xp6(3),e.Oqu(i.ts.l.teacher_account_code),e.xp6(2),e.Oqu(i.ts.l.generate),e.xp6(3),e.Oqu(i.teacherCode),e.xp6(2),e.Gre("",i.copiedTextClass," copiedText"),e.xp6(1),e.hij("",i.ts.l.copied,"!"),e.xp6(4),e.hij(" ",i.ts.l.active_account_codes," "),e.xp6(2),e.Q6J("ngForOf",i.activeTeacherCodes),e.xp6(3),e.hij(" ",i.ts.l.teacher_accounts," "),e.xp6(2),e.Q6J("ngForOf",i.teachers))},dependencies:[H.sg],styles:[".adminContent[_ngcontent-%COMP%]{flex-direction:column}.generateCodeTitle[_ngcontent-%COMP%]{font-size:14pt;display:flex;justify-content:center}.teacherCodeTitle[_ngcontent-%COMP%]{padding:5px}.teacherCodeButton[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;padding:5px 10px;margin-left:10px;border-radius:5px}.teacherCodeButton[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--scealai-dark-green)}.teacherCodeDisplay[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:2vh}.teacherCodeTextarea[_ngcontent-%COMP%]{width:40%;height:30px;font-size:12pt;resize:none;background-color:#d1d1d1;border:none;border-radius:5px 0 0 5px}.copyIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;width:30px;height:30px;padding:4px;font-size:16pt;border-radius:0 5px 5px 0}.copyIcon[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--scealai-dark-green)}.copiedText[_ngcontent-%COMP%]{margin-left:10px;color:var(--scealai-green)}.teacherAccountsContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:80%;margin-left:10%}.teacherAccountsDisplay[_ngcontent-%COMP%]{margin-top:4vh;width:40%;height:45vh;background-color:#d1d1d1;border-radius:0 0 5px 5px}.teacherAccountsHeader[_ngcontent-%COMP%]{font-size:14pt;height:4vh;display:flex;align-items:center;justify-content:center;color:#fff;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0}.teacherAccountsBody[_ngcontent-%COMP%]{padding:10px 10px 0;text-align:left;overflow:auto;height:40vh}.activeTeacherCodeContainer[_ngcontent-%COMP%]{background-color:#fff;padding:5px;border-radius:5px;margin-bottom:10px;font-size:11pt}.greenBtn[_ngcontent-%COMP%]{color:var(--scealai-dark-green);font-size:12pt;padding:5px;float:right;margin-top:-2px}.greenBtn[_ngcontent-%COMP%]:hover{cursor:pointer;font-size:14pt;padding:4px}.whiteBtn[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--scealai-med-brown-hover);cursor:pointer}.hidden[_ngcontent-%COMP%]{visibility:hidden;opacity:0}.hiddenFade[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility .3s,opacity .3s ease-in}.visible[_ngcontent-%COMP%]{visibility:visible;opacity:1}"]}),n})();var Kn=M(8443),lt=M(8386),Vn=M(7579),Zt=M(8372),Fe=M(1884);function Xn(n,a){if(1&n&&(e.TgZ(0,"div",5)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.ts.l.compiling_data)}}function ea(n,a){if(1&n&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA()()),2&n){const t=a.$implicit,i=e.oxw(3);e.MGl("routerLink","../user/",t._id,""),e.xp6(1),e.Q6J("searchedWord",i.searchText)("content",t.username)("classToApply","font-weight-bold")("setTitle","true"),e.xp6(1),e.hij(" ",t.username,""),e.xp6(2),e.Oqu(t.role)}}function ta(n,a){if(1&n&&(e.TgZ(0,"div",19),e.YNc(1,ea,5,7,"div",20),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.userResults)}}function na(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," Type above to search for users. "),e.qZA())}function nt(n,a){1&n&&(e.TgZ(0,"div"),e._uU(1," No usernames match the string entered above. "),e.qZA())}function aa(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div"),e._uU(3," Include: "),e.qZA(),e.TgZ(4,"div",8)(5,"input",9),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.roleFilter.STUDENT=r)}),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",8)(8,"input",9),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.roleFilter.TEACHER=r)}),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"div",8)(11,"input",9),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.roleFilter.ADMIN=r)}),e.qZA(),e._uU(12),e.qZA()(),e.TgZ(13,"div",10)(14,"div")(15,"div",11)(16,"label",12),e._uU(17),e.qZA(),e.TgZ(18,"div",13)(19,"input",14),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.searchModelChanged.next(r))}),e.qZA(),e.TgZ(20,"button",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return r.currentPage=0,e.KtG(r.searchUsers())}),e._uU(21,"Search"),e.qZA()()()()(),e.TgZ(22,"div")(23,"button",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.goPrevPage())}),e._uU(24,"<"),e.qZA(),e._uU(25),e.TgZ(26,"button",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.goNextPage())}),e._uU(27,">"),e.qZA()(),e.TgZ(28,"div",16),e._uU(29),e.qZA(),e.YNc(30,ta,2,1,"div",17),e.YNc(31,na,2,0,"div",18),e.YNc(32,nt,2,0,"div",18),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.roleFilter.STUDENT),e.xp6(1),e.hij(" ",t.ts.l.students,""),e.xp6(2),e.Q6J("ngModel",t.roleFilter.TEACHER),e.xp6(1),e.hij(" ",t.ts.l.teachers,""),e.xp6(2),e.Q6J("ngModel",t.roleFilter.ADMIN),e.xp6(1),e.hij(" ",t.ts.l.admins,""),e.xp6(5),e.Oqu(t.ts.l.search_user),e.xp6(2),e.Q6J("ngModel",t.searchText),e.xp6(6),e.AsE(" Page ",t.currentPage+1," / ",t.totalPages+1," "),e.xp6(4),e.AsE("",t.ts.l.results," (",t.resultCount,")"),e.xp6(1),e.Q6J("ngIf",t.resultCount>0),e.xp6(1),e.Q6J("ngIf",!t.searchText),e.xp6(1),e.Q6J("ngIf",t.searchText&&0==t.resultCount)}}let At=(()=>{class n{constructor(t,i){this.userService=t,this.ts=i,this.searchModelChanged=new Vn.x,this.userCount=0,this.userResults=[],this.numberOfUsers=0,this.resultCount=0,this.currentPage=0,this.totalPages=0,this.LIMIT=20,this.roleFilter={STUDENT:!0,TEACHER:!0,ADMIN:!0},this.dataLoaded=!0}ngOnInit(){this.userService.getUserCount().subscribe(t=>this.userCount=t.total),this.searchModelChangeSubscription=this.searchModelChanged.pipe((0,Zt.b)(1e3),(0,Fe.x)()).subscribe(t=>{this.searchText=t,this.currentPage=0,this.searchUsers()})}ngOnDestroy(){this.searchModelChangeSubscription.unsubscribe()}validSearchText(){try{new RegExp(this.searchText,"i")}catch(t){return console.log("Caught error:",t),alert("invalid regular expression"),!1}return!0}searchUsers(){if(!this.validSearchText())return;this.dataLoaded=!1,this.userResults=[];const t=Object.entries(this.roleFilter).filter(i=>i[1]).map(i=>i[0]);this.userService.searchUser(this.searchText,this.currentPage,this.LIMIT,t).subscribe(i=>{this.userResults=i.users.map(r=>(new Kn.n).fromJSON(r)),this.resultCount=i.count,this.dataLoaded=!0,this.getPageCount()})}getPageCount(){const t=Math.ceil(this.resultCount/this.LIMIT);this.totalPages=t>0?t-1:0}goNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.searchUsers())}goPrevPage(){this.currentPage>0&&(this.currentPage--,this.searchUsers())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(lt.K),e.Y36(Ue.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-find-user"]],decls:6,vars:4,consts:[[1,"adminContainer"],[1,"searchContainer"],[1,"searchHeader"],["class","adminLoaderContainer",4,"ngIf"],["class","searchResultsContainer",4,"ngIf"],[1,"adminLoaderContainer"],[1,"searchResultsContainer"],[1,"filter"],[1,"checkbox-line"],["type","checkbox",3,"ngModel","ngModelChange"],["role","main"],[1,"form-group"],["for","search-text"],[2,"display","flex"],["type","text","id","search-text","aria-describedby","search-text","placeholder","Enter user to search",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"],[2,"margin","5px"],["class","resultContainer",4,"ngIf"],[4,"ngIf"],[1,"resultContainer"],["class","resultCard",3,"routerLink",4,"ngFor","ngForOf"],[1,"resultCard",3,"routerLink"],["appHighlight","",3,"searchedWord","content","classToApply","setTitle"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.YNc(4,Xn,4,1,"div",3),e.YNc(5,aa,33,15,"div",4),e.qZA()()),2&t&&(e.xp6(3),e.AsE(" ",i.ts.l.all_users," (",i.userCount,") "),e.xp6(1),e.Q6J("ngIf",!i.dataLoaded),e.xp6(1),e.Q6J("ngIf",i.dataLoaded))},dependencies:[H.sg,H.O5,ye.rH,z.Fj,z.Wl,z.JJ,z.On],styles:[".adminContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.searchContainer[_ngcontent-%COMP%]{background:#d1d1d1;width:60%;border-radius:4px}.searchHeader[_ngcontent-%COMP%]{background:var(--scealai-dark-green);border-radius:4px 4px 0 0;font-size:14pt;color:#fff}.adminLoaderContainer[_ngcontent-%COMP%]{width:35%}.searchResultsContainer[_ngcontent-%COMP%]{padding:10px 10px 0;height:500px}.filter[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;margin-bottom:10px;font-size:12pt;display:flex;justify-content:space-between;padding:10px}.resultContainer[_ngcontent-%COMP%]{padding:10px 10px 0;box-shadow:inset 0 0 7px #000000b6;border-radius:5px;overflow-y:scroll;max-height:250px}.resultCard[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;margin-bottom:10px;font-size:12pt;display:flex;justify-content:space-between;padding:10px}.resultCard[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--scealai-med-brown-hover);cursor:pointer}"]}),n})();var se=M(5861),be=M(3905),We=M(1765),jt=M(25),Rt=M(4687),ie=M(9301);ie.kL.register(...ie.zX);var U=1e-6,I=Math.PI,ae=I/2,gn=I/4,Ce=2*I,pe=180/I,Q=I/180,R=Math.abs,Ke=Math.atan,Oe=Math.atan2,L=Math.cos,wt=Math.ceil,Ht=Math.exp,dt=(Math,Math,Math.log),Ie=Math.pow,E=Math.sin,Te=Math.sign||function(n){return n>0?1:n<0?-1:0},he=Math.sqrt,ft=Math.tan;function _n(n){return n>1?0:n<-1?I:Math.acos(n)}function we(n){return n>1?ae:n<-1?-ae:Math.asin(n)}function f(n){return function(a,t){var i=L(a),r=L(t),o=n(i*r);return o===1/0?[2,0]:[o*r*E(a),o*E(t)]}}function d(n){return function(a,t){var i=he(a*a+t*t),r=n(i),o=E(r),s=L(r);return[Oe(a*o,i*s),we(i&&t*o/i)]}}function h(){}function _(){var a,n=[];return{point:function(t,i,r){a.push([t,i,r])},lineStart:function(){n.push(a=[])},lineEnd:h,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],a=null,t}}}function y(n,a){return R(n[0]-a[0])<U&&R(n[1]-a[1])<U}function b(n,a,t,i){this.x=n,this.z=a,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function T(n,a,t,i,r){var c,u,o=[],s=[];if(n.forEach(function(x){if(!((O=x.length-1)<=0)){var O,N,S=x[0],q=x[O];if(y(S,q)){if(!S[2]&&!q[2]){for(r.lineStart(),c=0;c<O;++c)r.point((S=x[c])[0],S[1]);return void r.lineEnd()}q[0]+=2*U}o.push(N=new b(S,x,null,!0)),s.push(N.o=new b(S,null,N,!1)),o.push(N=new b(q,x,null,!1)),s.push(N.o=new b(q,null,N,!0))}}),o.length){for(s.sort(a),w(o),w(s),c=0,u=s.length;c<u;++c)s[c].e=t=!t;for(var l,p,g=o[0];;){for(var m=g,v=!0;m.v;)if((m=m.n)===g)return;l=m.z,r.lineStart();do{if(m.v=m.o.v=!0,m.e){if(v)for(c=0,u=l.length;c<u;++c)r.point((p=l[c])[0],p[1]);else i(m.x,m.n.x,1,r);m=m.n}else{if(v)for(c=(l=m.p.z).length-1;c>=0;--c)r.point((p=l[c])[0],p[1]);else i(m.x,m.p.x,-1,r);m=m.p}l=(m=m.o).z,v=!v}while(!m.v);r.lineEnd()}}}function w(n){if(a=n.length){for(var a,r,t=0,i=n[0];++t<a;)i.n=r=n[t],r.p=i,i=r;i.n=r=n[0],r.p=i}}class A{constructor(){this._partials=new Float64Array(32),this._n=0}add(a){const t=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=t[r],s=a+o,c=Math.abs(a)<Math.abs(o)?a-(s-o):o-(s-a);c&&(t[i++]=c),a=s}return t[i]=a,this._n=i+1,this}valueOf(){const a=this._partials;let i,r,o,t=this._n,s=0;if(t>0){for(s=a[--t];t>0&&(i=s,r=a[--t],s=i+r,o=r-(s-i),!o););t>0&&(o<0&&a[t-1]<0||o>0&&a[t-1]>0)&&(r=2*o,i=s+r,r==i-s&&(s=i))}return s}}function G(n){return[Oe(n[1],n[0]),we(n[2])]}function k(n){var a=n[0],t=n[1],i=L(t);return[i*L(a),i*E(a),E(t)]}function X(n,a){return n[0]*a[0]+n[1]*a[1]+n[2]*a[2]}function ce(n,a){return[n[1]*a[2]-n[2]*a[1],n[2]*a[0]-n[0]*a[2],n[0]*a[1]-n[1]*a[0]]}function j(n,a){n[0]+=a[0],n[1]+=a[1],n[2]+=a[2]}function de(n,a){return[n[0]*a,n[1]*a,n[2]*a]}function ge(n){var a=he(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=a,n[1]/=a,n[2]/=a}function ue(n){return R(n[0])<=I?n[0]:Te(n[0])*((R(n[0])+I)%Ce-I)}function ve(n,a){var t=ue(a),i=a[1],r=E(i),o=[E(t),-L(t),0],s=0,c=0,u=new A;1===r?i=ae+U:-1===r&&(i=-ae-U);for(var g=0,l=n.length;g<l;++g)if(m=(p=n[g]).length)for(var p,m,v=p[m-1],x=ue(v),O=v[1]/2+gn,S=E(O),q=L(O),N=0;N<m;++N,x=D,S=B,q=te,v=Z){var Z=p[N],D=ue(Z),J=Z[1]/2+gn,B=E(J),te=L(J),K=D-x,V=K>=0?1:-1,oe=V*K,F=oe>I,Se=S*B;if(u.add(Oe(Se*V*E(oe),q*te+Se*L(oe))),s+=F?K+V*Ce:K,F^x>=t^D>=t){var le=ce(k(v),k(Z));ge(le);var ne=ce(o,le);ge(ne);var C=(F^K>=0?-1:1)*we(ne[2]);(i>C||i===C&&(le[0]||le[1]))&&(c+=F^K>=0?1:-1)}}return(s<-U||s<U&&u<-1e-12)^1&c}function Ne(n){return Array.from(function*fe(n){for(const a of n)yield*a}(n))}function Ze(n,a,t,i){return function(r){var g,l,p,o=a(r),s=_(),c=a(s),u=!1,m={point:v,lineStart:O,lineEnd:S,polygonStart:function(){m.point=q,m.lineStart=N,m.lineEnd=Z,l=[],g=[]},polygonEnd:function(){m.point=v,m.lineStart=O,m.lineEnd=S,l=Ne(l);var D=ve(g,i);l.length?(u||(r.polygonStart(),u=!0),T(l,Ye,D,t,r)):D&&(u||(r.polygonStart(),u=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),l=g=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function v(D,J){n(D,J)&&r.point(D,J)}function x(D,J){o.point(D,J)}function O(){m.point=x,o.lineStart()}function S(){m.point=v,o.lineEnd()}function q(D,J){p.push([D,J]),c.point(D,J)}function N(){c.lineStart(),p=[]}function Z(){q(p[0][0],p[0][1]),c.lineEnd();var B,K,V,oe,D=c.clean(),J=s.result(),te=J.length;if(p.pop(),g.push(p),p=null,te){if(1&D){if((K=(V=J[0]).length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),B=0;B<K;++B)r.point((oe=V[B])[0],oe[1]);r.lineEnd()}return}te>1&&2&D&&J.push(J.pop().concat(J.shift())),l.push(J.filter(Pe))}}return m}}function Pe(n){return n.length>1}function Ye(n,a){return((n=n.x)[0]<0?n[1]-ae-U:ae-n[1])-((a=a.x)[0]<0?a[1]-ae-U:ae-a[1])}const Ee=Ze(function(){return!0},function Je(n){var r,a=NaN,t=NaN,i=NaN;return{lineStart:function(){n.lineStart(),r=1},point:function(o,s){var c=o>0?I:-I,u=R(o-a);R(u-I)<U?(n.point(a,t=(t+s)/2>0?ae:-ae),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(c,t),n.point(o,t),r=0):i!==c&&u>=I&&(R(a-i)<U&&(a-=i*U),R(o-c)<U&&(o-=c*U),t=function St(n,a,t,i){var r,o,s=E(n-t);return R(s)>U?Ke((E(a)*(o=L(i))*E(t)-E(i)*(r=L(a))*E(n))/(r*o*s)):(a+i)/2}(a,t,o,s),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(c,t),r=0),n.point(a=o,t=s),i=c},lineEnd:function(){n.lineEnd(),a=t=NaN},clean:function(){return 2-r}}},function Bt(n,a,t,i){var r;if(null==n)i.point(-I,r=t*ae),i.point(0,r),i.point(I,r),i.point(I,0),i.point(I,-r),i.point(0,-r),i.point(-I,-r),i.point(-I,0),i.point(-I,r);else if(R(n[0]-a[0])>U){var o=n[0]<a[0]?I:-I;i.point(-o,r=t*o/2),i.point(0,r),i.point(o,r)}else i.point(a[0],a[1])},[-I,-ae]);function He(n,a){(a=k(a))[0]-=n,ge(a);var t=_n(-a[1]);return((-a[2]<0?-t:t)+Ce-U)%Ce}function ut(n){var a=L(n),t=6*Q,i=a>0,r=R(a)>U;function s(l,p){return L(l)*L(p)>a}function u(l,p,m){var O=[1,0,0],S=ce(k(l),k(p)),q=X(S,S),N=S[0],Z=q-N*N;if(!Z)return!m&&l;var D=a*q/Z,J=-a*N/Z,B=ce(O,S),te=de(O,D);j(te,de(S,J));var V=B,oe=X(te,V),F=X(V,V),Se=oe*oe-F*(X(te,te)-1);if(!(Se<0)){var le=he(Se),ne=de(V,(-oe-le)/F);if(j(ne,te),ne=G(ne),!m)return ne;var Le,C=l[0],$=p[0],_e=l[1],Me=p[1];$<C&&(Le=C,C=$,$=Le);var cn=$-C,et=R(cn-I)<U;if(!et&&Me<_e&&(Le=_e,_e=Me,Me=Le),et||cn<U?et?_e+Me>0^ne[1]<(R(ne[0]-C)<U?_e:Me):_e<=ne[1]&&ne[1]<=Me:cn>I^(C<=ne[0]&&ne[0]<=$)){var tt=de(V,(-oe+le)/F);return j(tt,te),[ne,G(tt)]}}}function g(l,p){var m=i?n:I-n,v=0;return l<-m?v|=1:l>m&&(v|=2),p<-m?v|=4:p>m&&(v|=8),v}return Ze(s,function c(l){var p,m,v,x,O;return{lineStart:function(){x=v=!1,O=1},point:function(S,q){var Z,N=[S,q],D=s(S,q),J=i?D?0:g(S,q):D?g(S+(S<0?I:-I),q):0;if(!p&&(x=v=D)&&l.lineStart(),D!==v&&(!(Z=u(p,N))||y(p,Z)||y(N,Z))&&(N[2]=1),D!==v)O=0,D?(l.lineStart(),Z=u(N,p),l.point(Z[0],Z[1])):(Z=u(p,N),l.point(Z[0],Z[1],2),l.lineEnd()),p=Z;else if(r&&p&&i^D){var B;!(J&m)&&(B=u(N,p,!0))&&(O=0,i?(l.lineStart(),l.point(B[0][0],B[0][1]),l.point(B[1][0],B[1][1]),l.lineEnd()):(l.point(B[1][0],B[1][1]),l.lineEnd(),l.lineStart(),l.point(B[0][0],B[0][1],3)))}D&&(!p||!y(p,N))&&l.point(N[0],N[1]),p=N,v=D,m=J},lineEnd:function(){v&&l.lineEnd(),p=null},clean:function(){return O|(x&&v)<<1}}},function o(l,p,m,v){!function at(n,a,t,i,r,o){if(t){var s=L(a),c=E(a),u=i*t;null==r?(r=a+i*Ce,o=a-u/2):(r=He(s,r),o=He(s,o),(i>0?r<o:r>o)&&(r+=i*Ce));for(var g,l=r;i>0?l>o:l<o;l-=u)g=G([s,-c*L(l),-c*E(l)]),n.point(g[0],g[1])}}(v,n,t,m,l,p)},i?[0,-n]:[-I,n-I])}var qe=1e9,it=-qe;function ra(n,a,t,i){function r(g,l){return n<=g&&g<=t&&a<=l&&l<=i}function o(g,l,p,m){var v=0,x=0;if(null==g||(v=s(g,p))!==(x=s(l,p))||u(g,l)<0^p>0)do{m.point(0===v||3===v?n:t,v>1?i:a)}while((v=(v+p+4)%4)!==x);else m.point(l[0],l[1])}function s(g,l){return R(g[0]-n)<U?l>0?0:3:R(g[0]-t)<U?l>0?2:1:R(g[1]-a)<U?l>0?1:0:l>0?3:2}function c(g,l){return u(g.x,l.x)}function u(g,l){var p=s(g,1),m=s(l,1);return p!==m?p-m:0===p?l[1]-g[1]:1===p?g[0]-l[0]:2===p?g[1]-l[1]:l[0]-g[0]}return function(g){var m,v,x,O,S,q,N,Z,D,J,B,l=g,p=_(),te={point:K,lineStart:function Se(){te.point=ne,v&&v.push(x=[]),J=!0,D=!1,N=Z=NaN},lineEnd:function le(){m&&(ne(O,S),q&&D&&p.rejoin(),m.push(p.result())),te.point=K,D&&l.lineEnd()},polygonStart:function oe(){l=p,m=[],v=[],B=!0},polygonEnd:function F(){var C=function V(){for(var C=0,$=0,_e=v.length;$<_e;++$)for(var Ct,tt,Me=v[$],Le=1,cn=Me.length,et=Me[0],zn=et[0],Yt=et[1];Le<cn;++Le)Ct=zn,tt=Yt,zn=(et=Me[Le])[0],Yt=et[1],tt<=i?Yt>i&&(zn-Ct)*(i-tt)>(Yt-tt)*(n-Ct)&&++C:Yt<=i&&(zn-Ct)*(i-tt)<(Yt-tt)*(n-Ct)&&--C;return C}(),$=B&&C,_e=(m=Ne(m)).length;($||_e)&&(g.polygonStart(),$&&(g.lineStart(),o(null,null,1,g),g.lineEnd()),_e&&T(m,c,C,o,g),g.polygonEnd()),l=g,m=v=x=null}};function K(C,$){r(C,$)&&l.point(C,$)}function ne(C,$){var _e=r(C,$);if(v&&x.push([C,$]),J)O=C,S=$,q=_e,J=!1,_e&&(l.lineStart(),l.point(C,$));else if(_e&&D)l.point(C,$);else{var Me=[N=Math.max(it,Math.min(qe,N)),Z=Math.max(it,Math.min(qe,Z))],Le=[C=Math.max(it,Math.min(qe,C)),$=Math.max(it,Math.min(qe,$))];!function Mt(n,a,t,i,r,o){var x,s=n[0],c=n[1],l=0,p=1,m=a[0]-s,v=a[1]-c;if(x=t-s,m||!(x>0)){if(x/=m,m<0){if(x<l)return;x<p&&(p=x)}else if(m>0){if(x>p)return;x>l&&(l=x)}if(x=r-s,m||!(x<0)){if(x/=m,m<0){if(x>p)return;x>l&&(l=x)}else if(m>0){if(x<l)return;x<p&&(p=x)}if(x=i-c,v||!(x>0)){if(x/=v,v<0){if(x<l)return;x<p&&(p=x)}else if(v>0){if(x>p)return;x>l&&(l=x)}if(x=o-c,v||!(x<0)){if(x/=v,v<0){if(x>p)return;x>l&&(l=x)}else if(v>0){if(x<l)return;x<p&&(p=x)}return l>0&&(n[0]=s+l*m,n[1]=c+l*v),p<1&&(a[0]=s+p*m,a[1]=c+p*v),!0}}}}}(Me,Le,n,a,t,i)?_e&&(l.lineStart(),l.point(C,$),B=!1):(D||(l.lineStart(),l.point(Me[0],Me[1])),l.point(Le[0],Le[1]),_e||l.lineEnd(),B=!1)}N=C,Z=$,D=_e}return te}}function oa(n,a){function t(i,r){return i=n(i,r),a(i[0],i[1])}return n.invert&&a.invert&&(t.invert=function(i,r){return(i=a.invert(i,r))&&n.invert(i[0],i[1])}),t}const sa=n=>n;function ca(n,a){return R(n)>I&&(n-=Math.round(n/Ce)*Ce),[n,a]}function Fa(n,a,t){return(n%=Ce)?a||t?oa(Ya(n),ja(a,t)):Ya(n):a||t?ja(a,t):ca}function Ia(n){return function(a,t){return R(a+=n)>I&&(a-=Math.round(a/Ce)*Ce),[a,t]}}function Ya(n){var a=Ia(n);return a.invert=Ia(-n),a}function ja(n,a){var t=L(n),i=E(n),r=L(a),o=E(a);function s(c,u){var g=L(u),l=L(c)*g,p=E(c)*g,m=E(u),v=m*t+l*i;return[Oe(p*r-v*o,l*t-m*i),we(v*r+p*o)]}return s.invert=function(c,u){var g=L(u),l=L(c)*g,p=E(c)*g,m=E(u),v=m*r-p*o;return[Oe(p*r+m*o,l*t+v*i),we(v*t-l*i)]},s}function bn(n){return function(a){var t=new la;for(var i in n)t[i]=n[i];return t.stream=a,t}}function la(){}function xn(n,a){n&&Ja.hasOwnProperty(n.type)&&Ja[n.type](n,a)}ca.invert=ca,la.prototype={constructor:la,point:function(n,a){this.stream.point(n,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ra={Feature:function(n,a){xn(n.geometry,a)},FeatureCollection:function(n,a){for(var t=n.features,i=-1,r=t.length;++i<r;)xn(t[i].geometry,a)}},Ja={Sphere:function(n,a){a.sphere()},Point:function(n,a){a.point((n=n.coordinates)[0],n[1],n[2])},MultiPoint:function(n,a){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)a.point((n=t[i])[0],n[1],n[2])},LineString:function(n,a){da(n.coordinates,a,0)},MultiLineString:function(n,a){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)da(t[i],a,0)},Polygon:function(n,a){Ha(n.coordinates,a)},MultiPolygon:function(n,a){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)Ha(t[i],a)},GeometryCollection:function(n,a){for(var t=n.geometries,i=-1,r=t.length;++i<r;)xn(t[i],a)}};function da(n,a,t){var o,i=-1,r=n.length-t;for(a.lineStart();++i<r;)a.point((o=n[i])[0],o[1],o[2]);a.lineEnd()}function Ha(n,a){var t=-1,i=n.length;for(a.polygonStart();++t<i;)da(n[t],a,1);a.polygonEnd()}function pt(n,a){n&&Ra.hasOwnProperty(n.type)?Ra[n.type](n,a):xn(n,a)}var Ot=1/0,yn=Ot,$t=-Ot,Cn=$t;const Tn={point:function Cr(n,a){n<Ot&&(Ot=n),n>$t&&($t=n),a<yn&&(yn=a),a>Cn&&(Cn=a)},lineStart:h,lineEnd:h,polygonStart:h,polygonEnd:h,result:function(){var n=[[Ot,yn],[$t,Cn]];return $t=Cn=-(yn=Ot=1/0),n}};function fa(n,a,t){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=i&&n.clipExtent(null),pt(t,n.stream(Tn)),a(Tn.result()),null!=i&&n.clipExtent(i),n}function ua(n,a,t){return fa(n,function(i){var r=a[1][0]-a[0][0],o=a[1][1]-a[0][1],s=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),c=+a[0][0]+(r-s*(i[1][0]+i[0][0]))/2,u=+a[0][1]+(o-s*(i[1][1]+i[0][1]))/2;n.scale(150*s).translate([c,u])},t)}function Ba(n,a,t){return ua(n,[[0,0],a],t)}function $a(n,a,t){return fa(n,function(i){var r=+a,o=r/(i[1][0]-i[0][0]),s=(r-o*(i[1][0]+i[0][0]))/2,c=-o*i[0][1];n.scale(150*o).translate([s,c])},t)}function Ga(n,a,t){return fa(n,function(i){var r=+a,o=r/(i[1][1]-i[0][1]),s=-o*i[0][0],c=(r-o*(i[1][1]+i[0][1]))/2;n.scale(150*o).translate([s,c])},t)}var Tr=L(30*Q);function Qa(n,a){return+a?function Ar(n,a){function t(i,r,o,s,c,u,g,l,p,m,v,x,O,S){var q=g-i,N=l-r,Z=q*q+N*N;if(Z>4*a&&O--){var D=s+m,J=c+v,B=u+x,te=he(D*D+J*J+B*B),K=we(B/=te),V=R(R(B)-1)<U||R(o-p)<U?(o+p)/2:Oe(J,D),oe=n(V,K),F=oe[0],Se=oe[1],le=F-i,ne=Se-r,C=N*le-q*ne;(C*C/Z>a||R((q*le+N*ne)/Z-.5)>.3||s*m+c*v+u*x<Tr)&&(t(i,r,o,s,c,u,F,Se,V,D/=te,J/=te,B,O,S),S.point(F,Se),t(F,Se,V,D,J,B,g,l,p,m,v,x,O,S))}}return function(i){var r,o,s,c,u,g,l,p,m,v,x,O,S={point:q,lineStart:N,lineEnd:D,polygonStart:function(){i.polygonStart(),S.lineStart=J},polygonEnd:function(){i.polygonEnd(),S.lineStart=N}};function q(K,V){K=n(K,V),i.point(K[0],K[1])}function N(){p=NaN,S.point=Z,i.lineStart()}function Z(K,V){var oe=k([K,V]),F=n(K,V);t(p,m,l,v,x,O,p=F[0],m=F[1],l=K,v=oe[0],x=oe[1],O=oe[2],16,i),i.point(p,m)}function D(){S.point=q,i.lineEnd()}function J(){N(),S.point=B,S.lineEnd=te}function B(K,V){Z(r=K,V),o=p,s=m,c=v,u=x,g=O,S.point=Z}function te(){t(p,m,l,v,x,O,o,s,r,c,u,g,16,i),S.lineEnd=D,D()}return S}}(n,a):function Zr(n){return bn({point:function(a,t){a=n(a,t),this.stream.point(a[0],a[1])}})}(n)}var wr=bn({point:function(n,a){this.stream.point(n*Q,a*Q)}});function Wa(n,a,t,i,r,o){if(!o)return function Mr(n,a,t,i,r){function o(s,c){return[a+n*(s*=i),t-n*(c*=r)]}return o.invert=function(s,c){return[(s-a)/n*i,(t-c)/n*r]},o}(n,a,t,i,r);var s=L(o),c=E(o),u=s*n,g=c*n,l=s/n,p=c/n,m=(c*t-s*a)/n,v=(c*a+s*t)/n;function x(O,S){return[u*(O*=i)-g*(S*=r)+a,t-g*O-u*S]}return x.invert=function(O,S){return[i*(l*O-p*S+m),r*(v-p*O-l*S)]},x}function Ve(n){return Ka(function(){return n})()}function Ka(n){var a,l,q,N,Z,B,te,K,V,oe,t=150,i=480,r=250,o=0,s=0,c=0,u=0,g=0,p=0,m=1,v=1,x=null,O=Ee,S=null,D=sa,J=.5;function F(C){return K(C[0]*Q,C[1]*Q)}function Se(C){return(C=K.invert(C[0],C[1]))&&[C[0]*pe,C[1]*pe]}function le(){var C=Wa(t,0,0,m,v,p).apply(null,a(o,s)),$=Wa(t,i-C[0],r-C[1],m,v,p);return l=Fa(c,u,g),te=oa(a,$),K=oa(l,te),B=Qa(te,J),ne()}function ne(){return V=oe=null,F}return F.stream=function(C){return V&&oe===C?V:V=wr(function Sr(n){return bn({point:function(a,t){var i=n(a,t);return this.stream.point(i[0],i[1])}})}(l)(O(B(D(oe=C)))))},F.preclip=function(C){return arguments.length?(O=C,x=void 0,ne()):O},F.postclip=function(C){return arguments.length?(D=C,S=q=N=Z=null,ne()):D},F.clipAngle=function(C){return arguments.length?(O=+C?ut(x=C*Q):(x=null,Ee),ne()):x*pe},F.clipExtent=function(C){return arguments.length?(D=null==C?(S=q=N=Z=null,sa):ra(S=+C[0][0],q=+C[0][1],N=+C[1][0],Z=+C[1][1]),ne()):null==S?null:[[S,q],[N,Z]]},F.scale=function(C){return arguments.length?(t=+C,le()):t},F.translate=function(C){return arguments.length?(i=+C[0],r=+C[1],le()):[i,r]},F.center=function(C){return arguments.length?(o=C[0]%360*Q,s=C[1]%360*Q,le()):[o*pe,s*pe]},F.rotate=function(C){return arguments.length?(c=C[0]%360*Q,u=C[1]%360*Q,g=C.length>2?C[2]%360*Q:0,le()):[c*pe,u*pe,g*pe]},F.angle=function(C){return arguments.length?(p=C%360*Q,le()):p*pe},F.reflectX=function(C){return arguments.length?(m=C?-1:1,le()):m<0},F.reflectY=function(C){return arguments.length?(v=C?-1:1,le()):v<0},F.precision=function(C){return arguments.length?(B=Qa(te,J=C*C),ne()):he(J)},F.fitExtent=function(C,$){return ua(F,C,$)},F.fitSize=function(C,$){return Ba(F,C,$)},F.fitWidth=function(C,$){return $a(F,C,$)},F.fitHeight=function(C,$){return Ga(F,C,$)},function(){return a=n.apply(this,arguments),F.invert=a.invert&&Se,le()}}var Va=f(function(n){return he(2/(1+n))});Va.invert=d(function(n){return 2*we(n/2)});var Xa=f(function(n){return(n=_n(n))&&n/E(n)});function ei(n,a){var t=L(a),i=L(n)*t;return[t*E(n)/i,E(a)/i]}function ti(n,a){return[L(a)*E(n),E(a)]}function ni(n,a){var t=L(a),i=1+L(n)*t;return[t*E(n)/i,E(a)/i]}Xa.invert=d(function(n){return n}),ei.invert=d(Ke),ti.invert=d(we),ni.invert=d(function(n){return 2*Ke(n)});var Gt=1.340264,zt=-.081106,Qt=893e-6,Wt=.003796,Zn=he(3)/2;function ai(n,a){var t=we(Zn*E(a)),i=t*t,r=i*i*i;return[n*L(t)/(Zn*(Gt+3*zt*i+r*(7*Qt+9*Wt*i))),t*(Gt+zt*i+r*(Qt+Wt*i))]}function pa(n){var a=0,t=I/3,i=Ka(n),r=i(a,t);return r.parallels=function(o){return arguments.length?i(a=o[0]*Q,t=o[1]*Q):[a*pe,t*pe]},r}function Lr(n,a){var t=E(n),i=(t+E(a))/2;if(R(i)<U)return function kr(n){var a=L(n);function t(i,r){return[i*a,E(r)/a]}return t.invert=function(i,r){return[i/a,we(r*a)]},t}(n);var r=1+t*(2*i-t),o=he(r)/i;function s(c,u){var g=he(r-2*i*E(u))/i;return[g*E(c*=i),o-g*L(c)]}return s.invert=function(c,u){var g=o-u,l=Oe(c,R(g))*Te(g);return g*i<0&&(l-=I*Te(c)*Te(g)),[l/i,we((r-(c*c+g*g)*i*i)/(2*i))]},s}function An(){return pa(Lr).scale(155.424).center([0,33.6442])}function ii(){return An().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function wn(n,a){return[n,dt(ft((ae+a)/2))]}function ri(n){var c,u,g,a=Ve(n),t=a.center,i=a.scale,r=a.translate,o=a.clipExtent,s=null;function l(){var p=I*i(),m=a(function xr(n){function a(t){return(t=n(t[0]*Q,t[1]*Q))[0]*=pe,t[1]*=pe,t}return n=Fa(n[0]*Q,n[1]*Q,n.length>2?n[2]*Q:0),a.invert=function(t){return(t=n.invert(t[0]*Q,t[1]*Q))[0]*=pe,t[1]*=pe,t},a}(a.rotate()).invert([0,0]));return o(null==s?[[m[0]-p,m[1]-p],[m[0]+p,m[1]+p]]:n===wn?[[Math.max(m[0]-p,s),c],[Math.min(m[0]+p,u),g]]:[[s,Math.max(m[1]-p,c)],[u,Math.min(m[1]+p,g)]])}return a.scale=function(p){return arguments.length?(i(p),l()):i()},a.translate=function(p){return arguments.length?(r(p),l()):r()},a.center=function(p){return arguments.length?(t(p),l()):t()},a.clipExtent=function(p){return arguments.length?(null==p?s=c=u=g=null:(s=+p[0][0],c=+p[0][1],u=+p[1][0],g=+p[1][1]),l()):null==s?null:[[s,c],[u,g]]},l()}function Sn(n){return ft((ae+n)/2)}function jr(n,a){var t=L(n),i=n===a?E(n):dt(t/L(a))/dt(Sn(a)/Sn(n)),r=t*Ie(Sn(n),i)/i;if(!i)return wn;function o(s,c){r>0?c<-ae+U&&(c=-ae+U):c>ae-U&&(c=ae-U);var u=r/Ie(Sn(c),i);return[u*E(i*s),r-u*L(i*s)]}return o.invert=function(s,c){var u=r-c,g=Te(i)*he(s*s+u*u),l=Oe(s,R(u))*Te(u);return u*i<0&&(l-=I*Te(s)*Te(u)),[l/i,2*Ke(Ie(r/g,1/i))-ae]},o}function Mn(n,a){return[n,a]}function Hr(n,a){var t=L(n),i=n===a?E(n):(t-L(a))/(a-n),r=t/i+n;if(R(i)<U)return Mn;function o(s,c){var u=r-c,g=i*s;return[u*E(g),r-u*L(g)]}return o.invert=function(s,c){var u=r-c,g=Oe(s,R(u))*Te(u);return u*i<0&&(g-=I*Te(s)*Te(u)),[g/i,r-Te(i)*he(s*s+u*u)]},o}function oi(n,a){return[dt(ft((ae+a)/2)),-n]}function si(n,a){var t=a*a,i=t*t;return[n*(.8707-.131979*t+i*(i*(.003971*t-.001529*i)-.013791)),a*(1.007226+t*(.015085+i*(.028874*t-.044475-.005916*i)))]}ai.invert=function(n,a){for(var s,t=a,i=t*t,r=i*i*i,o=0;o<12&&(r=(i=(t-=s=(t*(Gt+zt*i+r*(Qt+Wt*i))-a)/(Gt+3*zt*i+r*(7*Qt+9*Wt*i)))*t)*i*i,!(R(s)<1e-12));++o);return[Zn*n*(Gt+3*zt*i+r*(7*Qt+9*Wt*i))/L(t),we(E(t)/Zn)]},wn.invert=function(n,a){return[n,2*Ke(Ht(a))-ae]},Mn.invert=Mn,oi.invert=function(n,a){return[-a,2*Ke(Ht(n))-ae]},si.invert=function(n,a){var r,t=a,i=25;do{var o=t*t,s=o*o;t-=r=(t*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-a)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(R(r)>U&&--i>0);return[n/(.8707+(o=t*t)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),t]};var ci,li,ma,_a,ha=new A,ga=new A,rt={point:h,lineStart:h,lineEnd:h,polygonStart:function(){rt.lineStart=zr,rt.lineEnd=Wr},polygonEnd:function(){rt.lineStart=rt.lineEnd=rt.point=h,ha.add(R(ga)),ga=new A},result:function(){var n=ha/2;return ha=new A,n}};function zr(){rt.point=Qr}function Qr(n,a){rt.point=di,ci=ma=n,li=_a=a}function di(n,a){ga.add(_a*n-ma*a),ma=n,_a=a}function Wr(){di(ci,li)}const fi=rt;var ui,pi,Be,$e,va=0,ba=0,Kt=0,On=0,Pn=0,Pt=0,xa=0,ya=0,Vt=0,je={point:ht,lineStart:hi,lineEnd:gi,polygonStart:function(){je.lineStart=Xr,je.lineEnd=eo},polygonEnd:function(){je.point=ht,je.lineStart=hi,je.lineEnd=gi},result:function(){var n=Vt?[xa/Vt,ya/Vt]:Pt?[On/Pt,Pn/Pt]:Kt?[va/Kt,ba/Kt]:[NaN,NaN];return va=ba=Kt=On=Pn=Pt=xa=ya=Vt=0,n}};function ht(n,a){va+=n,ba+=a,++Kt}function hi(){je.point=Kr}function Kr(n,a){je.point=Vr,ht(Be=n,$e=a)}function Vr(n,a){var t=n-Be,i=a-$e,r=he(t*t+i*i);On+=r*(Be+n)/2,Pn+=r*($e+a)/2,Pt+=r,ht(Be=n,$e=a)}function gi(){je.point=ht}function Xr(){je.point=to}function eo(){mi(ui,pi)}function to(n,a){je.point=mi,ht(ui=Be=n,pi=$e=a)}function mi(n,a){var t=n-Be,i=a-$e,r=he(t*t+i*i);On+=r*(Be+n)/2,Pn+=r*($e+a)/2,Pt+=r,xa+=(r=$e*n-Be*a)*(Be+n),ya+=r*($e+a),Vt+=3*r,ht(Be=n,$e=a)}const _i=je;function vi(n){this._context=n}vi.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(n,a){switch(this._point){case 0:this._context.moveTo(n,a),this._point=1;break;case 1:this._context.lineTo(n,a);break;default:this._context.moveTo(n+this._radius,a),this._context.arc(n,a,this._radius,0,Ce)}},result:h};var Ta,bi,xi,Xt,en,Ca=new A,qn={point:h,lineStart:function(){qn.point=no},lineEnd:function(){Ta&&yi(bi,xi),qn.point=h},polygonStart:function(){Ta=!0},polygonEnd:function(){Ta=null},result:function(){var n=+Ca;return Ca=new A,n}};function no(n,a){qn.point=yi,bi=Xt=n,xi=en=a}function yi(n,a){Ca.add(he((Xt-=n)*Xt+(en-=a)*en)),Xt=n,en=a}const Ci=qn;let Ti,Un,Zi,Ai;class wi{constructor(a){this._append=null==a?Si:function ao(n){const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);if(a>15)return Si;if(a!==Ti){const t=10**a;Ti=a,Un=function(r){let o=1;this._+=r[0];for(const s=r.length;o<s;++o)this._+=Math.round(arguments[o]*t)/t+r[o]}}return Un}(a),this._radius=4.5,this._=""}pointRadius(a){return this._radius=+a,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(a,t){switch(this._point){case 0:this._append`M${a},${t}`,this._point=1;break;case 1:this._append`L${a},${t}`;break;default:if(this._append`M${a},${t}`,this._radius!==Zi||this._append!==Un){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Zi=i,Un=this._append,Ai=this._,this._=r}this._+=Ai}}result(){const a=this._;return this._="",a.length?a:null}}function Si(n){let a=1;this._+=n[0];for(const t=n.length;a<t;++a)this._+=arguments[a]+n[a]}function Mi(n,a){let r,o,t=3,i=4.5;function s(c){return c&&("function"==typeof i&&o.pointRadius(+i.apply(this,arguments)),pt(c,r(o))),o.result()}return s.area=function(c){return pt(c,r(fi)),fi.result()},s.measure=function(c){return pt(c,r(Ci)),Ci.result()},s.bounds=function(c){return pt(c,r(Tn)),Tn.result()},s.centroid=function(c){return pt(c,r(_i)),_i.result()},s.projection=function(c){return arguments.length?(r=null==c?(n=null,sa):(n=c).stream,s):n},s.context=function(c){return arguments.length?(o=null==c?(a=null,new wi(t)):new vi(a=c),"function"!=typeof i&&o.pointRadius(i),s):a},s.pointRadius=function(c){return arguments.length?(i="function"==typeof c?c:(o.pointRadius(+c),+c),s):i},s.digits=function(c){if(!arguments.length)return t;if(null==c)t=null;else{const u=Math.floor(c);if(!(u>=0))throw new RangeError(`invalid digits: ${c}`);t=u}return null===a&&(o=new wi(t)),s},s.projection(n).digits(t).context(a)}var Za,Aa,Dn,Nn,qt={sphere:h,point:h,lineStart:function io(){qt.point=oo,qt.lineEnd=ro},lineEnd:h,polygonStart:h,polygonEnd:h};function ro(){qt.point=qt.lineEnd=h}function oo(n,a){Aa=n*=Q,Dn=E(a*=Q),Nn=L(a),qt.point=so}function so(n,a){n*=Q;var t=E(a*=Q),i=L(a),r=R(n-Aa),o=L(r),c=i*E(r),u=Nn*t-Dn*i*o,g=Dn*t+Nn*i*o;Za.add(Oe(he(c*c+u*u),g)),Aa=n,Dn=t,Nn=i}var wa=[null,null],lo={type:"LineString",coordinates:wa};function Sa(n,a){return wa[0]=n,wa[1]=a,function co(n){return Za=new A,pt(n,qt),+Za}(lo)}var Oi={Feature:function(n,a){return En(n.geometry,a)},FeatureCollection:function(n,a){for(var t=n.features,i=-1,r=t.length;++i<r;)if(En(t[i].geometry,a))return!0;return!1}},Pi={Sphere:function(){return!0},Point:function(n,a){return qi(n.coordinates,a)},MultiPoint:function(n,a){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(qi(t[i],a))return!0;return!1},LineString:function(n,a){return Ui(n.coordinates,a)},MultiLineString:function(n,a){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(Ui(t[i],a))return!0;return!1},Polygon:function(n,a){return Di(n.coordinates,a)},MultiPolygon:function(n,a){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)if(Di(t[i],a))return!0;return!1},GeometryCollection:function(n,a){for(var t=n.geometries,i=-1,r=t.length;++i<r;)if(En(t[i],a))return!0;return!1}};function En(n,a){return!(!n||!Pi.hasOwnProperty(n.type))&&Pi[n.type](n,a)}function qi(n,a){return 0===Sa(n,a)}function Ui(n,a){for(var t,i,r,o=0,s=n.length;o<s;o++){if(0===(i=Sa(n[o],a))||o>0&&(r=Sa(n[o],n[o-1]))>0&&t<=r&&i<=r&&(t+i-r)*(1-Math.pow((t-i)/r,2))<1e-12*r)return!0;t=i}return!1}function Di(n,a){return!!ve(n.map(fo),Ni(a))}function fo(n){return(n=n.map(Ni)).pop(),n}function Ni(n){return[n[0]*Q,n[1]*Q]}function Ut(n,a,t){n=+n,a=+a,t=(r=arguments.length)<2?(a=n,n=0,1):r<3?1:+t;for(var i=-1,r=0|Math.max(0,Math.ceil((a-n)/t)),o=new Array(r);++i<r;)o[i]=n+i*t;return o}function Ei(n,a,t){var i=Ut(n,a-U,t).concat(a);return function(r){return i.map(function(o){return[r,o]})}}function ki(n,a,t){var i=Ut(n,a-U,t).concat(a);return function(r){return i.map(function(o){return[o,r]})}}function Li(){var n,a,t,i,r,o,s,c,m,v,x,O,u=10,g=u,l=90,p=360,S=2.5;function q(){return{type:"MultiLineString",coordinates:N()}}function N(){return Ut(wt(i/l)*l,t,l).map(x).concat(Ut(wt(c/p)*p,s,p).map(O)).concat(Ut(wt(a/u)*u,n,u).filter(function(Z){return R(Z%l)>U}).map(m)).concat(Ut(wt(o/g)*g,r,g).filter(function(Z){return R(Z%p)>U}).map(v))}return q.lines=function(){return N().map(function(Z){return{type:"LineString",coordinates:Z}})},q.outline=function(){return{type:"Polygon",coordinates:[x(i).concat(O(s).slice(1),x(t).reverse().slice(1),O(c).reverse().slice(1))]}},q.extent=function(Z){return arguments.length?q.extentMajor(Z).extentMinor(Z):q.extentMinor()},q.extentMajor=function(Z){return arguments.length?(c=+Z[0][1],s=+Z[1][1],(i=+Z[0][0])>(t=+Z[1][0])&&(Z=i,i=t,t=Z),c>s&&(Z=c,c=s,s=Z),q.precision(S)):[[i,c],[t,s]]},q.extentMinor=function(Z){return arguments.length?(o=+Z[0][1],r=+Z[1][1],(a=+Z[0][0])>(n=+Z[1][0])&&(Z=a,a=n,n=Z),o>r&&(Z=o,o=r,r=Z),q.precision(S)):[[a,o],[n,r]]},q.step=function(Z){return arguments.length?q.stepMajor(Z).stepMinor(Z):q.stepMinor()},q.stepMajor=function(Z){return arguments.length?(l=+Z[0],p=+Z[1],q):[l,p]},q.stepMinor=function(Z){return arguments.length?(u=+Z[0],g=+Z[1],q):[u,g]},q.precision=function(Z){return arguments.length?(S=+Z,m=Ei(o,r,90),v=ki(a,n,S),x=Ei(c,s,90),O=ki(i,t,S),q):S},q.extentMajor([[-180,-90+U],[180,90-U]]).extentMinor([[-180,-80-U],[180,80+U]])}var me=M(1086);function W(n){for(var a=n.length/6|0,t=new Array(a),i=0;i<a;)t[i]="#"+n.slice(6*i,6*++i);return t}function kn(n,a,t){n.prototype=a.prototype=t,t.constructor=n}function Ma(n,a){var t=Object.create(n.prototype);for(var i in a)t[i]=a[i];return t}function Dt(){}var Nt=1/.7,Et="\\s*([+-]?\\d+)\\s*",tn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ho=/^#([0-9a-f]{3,8})$/,go=new RegExp(`^rgb\\(${Et},${Et},${Et}\\)$`),mo=new RegExp(`^rgb\\(${Ge},${Ge},${Ge}\\)$`),_o=new RegExp(`^rgba\\(${Et},${Et},${Et},${tn}\\)$`),vo=new RegExp(`^rgba\\(${Ge},${Ge},${Ge},${tn}\\)$`),bo=new RegExp(`^hsl\\(${tn},${Ge},${Ge}\\)$`),xo=new RegExp(`^hsla\\(${tn},${Ge},${Ge},${tn}\\)$`),Fi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ii(){return this.rgb().formatHex()}function Yi(){return this.rgb().formatRgb()}function Oa(n){var a,t;return n=(n+"").trim().toLowerCase(),(a=ho.exec(n))?(t=a[1].length,a=parseInt(a[1],16),6===t?ji(a):3===t?new xe(a>>8&15|a>>4&240,a>>4&15|240&a,(15&a)<<4|15&a,1):8===t?Ln(a>>24&255,a>>16&255,a>>8&255,(255&a)/255):4===t?Ln(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|240&a,((15&a)<<4|15&a)/255):null):(a=go.exec(n))?new xe(a[1],a[2],a[3],1):(a=mo.exec(n))?new xe(255*a[1]/100,255*a[2]/100,255*a[3]/100,1):(a=_o.exec(n))?Ln(a[1],a[2],a[3],a[4]):(a=vo.exec(n))?Ln(255*a[1]/100,255*a[2]/100,255*a[3]/100,a[4]):(a=bo.exec(n))?Bi(a[1],a[2]/100,a[3]/100,1):(a=xo.exec(n))?Bi(a[1],a[2]/100,a[3]/100,a[4]):Fi.hasOwnProperty(n)?ji(Fi[n]):"transparent"===n?new xe(NaN,NaN,NaN,0):null}function ji(n){return new xe(n>>16&255,n>>8&255,255&n,1)}function Ln(n,a,t,i){return i<=0&&(n=a=t=NaN),new xe(n,a,t,i)}function Ri(n){return n instanceof Dt||(n=Oa(n)),n?new xe((n=n.rgb()).r,n.g,n.b,n.opacity):new xe}function nn(n,a,t,i){return 1===arguments.length?Ri(n):new xe(n,a,t,i??1)}function xe(n,a,t,i){this.r=+n,this.g=+a,this.b=+t,this.opacity=+i}function Ji(){return`#${_t(this.r)}${_t(this.g)}${_t(this.b)}`}function Hi(){const n=Fn(this.opacity);return`${1===n?"rgb(":"rgba("}${mt(this.r)}, ${mt(this.g)}, ${mt(this.b)}${1===n?")":`, ${n})`}`}function Fn(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function mt(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function _t(n){return((n=mt(n))<16?"0":"")+n.toString(16)}function Bi(n,a,t,i){return i<=0?n=a=t=NaN:t<=0||t>=1?n=a=NaN:a<=0&&(n=NaN),new Re(n,a,t,i)}function $i(n){if(n instanceof Re)return new Re(n.h,n.s,n.l,n.opacity);if(n instanceof Dt||(n=Oa(n)),!n)return new Re;if(n instanceof Re)return n;var a=(n=n.rgb()).r/255,t=n.g/255,i=n.b/255,r=Math.min(a,t,i),o=Math.max(a,t,i),s=NaN,c=o-r,u=(o+r)/2;return c?(s=a===o?(t-i)/c+6*(t<i):t===o?(i-a)/c+2:(a-t)/c+4,c/=u<.5?o+r:2-o-r,s*=60):c=u>0&&u<1?0:s,new Re(s,c,u,n.opacity)}function Re(n,a,t,i){this.h=+n,this.s=+a,this.l=+t,this.opacity=+i}function Gi(n){return(n=(n||0)%360)<0?n+360:n}function In(n){return Math.max(0,Math.min(1,n||0))}function Pa(n,a,t){return 255*(n<60?a+(t-a)*n/60:n<180?t:n<240?a+(t-a)*(240-n)/60:a)}function zi(n,a,t,i,r){var o=n*n,s=o*n;return((1-3*n+3*o-s)*a+(4-6*o+3*s)*t+(1+3*n+3*o-3*s)*i+s*r)/6}kn(Dt,Oa,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Ii,formatHex:Ii,formatHex8:function yo(){return this.rgb().formatHex8()},formatHsl:function Co(){return $i(this).formatHsl()},formatRgb:Yi,toString:Yi}),kn(xe,nn,Ma(Dt,{brighter(n){return n=null==n?Nt:Math.pow(Nt,n),new xe(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new xe(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new xe(mt(this.r),mt(this.g),mt(this.b),Fn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ji,formatHex:Ji,formatHex8:function To(){return`#${_t(this.r)}${_t(this.g)}${_t(this.b)}${_t(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Hi,toString:Hi})),kn(Re,function Zo(n,a,t,i){return 1===arguments.length?$i(n):new Re(n,a,t,i??1)},Ma(Dt,{brighter(n){return n=null==n?Nt:Math.pow(Nt,n),new Re(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new Re(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(this.h<0),a=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*a,r=2*t-i;return new xe(Pa(n>=240?n-240:n+120,r,i),Pa(n,r,i),Pa(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new Re(Gi(this.h),In(this.s),In(this.l),Fn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Fn(this.opacity);return`${1===n?"hsl(":"hsla("}${Gi(this.h)}, ${100*In(this.s)}%, ${100*In(this.l)}%${1===n?")":`, ${n})`}`}}));const qa=n=>()=>n;function Qi(n,a){return function(t){return n+t*a}}function kt(n,a){var t=a-n;return t?Qi(n,t):qa(isNaN(n)?a:n)}function Wi(n){return function(a){var s,c,t=a.length,i=new Array(t),r=new Array(t),o=new Array(t);for(s=0;s<t;++s)c=nn(a[s]),i[s]=c.r||0,r[s]=c.g||0,o[s]=c.b||0;return i=n(i),r=n(r),o=n(o),c.opacity=1,function(u){return c.r=i(u),c.g=r(u),c.b=o(u),c+""}}}!function n(a){var t=function Oo(n){return 1==(n=+n)?kt:function(a,t){return t-a?function So(n,a,t){return n=Math.pow(n,t),a=Math.pow(a,t)-n,t=1/t,function(i){return Math.pow(n+i*a,t)}}(a,t,n):qa(isNaN(a)?t:a)}}(a);function i(r,o){var s=t((r=nn(r)).r,(o=nn(o)).r),c=t(r.g,o.g),u=t(r.b,o.b),g=kt(r.opacity,o.opacity);return function(l){return r.r=s(l),r.g=c(l),r.b=u(l),r.opacity=g(l),r+""}}return i.gamma=n,i}(1);var Po=Wi(function Ao(n){var a=n.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,a-1):Math.floor(t*a),r=n[i],o=n[i+1];return zi((t-i/a)*a,i>0?n[i-1]:2*r-o,r,o,i<a-1?n[i+2]:2*o-r)}});Wi(function wo(n){var a=n.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*a);return zi((t-i/a)*a,n[(i+a-1)%a],n[i%a],n[(i+1)%a],n[(i+2)%a])}});const ee=n=>Po(n[n.length-1]),Uo=ee(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(W)),No=ee(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(W)),ko=ee(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(W)),Fo=ee(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(W)),Yo=Math.PI/180,jo=180/Math.PI;var Ua=1.78277,Da=-.29227,Yn=-.90649,an=1.97294,Vi=an*Yn,Xi=an*Ua,er=Ua*Da- -.14861*Yn;function Ro(n){if(n instanceof vt)return new vt(n.h,n.s,n.l,n.opacity);n instanceof xe||(n=Ri(n));var t=n.g/255,i=n.b/255,r=(er*i+Vi*(n.r/255)-Xi*t)/(er+Vi-Xi),o=i-r,s=(an*(t-r)-Da*o)/Yn,c=Math.sqrt(s*s+o*o)/(an*r*(1-r)),u=c?Math.atan2(s,o)*jo-120:NaN;return new vt(u<0?u+360:u,c,r,n.opacity)}function ze(n,a,t,i){return 1===arguments.length?Ro(n):new vt(n,a,t,i??1)}function vt(n,a,t,i){this.h=+n,this.s=+a,this.l=+t,this.opacity=+i}function tr(n){return function a(t){function i(r,o){var s=n((r=ze(r)).h,(o=ze(o)).h),c=kt(r.s,o.s),u=kt(r.l,o.l),g=kt(r.opacity,o.opacity);return function(l){return r.h=s(l),r.s=c(l),r.l=u(Math.pow(l,t)),r.opacity=g(l),r+""}}return t=+t,i.gamma=a,i}(1)}kn(vt,ze,Ma(Dt,{brighter(n){return n=null==n?Nt:Math.pow(Nt,n),new vt(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new vt(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*Yo,a=+this.l,t=isNaN(this.s)?0:this.s*a*(1-a),i=Math.cos(n),r=Math.sin(n);return new xe(255*(a+t*(-.14861*i+Ua*r)),255*(a+t*(Da*i+Yn*r)),255*(a+t*(an*i)),this.opacity)}})),tr(function Mo(n,a){var t=a-n;return t?Qi(n,t>180||t<-180?t-360*Math.round(t/360):t):qa(isNaN(n)?a:n)});var Na=tr(kt),Jo=Na(ze(-100,.75,.35),ze(80,1.5,.8)),Ho=Na(ze(260,.75,.35),ze(80,1.5,.8)),jn=ze();const $o=Na(ze(300,.5,0),ze(-240,.5,1)),zo=ee(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(W)),Wo=ee(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(W)),Vo=ee(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(W));function Rn(n){var a=n.length;return function(t){return n[Math.max(0,Math.min(a-1,Math.floor(t*a)))]}}const Xo=Rn(W("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var es=Rn(W("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ts=Rn(W("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ns=Rn(W("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const is=ee(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(W)),os=ee(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(W)),cs=ee(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(W)),ds=ee(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(W)),us=ee(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(W)),hs=ee(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(W)),ms=ee(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(W)),vs=ee(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(W)),xs=ee(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(W)),Cs=ee(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(W)),Zs=ee(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(W)),ws=ee(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(W)),Ms=ee(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(W)),Ps=ee(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(W)),Us=ee(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(W));var Jn=nn(),Ds=Math.PI/3,Ns=2*Math.PI/3;const Ls=ee(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(W)),Ys=ee(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(W)),Rs=ee(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(W)),Hs=ee(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(W)),$s=ee(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(W)),rn={geoAzimuthalEqualArea:function Or(){return Ve(Va).scale(124.75).clipAngle(179.999)},geoAzimuthalEquidistant:function Pr(){return Ve(Xa).scale(79.4188).clipAngle(179.999)},geoGnomonic:function qr(){return Ve(ei).scale(144.049).clipAngle(60)},geoOrthographic:function Ur(){return Ve(ti).scale(249.5).clipAngle(90+U)},geoStereographic:function Dr(){return Ve(ni).scale(250).clipAngle(142)},geoEqualEarth:function Er(){return Ve(ai).scale(177.158)},geoAlbers:ii,geoAlbersUsa:function Ir(){var n,a,i,o,c,u,t=ii(),r=An().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=An().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g={point:function(m,v){u=[m,v]}};function l(m){var v=m[0],x=m[1];return u=null,i.point(v,x),u||(o.point(v,x),u)||(c.point(v,x),u)}function p(){return n=a=null,l}return l.invert=function(m){var v=t.scale(),x=t.translate(),O=(m[0]-x[0])/v,S=(m[1]-x[1])/v;return(S>=.12&&S<.234&&O>=-.425&&O<-.214?r:S>=.166&&S<.234&&O>=-.214&&O<-.115?s:t).invert(m)},l.stream=function(m){return n&&a===m?n:n=function Fr(n){var a=n.length;return{point:function(t,i){for(var r=-1;++r<a;)n[r].point(t,i)},sphere:function(){for(var t=-1;++t<a;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<a;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<a;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<a;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<a;)n[t].polygonEnd()}}}([t.stream(a=m),r.stream(m),s.stream(m)])},l.precision=function(m){return arguments.length?(t.precision(m),r.precision(m),s.precision(m),p()):t.precision()},l.scale=function(m){return arguments.length?(t.scale(m),r.scale(.35*m),s.scale(m),l.translate(t.translate())):t.scale()},l.translate=function(m){if(!arguments.length)return t.translate();var v=t.scale(),x=+m[0],O=+m[1];return i=t.translate(m).clipExtent([[x-.455*v,O-.238*v],[x+.455*v,O+.238*v]]).stream(g),o=r.translate([x-.307*v,O+.201*v]).clipExtent([[x-.425*v+U,O+.12*v+U],[x-.214*v-U,O+.234*v-U]]).stream(g),c=s.translate([x-.205*v,O+.212*v]).clipExtent([[x-.214*v+U,O+.166*v+U],[x-.115*v-U,O+.234*v-U]]).stream(g),p()},l.fitExtent=function(m,v){return ua(l,m,v)},l.fitSize=function(m,v){return Ba(l,m,v)},l.fitWidth=function(m,v){return $a(l,m,v)},l.fitHeight=function(m,v){return Ga(l,m,v)},l.scale(1070)},geoConicConformal:function Rr(){return pa(jr).scale(109.5).parallels([30,30])},geoConicEqualArea:An,geoConicEquidistant:function Br(){return pa(Hr).scale(131.154).center([0,13.9389])},geoEquirectangular:function Jr(){return Ve(Mn).scale(152.63)},geoMercator:function Yr(){return ri(wn).scale(961/Ce)},geoTransverseMercator:function $r(){var n=ri(oi),a=n.center,t=n.rotate;return n.center=function(i){return arguments.length?a([-i[1],i[0]]):[(i=a())[1],-i[0]]},n.rotate=function(i){return arguments.length?t([i[0],i[1],i.length>2?i[2]+90:90]):[(i=t())[0],i[1],i[2]-90]},t([0,0,90]).scale(159.155)},geoNaturalEarth1:function Gr(){return Ve(si).scale(175.295)}};Object.keys(rn).forEach(n=>{rn[`${n.charAt(3).toLowerCase()}${n.slice(4)}`]=rn[n]});let Ea=(()=>{class n extends ie.Ci{constructor(t){super(t),this.outlineBounds=null,this.oldChartBounds=null,this.geoPath=Mi()}init(t){t.position="chartArea",super.init(t),this.projection="function"==typeof t.projection?t.projection:(rn[t.projection]||rn.albersUsa)(),this.geoPath.projection(this.projection),this.outlineBounds=null,this.oldChartBounds=null}computeBounds(t){const i=Mi(this.projection.fitWidth(1e3,t)).bounds(t),r=Math.ceil(i[1][1]-i[0][1]),o=Math.ceil(i[1][0]-i[0][0]),s=this.projection.translate();this.outlineBounds={width:o,height:r,aspectRatio:o/r,refScale:this.projection.scale(),refX:s[0],refY:s[1]}}updateBounds(){const t=this.chart.chartArea,i=this.outlineBounds;if(!i)return!1;const r=this.options.padding,o="number"==typeof r?r:r.top,s="number"==typeof r?r:r.left,g=t.right-t.left-s-("number"==typeof r?r:r.right),l=t.bottom-t.top-o-("number"==typeof r?r:r.bottom),p=this.oldChartBounds;this.oldChartBounds={chartWidth:g,chartHeight:l};const m=Math.min(g/i.width,l/i.height),O=.5*(g-i.width*m)+t.left+s,S=.5*(l-i.height*m)+t.top+o,q=this.options;return this.projection.scale(i.refScale*m*q.projectionScale).translate([m*i.refX+O+q.projectionOffset[0],m*i.refY+S+q.projectionOffset[1]]),!p||p.chartWidth!==this.oldChartBounds.chartWidth||p.chartHeight!==this.oldChartBounds.chartHeight}}return n.id="projection",n.defaults={projection:"albersUsa",projectionScale:1,projectionOffset:[0,0],padding:0},n.descriptors={_scriptable:a=>"projection"!==a,_indexable:a=>"projectionOffset"!==a},n})();const Hn={position:"chartArea",property:"value",grid:{z:1,drawOnChartArea:!1},ticks:{z:1},legend:{align:"right",position:"bottom-right",length:100,width:50,margin:8,indicatorWidth:10}};class Lt extends ie.f${constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(a){a.position="chartArea",super.init(a),this.axis="r"}parse(a,t){return a&&"number"==typeof a[this.options.property]?a[this.options.property]:super.parse(a,t)}isHorizontal(){return"top"===this.options.legend.align||"bottom"===this.options.legend.align}_getNormalizedValue(a){return null==a||Number.isNaN(a)?null:(a-this._startValue)/this._valueRange}update(a,t,i){const r=Math.min(t,this.bottom??Number.POSITIVE_INFINITY),o=Math.min(a,this.right??Number.POSITIVE_INFINITY),s=this.options.legend,c=this.isHorizontal(),u=(v,x)=>v<1?x*v:v,g=Math.min(o,u(c?s.length:s.width,o))-(c?0:s.indicatorWidth),l=Math.min(r,u(c?s.width:s.length,r))-(c?s.indicatorWidth:0);this.legendSize={w:g,h:l},this.bottom=l,this.height=l,this.right=g,this.width=g;const p=this.options.position;this.options.position=this.options.legend.align;const m=super.update(g,l,i);return this.options.position=p,this.height=Math.min(l,this.height),this.width=Math.min(g,this.width),m}_computeLabelArea(){}draw(a){if(!this._isVisible())return;const t=function zs(n,a,t,i,r){const{indicatorWidth:o,align:s,position:c}=a,u="top"===s||"bottom"===s,g=("left"===s?r.w:t)+(u?o:0),l=("top"===s?r.h:i)+(u?0:o),p=function Gs(n){const{indicatorWidth:a,align:t,margin:i}=n;return{left:("number"==typeof i?i:i.left)+("right"===t?a:0),top:("number"==typeof i?i:i.top)+("bottom"===t?a:0),right:("number"==typeof i?i:i.right)+("left"===t?a:0),bottom:("number"==typeof i?i:i.bottom)+("top"===t?a:0)}}(a);if("string"==typeof c)switch(c){case"top-left":return[p.left,p.top];case"top":return[(n.right-g)/2,p.top];case"left":return[p.left,(n.bottom-l)/2];case"top-right":return[n.right-g-p.right,p.top];case"bottom-right":return[n.right-g-p.right,n.bottom-l-p.bottom];case"bottom":return[(n.right-g)/2,n.bottom-l-p.bottom];case"bottom-left":return[p.left,n.bottom-l-p.bottom];default:return[n.right-g-p.right,(n.bottom-l)/2]}return[c.x,c.y]}(a,this.options.legend,this.width,this.height,this.legendSize),{ctx:i}=this;i.save(),i.translate(t[0],t[1]);const r=this.options.position;this.options.position=this.options.legend.align,super.draw({...a,bottom:this.height+10,right:this.width}),this.options.position=r;const{indicatorWidth:o}=this.options.legend;switch(this.options.legend.align){case"left":i.translate(this.legendSize.w,0);break;case"top":i.translate(0,this.legendSize.h);break;case"bottom":i.translate(0,-o);break;default:i.translate(-o,0)}this._drawIndicator(),i.restore()}_drawIndicator(){}}class nr extends ie.WV{constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(a){Lt.prototype.init.call(this,a)}parse(a,t){return Lt.prototype.parse.call(this,a,t)}isHorizontal(){return"top"===this.options.legend.align||"bottom"===this.options.legend.align}_getNormalizedValue(a){return null==a||Number.isNaN(a)?null:(Math.log10(a)-this._startValue)/this._valueRange}update(a,t,i){return Lt.prototype.update.call(this,a,t,i)}_computeLabelArea(){}draw(a){return Lt.prototype.draw.call(this,a)}_drawIndicator(){}}const Xe={interpolateBlues:Uo,interpolateBrBG:No,interpolateBuGn:ko,interpolateBuPu:Fo,interpolateCividis:function Io(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-n*(35.34-n*(2381.73-n*(6402.7-n*(7024.72-2710.57*n)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+n*(170.73+n*(52.82-n*(131.46-n*(176.58-67.37*n)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+n*(442.36-n*(2482.43-n*(6167.24-n*(6614.94-2475.67*n)))))))+")"},interpolateCool:Ho,interpolateCubehelixDefault:$o,interpolateGnBu:zo,interpolateGreens:Wo,interpolateGreys:Vo,interpolateInferno:ts,interpolateMagma:es,interpolateOrRd:is,interpolateOranges:os,interpolatePRGn:cs,interpolatePiYG:ds,interpolatePlasma:ns,interpolatePuBu:us,interpolatePuBuGn:hs,interpolatePuOr:ms,interpolatePuRd:vs,interpolatePurples:xs,interpolateRainbow:function Bo(n){(n<0||n>1)&&(n-=Math.floor(n));var a=Math.abs(n-.5);return jn.h=360*n-100,jn.s=1.5-1.5*a,jn.l=.8-.9*a,jn+""},interpolateRdBu:Cs,interpolateRdGy:Zs,interpolateRdPu:ws,interpolateRdYlBu:Ms,interpolateRdYlGn:Ps,interpolateReds:Us,interpolateSinebow:function Es(n){var a;return n=(.5-n)*Math.PI,Jn.r=255*(a=Math.sin(n))*a,Jn.g=255*(a=Math.sin(n+Ds))*a,Jn.b=255*(a=Math.sin(n+Ns))*a,Jn+""},interpolateSpectral:Ls,interpolateTurbo:function Fs(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+n*(1172.33-n*(10793.56-n*(33300.12-n*(38394.49-14825.05*n)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+n*(557.33+n*(1225.33-n*(3574.96-n*(1073.77+707.56*n)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+n*(3211.1-n*(15327.97-n*(27814-n*(22569.18-6838.66*n)))))))+")"},interpolateViridis:Xo,interpolateWarm:Jo,interpolateYlGn:Ys,interpolateYlGnBu:Rs,interpolateYlOrBr:Hs,interpolateYlOrRd:$s};function ar(n,a){const t=1/a;if(n<=t)return 0;if(n>=1-t)return 1;for(let i=0;i<1;i+=t)if(n<i)return i-t/2;return n}Object.keys(Xe).forEach(n=>{Xe[`${n.charAt(11).toLowerCase()}${n.slice(12)}`]=Xe[n],Xe[n.slice(11)]=Xe[n]});const ir={interpolate:"blues",missing:"transparent",quantize:0};class bt extends Lt{get interpolate(){const a=this.options;return a?"function"==typeof a.interpolate?a.interpolate:Xe[a.interpolate]||Xe.blues:t=>`rgb(${t},${t},${t})`}getColorForValue(a){const t=this._getNormalizedValue(a);return null==t||Number.isNaN(t)?this.options.missing:this.getColor(t)}getColor(a){let t=a;return this.options.quantize>0&&(t=ar(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){const{indicatorWidth:a}=this.options.legend,t=this._reversePixels;if(this.isHorizontal()){const i=this.width;if(this.options.quantize>0){const r=i/this.options.quantize,o=t?s=>i-r-s:s=>s;for(let s=0;s<i;s+=r)this.ctx.fillStyle=this.getColor((s+r/2)/i),this.ctx.fillRect(o(s),0,r,a)}else{const r=t?o=>i-1-o:o=>o;for(let o=0;o<i;o+=1)this.ctx.fillStyle=this.getColor((o+.5)/i),this.ctx.fillRect(r(o),0,1,a)}}else{const i=this.height;if(this.options.quantize>0){const r=i/this.options.quantize,o=t?s=>i-r-s:s=>s;for(let s=0;s<i;s+=r)this.ctx.fillStyle=this.getColor((s+r/2)/i),this.ctx.fillRect(0,o(s),a,r)}else{const r=t?o=>i-1-o:o=>o;for(let o=0;o<i;o+=1)this.ctx.fillStyle=this.getColor((o+.5)/i),this.ctx.fillRect(0,r(o),a,1)}}}}bt.id="color",bt.defaults=(0,me.a4)({},[ie.f$.defaults,Hn,ir]),bt.descriptors={_scriptable:n=>"interpolate"!==n,_indexable:!1};class ka extends nr{constructor(){super(...arguments),this.interpolate=a=>`rgb(${a},${a},${a})`}init(a){super.init(a),this.interpolate="function"==typeof a.interpolate?a.interpolate:Xe[a.interpolate]||Xe.blues}getColorForValue(a){return bt.prototype.getColorForValue.call(this,a)}getColor(a){let t=a;return this.options.quantize>0&&(t=ar(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){return bt.prototype._drawIndicator.call(this)}}ka.id="colorLogarithmic",ka.defaults=(0,me.a4)({},[ie.WV.defaults,Hn,ir]),ka.descriptors={_scriptable:n=>"interpolate"!==n,_indexable:!1};const rr={missing:1,mode:"area",range:[2,20],legend:{align:"bottom",length:90,width:70,indicatorWidth:42}};class xt extends Lt{constructor(){super(...arguments),this._model=null}getSizeForValue(a){const t=this._getNormalizedValue(a);return null==t||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(a){const[t,i]=this.options.range;if("area"===this.options.mode){const o=i*i*Math.PI,s=t*t*Math.PI;return Math.sqrt((a*(o-s)+s)/Math.PI)}return a*(i-t)+t}_drawIndicator(){const{ctx:a}=this,t=this.options.legend.indicatorWidth/2,i=this.isHorizontal(),r=this.ticks,o=this.getLabelItems(),s=o?o.map(c=>({[i?"x":"y"]:c.options.translation[i?0:1]})):r.map((c,u)=>({[i?"x":"y"]:this.getPixelForTick(u)}));if((this._gridLineItems||[]).forEach(c=>{if(a.save(),a.strokeStyle=c.color,a.lineWidth=c.width,a.setLineDash&&(a.setLineDash(c.borderDash),a.lineDashOffset=c.borderDashOffset),a.beginPath(),this.options.grid.drawTicks)switch(this.options.legend.align){case"left":a.moveTo(0,c.ty1),a.lineTo(t,c.ty2);break;case"top":a.moveTo(c.tx1,0),a.lineTo(c.tx2,t);break;case"bottom":a.moveTo(c.tx1,t),a.lineTo(c.tx2,2*t);break;default:a.moveTo(t,c.ty1),a.lineTo(2*t,c.ty2)}a.stroke(),a.restore()}),this._model){const c=this._model;a.strokeStyle=c.borderColor,a.lineWidth=c.borderWidth||0,a.fillStyle=c.backgroundColor}else a.fillStyle="blue";r.forEach((c,u)=>{const g=s[u],l=this.getSizeForValue(c.value),v={pointStyle:"circle",borderWidth:0,...this._model||{},radius:l};(0,me.at)(a,v,i?g.x:t,i?t:g.y)})}}xt.id="size",xt.defaults=(0,me.a4)({},[ie.f$.defaults,Hn,rr]),xt.descriptors={_scriptable:!0,_indexable:n=>"range"!==n};class or extends nr{constructor(){super(...arguments),this._model=null}getSizeForValue(a){const t=this._getNormalizedValue(a);return null==t||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(a){return xt.prototype.getSizeImpl.call(this,a)}_drawIndicator(){xt.prototype._drawIndicator.call(this)}}or.id="sizeLogarithmic",or.defaults=(0,me.a4)({},[ie.WV.defaults,Hn,rr]);class ot extends ie.W_{constructor(){super(...arguments),this.cache=void 0}inRange(a,t){const i=this.getBounds(),r=(Number.isNaN(a)||a>=i.x&&a<=i.x2)&&(Number.isNaN(t)||t>=i.y&&t<=i.y2),o=this.projectionScale.geoPath.projection();if(r&&!Number.isNaN(a)&&!Number.isNaN(t)&&"function"==typeof o.invert){const s=o.invert([a,t]);return null!=s&&function uo(n,a){return(n&&Oi.hasOwnProperty(n.type)?Oi[n.type]:En)(n,a)}(this.feature,s)}return r}inXRange(a){return this.inRange(a,Number.NaN)}inYRange(a){return this.inRange(Number.NaN,a)}getCenterPoint(){if(this.cache&&this.cache.center)return this.cache.center;let a;if(this.center){const t=this.projectionScale.projection([this.center.longitude,this.center.latitude]);a={x:t[0],y:t[1]}}else{const t=this.projectionScale.geoPath.centroid(this.feature);a={x:t[0],y:t[1]}}return this.cache={...this.cache||{},center:a},a}getBounds(){if(this.cache&&this.cache.bounds)return this.cache.bounds;const a=function Qs(n,a){return[[n[0][0]-a,n[0][1]-a],[n[1][0]+a,n[1][1]+a]]}(this.projectionScale.geoPath.bounds(this.feature),this.options.borderWidth/2),t={x:a[0][0],x2:a[1][0],y:a[0][1],y2:a[1][1],width:a[1][0]-a[0][0],height:a[1][1]-a[0][1]};return this.cache={...this.cache||{},bounds:t},t}_drawInCache(a){const t=this.getBounds();if(!Number.isFinite(t.x))return;const i=this.cache&&this.cache.canvas?this.cache.canvas:a.createElement("canvas"),r=Math.floor(t.x),o=Math.floor(t.y),s=Math.ceil(t.x+t.width),c=Math.ceil(t.y+t.height),u=this.pixelRatio||1;i.width=Math.max(s-r,1)*u,i.height=Math.max(c-o,1)*u;const g=i.getContext("2d");g&&(g.clearRect(0,0,i.width,i.height),g.save(),g.scale(u,u),g.translate(-r,-o),this._drawImpl(g),g.restore(),this.cache={...this.cache||{},canvas:i,canvasKey:this._optionsToKey()})}_optionsToKey(){const{options:a}=this;return`${a.backgroundColor};${a.borderColor};${a.borderWidth};${this.pixelRatio}`}_drawImpl(a){const{feature:t}=this,{options:i}=this;a.beginPath(),this.projectionScale.geoPath.context(a)(t),i.backgroundColor&&(a.fillStyle=i.backgroundColor,a.fill()),i.borderColor&&(a.strokeStyle=i.borderColor,a.lineWidth=i.borderWidth,a.stroke())}draw(a){const{feature:t}=this;if(!t)return;(!this.cache||this.cache.canvasKey!==this._optionsToKey())&&this._drawInCache(a.canvas.ownerDocument);const i=this.getBounds();if(this.cache&&this.cache.canvas){const r=Math.floor(i.x),o=Math.floor(i.y),s=Math.ceil(i.x+i.width),c=Math.ceil(i.y+i.height);a.drawImage(this.cache.canvas,r,o,s-r,c-o)}else Number.isFinite(i.x)&&(a.save(),this._drawImpl(a),a.restore())}}ot.id="geoFeature",ot.defaults={...ie.ZL.defaults,outlineBackgroundColor:null,outlineBorderWidth:0,graticuleBorderColor:"#CCCCCC",graticuleBorderWidth:0},ot.defaultRoutes={outlineBorderColor:"borderColor",...ie.ZL.defaultRoutes||{}};const sr={showOutline:!1,showGraticule:!1,clipMap:!0},cr={scales:{projection:{axis:"x",type:Ea.id,position:"chartArea",display:!1}}};function lr(n){const a={...n};return Object.keys(n).forEach(t=>{let i=t;if(t.startsWith("outline")){const r=t.slice(7);i=r[0].toLowerCase()+r.slice(1)}else{if(!t.startsWith("hoverOutline"))return;i=`hover${t.slice(12)}`}delete a[t],a[i]=n[t]}),a}class dr extends ie.Q7{getGeoDataset(){return super.getDataset()}getGeoOptions(){return this.chart.options}getProjectionScale(){return this.getScaleForId("projection")}linkScales(){const a=this.getGeoDataset(),t=this.getMeta();t.xAxisID="projection",a.xAxisID="projection",t.yAxisID="projection",a.yAxisID="projection",t.xScale=this.getScaleForId("projection"),t.yScale=this.getScaleForId("projection"),this.getProjectionScale().computeBounds(this.resolveOutline())}showOutline(){return(0,me.v)(this.getGeoDataset().showOutline,this.getGeoOptions().showOutline)}clipMap(){return(0,me.v)(this.getGeoDataset().clipMap,this.getGeoOptions().clipMap)}getGraticule(){return(0,me.v)(this.getGeoDataset().showGraticule,this.getGeoOptions().showGraticule)}update(a){super.update(a);const t=this.getMeta(),i=this.getProjectionScale(),r=i.updateBounds();if(this.showOutline()){const o=t.dataset;if(r&&delete o.cache,o.projectionScale=i,o.pixelRatio=this.chart.currentDevicePixelRatio,"resize"!==a){const s=lr(this.resolveDatasetElementOptions(a)),c={feature:this.resolveOutline(),options:s};this.updateElement(o,void 0,c,a),this.getGraticule()&&(t.graticule=s)}}else this.getGraticule()&&"resize"!==a&&(t.graticule=lr(this.resolveDatasetElementOptions(a)));this.updateElements(t.data,0,t.data.length,a),r&&t.data.forEach(o=>delete o.cache)}resolveOutline(){const t=this.getGeoDataset().outline||{type:"Sphere"};return Array.isArray(t)?{type:"FeatureCollection",features:t}:t}showGraticule(){const a=this.getGraticule(),t=this.getMeta().graticule;if(!a||!t)return;const{ctx:i}=this.chart,o=this.getProjectionScale().geoPath.context(i);if(i.save(),i.beginPath(),"boolean"==typeof a)a&&o(function po(){return Li()()}());else{const s=Li();a.stepMajor&&s.stepMajor(a.stepMajor),a.stepMinor&&s.stepMinor(a.stepMinor),o(s())}i.strokeStyle=t.graticuleBorderColor,i.lineWidth=t.graticuleBorderWidth,i.stroke(),i.restore()}draw(){const{chart:a}=this,t=this.clipMap();let i=!1;(!0===t||"outline"===t||"outline+graticule"===t)&&(i=!0,(0,me.Y)(a.ctx,a.chartArea)),this.showOutline()&&this.getMeta().dataset&&this.getMeta().dataset.draw.call(this.getMeta().dataset,a.ctx,a.chartArea),!0===t||"graticule"===t||"outline+graticule"===t?i||(0,me.Y)(a.ctx,a.chartArea):i&&(i=!1,(0,me.$)(a.ctx)),this.showGraticule(),!0===t||"items"===t?i||(0,me.Y)(a.ctx,a.chartArea):i&&(i=!1,(0,me.$)(a.ctx)),this.getMeta().data.forEach(r=>r.draw.call(r,a.ctx,a.chartArea)),i&&(i=!1,(0,me.$)(a.ctx))}}function fr(n,a,t,i=[],r=[]){ie.i_.addControllers(t),Array.isArray(i)?ie.i_.addElements(...i):ie.i_.addElements(i),Array.isArray(r)?ie.i_.addScales(...r):ie.i_.addScales(r);const o=a;return o.type=n,o}class on extends dr{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const a=this.getGeoDataset(),t=this.getMeta();t.vAxisID="color",t.rAxisID="color",a.vAxisID="color",a.rAxisID="color",t.rScale=this.getScaleForId("color"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,a.iAxisID=t.xAxisID}_getOtherScale(a){return a}parse(a,t){const i=this.getMeta().rScale,{data:r}=this.getDataset(),o=this._cachedMeta;for(let s=a;s<a+t;s+=1)o._parsed[s]={[i.axis]:i.parse(r[s],s)}}updateElements(a,t,i,r){const o=this.resolveDataElementOptions(t,r),s=this.getSharedOptions(o),c=this.includeOptions(r,s),u=this.getProjectionScale();this.updateSharedOptions(s,r,o);for(let g=t;g<t+i;g+=1){const l=a[g];l.projectionScale=u,l.feature=this._data[g].feature,l.center=this._data[g].center,l.pixelRatio=this.chart.currentDevicePixelRatio;const p=l.getCenterPoint(),m={x:p.x,y:p.y};c&&(m.options=s||this.resolveDataElementOptions(g,r)),this.updateElement(l,g,m,r)}}indexToColor(a){const t=this.getMeta().rScale;return t.getColorForValue(this.getParsed(a)[t.axis])}}on.id="choropleth",on.defaults=(0,me.a4)({},[sr,{datasetElementType:ot.id,dataElementType:ot.id}]),on.overrides=(0,me.a4)({},[cr,{plugins:{tooltip:{callbacks:{title:()=>"",label(n){var a,t,i,r;return null==n.formattedValue?null===(t=null===(a=n.chart.data)||void 0===a?void 0:a.labels)||void 0===t?void 0:t[n.dataIndex]:`${null===(r=null===(i=n.chart.data)||void 0===i?void 0:i.labels)||void 0===r?void 0:r[n.dataIndex]}: ${n.formattedValue}`}}},colors:{enabled:!1}},scales:{color:{type:bt.id,axis:"x"}},elements:{geoFeature:{backgroundColor:n=>null==n.dataIndex?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToColor(n.dataIndex)}}}]);class ur extends ie.kL{constructor(a,t){super(a,fr("choropleth",t,on,ot,[bt,Ea]))}}ur.id=on.id;class sn extends dr{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const a=this.getGeoDataset(),t=this.getMeta();t.vAxisID="size",t.rAxisID="size",a.vAxisID="size",a.rAxisID="size",t.rScale=this.getScaleForId("size"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,a.iAxisID=t.xAxisID}_getOtherScale(a){return a}parse(a,t){const i=this.getMeta().rScale,r=this.getDataset().data,o=this._cachedMeta;for(let s=a;s<a+t;s+=1){const c=r[s];o._parsed[s]={x:c.longitude??c.x,y:c.latitude??c.y,[i.axis]:i.parse(c,s)}}}updateElements(a,t,i,r){const o="reset"===r,s=this.resolveDataElementOptions(t,r),c=this.getSharedOptions(s),u=this.includeOptions(r,c),g=this.getProjectionScale();this.getMeta().rScale._model=s,this.updateSharedOptions(c,r,s);for(let l=t;l<t+i;l+=1){const p=a[l],m=this.getParsed(l),v=g.projection([m.x,m.y]),x={x:v?v[0]:0,y:v?v[1]:0,skip:Number.isNaN(m.x)||Number.isNaN(m.y)};u&&(x.options=c||this.resolveDataElementOptions(l,r),o&&(x.options.radius=0)),this.updateElement(p,l,x,r)}}indexToRadius(a){const t=this.getMeta().rScale;return t.getSizeForValue(this.getParsed(a)[t.axis])}}function Vs(n){return n}function pr(n,a){var t=a.id,i=a.bbox,r=a.properties??{},o=function tc(n,a){var t=function Xs(n){if(null==n)return Vs;var a,t,i=n.scale[0],r=n.scale[1],o=n.translate[0],s=n.translate[1];return function(c,u){u||(a=t=0);var g=2,l=c.length,p=new Array(l);for(p[0]=(a+=c[0])*i+o,p[1]=(t+=c[1])*r+s;g<l;)p[g]=c[g],++g;return p}}(n.transform),i=n.arcs;function r(l,p){p.length&&p.pop();for(var m=i[l<0?~l:l],v=0,x=m.length;v<x;++v)p.push(t(m[v],v));l<0&&function Ks(n,a){for(var t,i=n.length,r=i-a;r<--i;)t=n[r],n[r++]=n[i],n[i]=t}(p,x)}function o(l){return t(l)}function s(l){for(var p=[],m=0,v=l.length;m<v;++m)r(l[m],p);return p.length<2&&p.push(p[0]),p}function c(l){for(var p=s(l);p.length<4;)p.push(p[0]);return p}function u(l){return l.map(c)}return function g(l){var m,p=l.type;switch(p){case"GeometryCollection":return{type:p,geometries:l.geometries.map(g)};case"Point":m=o(l.coordinates);break;case"MultiPoint":m=l.coordinates.map(o);break;case"LineString":m=s(l.arcs);break;case"MultiLineString":m=l.arcs.map(s);break;case"Polygon":m=u(l.arcs);break;case"MultiPolygon":m=l.arcs.map(u);break;default:return null}return{type:p,coordinates:m}}(a)}(n,a);return null==t&&null==i?{type:"Feature",properties:r,geometry:o}:null==i?{type:"Feature",id:t,properties:r,geometry:o}:{type:"Feature",id:t,bbox:i,properties:r,geometry:o}}sn.id="bubbleMap",sn.defaults=(0,me.a4)({},[sr,{dataElementType:ie.od.id,datasetElementType:ot.id,showOutline:!0,clipMap:"outline+graticule"}]),sn.overrides=(0,me.a4)({},[cr,{plugins:{tooltip:{callbacks:{title:()=>"",label(n){var a,t,i,r;return null==n.formattedValue?null===(t=null===(a=n.chart.data)||void 0===a?void 0:a.labels)||void 0===t?void 0:t[n.dataIndex]:`${null===(r=null===(i=n.chart.data)||void 0===i?void 0:i.labels)||void 0===r?void 0:r[n.dataIndex]}: ${n.formattedValue}`}}}},scales:{size:{axis:"x",type:xt.id}},elements:{point:{radius:n=>null==n.dataIndex?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex),hoverRadius:n=>null==n.dataIndex?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex)+1}}}]),class Ws extends ie.kL{constructor(a,t){super(a,fr("bubbleMap",t,sn,ot,[xt,Ea]))}}.id=sn.id;const nc={Dublin:"Contae \xc1tha Cliath",Monaghan:"Contae Mhuineach\xe1in",Galway:"Contae na Gaillimhe",Cork:"Contae Chorca\xed\xad",Limerick:"Contae Luimnigh",Waterford:"Contae Phort L\xe1irge",Tipperary:"Contae Thiobraid \xc1rann",Louth:"Contae L\xfa",Mayo:"Contae Mhaigh Eo",Meath:"Contae na M\xed",Offaly:"Contae U\xed\xadbh Fhail\xed",Westmeath:"Contae na hIarmh\xed\xad",Wexford:"Contae Loch Garman",Wicklow:"Contae Chill Mhant\xe1in",Kildare:"Contae Chill Dara",Kilkenny:"Contae Chill Chainnigh",Laois:"Contae Laoise",Kerry:"Contae Chiarra\xed",Roscommon:"Contae Ros Com\xe1in",Sligo:"Contae Shligigh",Donegal:"Contae Dh\xfan na nGall",Leitrim:"Contae Liatroma",Longford:"Contae an Longfoirt",Clare:"Contae an Chl\xe1ir",Carlow:"Contae Cheatharlach",Cavan:"Contae an Chabh\xe1in",Belfast:"B\xe9al Feirste",Antrim:"Contae Aontroma",Armagh:"Contae Ard Mhacha",Derry:"Contae Dhoire",Down:"Contae an D\xfain",Tryone:"Contae Th\xedr Eoghain",Fermanagh:"Contae Fhear Manach"};var yt=M(3546);function ac(n,a){if(1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("Number of Users (",t.userCounts.total,")")}}function ic(n,a){if(1&n&&(e.TgZ(0,"mat-card")(1,"mat-card-header",4)(2,"mat-card-title"),e._uU(3,"Story Stats"),e.qZA()(),e.TgZ(4,"mat-card-content")(5,"mat-card")(6,"mat-card-content",12)(7,"b"),e._uU(8,"Total words:"),e.qZA(),e._uU(9),e.qZA()(),e.TgZ(10,"mat-card")(11,"mat-card-content",12)(12,"b"),e._uU(13,"Total stories:"),e.qZA(),e._uU(14),e.qZA()(),e.TgZ(15,"mat-card")(16,"mat-card-content",12)(17,"b"),e._uU(18,"Avg words per story:"),e.qZA(),e._uU(19),e.qZA()(),e.TgZ(20,"mat-card")(21,"mat-card-content",12)(22,"b"),e._uU(23,"Total recordings:"),e.qZA(),e._uU(24),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(9),e.hij(" ",t.storyStats.totalWords," "),e.xp6(5),e.hij(" ",t.storyStats.totalStories," "),e.xp6(5),e.hij(" ",t.storyStats.avgWordCount," "),e.xp6(5),e.hij(" ",t.storyStats.totalRecordings," ")}}function rc(n,a){if(1&n&&(e.TgZ(0,"mat-card")(1,"mat-card-header",4)(2,"mat-card-title"),e._uU(3,"User Stats"),e.qZA()(),e.TgZ(4,"mat-card-content")(5,"mat-card")(6,"mat-card-content",12)(7,"b"),e._uU(8,"Profiles filled out:"),e.qZA(),e._uU(9),e.ALo(10,"percent"),e.qZA()(),e.TgZ(11,"mat-card")(12,"mat-card-content",12)(13,"b"),e._uU(14,"Students with at least 1 story:"),e.qZA(),e._uU(15),e.ALo(16,"percent"),e.qZA()(),e.TgZ(17,"mat-card")(18,"mat-card-content",12)(19,"b"),e._uU(20,"Teaechers with at least 1 classroom:"),e.qZA(),e._uU(21),e.ALo(22,"percent"),e.qZA()(),e.TgZ(23,"mat-card")(24,"mat-card-content",12)(25,"b"),e._uU(26,"Language Settings:"),e.qZA(),e.TgZ(27,"div")(28,"b"),e._uU(29,"GA:"),e.qZA(),e._uU(30),e.ALo(31,"percent"),e.qZA(),e.TgZ(32,"div")(33,"b"),e._uU(34,"EN:"),e.qZA(),e._uU(35),e.ALo(36,"percent"),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(9),e.hij(" ",e.xi3(10,5,t.profileFilledPercentage,"2.2")," "),e.xp6(6),e.hij(" ",e.xi3(16,8,t.studentsWithStoriesPercentage,"2.2")," "),e.xp6(6),e.hij(" ",e.xi3(22,11,t.teachersWithClassroomsPercentage,"2.2")," "),e.xp6(9),e.hij(" ",e.xi3(31,14,t.irishPercentage,"2.2"),""),e.xp6(5),e.hij(" ",e.xi3(36,17,t.englishPercentage,"2.2"),"")}}function oc(n,a){if(1&n&&(e.TgZ(0,"mat-card")(1,"mat-card-header",4)(2,"mat-card-title"),e._uU(3,"Teacher Stats"),e.qZA()(),e.TgZ(4,"mat-card-content")(5,"mat-card")(6,"mat-card-content",12)(7,"b"),e._uU(8,"Total classrooms:"),e.qZA(),e._uU(9),e.qZA()(),e.TgZ(10,"mat-card")(11,"mat-card-content",12)(12,"b"),e._uU(13,"Total stories with feedback:"),e.qZA(),e._uU(14),e.qZA()(),e.TgZ(15,"mat-card")(16,"mat-card-content",12)(17,"b"),e._uU(18,"Stories with only textual feedback:"),e.qZA(),e._uU(19),e.qZA()(),e.TgZ(20,"mat-card")(21,"mat-card-content",12)(22,"b"),e._uU(23,"Stories with only audio feedback:"),e.qZA(),e._uU(24),e.qZA()(),e.TgZ(25,"mat-card")(26,"mat-card-content",12)(27,"b"),e._uU(28,"Stories with both text/audio feedback:"),e.qZA(),e._uU(29),e.qZA()(),e.TgZ(30,"mat-card")(31,"mat-card-content",12)(32,"b"),e._uU(33,"Total words textual feedback:"),e.qZA(),e._uU(34),e.qZA()(),e.TgZ(35,"mat-card")(36,"mat-card-content",12)(37,"b"),e._uU(38,"Avg words textual feedback:"),e.qZA(),e._uU(39),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(9),e.hij(" ",t.totalClassrooms," "),e.xp6(5),e.hij(" ",t.storyStats.totalFeedback," "),e.xp6(5),e.hij(" ",t.storyStats.onlyTextFeedback," "),e.xp6(5),e.hij(" ",t.storyStats.onlyAudioFeedback," "),e.xp6(5),e.hij(" ",t.storyStats.bothAudioAndText," "),e.xp6(5),e.hij(" ",t.storyStats.totalFeedbackWords," "),e.xp6(5),e.hij(" ",t.storyStats.avgFeedbackWordCount," ")}}function sc(n,a){1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1," Grammar Errors "),e.qZA())}function cc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",16),e._UZ(2,"div",17),e.TgZ(3,"div"),e._uU(4),e.qZA()()()),2&n){const t=a.$implicit;e.xp6(2),e.Udp("background-color",t.fillStyle)("border-color",t.strokeStyle),e.xp6(2),e.Oqu(t.text)}}function lc(n,a){if(1&n&&(e.TgZ(0,"div",13)(1,"div",14),e._uU(2,"Legend"),e.qZA(),e._UZ(3,"hr"),e.YNc(4,cc,5,5,"div",15),e.qZA()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.pieChartLegendItems)}}let dc=(()=>{class n{constructor(t,i,r,o,s,c){this.userService=t,this.storyService=i,this.classroomService=r,this.profileService=o,this.http=s,this.ts=c,this.pieChartLegendItems=[],this.totalClassrooms=0,this.profileFilledPercentage=0,this.studentsWithStoriesPercentage=0,this.teachersWithClassroomsPercentage=0,this.englishPercentage=0,this.irishPercentage=0,this.dataLoaded=!1}ngOnInit(){var t=this;return(0,se.Z)(function*(){t.userCounts=yield(0,be.z)(t.userService.getUserCountAndStatus()),t.storyStats=yield(0,be.z)(t.storyService.getStoryStats()),t.grammarErrorCounts=yield(0,be.z)(t.http.get(`${De.Z.baseurl}gramadoir/getUserGrammarCounts`)),t.profileCountyCounts=yield(0,be.z)(t.profileService.getCountyCounts()),t.totalClassrooms=yield(0,be.z)(t.classroomService.getTotalClassrooms());let i=yield(0,be.z)(t.profileService.getNumOfProfiles());t.profileFilledPercentage=i/t.userCounts.total;let r=yield(0,be.z)(t.userService.countUsersWithStories());t.studentsWithStoriesPercentage=r/t.userCounts.totalStudents;let o=yield(0,be.z)(t.userService.countTeachersWithClassrooms());t.teachersWithClassroomsPercentage=o/t.userCounts.totalTeachers;let s=yield(0,be.z)(t.userService.getLanguageCount());t.englishPercentage=s.englishCount/t.userCounts.total,t.irishPercentage=s.irishCount/t.userCounts.total,t.dataLoaded=!0,yield t.makeUserGraph(),yield t.makeGrammarGraph(),yield t.getCountyMap()})()}makeUserGraph(){var t=this;return(0,se.Z)(function*(){let r=document.getElementById("user-counts").getContext("2d");t.userChart=new ie.kL(r,{type:"bar",data:{labels:["Students","Teachers"],datasets:[{label:"Active",data:[t.userCounts.activeStudents,t.userCounts.activeTeachers],backgroundColor:"green"},{label:"Pending",data:[t.userCounts.pendingStudents,t.userCounts.pendingTeachers],backgroundColor:"yellow"},{label:"Not specified",data:[t.userCounts.totalStudents-(t.userCounts.activeStudents+t.userCounts.pendingStudents),t.userCounts.totalTeachers-(t.userCounts.activeTeachers+t.userCounts.pendingTeachers)],backgroundColor:"red"}]},options:{plugins:{title:{display:!0,text:"Stacked bar chart"}},responsive:!0}})})()}makeGrammarGraph(){var t=this;return(0,se.Z)(function*(){let r=document.getElementById("grammar-pie-chart").getContext("2d");t.pieChart&&t.pieChart.destroy(),t.pieChart=new ie.kL(r,{type:"pie",data:{labels:Object.keys(t.grammarErrorCounts),datasets:[{label:"Grammar Error Counts ",data:Object.values(t.grammarErrorCounts),backgroundColor:Object.keys(t.grammarErrorCounts).map(o=>`#${(16777215*Math.random()<<0).toString(16)}`)}]},options:{plugins:{legend:{display:!1}}}}),t.pieChartLegendItems=t.pieChart.legend.legendItems})()}getCountyMap(){var t=this;return(0,se.Z)(function*(){const i=yield fetch("https://raw.githubusercontent.com/gist/carsonfarmer/9791524/raw/b27ca0d78d46a84664fe7ef709eed4f7621f7a25/irish-counties.topojson").then(u=>u.json()),r=function ec(n,a){return"string"==typeof a&&(a=n.objects[a]),"GeometryCollection"===a.type?{type:"FeatureCollection",features:a.geometries.map(function(t){return pr(n,t)})}:pr(n,a)}(i,i.objects.counties).features,o=r.map(u=>u.id),s=r.map(u=>({feature:u,value:t.profileCountyCounts[nc[u.id]]}));let c=document.getElementById("county-chart");t.countyChart=new ur(c.getContext("2d"),{data:{labels:o,datasets:[{label:"Counties",outline:r,showOutline:!0,data:s}]},options:{plugins:{legend:{display:!1}},scales:{projection:{axis:"x",projection:"equalEarth"}}}})})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(lt.K),e.Y36(We.N),e.Y36(jt.u),e.Y36(Rt.H),e.Y36(Qe.eN),e.Y36(Ue.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-database-stats"]],decls:26,vars:6,consts:[[1,"dashboard"],[1,"dashboard-header"],[1,"dashboard-title"],[1,"cards-container"],[1,"stats-card-header"],[4,"ngIf"],["id","user-counts"],[2,"display","flex"],["class","legendContainer",4,"ngIf"],[1,"pieContainer"],["id","grammar-pie-chart","width","200","height","200"],["id","county-chart"],[1,"cardText"],[1,"legendContainer"],[1,"legend"],[4,"ngFor","ngForOf"],[1,"legendPair"],[1,"legendMarker"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Database Stats"),e.qZA()(),e.TgZ(4,"div",3)(5,"mat-card")(6,"mat-card-header",4),e.YNc(7,ac,2,1,"mat-card-title",5),e.qZA(),e.TgZ(8,"mat-card-content"),e._UZ(9,"canvas",6),e.qZA()(),e.YNc(10,ic,25,4,"mat-card",5),e.YNc(11,rc,37,20,"mat-card",5),e.YNc(12,oc,40,7,"mat-card",5),e.TgZ(13,"mat-card")(14,"mat-card-header",4),e.YNc(15,sc,2,0,"mat-card-title",5),e.qZA(),e.TgZ(16,"mat-card-content",7),e.YNc(17,lc,5,1,"div",8),e.TgZ(18,"div",9),e._UZ(19,"canvas",10),e.qZA()()(),e.TgZ(20,"mat-card")(21,"mat-card-header",4)(22,"mat-card-title"),e._uU(23," Map of Users "),e.qZA()(),e.TgZ(24,"mat-card-content"),e._UZ(25,"canvas",11),e.qZA()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",i.dataLoaded),e.xp6(3),e.Q6J("ngIf",i.dataLoaded),e.xp6(1),e.Q6J("ngIf",i.dataLoaded),e.xp6(1),e.Q6J("ngIf",i.dataLoaded),e.xp6(3),e.Q6J("ngIf",i.dataLoaded),e.xp6(2),e.Q6J("ngIf",i.pieChartLegendItems.length>0))},dependencies:[H.sg,H.O5,yt.a8,yt.dk,yt.dn,yt.n5,H.Zx],styles:[".dashboard[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;background:white;margin-left:5%;padding:20px;margin-bottom:2%}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.cards-container[_ngcontent-%COMP%]{display:flex;align-items:stretch;justify-content:center;gap:1.5rem;flex-wrap:wrap;padding:20px}.stats-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}mat-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid grey;min-width:400px;padding:10px}.cardText[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem}.pieContainer[_ngcontent-%COMP%]{flex:1;width:50%;padding:10px;display:flex;justify-content:center}.legendContainer[_ngcontent-%COMP%]{overflow-y:scroll;width:40%;max-height:200px;max-width:200px;border:1px solid black;border-radius:5px;padding:5px}.legendPair[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem}.legendMarker[_ngcontent-%COMP%]{width:30px;height:10px}.legend[_ngcontent-%COMP%]{padding-top:5px;text-align:center;font-weight:700}"]}),n})();var hr=M(1745);let gr=(()=>{class n{constructor(t,i){this.http=t,this.auth=i,this.baseUrl=De.Z.baseurl+"stats/"}getProfileDataByDate(t,i){return this.http.get(this.baseUrl+"getProfileDataByDate/"+t+"/"+i)}getFeatureDataByDate(t,i){return this.http.get(this.baseUrl+"getFeatureDataByDate/"+t+"/"+i)}getFeatureDataSinceLog(t){return this.http.get(this.baseUrl+"getFeatureDataSinceLog/"+t.toString())}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Qe.eN),e.LFG(hr.$))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Bn=M(6469),$n=M(1512),Ae=M(9549),Ft=M(7084),ke=M(9602);function fc(n,a){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.ts.l.invalid_start_date)}}function uc(n,a){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.ts.l.invalid_end_date)}}function pc(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"mat-form-field",9)(2,"mat-label"),e._uU(3),e.qZA(),e.TgZ(4,"mat-date-range-input",10),e._UZ(5,"input",11)(6,"input",12),e.qZA(),e._UZ(7,"mat-datepicker-toggle",13)(8,"mat-date-range-picker",null,14),e.YNc(10,fc,2,1,"mat-error",7),e.YNc(11,uc,2,1,"mat-error",7),e.qZA(),e.TgZ(12,"div"),e._uU(13),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"div",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.getProfileData())}),e._uU(16),e.qZA()()}if(2&n){const t=e.MAs(9),i=e.oxw();e.xp6(3),e.Oqu(i.ts.l.enter_date_range),e.xp6(1),e.Q6J("formGroup",i.range)("rangePicker",t),e.xp6(3),e.Q6J("for",t),e.xp6(3),e.Q6J("ngIf",i.range.controls.start.hasError("matStartDateInvalid")),e.xp6(1),e.Q6J("ngIf",i.range.controls.end.hasError("matEndDateInvalid")),e.xp6(2),e.hij(" (",i.ts.l.no_date_range_entered,") "),e.xp6(3),e.Oqu(i.ts.l.get_data)}}function hc(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",15),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.setDataToDisplay(o.statsData))}),e._uU(2),e.ALo(3,"date"),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,t.date,"d/M/yy, h:mm a")," ")}}function gc(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,hc,4,4,"div",16),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.previousLogs)}}function mc(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",8),e.YNc(1,gc,2,1,"div",7),e._UZ(2,"br"),e.TgZ(3,"div",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addNewProfileData())}),e._uU(4),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.previousLogs),e.xp6(3),e.Oqu(t.ts.l.add_data_log)}}function _c(n,a){if(1&n&&(e.TgZ(0,"div",18)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.ts.l.compiling_data)}}function vc(n,a){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",t.ts.l.profiles_found,": ",t.numProfilesFound,"")}}function bc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function xc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function yc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(2),e.AsE(" ",i.ts.l.users_not_from_ireland," : ",t.value," ")}}function Cc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Tc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Zc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Ac(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function wc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Sc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Mc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Oc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Pc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function qc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Uc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Dc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Nc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Ec(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function kc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Lc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",20),e._uU(2),e.qZA(),e.TgZ(3,"mat-accordion",21)(4,"mat-expansion-panel")(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"b"),e._uU(8),e.qZA()(),e.TgZ(9,"mat-panel-description",22),e._uU(10),e.qZA()(),e.YNc(11,bc,3,2,"div",23),e.ALo(12,"keyvalue"),e.qZA(),e.TgZ(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title")(16,"b"),e._uU(17),e.qZA()(),e.TgZ(18,"mat-panel-description",22),e._uU(19),e.qZA()(),e.YNc(20,xc,3,2,"div",23),e.ALo(21,"keyvalue"),e.qZA(),e.TgZ(22,"mat-expansion-panel")(23,"mat-expansion-panel-header")(24,"mat-panel-title")(25,"b"),e._uU(26),e.qZA()(),e.TgZ(27,"mat-panel-description",22),e._uU(28),e.qZA()(),e.TgZ(29,"div",24)(30,"div"),e.YNc(31,yc,3,2,"div",23),e.ALo(32,"keyvalue"),e.qZA(),e.TgZ(33,"div"),e.YNc(34,Cc,3,2,"div",23),e.ALo(35,"keyvalue"),e.qZA()()(),e.TgZ(36,"mat-expansion-panel")(37,"mat-expansion-panel-header")(38,"mat-panel-title")(39,"b"),e._uU(40),e.qZA()(),e.TgZ(41,"mat-panel-description",22),e._uU(42),e.qZA()(),e.YNc(43,Tc,3,2,"div",23),e.ALo(44,"keyvalue"),e.qZA(),e.TgZ(45,"mat-expansion-panel")(46,"mat-expansion-panel-header")(47,"mat-panel-title")(48,"b"),e._uU(49),e.qZA()(),e.TgZ(50,"mat-panel-description",22),e._uU(51),e.qZA()(),e.YNc(52,Zc,3,2,"div",23),e.ALo(53,"keyvalue"),e.qZA(),e.TgZ(54,"mat-expansion-panel")(55,"mat-expansion-panel-header")(56,"mat-panel-title")(57,"b"),e._uU(58),e.qZA()(),e.TgZ(59,"mat-panel-description",22),e._uU(60),e.qZA()(),e.YNc(61,Ac,3,2,"div",23),e.ALo(62,"keyvalue"),e.qZA(),e.TgZ(63,"mat-expansion-panel")(64,"mat-expansion-panel-header")(65,"mat-panel-title")(66,"b"),e._uU(67),e.qZA()(),e.TgZ(68,"mat-panel-description",22),e._uU(69),e.qZA()(),e.YNc(70,wc,3,2,"div",23),e.ALo(71,"keyvalue"),e.qZA(),e.TgZ(72,"mat-expansion-panel")(73,"mat-expansion-panel-header")(74,"mat-panel-title")(75,"b"),e._uU(76),e.qZA()(),e.TgZ(77,"mat-panel-description",22),e._uU(78),e.qZA()(),e.YNc(79,Sc,3,2,"div",23),e.ALo(80,"keyvalue"),e.qZA(),e.TgZ(81,"mat-expansion-panel")(82,"mat-expansion-panel-header")(83,"mat-panel-title")(84,"b"),e._uU(85),e.qZA()(),e.TgZ(86,"mat-panel-description",22),e._uU(87),e.qZA()(),e.YNc(88,Mc,3,2,"div",23),e.ALo(89,"keyvalue"),e.qZA(),e.TgZ(90,"mat-expansion-panel")(91,"mat-expansion-panel-header")(92,"mat-panel-title")(93,"b"),e._uU(94),e.qZA()(),e.TgZ(95,"mat-panel-description",22),e._uU(96),e.qZA()(),e.YNc(97,Oc,3,2,"div",23),e.ALo(98,"keyvalue"),e.qZA(),e.TgZ(99,"mat-expansion-panel")(100,"mat-expansion-panel-header")(101,"mat-panel-title")(102,"b"),e._uU(103),e.qZA()(),e.TgZ(104,"mat-panel-description",22),e._uU(105),e.qZA()(),e.YNc(106,Pc,3,2,"div",23),e.ALo(107,"keyvalue"),e.qZA(),e.TgZ(108,"mat-expansion-panel")(109,"mat-expansion-panel-header")(110,"mat-panel-title")(111,"b"),e._uU(112),e.qZA()(),e.TgZ(113,"mat-panel-description",22),e._uU(114),e.qZA()(),e.YNc(115,qc,3,2,"div",23),e.ALo(116,"keyvalue"),e.qZA(),e.TgZ(117,"mat-expansion-panel")(118,"mat-expansion-panel-header")(119,"mat-panel-title")(120,"b"),e._uU(121),e.qZA()(),e.TgZ(122,"mat-panel-description",22),e._uU(123),e.qZA()(),e.YNc(124,Uc,3,2,"div",23),e.ALo(125,"keyvalue"),e.qZA(),e.TgZ(126,"mat-expansion-panel")(127,"mat-expansion-panel-header")(128,"mat-panel-title")(129,"b"),e._uU(130),e.qZA()(),e.TgZ(131,"mat-panel-description",22),e._uU(132),e.qZA()(),e.YNc(133,Dc,3,2,"div",23),e.ALo(134,"keyvalue"),e.qZA(),e.TgZ(135,"mat-expansion-panel")(136,"mat-expansion-panel-header")(137,"mat-panel-title")(138,"b"),e._uU(139),e.qZA()(),e.TgZ(140,"mat-panel-description",22),e._uU(141),e.qZA()(),e.YNc(142,Nc,3,2,"div",23),e.ALo(143,"keyvalue"),e.qZA(),e.TgZ(144,"mat-expansion-panel")(145,"mat-expansion-panel-header")(146,"mat-panel-title")(147,"b"),e._uU(148),e.qZA()(),e.TgZ(149,"mat-panel-description",22),e._uU(150),e.qZA()(),e.YNc(151,Ec,3,2,"div",23),e.ALo(152,"keyvalue"),e.qZA(),e.TgZ(153,"mat-expansion-panel")(154,"mat-expansion-panel-header")(155,"mat-panel-title")(156,"b"),e._uU(157),e.qZA()(),e.TgZ(158,"mat-panel-description",22),e._uU(159),e.qZA()(),e.YNc(160,kc,3,2,"div",23),e.ALo(161,"keyvalue"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.personal_info," "),e.xp6(6),e.Oqu(t.ts.l.gender),e.xp6(2),e.hij(" ",t.ts.l.gender_of_users," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,53,t.dataToDisplay.gender)),e.xp6(6),e.Oqu(t.ts.l.age),e.xp6(2),e.hij(" ",t.ts.l.age_of_users," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(21,55,t.dataToDisplay.age)),e.xp6(6),e.Oqu(t.ts.l.country),e.xp6(2),e.hij(" ",t.ts.l.countries_of_users," "),e.xp6(3),e.Q6J("ngForOf",e.lcZ(32,57,t.dataToDisplay.notFromIreland)),e.xp6(3),e.Q6J("ngForOf",e.lcZ(35,59,t.dataToDisplay.country)),e.xp6(6),e.Oqu(t.ts.l.county),e.xp6(2),e.hij(" ",t.ts.l.county_of_users," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(44,61,t.dataToDisplay.county)),e.xp6(6),e.hij(" ",t.ts.l.student_school_level," "),e.xp6(2),e.hij(" ",t.ts.l.which_level_type_of_schooling," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(53,63,t.dataToDisplay.studentSchoolLevel)),e.xp6(6),e.hij(" ",t.ts.l.primary_year," "),e.xp6(2),e.hij(" ",t.ts.l.which_primary_year," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(62,65,t.dataToDisplay.primaryYear)),e.xp6(6),e.hij(" ",t.ts.l.secondary_year," "),e.xp6(2),e.hij(" ",t.ts.l.which_secondary_year," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(71,67,t.dataToDisplay.secondaryYear)),e.xp6(6),e.hij(" ",t.ts.l.school_type," "),e.xp6(2),e.hij(" ",t.ts.l.which_type_primary_secondary," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(80,69,t.dataToDisplay.studentSchoolType)),e.xp6(6),e.hij(" ",t.ts.l.third_level_studies," "),e.xp6(2),e.hij(" ",t.ts.l.what_third_level_students_study," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(89,71,t.dataToDisplay.thirdLevelOption)),e.xp6(6),e.hij(" ",t.ts.l.other_studies," "),e.xp6(2),e.hij(" ",t.ts.l.other_third_level_studies," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(98,73,t.dataToDisplay.otherStudies)),e.xp6(6),e.hij(" ",t.ts.l.third_level_year," "),e.xp6(2),e.hij(" ",t.ts.l.what_third_level_year," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(107,75,t.dataToDisplay.thirdLevelYear)),e.xp6(6),e.hij(" ",t.ts.l.USA_school," "),e.xp6(2),e.hij(" ",t.ts.l.what_students_study_in_USA," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(116,77,t.dataToDisplay.usaOption)),e.xp6(6),e.hij(" ",t.ts.l.postgrad_studies," "),e.xp6(2),e.hij(" ",t.ts.l.what_postgrad_studying," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(125,79,t.dataToDisplay.otherPostgradStudies)),e.xp6(6),e.hij(" ",t.ts.l.immersion_course," "),e.xp6(2),e.hij(" ",t.ts.l.students_attending_immersion_course," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(134,81,t.dataToDisplay.immersionCourse)),e.xp6(6),e.hij(" ",t.ts.l.teacher_school_types," "),e.xp6(2),e.hij(" ",t.ts.l.school_level_of_teachers," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(143,83,t.dataToDisplay.teacherSchoolTypes)),e.xp6(6),e.hij(" ",t.ts.l.teacher_primary_school," "),e.xp6(2),e.hij(" ",t.ts.l.type_of_primary_teacher," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(152,85,t.dataToDisplay.teacherPrimaryType)),e.xp6(6),e.hij(" ",t.ts.l.teacher_secondary_school," "),e.xp6(2),e.hij(" ",t.ts.l.type_of_secondary_teacher," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(161,87,t.dataToDisplay.teacherSecondaryType))}}function Fc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Ic(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Yc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function jc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Rc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Jc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Hc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," years : ",t.value," ")}}function Bc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function $c(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",20),e._uU(2),e.qZA(),e.TgZ(3,"mat-accordion",21)(4,"mat-expansion-panel")(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"b"),e._uU(8),e.qZA()(),e.TgZ(9,"mat-panel-description",22),e._uU(10),e.qZA()(),e.YNc(11,Fc,3,2,"div",23),e.ALo(12,"keyvalue"),e.qZA(),e.TgZ(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title")(16,"b"),e._uU(17),e.qZA()(),e.TgZ(18,"mat-panel-description",22),e._uU(19),e.qZA()(),e.YNc(20,Ic,3,2,"div",23),e.ALo(21,"keyvalue"),e.qZA(),e.TgZ(22,"mat-expansion-panel")(23,"mat-expansion-panel-header")(24,"mat-panel-title")(25,"b"),e._uU(26),e.qZA()(),e.TgZ(27,"mat-panel-description",22),e._uU(28),e.qZA()(),e.YNc(29,Yc,3,2,"div",23),e.ALo(30,"keyvalue"),e.qZA(),e.TgZ(31,"mat-expansion-panel")(32,"mat-expansion-panel-header")(33,"mat-panel-title")(34,"b"),e._uU(35),e.qZA()(),e.TgZ(36,"mat-panel-description",22),e._uU(37),e.qZA()(),e.YNc(38,jc,3,2,"div",23),e.ALo(39,"keyvalue"),e.qZA(),e.TgZ(40,"mat-expansion-panel")(41,"mat-expansion-panel-header")(42,"mat-panel-title")(43,"b"),e._uU(44),e.qZA()(),e.TgZ(45,"mat-panel-description",22),e._uU(46),e.qZA()(),e.YNc(47,Rc,3,2,"div",23),e.ALo(48,"keyvalue"),e.qZA(),e.TgZ(49,"mat-expansion-panel")(50,"mat-expansion-panel-header")(51,"mat-panel-title")(52,"b"),e._uU(53),e.qZA()(),e.TgZ(54,"mat-panel-description",22),e._uU(55),e.qZA()(),e.YNc(56,Jc,3,2,"div",23),e.ALo(57,"keyvalue"),e.qZA(),e.TgZ(58,"mat-expansion-panel")(59,"mat-expansion-panel-header")(60,"mat-panel-title")(61,"b"),e._uU(62),e.qZA()(),e.TgZ(63,"mat-panel-description",22),e._uU(64),e.qZA()(),e.YNc(65,Hc,3,2,"div",23),e.ALo(66,"keyvalue"),e.qZA(),e.TgZ(67,"mat-expansion-panel")(68,"mat-expansion-panel-header")(69,"mat-panel-title")(70,"b"),e._uU(71),e.qZA()(),e.TgZ(72,"mat-panel-description",22),e._uU(73),e.qZA()(),e.YNc(74,Bc,3,2,"div",23),e.ALo(75,"keyvalue"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.language_competence," "),e.xp6(6),e.Oqu(t.ts.l.native_speaker),e.xp6(2),e.hij(" ",t.ts.l.status_of_native_speakers," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,25,t.dataToDisplay.nativeSpeakerStatus)),e.xp6(6),e.Oqu(t.ts.l.dialect),e.xp6(2),e.hij(" ",t.ts.l.dialect_preference," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(21,27,t.dataToDisplay.dialectPreference)),e.xp6(6),e.Oqu(t.ts.l.spoken_comprehension_level_of_users),e.xp6(2),e.hij(" ",t.ts.l.spoken_comprehension_level_of_users," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(30,29,t.dataToDisplay.spokenComprehensionLevel)),e.xp6(6),e.Oqu(t.ts.l.other_languages),e.xp6(2),e.hij(" ",t.ts.l.other_languages_at_home," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(39,31,t.dataToDisplay.otherLanguages)),e.xp6(6),e.hij(" ",t.ts.l.father_native_tongue," "),e.xp6(2),e.hij(" ",t.ts.l.native_tongue_father," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(48,33,t.dataToDisplay.fatherNativeTongue)),e.xp6(6),e.hij(" ",t.ts.l.mother_native_tongue," "),e.xp6(2),e.hij(" ",t.ts.l.native_tongue_mother," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(57,35,t.dataToDisplay.motherNativeTongue)),e.xp6(6),e.hij(" ",t.ts.l.years_of_irish," "),e.xp6(2),e.hij(" ",t.ts.l.number_of_years_students_study_irish," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(66,37,t.dataToDisplay.yearsOfIrish)),e.xp6(6),e.hij(" ",t.ts.l.other_language_proficiency," "),e.xp6(2),e.hij(" ",t.ts.l.other_languages_users_speak," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(75,39,t.dataToDisplay.otherLanguageProficiency))}}function Gc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function zc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Qc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Wc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Kc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Vc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Xc(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function el(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function tl(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function nl(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",20),e._uU(2),e.qZA(),e.TgZ(3,"mat-accordion",21)(4,"mat-expansion-panel")(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"b"),e._uU(8),e.qZA()(),e.TgZ(9,"mat-panel-description",22),e._uU(10),e.qZA()(),e.YNc(11,Gc,3,2,"div",23),e.ALo(12,"keyvalue"),e.qZA(),e.TgZ(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title")(16,"b"),e._uU(17),e.qZA()(),e.TgZ(18,"mat-panel-description",22),e._uU(19),e.qZA()(),e.YNc(20,zc,3,2,"div",23),e.ALo(21,"keyvalue"),e.qZA(),e.TgZ(22,"mat-expansion-panel")(23,"mat-expansion-panel-header")(24,"mat-panel-title")(25,"b"),e._uU(26),e.qZA()(),e.TgZ(27,"mat-panel-description",22),e._uU(28),e.qZA()(),e.TgZ(29,"div",24)(30,"div")(31,"div",26),e._uU(32),e.qZA(),e.YNc(33,Qc,3,2,"div",23),e.ALo(34,"keyvalue"),e.qZA(),e.TgZ(35,"div")(36,"div",26),e._uU(37),e.qZA(),e.YNc(38,Wc,3,2,"div",23),e.ALo(39,"keyvalue"),e.qZA()()(),e.TgZ(40,"mat-expansion-panel")(41,"mat-expansion-panel-header")(42,"mat-panel-title")(43,"b"),e._uU(44),e.qZA()(),e.TgZ(45,"mat-panel-description",22),e._uU(46),e.qZA()(),e.TgZ(47,"div",24)(48,"div")(49,"div",26),e._uU(50),e.qZA(),e.YNc(51,Kc,3,2,"div",23),e.ALo(52,"keyvalue"),e.qZA(),e.TgZ(53,"div")(54,"div",26),e._uU(55),e.qZA(),e.YNc(56,Vc,3,2,"div",23),e.ALo(57,"keyvalue"),e.qZA()()(),e.TgZ(58,"mat-expansion-panel")(59,"mat-expansion-panel-header")(60,"mat-panel-title")(61,"b"),e._uU(62),e.qZA()(),e.TgZ(63,"mat-panel-description",22),e._uU(64),e.qZA()(),e.TgZ(65,"div",24)(66,"div")(67,"div",26),e._uU(68),e.qZA(),e.YNc(69,Xc,3,2,"div",23),e.ALo(70,"keyvalue"),e.qZA(),e.TgZ(71,"div")(72,"div",26),e._uU(73),e.qZA(),e.YNc(74,el,3,2,"div",23),e.ALo(75,"keyvalue"),e.qZA()()(),e.TgZ(76,"mat-expansion-panel")(77,"mat-expansion-panel-header")(78,"mat-panel-title")(79,"b"),e._uU(80),e.qZA()(),e.TgZ(81,"mat-panel-description",22),e._uU(82),e.qZA()(),e.YNc(83,tl,3,2,"div",23),e.ALo(84,"keyvalue"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.exposure_to_irish," "),e.xp6(6),e.Oqu(t.ts.l.speaking_frequency),e.xp6(2),e.hij(" ",t.ts.l.frequency_users_speak_irish," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,28,t.dataToDisplay.speakingFrequency)),e.xp6(6),e.Oqu(t.ts.l.speak_with),e.xp6(2),e.hij(" ",t.ts.l.with_whom_speak_irish," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(21,30,t.dataToDisplay.speakWith)),e.xp6(6),e.Oqu(t.ts.l.irish_media),e.xp6(2),e.hij(" ",t.ts.l.how_often_media," "),e.xp6(4),e.hij(" ",t.ts.l.type,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(34,32,t.dataToDisplay.irishMedia)),e.xp6(4),e.hij(" ",t.ts.l.how_often,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(39,34,t.dataToDisplay.howOftenMedia)),e.xp6(6),e.Oqu(t.ts.l.irish_reading),e.xp6(2),e.hij(" ",t.ts.l.how_often_reading," "),e.xp6(4),e.hij(" ",t.ts.l.type,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(52,36,t.dataToDisplay.irishReading)),e.xp6(4),e.hij(" ",t.ts.l.how_often,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(57,38,t.dataToDisplay.howOftenReading)),e.xp6(6),e.Oqu(t.ts.l.irish_writing),e.xp6(2),e.hij(" ",t.ts.l.how_often_writing," "),e.xp6(4),e.hij(" ",t.ts.l.type,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(70,40,t.dataToDisplay.irishWriting)),e.xp6(4),e.hij(" ",t.ts.l.how_often,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(75,42,t.dataToDisplay.howOftenWriting)),e.xp6(6),e.hij(" ",t.ts.l.synth_opinion," "),e.xp6(2),e.hij(" ",t.ts.l.user_opinion_synthetic_voice," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(84,44,t.dataToDisplay.synthOpinion))}}let al=(()=>{class n{constructor(t,i,r){this.statsService=t,this.ts=i,this.engagement=r,this.range=new z.nJ({start:new z.p4,end:new z.p4}),this.previousLogs=[],this.dataToDisplay={},this.selectDateRange=!0,this.dataLoaded=!0,this.numProfilesFound=0}ngOnInit(){this.engagement.getPreviousAnalysisData("PROFILE-STATS").subscribe(t=>{this.previousLogs=t.sort((i,r)=>r.date-i.date),console.log("previous profiles: ",this.previousLogs)})}getProfileData(){var t=this;return(0,se.Z)(function*(){t.dataLoaded=!1;let i=t.range.get("start").value?t.range.get("start").value:"empty",r=t.range.get("end").value?t.range.get("end").value:"empty";return new Promise((o,s)=>{t.statsService.getProfileDataByDate(i,r).subscribe(function(){var c=(0,se.Z)(function*(u){console.log("Profiles returned for given dates: ",u),yield t.calculateStats(u),t.numProfilesFound=u.length,t.dataLoaded=!0,o()});return function(u){return c.apply(this,arguments)}}())})})()}calculateStats(t){var i=this;return(0,se.Z)(function*(){let r={};console.log("PROFILES TO CALCULATE: ",t),t.forEach(s=>{if(void 0!==(s=s[0])){if(s.age&&(r.age||(r.age=[]),r.age.push(s.age)),s.country&&(r.country||(r.country=[]),r.country.push(s.country)),s.county&&(r.county||(r.county=[]),r.county.push(s.county)),s.dialectPreference&&(r.dialectPreference||(r.dialectPreference=[]),r.dialectPreference.push(s.dialectPreference)),s.gender&&(r.gender||(r.gender=[]),r.gender.push(s.gender)),s.fatherNativeTongue&&(r.fatherNativeTongue||(r.fatherNativeTongue=[]),r.fatherNativeTongue.push(s.fatherNativeTongue.toLowerCase())),s.irishMedia){r.irishMedia||(r.irishMedia=[]);for(let c in s.irishMedia)s.irishMedia[c]&&r.irishMedia.push(c)}if(s.howOftenMedia&&(r.howOftenMedia||(r.howOftenMedia=[]),r.howOftenMedia.push(s.howOftenMedia)),s.irishReading){r.irishReading||(r.irishReading=[]);for(let c in s.irishMedia)s.irishReading[c]&&r.irishReading.push(c)}if(s.howOftenReading&&(r.howOftenReading||(r.howOftenReading=[]),r.howOftenReading.push(s.howOftenReading)),s.irishWriting){r.irishWriting||(r.irishWriting=[]);for(let c in s.irishWriting)s.irishWriting[c]&&r.irishWriting.push(c)}if(s.howOftenWriting&&(r.howOftenWriting||(r.howOftenWriting=[]),r.howOftenWriting.push(s.howOftenWriting)),s.immersionCourse&&(r.immersionCourse||(r.immersionCourse=[]),r.immersionCourse.push(s.immersionCourse)),s.motherNativeTongue&&(r.motherNativeTongue||(r.motherNativeTongue=[]),r.motherNativeTongue.push(s.motherNativeTongue.toLowerCase())),s.nativeSpeakerStatus&&(r.nativeSpeakerStatus||(r.nativeSpeakerStatus=[]),r.nativeSpeakerStatus.push(s.nativeSpeakerStatus)),s.notFromIreland&&(r.notFromIreland||(r.notFromIreland=[]),r.notFromIreland.push(s.notFromIreland)),s.otherCountryOfStudy&&(r.otherCountryOfStudy||(r.otherCountryOfStudy=[]),r.otherCountryOfStudy.push(s.otherCountryOfStudy.toLowerCase())),s.otherLanguageProficiency&&(r.otherLanguageProficiency||(r.otherLanguageProficiency=[]),r.otherLanguageProficiency.push(s.otherLanguageProficiency.toLowerCase())),s.otherLanguages&&(r.otherLanguages||(r.otherLanguages=[]),r.otherLanguages.push(s.otherLanguages.toLowerCase())),s.otherPostgradStudies&&(r.otherPostgradStudies||(r.otherPostgradStudies=[]),r.otherPostgradStudies.push(s.otherPostgradStudies.toLowerCase())),s.otherStudies&&(r.otherStudies||(r.otherStudies=[]),r.otherStudies.push(s.otherStudies.toLowerCase())),s.postgradYear&&(r.postgradYear||(r.postgradYear=[]),r.postgradYear.push(s.postgradYear)),s.primaryYear&&(r.primaryYear||(r.primaryYear=[]),r.primaryYear.push(s.primaryYear)),s.secondaryYear&&(r.secondaryYear||(r.secondaryYear=[]),r.secondaryYear.push(s.secondaryYear)),s.speakWith&&(r.speakWith||(r.speakWith=[]),r.speakWith.push(s.speakWith)),s.speakingFrequency&&(r.speakingFrequency||(r.speakingFrequency=[]),r.speakingFrequency.push(s.speakingFrequency)),s.spokenComprehensionLevel&&(r.spokenComprehensionLevel||(r.spokenComprehensionLevel=[]),r.spokenComprehensionLevel.push(s.spokenComprehensionLevel)),s.studentSchoolLevel&&(r.studentSchoolLevel||(r.studentSchoolLevel=[]),r.studentSchoolLevel.push(s.studentSchoolLevel)),s.studentSchoolType&&(r.studentSchoolType||(r.studentSchoolType=[]),r.studentSchoolType.push(s.studentSchoolType)),s.synthOpinion&&(r.synthOpinion||(r.synthOpinion=[]),r.synthOpinion.push(s.synthOpinion)),s.teacherPrimaryType&&(r.teacherPrimaryType||(r.teacherPrimaryType=[]),r.teacherPrimaryType.push(s.teacherPrimaryType)),s.teacherSecondaryType&&(r.teacherSecondaryType||(r.teacherSecondaryType=[]),r.teacherSecondaryType.push(s.teacherSecondaryType)),s.teacherSchoolTypes){r.teacherSchoolTypes||(r.teacherSchoolTypes=[]);for(let c in s.teacherSchoolTypes)s.teacherSchoolTypes[c]&&r.teacherSchoolTypes.push(c)}s.thirdLevelOption&&(r.thirdLevelOption||(r.thirdLevelOption=[]),r.thirdLevelOption.push(s.thirdLevelOption)),s.thirdLevelYear&&(r.thirdLevelYear||(r.thirdLevelYear=[]),r.thirdLevelYear.push(s.thirdLevelYear)),s.usaOption&&(r.usaOption||(r.usaOption=[]),r.usaOption.push(s.usaOption)),s.yearsOfIrish&&(r.yearsOfIrish||(r.yearsOfIrish=[]),r.yearsOfIrish.push(s.yearsOfIrish))}});let o={};console.log("totals: ",r),o.age=yield i.getTotals(r.age),o.country=yield i.getTotals(r.country),o.county=yield i.getTotals(r.county),o.dialectPreference=yield i.getTotals(r.dialectPreference),o.gender=yield i.getTotals(r.gender),o.fatherNativeTongue=yield i.getTotals(r.fatherNativeTongue),o.irishMedia=yield i.getTotals(r.irishMedia),o.howOftenMedia=yield i.getTotals(r.howOftenMedia),o.irishReading=yield i.getTotals(r.irishReading),o.howOftenReading=yield i.getTotals(r.howOftenReading),o.irishWriting=yield i.getTotals(r.irishWriting),o.howOftenWriting=yield i.getTotals(r.howOftenWriting),o.immersionCourse=yield i.getTotals(r.immersionCourse),o.motherNativeTongue=yield i.getTotals(r.motherNativeTongue),o.nativeSpeakerStatus=yield i.getTotals(r.nativeSpeakerStatus),o.notFromIreland=yield i.getTotals(r.notFromIreland),o.otherCountryOfStudy=yield i.getTotals(r.otherCountryOfStudy),o.otherLanguageProficiency=yield i.getTotals(r.otherLanguageProficiency),o.otherLanguages=yield i.getTotals(r.otherLanguages),o.otherPostgradStudies=yield i.getTotals(r.otherPostgradStudies),o.otherStudies=yield i.getTotals(r.otherStudies),o.postgradYear=yield i.getTotals(r.postgradYear),o.primaryYear=yield i.getTotals(r.primaryYear),o.secondaryYear=yield i.getTotals(r.secondaryYear),o.speakWith=yield i.getTotals(r.speakWith),o.speakingFrequency=yield i.getTotals(r.speakingFrequency),o.spokenComprehensionLevel=yield yield i.getTotals(r.spokenComprehensionLevel),o.studentSchoolLevel=yield i.getTotals(r.studentSchoolLevel),o.studentSchoolType=yield i.getTotals(r.studentSchoolType),o.synthOpinion=yield i.getTotals(r.synthOpinion),o.teacherPrimaryType=yield i.getTotals(r.teacherPrimaryType),o.teacherSecondaryType=yield i.getTotals(r.teacherSecondaryType),o.teacherSchoolTypes=yield i.getTotals(r.teacherSchoolTypes),o.thirdLevelOption=yield i.getTotals(r.thirdLevelOption),o.usaOption=yield i.getTotals(r.usaOption),o.yearsOfIrish=yield i.getTotals(r.yearsOfIrish),i.setDataToDisplay(o)})()}getTotals(t){return(0,se.Z)(function*(){let i={};return t&&t.forEach(r=>i[r]=(i[r]||0)+1),i})()}addNewProfileData(){var t=this;return(0,se.Z)(function*(){if(t.dataLoaded=!1,t.previousLogs.length>0){let i=t.previousLogs[t.previousLogs.length-1];console.log(t.previousLogs),console.log("Last log: ",i),new Promise((r,o)=>{t.statsService.getProfileDataByDate(i.date,"empty").subscribe(function(){var s=(0,se.Z)(function*(c){yield t.calculateStats(c),console.log("Most recent added data: ",t.dataToDisplay);let u={},g={};Object.keys(t.dataToDisplay).forEach(l=>{i.statsData[l]?g=i.statsData[l]:(u[l]={},g={}),Object.entries(t.dataToDisplay[l]).forEach(([p,m])=>{g[p]=i.statsData[l]&&i.statsData[l][p]?m+i.statsData[l][p]:m}),u[l]=g}),console.log("Profile to log: ",u),t.engagement.addAnalysisEvent($n.tw["PROFILE-STATS"],u),t.setDataToDisplay(u),t.ngOnInit(),r()});return function(c){return s.apply(this,arguments)}}())})}else yield t.getProfileData(),t.engagement.addAnalysisEvent($n.tw["PROFILE-STATS"],t.dataToDisplay);t.dataLoaded=!0})()}setDataToDisplay(t){this.dataLoaded=!1,this.dataToDisplay={},this.dataToDisplay=t,console.log("Data sent to function: ",t),console.log("Profile to display: ",this.dataToDisplay),console.log("previous profiles: ",this.previousLogs.length),this.dataLoaded=!0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(gr),e.Y36(Ue.D),e.Y36(Bn.M))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile-stats"]],decls:16,vars:10,consts:[[1,"headerTitle"],[1,"dataOptions"],[1,"option",3,"click"],[1,"adminContent"],["class","datePicker",4,"ngIf"],["class","adminLoaderContainer",4,"ngIf"],["class","profileNumber",4,"ngIf"],[4,"ngIf"],[1,"datePicker"],["appearance","fill"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],[1,"submitButton",3,"click"],["class","logContainer",4,"ngFor","ngForOf"],[1,"logContainer"],[1,"adminLoaderContainer"],[1,"profileNumber"],[1,"profileHeader"],["multi","",1,"displayData"],[1,"panelDescription"],[4,"ngFor","ngForOf"],[1,"sideBySide"],[1,"data"],[1,"dataLabel"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1)(3,"div",2),e.NdJ("click",function(){return i.selectDateRange=!0}),e._uU(4),e.qZA(),e._uU(5," | "),e.TgZ(6,"div",2),e.NdJ("click",function(){return i.selectDateRange=!1}),e._uU(7),e.qZA()(),e.TgZ(8,"div",3),e.YNc(9,pc,17,8,"div",4),e.YNc(10,mc,5,2,"div",4),e.qZA(),e.YNc(11,_c,4,1,"div",5),e.YNc(12,vc,2,2,"div",6),e.YNc(13,Lc,162,89,"div",7),e.YNc(14,$c,76,41,"div",7),e.YNc(15,nl,85,46,"div",7)),2&t&&(e.xp6(1),e.hij(" ",i.ts.l.profile_stats," "),e.xp6(3),e.hij(" ",i.ts.l.date_range,""),e.xp6(3),e.hij(" ",i.ts.l.previous_data," "),e.xp6(2),e.Q6J("ngIf",i.selectDateRange),e.xp6(1),e.Q6J("ngIf",!i.selectDateRange),e.xp6(1),e.Q6J("ngIf",!i.dataLoaded),e.xp6(1),e.Q6J("ngIf",i.dataLoaded&&i.selectDateRange),e.xp6(1),e.Q6J("ngIf",i.dataLoaded),e.xp6(1),e.Q6J("ngIf",i.dataLoaded),e.xp6(1),e.Q6J("ngIf",i.dataLoaded))},dependencies:[H.sg,H.O5,z.Fj,z.JJ,z.JL,z.sg,z.u,Ae.TO,Ae.KE,Ae.hX,Ae.R9,Ft.pp,Ft.ib,Ft.yz,Ft.yK,Ft.u4,ke.nW,ke.wx,ke.zY,ke.By,ke._g,H.uU,H.Nd],styles:[".headerTitle[_ngcontent-%COMP%]{font-size:16pt;padding-top:10px}.dataOptions[_ngcontent-%COMP%]{padding-top:20px;display:flex;align-items:center;justify-content:center}.option[_ngcontent-%COMP%]{padding-right:5px;padding-top:5px}.option[_ngcontent-%COMP%]:hover{color:var(--scealai-green);text-decoration:none;cursor:pointer}.adminContent[_ngcontent-%COMP%]{justify-content:space-around}.container[_ngcontent-%COMP%]{padding-bottom:20px}.datePicker[_ngcontent-%COMP%]{padding-top:10px}.submitButton[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;padding:5px 10px;margin-left:10px;border-radius:5px}.submitButton[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--scealai-dark-green)}.logContainer[_ngcontent-%COMP%]{padding:10px}.profileNumber[_ngcontent-%COMP%]{text-align:left;padding-left:20px}.profileHeader[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:14pt}.displayData[_ngcontent-%COMP%]{padding:20px}.sideBySide[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding-left:30%;padding-right:20%;text-align:left}.dataLabel[_ngcontent-%COMP%]{font-size:12pt;font-weight:700;padding-bottom:5px}.data[_ngcontent-%COMP%]{text-align:left;padding-left:40%}"]}),n})();function il(n,a){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.ts.l.invalid_start_date)}}function rl(n,a){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.ts.l.invalid_end_date)}}function ol(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"mat-form-field",8)(2,"mat-label"),e._uU(3),e.qZA(),e.TgZ(4,"mat-date-range-input",9),e._UZ(5,"input",10)(6,"input",11),e.qZA(),e._UZ(7,"mat-datepicker-toggle",12)(8,"mat-date-range-picker",null,13),e.YNc(10,il,2,1,"mat-error",6),e.YNc(11,rl,2,1,"mat-error",6),e.qZA(),e.TgZ(12,"div"),e._uU(13),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"div",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.getFeatureData())}),e._uU(16),e.qZA()()}if(2&n){const t=e.MAs(9),i=e.oxw();e.xp6(3),e.Oqu(i.ts.l.enter_date_range),e.xp6(1),e.Q6J("formGroup",i.range)("rangePicker",t),e.xp6(3),e.Q6J("for",t),e.xp6(3),e.Q6J("ngIf",i.range.controls.start.hasError("matStartDateInvalid")),e.xp6(1),e.Q6J("ngIf",i.range.controls.end.hasError("matEndDateInvalid")),e.xp6(2),e.hij(" (",i.ts.l.no_date_range_entered,") "),e.xp6(3),e.Oqu(i.ts.l.get_data)}}function sl(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",14),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.displayLog(o.statsData))}),e._uU(2),e.ALo(3,"date"),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,t.date,"d/M/yy, h:mm a")," ")}}function cl(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,sl,4,4,"div",15),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.previousFeatures)}}function ll(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",7),e.YNc(1,cl,2,1,"div",6),e._UZ(2,"br")(3,"hr"),e.TgZ(4,"div",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addNewFeatureData())}),e._uU(5),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.previousFeatures),e.xp6(4),e.Oqu(t.ts.l.add_data_log)}}function dl(n,a){if(1&n&&(e.TgZ(0,"div",17)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.ts.l.compiling_data)}}function fl(n,a){if(1&n&&(e.TgZ(0,"mat-card")(1,"div",19)(2,"mat-card-content")(3,"div",20)(4,"b"),e._uU(5),e.qZA()()(),e.TgZ(6,"mat-card-content")(7,"div",21),e._uU(8),e.qZA()()()()),2&n){const t=a.$implicit;e.xp6(5),e.hij("",t.key," : "),e.xp6(3),e.Oqu(t.value)}}function ul(n,a){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,fl,9,2,"mat-card",18),e.ALo(2,"keyvalue"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.featureCounts,t.valueOrder))}}let pl=(()=>{class n{constructor(t,i,r){this.statsService=t,this.ts=i,this.engagement=r,this.range=new z.nJ({start:new z.p4,end:new z.p4}),this.previousFeatures=[],this.selectDateRange=!0,this.dataLoaded=!0,this.featureCounts={},this.valueOrder=(o,s)=>o.value>s.value?-1:s.value>o.value?1:0}ngOnInit(){this.engagement.getPreviousAnalysisData("FEATURE-STATS").subscribe(t=>{this.previousFeatures=t.sort((i,r)=>r.date-i.date)})}getFeatureData(){var t=this;return(0,se.Z)(function*(){t.dataLoaded=!1;let i=t.range.get("start").value?t.range.get("start").value:"empty",r=t.range.get("end").value?t.range.get("end").value:"empty";return new Promise((o,s)=>{t.statsService.getFeatureDataByDate(i,r).subscribe(function(){var c=(0,se.Z)(function*(u){t.featureCounts=u,t.dataLoaded=!0,o()});return function(u){return c.apply(this,arguments)}}())})})()}addNewFeatureData(){var t=this;return(0,se.Z)(function*(){if(t.previousFeatures.length>0){let i=t.previousFeatures[t.previousFeatures.length-1];new Promise((r,o)=>{t.statsService.getFeatureDataSinceLog(i.date).subscribe(function(){var s=(0,se.Z)(function*(c){let u=c;0!=Object.keys(u).length&&(Object.entries(i.statsData).forEach(([g,l])=>{u[g]=u[g]?l+u[g]:l}),t.engagement.addAnalysisEvent($n.tw["FEATURE-STATS"],u)),r()});return function(c){return s.apply(this,arguments)}}())})}else yield t.getFeatureData(),t.engagement.addAnalysisEvent($n.tw["FEATURE-STATS"],t.featureCounts);t.ngOnInit()})()}displayLog(t){this.featureCounts=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(gr),e.Y36(Ue.D),e.Y36(Bn.M))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-feature-stats"]],decls:13,vars:7,consts:[[1,"headerTitle"],[1,"dataOptions"],[1,"option",3,"click"],[1,"adminContent"],["class","datePicker",4,"ngIf"],["class","adminLoaderContainer",4,"ngIf"],[4,"ngIf"],[1,"datePicker"],["appearance","fill"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],[1,"submitButton",3,"click"],["style","padding:10px",4,"ngFor","ngForOf"],[2,"padding","10px"],[1,"adminLoaderContainer"],[4,"ngFor","ngForOf"],[1,"card"],[1,"featureName"],[1,"featureValue"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1)(3,"div",2),e.NdJ("click",function(){return i.selectDateRange=!0}),e._uU(4),e.qZA(),e._uU(5," | "),e.TgZ(6,"div",2),e.NdJ("click",function(){return i.selectDateRange=!1}),e._uU(7),e.qZA()(),e.TgZ(8,"div",3),e.YNc(9,ol,17,8,"div",4),e.YNc(10,ll,6,2,"div",4),e.qZA(),e.YNc(11,dl,4,1,"div",5),e.YNc(12,ul,3,4,"div",6)),2&t&&(e.xp6(1),e.hij(" ",i.ts.l.scealai_feature_statistics," "),e.xp6(3),e.hij(" ",i.ts.l.date_range,""),e.xp6(3),e.hij(" ",i.ts.l.previous_data," "),e.xp6(2),e.Q6J("ngIf",i.selectDateRange),e.xp6(1),e.Q6J("ngIf",!i.selectDateRange),e.xp6(1),e.Q6J("ngIf",!i.dataLoaded),e.xp6(1),e.Q6J("ngIf",i.dataLoaded))},dependencies:[H.sg,H.O5,z.Fj,z.JJ,z.JL,z.sg,z.u,Ae.TO,Ae.KE,Ae.hX,Ae.R9,yt.a8,yt.dn,ke.nW,ke.wx,ke.zY,ke.By,ke._g,H.uU,H.Nd],styles:[".headerTitle[_ngcontent-%COMP%]{font-size:16pt;padding-top:10px}.dataOptions[_ngcontent-%COMP%]{padding-top:20px;display:flex;align-items:center;justify-content:center}.option[_ngcontent-%COMP%]{padding-right:5px;padding-top:5px}.option[_ngcontent-%COMP%]:hover{color:var(--scealai-green);text-decoration:none;cursor:pointer}.adminContent[_ngcontent-%COMP%]{justify-content:space-around}.datePicker[_ngcontent-%COMP%]{padding-top:10px}.submitButton[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;padding:5px 10px;margin-left:10px;border-radius:5px}.submitButton[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--scealai-dark-green)}.card[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:10px;text-align:center}.featureName[_ngcontent-%COMP%]{font-size:14pt;font-weight:700;text-align:center}.featureValue[_ngcontent-%COMP%]{font-size:14pt;padding-left:20px;text-align:center}"]}),n})();var re=M(7155),Gn=M(4144),mr=M(4385),hl=M(3238),_r=M(4859),It=M(7974),st=M(6308);function gl(n,a){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Part of speech"),e.qZA())}function ml(n,a){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",null==t.partOfSpeechData?null:t.partOfSpeechData.partOfSpeech," ")}}function _l(n,a){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Word"),e.qZA())}function vl(n,a){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",null==t.partOfSpeechData?null:t.partOfSpeechData.word," ")}}function bl(n,a){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Translation"),e.qZA())}function xl(n,a){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",null==t.partOfSpeechData?null:t.partOfSpeechData.translation," ")}}function yl(n,a){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Last Updated"),e.qZA())}function Cl(n,a){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.lastUpdated,"medium")," ")}}function Tl(n,a){1&n&&e._UZ(0,"tr",16)}function Zl(n,a){1&n&&e._UZ(0,"tr",17)}function Al(n,a){if(1&n&&(e.TgZ(0,"tr",18)(1,"td",19),e._uU(2),e.qZA()()),2&n){e.oxw();const t=e.MAs(5);e.xp6(2),e.hij(' No data matching the filter "',t.value,'" ')}}const wl=function(){return[5,10,25,100]};let Sl=(()=>{class n{constructor(){this.posTableColumns=["pos","word","translation","date"],this.hideTable=!0}ngOnInit(){}ngOnChanges(){this.data&&(this.data.paginator=this.paginator,this.data.sort=this.sort,console.log(this.data))}applyFilter(t){this.data.filter=t.target.value.trim().toLowerCase(),console.log(this.data),this.data.paginator&&this.data.paginator.firstPage()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-pos-data-table"]],viewQuery:function(t,i){if(1&t&&(e.Gf(It.NW,5),e.Gf(st.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.paginator=r.first),e.iGM(r=e.CRH())&&(i.sort=r.first)}},inputs:{data:"data"},features:[e.TTD],decls:23,vars:6,consts:[[3,"hidden"],["matInput","","placeholder","Ex. noun",3,"keyup"],["input",""],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","pos"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","word"],["matColumnDef","translation"],["matColumnDef","date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"mat-form-field")(2,"mat-label"),e._uU(3,"Filter"),e.qZA(),e.TgZ(4,"input",1,2),e.NdJ("keyup",function(o){return i.applyFilter(o)}),e.qZA()(),e.TgZ(6,"table",3),e.ynx(7,4),e.YNc(8,gl,2,0,"th",5),e.YNc(9,ml,2,1,"td",6),e.BQk(),e.ynx(10,7),e.YNc(11,_l,2,0,"th",5),e.YNc(12,vl,2,1,"td",6),e.BQk(),e.ynx(13,8),e.YNc(14,bl,2,0,"th",5),e.YNc(15,xl,2,1,"td",6),e.BQk(),e.ynx(16,9),e.YNc(17,yl,2,0,"th",5),e.YNc(18,Cl,3,4,"td",6),e.BQk(),e.YNc(19,Tl,1,0,"tr",10),e.YNc(20,Zl,1,0,"tr",11),e.YNc(21,Al,3,1,"tr",12),e.qZA(),e._UZ(22,"mat-paginator",13),e.qZA()),2&t&&(e.Q6J("hidden",i.hideTable),e.xp6(6),e.Q6J("dataSource",i.data),e.xp6(13),e.Q6J("matHeaderRowDef",i.posTableColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.posTableColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(5,wl)))},dependencies:[Ae.KE,Ae.hX,re.BZ,re.fO,re.as,re.w1,re.Dz,re.nj,re.ge,re.ev,re.XQ,re.Gk,re.Ee,Gn.Nt,It.NW,st.YE,st.nU,H.uU],styles:["table[_ngcontent-%COMP%]{width:100%;text-align:left}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left!important;vertical-align:middle!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:space-evenly!important}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}"]}),n})();function Ml(n,a){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Type"),e.qZA())}function Ol(n,a){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(null==t.prompt?null:t.prompt.topic)}}function Pl(n,a){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Level"),e.qZA())}function ql(n,a){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",null!=t.prompt&&t.prompt.level?t.prompt.level:"---"," ")}}function Ul(n,a){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Dialect"),e.qZA())}function Dl(n,a){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",null!=t.prompt&&t.prompt.dialect?t.prompt.dialect:"---"," ")}}function Nl(n,a){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Text"),e.qZA())}function El(n,a){if(1&n&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",null==t.prompt?null:t.prompt.text," ")}}function kl(n,a){1&n&&(e.TgZ(0,"th",16),e._uU(1,"Last Updated"),e.qZA())}function Ll(n,a){if(1&n&&(e.TgZ(0,"td",17),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.lastUpdated,"medium")," ")}}function Fl(n,a){1&n&&e._UZ(0,"tr",19)}function Il(n,a){1&n&&e._UZ(0,"tr",20)}function Yl(n,a){if(1&n&&(e.TgZ(0,"tr",21)(1,"td",22),e._uU(2),e.qZA()()),2&n){e.oxw();const t=e.MAs(5);e.xp6(2),e.hij(' No data matching the filter "',t.value,'" ')}}const jl=function(){return[5,10,25,100]};let Rl=(()=>{class n{constructor(){this.promptTableColumns=["topic","level","dialect","text","date"],this.hideTable=!0}ngOnInit(){}ngOnChanges(){this.data&&(this.data.paginator=this.paginator,this.data.sort=this.sort)}applyFilter(t){this.data.filter=t.target.value.trim().toLowerCase(),this.data.paginator&&this.data.paginator.firstPage()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-prompt-data-table"]],viewQuery:function(t,i){if(1&t&&(e.Gf(It.NW,5),e.Gf(st.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.paginator=r.first),e.iGM(r=e.CRH())&&(i.sort=r.first)}},inputs:{data:"data"},features:[e.TTD],decls:26,vars:6,consts:[[3,"hidden"],["matInput","","placeholder","Ex. Mia",3,"keyup"],["input",""],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","topic"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","level"],["matColumnDef","dialect"],["matColumnDef","text"],["mat-cell","","class","example-container",4,"matCellDef"],["matColumnDef","date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",1,"example-container"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"mat-form-field")(2,"mat-label"),e._uU(3,"Filter"),e.qZA(),e.TgZ(4,"input",1,2),e.NdJ("keyup",function(o){return i.applyFilter(o)}),e.qZA()(),e.TgZ(6,"table",3),e.ynx(7,4),e.YNc(8,Ml,2,0,"th",5),e.YNc(9,Ol,2,1,"td",6),e.BQk(),e.ynx(10,7),e.YNc(11,Pl,2,0,"th",5),e.YNc(12,ql,2,1,"td",6),e.BQk(),e.ynx(13,8),e.YNc(14,Ul,2,0,"th",5),e.YNc(15,Dl,2,1,"td",6),e.BQk(),e.ynx(16,9),e.YNc(17,Nl,2,0,"th",5),e.YNc(18,El,2,1,"td",10),e.BQk(),e.ynx(19,11),e.YNc(20,kl,2,0,"th",5),e.YNc(21,Ll,3,4,"td",6),e.BQk(),e.YNc(22,Fl,1,0,"tr",12),e.YNc(23,Il,1,0,"tr",13),e.YNc(24,Yl,3,1,"tr",14),e.qZA(),e._UZ(25,"mat-paginator",15),e.qZA()),2&t&&(e.Q6J("hidden",i.hideTable),e.xp6(6),e.Q6J("dataSource",i.data),e.xp6(16),e.Q6J("matHeaderRowDef",i.promptTableColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.promptTableColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(5,jl)))},dependencies:[Ae.KE,Ae.hX,re.BZ,re.fO,re.as,re.w1,re.Dz,re.nj,re.ge,re.ev,re.XQ,re.Gk,re.Ee,Gn.Nt,It.NW,st.YE,st.nU,H.uU],styles:["table[_ngcontent-%COMP%]{width:100%;text-align:left}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left!important;vertical-align:middle!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:space-evenly!important}.example-container[_ngcontent-%COMP%]{overflow-x:scroll;max-width:60px;text-align:left!important}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}"]}),n})();const Jl=["promptDataTable"],Hl=["posDataTable"];function Bl(n,a){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij("",t," ")}}function $l(n,a){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,Bl,2,1,"div",25),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.errorMessages)}}function Gl(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",10)(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Part of Speech"),e.qZA(),e.TgZ(5,"mat-select",3),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedPOS=r)}),e.TgZ(6,"mat-option",11),e._uU(7),e.qZA(),e.TgZ(8,"mat-option",12),e._uU(9),e.qZA(),e.TgZ(10,"mat-option",13),e._uU(11),e.qZA(),e.TgZ(12,"mat-option",14),e._uU(13),e.qZA(),e.TgZ(14,"mat-option",15),e._uU(15),e.qZA(),e.TgZ(16,"mat-option",16),e._uU(17),e.qZA(),e.TgZ(18,"mat-option",17),e._uU(19),e.qZA(),e.TgZ(20,"mat-option",18),e._uU(21),e.qZA()()(),e.TgZ(22,"div",19),e._uU(23," POS entries can be added one at a time, or you can add several at once with each entry on a new line (enter key after each one). Enter the word and the translation separated by a ':' Example: "),e.qZA(),e.TgZ(24,"div"),e._uU(25," an t-aerfort : the airport"),e.qZA(),e.TgZ(26,"div"),e._uU(27," an teach : the house"),e.qZA(),e.TgZ(28,"mat-form-field",20)(29,"mat-label"),e._uU(30,"Word/Translation Entry"),e.qZA(),e.TgZ(31,"textarea",21),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.posInput=r)}),e.qZA()(),e.YNc(32,$l,2,1,"div",22),e.TgZ(33,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addPOSContent())}),e._uU(34," Add "),e.qZA()(),e.TgZ(35,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.toggleTable("pos"))}),e._uU(36),e.qZA()()}if(2&n){const t=e.oxw(),i=e.MAs(16);e.xp6(5),e.Q6J("ngModel",t.selectedPOS),e.xp6(2),e.Oqu(t.ts.l.noun),e.xp6(2),e.Oqu(t.ts.l.verb),e.xp6(2),e.Oqu(t.ts.l.adjective),e.xp6(2),e.Oqu(t.ts.l.preposition),e.xp6(2),e.Oqu(t.ts.l.adverb),e.xp6(2),e.Oqu(t.ts.l.pronoun),e.xp6(2),e.Oqu(t.ts.l.article),e.xp6(2),e.Oqu(t.ts.l.conjunction),e.xp6(10),e.Q6J("ngModel",t.posInput),e.xp6(1),e.Q6J("ngIf",t.errorMessages.length>0),e.xp6(4),e.hij(" ",i.hideTable?"Show Data":"Hide Data"," ")}}function zl(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",2)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",3),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectedDialect=r)}),e.TgZ(4,"mat-option",34),e._uU(5),e.qZA(),e.TgZ(6,"mat-option",35),e._uU(7),e.qZA(),e.TgZ(8,"mat-option",36),e._uU(9),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.choose_dialect),e.xp6(1),e.Q6J("ngModel",t.selectedDialect),e.xp6(2),e.Oqu(t.ts.l.munster),e.xp6(2),e.Oqu(t.ts.l.connacht),e.xp6(2),e.Oqu(t.ts.l.ulster)}}function Ql(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",2)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",3),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectedLevel=r)}),e.TgZ(4,"mat-option",37),e._uU(5),e.qZA(),e.TgZ(6,"mat-option",38),e._uU(7),e.qZA(),e.TgZ(8,"mat-option",39),e._uU(9),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.choose_level),e.xp6(1),e.Q6J("ngModel",t.selectedLevel),e.xp6(2),e.hij(" ",t.ts.l.level_preferences[0]," "),e.xp6(2),e.hij(" ",t.ts.l.level_preferences[1]," "),e.xp6(2),e.hij(" ",t.ts.l.level_preferences[2]," ")}}function Wl(n,a){1&n&&(e.TgZ(0,"div",19),e._uU(1," Prompt texts can be added one at a time, or you can add several at once with each prompt on a new line (enter key after each one) "),e.qZA())}function Kl(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Prompt Text"),e.qZA(),e.TgZ(3,"textarea",21),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.promptText=r)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.promptText)}}function Vl(n,a){1&n&&(e.TgZ(0,"div",19),e._uU(1," Please only add one character, setting, and theme at a time "),e.qZA())}function Xl(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",21),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectedCharacter=r)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.character),e.xp6(1),e.Q6J("ngModel",t.selectedCharacter)}}function ed(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",21),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectedSetting=r)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.setting),e.xp6(1),e.Q6J("ngModel",t.selectedSetting)}}function td(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",21),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectedTheme=r)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.theme),e.xp6(1),e.Q6J("ngModel",t.selectedTheme)}}function nd(n,a){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij("",t," ")}}function ad(n,a){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,nd,2,1,"div",25),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.errorMessages)}}function id(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",10)(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Prompt Generator"),e.qZA(),e.TgZ(5,"mat-select",3),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedPromptGenerator=r)}),e.TgZ(6,"mat-option",26),e._uU(7),e.qZA(),e.TgZ(8,"mat-option",27),e._uU(9),e.qZA(),e.TgZ(10,"mat-option",28),e._uU(11),e.qZA(),e.TgZ(12,"mat-option",29),e._uU(13),e.qZA(),e.TgZ(14,"mat-option",30),e._uU(15),e.qZA()()(),e.YNc(16,zl,10,5,"mat-form-field",31),e.YNc(17,Ql,10,5,"mat-form-field",31),e.YNc(18,Wl,2,0,"div",32),e.YNc(19,Kl,4,1,"mat-form-field",33),e.YNc(20,Vl,2,0,"div",32),e.YNc(21,Xl,4,2,"mat-form-field",33),e.YNc(22,ed,4,2,"mat-form-field",33),e.YNc(23,td,4,2,"mat-form-field",33),e.YNc(24,ad,2,1,"div",22),e.TgZ(25,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addPromptContent())}),e._uU(26," Add "),e.qZA()(),e.TgZ(27,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.toggleTable("prompt"))}),e._uU(28),e.qZA()()}if(2&n){const t=e.oxw(),i=e.MAs(14);e.xp6(5),e.Q6J("ngModel",t.selectedPromptGenerator),e.xp6(2),e.Oqu(t.ts.l.exam_prompts),e.xp6(2),e.Oqu(t.ts.l.proverb_prompts),e.xp6(2),e.Oqu(t.ts.l.lara_prompts),e.xp6(2),e.Oqu(t.ts.l.combination_generator),e.xp6(2),e.Oqu(t.ts.l.general_prompts),e.xp6(1),e.Q6J("ngIf","proverb"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator||"exam"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"!==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"!==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf",t.errorMessages.length>0),e.xp6(4),e.hij(" ",i.hideTable?"Show Data":"Hide Data"," ")}}let rd=(()=>{class n{constructor(t,i,r){this.auth=t,this.http=i,this.ts=r,this.selectedContent="",this.selectedPOS="",this.promptText="",this.posInput="",this.selectedPromptGenerator="",this.selectedDialect="",this.selectedLevel="",this.selectedCharacter="",this.selectedSetting="",this.selectedTheme="",this.errorMessages=[]}ngOnInit(){this.getData("partOfSpeech"),this.getData("prompt")}getData(t){const i={Authorization:"Bearer "+this.auth.getToken()};this.http.get(De.Z.baseurl+"prompt/getData/"+t,{headers:i}).subscribe({next:r=>{"partOfSpeech"==t?this.posDataSource=new re.by(r):this.promptDataSource=new re.by(r)},error:r=>{console.log(r)}})}addPOSContent(){var t=this;return(0,se.Z)(function*(){if(t.errorMessages=[],!t.selectedPOS||!t.posInput)return void t.errorMessages.push("Please fill in all information");const i={Authorization:"Bearer "+t.auth.getToken()},r={type:t.selectedContent,partOfSpeechData:{partOfSpeech:t.selectedPOS}};let o=t.posInput.split(/\r?\n/);console.log(o);for(let s of o)if(s.length>0){let[c,u]=s.split(":");r.partOfSpeechData.word=c.trim(),r.partOfSpeechData.translation=u.trim();try{yield(0,be.z)(t.http.post(De.Z.baseurl+"prompt/addContent/",r,{headers:i}))}catch(g){console.log(g.error),t.errorMessages.push(`Entry already exists: ${JSON.stringify(g.error.data)} `)}}t.selectedPOS="",t.posInput="",t.getData("partOfSpeech")})()}addPromptContent(){var t=this;return(0,se.Z)(function*(){if(t.errorMessages=[],!t.selectedPromptGenerator)return t.errorMessages.push("Please select a generator"),void console.log(t.errorMessages);if(!("proverb"!=t.selectedPromptGenerator||t.selectedDialect&&t.promptText))return void t.errorMessages.push("Missing information");if(!("exam"!=t.selectedPromptGenerator||t.selectedLevel&&t.promptText))return void t.errorMessages.push("Missing information");if(!("combination"!=t.selectedPromptGenerator||t.selectedLevel&&t.selectedCharacter&&t.selectedSetting&&t.selectedTheme))return void t.errorMessages.push("Missing information");const i={Authorization:"Bearer "+t.auth.getToken()},r={type:t.selectedContent,prompt:{topic:t.selectedPromptGenerator}};if(t.selectedDialect&&(r.prompt.dialect=t.selectedDialect),t.selectedLevel&&(r.prompt.level=t.selectedLevel),t.promptText){let o=t.promptText.split(/\r?\n/);for(let s of o)if(s.length>0){r.prompt.text=s;try{yield(0,be.z)(t.http.post(De.Z.baseurl+"prompt/addContent/",r,{headers:i}))}catch(c){console.log(c.error),t.errorMessages.push(`Entry already exists: ${JSON.stringify(c.error.data)} `)}}}else{r.prompt.combinationData={},t.selectedCharacter&&(r.prompt.combinationData.character=t.selectedCharacter),t.selectedSetting&&(r.prompt.combinationData.setting=t.selectedSetting),t.selectedTheme&&(r.prompt.combinationData.theme=t.selectedTheme);try{yield(0,be.z)(t.http.post(De.Z.baseurl+"prompt/addContent/",r,{headers:i}))}catch(o){console.log(o.error),t.errorMessages.push(`Entry already exists: ${JSON.stringify(o.error.data)} `)}}0==t.errorMessages.length&&(t.selectedPromptGenerator="",t.promptText="",t.selectedDialect="",t.selectedLevel="",t.selectedCharacter="",t.selectedSetting="",t.selectedTheme="",t.getData("prompt"))})()}toggleTable(t){"pos"==t?this.posDataTable.hideTable=!this.posDataTable.hideTable:this.promptDataTable.hideTable=!this.promptDataTable.hideTable}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(hr.$),e.Y36(Qe.eN),e.Y36(Ue.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-content"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Jl,5),e.Gf(Hl,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.promptDataTable=r.first),e.iGM(r=e.CRH())&&(i.posDataTable=r.first)}},decls:17,vars:5,consts:[[1,"mainContainer"],[1,"headerTitle"],["appearance","fill"],[3,"ngModel","ngModelChange"],["value","partOfSpeech"],["value","prompt"],[4,"ngIf"],[3,"data"],["promptDataTable",""],["posDataTable",""],[1,"posFields"],["value","noun"],["value","verb"],["value","adjective"],["value","preposition"],["value","adverb"],["value","pronoun"],["value","article"],["value","conjunction"],[2,"width","50%","padding","10px"],["appearance","fill",1,"inputText"],["matInput","",3,"ngModel","ngModelChange"],["class","errorText",4,"ngIf"],["mat-raised-button","",1,"viewDataBtn",3,"click"],[1,"errorText"],[4,"ngFor","ngForOf"],["value","exam"],["value","proverb"],["value","lara"],["value","combination"],["value","general"],["appearance","fill",4,"ngIf"],["style","width: 50%; padding: 10px",4,"ngIf"],["appearance","fill","class","inputText",4,"ngIf"],["value","munster"],["value","connacht"],["value","ulster"],["value","jc"],["value","lcol"],["value","lchl"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Add Data to DB"),e.qZA(),e.TgZ(3,"mat-form-field",2)(4,"mat-label"),e._uU(5,"Select Topic"),e.qZA(),e.TgZ(6,"mat-select",3),e.NdJ("ngModelChange",function(s){return i.selectedContent=s})("ngModelChange",function(){e.CHM(r);const s=e.MAs(16),c=e.MAs(14);return s.hideTable=!0,e.KtG(c.hideTable=!0)}),e.TgZ(7,"mat-option",4),e._uU(8,"Part of Speech Data"),e.qZA(),e.TgZ(9,"mat-option",5),e._uU(10,"Prompt Data"),e.qZA()()(),e.YNc(11,Gl,37,12,"div",6),e.YNc(12,id,29,16,"div",6),e.qZA(),e._UZ(13,"app-prompt-data-table",7,8)(15,"app-pos-data-table",7,9)}2&t&&(e.xp6(6),e.Q6J("ngModel",i.selectedContent),e.xp6(5),e.Q6J("ngIf","partOfSpeech"==i.selectedContent),e.xp6(1),e.Q6J("ngIf","prompt"==i.selectedContent),e.xp6(1),e.Q6J("data",i.promptDataSource),e.xp6(2),e.Q6J("data",i.posDataSource))},dependencies:[H.sg,H.O5,z.Fj,z.JJ,z.On,Ae.KE,Ae.hX,Gn.Nt,mr.gD,hl.ey,_r.lW,Sl,Rl],styles:[".headerTitle[_ngcontent-%COMP%]{font-size:16pt;padding-top:10px;padding-bottom:10px}.mainContainer[_ngcontent-%COMP%]{min-height:50vh;max-height:80vh;padding:20px}.posFields[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-evenly;flex-direction:column}.errorText[_ngcontent-%COMP%]{color:red;padding:10px}.inputText[_ngcontent-%COMP%]{width:70%}.viewDataBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;float:left;margin-left:20px}"]}),n})();var od=M(1245),sd=M(530);function cd(n,a){1&n&&(e.TgZ(0,"span",20),e._uU(1,"s"),e.qZA())}function ld(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",21),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.goToClassroom(o._id))}),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",22),e._uU(4),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(t.studentIds.length)}}function dd(n,a){if(1&n&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",18),e._uU(3),e.YNc(4,cd,2,0,"span",14),e._uU(5),e.qZA(),e.TgZ(6,"div",16),e.YNc(7,ld,5,2,"div",19),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.user.username,"'"),e.xp6(1),e.Q6J("ngIf","s"!==t.user.username[t.user.username.length-1]),e.xp6(1),e.hij(" ",t.ts.l.classrooms," "),e.xp6(2),e.Q6J("ngForOf",t.classrooms)}}function fd(n,a){1&n&&(e.TgZ(0,"span",20),e._uU(1,"s"),e.qZA())}function ud(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",21),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.goToStory(o._id))}),e._uU(1),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}function pd(n,a){if(1&n&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",18),e._uU(3),e.YNc(4,fd,2,0,"span",14),e._uU(5),e.qZA(),e.TgZ(6,"div",16),e.YNc(7,ud,2,1,"div",19),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.user.username,"'"),e.xp6(1),e.Q6J("ngIf","s"!==(null==t.user?null:t.user.username[t.user.username.length-1])),e.xp6(1),e.hij(" ",t.ts.l.stories," "),e.xp6(2),e.Q6J("ngForOf",t.stories)}}function hd(n,a){1&n&&(e.TgZ(0,"span",20),e._uU(1,"s"),e.qZA())}function gd(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.minimiseEvents())}),e._UZ(1,"i",24),e.qZA()}}function md(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.maximiseEvents())}),e._UZ(1,"i",25),e.qZA()}}function _d(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",37)(1,"b"),e._uU(2,"Story id"),e.qZA(),e.TgZ(3,"div",38),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,o=e.oxw(3);return e.KtG(o.goToStory(r.storyData._id))}),e._uU(4),e._UZ(5,"i",39),e.qZA()()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(4),e.Oqu(t.storyData._id)}}function vd(n,a){if(1&n&&(e.TgZ(0,"div",37)(1,"b"),e._uU(2,"Story text"),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(3),e.Oqu(t.storyData.text)}}function bd(n,a){if(1&n&&(e.TgZ(0,"div",35)(1,"b"),e._uU(2),e.qZA(),e._uU(3),e.YNc(4,_d,6,1,"div",36),e.YNc(5,vd,4,1,"div",36),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(2),e.Oqu(i.ts.l.ISODate),e.xp6(1),e.hij("",t.date," "),e.xp6(1),e.Q6J("ngIf",null==t.storyData?null:t.storyData._id),e.xp6(1),e.Q6J("ngIf",null==t.storyData?null:t.storyData.text)}}function xd(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",31),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.eventSelected[o._id]=!s.eventSelected[o._id])}),e.TgZ(1,"div",32)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",33),e._uU(5),e.qZA()(),e.YNc(6,bd,6,4,"div",34),e.qZA()}if(2&n){const t=a.$implicit,i=e.oxw(3);e.xp6(3),e.Oqu(t.type),e.xp6(2),e.Oqu(i.getTimeFromDate(t.date)),e.xp6(1),e.Q6J("ngIf",i.eventSelected[t._id])}}function yd(n,a){if(1&n&&(e.TgZ(0,"div",26)(1,"div",27),e._UZ(2,"div",28),e.TgZ(3,"div",29),e._uU(4),e.qZA(),e._UZ(5,"div",28),e.qZA(),e.YNc(6,xd,7,3,"div",30),e.qZA()),2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(4),e.Oqu(i.getFormattedDateOfInitialElementFor(t)),e.xp6(2),e.Q6J("ngForOf",t)}}function Cd(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._uU(2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"b"),e._uU(6),e.qZA(),e.TgZ(7,"textarea",5),e._uU(8),e.qZA()()(),e.TgZ(9,"div",3)(10,"div",4)(11,"b"),e._uU(12),e.qZA(),e.TgZ(13,"textarea",5),e._uU(14),e.qZA()()(),e.TgZ(15,"div",6)(16,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.openDeleteDialog())}),e._uU(17),e.qZA()(),e.TgZ(18,"div",8),e.YNc(19,dd,8,4,"div",9),e.YNc(20,pd,8,4,"div",9),e.TgZ(21,"div",10)(22,"div",11)(23,"div",12),e._UZ(24,"div",13),e.TgZ(25,"div"),e._uU(26),e.YNc(27,hd,2,0,"span",14),e._uU(28),e.qZA(),e.YNc(29,gd,2,0,"div",15),e.YNc(30,md,2,0,"div",15),e.qZA(),e.TgZ(31,"div",16),e.YNc(32,yd,7,2,"div",17),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.AsE("",t.ts.l.profile_summary,": '",t.user.username,"'"),e.xp6(4),e.hij("",t.ts.l.username,":"),e.xp6(2),e.Oqu(t.user.username),e.xp6(4),e.hij("",t.ts.l.role,":"),e.xp6(2),e.Oqu(t.user.role),e.xp6(3),e.hij(" ",t.ts.l.delete_this_account," "),e.xp6(2),e.Q6J("ngIf","TEACHER"===(null==t.user?null:t.user.role)),e.xp6(1),e.Q6J("ngIf","STUDENT"===(null==t.user?null:t.user.role)),e.xp6(6),e.hij(" ",t.user.username,"'"),e.xp6(1),e.Q6J("ngIf","s"!==(null==t.user?null:t.user.username[t.user.username.length-1])),e.xp6(1),e.hij(" ",t.ts.l.activity," "),e.xp6(1),e.Q6J("ngIf",t.maximised),e.xp6(1),e.Q6J("ngIf",!t.maximised),e.xp6(2),e.Q6J("ngForOf",t.eventDates)}}let Td=(()=>{class n{constructor(t,i,r,o,s,c,u,g,l,p,m,v){this.route=t,this.http=i,this.storyService=r,this.router=o,this.classroomService=s,this.engagement=c,this.ts=u,this.messageService=g,this.profileService=l,this.userService=p,this.recordingService=m,this.dialog=v,this.eventSelected={},this.allEvents=[],this.maximised=!1,this.baseUrl=De.Z.baseurl}ngOnInit(){this.getUserId().then(t=>{this.http.get(this.baseUrl+"user/viewUser",{headers:{_id:t.id.toString()}}).subscribe(i=>{this.user=i,"STUDENT"===this.user.role?this.getStories():"TEACHER"===this.user.role&&this.getClassrooms(),this.engagement.getEventsForUser(this.user._id).subscribe(r=>{let o=r;this.eventDates=[],this.eventDates.push([r[0]]),o.forEach(s=>{if(o.indexOf(s)>0){let c=new Date(s.date);this.roundDate(new Date(this.eventDates[this.eventDates.length-1][0].date)).toString()===this.roundDate(c).toString()?this.eventDates[this.eventDates.length-1].push(s):this.eventDates.push([s])}this.eventSelected[s._id]=!1,this.allEvents.push(s)})})})})}roundDate(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())}formatDate(t){let i=t.getDate(),r=t.getMonth()+1,o=t.getFullYear(),s=i.toString(),c=r.toString();return i<10&&(s="0"+i),r<10&&(c="0"+r),s+"/"+c+"/"+o}getTimeFromDate(t){let i=new Date(t),r=i.getHours().toString(),o=i.getMinutes().toString(),s=i.getSeconds().toString();return i.getHours()<10&&(r="0"+r),i.getMinutes()<10&&(o="0"+o),i.getSeconds()<10&&(s="0"+s),r+":"+o+":"+s}getFormattedDateOfInitialElementFor(t){return this.formatDate(new Date(t[0].date))}eventIsSelected(t){return this.eventSelected[t._id]}minimiseEvents(){this.allEvents.forEach(t=>{this.eventSelected[t._id]=!1}),this.maximised=!1}maximiseEvents(){this.allEvents.forEach(t=>{this.eventSelected[t._id]=!0}),this.maximised=!0}getUserId(){return new Promise((t,i)=>{this.route.params.subscribe(r=>{t(r)})})}getStories(){this.storyService.getStoriesFor(this.user.username).subscribe(t=>{this.stories=t})}getClassrooms(){this.classroomService.getClassroomsForTeacher(this.user._id).subscribe(t=>{this.classrooms=t})}goToStory(t){this.router.navigateByUrl("admin/story/"+t.toString())}goToClassroom(t){this.router.navigateByUrl("admin/classroom/"+t)}deleteAccount(){!this.user||("STUDENT"===this.user.role&&(this.classroomService.getClassroomOfStudent(this.user._id).subscribe(t=>{t&&this.classroomService.removeStudentFromClassroom(t._id,this.user._id).subscribe(()=>{})}),this.storyService.getStoriesFor(this.user.username).subscribe(t=>{for(let i of t)this.recordingService.deleteStoryRecordingAudio(i._id).subscribe(()=>{}),this.recordingService.deleteStoryRecording(i._id).subscribe(()=>{})}),this.storyService.deleteAllStories(this.user._id).subscribe(()=>{})),"TEACHER"===this.user.role&&this.classroomService.deleteClassroomsForTeachers(this.user._id).subscribe(()=>{}),this.messageService.deleteAllMessages(this.user._id).subscribe(()=>{}),this.profileService.deleteProfile(this.user._id).subscribe(()=>{}),this.userService.deleteUser(this.user._id).subscribe(()=>{}),this.router.navigateByUrl("admin/find-user"))}openDeleteDialog(){this.dialogRef=this.dialog.open(ct.p,{data:{title:this.ts.l.are_you_sure,message:this.ts.l.this_includes_story_data,type:"simpleConfirm",confirmText:this.ts.l.yes,cancelText:this.ts.l.no},width:"50%"}),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=void 0,t&&this.deleteAccount()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ye.gz),e.Y36(Qe.eN),e.Y36(We.N),e.Y36(ye.F0),e.Y36(jt.u),e.Y36(Bn.M),e.Y36(Ue.D),e.Y36(od.e),e.Y36(Rt.H),e.Y36(lt.K),e.Y36(sd.s),e.Y36(un.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user"]],decls:1,vars:1,consts:[["class","content",4,"ngIf"],[1,"content"],[1,"generateCodeTitle"],[1,"userInfoDisplay"],[1,"userInfo"],["readonly","",1,"userInfoTextarea"],[1,"buttonContainer"],[1,"btn","deleteAccountButton",3,"click"],[1,"contentBody"],["class","teacherAccountsContainer",4,"ngIf"],[1,"teacherAccountsContainer"],[1,"teacherAccountsDisplay"],[1,"teacherAccountsHeader","eventContainerHeader"],[2,"width","20px"],["style","margin-right: 8px;",4,"ngIf"],["class","maximiseIconContainer",3,"click",4,"ngIf"],[1,"teacherAccountsBody"],["class","",4,"ngFor","ngForOf"],[1,"teacherAccountsHeader"],["class","activeTeacherCodeContainer whiteBtn",3,"click",4,"ngFor","ngForOf"],[2,"margin-right","8px"],[1,"activeTeacherCodeContainer","whiteBtn",3,"click"],[1,"studentCount"],[1,"maximiseIconContainer",3,"click"],[1,"fas","fa-minus","maximiseIcon"],[1,"fas","fa-plus","maximiseIcon"],[1,""],[1,"dateTextContainer"],[1,"dateLine"],[1,"dateText"],["class","activeTeacherCodeContainer eventContainer whiteBtn",3,"click",4,"ngFor","ngForOf"],[1,"activeTeacherCodeContainer","eventContainer","whiteBtn",3,"click"],[1,"eventHeader"],[1,"eventTime"],["class","eventBody mainEventBody",4,"ngIf"],[1,"eventBody","mainEventBody"],["class","eventBody",4,"ngIf"],[1,"eventBody"],[1,"storyLink",3,"click"],[1,"fas","fa-link","storyLinkIcon"]],template:function(t,i){1&t&&e.YNc(0,Cd,33,15,"div",0),2&t&&e.Q6J("ngIf",i.user)},dependencies:[H.sg,H.O5],styles:[".content[_ngcontent-%COMP%]{width:90%;margin-left:5%;padding-top:3vh;height:80vh;display:flex;flex-direction:column}.generateCodeTitle[_ngcontent-%COMP%]{font-size:14pt;display:flex;justify-content:center}.userInfoDisplay[_ngcontent-%COMP%]{width:30%;margin-left:30%;margin-top:2vh}.userInfo[_ngcontent-%COMP%]{float:right;display:flex;align-items:center}.userInfoTextarea[_ngcontent-%COMP%]{background-color:var(--scealai-gray)}.buttonContainer[_ngcontent-%COMP%]{padding-top:15px}.deleteAccountButton[_ngcontent-%COMP%]{background-color:var(--delete-red);font-size:12pt;border-radius:10px}.deleteAccountButton[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover);transition:.5s}.contentBody[_ngcontent-%COMP%]{justify-content:space-evenly}.teacherAccountsContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:40%}.teacherAccountsDisplay[_ngcontent-%COMP%]{margin-top:4vh;width:100%;height:45vh;background-color:var(--scealai-gray);border-radius:5px}.teacherAccountsHeader[_ngcontent-%COMP%]{font-size:14pt;height:5vh;display:flex;align-items:center;justify-content:center;color:#fff;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0}.teacherAccountsBody[_ngcontent-%COMP%]{padding:10px 10px 0;text-align:left;overflow:auto;height:40vh}.activeTeacherCodeContainer[_ngcontent-%COMP%]{background-color:#fff;padding:5px;border-radius:5px;margin-bottom:10px;display:flex}.whiteBtn[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--scealai-med-brown-hover);cursor:pointer}.studentCount[_ngcontent-%COMP%]{margin-left:auto}.eventContainerHeader[_ngcontent-%COMP%]{justify-content:space-between}.maximiseIconContainer[_ngcontent-%COMP%]{margin-right:8px}.dateTextContainer[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;color:#777;margin-bottom:10px}.dateText[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.dateLine[_ngcontent-%COMP%]{height:1px;background-color:#777;width:50%}.eventContainer[_ngcontent-%COMP%]{flex-direction:column}.eventHeader[_ngcontent-%COMP%]{display:flex}.eventTime[_ngcontent-%COMP%]{margin-left:auto}.eventBody[_ngcontent-%COMP%]{display:flex;flex-direction:column}.mainEventBody[_ngcontent-%COMP%]{border-top:1px solid var(--scealai-gray)}.storyLink[_ngcontent-%COMP%]{color:#000;color:inherit}.storyLink[_ngcontent-%COMP%]:hover{text-decoration:none;color:#53ff81;text-decoration:underline}.storyLinkIcon[_ngcontent-%COMP%]{margin-left:5px}"]}),n})();function Zd(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.goToStudent(o._id))}),e.TgZ(1,"div"),e._uU(2),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.username)}}let Ad=(()=>{class n{constructor(t,i,r,o){this.route=t,this.classroomService=i,this.router=r,this.userService=o,this.students=[]}ngOnInit(){this.getClassroom()}getClassroomId(){var t=this;return(0,se.Z)(function*(){const i=yield(0,be.z)(t.route.params);if(i.id)return i.id;throw new Error("classroom id not in route params")})()}getClassroom(){var t=this;return(0,se.Z)(function*(){const i=yield t.getClassroomId();t.classroom=yield(0,be.z)(t.classroomService.getClassroom(i)),t.getStudents()})()}getStudents(){for(let t of this.classroom.studentIds)this.userService.getUserById(t).subscribe({next:i=>this.students.push(i),error:()=>console.log(t+" does not exist")})}goToStudent(t){this.router.navigateByUrl("/admin/user/"+t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ye.gz),e.Y36(jt.u),e.Y36(ye.F0),e.Y36(lt.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-classroom"]],decls:5,vars:2,consts:[[1,"adminClassContainer"],[1,"classHeader"],[1,"classBody"],["class","classroomCard",3,"click",4,"ngFor","ngForOf"],[1,"classroomCard",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,Zd,3,1,"div",3),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",null==i.classroom?null:i.classroom.title," "),e.xp6(2),e.Q6J("ngForOf",i.students))},dependencies:[H.sg],styles:[".adminClassContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%;background-color:var(--scealai-gray);border-radius:5px;margin-top:20px;height:65vh}.classHeader[_ngcontent-%COMP%]{padding-left:12px;font-size:14pt}"]}),n})();var vr=M(1481);function wd(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"textarea",18),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.story.feedback.text=r)})("input",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.feedbackSent=!1)}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.MGl("placeholder","Leave some feedback on ",t.authorPossessive," story"),e.Q6J("ngModel",t.story.feedback.text)}}function Sd(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e._UZ(2,"i",20),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE("",t.ts.l.seen_by," ",null==t.story?null:t.story.author," ")}}function Md(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE("",t.ts.l.not_seen_by," ",null==t.story?null:t.story.author,"")}}function Od(n,a){if(1&n&&(e.TgZ(0,"div",19),e.YNc(1,Sd,3,2,"span",16),e.YNc(2,Md,2,2,"span",16),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.story.feedback.seenByStudent),e.xp6(1),e.Q6J("ngIf",!t.story.feedback.seenByStudent)}}function Pd(n,a){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"audio",21,22),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.audioSource,e.LSH)}}let qd=(()=>{class n{constructor(t,i,r,o,s,c){this.route=t,this.http=i,this.sanitizer=r,this.storyService=o,this.router=s,this.ts=c,this.baseUrl=De.Z.baseurl}ngOnInit(){this.getParams().then(t=>{this.http.get(this.baseUrl+"story/viewStory/"+t.id.toString()).subscribe(i=>{this.story=i[0],this.getFeedbackAudio()})})}getParams(){return new Promise((t,i)=>{this.route.params.subscribe(r=>{t(r)})})}getFeedbackAudio(){this.storyService.getFeedbackAudio(this.story._id).subscribe(t=>{"audio/mp3"==t.type&&(this.audioSource=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(t)))})}goToStoryHistory(){this.router.navigateByUrl("/admin/story-history/"+this.story._id)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ye.gz),e.Y36(Qe.eN),e.Y36(vr.H7),e.Y36(We.N),e.Y36(ye.F0),e.Y36(Ue.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-story"]],decls:37,vars:16,consts:[[1,"contentContainer"],[1,"adminClassBody"],[1,"storyTextContainer"],[1,"storyTextHeader"],[1,"storyText"],[1,"greenBtn",3,"click"],[1,"storyInfoContainer"],[1,"storyInfoBody"],[1,"userInfo"],["readonly","",1,"userInfoTextarea"],[1,"feedbackContainer"],[1,"feedbackHeader"],["class","feedbackBody",4,"ngIf"],[1,"feedbackFooter"],["class","seenByStudent",4,"ngIf"],[1,"feedbackBtnContainer"],[4,"ngIf"],[1,"feedbackBody"],[1,"feedbackTextarea",3,"placeholder","ngModel","ngModelChange","input"],[1,"seenByStudent"],[1,"fas","fa-check"],["id","audio","controls","",1,"audioPlayer",3,"src"],["audioTag",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return i.goToStoryHistory()}),e._uU(8),e.qZA()(),e.TgZ(9,"div",6)(10,"div",3),e._uU(11),e.qZA(),e.TgZ(12,"div",7)(13,"div",8),e._uU(14),e.TgZ(15,"textarea",9),e._uU(16),e.qZA()(),e.TgZ(17,"div",8),e._uU(18),e.TgZ(19,"textarea",9),e._uU(20),e.qZA()(),e.TgZ(21,"div",8),e._uU(22),e.TgZ(23,"textarea",9),e._uU(24),e.qZA()(),e.TgZ(25,"div",8),e._uU(26),e.TgZ(27,"textarea",9),e._uU(28),e.qZA()(),e.TgZ(29,"div",10)(30,"div",11),e._uU(31),e.qZA(),e.YNc(32,wd,2,2,"div",12),e.TgZ(33,"div",13),e.YNc(34,Od,3,2,"div",14),e.qZA()(),e.TgZ(35,"div",15),e.YNc(36,Pd,3,1,"div",16),e.qZA()()()()()),2&t&&(e.xp6(4),e.Oqu(i.ts.l.text),e.xp6(2),e.Oqu(null==i.story?null:i.story.text),e.xp6(2),e.Oqu(i.ts.l.story_history),e.xp6(3),e.Oqu(i.ts.l.information),e.xp6(3),e.hij("",i.ts.l.title,": "),e.xp6(2),e.Oqu(null==i.story?null:i.story.title),e.xp6(2),e.hij("",i.ts.l.author_admin,": "),e.xp6(2),e.Oqu(null==i.story?null:i.story.author),e.xp6(2),e.hij("",i.ts.l.creation_date,": "),e.xp6(2),e.Oqu(null==i.story?null:i.story.date),e.xp6(2),e.hij("",i.ts.l.dialect,": "),e.xp6(2),e.Oqu(null==i.story?null:i.story.dialect),e.xp6(3),e.Oqu(i.ts.l.feedback),e.xp6(1),e.Q6J("ngIf",i.story),e.xp6(2),e.Q6J("ngIf",i.story),e.xp6(2),e.Q6J("ngIf",i.audioSource))},dependencies:[H.O5,z.Fj,z.JJ,z.On],styles:[".adminClassBody[_ngcontent-%COMP%]{display:flex;padding:0 5px 5px;width:100%}.storyTextContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:var(--scealai-gray);margin-top:2vh;margin-left:5px;height:68vh;width:50%;border-radius:5px}.storyText[_ngcontent-%COMP%]{text-align:left;padding:4px;overflow:auto;white-space:pre-wrap;background-color:#fff;border-radius:5px;margin:8px;height:55vh}.greenBtn[_ngcontent-%COMP%]{margin-left:7px;margin-right:7px;margin-top:-3px;color:#fff;background-color:var(--scealai-green);border-radius:5px}.greenBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-dark-green);transition:.5s}.storyInfoContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:var(--scealai-gray);margin-top:2vh;margin-left:1%;height:68vh;width:48%;border-radius:5px}.storyTextHeader[_ngcontent-%COMP%]{width:100%;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0;color:#fff;display:flex;padding:4px 4px 4px 8px;font-size:12pt;justify-content:center}.storyInfoBody[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:8px;padding-right:8px}.userInfo[_ngcontent-%COMP%]{float:right;display:flex;align-items:center;padding-top:8px;width:100%;white-space:nowrap}.userInfoTextarea[_ngcontent-%COMP%]{width:100%}.feedbackContainer[_ngcontent-%COMP%]{width:100%;background-color:#fff;margin-top:2vh;border-radius:5px;display:flex;flex-direction:column;height:28vh}.feedbackHeader[_ngcontent-%COMP%]{width:100%;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0;color:#fff;padding:4px}.feedbackBody[_ngcontent-%COMP%]{padding:4px;text-align:left;overflow:auto}.feedbackTextarea[_ngcontent-%COMP%]{border:none;width:100%;height:75px;resize:none}.feedbackFooter[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;padding:4px;border-top:1px solid var(--scealai-gray);border-radius:5px;margin-top:auto}.seenByStudent[_ngcontent-%COMP%]{font-size:10pt;color:var(--scealai-light-gray);margin-left:4px}.feedbackBtnContainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.audioPlayer[_ngcontent-%COMP%]{width:450px;height:32px;margin-top:7px}"]}),n})();var Ud=M(6832);function Dd(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7),e._uU(3),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()(),e.TgZ(6,"div",9),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.isHighlighted=!o.isHighlighted)}),e._UZ(7,"i",10),e.qZA(),e._UZ(8,"div",11),e.qZA()}if(2&n){const t=a.$implicit,i=e.oxw();e.xp6(3),e.Oqu(i.formatDate(t.event.date)),e.xp6(2),e.Oqu(t.event.type),e.xp6(1),e.Gre("highlightIcon ",i.getHighlightIconClass(t),""),e.xp6(2),e.Q6J("innerHtml",t.isHighlighted?t.textHighlighted:t.textNotHighlighted,e.oJD)}}let Nd=(()=>{class n{constructor(t,i,r,o,s,c,u){this.engagement=t,this.route=i,this.http=r,this.storyService=o,this.router=s,this.sanitizer=c,this.ts=u,this.highlightedTexts=[],this.entries=[],this.highlightIconClass=""}ngOnInit(){this.getParams().then(t=>{let i=t.id.toString();this.engagement.getEventsForStory(i).subscribe(r=>{let o;this.events=r,this.events.forEach(s=>{let c=new Ed;c.event=s;let u=s.storyData;c.textHighlighted=u.text,c.textNotHighlighted=u.text,o&&(c.textHighlighted=this.highlightDifference(o.text.toString(),u.text.toString())),o=u,c.isHighlighted=!1,this.entries.push(c)})})})}highlightDifference(t,i){let s="notHighlighted",c="";return Ud.diffChars(t,i).forEach(function(g){s=g.added?"highlightedGreen":g.removed?"highlightedRed":"notHighlighted";let l=document.createElement("span");l.classList.add(s),l.appendChild(document.createTextNode(g.value));let p=document.createElement("span");p.appendChild(l),c+=p.innerHTML}),this.sanitizer.bypassSecurityTrustHtml(c)}toggleHighlights(){this.entries.forEach(t=>{t.isHighlighted=!t.isHighlighted}),this.highlightIconClass=""===this.highlightIconClass?"iconHighlighted":""}getParams(){return new Promise((t,i)=>{this.route.params.subscribe(r=>{t(r)})})}formatDate(t){let i=new Date(t),r=i.getDate(),o=i.getMonth()+1,s=i.getFullYear(),c=r.toString(),u=o.toString();r<10&&(c="0"+r),o<10&&(u="0"+o);let g=i.getHours().toString(),l=i.getMinutes().toString(),p=i.getSeconds().toString();return i.getHours()<10&&(g="0"+g),i.getMinutes()<10&&(l="0"+l),i.getSeconds()<10&&(p="0"+p),c+"-"+u+"-"+s+" "+g+":"+l+":"+p}getHighlightIconClass(t){return t.isHighlighted?"iconHighlighted":""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Bn.M),e.Y36(ye.gz),e.Y36(Qe.eN),e.Y36(We.N),e.Y36(ye.F0),e.Y36(vr.H7),e.Y36(Ue.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-story-history"]],decls:6,vars:2,consts:[["id","display"],[1,"storyHistoryHeader"],[1,"fas","fa-info-circle"],[1,"storyContainer"],["class","entry",4,"ngFor","ngForOf"],[1,"entry"],[1,"eventEntry"],[1,"eventDate"],[1,"eventType"],[3,"click"],[1,"fas","fa-highlighter"],[1,"textEntry",3,"innerHtml"]],template:function(t,i){1&t&&(e._UZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e._UZ(3,"i",2),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,Dd,9,6,"div",4),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",i.ts.l.history_of_title," "),e.xp6(3),e.Q6J("ngForOf",i.entries))},dependencies:[H.sg],styles:[".storyHistoryHeader[_ngcontent-%COMP%]{color:#fff;background-color:var(--scealai-dark-green);width:60%;margin-left:20%;border-radius:5px 5px 0 0;font-size:12pt;padding:4px;margin-top:2vh}.storyContainer[_ngcontent-%COMP%]{width:60%;margin-left:20%;background-color:#d1d1d1;border-radius:0 0 5px 5px;height:63vh;padding:8px 8px 0;overflow:auto}.entry[_ngcontent-%COMP%]{margin-bottom:8px;padding:8px;background-color:#777;border-radius:5px}.eventEntry[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;margin-bottom:8px}.eventDate[_ngcontent-%COMP%]{width:50%;background-color:#fff;border-radius:10px 0 0 10px}.eventType[_ngcontent-%COMP%]{width:50%;background-color:var(--scealai-green);color:#fff;border-radius:0 10px 10px 0}.highlightIcon[_ngcontent-%COMP%]{float:right;margin-right:8px;margin-top:5px;color:var(--scealai-dark-green);opacity:.3}.highlightIcon[_ngcontent-%COMP%]:hover{color:var(--scealai-green);opacity:1;transition:.5s;cursor:pointer}.iconHighlighted[_ngcontent-%COMP%]{color:var(--scealai-green);opacity:1}.iconHighlighted[_ngcontent-%COMP%]:hover{color:var(--scealai-dark-green);transition:1s}.textEntry[_ngcontent-%COMP%]{width:100%;text-align:left;padding:4px;border-radius:5px;background-color:#fff}[_nghost-%COMP%]     .highlightedGreen{background-color:#aafdc0}[_nghost-%COMP%]     .highlightedRed{background-color:#fdaaaa}[_nghost-%COMP%]     .notHighlighted{background-color:none}"]}),n})();class Ed{}const kd=[{path:"",pathMatch:"full",component:dn},{path:"teachers",pathMatch:"full",component:Qn},{path:"find-user",pathMatch:"full",component:At},{path:"database-stats",pathMatch:"full",component:dc},{path:"profile-stats",pathMatch:"full",component:al},{path:"feature-stats",pathMatch:"full",component:pl},{path:"add-content",pathMatch:"full",component:rd},{path:"user/:id",pathMatch:"full",component:Td},{path:"classroom/:id",pathMatch:"full",component:Ad},{path:"story/:id",pathMatch:"full",component:qd},{path:"story-history/:id",pathMatch:"full",component:Nd}];let Ld=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[ye.Bz.forChild(kd),z.u5,ye.Bz]}),n})(),Fd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[It.NW,st.YE,ke.FA],imports:[H.ez,Ld,z.u5,z.UX,Ae.lN,re.p0,Gn.c,It.TU,st.JX,Ft.To,mr.LD,yt.QW,_r.ot,ke.FA]}),n})()},6832:function(br,ln){!function(M){"use strict";function H(){}function z(f,d,h,_,y){for(var b=0,T=d.length,w=0,A=0;b<T;b++){var P=d[b];if(P.removed){if(P.value=f.join(_.slice(A,A+P.count)),A+=P.count,b&&d[b-1].added){var G=d[b-1];d[b-1]=d[b],d[b]=G}}else{if(!P.added&&y){var Y=h.slice(w,w+P.count);Y=Y.map(function(X,ce){var j=_[A+ce];return j.length>X.length?j:X}),P.value=f.join(Y)}else P.value=f.join(h.slice(w,w+P.count));w+=P.count,P.added||(A+=P.count)}}var k=d[T-1];return T>1&&"string"==typeof k.value&&(k.added||k.removed)&&f.equals("",k.value)&&(d[T-2].value+=k.value,d.pop()),d}function ye(f){return{newPos:f.newPos,components:f.components.slice(0)}}H.prototype={diff:function(d,h){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},y=_.callback;"function"==typeof _&&(y=_,_={}),this.options=_;var b=this;function T(j){return y?(setTimeout(function(){y(void 0,j)},0),!0):j}d=this.castInput(d),h=this.castInput(h),d=this.removeEmpty(this.tokenize(d));var w=(h=this.removeEmpty(this.tokenize(h))).length,A=d.length,P=1,Y=w+A,G=[{newPos:-1,components:[]}],k=this.extractCommon(G[0],h,d,0);if(G[0].newPos+1>=w&&k+1>=A)return T([{value:this.join(h),count:h.length}]);function X(){for(var j=-1*P;j<=P;j+=2){var de=void 0,ge=G[j-1],ue=G[j+1],ve=(ue?ue.newPos:0)-j;ge&&(G[j-1]=void 0);var fe=ge&&ge.newPos+1<w,Ne=ue&&0<=ve&&ve<A;if(fe||Ne){if(!fe||Ne&&ge.newPos<ue.newPos?(de=ye(ue),b.pushComponent(de.components,void 0,!0)):((de=ge).newPos++,b.pushComponent(de.components,!0,void 0)),ve=b.extractCommon(de,h,d,j),de.newPos+1>=w&&ve+1>=A)return T(z(b,de.components,h,d,b.useLongestToken));G[j]=de}else G[j]=void 0}P++}if(y)!function j(){setTimeout(function(){if(P>Y)return y();X()||j()},0)}();else for(;P<=Y;){var ce=X();if(ce)return ce}},pushComponent:function(d,h,_){var y=d[d.length-1];y&&y.added===h&&y.removed===_?d[d.length-1]={count:y.count+1,added:h,removed:_}:d.push({count:1,added:h,removed:_})},extractCommon:function(d,h,_,y){for(var b=h.length,T=_.length,w=d.newPos,A=w-y,P=0;w+1<b&&A+1<T&&this.equals(h[w+1],_[A+1]);)w++,A++,P++;return P&&d.components.push({count:P}),d.newPos=w,A},equals:function(d,h){return this.options.comparator?this.options.comparator(d,h):d===h||this.options.ignoreCase&&d.toLowerCase()===h.toLowerCase()},removeEmpty:function(d){for(var h=[],_=0;_<d.length;_++)d[_]&&h.push(d[_]);return h},castInput:function(d){return d},tokenize:function(d){return d.split("")},join:function(d){return d.join("")}};var Ue=new H;function dn(f,d){if("function"==typeof f)d.callback=f;else if(f)for(var h in f)f.hasOwnProperty(h)&&(d[h]=f[h]);return d}var fn=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,De=/\S/,ct=new H;ct.equals=function(f,d){return this.options.ignoreCase&&(f=f.toLowerCase(),d=d.toLowerCase()),f===d||this.options.ignoreWhitespace&&!De.test(f)&&!De.test(d)},ct.tokenize=function(f){for(var d=f.split(/(\s+|[()[\]{}'"]|\b)/),h=0;h<d.length-1;h++)!d[h+1]&&d[h+2]&&fn.test(d[h])&&fn.test(d[h+2])&&(d[h]+=d[h+2],d.splice(h+1,2),h--);return d};var Tt=new H;function pn(f,d,h){return Tt.diff(f,d,h)}Tt.tokenize=function(f){var d=[],h=f.split(/(\n|\r\n)/);h[h.length-1]||h.pop();for(var _=0;_<h.length;_++){var y=h[_];_%2&&!this.options.newlineIsToken?d[d.length-1]+=y:(this.options.ignoreWhitespace&&(y=y.trim()),d.push(y))}return d};var Wn=new H;Wn.tokenize=function(f){return f.split(/(\S.+?[.!?])(?=\s+|$)/)};var lt=new H;function Zt(f){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function Fe(f){return function Xn(f){if(Array.isArray(f)){for(var d=0,h=new Array(f.length);d<f.length;d++)h[d]=f[d];return h}}(f)||function ea(f){if(Symbol.iterator in Object(f)||"[object Arguments]"===Object.prototype.toString.call(f))return Array.from(f)}(f)||function ta(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}lt.tokenize=function(f){return f.split(/([{}:;,]|\s+)/)};var na=Object.prototype.toString,nt=new H;function At(f,d,h,_,y){var b,T;for(d=d||[],h=h||[],_&&(f=_(y,f)),b=0;b<d.length;b+=1)if(d[b]===f)return h[b];if("[object Array]"===na.call(f)){for(d.push(f),T=new Array(f.length),h.push(T),b=0;b<f.length;b+=1)T[b]=At(f[b],d,h,_,y);return d.pop(),h.pop(),T}if(f&&f.toJSON&&(f=f.toJSON()),"object"===Zt(f)&&null!==f){d.push(f),h.push(T={});var A,w=[];for(A in f)f.hasOwnProperty(A)&&w.push(A);for(w.sort(),b=0;b<w.length;b+=1)T[A=w[b]]=At(f[A],d,h,_,A);d.pop(),h.pop()}else T=f;return T}nt.useLongestToken=!0,nt.tokenize=Tt.tokenize,nt.castInput=function(f){var d=this.options,h=d.undefinedReplacement,_=d.stringifyReplacer,y=void 0===_?function(b,T){return typeof T>"u"?h:T}:_;return"string"==typeof f?f:JSON.stringify(At(f,null,null,y),y,"  ")},nt.equals=function(f,d){return H.prototype.equals.call(nt,f.replace(/,([\r\n])/g,"$1"),d.replace(/,([\r\n])/g,"$1"))};var se=new H;function We(f){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=f.split(/\r\n|[\n\v\f\r\x85]/),_=f.match(/\r\n|[\n\v\f\r\x85]/g)||[],y=[],b=0;function T(){var P={};for(y.push(P);b<h.length;){var Y=h[b];if(/^(\-\-\-|\+\+\+|@@)\s/.test(Y))break;var G=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(Y);G&&(P.index=G[1]),b++}for(w(P),w(P),P.hunks=[];b<h.length;){var k=h[b];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(k))break;if(/^@@/.test(k))P.hunks.push(A());else{if(k&&d.strict)throw new Error("Unknown line "+(b+1)+" "+JSON.stringify(k));b++}}}function w(P){var Y=/^(---|\+\+\+)\s+(.*)$/.exec(h[b]);if(Y){var G="---"===Y[1]?"old":"new",k=Y[2].split("\t",2),X=k[0].replace(/\\\\/g,"\\");/^".*"$/.test(X)&&(X=X.substr(1,X.length-2)),P[G+"FileName"]=X,P[G+"Header"]=(k[1]||"").trim(),b++}}function A(){for(var P=b,G=h[b++].split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),k={oldStart:+G[1],oldLines:+G[2]||1,newStart:+G[3],newLines:+G[4]||1,lines:[],linedelimiters:[]},X=0,ce=0;b<h.length&&!(0===h[b].indexOf("--- ")&&b+2<h.length&&0===h[b+1].indexOf("+++ ")&&0===h[b+2].indexOf("@@"));b++){var j=0==h[b].length&&b!=h.length-1?" ":h[b][0];if("+"!==j&&"-"!==j&&" "!==j&&"\\"!==j)break;k.lines.push(h[b]),k.linedelimiters.push(_[b]||"\n"),"+"===j?X++:"-"===j?ce++:" "===j&&(X++,ce++)}if(!X&&1===k.newLines&&(k.newLines=0),!ce&&1===k.oldLines&&(k.oldLines=0),d.strict){if(X!==k.newLines)throw new Error("Added line count did not match for hunk at line "+(P+1));if(ce!==k.oldLines)throw new Error("Removed line count did not match for hunk at line "+(P+1))}return k}for(;b<h.length;)T();return y}function jt(f,d,h){var _=!0,y=!1,b=!1,T=1;return function w(){if(_&&!b){if(y?T++:_=!1,f+T<=h)return T;b=!0}if(!y)return b||(_=!0),d<=f-T?-T++:(y=!0,w())}}function Rt(f,d){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof d&&(d=We(d)),Array.isArray(d)){if(d.length>1)throw new Error("applyPatch only works with a single input.");d=d[0]}var G,k,_=f.split(/\r\n|[\n\v\f\r\x85]/),y=f.match(/\r\n|[\n\v\f\r\x85]/g)||[],b=d.hunks,T=h.compareLine||function(vn,ut,Mt,qe){return ut===qe},w=0,A=h.fuzzFactor||0,P=0,Y=0;function X(vn,ut){for(var Mt=0;Mt<vn.lines.length;Mt++){var qe=vn.lines[Mt],it=qe.length>0?qe[0]:" ",ra=qe.length>0?qe.substr(1):qe;if(" "===it||"-"===it){if(!T(ut+1,_[ut],it,ra)&&++w>A)return!1;ut++}}return!0}for(var ce=0;ce<b.length;ce++){for(var j=b[ce],ge=0,ue=Y+j.oldStart-1,ve=jt(ue,P,_.length-j.oldLines);void 0!==ge;ge=ve())if(X(j,ue+ge)){j.offset=Y+=ge;break}if(void 0===ge)return!1;P=j.offset+j.oldStart+j.oldLines}for(var fe=0,Ne=0;Ne<b.length;Ne++){var Ze=b[Ne],Pe=Ze.oldStart+Ze.offset+fe-1;fe+=Ze.newLines-Ze.oldLines,Pe<0&&(Pe=0);for(var Ye=0;Ye<Ze.lines.length;Ye++){var Ee=Ze.lines[Ye],Je=Ee.length>0?Ee[0]:" ",St=Ee.length>0?Ee.substr(1):Ee,Bt=Ze.linedelimiters[Ye];if(" "===Je)Pe++;else if("-"===Je)_.splice(Pe,1),y.splice(Pe,1);else if("+"===Je)_.splice(Pe,0,St),y.splice(Pe,0,Bt),Pe++;else if("\\"===Je){var at=Ze.lines[Ye-1]?Ze.lines[Ye-1][0]:null;"+"===at?G=!0:"-"===at&&(k=!0)}}}if(G)for(;!_[_.length-1];)_.pop(),y.pop();else k&&(_.push(""),y.push("\n"));for(var He=0;He<_.length-1;He++)_[He]=_[He]+y[He];return _.join("")}function hn(f,d,h,_,y,b,T){T||(T={}),typeof T.context>"u"&&(T.context=4);var w=pn(h,_,T);function A(ge){return ge.map(function(ue){return" "+ue})}w.push({value:"",lines:[]});for(var P=[],Y=0,G=0,k=[],X=1,ce=1,j=function(ue){var ve=w[ue],fe=ve.lines||ve.value.replace(/\n$/,"").split("\n");if(ve.lines=fe,ve.added||ve.removed){var Ne;if(!Y){var Ze=w[ue-1];Y=X,G=ce,Ze&&(k=T.context>0?A(Ze.lines.slice(-T.context)):[],Y-=k.length,G-=k.length)}(Ne=k).push.apply(Ne,Fe(fe.map(function(He){return(ve.added?"+":"-")+He}))),ve.added?ce+=fe.length:X+=fe.length}else{if(Y)if(fe.length<=2*T.context&&ue<w.length-2){var Pe;(Pe=k).push.apply(Pe,Fe(A(fe)))}else{var Ye,Ee=Math.min(fe.length,T.context);(Ye=k).push.apply(Ye,Fe(A(fe.slice(0,Ee))));var Je={oldStart:Y,oldLines:X-Y+Ee,newStart:G,newLines:ce-G+Ee,lines:k};if(ue>=w.length-2&&fe.length<=T.context){var St=/\n$/.test(h),Bt=/\n$/.test(_),at=0==fe.length&&k.length>Je.oldLines;!St&&at&&k.splice(Je.oldLines,0,"\\ No newline at end of file"),(!St&&!at||!Bt)&&k.push("\\ No newline at end of file")}P.push(Je),Y=0,G=0,k=[]}X+=fe.length,ce+=fe.length}},de=0;de<w.length;de++)j(de);return{oldFileName:f,newFileName:d,oldHeader:y,newHeader:b,hunks:P}}function U(f,d,h,_,y,b,T){var w=hn(f,d,h,_,y,b,T),A=[];f==d&&A.push("Index: "+f),A.push("==================================================================="),A.push("--- "+w.oldFileName+(typeof w.oldHeader>"u"?"":"\t"+w.oldHeader)),A.push("+++ "+w.newFileName+(typeof w.newHeader>"u"?"":"\t"+w.newHeader));for(var P=0;P<w.hunks.length;P++){var Y=w.hunks[P];A.push("@@ -"+Y.oldStart+","+Y.oldLines+" +"+Y.newStart+","+Y.newLines+" @@"),A.push.apply(A,Y.lines)}return A.join("\n")+"\n"}function ae(f,d){if(d.length>f.length)return!1;for(var h=0;h<d.length;h++)if(d[h]!==f[h])return!1;return!0}function gn(f){var d=ft(f.lines),h=d.oldLines,_=d.newLines;void 0!==h?f.oldLines=h:delete f.oldLines,void 0!==_?f.newLines=_:delete f.newLines}function pe(f,d){if("string"==typeof f){if(/^@@/m.test(f)||/^Index:/m.test(f))return We(f)[0];if(!d)throw new Error("Must provide a base reference or pass in a patch");return hn(void 0,void 0,d,f)}return f}function Q(f){return f.newFileName&&f.newFileName!==f.oldFileName}function R(f,d,h){return d===h?d:(f.conflict=!0,{mine:d,theirs:h})}function Ke(f,d){return f.oldStart<d.oldStart&&f.oldStart+f.oldLines<d.oldStart}function Oe(f,d){return{oldStart:f.oldStart,oldLines:f.oldLines,newStart:f.newStart+d,newLines:f.newLines,lines:f.lines}}function L(f,d,h,_,y){var b={offset:d,lines:h,index:0},T={offset:_,lines:y,index:0};for(ia(f,b,T),ia(f,T,b);b.index<b.lines.length&&T.index<T.lines.length;){var w=b.lines[b.index],A=T.lines[T.index];if("-"!==w[0]&&"+"!==w[0]||"-"!==A[0]&&"+"!==A[0])if("+"===w[0]&&" "===A[0]){var P;(P=f.lines).push.apply(P,Fe(Ie(b)))}else if("+"===A[0]&&" "===w[0]){var Y;(Y=f.lines).push.apply(Y,Fe(Ie(T)))}else"-"===w[0]&&" "===A[0]?Ht(f,b,T):"-"===A[0]&&" "===w[0]?Ht(f,T,b,!0):w===A?(f.lines.push(w),b.index++,T.index++):mn(f,Ie(b),Ie(T));else wt(f,b,T)}dt(f,b),dt(f,T),gn(f)}function wt(f,d,h){var _=Ie(d),y=Ie(h);if(Te(_)&&Te(y)){var b,T;if(ae(_,y)&&he(h,_,_.length-y.length))return void(b=f.lines).push.apply(b,Fe(_));if(ae(y,_)&&he(d,y,y.length-_.length))return void(T=f.lines).push.apply(T,Fe(y))}else if(function I(f,d){return f.length===d.length&&ae(f,d)}(_,y)){var w;return void(w=f.lines).push.apply(w,Fe(_))}mn(f,_,y)}function Ht(f,d,h,_){var T,y=Ie(d),b=function E(f,d){for(var h=[],_=[],y=0,b=!1,T=!1;y<d.length&&f.index<f.lines.length;){var w=f.lines[f.index],A=d[y];if("+"===A[0])break;if(b=b||" "!==w[0],_.push(A),y++,"+"===w[0])for(T=!0;"+"===w[0];)h.push(w),w=f.lines[++f.index];A.substr(1)===w.substr(1)?(h.push(w),f.index++):T=!0}if("+"===(d[y]||"")[0]&&b&&(T=!0),T)return h;for(;y<d.length;)_.push(d[y++]);return{merged:_,changes:h}}(h,y);b.merged?(T=f.lines).push.apply(T,Fe(b.merged)):mn(f,_?b:y,_?y:b)}function mn(f,d,h){f.conflict=!0,f.lines.push({conflict:!0,mine:d,theirs:h})}function ia(f,d,h){for(;d.offset<h.offset&&d.index<d.lines.length;){var _=d.lines[d.index++];f.lines.push(_),d.offset++}}function dt(f,d){for(;d.index<d.lines.length;){var h=d.lines[d.index++];f.lines.push(h)}}function Ie(f){for(var d=[],h=f.lines[f.index][0];f.index<f.lines.length;){var _=f.lines[f.index];if("-"===h&&"+"===_[0]&&(h="+"),h!==_[0])break;d.push(_),f.index++}return d}function Te(f){return f.reduce(function(d,h){return d&&"-"===h[0]},!0)}function he(f,d,h){for(var _=0;_<h;_++){var y=d[d.length-h+_].substr(1);if(f.lines[f.index+_]!==" "+y)return!1}return f.index+=h,!0}function ft(f){var d=0,h=0;return f.forEach(function(_){if("string"!=typeof _){var y=ft(_.mine),b=ft(_.theirs);void 0!==d&&(y.oldLines===b.oldLines?d+=y.oldLines:d=void 0),void 0!==h&&(y.newLines===b.newLines?h+=y.newLines:h=void 0)}else void 0!==h&&("+"===_[0]||" "===_[0])&&h++,void 0!==d&&("-"===_[0]||" "===_[0])&&d++}),{oldLines:d,newLines:h}}function La(f){var d=f;return(d=(d=(d=d.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")}se.tokenize=function(f){return f.slice()},se.join=se.removeEmpty=function(f){return f},M.Diff=H,M.diffChars=function e(f,d,h){return Ue.diff(f,d,h)},M.diffWords=function Qe(f,d,h){return h=dn(h,{ignoreWhitespace:!0}),ct.diff(f,d,h)},M.diffWordsWithSpace=function un(f,d,h){return ct.diff(f,d,h)},M.diffLines=pn,M.diffTrimmedLines=function Qn(f,d,h){var _=dn(h,{ignoreWhitespace:!0});return Tt.diff(f,d,_)},M.diffSentences=function Kn(f,d,h){return Wn.diff(f,d,h)},M.diffCss=function Vn(f,d,h){return lt.diff(f,d,h)},M.diffJson=function aa(f,d,h){return nt.diff(f,d,h)},M.diffArrays=function be(f,d,h){return se.diff(f,d,h)},M.structuredPatch=hn,M.createTwoFilesPatch=U,M.createPatch=function Jt(f,d,h,_,y,b){return U(f,f,d,h,_,y,b)},M.applyPatch=Rt,M.applyPatches=function ie(f,d){"string"==typeof f&&(f=We(f));var h=0;!function _(){var y=f[h++];if(!y)return d.complete();d.loadFile(y,function(b,T){if(b)return d.complete(b);var w=Rt(T,y,d);d.patched(y,w,function(A){if(A)return d.complete(A);_()})})}()},M.parsePatch=We,M.merge=function Ce(f,d,h){f=pe(f,h),d=pe(d,h);var _={};(f.index||d.index)&&(_.index=f.index||d.index),(f.newFileName||d.newFileName)&&(Q(f)?Q(d)?(_.oldFileName=R(_,f.oldFileName,d.oldFileName),_.newFileName=R(_,f.newFileName,d.newFileName),_.oldHeader=R(_,f.oldHeader,d.oldHeader),_.newHeader=R(_,f.newHeader,d.newHeader)):(_.oldFileName=f.oldFileName,_.newFileName=f.newFileName,_.oldHeader=f.oldHeader,_.newHeader=f.newHeader):(_.oldFileName=d.oldFileName||f.oldFileName,_.newFileName=d.newFileName||f.newFileName,_.oldHeader=d.oldHeader||f.oldHeader,_.newHeader=d.newHeader||f.newHeader)),_.hunks=[];for(var y=0,b=0,T=0,w=0;y<f.hunks.length||b<d.hunks.length;){var A=f.hunks[y]||{oldStart:1/0},P=d.hunks[b]||{oldStart:1/0};if(Ke(A,P))_.hunks.push(Oe(A,T)),y++,w+=A.newLines-A.oldLines;else if(Ke(P,A))_.hunks.push(Oe(P,w)),b++,T+=P.newLines-P.oldLines;else{var Y={oldStart:Math.min(A.oldStart,P.oldStart),oldLines:0,newStart:Math.min(A.newStart+T,P.oldStart+w),newLines:0,lines:[]};L(Y,A.oldStart,A.lines,P.oldStart,P.lines),b++,y++,_.hunks.push(Y)}}return _},M.convertChangesToDMP=function _n(f){for(var h,d=[],y=0;y<f.length;y++)d.push([(h=f[y]).added?1:h.removed?-1:0,h.value]);return d},M.convertChangesToXML=function we(f){for(var d=[],h=0;h<f.length;h++){var _=f[h];_.added?d.push("<ins>"):_.removed&&d.push("<del>"),d.push(La(_.value)),_.added?d.push("</ins>"):_.removed&&d.push("</del>")}return d.join("")},M.canonicalize=At,Object.defineProperty(M,"__esModule",{value:!0})}(ln)}}]);
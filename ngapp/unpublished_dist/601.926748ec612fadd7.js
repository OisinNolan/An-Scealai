(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[601],{5601:(Fe,G,T)=>{"use strict";T.r(G),T.d(G,{StudentModule:()=>fs});var I=T(6895),d=T(1390),x=T(970),A=T(4633),D=T(8977),t=T(4650),p=T(5412);let g=(()=>{class c{canDeactivate(r,o,a){return!!r.storySaved||(r.showModal(),r.modalChoice)}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),B=(()=>{class c{constructor(r,o){this.dialog=r,this.ts=o}canDeactivate(r){if(r.recordingSaved)return!0;let o;return o=this.dialog.open(A.p,{data:{title:this.ts.l.save_changes_made_to_this_recording,type:"",confirmText:this.ts.l.save,cancelText:this.ts.l.cancel},width:"30vh"}),o.afterClosed().subscribe(a=>{if(o=void 0,a)return r.saveRecordings(),!0}),!1}}return c.\u0275fac=function(r){return new(r||c)(t.LFG(p.uw),t.LFG(D.D))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),S=(()=>{class c{canDeactivate(r,o,a){if(r.chosenSections)for(const _ of r.chosenSections)_.stop();return!0}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var y=T(5861),M=T(4412);class C extends M.i{constructor(){super(...arguments),this.createdWithPrompts=!1}}var w=T(1765),R=T(1745),F=T(1512),W=T(6469),V=T(4687),L=T(1245),H=T(25),oe=T(5042),xe=T(530),we=T(8443);let ce=(()=>{class c{transform(r,o){return r?o?(o=o.toLocaleLowerCase(),r.filter(a=>a instanceof we.n?a.username.toLocaleLowerCase().includes(o):a instanceof C?a.title.toLocaleLowerCase().includes(o)||a.text.toLocaleLowerCase().includes(o):void 0)):r:[]}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275pipe=t.Yjl({name:"appFilter",type:c,pure:!0}),c})();var ue=T(3905),_e=T(4006),vt=T(9121);function Vi(c,u){1&c&&(t.TgZ(0,"div",17),t._UZ(1,"grid-spinner"),t.qZA())}function $i(c,u){if(1&c&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&c){const r=t.oxw();t.xp6(1),t.hij(" ",r.ts.l.click_new_story," ")}}function Sr(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"input",23),t.NdJ("click",function(){t.CHM(r);const a=t.oxw().$implicit,_=t.oxw();return t.KtG(_.toggleDelete(a._id))}),t.qZA()}}function Xi(c,u){if(1&c&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&c){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,r.lastUpdated,"M/d/yy, h:mm a"))}}function ji(c,u){if(1&c&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&c){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,r.lastUpdated,"d/M/yy, h:mm a"))}}const yt=function(c){return["../dashboard",c]};function lt(c,u){if(1&c&&(t.TgZ(0,"div")(1,"div",18)(2,"div",19),t.YNc(3,Sr,1,0,"input",20),t.TgZ(4,"div",21),t._uU(5),t.qZA()(),t.YNc(6,Xi,3,4,"div",22),t.YNc(7,ji,3,4,"div",22),t.qZA(),t._UZ(8,"hr"),t.qZA()),2&c){const r=u.$implicit,o=t.oxw();t.xp6(3),t.Q6J("ngIf",o.deleteMode),t.xp6(1),t.Q6J("searchedWord",o.searchText)("content",r.title)("classToApply","font-weight-bold")("setTitle","true")("routerLink",t.VKq(9,yt,r._id)),t.xp6(1),t.hij(" ",r.title," "),t.xp6(1),t.Q6J("ngIf",o.isFromAmerica),t.xp6(1),t.Q6J("ngIf",!o.isFromAmerica)}}function eo(c,u){if(1&c&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&c){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.unreadMessages," ")}}function ln(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.goToMessages())}),t._uU(1),t.YNc(2,eo,2,1,"span",26),t.qZA()}if(2&c){const r=t.oxw();t.xp6(1),t.hij(" ",r.ts.l.messages," "),t.xp6(1),t.Q6J("ngIf",r.unreadMessages>0)}}function $e(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.goToStats())}),t._uU(1),t.qZA()}if(2&c){const r=t.oxw();t.xp6(1),t.hij(" ",r.ts.l.stats," ")}}let to=(()=>{class c{constructor(r,o,a,_,k,N,U,ae,Q,ne,me){this.storyService=r,this.auth=o,this.engagement=a,this.ts=_,this.router=k,this.messageService=N,this.profileService=U,this.classroomService=ae,this.notificationService=Q,this.recordingService=ne,this.dialog=me,this.stories=[],this.toBeDeleted=[],this.userId="",this.messagesForNotifications=[],this.unreadMessages=0,this.isFromAmerica=!1,this.isEnrolled=!1,this.searchText="",this.storiesLoaded=!1}ngOnInit(){var r=this;return(0,y.Z)(function*(){const o=r.auth.getUserDetails();o?(r.stories=(yield(0,ue.z)(r.storyService.getStoriesForLoggedInUser())).map(a=>(new C).fromJSON(a)),r.stories.sort((a,_)=>a.date>_.date?-1:1),r.storiesLoaded=!0,r.userId=o._id,r.deleteMode=!1,r.toBeDeleted=[],r.notificationService.getStudentNotifications(),r.classroomService.getClassroomOfStudent(r.userId).subscribe(a=>{r.isEnrolled=null!=a}),r.messageService.getMessagesForLoggedInUser().subscribe(a=>{r.messagesForNotifications=a,r.unreadMessages=r.messageService.getNumberOfUnreadMessages(r.messagesForNotifications)}),r.profileService.getForUser(r.userId).subscribe(a=>{let k=a.profile.country;r.isFromAmerica="United States of America"==k||"America"==k||"USA"==k||"United States"==k},a=>{r.router.navigateByUrl("/register-profile")})):r.auth.logout()})()}toggleDeleteMode(){if(this.deleteMode&&this.toBeDeleted.length>0)for(let r of this.toBeDeleted)this.engagement.addEventForLoggedInUser(F.tw["DELETE-STORY"],{_id:r}),this.recordingService.deleteStoryRecordingAudio(r).subscribe(o=>{}),this.recordingService.deleteStoryRecording(r).subscribe(o=>{}),this.storyService.deleteStory(r).subscribe(o=>{this.ngOnInit()});else this.deleteMode=!this.deleteMode||0!==this.toBeDeleted.length}toggleEditMode(){this.editMode=!this.editMode}toggleDelete(r){if(this.toBeDeleted.includes(r)){var o=this.toBeDeleted.indexOf(r);this.toBeDeleted.splice(o,1)}else this.toBeDeleted.push(r)}goToMessages(){this.router.navigateByUrl("/messages/"+this.userId)}goToStats(){this.router.navigateByUrl("/stats-dashboard/"+this.userId)}createNewStory(){var r=this;this.dialogRef=this.dialog.open(A.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var o=(0,y.Z)(function*(a){if(r.dialogRef=void 0,a)if(a[0]){let _="connemara";a[1]==r.ts.l.munster&&(_="kerry"),a[1]==r.ts.l.ulster&&(_="donegal"),r.storyService.saveStory(r.auth.getUserDetails()._id,a[0],new Date,_,"",r.auth.getUserDetails().username,!1)}else alert(r.ts.l.title_required)});return function(a){return o.apply(this,arguments)}}())}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(w.N),t.Y36(R.$),t.Y36(W.M),t.Y36(D.D),t.Y36(d.F0),t.Y36(L.e),t.Y36(V.H),t.Y36(H.u),t.Y36(oe.g),t.Y36(xe.s),t.Y36(p.uw))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-book-contents"]],features:[t._Bn([ce])],decls:27,vars:17,consts:[[1,"bookContainer"],[1,"contentsContainer"],[1,"bookContentsTitle"],[1,"contentsTitleContainer"],[1,"contentsLinkTitle"],[1,"contentsDateTitle"],["role","main"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"contentsLinkContainer"],["class","newStoryMessage",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"contentsBtnsContainer"],[1,"btn","deleteBtn",3,"click"],["src","assets/img/trash.ico",1,"trashImg"],["class","btn messagesBtn",3,"click",4,"ngIf"],["data-cy","create-story",1,"btn","newStoryBtn",3,"click"],[1,"newStoryMessage"],[1,"contentSection"],[1,"contentsLink"],["type","checkbox","class","deleteCheckbox",3,"click",4,"ngIf"],["appHighlight","",3,"searchedWord","content","classToApply","setTitle","routerLink"],["class","contentsDate",4,"ngIf"],["type","checkbox",1,"deleteCheckbox",3,"click"],[1,"contentsDate"],[1,"btn","messagesBtn",3,"click"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",6)(10,"div")(11,"div",7)(12,"input",8),t.NdJ("ngModelChange",function(_){return o.searchText=_}),t.qZA()()()(),t.TgZ(13,"div",9)(14,"div"),t._uU(15),t.qZA(),t.YNc(16,Vi,2,0,"div",10),t.YNc(17,$i,2,1,"div",10),t.YNc(18,lt,9,11,"div",11),t.ALo(19,"appFilter"),t.qZA(),t.TgZ(20,"div",12)(21,"button",13),t.NdJ("click",function(){return o.toggleDeleteMode()}),t._UZ(22,"img",14),t.qZA(),t.YNc(23,ln,3,2,"button",15),t.YNc(24,$e,2,1,"button",15),t.TgZ(25,"button",16),t.NdJ("click",function(){return o.createNewStory()}),t._uU(26),t.qZA()()()()),2&r&&(t.xp6(3),t.Oqu(o.ts.l.my_stories),t.xp6(3),t.Oqu(o.ts.l.title),t.xp6(2),t.Oqu(o.ts.l.last_updated),t.xp6(4),t.s9C("placeholder",o.ts.l.search_story_title_or_content),t.Q6J("ngModel",o.searchText),t.xp6(3),t.hij(" ",o.ts.l.loading," "),t.xp6(1),t.Q6J("ngIf",!o.storiesLoaded),t.xp6(1),t.Q6J("ngIf",0===o.stories.length&&o.storiesLoaded),t.xp6(1),t.Q6J("ngForOf",t.xi3(19,14,o.stories,o.searchText)),t.xp6(3),t.ekj("deleteModeBtn",o.deleteMode),t.xp6(2),t.Q6J("ngIf",o.isEnrolled),t.xp6(1),t.Q6J("ngIf",o.stories.length>0),t.xp6(2),t.hij("",o.ts.l.new_story," "))},dependencies:[I.sg,I.O5,d.rH,_e.Fj,_e.JJ,_e.On,vt.P,I.uU,ce],styles:[".bookContainer[_ngcontent-%COMP%]{height:auto;width:80%;background:url(https://www.abair.ie/scealai/assets/img/paperBg.jpg) no-repeat center fixed;margin-left:10%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.contentsContainer[_ngcontent-%COMP%]{padding:20px}.bookContentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);padding-left:5%;padding-right:5%;display:inline-block;font-size:18pt}.contentsLinkContainer[_ngcontent-%COMP%]{height:500px;overflow:auto;padding:10px;background-color:#f7f2e7;box-shadow:inset 0 0 12px #00000080;border-radius:5px}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.contentsDate[_ngcontent-%COMP%]{color:var(--dark-text)}.contentsBtnsContainer[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:1rem}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;padding:2px 7px 7px;height:38px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:24px}.messagesBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;border-radius:5px;display:flex}.messagesBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.newStoryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.newStoryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}@media only screen and (max-width: 700px){.contentsContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%}.contentsLinkContainer[_ngcontent-%COMP%]{height:270px;padding-top:10px}.contentsLinkTitle[_ngcontent-%COMP%], .contentsDateTitle[_ngcontent-%COMP%]{font-size:12pt}.optionsPopupBtn[_ngcontent-%COMP%]{padding:2px 5px 5px;margin:0 4px 0 0;height:30px;font-size:12pt}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:0 3px 3px;height:30px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:20px}}.newStoryMessage[_ngcontent-%COMP%]{color:#a79d88;width:80%;margin-left:10%;margin-top:30px}@media only screen and (min-width: 700px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}@media only screen and (min-width: 1400px) and (min-height: 800px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}"]}),c})();var ot=T(7579),Tr=T(1884),Dt=T(9971),xt=T.n(Dt),no=T(5439),zt=T.n(no),Qt=T(7489),Rt=T(4186),dn=T(5592),Oe=T(9742),Mr=T(6618);let Ge=(()=>{class c{constructor(){}convertHtmlTextToArrayOfSentences(r){return this.sentences(this.convertHtmlToPlainText(r))}sentences(r){return this.naiveSentences(r)}splitWithReplacement(r,o){const a=r.split(o);return a.slice(0,-1).filter(Boolean).map(_=>_+o).concat(a.slice(-1).filter(Boolean))}extraShortening(r){return r.flatMap(o=>" "==o?[]:o.charAt(100)?this.splitWithReplacement(o,","):[o])}naiveSentences(r){let o=r.split("\n").filter(Boolean);for(const a of[".","!","?"])o=o.flatMap(_=>this.splitWithReplacement(_,a));return this.extraShortening(o)}convertHtmlToPlainText(r){const o=document.createElement("div");return o.innerHTML=r,o.textContent||o.innerText||""}}return c.\u0275fac=function(r){return new(r||c)},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var Bt=T(2791),Ar=T(9549),Xe=T(4385),fn=T(3238);function ro(c,u){if(1&c&&(t.TgZ(0,"mat-option",3),t._uU(1),t.qZA()),2&c){const r=u.$implicit,o=t.oxw();t.s9C("gender",r.gender),t.Q6J("value",r),t.xp6(1),t.hij(" ",r.note+r.name+" ("+o.ts.message(r.dialect)+") "," ")}}let Kt=(()=>{class c{constructor(r){this.ts=r,this.voices=Oe.be,this.selected=this.voices[0],this.selectVoice=new t.vpe}ngOnInit(){this.selectVoice.emit(this.selected)}color(r){return r.startsWith("f")?"rgba(255, 191, 194)":"rgba(194, 218, 255)"}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(D.D))},c.\u0275cmp=t.Xpm({type:c,selectors:[["synth-voice-select"]],outputs:{selectVoice:"selectVoice"},decls:5,vars:3,consts:[["appearance","fill"],[3,"value","valueChange","selectionChange"],["matNativeControl","","required","",3,"gender","value",4,"ngFor","ngForOf"],["matNativeControl","","required","",3,"gender","value"]],template:function(r,o){1&r&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",1),t.NdJ("valueChange",function(_){return o.selected=_})("selectionChange",function(_){return o.selectVoice.emit(_.value)}),t.YNc(4,ro,2,3,"mat-option",2),t.qZA()()),2&r&&(t.xp6(2),t.Oqu(o.ts.message("voice")),t.xp6(1),t.Q6J("value",o.selected),t.xp6(1),t.Q6J("ngForOf",o.voices))},dependencies:[I.sg,Ar.KE,Ar.hX,Xe.gD,fn.ey],encapsulation:2}),c})();const We=["voiceSelect"];function Vt(c,u){1&c&&t._UZ(0,"div",11)}function hn(c,u){1&c&&t._UZ(0,"div",11)}function io(c,u){if(1&c&&t._UZ(0,"app-synth-item",12),2&c){const r=u.$implicit,o=u.index,a=t.oxw();t.Q6J("synthItem",r)("i",o)("storyId",a.storyId)}}let $t=(()=>{class c{constructor(r,o,a,_,k){this.router=r,this.textProcessor=o,this.cdref=a,this.synth=_,this.ts=k,this.hideEntireSynthesisPlayer=!0,this.synthItems=[],this.allAudioSources=[]}ngOnInit(){this.refresh()}refresh(r){r&&(this.selected=r),this.synthItems.map(o=>{o.audioUrl=void 0,o.dispose()}),this.text&&setTimeout(()=>{this.synthItems=this.textProcessor.sentences(this.text).map(o=>this.getSynthItem(o)),this.cdref.detectChanges(),this.audio=null},50)}getSynthItem(r){return new Mr.e(r,this.selected,this.synth)}audioLoaded(){return this.synthItems.every(r=>null!=r.audioUrl||r.exceptions.length>0)}combineAndPlayAudio(){var r=this;return(0,y.Z)(function*(){r.audio||(yield r.combineAudioSources()),r.playAllAudio()})()}combineAudioSources(){var r=this;return(0,y.Z)(function*(){r.allAudioSources=r.synthItems.map(a=>a.audioUrl);let o=r.allAudioSources.map(a=>fetch(a).then(_=>_.blob()));yield Promise.all(o).then(a=>{let _=new Blob(a);r.blobUrl=URL.createObjectURL(_),r.audio=new Audio(r.blobUrl)})})()}playAllAudio(){this.audio.paused?this.audio.play():(this.audio.pause(),this.audio.currentTime=0)}downloadAudio(){var r=this;return(0,y.Z)(function*(){r.audio||(yield r.combineAudioSources());const o=document.createElement("a");o.style.display="none",o.href=r.blobUrl,o.download=r.storyTitle+".mp3",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(r.blobUrl)})()}goToFastSynthesiser(){this.router.navigateByUrl("/student/synthesis/"+this.storyId)}stopSynthesis(){this.synthItems.map(r=>{r.audioUrl=void 0,r.dispose()})}toggleHidden(){this.hideEntireSynthesisPlayer=!this.hideEntireSynthesisPlayer,this.refresh()}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(d.F0),t.Y36(Ge),t.Y36(t.sBO),t.Y36(Oe.cf),t.Y36(D.D))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-synthesis-player"]],viewQuery:function(r,o){if(1&r&&t.Gf(We,5),2&r){let a;t.iGM(a=t.CRH())&&(o.voiceSelect=a.first)}},inputs:{storyId:"storyId",text:"text",storyTitle:"storyTitle"},decls:22,vars:11,consts:[[1,"synth",3,"hidden"],[1,"synthHeader"],[1,"reload",3,"click"],[3,"selectVoice"],[1,"fast-synth",3,"click"],[1,"btnContainer",2,"justify-content","space-between"],[1,"playAllButton",2,"text-align","center","width","100px",3,"disabled","click"],["class","spinner-grow","style","width: 1rem; height: 1rem;",4,"ngIf"],[1,"playAllButton",2,"text-align","center","width","150px",3,"disabled","click"],[1,"items"],[3,"synthItem","i","storyId",4,"ngFor","ngForOf"],[1,"spinner-grow",2,"width","1rem","height","1rem"],[3,"synthItem","i","storyId"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div")(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()(),t.TgZ(6,"div",1)(7,"div",2),t.NdJ("click",function(){return o.refresh()}),t._uU(8,"\u21bb"),t.qZA(),t.TgZ(9,"synth-voice-select",3),t.NdJ("selectVoice",function(_){return o.refresh(_)}),t.qZA(),t.TgZ(10,"div",4),t.NdJ("click",function(){return o.goToFastSynthesiser()}),t._uU(11),t.qZA()(),t.TgZ(12,"div",5)(13,"button",6),t.NdJ("click",function(){return o.combineAndPlayAudio()}),t.YNc(14,Vt,1,0,"div",7),t._uU(15),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){return o.downloadAudio()}),t.YNc(17,hn,1,0,"div",7),t._uU(18),t.qZA()(),t._UZ(19,"hr"),t.TgZ(20,"div",9),t.YNc(21,io,1,3,"app-synth-item",10),t.qZA()()),2&r&&(t.Q6J("hidden",o.hideEntireSynthesisPlayer),t.xp6(3),t.Oqu(o.ts.l.listen_back_to_your_story?o.ts.l.listen_back_to_your_story:"listen_back_to_your_story"),t.xp6(2),t.hij("(",o.ts.l.dnn_synthesiser?o.ts.l.dnn_synthesiser:"dnn_synthesiser",")"),t.xp6(6),t.hij(" ",o.ts.l.go_to_fast_synthesiser?o.ts.l.go_to_fast_synthesiser:"go_to_fast_synthesiser"," "),t.xp6(2),t.Q6J("disabled",!o.audioLoaded()),t.xp6(1),t.Q6J("ngIf",!o.audioLoaded()),t.xp6(1),t.hij(" ",o.ts.l.play," "),t.xp6(1),t.Q6J("disabled",!o.audioLoaded()),t.xp6(1),t.Q6J("ngIf",!o.audioLoaded()),t.xp6(1),t.hij(" ",o.ts.l.download," "),t.xp6(3),t.Q6J("ngForOf",o.synthItems))},dependencies:[I.sg,I.O5,Bt.Y,Kt],styles:[".synth[_ngcontent-%COMP%]{display:grid;padding:20px;border-radius:15px;margin:30px;background-color:#ffffff80;border:2px}.synthHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]{font-family:Lucida Sans Unicode;font-size:20px;width:2rem;height:2rem;border-radius:.5em;padding:0;margin:0;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]:hover{color:#000;font-weight:700}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]{padding:3px;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]:hover{color:#000;border-radius:2px;font-weight:700}.items[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:3px;padding-left:1rem;padding-top:1rem;border-radius:3px;text-align:left;flex-wrap:wrap;justify-content:left}.playAllButton[_ngcontent-%COMP%]{padding:5px;border-radius:5px;border:none;width:100px;text-align:center;background-color:#95cdcd}.playAllButton[_ngcontent-%COMP%]:hover:enabled{color:#fff}"]}),c})();const Xt=function oo(){const u=Object.values({"no break whitespace":"\xa0","ogham space mark":"\u1680","zero width no-break space":"\ufeff","ideographic space":"\u3000","narrow no-break space":"\u202f","EN QUAD":"\u2000","EM QUAD":"\u2001","EN SPACE (nut)":"\u2002","EM SPACE (mutton)":"\u2003","THREE-PER-EM SPACE":"\u2004","FOUR-PER-EM SPACE (mid space)":"\u2005","SIX-PER-EM SPACE":"\u2006","FIGURE SPACE":"\u2007","PUNCTUATION SPACE":"\u2008","THIN SPACE":"\u2009","HAIR SPACE":"\u200a"}).join("");return new RegExp("["+u+"]","g")}();function pn(c){return Object.assign({},c)}class Nn{constructor(u,r,o){this.errorsWithSentences=[],this.http=r,this.auth=o,this.grammarCheckers=u,this.cacheMap=new Map;for(const a of u)this.cacheMap.set(a.name,{})}check$(u){const r=new ot.x;return this.check(function Ft(c){return c.replace(Xt," ")}(u),r),r}check(u,r){var o=this;return(0,y.Z)(function*(){const _=function Ln(c,u){const r=[];let o=0;for(let a of c)if(a){const k=o+u.slice(o).indexOf(a);r.push({sentence:a,offset:k}),o=k+a.length}return r}(yield(0,ue.z)(o.http.post(Rt.Z.baseurl+"nlp/sentenceTokenize",{text:u})),u);o.errorsWithSentences=[];const k=(yield Promise.all(o.grammarCheckers.map(function(){var N=(0,y.Z)(function*(U){return yield Promise.all(_.map(function(){var ae=(0,y.Z)(function*(Q,ne){const me=Q.sentence,Me=Q.offset;function Pe(ee){return ee.fromX+=Me,ee.toX+=Me,r.next(ee),ee}if(me in o.cacheMap.get(U.name)){let ee=o.cacheMap.get(U.name)[me].map(pn).map(Pe);return o.errorsWithSentences[ne]=o.errorsWithSentences[ne]?[o.errorsWithSentences[ne][0].concat(ee),me,ne]:[ee,me,ne],ee}const Ye=yield U.check(me,o.auth.getToken());o.cacheMap.get(U.name)[me]=Ye;const An=Ye.map(pn).map(Pe);return o.errorsWithSentences[ne]=o.errorsWithSentences[ne]?[o.errorsWithSentences[ne][0].concat(Ye),me,ne]:[Ye,me,ne],An});return function(Q,ne){return ae.apply(this,arguments)}}()))});return function(U){return N.apply(this,arguments)}}()))).flat().filter(N=>N.length);return r.complete(),o.countNewErrors(k.flat()),k})()}countNewErrors(u){var r=this;return(0,y.Z)(function*(){r.previousErrorTags=u,r.countNewErrors=r._countNewErrorsAfterFirstTime})()}_countNewErrorsAfterFirstTime(u){return(0,y.Z)(function*(){const o=function Fn(c,u){return function k(N,U){return U.filter(ae=>!N.includes(ae)||(N[N.indexOf(ae)]=null,!1)).map(ae=>JSON.parse(ae)[1])}(_(c),_(u));function _(N){return N.map(U=>JSON.stringify([U.errorText,U.type]))}}(r.previousErrorTags,u),_={countsByType:(c=o,c.reduce(function r(o,a){return o[a]||(o[a]=0),o[a]+=1,o},{}))};var c;r.http.post(Rt.Z.baseurl+"gramadoir/userGrammarCounts/",_).subscribe(),r.previousErrorTags=u})()}saveErrorsWithSentences(u){var r=this;return(0,y.Z)(function*(){if(!r.errorsWithSentences||!u)return;const o={Authorization:"Bearer "+r.auth.getToken()};r.http.post(Rt.Z.baseurl+"gramadoir/insert/",{storyId:u,sentences:r.errorsWithSentences},{headers:o}).subscribe()})()}}const gn=xt().import("parchment"),Un=xt().import("ui/tooltip");xt().register(new gn.Attributor.Attribute("highlight-tag","highlight-tag",{scope:gn.Scope.INLINE}));class qn{constructor(u,r,o){this.mostRecentHoveredMessage="",this.quillEditor=u,this.ts=r,this.engagement=o}show(u){u&&((u=this.mergeTags(u)).forEach(o=>{this.quillEditor.formatText(o.fromX,o.toX-o.fromX,{"highlight-tag":JSON.stringify(o)},"api")}),document.querySelectorAll("[highlight-tag]").forEach(o=>{const a=o.getAttribute("highlight-tag");if(!a)return;const _=JSON.parse(a),k=new Un(this.quillEditor);k.root.classList.add("custom-tooltip"),o.addEventListener("mouseover",()=>{this.mouseOverTagElem(_,o,k)}),o.addEventListener("mouseout",()=>{o.removeAttribute("data-selected"),k.hide()})}))}hide(u){u.forEach(r=>{this.quillEditor.formatText(r.fromX,r.toX-r.fromX,{"highlight-tag":null,"background-color":"","data-selected":null})}),document.querySelectorAll(".custom-tooltip").forEach(r=>r.remove())}hideAll(){document.querySelectorAll("[data-selected]").forEach(r=>r.removeAttribute("data-selected")),this.quillEditor.formatText(0,this.quillEditor.getLength(),{"highlight-tag":null,"background-color":"","data-selected":null}),document.querySelectorAll(".custom-tooltip").forEach(r=>r.remove())}mouseOverTagElem(u,r,o){r.setAttribute("data-selected","");const a=this.quillEditor.root.scrollTop;this.quillEditor.root.scroll({top:+a+1}),this.quillEditor.root.scroll({top:+a});const _=this.makeTooltipContents(u.data,this.ts.l.iso_code);o.root.innerHTML=_,this.mostRecentHoveredMessage=_,o.show(),o.position(this.quillEditor.getBounds(u.fromX,u.toX-u.fromX));let k=o.root.getAttribute("style")||"";k+="\n          font-size: medium;\n          padding: 20px;\n          -webkit-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          -moz-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          border: 2px solid var(--scealai-med-brown);\n          border-radius: 2px;\n        ",o.root.setAttribute("style",k);const N=o.root.offsetLeft+o.root.offsetWidth-this.quillEditor.root.offsetWidth;o.root.style.left=N>0?o.root.offsetLeft-N-5+"px":o.root.style.left,o.root.style.left=o.root.offsetLeft<0?o.root.offsetLeft-o.root.offsetLeft+5+"px":o.root.style.left,this.engagement.mouseOverGrammarSuggestionEvent(u)}getGrammarMessage(u){return u?this.mostRecentHoveredMessage?this.mostRecentHoveredMessage:this.ts.message("hover_over_a_highlighted_word_for_a_grammar_suggestion"):this.ts.message("checking_grammar")}makeTooltipContents(u,r){return u.map(_=>`<div style="white-space: pre-wrap; text-align: left;"><span class="circle" style="background: ${_.color}"></span> ${(_=>"en"==r?_.nameEN:_.nameGA)(_)}: ${(_=>"en"==r?_.messageEN:_.messageGA)(_)}</div>`).join("<hr>")}overlaps(u,r){return u.fromX<=r.toX&&u.toX>=r.fromX}makeMergedTag(u){const r=Math.min(...u.map(_=>_.fromX)),o=Math.max(...u.map(_=>_.toX));return{data:u.reduce((_,k)=>this.arrayToSet(_.concat(k.data)),[]),fromX:r,toX:o}}mergeTags(u,r=0){if(!u.length)return u;const o=u[0],a=u.filter(U=>this.overlaps(o,U)),_=this.makeMergedTag(a),k=u.filter(U=>!a.includes(U)).concat([_]),N=u.length==k.length;return N&&r==u.length-1?u:this.mergeTags(k,N?r+1:r)}arrayToSet(u){return u.filter((r,o,a)=>o===a.findIndex(_=>JSON.stringify(_)===JSON.stringify(r)))}}var pe=T(8043);const so={name:"Leathan_Caol",check:function ao(c){return Hn.apply(this,arguments)}},_n=["a","o","u","\xe1","\xf3","\xfa","A","O","U","\xc1","\xd3","\xda"],mn=["e","i","\xe9","\xed","E","I","\xc9","\xcd"],kr=["b","c","d","f","g","h","l","m","n","p","r","s","t","v","z","B","C","D","F","G","H","L","M","N","P","R","S","T","V","Z"],Or=["aniar","an\xedos","ar\xe9ir","ar\xeds","ar\xedst","anseo","ansin","ansi\xfad","c\xe9n","den","faoina","ina","inar","insa","lena","lenar"];function Hn(){return(Hn=(0,y.Z)(function*(c){return new Promise((u,r)=>{const o=co(c);let a=[];for(const _ of o)a.push({errorText:c,messageGA:pe.U["LEATHAN-CAOL"].messageGA,messageEN:pe.U["LEATHAN-CAOL"].messageEN,context:c,nameEN:pe.U["LEATHAN-CAOL"].nameEN,nameGA:pe.U["LEATHAN-CAOL"].nameGA,color:pe.U["LEATHAN-CAOL"].color,fromX:_.first,toX:_.first+1,type:"LEATHAN-CAOL"}),a.push({errorText:c,messageGA:pe.U["LEATHAN-CAOL"].messageGA,messageEN:pe.U["LEATHAN-CAOL"].messageEN,context:c,nameEN:pe.U["LEATHAN-CAOL"].nameEN,nameGA:pe.U["LEATHAN-CAOL"].nameGA,color:pe.U["LEATHAN-CAOL"].color,fromX:_.second,toX:_.second+1,type:"LEATHAN-CAOL"});u(a)})})).apply(this,arguments)}function co(c){const u=function uo(c){let u=[];for(let r of Or){let a=Er(c.toLowerCase(),r);for(let _ of a)u[_]=r.length}return u}(c),r=[];for(let o=0;o<c.length-1;o++)if(u[o]>0&&(o+=u[o]),Ir(c[o])&&Dr(c[o+1])){let a=o++;for(;Dr(c[o]);)o++;if(Ir(c[o])&&!Gn(c[a],c[o])){const _=fo(c[a]);r.push({broadFirst:_,first:a,second:o})}}return r}function Er(c,u){var r=[];let o=new RegExp("[\\s.!?\\-]"+u+"[\\s.!?\\-]","g"),a=o.exec(c);for(;a;){o=new RegExp(u);let _=o.exec(a[0]);r.push(a.index+_.index),c=lo(c,a.index,"#".repeat(5)),o=new RegExp("[\\s.!?\\-]"+u+"[\\s.!?\\-]","g"),a=o.exec(c)}return r}function lo(c,u,r){return c.substr(0,u)+r+c.substr(u+r.length)}function Ir(c){return _n.includes(c)||mn.includes(c)}function fo(c){return _n.includes(c)}function Dr(c){return kr.includes(c)}function Gn(c,u){return _n.includes(c)&&_n.includes(u)||mn.includes(c)&&mn.includes(u)}const ho={name:"AnGramadoir",check:function po(c,u){return Wn.apply(this,arguments)}};function Wn(){return Wn=(0,y.Z)(function*(c,u){return new Promise(function(){var r=(0,y.Z)(function*(o,a){let _=[];try{_=yield Rr(`${Rt.Z.baseurl}gramadoir/callAnGramadoir/${encodeURIComponent(c)}`,u)}catch{try{_=yield Rr(`https://cadhan.com/api/gramadoir/1.0/en/${c}`)}catch{a()}}o(_.map(N=>{const U=go(N.ruleId),ae=pe.U[U];return{errorText:N.errortext,messageGA:ae.messageGA.replace("#",N.errortext),messageEN:ae.messageEN.replace("#",N.errortext),context:N.context,nameEN:ae.nameEN,nameGA:ae.nameGA,color:ae.color,fromX:+N.fromx,toX:+N.tox+1,type:U}}))});return function(o,a){return r.apply(this,arguments)}}())}),Wn.apply(this,arguments)}function Rr(c,u){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,y.Z)(function*(c,u){let r={};u&&(r={Authorization:"Bearer "+u});const o=yield fetch(c,{headers:r});if(o.ok)return yield o.json();throw new Error(o.statusText)})).apply(this,arguments)}function go(c){if(!c)return"";const u=c.replace(/[A-Za-z:]+\//,"");if(!u)return"";const r=/[A-Z]+/.exec(u);return r&&r[0]?r[0]:""}const _o={name:"RelativeClause",check:function Br(c){return Yn.apply(this,arguments)}},mo="https://phoneticsrv3.lcs.tcd.ie/gramsrv/api/grammar";function Yn(){return Yn=(0,y.Z)(function*(c){return new Promise(function(){var u=(0,y.Z)(function*(r,o){r((yield vo(c)).map(k=>({errorText:c.slice(k.fromx,k.tox),messageGA:k.msg,messageEN:k.msg,context:k.context,nameEN:pe.U["RELATIVE-CLAUSE"].nameEN,nameGA:pe.U["RELATIVE-CLAUSE"].nameGA,color:pe.U["RELATIVE-CLAUSE"].color,fromX:k.fromx,toX:k.tox,type:"RELATIVE-CLAUSE"})))});return function(r,o){return u.apply(this,arguments)}}())}),Yn.apply(this,arguments)}function vo(c){return zn.apply(this,arguments)}function zn(){return(zn=(0,y.Z)(function*(c){const u=yield fetch(mo,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:yo(c.replace(/\n/g," "))});return u.ok?yield u.json():[]})).apply(this,arguments)}function yo(c){return`text=${encodeURIComponent(c)}&check=relclause`}var Fr=T(529),wt=T(5589),Zt=T(2687),xo=T(445),dt=T(1281),Zr=T(9521),wo=T(3353),bo=T(4968),Lr=T(6451),bt=T(9300),Qn=T(4004),Nr=T(9718),st=T(2722),Ur=T(5698),qr=T(8675),Hr=T(8372),je=T(7340);const Kn=["*"],Vn=["content"];function Co(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){t.CHM(r);const a=t.oxw();return t.KtG(a._onBackdropClicked())}),t.qZA()}if(2&c){const r=t.oxw();t.ekj("mat-drawer-shown",r._isShowingBackdrop())}}function Gr(c,u){1&c&&(t.TgZ(0,"mat-drawer-content"),t.Hsn(1,2),t.qZA())}const vn=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Wr=["mat-drawer","mat-drawer-content","*"],Yr={transformDrawer:(0,je.X$)("transform",[(0,je.SB)("open, open-instant",(0,je.oB)({transform:"none",visibility:"visible"})),(0,je.SB)("void",(0,je.oB)({"box-shadow":"none",visibility:"hidden"})),(0,je.eR)("void => open-instant",(0,je.jt)("0ms")),(0,je.eR)("void <=> open, open-instant => void",(0,je.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},$n=new t.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Qr(){return!1}}),Ct=new t.OlP("MAT_DRAWER_CONTAINER");let yn=(()=>{class c extends wt.PQ{constructor(r,o,a,_,k){super(a,_,k),this._changeDetectorRef=r,this._container=o}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(t.sBO),t.Y36((0,t.Gpc)(()=>xn)),t.Y36(t.SBq),t.Y36(wt.mF),t.Y36(t.R0b))},c.\u0275cmp=t.Xpm({type:c,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(r,o){2&r&&t.Udp("margin-left",o._container._contentMargins.left,"px")("margin-right",o._container._contentMargins.right,"px")},features:[t._Bn([{provide:wt.PQ,useExisting:c}]),t.qOj],ngContentSelectors:Kn,decls:1,vars:0,template:function(r,o){1&r&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),c})(),Xn=(()=>{class c{constructor(r,o,a,_,k,N,U,ae){this._elementRef=r,this._focusTrapFactory=o,this._focusMonitor=a,this._platform=_,this._ngZone=k,this._interactivityChecker=N,this._doc=U,this._container=ae,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ot.x,this._animationEnd=new ot.x,this._animationState="void",this.openedChange=new t.vpe(!0),this._openedStream=this.openedChange.pipe((0,bt.h)(Q=>Q),(0,Qn.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,bt.h)(Q=>Q.fromState!==Q.toState&&0===Q.toState.indexOf("open")),(0,Nr.h)(void 0)),this._closedStream=this.openedChange.pipe((0,bt.h)(Q=>!Q),(0,Qn.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,bt.h)(Q=>Q.fromState!==Q.toState&&"void"===Q.toState),(0,Nr.h)(void 0)),this._destroyed=new ot.x,this.onPositionChanged=new t.vpe,this._modeChanged=new ot.x,this.openedChange.subscribe(Q=>{Q?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,bo.R)(this._elementRef.nativeElement,"keydown").pipe((0,bt.h)(Q=>Q.keyCode===Zr.hY&&!this.disableClose&&!(0,Zr.Vb)(Q)),(0,st.R)(this._destroyed)).subscribe(Q=>this._ngZone.run(()=>{this.close(),Q.stopPropagation(),Q.preventDefault()}))}),this._animationEnd.pipe((0,Tr.x)((Q,ne)=>Q.fromState===ne.fromState&&Q.toState===ne.toState)).subscribe(Q=>{const{fromState:ne,toState:me}=Q;(0===me.indexOf("open")&&"void"===ne||"void"===me&&0===ne.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(r){(r="end"===r?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(r),this._position=r,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(r){this._mode=r,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(r){this._disableClose=(0,dt.Ig)(r)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(r){("true"===r||"false"===r||null==r)&&(r=(0,dt.Ig)(r)),this._autoFocus=r}get opened(){return this._opened}set opened(r){this.toggle((0,dt.Ig)(r))}_forceFocus(r,o){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const a=()=>{r.removeEventListener("blur",a),r.removeEventListener("mousedown",a),r.removeAttribute("tabindex")};r.addEventListener("blur",a),r.addEventListener("mousedown",a)})),r.focus(o)}_focusByCssSelector(r,o){let a=this._elementRef.nativeElement.querySelector(r);a&&this._forceFocus(a,o)}_takeFocus(){if(!this._focusTrap)return;const r=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(o=>{!o&&"function"==typeof this._elementRef.nativeElement.focus&&r.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(r){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,r):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const r=this._doc.activeElement;return!!r&&this._elementRef.nativeElement.contains(r)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(r){return this.toggle(!0,r)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(r=!this.opened,o){r&&o&&(this._openedVia=o);const a=this._setOpen(r,!r&&this._isFocusWithinDrawer(),this._openedVia||"program");return r||(this._openedVia=null),a}_setOpen(r,o,a){return this._opened=r,r?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",o&&this._restoreFocus(a)),this._updateFocusTrapState(),new Promise(_=>{this.openedChange.pipe((0,Ur.q)(1)).subscribe(k=>_(k?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(r){const o=this._elementRef.nativeElement,a=o.parentNode;"end"===r?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),a.insertBefore(this._anchor,o)),a.appendChild(o)):this._anchor&&this._anchor.parentNode.insertBefore(o,this._anchor)}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(t.SBq),t.Y36(Zt.qV),t.Y36(Zt.tE),t.Y36(wo.t4),t.Y36(t.R0b),t.Y36(Zt.ic),t.Y36(I.K0,8),t.Y36(Ct,8))},c.\u0275cmp=t.Xpm({type:c,selectors:[["mat-drawer"]],viewQuery:function(r,o){if(1&r&&t.Gf(Vn,5),2&r){let a;t.iGM(a=t.CRH())&&(o._content=a.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(r,o){1&r&&t.WFA("@transform.start",function(_){return o._animationStarted.next(_)})("@transform.done",function(_){return o._animationEnd.next(_)}),2&r&&(t.uIk("align",null),t.d8E("@transform",o._animationState),t.ekj("mat-drawer-end","end"===o.position)("mat-drawer-over","over"===o.mode)("mat-drawer-push","push"===o.mode)("mat-drawer-side","side"===o.mode)("mat-drawer-opened",o.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Kn,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(r,o){1&r&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA())},dependencies:[wt.PQ],encapsulation:2,data:{animation:[Yr.transformDrawer]},changeDetection:0}),c})(),xn=(()=>{class c{constructor(r,o,a,_,k,N=!1,U){this._dir=r,this._element=o,this._ngZone=a,this._changeDetectorRef=_,this._animationMode=U,this._drawers=new t.n_E,this.backdropClick=new t.vpe,this._destroyed=new ot.x,this._doCheckSubject=new ot.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ot.x,r&&r.change.pipe((0,st.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),k.change().pipe((0,st.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=N}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(r){this._autosize=(0,dt.Ig)(r)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(r){this._backdropOverride=null==r?null:(0,dt.Ig)(r)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,qr.O)(this._allDrawers),(0,st.R)(this._destroyed)).subscribe(r=>{this._drawers.reset(r.filter(o=>!o._container||o._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,qr.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(r=>{this._watchDrawerToggle(r),this._watchDrawerPosition(r),this._watchDrawerMode(r)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Hr.b)(10),(0,st.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(r=>r.open())}close(){this._drawers.forEach(r=>r.close())}updateContentMargins(){let r=0,o=0;if(this._left&&this._left.opened)if("side"==this._left.mode)r+=this._left._getWidth();else if("push"==this._left.mode){const a=this._left._getWidth();r+=a,o-=a}if(this._right&&this._right.opened)if("side"==this._right.mode)o+=this._right._getWidth();else if("push"==this._right.mode){const a=this._right._getWidth();o+=a,r-=a}r=r||null,o=o||null,(r!==this._contentMargins.left||o!==this._contentMargins.right)&&(this._contentMargins={left:r,right:o},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(r){r._animationStarted.pipe((0,bt.h)(o=>o.fromState!==o.toState),(0,st.R)(this._drawers.changes)).subscribe(o=>{"open-instant"!==o.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==r.mode&&r.openedChange.pipe((0,st.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(r.opened))}_watchDrawerPosition(r){!r||r.onPositionChanged.pipe((0,st.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Ur.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(r){r&&r._modeChanged.pipe((0,st.R)((0,Lr.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(r){const o=this._element.nativeElement.classList,a="mat-drawer-container-has-open";r?o.add(a):o.remove(a)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(r=>{"end"==r.position?this._end=r:this._start=r}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(r=>r&&!r.disableClose&&this._canHaveBackdrop(r)).forEach(r=>r._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(r){return"side"!==r.mode||!!this._backdropOverride}_isDrawerOpen(r){return null!=r&&r.opened}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(xo.Is,8),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(wt.rL),t.Y36($n),t.Y36(t.QbO,8))},c.\u0275cmp=t.Xpm({type:c,selectors:[["mat-drawer-container"]],contentQueries:function(r,o,a){if(1&r&&(t.Suo(a,yn,5),t.Suo(a,Xn,5)),2&r){let _;t.iGM(_=t.CRH())&&(o._content=_.first),t.iGM(_=t.CRH())&&(o._allDrawers=_)}},viewQuery:function(r,o){if(1&r&&t.Gf(yn,5),2&r){let a;t.iGM(a=t.CRH())&&(o._userContent=a.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,o){2&r&&t.ekj("mat-drawer-container-explicit-backdrop",o._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[t._Bn([{provide:Ct,useExisting:c}])],ngContentSelectors:Wr,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,o){1&r&&(t.F$t(vn),t.YNc(0,Co,1,2,"div",0),t.Hsn(1),t.Hsn(2,1),t.YNc(3,Gr,2,0,"mat-drawer-content",1)),2&r&&(t.Q6J("ngIf",o.hasBackdrop),t.xp6(3),t.Q6J("ngIf",!o._content))},dependencies:[I.O5,yn],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),c})(),Oo=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[I.ez,fn.BQ,wt.ZD,wt.ZD,fn.BQ]}),c})();var Kr=T(5802),Vr=T(4859),wn=T(7392),bn=T(8255);function Eo(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div")(1,"div",5),t._uU(2),t.qZA(),t.TgZ(3,"div",6)(4,"input",7),t.NdJ("ngModelChange",function(a){t.CHM(r);const _=t.oxw();return t.KtG(_.searchText=a)}),t.qZA()()()}if(2&c){const r=t.oxw();t.xp6(2),t.Oqu(r.ts.l.my_stories),t.xp6(2),t.s9C("placeholder",r.ts.l.search_story_title_or_content),t.Q6J("ngModel",r.searchText)}}function Io(c,u){1&c&&(t.TgZ(0,"div",17),t._uU(1,"1"),t.qZA())}function Po(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",8),t.NdJ("click",function(){const _=t.CHM(r).$implicit,k=t.oxw();return t.KtG(k.setStory(_))}),t.TgZ(1,"div",9)(2,"div",10)(3,"div",11),t.NdJ("blur",function(){const a=t.CHM(r),_=a.index,k=a.$implicit,N=t.oxw();return t.KtG(N.saveStoryTitle(_,k))})("keydown.enter",function(){const a=t.CHM(r),_=a.index,k=a.$implicit,N=t.oxw();return t.KtG(N.saveStoryTitle(_,k))}),t._uU(4),t.qZA(),t.YNc(5,Io,2,0,"div",12),t.qZA(),t.TgZ(6,"div",13),t._uU(7),t.ALo(8,"date"),t.TgZ(9,"button",14)(10,"mat-icon"),t._uU(11,"more_vert"),t.qZA()(),t.TgZ(12,"mat-menu",null,15)(14,"button",16),t.NdJ("click",function(){const _=t.CHM(r).$implicit,k=t.oxw();return t.KtG(k.openDeleteStoryDialog(_._id))}),t.TgZ(15,"mat-icon"),t._uU(16,"delete"),t.qZA(),t.TgZ(17,"span"),t._uU(18),t.qZA()(),t.TgZ(19,"button",16),t.NdJ("click",function(){const _=t.CHM(r).index,k=t.oxw();return t.KtG(k.makeTitleDivEditable(_))}),t.TgZ(20,"mat-icon"),t._uU(21,"create"),t.qZA(),t.TgZ(22,"span"),t._uU(23),t.qZA()()()()(),t._UZ(24,"hr"),t.qZA()}if(2&c){const r=u.$implicit,o=u.index,a=t.MAs(13),_=t.oxw();t.xp6(1),t.uIk("id",r._id),t.xp6(2),t.uIk("id",o),t.xp6(1),t.hij(" ",null==r?null:r.title," "),t.xp6(1),t.Q6J("ngIf",_.hasUnreadFeedback(r)),t.xp6(2),t.hij(" ",t.xi3(8,8,r.lastUpdated,"d/M/yy")," "),t.xp6(2),t.Q6J("matMenuTriggerFor",a),t.xp6(9),t.Oqu(_.ts.l.delete),t.xp6(5),t.Oqu(_.ts.l.rename)}}let jn=(()=>{class c{constructor(r,o,a,_,k,N){this.ts=r,this.auth=o,this.storyService=a,this.engagement=_,this.recordingService=k,this.dialog=N,this.stories=[],this.lastClickedStoryId="",this.searchText="",this.storyEmitter=new t.vpe,this.hasFeedback=new t.vpe,this.titleUpdated=new t.vpe,this.storiesLoaded=new t.vpe}ngOnInit(){this.getStories()}getStories(){var r=this;return(0,y.Z)(function*(){r.stories=(yield(0,ue.z)(r.storyService.getStoriesForLoggedInUser())).map(o=>(new C).fromJSON(o)),r.stories.length>0&&(r.stories.sort((o,a)=>o.date>a.date?-1:1),r.lastClickedStoryId=r.stories[0]._id,setTimeout(()=>{r.setStory(r.stories[0])})),r.storiesLoaded.emit(!0)})()}setStory(r){null==r.htmlText&&(r.htmlText=r.text),this.storyEmitter.emit(r),this.hasFeedback.emit(!!(r.feedback.text||r.feedback.audioId||r.feedback.feedbackMarkup));let o=r._id,a=document.getElementById(o);a&&(this.lastClickedStoryId&&document.getElementById(this.lastClickedStoryId).classList.remove("clickedresultCard"),this.lastClickedStoryId=o,a.classList.add("clickedresultCard"))}hasUnreadFeedback(r){return(r.feedback.text||r.feedback.audioId||r.feedback.feedbackMarkup)&&!r.feedback.seenByStudent}createNewStory(){var r=this;this.dialogRef=this.dialog.open(A.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var o=(0,y.Z)(function*(a){if(r.dialogRef=void 0,a)if(a[0]){let _="connemara";a[1]==r.ts.l.munster&&(_="kerry"),a[1]==r.ts.l.ulster&&(_="donegal"),r.storyService.saveStory(r.auth.getUserDetails()._id,a[0],new Date,_,"",r.auth.getUserDetails().username,!1).subscribe({next:()=>{r.getStories()},error:()=>{alert("Not able to create a new story")}})}else alert(r.ts.l.title_required)});return function(a){return o.apply(this,arguments)}}())}openDeleteStoryDialog(r){var o=this;this.dialogRef=this.dialog.open(A.p,{data:{title:this.ts.l.delete_story,message:this.ts.l.are_you_sure_delete_story,confirmText:this.ts.l.yes,cancelText:this.ts.l.no},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var a=(0,y.Z)(function*(_){o.dialogRef=void 0,_&&o.deleteStory(r)});return function(_){return a.apply(this,arguments)}}())}deleteStory(r){this.recordingService.deleteStoryRecordingAudio(r).subscribe(a=>{}),this.recordingService.deleteStoryRecording(r).subscribe(a=>{});const o=this.stories.findIndex(a=>a._id===r);this.storyService.deleteStory(r).subscribe(a=>{this.engagement.addEventForLoggedInUser(F.tw["DELETE-STORY"],{_id:r}),this.stories.splice(o,1),this.stories.length?this.setStory(this.stories[0]):this.storyEmitter.emit(null)})}makeTitleDivEditable(r){const o=document.getElementById(r);o.setAttribute("contenteditable","true"),window.setTimeout(()=>o.focus(),0)}saveStoryTitle(r,o){const a=document.getElementById(r);a.setAttribute("contenteditable","false"),o.title.trim()!=a.textContent.trim()&&(o.title=a.textContent,this.storyService.updateTitle(o._id,o.title.trim()).subscribe({next:()=>{this.titleUpdated.emit(o.title.trim())},error:()=>console.log("error updating title")}))}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(D.D),t.Y36(R.$),t.Y36(w.N),t.Y36(W.M),t.Y36(xe.s),t.Y36(p.uw))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-story-drawer"]],outputs:{storyEmitter:"storyEmitter",hasFeedback:"hasFeedback",titleUpdated:"titleUpdated",storiesLoaded:"storiesLoaded"},decls:8,vars:5,consts:[[1,"body"],[4,"ngIf"],[1,"storyList"],[3,"click",4,"ngFor","ngForOf"],["mat-fab","",1,"newStoryButton",3,"click"],[1,"myStories"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control","searchBox",3,"ngModel","placeholder","ngModelChange"],[3,"click"],[1,"contentSection"],[2,"display","flex"],[1,"contentsTitle",3,"blur","keydown.enter"],["class","notificationBtn",4,"ngIf"],[1,"contentsDate"],["mat-icon-button","","aria-label","Options to delete or rename your story",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"notificationBtn"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t.YNc(1,Eo,5,3,"div",1),t.TgZ(2,"div",2),t.YNc(3,Po,25,11,"div",3),t.ALo(4,"appFilter"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return o.createNewStory()}),t.TgZ(6,"mat-icon"),t._uU(7,"add"),t.qZA()()()),2&r&&(t.xp6(1),t.Q6J("ngIf",o.stories.length>0),t.xp6(2),t.Q6J("ngForOf",t.xi3(4,2,o.stories,o.searchText)))},dependencies:[I.sg,I.O5,_e.Fj,_e.JJ,_e.On,Vr.lW,wn.Hw,bn.VK,bn.OP,bn.p6,I.uU,ce],styles:[".body[_ngcontent-%COMP%]{display:flex;width:100%;height:98%;flex-direction:column}.storyList[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto}.myStories[_ngcontent-%COMP%]{color:var(--dark-text);font-size:16pt;padding-bottom:10px;text-align:left;font-weight:bolder}.searchBox[_ngcontent-%COMP%]{min-width:300px}.contentSection[_ngcontent-%COMP%]{display:flex}.contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;text-decoration:none;min-width:50%;flex:1 0 50%;overflow-wrap:break-word}.contentsTitle[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsDate[_ngcontent-%COMP%]{flex:1 0 50%;text-align:right;padding-right:20px}.newStoryButton[_ngcontent-%COMP%]{margin-left:auto}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%]{background-color:var(--scealai-green);box-shadow:none}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:2px;font-weight:bolder;border-radius:10px}"]}),c})();var Cn=T(1481);function Do(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",10)(1,"label",11),t._uU(2),t.qZA(),t.TgZ(3,"input",12),t.NdJ("ngModelChange",function(a){t.CHM(r);const _=t.oxw();return t.KtG(_.wordLookedUp=a)})("keyup.enter",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.lookupWord())})("click",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.clearDictInput())}),t.qZA(),t.TgZ(4,"button",13),t.NdJ("click",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.lookupWord())}),t._UZ(5,"i",14),t.qZA()()}if(2&c){const r=t.oxw();t.xp6(2),t.hij("",r.ts.l.search,":"),t.xp6(1),t.Q6J("ngModel",r.wordLookedUp)}}function Ro(c,u){if(1&c&&t._UZ(0,"iframe",15),2&c){const r=t.oxw();t.Q6J("src",r.defaultDictIframeText,t.uOi)}}function Bo(c,u){1&c&&(t.TgZ(0,"div",16)(1,"ul")(2,"li")(3,"a",17),t._uU(4,"potafocal.com"),t.qZA()(),t.TgZ(5,"li")(6,"a",18),t._uU(7,"focloir.ie"),t.qZA()()()())}let Fo=(()=>{class c{constructor(r,o,a,_){this.ts=r,this.sanitizer=o,this.http=a,this.engagement=_,this.wordLookedUp="",this.selectTeanglann=!0,this.defaultDictIframeText=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/html;charset=utf-8,"+this.ts.l.search_for_words_in_dictionary),this.closeDictionaryEmitter=new t.vpe}ngOnInit(){}lookupWord(){var r=this;return(0,y.Z)(function*(){if(r.wordLookedUp){const o=r.http.post(Rt.Z.baseurl+"proxy/",{url:`https://www.teanglann.ie/en/fgb/${r.wordLookedUp}`}),a=yield(0,ue.z)(o),_=(new DOMParser).parseFromString(a,"text/html");_.querySelectorAll(".ex > .head > a").forEach(Q=>Q.href=`https://www.teanglann.ie${Q.href.slice(Q.href.lastIndexOf("/en/"))}`),_.querySelector(".moar")?.remove();const U=_.querySelector(".listings");U.style.cssText+="margin-right: 0px; padding: 10px;",document.getElementById("dictiframe").src='data:text/html;charset=utf-8,<link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/template.css"><link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/fgb.css">'+U.outerHTML,r.engagement.addEventForLoggedInUser(F.tw["USE-DICTIONARY"],null,r.wordLookedUp)}else alert(r.ts.l.enter_a_word_to_lookup)})()}clearDictInput(){this.wordLookedUp&&(this.wordLookedUp="")}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(D.D),t.Y36(Cn.H7),t.Y36(Fr.eN),t.Y36(W.M))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-dictionary-drawer"]],outputs:{closeDictionaryEmitter:"closeDictionaryEmitter"},decls:16,vars:5,consts:[[1,"dictionaryContainer"],[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"dictionarySubHeader"],[1,"dictionaryName",3,"click"],["class","dictionaryInput",4,"ngIf"],[2,"height","100%"],["class","dictionaryIframe","id","dictiframe",3,"src",4,"ngIf"],["class","dictionaryIframe","style","text-align: left",4,"ngIf"],[1,"dictionaryInput"],["for","dictlookup"],["type","text","id","dictlookup","name","dictlookup","autofocus","",3,"ngModel","ngModelChange","keyup.enter","click"],[1,"searchDictionaryBtn",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["id","dictiframe",1,"dictionaryIframe",3,"src"],[1,"dictionaryIframe",2,"text-align","left"],["href","http://www.potafocal.com/beo/","target","_blank"],["href","https://www.focloir.ie","target","_blank"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3),t.qZA(),t.TgZ(4,"div",2),t.NdJ("click",function(){return o.closeDictionaryEmitter.next(!0)}),t._UZ(5,"i",3),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5),t.NdJ("click",function(){return o.selectTeanglann=!0}),t._uU(8," Teanglann "),t.qZA(),t._uU(9," | "),t.TgZ(10,"div",5),t.NdJ("click",function(){return o.selectTeanglann=!1}),t._uU(11),t.qZA()(),t.YNc(12,Do,6,2,"div",6),t.TgZ(13,"div",7),t.YNc(14,Ro,1,1,"iframe",8),t.qZA(),t.YNc(15,Bo,8,0,"div",9),t.qZA()),2&r&&(t.xp6(3),t.hij(" ",o.ts.l.dictionary," "),t.xp6(8),t.hij(" ",o.ts.l.external_links," "),t.xp6(1),t.Q6J("ngIf",o.selectTeanglann),t.xp6(2),t.Q6J("ngIf",o.selectTeanglann),t.xp6(1),t.Q6J("ngIf",!o.selectTeanglann))},dependencies:[I.O5,_e.Fj,_e.JJ,_e.On],styles:[".dictionaryContainer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:wrap}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.dictionarySubHeader[_ngcontent-%COMP%]{padding-left:10px;padding-bottom:5px;background-color:var(--scealai-green);color:#fff;display:flex}.dictionaryName[_ngcontent-%COMP%]{background-color:var(--scealai-green);font-size:12px;color:#fff;padding-right:5px;padding-top:5px}.dictionaryName[_ngcontent-%COMP%]:hover{color:var(--scealai-light-green);text-decoration:none;cursor:pointer}.dictionaryInput[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;display:flex;padding-bottom:10px;padding-left:10px;gap:1rem}.searchDictionaryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.searchDictionaryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.dictionaryIframe[_ngcontent-%COMP%]{width:100%;border-radius:0 0 5px 5px}"]}),c})();const de=function(c){return{"background-color":c}};function le(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",5),t.NdJ("click",function(){const _=t.CHM(r).$implicit,k=t.oxw();return t.KtG(k.toggleLegendTag(_.key))}),t._UZ(1,"div",6),t._uU(2),t.ALo(3,"titlecase"),t.ALo(4,"titlecase"),t._uU(5),t.qZA()}if(2&c){const r=u.$implicit,o=t.oxw();t.uIk("id",r.key),t.xp6(1),t.Q6J("ngStyle",t.VKq(8,de,r.value[0].color)),t.xp6(1),t.hij(" ","en"==o.ts.l.iso_code?t.lcZ(3,4,r.value[0].nameEN):t.lcZ(4,6,r.value[0].nameGA)," "),t.xp6(3),t.hij(" (","Broad/Slender"==r.value[0].nameEN?r.value.length/2:r.value.length,") ")}}let Zo=(()=>{class c{constructor(r){this.ts=r,this.closeGrammarEmitter=new t.vpe}ngOnInit(){}toggleLegendTag(r){this.checkBoxes[r]=!this.checkBoxes[r],this.quillHighlighter.hideAll(),this.quillHighlighter.show(this.grammarErrors.filter(o=>this.checkBoxes[o.type]).map(pe.j)),this.checkBoxes[r]?document.getElementById(r).classList.remove("hideLegendItem"):document.getElementById(r).classList.add("hideLegendItem")}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(D.D))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-grammar-error-drawer"]],inputs:{quillHighlighter:"quillHighlighter",grammarLoaded:"grammarLoaded",grammarErrorsTypeDict:"grammarErrorsTypeDict",grammarErrors:"grammarErrors",checkBoxes:"checkBoxes"},outputs:{closeGrammarEmitter:"closeGrammarEmitter"},decls:8,vars:4,consts:[[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"selectErrorCheckbox"],["class","errorContainer",3,"click",4,"ngFor","ngForOf"],[1,"errorContainer",3,"click"],[1,"circle",3,"ngStyle"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"h5"),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.NdJ("click",function(){return o.closeGrammarEmitter.next(!0)}),t._UZ(4,"i",2),t.qZA()(),t.TgZ(5,"div",3),t.YNc(6,le,6,10,"div",4),t.ALo(7,"keyvalue"),t.qZA()),2&r&&(t.xp6(2),t.hij(" ",o.ts.message("grammar_errors")," "),t.xp6(4),t.Q6J("ngForOf",t.lcZ(7,2,o.grammarErrorsTypeDict)))},dependencies:[I.sg,I.PC,I.rS,I.Nd],styles:[".grammarMessageBanner[_ngcontent-%COMP%]{padding-bottom:20px}.circle[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border-radius:6px}.selectErrorCheckbox[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:space-around;text-align:left;padding-left:10px;padding-top:10px;gap:1.5rem;-webkit-user-select:none;-moz-user-select:none;user-select:none}.errorContainer[_ngcontent-%COMP%]{margin:2px}.errorContainer[_ngcontent-%COMP%]:hover{cursor:pointer}.errorColorBox[_ngcontent-%COMP%]{display:inline-flex;width:30px;height:15px}.hideLegendItem[_ngcontent-%COMP%]{text-decoration:line-through;opacity:.5}.dictionaryContainer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:wrap}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),c})();function Lo(c,u){if(1&c&&t._UZ(0,"audio",7,8),2&c){const r=t.oxw();t.Q6J("src",r.audioSource,t.LSH)}}function No(c,u){if(1&c&&t._UZ(0,"div",9),2&c){const r=t.oxw();t.Q6J("innerHTML",r.sanitizer.bypassSecurityTrustHtml(null==r.story||null==r.story.feedback?null:r.story.feedback.feedbackMarkup),t.oJD)}}let Uo=(()=>{class c{constructor(r,o,a,_,k){this.ts=r,this.sanitizer=o,this.storyService=a,this.engagement=_,this.notificationService=k,this.closeFeedbackEmitter=new t.vpe}ngOnInit(){}ngOnChanges(r){this.story&&(this.story.feedback.text||this.story.feedback.audioId||this.story.feedback.feedbackMarkup)&&this.getFeedback()}getFeedback(){this.story.feedback.audioId&&this.getFeedbackAudio(),""!==this.story.feedback.text&&(this.story.feedback.seenByStudent=!0),this.storyService.viewFeedback(this.story._id).subscribe(()=>{this.engagement.addEventForLoggedInUser(F.tw["VIEW-FEEDBACK"],this.story),this.notificationService.getStudentNotifications()})}getFeedbackAudio(){this.storyService.getFeedbackAudio(this.story._id).subscribe(r=>{this.audioSource=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(r)),console.log(this.audioSource)})}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(D.D),t.Y36(Cn.H7),t.Y36(w.N),t.Y36(W.M),t.Y36(oe.g))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-feedback-drawer"]],inputs:{story:"story"},outputs:{closeFeedbackEmitter:"closeFeedbackEmitter"},features:[t.TTD],decls:11,vars:5,consts:[[1,"feedbackHeader"],[1,"closeFeedbackBtn",3,"click"],[1,"fa","fa-times"],[1,"textFieldContainer"],["readonly","",1,"textField",3,"placeholder","value"],["id","audio","controls","","class","audioPlayer",3,"src",4,"ngIf"],["class","textField","style","text-align: left; padding-left:25%; padding-right:25%;",3,"innerHTML",4,"ngIf"],["id","audio","controls","",1,"audioPlayer",3,"src"],["audioTag",""],[1,"textField",2,"text-align","left","padding-left","25%","padding-right","25%",3,"innerHTML"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.NdJ("click",function(){return o.closeFeedbackEmitter.next(!0)}),t._UZ(4,"i",2),t.qZA()(),t.TgZ(5,"div",3)(6,"textarea",4),t._uU(7,"    "),t.qZA(),t.YNc(8,Lo,2,1,"audio",5),t._UZ(9,"hr"),t.YNc(10,No,1,1,"div",6),t.qZA()),2&r&&(t.xp6(2),t.hij(" ",o.ts.l.feedback," "),t.xp6(4),t.s9C("placeholder",o.ts.l.no_feedback_provided),t.s9C("value",null==o.story||null==o.story.feedback?null:o.story.feedback.text),t.xp6(2),t.Q6J("ngIf",o.audioSource&&(null==o.story||null==o.story.feedback?null:o.story.feedback.audioId)),t.xp6(2),t.Q6J("ngIf",null==o.story||null==o.story.feedback?null:o.story.feedback.feedbackMarkup))},dependencies:[I.O5],styles:[".feedbackHeader[_ngcontent-%COMP%]{width:100%;padding-left:20px;padding-right:20px;height:30px;background-color:var(--scealai-green);color:#fff;display:flex;align-items:center}.closeFeedbackBtn[_ngcontent-%COMP%]{margin-left:auto}.closeFeedbackBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.textFieldContainer[_ngcontent-%COMP%]{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px}.textField[_ngcontent-%COMP%]{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px;border:none}.audioPlayer[_ngcontent-%COMP%]{height:30px;width:90%;background-color:#f1f3f4;border:1px solid rgba(140,128,110,.5254901961)}"]}),c})();const qo=["rightDrawer"],Ho=["mySynthesisPlayer"];function $r(c,u){1&c&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function Go(c,u){if(1&c&&(t.TgZ(0,"span",23),t._uU(1),t.qZA()),2&c){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.made_using_prompts," ")}}function be(c,u){if(1&c&&(t.TgZ(0,"div",24),t._uU(1),t._UZ(2,"i",25),t.qZA()),2&c){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.saved," ")}}function Xr(c,u){if(1&c&&(t.TgZ(0,"div",24),t._uU(1),t._UZ(2,"i",26),t.qZA()),2&c){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.saving," ")}}function jt(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"input",18),t.NdJ("ngModelChange",function(a){t.CHM(r);const _=t.oxw();return t.KtG(_.updatedTitle=a)})("blur",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.updateStoryTitle())}),t.qZA(),t.YNc(3,$r,2,0,"span",19),t.YNc(4,Go,2,1,"span",20),t.qZA(),t.TgZ(5,"div",21),t.YNc(6,be,3,1,"div",22),t.YNc(7,Xr,3,1,"div",22),t.qZA()()}if(2&c){const r=t.oxw();t.xp6(2),t.s9C("size",r.updatedTitle.length),t.Q6J("ngStyle",r.titleStyle())("ngModel",r.updatedTitle),t.xp6(1),t.Q6J("ngIf",!r.storySaved),t.xp6(1),t.Q6J("ngIf",null==r.story?null:r.story.createdWithPrompts),t.xp6(2),t.Q6J("ngIf",r.storySaved),t.xp6(1),t.Q6J("ngIf",!r.storySaved)}}function jr(c,u){1&c&&t._UZ(0,"i",35)}function er(c,u){1&c&&t._UZ(0,"i",36)}function Ze(c,u){1&c&&(t.TgZ(0,"span",40),t._uU(1,"speech_to_text"),t.qZA())}function ei(c,u){1&c&&(t.TgZ(0,"button",41),t._UZ(1,"i",42),t.qZA())}function ti(c,u){1&c&&(t.TgZ(0,"div"),t._UZ(1,"div",43),t.qZA())}const ni=function(c){return{disableDiv:c}};function ri(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",37),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(2);return a.dontToggle=!0,t.KtG(a.speakStory())}),t._uU(1),t.YNc(2,Ze,2,0,"span",38),t.YNc(3,ei,2,0,"button",39),t.YNc(4,ti,2,0,"div",19),t.qZA()}if(2&c){const r=t.oxw(2);t.Q6J("ngClass",t.VKq(5,ni,r.isTranscribing)),t.xp6(1),t.hij(" ",r.ts.l.speak," "),t.xp6(1),t.Q6J("ngIf",!r.isRecording),t.xp6(1),t.Q6J("ngIf",r.isRecording&&!r.isTranscribing),t.xp6(1),t.Q6J("ngIf",r.isTranscribing)}}function ii(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",44),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(2);return t.KtG(a.dontToggle=!0)}),t.TgZ(1,"button",45),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(2);return t.KtG(a.downloadStory())}),t._uU(2),t._UZ(3,"i",46),t.qZA()()}if(2&c){const r=t.oxw(2);t.xp6(1),t.s9C("href",r.downloadStoryUrl()),t.xp6(1),t.hij(" ",r.ts.l.download," ")}}function oi(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(2);return a.dontToggle=!0,t.KtG(a.goToRecording())}),t._uU(1),t._UZ(2,"i",48),t.qZA()}if(2&c){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.recordings," ")}}function Ee(c,u){1&c&&(t.TgZ(0,"span",51),t._uU(1,"1"),t.qZA())}function Wo(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(2);return a.dontToggle=!0,t.KtG(a.toggleRightDrawer("feedback"))}),t._uU(1),t._UZ(2,"i",49),t.YNc(3,Ee,2,0,"span",50),t.qZA()}if(2&c){const r=t.oxw(2);t.ekj("optionsBtnClicked",r.rightDrawerOpened&&"feedback"==r.selectedDrawer),t.xp6(1),t.hij(" ",r.ts.l.feedback," "),t.xp6(2),t.Q6J("ngIf",r.hasFeedback&&!r.story.feedback.seenByStudent)}}function Le(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(2);return a.dontToggle=!0,t.KtG(a.synthesisPlayer.toggleHidden())}),t._uU(1),t._UZ(2,"i",52),t.qZA()}if(2&c){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.audio_check," ")}}function Jo(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(2);return a.dontToggle=!0,t.KtG(a.toggleRightDrawer("grammar"))}),t._uU(1),t._UZ(2,"i",53),t.qZA()}if(2&c){const r=t.oxw(2);t.ekj("optionsBtnClicked",r.rightDrawerOpened&&"grammar"==r.selectedDrawer),t.xp6(1),t.hij(" ",r.ts.l.grammar_errors," ")}}function si(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(2);return a.dontToggle=!0,t.KtG(a.toggleRightDrawer("dictionary"))}),t._uU(1),t._UZ(2,"i",54),t.qZA()}if(2&c){const r=t.oxw(2);t.ekj("optionsBtnClicked",r.rightDrawerOpened&&"dictionary"==r.selectedDrawer),t.xp6(1),t.hij(" ",r.ts.l.dictionary," ")}}function ft(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",27),t.NdJ("click",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.toggleOptions())}),t.TgZ(1,"div",28),t.YNc(2,jr,1,0,"i",29),t.YNc(3,er,1,0,"i",30),t.qZA(),t.YNc(4,ri,5,7,"div",31),t.YNc(5,ii,4,2,"div",32),t.YNc(6,oi,3,1,"div",33),t.YNc(7,Wo,4,4,"div",34),t.YNc(8,Le,3,1,"div",33),t.YNc(9,Jo,3,3,"div",34),t.YNc(10,si,3,3,"div",34),t.qZA()}if(2&c){const r=t.oxw();t.xp6(2),t.Q6J("ngIf",!r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions&&r.hasFeedback),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions)}}function Sn(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",55,56)(2,"span",57),t.NdJ("click",function(){t.CHM(r),t.oxw();const a=t.MAs(4);return t.KtG(a.toggle())}),t._uU(3,"menu"),t.qZA(),t.TgZ(4,"quill-editor",58),t.NdJ("ngModelChange",function(a){t.CHM(r);const _=t.oxw();return t.KtG(_.story.htmlText=a)})("onContentChanged",function(a){t.CHM(r);const _=t.oxw();return t.KtG(_.onContentChanged(a))})("onEditorCreated",function(a){t.CHM(r);const _=t.oxw();return t.KtG(_.onEditorCreated(a))}),t.qZA()()}if(2&c){const r=t.oxw();t.Q6J("ngStyle",r.quillEditorStyle),t.xp6(4),t.Q6J("modules",r.quillToolbar)("preserveWhitespace",!0)("debounceTime",1500)("ngModel",r.story.htmlText)}}function tr(c,u){1&c&&(t.TgZ(0,"div"),t._UZ(1,"grid-spinner"),t.qZA())}function fe(c,u){1&c&&(t.TgZ(0,"div",60),t._uU(1," Click on the '+' button to create your first story! "),t.qZA())}function ht(c,u){if(1&c&&(t.YNc(0,tr,2,0,"div",19),t.YNc(1,fe,2,0,"div",59)),2&c){const r=t.oxw();t.Q6J("ngIf",!r.storiesLoaded),t.xp6(1),t.Q6J("ngIf",r.storiesLoaded)}}function nr(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"app-feedback-drawer",61),t.NdJ("closeFeedbackEmitter",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.toggleRightDrawer("feedback"))}),t.qZA()}if(2&c){const r=t.oxw();t.Q6J("story",r.story)}}function Yo(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"app-dictionary-drawer",62),t.NdJ("closeDictionaryEmitter",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.toggleRightDrawer("dictionary"))}),t.qZA()}}function rr(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"app-grammar-error-drawer",63),t.NdJ("closeGrammarEmitter",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.toggleRightDrawer("grammar"))}),t.qZA()}if(2&c){const r=t.oxw();t.Q6J("quillHighlighter",r.quillHighlighter)("grammarLoaded",r.grammarLoaded)("grammarErrorsTypeDict",r.grammarErrorsTypeDict)("grammarErrors",r.grammarErrors)("checkBoxes",r.checkBoxes)}}xt().register("modules/imageCompress",zt());let zo=(()=>{class c{constructor(r,o,a,_,k,N,U,ae,Q){this.ts=r,this.auth=o,this.storyService=a,this.recordAudioService=_,this.engagement=k,this.classroomService=N,this.dialog=U,this.http=ae,this.router=Q,this.stories=[],this.saveStoryDebounceId=0,this.mostRecentAttemptToSaveStory=new Date,this.storySaved=!0,this.storiesLoaded=!1,this.downloadStoryFormat=".pdf",this.hasFeedback=!1,this.updatedTitle="",this.grammarLoaded=!1,this.grammarErrors=[],this.showErrorTags=!1,this.grammarCheckerOptions={anGramadoir:ho,relativeClause:_o,broadSlender:so},this.checkBoxes={},this.grammarErrorsTypeDict={},this.showOptions=!0,this.dontToggle=!1,this.rightDrawerOpened=!1,this.selectedDrawer="grammar",this.words=[],this.wordCount=0,this.textUpdated=new ot.x,this.quillToolbar={toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"],["image"]],imageCompress:{quality:.7,maxWidth:500,maxHeight:500,imageType:"image/png",debug:!1,suppressErrorLogging:!1,insertIntoEditor:void 0}},this.isRecording=!1,this.isTranscribing=!1,this.setUpGrammarChecking()}ngOnInit(){return(0,y.Z)(function*(){})()}setUpGrammarChecking(){var r=this;return(0,y.Z)(function*(){const o=r.auth.getUserDetails();if(!o)return;let a=yield(0,ue.z)(r.classroomService.getClassroomOfStudent(o._id)),_=[];a&&a.grammarCheckers&&a.grammarCheckers.length>0?a.grammarCheckers.forEach(k=>{r.grammarCheckerOptions[k]&&_.push(r.grammarCheckerOptions[k])}):_=Object.values(r.grammarCheckerOptions),r.grammarEngine=new Nn(_,r.http,r.auth),r.textUpdated.pipe((0,Tr.x)()).subscribe((0,y.Z)(function*(){r.runGrammarCheck()}))})()}runGrammarCheck(){if(this.grammarLoaded=!1,this.story.text.replace(/\n/g," "))try{this.grammarErrors=[],this.grammarEngine.check$(this.story.text).subscribe({next:o=>{this.grammarErrors.push(o),this.showErrorTags&&this.quillHighlighter.show([(0,pe.j)(o)])},error:function(){},complete:()=>{if(this.quillHighlighter){this.grammarErrors&&this.grammarEngine.saveErrorsWithSentences(this.story._id).then(console.log,console.error),this.grammarErrorsTypeDict=this.grammarErrors.reduce(function(o,a){return o[a.type]||(o[a.type]=[]),o[a.type].push(a),o},{});for(const o of Object.keys(this.grammarErrorsTypeDict))this.checkBoxes[o]=!0;this.quillHighlighter.hideAll(),this.showErrorTags&&this.quillHighlighter.show(this.grammarErrors.filter(o=>this.checkBoxes[o.type]).map(pe.j)),this.grammarLoaded=!0}}})}catch(o){this.grammarErrors||window.alert("There was an error while trying to fetch grammar suggestions from the Gramad\xf3ir server:\n"+o.message+"\nSee the browser console for more information"),console.dir(o)}}toggleRightDrawer(r){this.rightDrawerOpened?this.selectedDrawer===r&&(this.rightDrawer.close(),this.rightDrawerOpened=!1):(this.rightDrawer.open(),this.rightDrawerOpened=!0),this.selectedDrawer=r,"grammar"==this.selectedDrawer&&this.rightDrawerOpened?(this.showErrorTags=!0,this.runGrammarCheck(),this.toggleGrammarTags()):(this.showErrorTags=!1,this.toggleGrammarTags())}setCurrentStory(r){this.story=r,this.story&&(this.storySaved=!0,this.updatedTitle=this.story.title,this.getWordCount(this.story.text),this.textUpdated.next(r.text))}onContentChanged(r){"user"===(this.story.text=r.text,this.getWordCount(r.text),r.source)&&(this.storySaved=!1,this.textUpdated.next(r.text),this.debounceSaveStory())}onEditorCreated(r){r.history.options.userOnly=!0,this.quillEditor=r,this.quillEditor.root.setAttribute("spellcheck","false"),r.focus(),this.quillHighlighter=new qn(this.quillEditor,this.ts,this.engagement)}getWordCount(r){if(!r)return 0;const o=r.replace(/[\t\n\r\.\?\!]/gm," ").split(" ");this.words=[],o.map(a=>{const _=a.trim();_.length>0&&this.words.push(_)}),this.wordCount=this.words.length}debounceSaveStory(){this.saveStoryDebounceId++;const r=this.saveStoryDebounceId,o=new Date;setTimeout(()=>{r===this.saveStoryDebounceId&&this.saveStory(r,o)},1e3)}saveStory(r,o){var a=this;return(0,y.Z)(function*(){const _=new Date;if(a.mostRecentAttemptToSaveStory=_,!a.story._id)return window.alert("Cannot save story. The id is not known");const k=a.stripGramadoirAttributesFromHtml((0,Qt.clone)(a.story.htmlText)),N={title:a.story.title,dialect:a.story.dialect,text:a.story.text,htmlText:k,lastUpdated:o};a.engagement.addEventForLoggedInUser(F.tw["SAVE-STORY"],a.story);try{yield(0,ue.z)(a.storyService.updateStory(N,a.story._id)),(r===a.saveStoryDebounceId||"modal"===r)&&(a.storySaved=!0)}catch(U){throw window.alert("Error while trying to save story: "+U.message),U}try{_===a.mostRecentAttemptToSaveStory&&(a.storySaved=!0)}catch(U){throw window.alert("Error setting storySaved to true: "+U.message),U}})()}stripGramadoirAttributesFromHtml(r){return r&&r.replace?r.replace(/\s*style="([^"])+"/g,"").replace(/\s*highlight-tag-type="([^"])+"/g,"").replace(/\s*highlight-tag="([^"])+"/g,""):""}toggleOptions(){this.dontToggle||(this.showOptions=!this.showOptions),this.dontToggle=!1}titleStyle(){return{"font-style":this.storySaved?"normal":"italic"}}updateStoryTitle(){this.updatedTitle!=this.story.title&&(this.storySaved=!1,this.story.title=this.updatedTitle,this.storyService.updateTitle(this.story._id,this.story.title).subscribe({next:()=>{this.storySaved=!0,console.log("title updated")},error:()=>console.log("error updating title")}))}downloadStory(){this.dialogRef=this.dialog.open(A.p,{data:{title:this.ts.l.download,type:"select",data:[this.story.title,[".pdf",".docx",".txt",".odt"]],confirmText:this.ts.l.download,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(r=>{this.dialogRef=void 0,r&&(this.downloadStoryFormat=r[1]?r[1]:".pdf",this.http.get(this.downloadStoryUrl(),{responseType:"blob"}).subscribe(o=>{const a=window.document.createElement("a");a.href=window.URL.createObjectURL(o),a.download=r[0]?r[0]:this.story.title,document.body.appendChild(a),a.click(),document.body.removeChild(a)}))})}downloadStoryUrl(){return Rt.Z.baseurl+"story/downloadStory/"+this.story._id+"/"+this.downloadStoryFormat}toggleGrammarTags(){var r=this;return(0,y.Z)(function*(){r.showErrorTags?r.quillHighlighter.show(r.grammarErrors.filter(o=>r.checkBoxes[o.type]).map(pe.j)):r.quillHighlighter.hideAll()})()}goToRecording(){this.router.navigateByUrl("/student/record-story/"+this.story._id)}speakStory(){var r=this;return(0,y.Z)(function*(){if(r.isRecording){r.isTranscribing=!0,r.recordAudioService.stopRecording();let o=yield r.recordAudioService.getAudioTranscription();if(r.isTranscribing=!1,o){let a=r.quillEditor.getSelection(!0);r.quillEditor.insertText(a.index,o+"."),r.story.text=r.quillEditor.getText(),r.story.htmlText=r.quillEditor.root.innerHTML,r.getWordCount(o),r.storySaved=!1,r.debounceSaveStory()}}else r.recordAudioService.recordAudio();r.isRecording=!r.isRecording})()}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(D.D),t.Y36(R.$),t.Y36(w.N),t.Y36(dn.r),t.Y36(W.M),t.Y36(H.u),t.Y36(p.uw),t.Y36(Fr.eN),t.Y36(d.F0))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-dashboard"]],viewQuery:function(r,o){if(1&r&&(t.Gf(qo,5),t.Gf(Ho,5)),2&r){let a;t.iGM(a=t.CRH())&&(o.rightDrawer=a.first),t.iGM(a=t.CRH())&&(o.synthesisPlayer=a.first)}},decls:18,vars:11,consts:[["class","storyTitleHeader",4,"ngIf"],["class","optionsBtnContainer",3,"click",4,"ngIf"],["autosize","",1,"bodyContainer"],["mode","side",1,"storyListDrawer",3,"opened"],["storyDrawer",""],[3,"storyEmitter","hasFeedback","titleUpdated","storiesLoaded"],[1,"storyContainer"],["class","ql-container",3,"ngStyle",4,"ngIf","ngIfElse"],["newStoryMessage",""],["mode","side","position","end",1,"rightDrawer"],["rightDrawer",""],[3,"story","closeFeedbackEmitter",4,"ngIf"],[3,"closeDictionaryEmitter",4,"ngIf"],[3,"quillHighlighter","grammarLoaded","grammarErrorsTypeDict","grammarErrors","checkBoxes","closeGrammarEmitter",4,"ngIf"],[3,"text","storyId","storyTitle"],["mySynthesisPlayer",""],[1,"storyTitleHeader"],[1,"storyTitleContainer"],[1,"storyTitle",3,"ngStyle","size","ngModel","ngModelChange","blur"],[4,"ngIf"],["style","color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"saveIcon"],["class","savedIcon",4,"ngIf"],[2,"color","rgba(0, 0, 0, 0.4)"],[1,"savedIcon"],[1,"fas","fa-check"],[1,"fas","fa-save"],[1,"optionsBtnContainer",3,"click"],[1,"optionsBtn"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-right",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"ngClass","click",4,"ngIf"],["style","display: flex",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"optionsBtnClicked","click",4,"ngIf"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-right"],[1,"optionsBtn","optionsPopupBtn",3,"ngClass","click"],["class","material-symbols-outlined optionsBtnIcon",4,"ngIf"],["class","notRecordingBtn blink",4,"ngIf"],[1,"material-symbols-outlined","optionsBtnIcon"],[1,"notRecordingBtn","blink"],[1,"fas","fa-stop-circle"],[1,"dot-flashing"],[2,"display","flex",3,"click"],["target","_blank",1,"optionsBtn","optionsPopupBtn",2,"text-decoration","none",3,"href","click"],[1,"fas","fa-download","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"click"],[1,"fas","fa-microphone","optionsBtnIcon"],[1,"fas","fa-comment-dots","optionsBtnIcon"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"],[1,"fas","fa-volume-up","optionsBtnIcon"],[1,"fas","fa-spell-check","optionsBtnIcon"],[1,"fas","fa-book","optionsBtnIcon"],[1,"ql-container",3,"ngStyle"],["quillHeightSpan",""],[1,"menuButton","material-symbols-outlined",3,"click"],["placeholder","",3,"modules","preserveWhitespace","debounceTime","ngModel","ngModelChange","onContentChanged","onEditorCreated"],["class","newStoryMessage",4,"ngIf"],[1,"newStoryMessage"],[3,"story","closeFeedbackEmitter"],[3,"closeDictionaryEmitter"],[3,"quillHighlighter","grammarLoaded","grammarErrorsTypeDict","grammarErrors","checkBoxes","closeGrammarEmitter"]],template:function(r,o){if(1&r&&(t.YNc(0,jt,8,7,"div",0),t.YNc(1,ft,11,9,"div",1),t.TgZ(2,"mat-drawer-container",2)(3,"mat-drawer",3,4)(5,"app-story-drawer",5,4),t.NdJ("storyEmitter",function(_){return o.setCurrentStory(_)})("hasFeedback",function(_){return o.hasFeedback=_})("titleUpdated",function(_){return o.updatedTitle=_})("storiesLoaded",function(_){return o.storiesLoaded=_}),t.qZA()(),t.TgZ(7,"div",6),t.YNc(8,Sn,5,5,"div",7),t.YNc(9,ht,2,2,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(11,"mat-drawer",9,10),t.YNc(13,nr,1,1,"app-feedback-drawer",11),t.YNc(14,Yo,1,0,"app-dictionary-drawer",12),t.YNc(15,rr,1,5,"app-grammar-error-drawer",13),t.qZA()(),t._UZ(16,"app-synthesis-player",14,15)),2&r){const a=t.MAs(10);t.Q6J("ngIf",o.story),t.xp6(1),t.Q6J("ngIf",o.story),t.xp6(2),t.Q6J("opened",!o.story&&o.storiesLoaded),t.xp6(5),t.Q6J("ngIf",o.story)("ngIfElse",a),t.xp6(5),t.Q6J("ngIf","feedback"==o.selectedDrawer),t.xp6(1),t.Q6J("ngIf","dictionary"==o.selectedDrawer),t.xp6(1),t.Q6J("ngIf","grammar"==o.selectedDrawer),t.xp6(1),t.Q6J("text",null==o.story?null:o.story.text)("storyId",null==o.story?null:o.story._id)("storyTitle",null==o.story?null:o.story.title)}},dependencies:[I.mk,I.O5,I.PC,_e.Fj,_e.JJ,_e.On,vt.P,Xn,xn,Kr.g6,$t,jn,Fo,Zo,Uo],styles:['.storyTitleHeader{display:flex;justify-content:center;margin-top:-30px;padding-bottom:20px}.storyTitleContainer{margin:auto;overflow:auto;font-size:20px;font-weight:bolder}.storyTitle{border:1px solid transparent;text-align:center;resize:none}.storyTitle:hover{border:1px solid;border-radius:5px}.saveIcon{align-self:flex-end;white-space:nowrap;color:var(--dark-text);border-style:none;font-size:11pt;padding:5px}.savedIcon{color:var(--scealai-light-brown)}.optionsBtnContainer>*{height:2rem}.optionsBtnContainer{display:flex;justify-content:space-between;flex-wrap:wrap;--options-btn-background-color-hover: lightgray;margin-left:2%;margin-right:2%}.optionsBtn{background-color:var(--scealai-yellow);border-style:none;color:#464444;margin:0;border-radius:2px;display:flex;align-items:center;padding:5px;background:rgba(223,217,200,0)}.optionsBtn:hover{background-color:var(--options-btn-background-color-hover);color:#35322f;cursor:pointer;border-radius:2}.optionsPopupBtn{margin-right:4px}.optionsBtnIcon{margin-left:5px}.optionsBtnClicked{background-color:var(--options-btn-background-color-hover);color:#35322f;border-radius:2}.notRecordingBtn{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.bodyContainer{width:100%;height:100%}.storyListDrawer{padding:40px;max-width:35%;height:100%}.storyContainer{height:100%}.ql-container{background-color:#f8f9fa;height:100%}.ql-editor{background-color:#fff;z-index:1;margin-top:20px;font-size:14pt;font-family:Times New Roman,Times,serif;min-height:70vh!important;max-height:70vh!important}.menuButton{float:left;padding-left:10px;padding-top:7px;transform:scale(1.5);z-index:100}.menuButton:hover{cursor:pointer}.material-symbols-outlined{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 48}.newStoryMessage{font-weight:bolder;max-width:200px;padding-top:50px;padding-bottom:50px;height:80vh;width:100%}.rightDrawer{width:25%;height:100%}.blink{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}\n',".custom-tooltip:before{content:none!important}.circle{display:inline-block;width:12px;height:12px;border-radius:6px}[data-selected]{margin:.3em}[highlight-tag]{text-decoration:underline;text-decoration-color:var(--highlight-error-red);text-decoration-thickness:3px;position:relative}span[highlight-tag]:hover{cursor:pointer}span:not[highlight-tag-type]{border-radius:0;padding-left:0;padding-right:0}\n",'.ql-editor{overflow-y:auto}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=times-new-roman]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=times-new-roman]:before{content:"Times New Roman";font-family:Times New Roman}.ql-font-times-new-roman{font-family:times new roman}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=arial]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=arial]:before{content:"Arial";font-family:arial}.ql-font-arial{font-family:arial}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=sans-serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=sans-serif]:before{content:"Sans Serif";font-family:"sans serif"}.ql-font-sans-serif{font-family:"sans serif"}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{content:"Monospace";font-family:"monospace"}.ql-font-monospace{font-family:"monospace"}\n'],encapsulation:2}),c})(),ai=(()=>{class c{constructor(r){this.sanitizer=r}transform(r){return this.sanitizer.bypassSecurityTrustHtml(r)}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(Cn.H7,16))},c.\u0275pipe=t.Yjl({name:"safeHtml",type:c,pure:!0}),c})();function Qo(c,u){if(1&c&&(t.TgZ(0,"div",14)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&c){const r=t.oxw();t.xp6(2),t.Oqu(r.ts.l.synthesising)}}function ci(c,u){1&c&&(t._UZ(0,"span",18),t.ALo(1,"safeHtml")),2&c&&t.Q6J("innerHTML",t.lcZ(1,1,u.$implicit.outerHTML),t.oJD)}function Tn(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(r);const a=t.oxw().$implicit,_=t.oxw(2);return t.KtG(_.stopSection(a))}),t._UZ(1,"i",20),t.qZA()}}function Lt(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(r);const a=t.oxw().$implicit,_=t.oxw(2);return t.KtG(_.playSection(a))}),t._UZ(1,"i",21),t.qZA()}}function Ko(c,u){if(1&c&&(t.TgZ(0,"div",2),t.YNc(1,ci,2,3,"span",16),t.YNc(2,Tn,2,0,"button",17),t.YNc(3,Lt,2,0,"button",17),t.qZA()),2&c){const r=u.$implicit;t.xp6(1),t.Q6J("ngForOf",r.spans),t.xp6(1),t.Q6J("ngIf",!r.audio.paused),t.xp6(1),t.Q6J("ngIf",r.audio.paused)}}function ui(c,u){if(1&c&&(t.TgZ(0,"div"),t.YNc(1,Ko,4,3,"div",15),t.qZA()),2&c){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.chosenSections)}}function li(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div")(1,"button",24),t._uU(2),t.qZA(),t.TgZ(3,"button",25),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(2);return t.KtG(a.changeSections(a.sentences))}),t._uU(4),t.qZA()()}if(2&c){const r=t.oxw(2);t.xp6(2),t.Oqu(r.ts.l.paragraph),t.xp6(2),t.Oqu(r.ts.l.sentence)}}function ir(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div")(1,"button",25),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(2);return t.KtG(a.changeSections(a.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",24),t._uU(4),t.qZA()()}if(2&c){const r=t.oxw(2);t.xp6(2),t.Oqu(r.ts.l.paragraph),t.xp6(2),t.Oqu(r.ts.l.sentence)}}function or(c,u){if(1&c&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t.qZA(),t.YNc(3,li,5,2,"div",11),t.YNc(4,ir,5,2,"div",11),t.qZA()),2&c){const r=t.oxw();t.xp6(2),t.hij(" ",r.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",r.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",r.isSentenceMode())}}let di=(()=>{class c{constructor(r,o,a,_,k){this.storyService=r,this.route=o,this.router=a,this.ts=_,this.synthesis=k,this.paragraphs=[],this.sentences=[],this.audioFinishedLoading=!1}ngOnInit(){var r=this;return(0,y.Z)(function*(){r.storyId=r.route.snapshot.paramMap.get("id");let o=yield(0,ue.z)(r.storyService.getStory(r.storyId));r.synthesis.synthesiseStory(o).then(([a,_])=>{r.paragraphs=a,r.sentences=_,r.chosenSections=r.paragraphs,r.audioFinishedLoading=!0})})()}isSentenceMode(){return this.chosenSections[0]instanceof Oe.cj}isParagraphMode(){return this.chosenSections[0]instanceof Oe.nv}changeSections(r){this.chosenSections=r,this.paragraphs.concat(this.sentences).forEach(a=>this.stopSection(a))}playSection(r){r.play(),r.highlight()}stopSection(r){r.stop(),r.removeHighlight()}goToDashboard(){this.router.navigateByUrl("/student/dashboard/"+this.storyId)}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(w.N),t.Y36(d.gz),t.Y36(d.F0),t.Y36(D.D),t.Y36(Oe.cf))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-synthesis"]],decls:18,vars:5,consts:[["src","assets/img/book.png",1,"bookImg"],[1,"page"],[1,"paragraphContainer"],[1,"bookContainerSynth"],[1,"bookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"storyContainer"],[1,"storyHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[4,"ngIf"],[1,"footer"],["class","btnContainer",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"btnContainer"],[1,"footerText"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"]],template:function(r,o){1&r&&(t._UZ(0,"img",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t.NdJ("click",function(){return o.goToDashboard()}),t._UZ(6,"i",6),t._uU(7),t.qZA(),t._UZ(8,"div"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8),t._uU(11),t.qZA(),t.TgZ(12,"div")(13,"div",9),t.YNc(14,Qo,4,1,"div",10),t.YNc(15,ui,2,1,"div",11),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,or,5,3,"div",13),t.qZA()()()()()),2&r&&(t.xp6(7),t.hij(" ",o.ts.l.story,""),t.xp6(4),t.hij(" ",o.ts.l.listen_and_correct," "),t.xp6(3),t.Q6J("ngIf",!o.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",o.audioFinishedLoading),t.xp6(2),t.Q6J("ngIf",o.audioFinishedLoading))},dependencies:[I.sg,I.O5,vt.P,ai],styles:['.bookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:var(--dark-text);width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.storyContainer[_ngcontent-%COMP%]{margin-top:10px}.storyHeader[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]:hover, .selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),c})();class Vo{constructor(u,r=[],o=[],a=[],_=[],k=[],N=[]){this.paragraphAudioIds=r,this.paragraphIndices=o,this.paragraphTranscriptions=a,this.sentenceAudioIds=_,this.sentenceIndices=k,this.sentenceTranscriptions=N,this.storyData=u,this.date=new Date,this.archived=!1}}var sr=T(2754);function ar(c,u){1&c&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function $o(c,u){if(1&c&&(t.TgZ(0,"div",16),t._uU(1),t._UZ(2,"i",17),t.qZA()),2&c){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.saved," ")}}function fi(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(2);return t.KtG(a.saveRecordings())}),t._uU(1),t._UZ(2,"i",19),t.qZA()}if(2&c){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.save," ")}}function Ie(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t.NdJ("click",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.goToDashboard())}),t._UZ(2,"i",10),t._uU(3),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.YNc(6,ar,2,0,"span",12),t.qZA(),t.TgZ(7,"div",13),t.YNc(8,$o,3,1,"div",14),t.YNc(9,fi,3,1,"div",15),t.qZA()()}if(2&c){const r=t.oxw();t.xp6(3),t.hij(" ",r.ts.l.story," "),t.xp6(2),t.hij(" ",null==r.story?null:r.story.title,""),t.xp6(1),t.Q6J("ngIf",!r.recordingSaved),t.xp6(2),t.Q6J("ngIf",r.recordingSaved),t.xp6(1),t.Q6J("ngIf",!r.recordingSaved)}}function cr(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){t.CHM(r),t.oxw();const a=t.MAs(5);return t.KtG(a.toggle())}),t.TgZ(1,"mat-icon"),t._uU(2,"menu"),t.qZA(),t._uU(3),t.qZA()}if(2&c){const r=t.oxw();t.xp6(3),t.hij(" ",r.ts.l.archive," ")}}const en=function(c){return{"font-style":c}};function hi(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div")(1,"div",21),t.NdJ("click",function(){const _=t.CHM(r).$implicit,k=t.oxw();return t.KtG(k.setCurrentRecording(_))}),t.TgZ(2,"div",22)(3,"div",23),t._uU(4),t.qZA()(),t.TgZ(5,"div",24),t._uU(6),t.ALo(7,"date"),t.qZA()(),t._UZ(8,"hr"),t.qZA()}if(2&c){const r=u.$implicit;t.xp6(1),t.uIk("id",r._id),t.xp6(2),t.Q6J("ngStyle",t.VKq(7,en,r.archived?"none":"italic")),t.xp6(1),t.hij(" ",null==r||null==r.storyData?null:r.storyData.title,""),t.xp6(2),t.hij(" ",t.xi3(7,4,r.date,"d/M/yy, h:mm a")," ")}}function pi(c,u){if(1&c&&(t.TgZ(0,"div",30)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&c){const r=t.oxw(2);t.xp6(2),t.Oqu(r.ts.l.synthesising)}}function Xo(c,u){1&c&&(t._UZ(0,"span",42),t.ALo(1,"safeHtml")),2&c&&t.Q6J("innerHTML",t.lcZ(1,1,u.$implicit.outerHTML),t.oJD)}function jo(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(r);const a=t.oxw().$implicit,_=t.oxw(3);return t.KtG(_.stopSection(a))}),t._UZ(1,"i",44),t.qZA()}}function es(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(r);const a=t.oxw().$implicit,_=t.oxw(3);return t.KtG(_.playSection(a))}),t._UZ(1,"i",45),t.qZA()}}function ts(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(r);const a=t.oxw().index,_=t.oxw(3);return t.KtG(_.recordAudio(a))}),t._UZ(1,"i",47),t.qZA()}}function ns(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(r);const a=t.oxw().index,_=t.oxw(3);return t.KtG(_.stopRecording(a))}),t._UZ(1,"i",49),t.qZA()}}function Nt(c,u){1&c&&t._UZ(0,"hr",50)}function rs(c,u){1&c&&(t.TgZ(0,"div",51),t._UZ(1,"div",52),t.qZA())}function is(c,u){if(1&c&&(t.TgZ(0,"div",53)(1,"span",54),t._uU(2),t.qZA(),t.TgZ(3,"span",55),t._uU(4),t.qZA()()),2&c){const r=t.oxw().index,o=t.oxw(3);t.xp6(2),t.hij("",o.ts.l.speech_recognition_output," "),t.xp6(2),t.Oqu(o.sectionTranscriptions[r])}}function ur(c,u){if(1&c&&t._UZ(0,"audio",59,60),2&c){const r=t.oxw(2).index,o=t.oxw(3);t.uIk("src",o.sectionAudioSources[r],t.LSH)}}function gi(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(2).index,_=t.oxw(3);return t.KtG(_.deleteRecording(a))}),t._UZ(1,"i",62),t.qZA()}}function pt(c,u){if(1&c&&(t.TgZ(0,"div",56)(1,"div",54),t._uU(2),t.qZA(),t.YNc(3,ur,2,1,"audio",57),t.YNc(4,gi,2,0,"button",58),t.qZA()),2&c){const r=t.oxw().index,o=t.oxw(3);t.xp6(2),t.Oqu(o.ts.l.your_recording),t.xp6(1),t.Q6J("ngIf",o.sectionAudioSources[r]),t.xp6(1),t.Q6J("ngIf",o.sectionAudioSources[r]&&!o.currentRecording.archived)}}function Mn(c,u){if(1&c&&(t.TgZ(0,"div",32)(1,"div",33)(2,"div"),t.YNc(3,Xo,2,3,"span",34),t.YNc(4,jo,2,0,"button",35),t.YNc(5,es,2,0,"button",35),t.YNc(6,ts,2,0,"button",36),t.YNc(7,ns,2,0,"button",37),t.qZA(),t.YNc(8,Nt,1,0,"hr",38),t.YNc(9,rs,2,0,"div",39),t.YNc(10,is,5,2,"div",40),t.YNc(11,pt,5,3,"div",41),t.qZA()()),2&c){const r=u.$implicit,o=u.index,a=t.oxw(3);t.xp6(3),t.Q6J("ngForOf",r.spans),t.xp6(1),t.Q6J("ngIf",!r.audio.paused),t.xp6(1),t.Q6J("ngIf",r.audio.paused),t.xp6(1),t.Q6J("ngIf",!a.isRecording(r,o)&&!a.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",a.isRecording(r,o)&&!a.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",a.sectionAudioSources[o]),t.xp6(1),t.Q6J("ngIf",a.isTranscribing[o]),t.xp6(1),t.Q6J("ngIf",a.sectionTranscriptions[o]),t.xp6(1),t.Q6J("ngIf",a.sectionAudioSources[o])}}function os(c,u){if(1&c&&(t.TgZ(0,"div"),t.YNc(1,Mn,12,9,"div",31),t.qZA()),2&c){const r=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",r.chosenSections)}}function ss(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div")(1,"button",67),t._uU(2),t.qZA(),t.TgZ(3,"button",68),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(3);return t.KtG(a.changeSections(a.sentences))}),t._uU(4),t.qZA()()}if(2&c){const r=t.oxw(3);t.xp6(2),t.hij(" ",r.ts.l.paragraph," "),t.xp6(2),t.hij(" ",r.ts.l.sentence," ")}}function as(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"div")(1,"button",68),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(3);return t.KtG(a.changeSections(a.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",67),t._uU(4),t.qZA()()}if(2&c){const r=t.oxw(3);t.xp6(2),t.hij(" ",r.ts.l.paragraph," "),t.xp6(2),t.hij(" ",r.ts.l.sentence," ")}}function Ut(c,u){if(1&c){const r=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(r);const a=t.oxw(3);return t.KtG(a.archiveRecording())}),t._uU(1),t.qZA()}if(2&c){const r=t.oxw(3);t.xp6(1),t.hij(" ",r.ts.l.archive_recording," ")}}function Je(c,u){if(1&c&&(t.TgZ(0,"div",63)(1,"div",64)(2,"div",65),t._uU(3),t.qZA(),t.YNc(4,ss,5,2,"div",12),t.YNc(5,as,5,2,"div",12),t.YNc(6,Ut,2,1,"button",66),t.qZA()()),2&c){const r=t.oxw(2);t.xp6(3),t.hij(" ",r.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",r.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",r.isSentenceMode()),t.xp6(1),t.Q6J("ngIf",!r.currentRecording.archived&&r.currentRecording.storyData.text!=r.story.text)}}function _i(c,u){if(1&c&&(t.TgZ(0,"div",25)(1,"div",26),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t.YNc(4,pi,4,1,"div",28),t.YNc(5,os,2,1,"div",12),t.qZA(),t.YNc(6,Je,7,4,"div",29),t.qZA()),2&c){const r=t.oxw();t.xp6(2),t.hij(" ",r.ts.l.listen_record_compare," "),t.xp6(2),t.Q6J("ngIf",!r.audioFinishedLoading&&!r.recordingsFinishedLoading),t.xp6(1),t.Q6J("ngIf",r.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",r.audioFinishedLoading)}}const us=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"contents",component:to,canActivate:[x.P]},{path:"dashboard",component:zo,canActivate:[x.P],canDeactivate:[g]},{path:"synthesis/:id",component:di,canActivate:[x.P],canDeactivate:[S]},{path:"record-story/:id",component:(()=>{class c{constructor(r,o,a,_,k,N,U,ae,Q){this.storyService=r,this.ts=o,this.sanitizer=a,this.route=_,this.router=k,this.recordingService=N,this.synthesis=U,this.engagement=ae,this.dialog=Q,this.story=new C,this.paragraphs=[],this.sentences=[],this.isRecordingParagraph=[],this.isRecordingSentence=[],this.isRecordingSection=[],this.paragraphAudioSources=[],this.sentenceAudioSources=[],this.sectionAudioSources=[],this.paragraphBlobs=[],this.sentenceBlobs=[],this.sectionBlobs=[],this.paragraphChunks=[],this.sentenceChunks=[],this.sectionChunks=[],this.recordingSaved=!0,this.audioFinishedLoading=!1,this.url_ASR_API="https://phoneticsrv3.lcs.tcd.ie/asr_api/recognise",this.sentenceTranscriptions=[],this.paragraphTranscriptions=[],this.sectionTranscriptions=[],this.isTranscribing=[!1],this.recordings=[],this.currentRecording=null,this.lastClickedRecordingId=""}ngOnInit(){var r=this;return(0,y.Z)(function*(){r.chunks=[],r.sectionAudioSources=r.paragraphAudioSources,r.sectionBlobs=r.paragraphBlobs,r.sectionChunks=r.paragraphChunks,r.sectionTranscriptions=r.paragraphTranscriptions,r.isRecordingSection=r.isRecordingParagraph;const o=r.route.snapshot.paramMap.get("id");r.story=yield(0,ue.z)(r.storyService.getStory(o)),(0,sr.TD)({audio:!0,video:!1}).then((0,y.Z)(function*(){r.story.activeRecording?r.loadRecordings():r.createNewRecording()})).catch(a=>{r.openMicRequestDialog()})})()}loadRecordings(){var r=this;return(0,y.Z)(function*(){r.recordings=yield(0,ue.z)(r.recordingService.getRecordings(r.story._id)),r.recordings.sort((a,_)=>a.date>_.date?-1:1);let o=r.recordings.filter(a=>!1===a.archived);r.setCurrentRecording(o[0])})()}setCurrentRecording(r){this.currentRecording=r,this.loadSynthesis(this.currentRecording.storyData),this.loadAudio(this.currentRecording);let o=this.currentRecording._id,a=document.getElementById(o);a&&(this.lastClickedRecordingId&&document.getElementById(this.lastClickedRecordingId).classList.remove("clickedresultCard"),this.lastClickedRecordingId=o,a.classList.add("clickedresultCard"))}createNewRecording(){var r=this;return(0,y.Z)(function*(){const o=yield(0,ue.z)(r.recordingService.create(new Vo(r.story)));r.story=yield(0,ue.z)(r.storyService.updateActiveRecording(r.story._id,o._id)),r.loadRecordings()})()}archiveRecording(){var r=this;return(0,y.Z)(function*(){yield(0,ue.z)(r.recordingService.updateArchiveStatus(r.currentRecording._id)),r.createNewRecording()})()}loadSynthesis(r){this.synthesis.synthesiseStory(r).then(([o,a])=>{this.paragraphs=o,this.sentences=a,this.chosenSections=this.paragraphs,this.audioFinishedLoading=!0})}loadAudio(r){var o=this;return(0,y.Z)(function*(){o.audioFinishedLoading=!1,o.paragraphAudioSources=[],o.paragraphTranscriptions=[],o.sentenceAudioSources=[],o.sentenceTranscriptions=[],o.sectionAudioSources=[],o.sectionTranscriptions=[];for(let a=0;a<r.paragraphIndices.length;++a){let _=yield(0,ue.z)(o.recordingService.getAudio(r.paragraphAudioIds[a]));o.paragraphBlobs[a]=_,o.paragraphAudioSources[r.paragraphIndices[a]]=o.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(_)),o.paragraphTranscriptions[r.paragraphIndices[a]]=r.paragraphTranscriptions[r.paragraphIndices[a]]}for(let a=0;a<r.sentenceIndices.length;++a){let _=yield(0,ue.z)(o.recordingService.getAudio(r.sentenceAudioIds[a]));o.sentenceBlobs[a]=_,o.sentenceAudioSources[r.sentenceIndices[a]]=o.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(_)),o.sentenceTranscriptions[r.sentenceIndices[a]]=r.sentenceTranscriptions[r.sentenceIndices[a]]}o.sectionTranscriptions=o.paragraphTranscriptions,o.sectionAudioSources=o.paragraphAudioSources})()}recordAudio(r){this.engagement.addEventForLoggedInUser(F.tw["RECORD-STORY"],this.story),navigator.mediaDevices.getUserMedia({audio:!0}).then(a=>{this.stream=a,this.recorder=new MediaRecorder(this.stream),this.sectionChunks[r]=[],this.recorder.start(),this.isRecordingSection[r]=!0,this.recorder.ondataavailable=_=>{this.sectionChunks[r].push(_.data)}}).catch()}stopRecording(r){this.recorder.stop(),this.isRecordingSection[r]=!1,this.stream.getTracks().forEach(o=>o.stop()),setTimeout(()=>{const o=new Blob(this.sectionChunks[r],{type:"audio/mp3"});this.sectionBlobs[r]=o,this.sectionAudioSources[r]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(o)),this.recordingSaved=!1;const a=new FileReader;a.readAsDataURL(o),a.onloadend=function(){let _=a.result.split(";base64,")[1];this.getTranscription(_,r)}.bind(this)},500)}getTranscription(r,o){this.isTranscribing[o]=!0,this.isParagraphMode()&&(this.paragraphTranscriptions[o]=null),this.isSentenceMode()&&(this.sentenceTranscriptions[o]=null),fetch(this.url_ASR_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({recogniseBlob:r,developer:!0})}).then(_=>_.json()).then(_=>{let k=_.transcriptions[0].utterance;this.isParagraphMode()?(this.paragraphTranscriptions[o]=k,this.sectionTranscriptions[o]=this.paragraphTranscriptions[o]):this.isSentenceMode()&&(this.sentenceTranscriptions[o]=k,this.sectionTranscriptions[o]=this.sentenceTranscriptions[o]),this.isTranscribing[o]=!1})}deleteRecording(r){this.recordingSaved=!1,delete this.sectionAudioSources[r],delete this.sectionChunks[r],delete this.sectionBlobs[r],delete this.sectionTranscriptions[r]}saveRecordings(){var r=this;return(0,y.Z)(function*(){const o=Object.entries(r.paragraphBlobs).map(function(){var Me=(0,y.Z)(function*([Pe,Ye]){return r.recordingService.saveAudio(r.story._id,Ye,Pe).toPromise()});return function(Pe){return Me.apply(this,arguments)}}()),a=Object.entries(r.sentenceBlobs).map(function(){var Me=(0,y.Z)(function*([Pe,Ye]){return r.recordingService.saveAudio(r.story._id,Ye,Pe).toPromise()});return function(Pe){return Me.apply(this,arguments)}}()),_=yield Promise.all(o),k=yield Promise.all(a);let N=[],U=[];for(const Me of _)N.push(Me.index),U.push(Me.fileId);let ae=[],Q=[];for(const Me of k)ae.push(Me.index),Q.push(Me.fileId);const ne={paragraphAudioIds:U,paragraphIndices:N,paragraphTranscriptions:r.paragraphTranscriptions,sentenceIndices:ae,sentenceAudioIds:Q,sentenceTranscriptions:r.sentenceTranscriptions};let me=yield(0,ue.z)(r.recordingService.update(r.story.activeRecording,ne));if(me){r.recordingSaved=!0;const Me=r.recordings.indexOf(r.currentRecording);r.recordings.splice(Me,1,me)}else alert("Error while saving audio")})()}isRecording(r,o){return r instanceof Oe.cj?this.isRecordingSentence[o]:r instanceof Oe.nv?this.isRecordingParagraph[o]:void 0}isSentenceMode(){return this.chosenSections[0]instanceof Oe.cj}isParagraphMode(){return this.chosenSections[0]instanceof Oe.nv}changeSections(r){this.chosenSections=r,this.paragraphs.concat(this.sentences).forEach(a=>this.stopSection(a)),this.isSentenceMode()?(this.sectionAudioSources=this.sentenceAudioSources,this.sectionBlobs=this.sentenceBlobs,this.sectionChunks=this.sentenceChunks,this.sectionTranscriptions=this.sentenceTranscriptions,this.isRecordingSection=this.isRecordingSentence):this.isParagraphMode()&&(this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.sectionTranscriptions=this.paragraphTranscriptions,this.isRecordingSection=this.isRecordingParagraph)}playSection(r){r.play(),r.highlight()}stopSection(r){r.stop(),r.removeHighlight()}goToDashboard(){this.router.navigateByUrl("student/dashboard")}openMicRequestDialog(){var r=this;this.dialogRef=this.dialog.open(A.p,{data:{title:this.ts.l.microphone_blocked,message:this.ts.l.page_requires_microphone,confirmText:this.ts.l.refresh,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var o=(0,y.Z)(function*(a){r.dialogRef=void 0,console.log(a),a?r.ngOnInit():r.goToDashboard()});return function(a){return o.apply(this,arguments)}}())}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(w.N),t.Y36(D.D),t.Y36(Cn.H7),t.Y36(d.gz),t.Y36(d.F0),t.Y36(xe.s),t.Y36(Oe.cf),t.Y36(W.M),t.Y36(p.uw))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-recording"]],decls:8,vars:4,consts:[[1,"content"],["class","recordingBookHeader",4,"ngIf"],["class","archiveButton",3,"click",4,"ngIf"],["autosize","",1,"archiveNavContainer"],["mode","side",1,"sidenav"],["drawer",""],[4,"ngFor","ngForOf"],["class","recordingStoryContainer",4,"ngIf"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"archiveButton",3,"click"],[1,"contentSection",3,"click"],[1,"contentsLink"],[3,"ngStyle"],[1,"contentsDate"],[1,"recordingStoryContainer"],[1,"recordingStoryHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],["class","footer","style","padding-top: 10px",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],["class","recordingBtn",3,"click",4,"ngIf"],["class","notRecordingBtn blink",3,"click",4,"ngIf"],["class","dividerLine",4,"ngIf"],["class","recognisedSpeechContainer",4,"ngIf"],["style","height: 40px",4,"ngIf"],["class","audioContainer",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"recordingBtn",3,"click"],[1,"fas","fa-microphone"],[1,"notRecordingBtn","blink",3,"click"],[1,"fas","fa-stop-circle"],[1,"dividerLine"],[1,"recognisedSpeechContainer"],[1,"dot-flashing"],[2,"height","40px"],[2,"opacity","0.5"],[1,"recognisedSpeech"],[1,"audioContainer"],["controls","","class","audioPlayer",4,"ngIf"],["class","notRecordingBtn trashBtn",3,"click",4,"ngIf"],["controls","",1,"audioPlayer"],["audioTag",""],[1,"notRecordingBtn","trashBtn",3,"click"],[1,"fas","fa-trash-alt"],[1,"footer",2,"padding-top","10px"],[1,"btnContainer"],[1,"footerText"],["class","changeSplitBtn","style","margin-left: auto",3,"click",4,"ngIf"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"],[1,"changeSplitBtn",2,"margin-left","auto",3,"click"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t.YNc(1,Ie,10,5,"div",1),t.YNc(2,cr,4,1,"div",2),t.TgZ(3,"mat-drawer-container",3)(4,"mat-drawer",4,5),t.YNc(6,hi,9,9,"div",6),t.qZA(),t.YNc(7,_i,7,4,"div",7),t.qZA()()),2&r&&(t.xp6(1),t.Q6J("ngIf",o.story),t.xp6(1),t.Q6J("ngIf",o.recordings.length>0),t.xp6(4),t.Q6J("ngForOf",o.recordings),t.xp6(1),t.Q6J("ngIf",o.story))},dependencies:[I.sg,I.O5,I.PC,vt.P,Xn,xn,wn.Hw,I.uU,ai],styles:['.content[_ngcontent-%COMP%]{width:90%;margin-left:5%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.archiveNavContainer[_ngcontent-%COMP%]{height:70vh;background-color:#fff}.sidenav[_ngcontent-%COMP%]{padding:20px;width:20vw}.archiveButton[_ngcontent-%COMP%]{display:flex;margin-left:10px;margin-top:20px;font-size:16px}.archiveButton[_ngcontent-%COMP%]:hover, .contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:20px;height:80%}.textContainerSynth[_ngcontent-%COMP%]{box-shadow:0 0 11px 2px #0006;margin-left:5%;width:90%;color:var(--dark-text);background-color:#f8f9fa;text-align:left;overflow:auto;height:100%}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{white-space:nowrap;display:inline;border-style:none;color:var(--dark-text);width:10rem;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.bookTitle[_ngcontent-%COMP%]{overflow:auto;color:var(--dark-text);margin-left:2em;margin-right:2em;display:inline-block;font-size:16pt}.recordingSaveIcon[_ngcontent-%COMP%]{width:10rem;color:var(--dark-text);border-style:none;font-size:11pt;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{white-space:nowrap;color:var(--scealai-light-brown)}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);cursor:pointer;transition:.5s}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:10px;font-weight:700;border-radius:10px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.recordingBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px;float:right}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.recognisedSpeech[_ngcontent-%COMP%]{color:var(--scealai-green);font-style:italic;padding-left:5px}.audioContainer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.audioPlayer[_ngcontent-%COMP%]{width:25%;height:35px}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}.selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}.blink[_ngcontent-%COMP%]{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),c})(),canActivate:[x.P],canDeactivate:[B]}];let ls=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[d.Bz.forChild(us),d.Bz]}),c})();var ds=T(3869);let fs=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[I.ez,ls,Xe.LD,_e.u5,ds.F,Oo,Vr.ot,wn.Ps,bn.Tx,Bt.Q,Kr.fi.forRoot({customOptions:[{import:"formats/font",whitelist:["sans-serif","serif","monospace","arial","times-new-roman"]}]})]}),c})()},7230:function(Fe){Fe.exports=function(G){var T={};function I(d){if(T[d])return T[d].exports;var x=T[d]={i:d,l:!1,exports:{}};return G[d].call(x.exports,x,x.exports,I),x.l=!0,x.exports}return I.m=G,I.c=T,I.d=function(d,x,A){I.o(d,x)||Object.defineProperty(d,x,{enumerable:!0,get:A})},I.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},I.t=function(d,x){if(1&x&&(d=I(d)),8&x||4&x&&"object"==typeof d&&d&&d.__esModule)return d;var A=Object.create(null);if(I.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:d}),2&x&&"string"!=typeof d)for(var D in d)I.d(A,D,function(t){return d[t]}.bind(null,D));return A},I.n=function(d){var x=d&&d.__esModule?function(){return d.default}:function(){return d};return I.d(x,"a",x),x},I.o=function(d,x){return Object.prototype.hasOwnProperty.call(d,x)},I.p="",I(I.s=90)}({17:function(G,T,I){"use strict";T.__esModule=!0,T.default=void 0;var d=I(18),x=function(){function A(){}return A.getFirstMatch=function(D,t){var p=t.match(D);return p&&p.length>0&&p[1]||""},A.getSecondMatch=function(D,t){var p=t.match(D);return p&&p.length>1&&p[2]||""},A.matchAndReturnConst=function(D,t,p){if(D.test(t))return p},A.getWindowsVersionName=function(D){switch(D){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},A.getMacOSVersionName=function(D){var t=D.split(".").splice(0,2).map(function(p){return parseInt(p,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},A.getAndroidVersionName=function(D){var t=D.split(".").splice(0,2).map(function(p){return parseInt(p,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},A.getVersionPrecision=function(D){return D.split(".").length},A.compareVersions=function(D,t,p){void 0===p&&(p=!1);var g=A.getVersionPrecision(D),B=A.getVersionPrecision(t),S=Math.max(g,B),y=0,M=A.map([D,t],function(C){var w=S-A.getVersionPrecision(C),R=C+new Array(w+1).join(".0");return A.map(R.split("."),function(F){return new Array(20-F.length).join("0")+F}).reverse()});for(p&&(y=S-Math.min(g,B)),S-=1;S>=y;){if(M[0][S]>M[1][S])return 1;if(M[0][S]===M[1][S]){if(S===y)return 0;S-=1}else if(M[0][S]<M[1][S])return-1}},A.map=function(D,t){var p,g=[];if(Array.prototype.map)return Array.prototype.map.call(D,t);for(p=0;p<D.length;p+=1)g.push(t(D[p]));return g},A.find=function(D,t){var p,g;if(Array.prototype.find)return Array.prototype.find.call(D,t);for(p=0,g=D.length;p<g;p+=1){var B=D[p];if(t(B,p))return B}},A.assign=function(D){for(var t,p,g=D,B=arguments.length,S=new Array(B>1?B-1:0),y=1;y<B;y++)S[y-1]=arguments[y];if(Object.assign)return Object.assign.apply(Object,[D].concat(S));var M=function(){var C=S[t];"object"==typeof C&&null!==C&&Object.keys(C).forEach(function(w){g[w]=C[w]})};for(t=0,p=S.length;t<p;t+=1)M();return D},A.getBrowserAlias=function(D){return d.BROWSER_ALIASES_MAP[D]},A.getBrowserTypeByAlias=function(D){return d.BROWSER_MAP[D]||""},A}();T.default=x,G.exports=T.default},18:function(G,T,I){"use strict";T.__esModule=!0,T.ENGINE_MAP=T.OS_MAP=T.PLATFORMS_MAP=T.BROWSER_MAP=T.BROWSER_ALIASES_MAP=void 0,T.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},T.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},T.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},T.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},T.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(G,T,I){"use strict";T.__esModule=!0,T.default=void 0;var d,x=(d=I(91))&&d.__esModule?d:{default:d},A=I(18);function D(p,g){for(var B=0;B<g.length;B++){var S=g[B];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(p,S.key,S)}}var t=function(){function p(){}var g,S;return p.getParser=function(y,M){if(void 0===M&&(M=!1),"string"!=typeof y)throw new Error("UserAgent should be a string");return new x.default(y,M)},p.parse=function(y){return new x.default(y).getResult()},g=p,S=[{key:"BROWSER_MAP",get:function(){return A.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return A.ENGINE_MAP}},{key:"OS_MAP",get:function(){return A.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return A.PLATFORMS_MAP}}],null&&D(g.prototype,null),S&&D(g,S),p}();T.default=t,G.exports=T.default},91:function(G,T,I){"use strict";T.__esModule=!0,T.default=void 0;var d=p(I(92)),x=p(I(93)),A=p(I(94)),D=p(I(95)),t=p(I(17));function p(B){return B&&B.__esModule?B:{default:B}}var g=function(){function B(y,M){if(void 0===M&&(M=!1),null==y||""===y)throw new Error("UserAgent parameter can't be empty");this._ua=y,this.parsedResult={},!0!==M&&this.parse()}var S=B.prototype;return S.getUA=function(){return this._ua},S.test=function(y){return y.test(this._ua)},S.parseBrowser=function(){var y=this;this.parsedResult.browser={};var M=t.default.find(d.default,function(C){if("function"==typeof C.test)return C.test(y);if(C.test instanceof Array)return C.test.some(function(w){return y.test(w)});throw new Error("Browser's test function is not valid")});return M&&(this.parsedResult.browser=M.describe(this.getUA())),this.parsedResult.browser},S.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},S.getBrowserName=function(y){return y?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},S.getBrowserVersion=function(){return this.getBrowser().version},S.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},S.parseOS=function(){var y=this;this.parsedResult.os={};var M=t.default.find(x.default,function(C){if("function"==typeof C.test)return C.test(y);if(C.test instanceof Array)return C.test.some(function(w){return y.test(w)});throw new Error("Browser's test function is not valid")});return M&&(this.parsedResult.os=M.describe(this.getUA())),this.parsedResult.os},S.getOSName=function(y){var M=this.getOS().name;return y?String(M).toLowerCase()||"":M||""},S.getOSVersion=function(){return this.getOS().version},S.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},S.getPlatformType=function(y){void 0===y&&(y=!1);var M=this.getPlatform().type;return y?String(M).toLowerCase()||"":M||""},S.parsePlatform=function(){var y=this;this.parsedResult.platform={};var M=t.default.find(A.default,function(C){if("function"==typeof C.test)return C.test(y);if(C.test instanceof Array)return C.test.some(function(w){return y.test(w)});throw new Error("Browser's test function is not valid")});return M&&(this.parsedResult.platform=M.describe(this.getUA())),this.parsedResult.platform},S.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},S.getEngineName=function(y){return y?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},S.parseEngine=function(){var y=this;this.parsedResult.engine={};var M=t.default.find(D.default,function(C){if("function"==typeof C.test)return C.test(y);if(C.test instanceof Array)return C.test.some(function(w){return y.test(w)});throw new Error("Browser's test function is not valid")});return M&&(this.parsedResult.engine=M.describe(this.getUA())),this.parsedResult.engine},S.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},S.getResult=function(){return t.default.assign({},this.parsedResult)},S.satisfies=function(y){var M=this,C={},w=0,R={},F=0;if(Object.keys(y).forEach(function(ce){var ue=y[ce];"string"==typeof ue?(R[ce]=ue,F+=1):"object"==typeof ue&&(C[ce]=ue,w+=1)}),w>0){var W=Object.keys(C),V=t.default.find(W,function(ce){return M.isOS(ce)});if(V){var L=this.satisfies(C[V]);if(void 0!==L)return L}var H=t.default.find(W,function(ce){return M.isPlatform(ce)});if(H){var oe=this.satisfies(C[H]);if(void 0!==oe)return oe}}if(F>0){var xe=Object.keys(R),we=t.default.find(xe,function(ce){return M.isBrowser(ce,!0)});if(void 0!==we)return this.compareVersion(R[we])}},S.isBrowser=function(y,M){void 0===M&&(M=!1);var C=this.getBrowserName().toLowerCase(),w=y.toLowerCase(),R=t.default.getBrowserTypeByAlias(w);return M&&R&&(w=R.toLowerCase()),w===C},S.compareVersion=function(y){var M=[0],C=y,w=!1,R=this.getBrowserVersion();if("string"==typeof R)return">"===y[0]||"<"===y[0]?(C=y.substr(1),"="===y[1]?(w=!0,C=y.substr(2)):M=[],M.push(">"===y[0]?1:-1)):"="===y[0]?C=y.substr(1):"~"===y[0]&&(w=!0,C=y.substr(1)),M.indexOf(t.default.compareVersions(R,C,w))>-1},S.isOS=function(y){return this.getOSName(!0)===String(y).toLowerCase()},S.isPlatform=function(y){return this.getPlatformType(!0)===String(y).toLowerCase()},S.isEngine=function(y){return this.getEngineName(!0)===String(y).toLowerCase()},S.is=function(y,M){return void 0===M&&(M=!1),this.isBrowser(y,M)||this.isOS(y)||this.isPlatform(y)},S.some=function(y){var M=this;return void 0===y&&(y=[]),y.some(function(C){return M.is(C)})},B}();T.default=g,G.exports=T.default},92:function(G,T,I){"use strict";T.__esModule=!0,T.default=void 0;var d,x=(d=I(17))&&d.__esModule?d:{default:d},A=/version\/(\d+(\.?_?\d+)+)/i;T.default=[{test:[/googlebot/i],describe:function(t){var p={name:"Googlebot"},g=x.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/opera/i],describe:function(t){var p={name:"Opera"},g=x.default.getFirstMatch(A,t)||x.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/opr\/|opios/i],describe:function(t){var p={name:"Opera"},g=x.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/SamsungBrowser/i],describe:function(t){var p={name:"Samsung Internet for Android"},g=x.default.getFirstMatch(A,t)||x.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/Whale/i],describe:function(t){var p={name:"NAVER Whale Browser"},g=x.default.getFirstMatch(A,t)||x.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/MZBrowser/i],describe:function(t){var p={name:"MZ Browser"},g=x.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/focus/i],describe:function(t){var p={name:"Focus"},g=x.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/swing/i],describe:function(t){var p={name:"Swing"},g=x.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/coast/i],describe:function(t){var p={name:"Opera Coast"},g=x.default.getFirstMatch(A,t)||x.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var p={name:"Opera Touch"},g=x.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/yabrowser/i],describe:function(t){var p={name:"Yandex Browser"},g=x.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/ucbrowser/i],describe:function(t){var p={name:"UC Browser"},g=x.default.getFirstMatch(A,t)||x.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/Maxthon|mxios/i],describe:function(t){var p={name:"Maxthon"},g=x.default.getFirstMatch(A,t)||x.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/epiphany/i],describe:function(t){var p={name:"Epiphany"},g=x.default.getFirstMatch(A,t)||x.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/puffin/i],describe:function(t){var p={name:"Puffin"},g=x.default.getFirstMatch(A,t)||x.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/sleipnir/i],describe:function(t){var p={name:"Sleipnir"},g=x.default.getFirstMatch(A,t)||x.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/k-meleon/i],describe:function(t){var p={name:"K-Meleon"},g=x.default.getFirstMatch(A,t)||x.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/micromessenger/i],describe:function(t){var p={name:"WeChat"},g=x.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/qqbrowser/i],describe:function(t){var p={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},g=x.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/msie|trident/i],describe:function(t){var p={name:"Internet Explorer"},g=x.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/\sedg\//i],describe:function(t){var p={name:"Microsoft Edge"},g=x.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/edg([ea]|ios)/i],describe:function(t){var p={name:"Microsoft Edge"},g=x.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/vivaldi/i],describe:function(t){var p={name:"Vivaldi"},g=x.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/seamonkey/i],describe:function(t){var p={name:"SeaMonkey"},g=x.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/sailfish/i],describe:function(t){var p={name:"Sailfish"},g=x.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return g&&(p.version=g),p}},{test:[/silk/i],describe:function(t){var p={name:"Amazon Silk"},g=x.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/phantom/i],describe:function(t){var p={name:"PhantomJS"},g=x.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/slimerjs/i],describe:function(t){var p={name:"SlimerJS"},g=x.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var p={name:"BlackBerry"},g=x.default.getFirstMatch(A,t)||x.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var p={name:"WebOS Browser"},g=x.default.getFirstMatch(A,t)||x.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/bada/i],describe:function(t){var p={name:"Bada"},g=x.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/tizen/i],describe:function(t){var p={name:"Tizen"},g=x.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/qupzilla/i],describe:function(t){var p={name:"QupZilla"},g=x.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var p={name:"Firefox"},g=x.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/electron/i],describe:function(t){var p={name:"Electron"},g=x.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/MiuiBrowser/i],describe:function(t){var p={name:"Miui"},g=x.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/chromium/i],describe:function(t){var p={name:"Chromium"},g=x.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/chrome|crios|crmo/i],describe:function(t){var p={name:"Chrome"},g=x.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/GSA/i],describe:function(t){var p={name:"Google Search"},g=x.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:function(t){var p=!t.test(/like android/i),g=t.test(/android/i);return p&&g},describe:function(t){var p={name:"Android Browser"},g=x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/playstation 4/i],describe:function(t){var p={name:"PlayStation 4"},g=x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/safari|applewebkit/i],describe:function(t){var p={name:"Safari"},g=x.default.getFirstMatch(A,t);return g&&(p.version=g),p}},{test:[/.*/i],describe:function(t){var p=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:x.default.getFirstMatch(p,t),version:x.default.getSecondMatch(p,t)}}}],G.exports=T.default},93:function(G,T,I){"use strict";T.__esModule=!0,T.default=void 0;var d,x=(d=I(17))&&d.__esModule?d:{default:d},A=I(18);T.default=[{test:[/Roku\/DVP/],describe:function(t){var p=x.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:A.OS_MAP.Roku,version:p}}},{test:[/windows phone/i],describe:function(t){var p=x.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:A.OS_MAP.WindowsPhone,version:p}}},{test:[/windows /i],describe:function(t){var p=x.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),g=x.default.getWindowsVersionName(p);return{name:A.OS_MAP.Windows,version:p,versionName:g}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var p={name:A.OS_MAP.iOS},g=x.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return g&&(p.version=g),p}},{test:[/macintosh/i],describe:function(t){var p=x.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),g=x.default.getMacOSVersionName(p),B={name:A.OS_MAP.MacOS,version:p};return g&&(B.versionName=g),B}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var p=x.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:A.OS_MAP.iOS,version:p}}},{test:function(t){var p=!t.test(/like android/i),g=t.test(/android/i);return p&&g},describe:function(t){var p=x.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),g=x.default.getAndroidVersionName(p),B={name:A.OS_MAP.Android,version:p};return g&&(B.versionName=g),B}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var p=x.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),g={name:A.OS_MAP.WebOS};return p&&p.length&&(g.version=p),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var p=x.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||x.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||x.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:A.OS_MAP.BlackBerry,version:p}}},{test:[/bada/i],describe:function(t){var p=x.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:A.OS_MAP.Bada,version:p}}},{test:[/tizen/i],describe:function(t){var p=x.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:A.OS_MAP.Tizen,version:p}}},{test:[/linux/i],describe:function(){return{name:A.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:A.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var p=x.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:A.OS_MAP.PlayStation4,version:p}}}],G.exports=T.default},94:function(G,T,I){"use strict";T.__esModule=!0,T.default=void 0;var d,x=(d=I(17))&&d.__esModule?d:{default:d},A=I(18);T.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var p=x.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",g={type:A.PLATFORMS_MAP.mobile,vendor:"Huawei"};return p&&(g.model=p),g}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:A.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:A.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:A.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:A.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:A.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:A.PLATFORMS_MAP.tablet}}},{test:function(t){var p=t.test(/ipod|iphone/i),g=t.test(/like (ipod|iphone)/i);return p&&!g},describe:function(t){var p=x.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:A.PLATFORMS_MAP.mobile,vendor:"Apple",model:p}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:A.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:A.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:A.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:A.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:A.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var p=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&p>=3},describe:function(){return{type:A.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:A.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:A.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:A.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:A.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:A.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:A.PLATFORMS_MAP.tv}}}],G.exports=T.default},95:function(G,T,I){"use strict";T.__esModule=!0,T.default=void 0;var d,x=(d=I(17))&&d.__esModule?d:{default:d},A=I(18);T.default=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:A.ENGINE_MAP.Blink};var p=x.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:A.ENGINE_MAP.EdgeHTML,version:p}}},{test:[/trident/i],describe:function(t){var p={name:A.ENGINE_MAP.Trident},g=x.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:function(t){return t.test(/presto/i)},describe:function(t){var p={name:A.ENGINE_MAP.Presto},g=x.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:function(t){var p=t.test(/gecko/i),g=t.test(/like gecko/i);return p&&!g},describe:function(t){var p={name:A.ENGINE_MAP.Gecko},g=x.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:A.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var p={name:A.ENGINE_MAP.WebKit},g=x.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}}],G.exports=T.default}})},7489:function(Fe,G,T){var I;Fe=T.nmd(Fe),function(){var d,t="Expected a function",g="__lodash_hash_undefined__",S="__lodash_placeholder__",yt=1/0,lt=9007199254740991,$e=4294967295,Tr=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Dt="[object Arguments]",xt="[object Array]",zt="[object Boolean]",Qt="[object Date]",dn="[object Error]",Oe="[object Function]",Mr="[object GeneratorFunction]",Ge="[object Map]",Bt="[object Number]",Xe="[object Object]",fn="[object Promise]",Kt="[object RegExp]",We="[object Set]",Vt="[object String]",hn="[object Symbol]",$t="[object WeakMap]",Xt="[object ArrayBuffer]",Ft="[object DataView]",Fn="[object Float32Array]",Zn="[object Float64Array]",Ln="[object Int8Array]",pn="[object Int16Array]",Nn="[object Int32Array]",gn="[object Uint8Array]",Un="[object Uint8ClampedArray]",qn="[object Uint16Array]",pe="[object Uint32Array]",so=/\b__p \+= '';/g,_n=/\b(__p \+=) '' \+/g,mn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,kr=/&(?:amp|lt|gt|quot|#39);/g,Or=/[&<>"']/g,ao=RegExp(kr.source),Hn=RegExp(Or.source),co=/<%-([\s\S]+?)%>/g,uo=/<%([\s\S]+?)%>/g,Er=/<%=([\s\S]+?)%>/g,lo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ir=/^\w*$/,fo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pr=/[\\^$.*+?()[\]{}|]/g,Dr=RegExp(Pr.source),Gn=/^\s+/,ho=/\s/,po=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Wn=/\{\n\/\* \[wrapped with (.+)\] \*/,Rr=/,? & /,Jn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,go=/[()=,{}\[\]\/\s]/,_o=/\\(\\)?/g,mo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Br=/\w*$/,Yn=/^[-+]0x[0-9a-f]+$/i,vo=/^0b[01]+$/i,zn=/^\[object .+?Constructor\]$/,yo=/^0o[0-7]+$/i,Fr=/^(?:0|[1-9]\d*)$/,wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zt=/($^)/,xo=/['\n\r\u2028\u2029\\]/g,dt="\\ud800-\\udfff",Lr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",bt="\\u2700-\\u27bf",Qn="a-z\\xdf-\\xf6\\xf8-\\xff",Hr="A-Z\\xc0-\\xd6\\xd8-\\xde",je="\\ufe0e\\ufe0f",Kn="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Co="["+dt+"]",Gr="["+Kn+"]",vn="["+Lr+"]",Wr="\\d+",sa="["+bt+"]",So="["+Qn+"]",To="[^"+dt+Kn+Wr+bt+Qn+Hr+"]",Jr="\\ud83c[\\udffb-\\udfff]",Yr="[^"+dt+"]",zr="(?:\\ud83c[\\udde6-\\uddff]){2}",$n="[\\ud800-\\udbff][\\udc00-\\udfff]",Ct="["+Hr+"]",yn="(?:"+So+"|"+To+")",Xn="(?:"+Ct+"|"+To+")",xn="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Mo="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ao="(?:"+vn+"|"+Jr+")?",ko="["+je+"]?",wn=ko+Ao+"(?:\\u200d(?:"+[Yr,zr,$n].join("|")+")"+ko+Ao+")*",bn="(?:"+[sa,zr,$n].join("|")+")"+wn,Eo="(?:"+[Yr+vn+"?",vn,zr,$n,Co].join("|")+")",Io=RegExp("['\u2019]","g"),Po=RegExp(vn,"g"),jn=RegExp(Jr+"(?="+Jr+")|"+Eo+wn,"g"),Cn=RegExp([Ct+"?"+So+"+"+xn+"(?="+[Gr,Ct,"$"].join("|")+")",Xn+"+"+Mo+"(?="+[Gr,Ct+yn,"$"].join("|")+")",Ct+"?"+yn+"+"+xn,Ct+"+"+Mo,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wr,bn].join("|"),"g"),Do=RegExp("[\\u200d"+dt+Lr+je+"]"),Ro=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fo=-1,de={};de[Fn]=de[Zn]=de[Ln]=de[pn]=de[Nn]=de[gn]=de[Un]=de[qn]=de[pe]=!0,de[Dt]=de[xt]=de[Xt]=de[zt]=de[Ft]=de[Qt]=de[dn]=de[Oe]=de[Ge]=de[Bt]=de[Xe]=de[Kt]=de[We]=de[Vt]=de[$t]=!1;var le={};le[Dt]=le[xt]=le[Xt]=le[Ft]=le[zt]=le[Qt]=le[Fn]=le[Zn]=le[Ln]=le[pn]=le[Nn]=le[Ge]=le[Bt]=le[Xe]=le[Kt]=le[We]=le[Vt]=le[hn]=le[gn]=le[Un]=le[qn]=le[pe]=!0,le[dn]=le[Oe]=le[$t]=!1;var Uo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qo=parseFloat,Ho=parseInt,$r="object"==typeof global&&global&&global.Object===Object&&global,Go="object"==typeof self&&self&&self.Object===Object&&self,be=$r||Go||Function("return this")(),Xr=G&&!G.nodeType&&G,jt=Xr&&Fe&&!Fe.nodeType&&Fe,jr=jt&&jt.exports===Xr,er=jr&&$r.process,Ze=function(){try{return jt&&jt.require&&jt.require("util").types||er&&er.binding&&er.binding("util")}catch{}}(),ei=Ze&&Ze.isArrayBuffer,ti=Ze&&Ze.isDate,ni=Ze&&Ze.isMap,ri=Ze&&Ze.isRegExp,ii=Ze&&Ze.isSet,oi=Ze&&Ze.isTypedArray;function Ee(u,r,o){switch(o.length){case 0:return u.call(r);case 1:return u.call(r,o[0]);case 2:return u.call(r,o[0],o[1]);case 3:return u.call(r,o[0],o[1],o[2])}return u.apply(r,o)}function Wo(u,r,o,a){for(var _=-1,k=null==u?0:u.length;++_<k;){var N=u[_];r(a,N,o(N),u)}return a}function Le(u,r){for(var o=-1,a=null==u?0:u.length;++o<a&&!1!==r(u[o],o,u););return u}function Jo(u,r){for(var o=null==u?0:u.length;o--&&!1!==r(u[o],o,u););return u}function si(u,r){for(var o=-1,a=null==u?0:u.length;++o<a;)if(!r(u[o],o,u))return!1;return!0}function ft(u,r){for(var o=-1,a=null==u?0:u.length,_=0,k=[];++o<a;){var N=u[o];r(N,o,u)&&(k[_++]=N)}return k}function Sn(u,r){return!(null==u||!u.length)&&Lt(u,r,0)>-1}function tr(u,r,o){for(var a=-1,_=null==u?0:u.length;++a<_;)if(o(r,u[a]))return!0;return!1}function fe(u,r){for(var o=-1,a=null==u?0:u.length,_=Array(a);++o<a;)_[o]=r(u[o],o,u);return _}function ht(u,r){for(var o=-1,a=r.length,_=u.length;++o<a;)u[_+o]=r[o];return u}function nr(u,r,o,a){var _=-1,k=null==u?0:u.length;for(a&&k&&(o=u[++_]);++_<k;)o=r(o,u[_],_,u);return o}function Yo(u,r,o,a){var _=null==u?0:u.length;for(a&&_&&(o=u[--_]);_--;)o=r(o,u[_],_,u);return o}function rr(u,r){for(var o=-1,a=null==u?0:u.length;++o<a;)if(r(u[o],o,u))return!0;return!1}var zo=ir("length");function ci(u,r,o){var a;return o(u,function(_,k,N){if(r(_,k,N))return a=k,!1}),a}function Tn(u,r,o,a){for(var _=u.length,k=o+(a?1:-1);a?k--:++k<_;)if(r(u[k],k,u))return k;return-1}function Lt(u,r,o){return r==r?function ss(u,r,o){for(var a=o-1,_=u.length;++a<_;)if(u[a]===r)return a;return-1}(u,r,o):Tn(u,ui,o)}function Ko(u,r,o,a){for(var _=o-1,k=u.length;++_<k;)if(a(u[_],r))return _;return-1}function ui(u){return u!=u}function li(u,r){var o=null==u?0:u.length;return o?sr(u,r)/o:NaN}function ir(u){return function(r){return null==r?d:r[u]}}function or(u){return function(r){return null==u?d:u[r]}}function di(u,r,o,a,_){return _(u,function(k,N,U){o=a?(a=!1,k):r(o,k,N,U)}),o}function sr(u,r){for(var o,a=-1,_=u.length;++a<_;){var k=r(u[a]);k!==d&&(o=o===d?k:o+k)}return o}function ar(u,r){for(var o=-1,a=Array(u);++o<u;)a[o]=r(o);return a}function fi(u){return u&&u.slice(0,_i(u)+1).replace(Gn,"")}function Ie(u){return function(r){return u(r)}}function cr(u,r){return fe(r,function(o){return u[o]})}function en(u,r){return u.has(r)}function hi(u,r){for(var o=-1,a=u.length;++o<a&&Lt(r,u[o],0)>-1;);return o}function pi(u,r){for(var o=u.length;o--&&Lt(r,u[o],0)>-1;);return o}function Xo(u,r){for(var o=u.length,a=0;o--;)u[o]===r&&++a;return a}var jo=or({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),es=or({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ts(u){return"\\"+Uo[u]}function Nt(u){return Do.test(u)}function ur(u){var r=-1,o=Array(u.size);return u.forEach(function(a,_){o[++r]=[_,a]}),o}function gi(u,r){return function(o){return u(r(o))}}function pt(u,r){for(var o=-1,a=u.length,_=0,k=[];++o<a;){var N=u[o];(N===r||N===S)&&(u[o]=S,k[_++]=o)}return k}function Mn(u){var r=-1,o=Array(u.size);return u.forEach(function(a){o[++r]=a}),o}function Ut(u){return Nt(u)?function us(u){for(var r=jn.lastIndex=0;jn.test(u);)++r;return r}(u):zo(u)}function Je(u){return Nt(u)?function ls(u){return u.match(jn)||[]}(u):function ai(u){return u.split("")}(u)}function _i(u){for(var r=u.length;r--&&ho.test(u.charAt(r)););return r}var cs=or({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),c=function u(r){var e,o=(r=null==r?be:c.defaults(be.Object(),r,c.pick(be,Bo))).Array,a=r.Date,_=r.Error,k=r.Function,N=r.Math,U=r.Object,ae=r.RegExp,Q=r.String,ne=r.TypeError,me=o.prototype,Pe=U.prototype,Ye=r["__core-js_shared__"],An=k.prototype.toString,ee=Pe.hasOwnProperty,$c=0,ca=(e=/[^.]+$/.exec(Ye&&Ye.keys&&Ye.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",mi=Pe.toString,Xc=An.call(U),jc=be._,eu=ae("^"+An.call(ee).replace(Pr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vi=jr?r.Buffer:d,qt=r.Symbol,yi=r.Uint8Array,ua=vi?vi.allocUnsafe:d,xi=gi(U.getPrototypeOf,U),la=U.create,da=Pe.propertyIsEnumerable,wi=me.splice,fa=qt?qt.isConcatSpreadable:d,lr=qt?qt.iterator:d,tn=qt?qt.toStringTag:d,bi=function(){try{var e=an(U,"defineProperty");return e({},"",{}),e}catch{}}(),tu=r.clearTimeout!==be.clearTimeout&&r.clearTimeout,nu=a&&a.now!==be.Date.now&&a.now,ru=r.setTimeout!==be.setTimeout&&r.setTimeout,Ci=N.ceil,Si=N.floor,hs=U.getOwnPropertySymbols,iu=vi?vi.isBuffer:d,ha=r.isFinite,ou=me.join,su=gi(U.keys,U),Ce=N.max,Ae=N.min,au=a.now,cu=r.parseInt,pa=N.random,uu=me.reverse,ps=an(r,"DataView"),dr=an(r,"Map"),gs=an(r,"Promise"),kn=an(r,"Set"),fr=an(r,"WeakMap"),hr=an(U,"create"),Ti=fr&&new fr,On={},lu=cn(ps),du=cn(dr),fu=cn(gs),hu=cn(kn),pu=cn(fr),Mi=qt?qt.prototype:d,pr=Mi?Mi.valueOf:d,ga=Mi?Mi.toString:d;function f(e){if(ge(e)&&!K(e)&&!(e instanceof re)){if(e instanceof et)return e;if(ee.call(e,"__wrapped__"))return _c(e)}return new et(e)}var En=function(){function e(){}return function(n){if(!he(n))return{};if(la)return la(n);e.prototype=n;var i=new e;return e.prototype=d,i}}();function Ai(){}function et(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=d}function re(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$e,this.__views__=[]}function nn(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var s=e[n];this.set(s[0],s[1])}}function St(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var s=e[n];this.set(s[0],s[1])}}function Tt(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var s=e[n];this.set(s[0],s[1])}}function rn(e){var n=-1,i=null==e?0:e.length;for(this.__data__=new Tt;++n<i;)this.add(e[n])}function at(e){var n=this.__data__=new St(e);this.size=n.size}function _a(e,n){var i=K(e),s=!i&&un(e),l=!i&&!s&&Yt(e),h=!i&&!s&&!l&&Rn(e),m=i||s||l||h,v=m?ar(e.length,Q):[],b=v.length;for(var O in e)(n||ee.call(e,O))&&(!m||!("length"==O||l&&("offset"==O||"parent"==O)||h&&("buffer"==O||"byteLength"==O||"byteOffset"==O)||Ot(O,b)))&&v.push(O);return v}function ma(e){var n=e.length;return n?e[Ms(0,n-1)]:d}function Uu(e,n){return qi(Ne(e),on(n,0,e.length))}function qu(e){return qi(Ne(e))}function _s(e,n,i){(i!==d&&!ct(e[n],i)||i===d&&!(n in e))&&Mt(e,n,i)}function gr(e,n,i){var s=e[n];(!ee.call(e,n)||!ct(s,i)||i===d&&!(n in e))&&Mt(e,n,i)}function ki(e,n){for(var i=e.length;i--;)if(ct(e[i][0],n))return i;return-1}function Hu(e,n,i,s){return Ht(e,function(l,h,m){n(s,l,i(l),m)}),s}function va(e,n){return e&&_t(n,Se(n),e)}function Mt(e,n,i){"__proto__"==n&&bi?bi(e,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[n]=i}function ms(e,n){for(var i=-1,s=n.length,l=o(s),h=null==e;++i<s;)l[i]=h?d:$s(e,n[i]);return l}function on(e,n,i){return e==e&&(i!==d&&(e=e<=i?e:i),n!==d&&(e=e>=n?e:n)),e}function tt(e,n,i,s,l,h){var m,v=1&n,b=2&n,O=4&n;if(i&&(m=l?i(e,s,l,h):i(e)),m!==d)return m;if(!he(e))return e;var E=K(e);if(E){if(m=function Il(e){var n=e.length,i=new e.constructor(n);return n&&"string"==typeof e[0]&&ee.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(e),!v)return Ne(e,m)}else{var P=ke(e),Z=P==Oe||P==Mr;if(Yt(e))return Ha(e,v);if(P==Xe||P==Dt||Z&&!l){if(m=b||Z?{}:ac(e),!v)return b?function xl(e,n){return _t(e,oc(e),n)}(e,function Gu(e,n){return e&&_t(n,qe(n),e)}(m,e)):function yl(e,n){return _t(e,Us(e),n)}(e,va(m,e))}else{if(!le[P])return l?e:{};m=function Pl(e,n,i){var s=e.constructor;switch(n){case Xt:return Ds(e);case zt:case Qt:return new s(+e);case Ft:return function gl(e,n){var i=n?Ds(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,i);case Fn:case Zn:case Ln:case pn:case Nn:case gn:case Un:case qn:case pe:return Ga(e,i);case Ge:return new s;case Bt:case Vt:return new s(e);case Kt:return function _l(e){var n=new e.constructor(e.source,Br.exec(e));return n.lastIndex=e.lastIndex,n}(e);case We:return new s;case hn:return function ml(e){return pr?U(pr.call(e)):{}}(e)}}(e,P,v)}}h||(h=new at);var q=h.get(e);if(q)return q;h.set(e,m),Fc(e)?e.forEach(function(z){m.add(tt(z,n,i,z,e,h))}):Rc(e)&&e.forEach(function(z,te){m.set(te,tt(z,n,i,te,e,h))});var X=E?d:(O?b?Zs:Fs:b?qe:Se)(e);return Le(X||e,function(z,te){X&&(z=e[te=z]),gr(m,te,tt(z,n,i,te,e,h))}),m}function ya(e,n,i){var s=i.length;if(null==e)return!s;for(e=U(e);s--;){var l=i[s],m=e[l];if(m===d&&!(l in e)||!(0,n[l])(m))return!1}return!0}function xa(e,n,i){if("function"!=typeof e)throw new ne(t);return br(function(){e.apply(d,i)},n)}function _r(e,n,i,s){var l=-1,h=Sn,m=!0,v=e.length,b=[],O=n.length;if(!v)return b;i&&(n=fe(n,Ie(i))),s?(h=tr,m=!1):n.length>=200&&(h=en,m=!1,n=new rn(n));e:for(;++l<v;){var E=e[l],P=null==i?E:i(E);if(E=s||0!==E?E:0,m&&P==P){for(var Z=O;Z--;)if(n[Z]===P)continue e;b.push(E)}else h(n,P,s)||b.push(E)}return b}f.templateSettings={escape:co,evaluate:uo,interpolate:Er,variable:"",imports:{_:f}},(f.prototype=Ai.prototype).constructor=f,(et.prototype=En(Ai.prototype)).constructor=et,(re.prototype=En(Ai.prototype)).constructor=re,nn.prototype.clear=function vu(){this.__data__=hr?hr(null):{},this.size=0},nn.prototype.delete=function yu(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},nn.prototype.get=function xu(e){var n=this.__data__;if(hr){var i=n[e];return i===g?d:i}return ee.call(n,e)?n[e]:d},nn.prototype.has=function wu(e){var n=this.__data__;return hr?n[e]!==d:ee.call(n,e)},nn.prototype.set=function bu(e,n){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=hr&&n===d?g:n,this},St.prototype.clear=function Cu(){this.__data__=[],this.size=0},St.prototype.delete=function Su(e){var n=this.__data__,i=ki(n,e);return!(i<0||(i==n.length-1?n.pop():wi.call(n,i,1),--this.size,0))},St.prototype.get=function Tu(e){var n=this.__data__,i=ki(n,e);return i<0?d:n[i][1]},St.prototype.has=function Mu(e){return ki(this.__data__,e)>-1},St.prototype.set=function Au(e,n){var i=this.__data__,s=ki(i,e);return s<0?(++this.size,i.push([e,n])):i[s][1]=n,this},Tt.prototype.clear=function ku(){this.size=0,this.__data__={hash:new nn,map:new(dr||St),string:new nn}},Tt.prototype.delete=function Ou(e){var n=Ui(this,e).delete(e);return this.size-=n?1:0,n},Tt.prototype.get=function Eu(e){return Ui(this,e).get(e)},Tt.prototype.has=function Iu(e){return Ui(this,e).has(e)},Tt.prototype.set=function Pu(e,n){var i=Ui(this,e),s=i.size;return i.set(e,n),this.size+=i.size==s?0:1,this},rn.prototype.add=rn.prototype.push=function Du(e){return this.__data__.set(e,g),this},rn.prototype.has=function Ru(e){return this.__data__.has(e)},at.prototype.clear=function Bu(){this.__data__=new St,this.size=0},at.prototype.delete=function Fu(e){var n=this.__data__,i=n.delete(e);return this.size=n.size,i},at.prototype.get=function Zu(e){return this.__data__.get(e)},at.prototype.has=function Lu(e){return this.__data__.has(e)},at.prototype.set=function Nu(e,n){var i=this.__data__;if(i instanceof St){var s=i.__data__;if(!dr||s.length<199)return s.push([e,n]),this.size=++i.size,this;i=this.__data__=new Tt(s)}return i.set(e,n),this.size=i.size,this};var Ht=za(gt),wa=za(ys,!0);function Ju(e,n){var i=!0;return Ht(e,function(s,l,h){return i=!!n(s,l,h)}),i}function Oi(e,n,i){for(var s=-1,l=e.length;++s<l;){var h=e[s],m=n(h);if(null!=m&&(v===d?m==m&&!Qe(m):i(m,v)))var v=m,b=h}return b}function ba(e,n){var i=[];return Ht(e,function(s,l,h){n(s,l,h)&&i.push(s)}),i}function Te(e,n,i,s,l){var h=-1,m=e.length;for(i||(i=Rl),l||(l=[]);++h<m;){var v=e[h];n>0&&i(v)?n>1?Te(v,n-1,i,s,l):ht(l,v):s||(l[l.length]=v)}return l}var vs=Qa(),Ca=Qa(!0);function gt(e,n){return e&&vs(e,n,Se)}function ys(e,n){return e&&Ca(e,n,Se)}function Ei(e,n){return ft(n,function(i){return Et(e[i])})}function sn(e,n){for(var i=0,s=(n=Wt(n,e)).length;null!=e&&i<s;)e=e[mt(n[i++])];return i&&i==s?e:d}function Sa(e,n,i){var s=n(e);return K(e)?s:ht(s,i(e))}function De(e){return null==e?e===d?"[object Undefined]":"[object Null]":tn&&tn in U(e)?function kl(e){var n=ee.call(e,tn),i=e[tn];try{e[tn]=d;var s=!0}catch{}var l=mi.call(e);return s&&(n?e[tn]=i:delete e[tn]),l}(e):function ql(e){return mi.call(e)}(e)}function xs(e,n){return e>n}function zu(e,n){return null!=e&&ee.call(e,n)}function Qu(e,n){return null!=e&&n in U(e)}function ws(e,n,i){for(var s=i?tr:Sn,l=e[0].length,h=e.length,m=h,v=o(h),b=1/0,O=[];m--;){var E=e[m];m&&n&&(E=fe(E,Ie(n))),b=Ae(E.length,b),v[m]=!i&&(n||l>=120&&E.length>=120)?new rn(m&&E):d}E=e[0];var P=-1,Z=v[0];e:for(;++P<l&&O.length<b;){var q=E[P],Y=n?n(q):q;if(q=i||0!==q?q:0,!(Z?en(Z,Y):s(O,Y,i))){for(m=h;--m;){var X=v[m];if(!(X?en(X,Y):s(e[m],Y,i)))continue e}Z&&Z.push(Y),O.push(q)}}return O}function mr(e,n,i){var s=null==(e=dc(e,n=Wt(n,e)))?e:e[mt(rt(n))];return null==s?d:Ee(s,e,i)}function Ta(e){return ge(e)&&De(e)==Dt}function vr(e,n,i,s,l){return e===n||(null==e||null==n||!ge(e)&&!ge(n)?e!=e&&n!=n:function ju(e,n,i,s,l,h){var m=K(e),v=K(n),b=m?xt:ke(e),O=v?xt:ke(n),E=(b=b==Dt?Xe:b)==Xe,P=(O=O==Dt?Xe:O)==Xe,Z=b==O;if(Z&&Yt(e)){if(!Yt(n))return!1;m=!0,E=!1}if(Z&&!E)return h||(h=new at),m||Rn(e)?ic(e,n,i,s,l,h):function Ml(e,n,i,s,l,h,m){switch(i){case Ft:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case Xt:return!(e.byteLength!=n.byteLength||!h(new yi(e),new yi(n)));case zt:case Qt:case Bt:return ct(+e,+n);case dn:return e.name==n.name&&e.message==n.message;case Kt:case Vt:return e==n+"";case Ge:var v=ur;case We:if(v||(v=Mn),e.size!=n.size&&!(1&s))return!1;var O=m.get(e);if(O)return O==n;s|=2,m.set(e,n);var E=ic(v(e),v(n),s,l,h,m);return m.delete(e),E;case hn:if(pr)return pr.call(e)==pr.call(n)}return!1}(e,n,b,i,s,l,h);if(!(1&i)){var q=E&&ee.call(e,"__wrapped__"),Y=P&&ee.call(n,"__wrapped__");if(q||Y){var X=q?e.value():e,z=Y?n.value():n;return h||(h=new at),l(X,z,i,s,h)}}return!!Z&&(h||(h=new at),function Al(e,n,i,s,l,h){var m=1&i,v=Fs(e),b=v.length;if(b!=Fs(n).length&&!m)return!1;for(var P=b;P--;){var Z=v[P];if(!(m?Z in n:ee.call(n,Z)))return!1}var q=h.get(e),Y=h.get(n);if(q&&Y)return q==n&&Y==e;var X=!0;h.set(e,n),h.set(n,e);for(var z=m;++P<b;){var te=e[Z=v[P]],ie=n[Z];if(s)var Ke=m?s(ie,te,Z,n,e,h):s(te,ie,Z,e,n,h);if(!(Ke===d?te===ie||l(te,ie,i,s,h):Ke)){X=!1;break}z||(z="constructor"==Z)}if(X&&!z){var Be=e.constructor,Ve=n.constructor;Be!=Ve&&"constructor"in e&&"constructor"in n&&!("function"==typeof Be&&Be instanceof Be&&"function"==typeof Ve&&Ve instanceof Ve)&&(X=!1)}return h.delete(e),h.delete(n),X}(e,n,i,s,l,h))}(e,n,i,s,vr,l))}function bs(e,n,i,s){var l=i.length,h=l,m=!s;if(null==e)return!h;for(e=U(e);l--;){var v=i[l];if(m&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++l<h;){var b=(v=i[l])[0],O=e[b],E=v[1];if(m&&v[2]){if(O===d&&!(b in e))return!1}else{var P=new at;if(s)var Z=s(O,E,b,e,n,P);if(!(Z===d?vr(E,O,3,s,P):Z))return!1}}return!0}function Ma(e){return!(!he(e)||function Fl(e){return!!ca&&ca in e}(e))&&(Et(e)?eu:zn).test(cn(e))}function Aa(e){return"function"==typeof e?e:null==e?He:"object"==typeof e?K(e)?Ea(e[0],e[1]):Oa(e):Kc(e)}function Cs(e){if(!wr(e))return su(e);var n=[];for(var i in U(e))ee.call(e,i)&&"constructor"!=i&&n.push(i);return n}function Ss(e,n){return e<n}function ka(e,n){var i=-1,s=Ue(e)?o(e.length):[];return Ht(e,function(l,h,m){s[++i]=n(l,h,m)}),s}function Oa(e){var n=Ns(e);return 1==n.length&&n[0][2]?uc(n[0][0],n[0][1]):function(i){return i===e||bs(i,e,n)}}function Ea(e,n){return qs(e)&&cc(n)?uc(mt(e),n):function(i){var s=$s(i,e);return s===d&&s===n?Xs(i,e):vr(n,s,3)}}function Ii(e,n,i,s,l){e!==n&&vs(n,function(h,m){if(l||(l=new at),he(h))!function ol(e,n,i,s,l,h,m){var v=Gs(e,i),b=Gs(n,i),O=m.get(b);if(O)_s(e,i,O);else{var E=h?h(v,b,i+"",e,n,m):d,P=E===d;if(P){var Z=K(b),q=!Z&&Yt(b),Y=!Z&&!q&&Rn(b);E=b,Z||q||Y?K(v)?E=v:ve(v)?E=Ne(v):q?(P=!1,E=Ha(b,!0)):Y?(P=!1,E=Ga(b,!0)):E=[]:Cr(b)||un(b)?(E=v,un(v)?E=Nc(v):(!he(v)||Et(v))&&(E=ac(b))):P=!1}P&&(m.set(b,E),l(E,b,s,h,m),m.delete(b)),_s(e,i,E)}}(e,n,m,i,Ii,s,l);else{var v=s?s(Gs(e,m),h,m+"",e,n,l):d;v===d&&(v=h),_s(e,m,v)}},qe)}function Ia(e,n){var i=e.length;if(i)return Ot(n+=n<0?i:0,i)?e[n]:d}function Pa(e,n,i){n=n.length?fe(n,function(h){return K(h)?function(m){return sn(m,1===h.length?h[0]:h)}:h}):[He];var s=-1;return n=fe(n,Ie(J())),function Vo(u,r){var o=u.length;for(u.sort(r);o--;)u[o]=u[o].value;return u}(ka(e,function(h,m,v){return{criteria:fe(n,function(O){return O(h)}),index:++s,value:h}}),function(h,m){return function vl(e,n,i){for(var s=-1,l=e.criteria,h=n.criteria,m=l.length,v=i.length;++s<m;){var b=Wa(l[s],h[s]);if(b)return s>=v?b:b*("desc"==i[s]?-1:1)}return e.index-n.index}(h,m,i)})}function Da(e,n,i){for(var s=-1,l=n.length,h={};++s<l;){var m=n[s],v=sn(e,m);i(v,m)&&yr(h,Wt(m,e),v)}return h}function Ts(e,n,i,s){var l=s?Ko:Lt,h=-1,m=n.length,v=e;for(e===n&&(n=Ne(n)),i&&(v=fe(e,Ie(i)));++h<m;)for(var b=0,O=n[h],E=i?i(O):O;(b=l(v,E,b,s))>-1;)v!==e&&wi.call(v,b,1),wi.call(e,b,1);return e}function Ra(e,n){for(var i=e?n.length:0,s=i-1;i--;){var l=n[i];if(i==s||l!==h){var h=l;Ot(l)?wi.call(e,l,1):Os(e,l)}}return e}function Ms(e,n){return e+Si(pa()*(n-e+1))}function As(e,n){var i="";if(!e||n<1||n>lt)return i;do{n%2&&(i+=e),(n=Si(n/2))&&(e+=e)}while(n);return i}function j(e,n){return Ws(lc(e,n,He),e+"")}function ul(e){return ma(Bn(e))}function ll(e,n){var i=Bn(e);return qi(i,on(n,0,i.length))}function yr(e,n,i,s){if(!he(e))return e;for(var l=-1,h=(n=Wt(n,e)).length,m=h-1,v=e;null!=v&&++l<h;){var b=mt(n[l]),O=i;if("__proto__"===b||"constructor"===b||"prototype"===b)return e;if(l!=m){var E=v[b];(O=s?s(E,b,v):d)===d&&(O=he(E)?E:Ot(n[l+1])?[]:{})}gr(v,b,O),v=v[b]}return e}var Ba=Ti?function(e,n){return Ti.set(e,n),e}:He,dl=bi?function(e,n){return bi(e,"toString",{configurable:!0,enumerable:!1,value:ea(n),writable:!0})}:He;function fl(e){return qi(Bn(e))}function nt(e,n,i){var s=-1,l=e.length;n<0&&(n=-n>l?0:l+n),(i=i>l?l:i)<0&&(i+=l),l=n>i?0:i-n>>>0,n>>>=0;for(var h=o(l);++s<l;)h[s]=e[s+n];return h}function hl(e,n){var i;return Ht(e,function(s,l,h){return!(i=n(s,l,h))}),!!i}function Pi(e,n,i){var s=0,l=null==e?s:e.length;if("number"==typeof n&&n==n&&l<=2147483647){for(;s<l;){var h=s+l>>>1,m=e[h];null!==m&&!Qe(m)&&(i?m<=n:m<n)?s=h+1:l=h}return l}return ks(e,n,He,i)}function ks(e,n,i,s){var l=0,h=null==e?0:e.length;if(0===h)return 0;for(var m=(n=i(n))!=n,v=null===n,b=Qe(n),O=n===d;l<h;){var E=Si((l+h)/2),P=i(e[E]),Z=P!==d,q=null===P,Y=P==P,X=Qe(P);if(m)var z=s||Y;else z=O?Y&&(s||Z):v?Y&&Z&&(s||!q):b?Y&&Z&&!q&&(s||!X):!q&&!X&&(s?P<=n:P<n);z?l=E+1:h=E}return Ae(h,4294967294)}function Fa(e,n){for(var i=-1,s=e.length,l=0,h=[];++i<s;){var m=e[i],v=n?n(m):m;if(!i||!ct(v,b)){var b=v;h[l++]=0===m?0:m}}return h}function Za(e){return"number"==typeof e?e:Qe(e)?NaN:+e}function ze(e){if("string"==typeof e)return e;if(K(e))return fe(e,ze)+"";if(Qe(e))return ga?ga.call(e):"";var n=e+"";return"0"==n&&1/e==-yt?"-0":n}function Gt(e,n,i){var s=-1,l=Sn,h=e.length,m=!0,v=[],b=v;if(i)m=!1,l=tr;else if(h>=200){var O=n?null:Sl(e);if(O)return Mn(O);m=!1,l=en,b=new rn}else b=n?[]:v;e:for(;++s<h;){var E=e[s],P=n?n(E):E;if(E=i||0!==E?E:0,m&&P==P){for(var Z=b.length;Z--;)if(b[Z]===P)continue e;n&&b.push(P),v.push(E)}else l(b,P,i)||(b!==v&&b.push(P),v.push(E))}return v}function Os(e,n){return null==(e=dc(e,n=Wt(n,e)))||delete e[mt(rt(n))]}function La(e,n,i,s){return yr(e,n,i(sn(e,n)),s)}function Di(e,n,i,s){for(var l=e.length,h=s?l:-1;(s?h--:++h<l)&&n(e[h],h,e););return i?nt(e,s?0:h,s?h+1:l):nt(e,s?h+1:0,s?l:h)}function Na(e,n){var i=e;return i instanceof re&&(i=i.value()),nr(n,function(s,l){return l.func.apply(l.thisArg,ht([s],l.args))},i)}function Es(e,n,i){var s=e.length;if(s<2)return s?Gt(e[0]):[];for(var l=-1,h=o(s);++l<s;)for(var m=e[l],v=-1;++v<s;)v!=l&&(h[l]=_r(h[l]||m,e[v],n,i));return Gt(Te(h,1),n,i)}function Ua(e,n,i){for(var s=-1,l=e.length,h=n.length,m={};++s<l;)i(m,e[s],s<h?n[s]:d);return m}function Is(e){return ve(e)?e:[]}function Ps(e){return"function"==typeof e?e:He}function Wt(e,n){return K(e)?e:qs(e,n)?[e]:gc(se(e))}var pl=j;function Jt(e,n,i){var s=e.length;return i=i===d?s:i,!n&&i>=s?e:nt(e,n,i)}var qa=tu||function(e){return be.clearTimeout(e)};function Ha(e,n){if(n)return e.slice();var i=e.length,s=ua?ua(i):new e.constructor(i);return e.copy(s),s}function Ds(e){var n=new e.constructor(e.byteLength);return new yi(n).set(new yi(e)),n}function Ga(e,n){var i=n?Ds(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Wa(e,n){if(e!==n){var i=e!==d,s=null===e,l=e==e,h=Qe(e),m=n!==d,v=null===n,b=n==n,O=Qe(n);if(!v&&!O&&!h&&e>n||h&&m&&b&&!v&&!O||s&&m&&b||!i&&b||!l)return 1;if(!s&&!h&&!O&&e<n||O&&i&&l&&!s&&!h||v&&i&&l||!m&&l||!b)return-1}return 0}function Ja(e,n,i,s){for(var l=-1,h=e.length,m=i.length,v=-1,b=n.length,O=Ce(h-m,0),E=o(b+O),P=!s;++v<b;)E[v]=n[v];for(;++l<m;)(P||l<h)&&(E[i[l]]=e[l]);for(;O--;)E[v++]=e[l++];return E}function Ya(e,n,i,s){for(var l=-1,h=e.length,m=-1,v=i.length,b=-1,O=n.length,E=Ce(h-v,0),P=o(E+O),Z=!s;++l<E;)P[l]=e[l];for(var q=l;++b<O;)P[q+b]=n[b];for(;++m<v;)(Z||l<h)&&(P[q+i[m]]=e[l++]);return P}function Ne(e,n){var i=-1,s=e.length;for(n||(n=o(s));++i<s;)n[i]=e[i];return n}function _t(e,n,i,s){var l=!i;i||(i={});for(var h=-1,m=n.length;++h<m;){var v=n[h],b=s?s(i[v],e[v],v,i,e):d;b===d&&(b=e[v]),l?Mt(i,v,b):gr(i,v,b)}return i}function Ri(e,n){return function(i,s){var l=K(i)?Wo:Hu,h=n?n():{};return l(i,e,J(s,2),h)}}function In(e){return j(function(n,i){var s=-1,l=i.length,h=l>1?i[l-1]:d,m=l>2?i[2]:d;for(h=e.length>3&&"function"==typeof h?(l--,h):d,m&&Re(i[0],i[1],m)&&(h=l<3?d:h,l=1),n=U(n);++s<l;){var v=i[s];v&&e(n,v,s,h)}return n})}function za(e,n){return function(i,s){if(null==i)return i;if(!Ue(i))return e(i,s);for(var l=i.length,h=n?l:-1,m=U(i);(n?h--:++h<l)&&!1!==s(m[h],h,m););return i}}function Qa(e){return function(n,i,s){for(var l=-1,h=U(n),m=s(n),v=m.length;v--;){var b=m[e?v:++l];if(!1===i(h[b],b,h))break}return n}}function Ka(e){return function(n){var i=Nt(n=se(n))?Je(n):d,s=i?i[0]:n.charAt(0),l=i?Jt(i,1).join(""):n.slice(1);return s[e]()+l}}function Pn(e){return function(n){return nr(zc(Yc(n).replace(Io,"")),e,"")}}function xr(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var i=En(e.prototype),s=e.apply(i,n);return he(s)?s:i}}function Va(e){return function(n,i,s){var l=U(n);if(!Ue(n)){var h=J(i,3);n=Se(n),i=function(v){return h(l[v],v,l)}}var m=e(n,i,s);return m>-1?l[h?n[m]:m]:d}}function $a(e){return kt(function(n){var i=n.length,s=i,l=et.prototype.thru;for(e&&n.reverse();s--;){var h=n[s];if("function"!=typeof h)throw new ne(t);if(l&&!m&&"wrapper"==Ni(h))var m=new et([],!0)}for(s=m?s:i;++s<i;){var v=Ni(h=n[s]),b="wrapper"==v?Ls(h):d;m=b&&Hs(b[0])&&424==b[1]&&!b[4].length&&1==b[9]?m[Ni(b[0])].apply(m,b[3]):1==h.length&&Hs(h)?m[v]():m.thru(h)}return function(){var O=arguments,E=O[0];if(m&&1==O.length&&K(E))return m.plant(E).value();for(var P=0,Z=i?n[P].apply(this,O):E;++P<i;)Z=n[P].call(this,Z);return Z}})}function Bi(e,n,i,s,l,h,m,v,b,O){var E=128&n,P=1&n,Z=2&n,q=24&n,Y=512&n,X=Z?d:xr(e);return function z(){for(var te=arguments.length,ie=o(te),Ke=te;Ke--;)ie[Ke]=arguments[Ke];if(q)var Be=Dn(z),Ve=Xo(ie,Be);if(s&&(ie=Ja(ie,s,l,q)),h&&(ie=Ya(ie,h,m,q)),te-=Ve,q&&te<O){var ye=pt(ie,Be);return ec(e,n,Bi,z.placeholder,i,ie,ye,v,b,O-te)}var ut=P?i:this,Pt=Z?ut[e]:e;return te=ie.length,v?ie=Hl(ie,v):Y&&te>1&&ie.reverse(),E&&b<te&&(ie.length=b),this&&this!==be&&this instanceof z&&(Pt=X||xr(Pt)),Pt.apply(ut,ie)}}function Xa(e,n){return function(i,s){return function Vu(e,n,i,s){return gt(e,function(l,h,m){n(s,i(l),h,m)}),s}(i,e,n(s),{})}}function Fi(e,n){return function(i,s){var l;if(i===d&&s===d)return n;if(i!==d&&(l=i),s!==d){if(l===d)return s;"string"==typeof i||"string"==typeof s?(i=ze(i),s=ze(s)):(i=Za(i),s=Za(s)),l=e(i,s)}return l}}function Rs(e){return kt(function(n){return n=fe(n,Ie(J())),j(function(i){var s=this;return e(n,function(l){return Ee(l,s,i)})})})}function Zi(e,n){var i=(n=n===d?" ":ze(n)).length;if(i<2)return i?As(n,e):n;var s=As(n,Ci(e/Ut(n)));return Nt(n)?Jt(Je(s),0,e).join(""):s.slice(0,e)}function ja(e){return function(n,i,s){return s&&"number"!=typeof s&&Re(n,i,s)&&(i=s=d),n=It(n),i===d?(i=n,n=0):i=It(i),function cl(e,n,i,s){for(var l=-1,h=Ce(Ci((n-e)/(i||1)),0),m=o(h);h--;)m[s?h:++l]=e,e+=i;return m}(n,i,s=s===d?n<i?1:-1:It(s),e)}}function Li(e){return function(n,i){return"string"==typeof n&&"string"==typeof i||(n=it(n),i=it(i)),e(n,i)}}function ec(e,n,i,s,l,h,m,v,b,O){var E=8&n;n|=E?32:64,4&(n&=~(E?64:32))||(n&=-4);var X=[e,n,l,E?h:d,E?m:d,E?d:h,E?d:m,v,b,O],z=i.apply(d,X);return Hs(e)&&fc(z,X),z.placeholder=s,hc(z,e,n)}function Bs(e){var n=N[e];return function(i,s){if(i=it(i),(s=null==s?0:Ae($(s),292))&&ha(i)){var l=(se(i)+"e").split("e");return+((l=(se(n(l[0]+"e"+(+l[1]+s)))+"e").split("e"))[0]+"e"+(+l[1]-s))}return n(i)}}var Sl=kn&&1/Mn(new kn([,-0]))[1]==yt?function(e){return new kn(e)}:ra;function tc(e){return function(n){var i=ke(n);return i==Ge?ur(n):i==We?function os(u){var r=-1,o=Array(u.size);return u.forEach(function(a){o[++r]=[a,a]}),o}(n):function $o(u,r){return fe(r,function(o){return[o,u[o]]})}(n,e(n))}}function At(e,n,i,s,l,h,m,v){var b=2&n;if(!b&&"function"!=typeof e)throw new ne(t);var O=s?s.length:0;if(O||(n&=-97,s=l=d),m=m===d?m:Ce($(m),0),v=v===d?v:$(v),O-=l?l.length:0,64&n){var E=s,P=l;s=l=d}var Z=b?d:Ls(e),q=[e,n,i,s,l,E,P,h,m,v];if(Z&&function Nl(e,n){var i=e[1],s=n[1],l=i|s;if(!(l<131||(128==s&&8==i||128==s&&256==i&&e[7].length<=n[8]||384==s&&n[7].length<=n[8]&&8==i)))return e;1&s&&(e[2]=n[2],l|=1&i?0:4);var v=n[3];if(v){var b=e[3];e[3]=b?Ja(b,v,n[4]):v,e[4]=b?pt(e[3],S):n[4]}(v=n[5])&&(e[5]=(b=e[5])?Ya(b,v,n[6]):v,e[6]=b?pt(e[5],S):n[6]),(v=n[7])&&(e[7]=v),128&s&&(e[8]=null==e[8]?n[8]:Ae(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=l}(q,Z),e=q[0],n=q[1],i=q[2],s=q[3],l=q[4],!(v=q[9]=q[9]===d?b?0:e.length:Ce(q[9]-O,0))&&24&n&&(n&=-25),n&&1!=n)Y=8==n||16==n?function bl(e,n,i){var s=xr(e);return function l(){for(var h=arguments.length,m=o(h),v=h,b=Dn(l);v--;)m[v]=arguments[v];var O=h<3&&m[0]!==b&&m[h-1]!==b?[]:pt(m,b);return(h-=O.length)<i?ec(e,n,Bi,l.placeholder,d,m,O,d,d,i-h):Ee(this&&this!==be&&this instanceof l?s:e,this,m)}}(e,n,v):32!=n&&33!=n||l.length?Bi.apply(d,q):function Cl(e,n,i,s){var l=1&n,h=xr(e);return function m(){for(var v=-1,b=arguments.length,O=-1,E=s.length,P=o(E+b),Z=this&&this!==be&&this instanceof m?h:e;++O<E;)P[O]=s[O];for(;b--;)P[O++]=arguments[++v];return Ee(Z,l?i:this,P)}}(e,n,i,s);else var Y=function wl(e,n,i){var s=1&n,l=xr(e);return function h(){return(this&&this!==be&&this instanceof h?l:e).apply(s?i:this,arguments)}}(e,n,i);return hc((Z?Ba:fc)(Y,q),e,n)}function nc(e,n,i,s){return e===d||ct(e,Pe[i])&&!ee.call(s,i)?n:e}function rc(e,n,i,s,l,h){return he(e)&&he(n)&&(h.set(n,e),Ii(e,n,d,rc,h),h.delete(n)),e}function Tl(e){return Cr(e)?d:e}function ic(e,n,i,s,l,h){var m=1&i,v=e.length,b=n.length;if(v!=b&&!(m&&b>v))return!1;var O=h.get(e),E=h.get(n);if(O&&E)return O==n&&E==e;var P=-1,Z=!0,q=2&i?new rn:d;for(h.set(e,n),h.set(n,e);++P<v;){var Y=e[P],X=n[P];if(s)var z=m?s(X,Y,P,n,e,h):s(Y,X,P,e,n,h);if(z!==d){if(z)continue;Z=!1;break}if(q){if(!rr(n,function(te,ie){if(!en(q,ie)&&(Y===te||l(Y,te,i,s,h)))return q.push(ie)})){Z=!1;break}}else if(Y!==X&&!l(Y,X,i,s,h)){Z=!1;break}}return h.delete(e),h.delete(n),Z}function kt(e){return Ws(lc(e,d,yc),e+"")}function Fs(e){return Sa(e,Se,Us)}function Zs(e){return Sa(e,qe,oc)}var Ls=Ti?function(e){return Ti.get(e)}:ra;function Ni(e){for(var n=e.name+"",i=On[n],s=ee.call(On,n)?i.length:0;s--;){var l=i[s],h=l.func;if(null==h||h==e)return l.name}return n}function Dn(e){return(ee.call(f,"placeholder")?f:e).placeholder}function J(){var e=f.iteratee||ta;return e=e===ta?Aa:e,arguments.length?e(arguments[0],arguments[1]):e}function Ui(e,n){var i=e.__data__;return function Bl(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}(n)?i["string"==typeof n?"string":"hash"]:i.map}function Ns(e){for(var n=Se(e),i=n.length;i--;){var s=n[i],l=e[s];n[i]=[s,l,cc(l)]}return n}function an(e,n){var i=function ns(u,r){return null==u?d:u[r]}(e,n);return Ma(i)?i:d}var Us=hs?function(e){return null==e?[]:(e=U(e),ft(hs(e),function(n){return da.call(e,n)}))}:ia,oc=hs?function(e){for(var n=[];e;)ht(n,Us(e)),e=xi(e);return n}:ia,ke=De;function sc(e,n,i){for(var s=-1,l=(n=Wt(n,e)).length,h=!1;++s<l;){var m=mt(n[s]);if(!(h=null!=e&&i(e,m)))break;e=e[m]}return h||++s!=l?h:!!(l=null==e?0:e.length)&&zi(l)&&Ot(m,l)&&(K(e)||un(e))}function ac(e){return"function"!=typeof e.constructor||wr(e)?{}:En(xi(e))}function Rl(e){return K(e)||un(e)||!!(fa&&e&&e[fa])}function Ot(e,n){var i=typeof e;return!!(n=n??lt)&&("number"==i||"symbol"!=i&&Fr.test(e))&&e>-1&&e%1==0&&e<n}function Re(e,n,i){if(!he(i))return!1;var s=typeof n;return!!("number"==s?Ue(i)&&Ot(n,i.length):"string"==s&&n in i)&&ct(i[n],e)}function qs(e,n){if(K(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Qe(e))||Ir.test(e)||!lo.test(e)||null!=n&&e in U(n)}function Hs(e){var n=Ni(e),i=f[n];if("function"!=typeof i||!(n in re.prototype))return!1;if(e===i)return!0;var s=Ls(i);return!!s&&e===s[0]}(ps&&ke(new ps(new ArrayBuffer(1)))!=Ft||dr&&ke(new dr)!=Ge||gs&&ke(gs.resolve())!=fn||kn&&ke(new kn)!=We||fr&&ke(new fr)!=$t)&&(ke=function(e){var n=De(e),i=n==Xe?e.constructor:d,s=i?cn(i):"";if(s)switch(s){case lu:return Ft;case du:return Ge;case fu:return fn;case hu:return We;case pu:return $t}return n});var Zl=Ye?Et:oa;function wr(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||Pe)}function cc(e){return e==e&&!he(e)}function uc(e,n){return function(i){return null!=i&&i[e]===n&&(n!==d||e in U(i))}}function lc(e,n,i){return n=Ce(n===d?e.length-1:n,0),function(){for(var s=arguments,l=-1,h=Ce(s.length-n,0),m=o(h);++l<h;)m[l]=s[n+l];l=-1;for(var v=o(n+1);++l<n;)v[l]=s[l];return v[n]=i(m),Ee(e,this,v)}}function dc(e,n){return n.length<2?e:sn(e,nt(n,0,-1))}function Hl(e,n){for(var i=e.length,s=Ae(n.length,i),l=Ne(e);s--;){var h=n[s];e[s]=Ot(h,i)?l[h]:d}return e}function Gs(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var fc=pc(Ba),br=ru||function(e,n){return be.setTimeout(e,n)},Ws=pc(dl);function hc(e,n,i){var s=n+"";return Ws(e,function Dl(e,n){var i=n.length;if(!i)return e;var s=i-1;return n[s]=(i>1?"& ":"")+n[s],n=n.join(i>2?", ":" "),e.replace(po,"{\n/* [wrapped with "+n+"] */\n")}(s,function Gl(e,n){return Le(Tr,function(i){var s="_."+i[0];n&i[1]&&!Sn(e,s)&&e.push(s)}),e.sort()}(function El(e){var n=e.match(Wn);return n?n[1].split(Rr):[]}(s),i)))}function pc(e){var n=0,i=0;return function(){var s=au(),l=16-(s-i);if(i=s,l>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(d,arguments)}}function qi(e,n){var i=-1,s=e.length,l=s-1;for(n=n===d?s:n;++i<n;){var h=Ms(i,l),m=e[h];e[h]=e[i],e[i]=m}return e.length=n,e}var gc=function Ll(e){var n=Ji(e,function(s){return 500===i.size&&i.clear(),s}),i=n.cache;return n}(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(fo,function(i,s,l,h){n.push(l?h.replace(_o,"$1"):s||i)}),n});function mt(e){if("string"==typeof e||Qe(e))return e;var n=e+"";return"0"==n&&1/e==-yt?"-0":n}function cn(e){if(null!=e){try{return An.call(e)}catch{}try{return e+""}catch{}}return""}function _c(e){if(e instanceof re)return e.clone();var n=new et(e.__wrapped__,e.__chain__);return n.__actions__=Ne(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var zl=j(function(e,n){return ve(e)?_r(e,Te(n,1,ve,!0)):[]}),Ql=j(function(e,n){var i=rt(n);return ve(i)&&(i=d),ve(e)?_r(e,Te(n,1,ve,!0),J(i,2)):[]}),Kl=j(function(e,n){var i=rt(n);return ve(i)&&(i=d),ve(e)?_r(e,Te(n,1,ve,!0),d,i):[]});function mc(e,n,i){var s=null==e?0:e.length;if(!s)return-1;var l=null==i?0:$(i);return l<0&&(l=Ce(s+l,0)),Tn(e,J(n,3),l)}function vc(e,n,i){var s=null==e?0:e.length;if(!s)return-1;var l=s-1;return i!==d&&(l=$(i),l=i<0?Ce(s+l,0):Ae(l,s-1)),Tn(e,J(n,3),l,!0)}function yc(e){return null!=e&&e.length?Te(e,1):[]}function xc(e){return e&&e.length?e[0]:d}var sd=j(function(e){var n=fe(e,Is);return n.length&&n[0]===e[0]?ws(n):[]}),ad=j(function(e){var n=rt(e),i=fe(e,Is);return n===rt(i)?n=d:i.pop(),i.length&&i[0]===e[0]?ws(i,J(n,2)):[]}),cd=j(function(e){var n=rt(e),i=fe(e,Is);return(n="function"==typeof n?n:d)&&i.pop(),i.length&&i[0]===e[0]?ws(i,d,n):[]});function rt(e){var n=null==e?0:e.length;return n?e[n-1]:d}var fd=j(wc);function wc(e,n){return e&&e.length&&n&&n.length?Ts(e,n):e}var gd=kt(function(e,n){var i=null==e?0:e.length,s=ms(e,n);return Ra(e,fe(n,function(l){return Ot(l,i)?+l:l}).sort(Wa)),s});function Js(e){return null==e?e:uu.call(e)}var Id=j(function(e){return Gt(Te(e,1,ve,!0))}),Pd=j(function(e){var n=rt(e);return ve(n)&&(n=d),Gt(Te(e,1,ve,!0),J(n,2))}),Dd=j(function(e){var n=rt(e);return n="function"==typeof n?n:d,Gt(Te(e,1,ve,!0),d,n)});function Ys(e){if(!e||!e.length)return[];var n=0;return e=ft(e,function(i){if(ve(i))return n=Ce(i.length,n),!0}),ar(n,function(i){return fe(e,ir(i))})}function bc(e,n){if(!e||!e.length)return[];var i=Ys(e);return null==n?i:fe(i,function(s){return Ee(n,d,s)})}var Zd=j(function(e,n){return ve(e)?_r(e,n):[]}),Ld=j(function(e){return Es(ft(e,ve))}),Nd=j(function(e){var n=rt(e);return ve(n)&&(n=d),Es(ft(e,ve),J(n,2))}),Ud=j(function(e){var n=rt(e);return n="function"==typeof n?n:d,Es(ft(e,ve),d,n)}),qd=j(Ys),Wd=j(function(e){var n=e.length,i=n>1?e[n-1]:d;return i="function"==typeof i?(e.pop(),i):d,bc(e,i)});function Cc(e){var n=f(e);return n.__chain__=!0,n}function Hi(e,n){return n(e)}var Yd=kt(function(e){var n=e.length,i=n?e[0]:0,s=this.__wrapped__,l=function(h){return ms(h,e)};return!(n>1||this.__actions__.length)&&s instanceof re&&Ot(i)?((s=s.slice(i,+i+(n?1:0))).__actions__.push({func:Hi,args:[l],thisArg:d}),new et(s,this.__chain__).thru(function(h){return n&&!h.length&&h.push(d),h})):this.thru(l)}),ef=Ri(function(e,n,i){ee.call(e,i)?++e[i]:Mt(e,i,1)}),rf=Va(mc),of=Va(vc);function Sc(e,n){return(K(e)?Le:Ht)(e,J(n,3))}function Tc(e,n){return(K(e)?Jo:wa)(e,J(n,3))}var uf=Ri(function(e,n,i){ee.call(e,i)?e[i].push(n):Mt(e,i,[n])}),df=j(function(e,n,i){var s=-1,l="function"==typeof n,h=Ue(e)?o(e.length):[];return Ht(e,function(m){h[++s]=l?Ee(n,m,i):mr(m,n,i)}),h}),ff=Ri(function(e,n,i){Mt(e,i,n)});function Gi(e,n){return(K(e)?fe:ka)(e,J(n,3))}var pf=Ri(function(e,n,i){e[i?0:1].push(n)},function(){return[[],[]]}),Cf=j(function(e,n){if(null==e)return[];var i=n.length;return i>1&&Re(e,n[0],n[1])?n=[]:i>2&&Re(n[0],n[1],n[2])&&(n=[n[0]]),Pa(e,Te(n,1),[])}),Wi=nu||function(){return be.Date.now()};function Mc(e,n,i){return n=i?d:n,At(e,128,d,d,d,d,n=e&&null==n?e.length:n)}function Ac(e,n){var i;if("function"!=typeof n)throw new ne(t);return e=$(e),function(){return--e>0&&(i=n.apply(this,arguments)),e<=1&&(n=d),i}}var zs=j(function(e,n,i){var s=1;if(i.length){var l=pt(i,Dn(zs));s|=32}return At(e,s,n,i,l)}),kc=j(function(e,n,i){var s=3;if(i.length){var l=pt(i,Dn(kc));s|=32}return At(n,s,e,i,l)});function Ic(e,n,i){var s,l,h,m,v,b,O=0,E=!1,P=!1,Z=!0;if("function"!=typeof e)throw new ne(t);function q(ye){var ut=s,Pt=l;return s=l=d,O=ye,m=e.apply(Pt,ut)}function Y(ye){return O=ye,v=br(te,n),E?q(ye):m}function z(ye){var ut=ye-b;return b===d||ut>=n||ut<0||P&&ye-O>=h}function te(){var ye=Wi();if(z(ye))return ie(ye);v=br(te,function X(ye){var Vc=n-(ye-b);return P?Ae(Vc,h-(ye-O)):Vc}(ye))}function ie(ye){return v=d,Z&&s?q(ye):(s=l=d,m)}function Ve(){var ye=Wi(),ut=z(ye);if(s=arguments,l=this,b=ye,ut){if(v===d)return Y(b);if(P)return qa(v),v=br(te,n),q(b)}return v===d&&(v=br(te,n)),m}return n=it(n)||0,he(i)&&(E=!!i.leading,h=(P="maxWait"in i)?Ce(it(i.maxWait)||0,n):h,Z="trailing"in i?!!i.trailing:Z),Ve.cancel=function Ke(){v!==d&&qa(v),O=0,s=b=l=v=d},Ve.flush=function Be(){return v===d?m:ie(Wi())},Ve}var Tf=j(function(e,n){return xa(e,1,n)}),Mf=j(function(e,n,i){return xa(e,it(n)||0,i)});function Ji(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new ne(t);var i=function(){var s=arguments,l=n?n.apply(this,s):s[0],h=i.cache;if(h.has(l))return h.get(l);var m=e.apply(this,s);return i.cache=h.set(l,m)||h,m};return i.cache=new(Ji.Cache||Tt),i}function Yi(e){if("function"!=typeof e)throw new ne(t);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}Ji.Cache=Tt;var Of=pl(function(e,n){var i=(n=1==n.length&&K(n[0])?fe(n[0],Ie(J())):fe(Te(n,1),Ie(J()))).length;return j(function(s){for(var l=-1,h=Ae(s.length,i);++l<h;)s[l]=n[l].call(this,s[l]);return Ee(e,this,s)})}),Qs=j(function(e,n){var i=pt(n,Dn(Qs));return At(e,32,d,n,i)}),Pc=j(function(e,n){var i=pt(n,Dn(Pc));return At(e,64,d,n,i)}),Ef=kt(function(e,n){return At(e,256,d,d,d,n)});function ct(e,n){return e===n||e!=e&&n!=n}var Hf=Li(xs),Gf=Li(function(e,n){return e>=n}),un=Ta(function(){return arguments}())?Ta:function(e){return ge(e)&&ee.call(e,"callee")&&!da.call(e,"callee")},K=o.isArray,Wf=ei?Ie(ei):function $u(e){return ge(e)&&De(e)==Xt};function Ue(e){return null!=e&&zi(e.length)&&!Et(e)}function ve(e){return ge(e)&&Ue(e)}var Yt=iu||oa,Yf=ti?Ie(ti):function Xu(e){return ge(e)&&De(e)==Qt};function Ks(e){if(!ge(e))return!1;var n=De(e);return n==dn||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!Cr(e)}function Et(e){if(!he(e))return!1;var n=De(e);return n==Oe||n==Mr||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Dc(e){return"number"==typeof e&&e==$(e)}function zi(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=lt}function he(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function ge(e){return null!=e&&"object"==typeof e}var Rc=ni?Ie(ni):function el(e){return ge(e)&&ke(e)==Ge};function Bc(e){return"number"==typeof e||ge(e)&&De(e)==Bt}function Cr(e){if(!ge(e)||De(e)!=Xe)return!1;var n=xi(e);if(null===n)return!0;var i=ee.call(n,"constructor")&&n.constructor;return"function"==typeof i&&i instanceof i&&An.call(i)==Xc}var Vs=ri?Ie(ri):function tl(e){return ge(e)&&De(e)==Kt},Fc=ii?Ie(ii):function nl(e){return ge(e)&&ke(e)==We};function Qi(e){return"string"==typeof e||!K(e)&&ge(e)&&De(e)==Vt}function Qe(e){return"symbol"==typeof e||ge(e)&&De(e)==hn}var Rn=oi?Ie(oi):function rl(e){return ge(e)&&zi(e.length)&&!!de[De(e)]},ch=Li(Ss),uh=Li(function(e,n){return e<=n});function Zc(e){if(!e)return[];if(Ue(e))return Qi(e)?Je(e):Ne(e);if(lr&&e[lr])return function is(u){for(var r,o=[];!(r=u.next()).done;)o.push(r.value);return o}(e[lr]());var n=ke(e);return(n==Ge?ur:n==We?Mn:Bn)(e)}function It(e){return e?(e=it(e))===yt||e===-yt?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function $(e){var n=It(e),i=n%1;return n==n?i?n-i:n:0}function Lc(e){return e?on($(e),0,$e):0}function it(e){if("number"==typeof e)return e;if(Qe(e))return NaN;if(he(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=he(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=fi(e);var i=vo.test(e);return i||yo.test(e)?Ho(e.slice(2),i?2:8):Yn.test(e)?NaN:+e}function Nc(e){return _t(e,qe(e))}function se(e){return null==e?"":ze(e)}var dh=In(function(e,n){if(wr(n)||Ue(n))_t(n,Se(n),e);else for(var i in n)ee.call(n,i)&&gr(e,i,n[i])}),Uc=In(function(e,n){_t(n,qe(n),e)}),Ki=In(function(e,n,i,s){_t(n,qe(n),e,s)}),fh=In(function(e,n,i,s){_t(n,Se(n),e,s)}),hh=kt(ms),gh=j(function(e,n){e=U(e);var i=-1,s=n.length,l=s>2?n[2]:d;for(l&&Re(n[0],n[1],l)&&(s=1);++i<s;)for(var h=n[i],m=qe(h),v=-1,b=m.length;++v<b;){var O=m[v],E=e[O];(E===d||ct(E,Pe[O])&&!ee.call(e,O))&&(e[O]=h[O])}return e}),_h=j(function(e){return e.push(d,rc),Ee(qc,d,e)});function $s(e,n,i){var s=null==e?d:sn(e,n);return s===d?i:s}function Xs(e,n){return null!=e&&sc(e,n,Qu)}var Mh=Xa(function(e,n,i){null!=n&&"function"!=typeof n.toString&&(n=mi.call(n)),e[n]=i},ea(He)),Ah=Xa(function(e,n,i){null!=n&&"function"!=typeof n.toString&&(n=mi.call(n)),ee.call(e,n)?e[n].push(i):e[n]=[i]},J),kh=j(mr);function Se(e){return Ue(e)?_a(e):Cs(e)}function qe(e){return Ue(e)?_a(e,!0):function il(e){if(!he(e))return function Ul(e){var n=[];if(null!=e)for(var i in U(e))n.push(i);return n}(e);var n=wr(e),i=[];for(var s in e)"constructor"==s&&(n||!ee.call(e,s))||i.push(s);return i}(e)}var Ih=In(function(e,n,i){Ii(e,n,i)}),qc=In(function(e,n,i,s){Ii(e,n,i,s)}),Ph=kt(function(e,n){var i={};if(null==e)return i;var s=!1;n=fe(n,function(h){return h=Wt(h,e),s||(s=h.length>1),h}),_t(e,Zs(e),i),s&&(i=tt(i,7,Tl));for(var l=n.length;l--;)Os(i,n[l]);return i}),Rh=kt(function(e,n){return null==e?{}:function sl(e,n){return Da(e,n,function(i,s){return Xs(e,s)})}(e,n)});function Hc(e,n){if(null==e)return{};var i=fe(Zs(e),function(s){return[s]});return n=J(n),Da(e,i,function(s,l){return n(s,l[0])})}var Gc=tc(Se),Wc=tc(qe);function Bn(e){return null==e?[]:cr(e,Se(e))}var Yh=Pn(function(e,n,i){return n=n.toLowerCase(),e+(i?Jc(n):n)});function Jc(e){return js(se(e).toLowerCase())}function Yc(e){return(e=se(e))&&e.replace(wt,jo).replace(Po,"")}var Vh=Pn(function(e,n,i){return e+(i?"-":"")+n.toLowerCase()}),$h=Pn(function(e,n,i){return e+(i?" ":"")+n.toLowerCase()}),Xh=Ka("toLowerCase"),op=Pn(function(e,n,i){return e+(i?"_":"")+n.toLowerCase()}),ap=Pn(function(e,n,i){return e+(i?" ":"")+js(n)}),mp=Pn(function(e,n,i){return e+(i?" ":"")+n.toUpperCase()}),js=Ka("toUpperCase");function zc(e,n,i){return e=se(e),(n=i?d:n)===d?function rs(u){return Ro.test(u)}(e)?function ds(u){return u.match(Cn)||[]}(e):function Qo(u){return u.match(Jn)||[]}(e):e.match(n)||[]}var Qc=j(function(e,n){try{return Ee(e,d,n)}catch(i){return Ks(i)?i:new _(i)}}),vp=kt(function(e,n){return Le(n,function(i){i=mt(i),Mt(e,i,zs(e[i],e))}),e});function ea(e){return function(){return e}}var bp=$a(),Cp=$a(!0);function He(e){return e}function ta(e){return Aa("function"==typeof e?e:tt(e,1))}var Mp=j(function(e,n){return function(i){return mr(i,e,n)}}),Ap=j(function(e,n){return function(i){return mr(e,i,n)}});function na(e,n,i){var s=Se(n),l=Ei(n,s);null==i&&(!he(n)||!l.length&&s.length)&&(i=n,n=e,e=this,l=Ei(n,Se(n)));var h=!(he(i)&&"chain"in i&&!i.chain),m=Et(e);return Le(l,function(v){var b=n[v];e[v]=b,m&&(e.prototype[v]=function(){var O=this.__chain__;if(h||O){var E=e(this.__wrapped__),P=E.__actions__=Ne(this.__actions__);return P.push({func:b,args:arguments,thisArg:e}),E.__chain__=O,E}return b.apply(e,ht([this.value()],arguments))})}),e}function ra(){}var Ep=Rs(fe),Ip=Rs(si),Pp=Rs(rr);function Kc(e){return qs(e)?ir(mt(e)):function al(e){return function(n){return sn(n,e)}}(e)}var Rp=ja(),Bp=ja(!0);function ia(){return[]}function oa(){return!1}var Hp=Fi(function(e,n){return e+n},0),Gp=Bs("ceil"),Wp=Fi(function(e,n){return e/n},1),Jp=Bs("floor"),Xp=Fi(function(e,n){return e*n},1),jp=Bs("round"),eg=Fi(function(e,n){return e-n},0);return f.after=function Sf(e,n){if("function"!=typeof n)throw new ne(t);return e=$(e),function(){if(--e<1)return n.apply(this,arguments)}},f.ary=Mc,f.assign=dh,f.assignIn=Uc,f.assignInWith=Ki,f.assignWith=fh,f.at=hh,f.before=Ac,f.bind=zs,f.bindAll=vp,f.bindKey=kc,f.castArray=function Ff(){if(!arguments.length)return[];var e=arguments[0];return K(e)?e:[e]},f.chain=Cc,f.chunk=function Wl(e,n,i){n=(i?Re(e,n,i):n===d)?1:Ce($(n),0);var s=null==e?0:e.length;if(!s||n<1)return[];for(var l=0,h=0,m=o(Ci(s/n));l<s;)m[h++]=nt(e,l,l+=n);return m},f.compact=function Jl(e){for(var n=-1,i=null==e?0:e.length,s=0,l=[];++n<i;){var h=e[n];h&&(l[s++]=h)}return l},f.concat=function Yl(){var e=arguments.length;if(!e)return[];for(var n=o(e-1),i=arguments[0],s=e;s--;)n[s-1]=arguments[s];return ht(K(i)?Ne(i):[i],Te(n,1))},f.cond=function yp(e){var n=null==e?0:e.length,i=J();return e=n?fe(e,function(s){if("function"!=typeof s[1])throw new ne(t);return[i(s[0]),s[1]]}):[],j(function(s){for(var l=-1;++l<n;){var h=e[l];if(Ee(h[0],this,s))return Ee(h[1],this,s)}})},f.conforms=function xp(e){return function Wu(e){var n=Se(e);return function(i){return ya(i,e,n)}}(tt(e,1))},f.constant=ea,f.countBy=ef,f.create=function ph(e,n){var i=En(e);return null==n?i:va(i,n)},f.curry=function Oc(e,n,i){var s=At(e,8,d,d,d,d,d,n=i?d:n);return s.placeholder=Oc.placeholder,s},f.curryRight=function Ec(e,n,i){var s=At(e,16,d,d,d,d,d,n=i?d:n);return s.placeholder=Ec.placeholder,s},f.debounce=Ic,f.defaults=gh,f.defaultsDeep=_h,f.defer=Tf,f.delay=Mf,f.difference=zl,f.differenceBy=Ql,f.differenceWith=Kl,f.drop=function Vl(e,n,i){var s=null==e?0:e.length;return s?nt(e,(n=i||n===d?1:$(n))<0?0:n,s):[]},f.dropRight=function $l(e,n,i){var s=null==e?0:e.length;return s?nt(e,0,(n=s-(n=i||n===d?1:$(n)))<0?0:n):[]},f.dropRightWhile=function Xl(e,n){return e&&e.length?Di(e,J(n,3),!0,!0):[]},f.dropWhile=function jl(e,n){return e&&e.length?Di(e,J(n,3),!0):[]},f.fill=function ed(e,n,i,s){var l=null==e?0:e.length;return l?(i&&"number"!=typeof i&&Re(e,n,i)&&(i=0,s=l),function Yu(e,n,i,s){var l=e.length;for((i=$(i))<0&&(i=-i>l?0:l+i),(s=s===d||s>l?l:$(s))<0&&(s+=l),s=i>s?0:Lc(s);i<s;)e[i++]=n;return e}(e,n,i,s)):[]},f.filter=function nf(e,n){return(K(e)?ft:ba)(e,J(n,3))},f.flatMap=function sf(e,n){return Te(Gi(e,n),1)},f.flatMapDeep=function af(e,n){return Te(Gi(e,n),yt)},f.flatMapDepth=function cf(e,n,i){return i=i===d?1:$(i),Te(Gi(e,n),i)},f.flatten=yc,f.flattenDeep=function td(e){return null!=e&&e.length?Te(e,yt):[]},f.flattenDepth=function nd(e,n){return null!=e&&e.length?Te(e,n=n===d?1:$(n)):[]},f.flip=function Af(e){return At(e,512)},f.flow=bp,f.flowRight=Cp,f.fromPairs=function rd(e){for(var n=-1,i=null==e?0:e.length,s={};++n<i;){var l=e[n];s[l[0]]=l[1]}return s},f.functions=function Ch(e){return null==e?[]:Ei(e,Se(e))},f.functionsIn=function Sh(e){return null==e?[]:Ei(e,qe(e))},f.groupBy=uf,f.initial=function od(e){return null!=e&&e.length?nt(e,0,-1):[]},f.intersection=sd,f.intersectionBy=ad,f.intersectionWith=cd,f.invert=Mh,f.invertBy=Ah,f.invokeMap=df,f.iteratee=ta,f.keyBy=ff,f.keys=Se,f.keysIn=qe,f.map=Gi,f.mapKeys=function Oh(e,n){var i={};return n=J(n,3),gt(e,function(s,l,h){Mt(i,n(s,l,h),s)}),i},f.mapValues=function Eh(e,n){var i={};return n=J(n,3),gt(e,function(s,l,h){Mt(i,l,n(s,l,h))}),i},f.matches=function Sp(e){return Oa(tt(e,1))},f.matchesProperty=function Tp(e,n){return Ea(e,tt(n,1))},f.memoize=Ji,f.merge=Ih,f.mergeWith=qc,f.method=Mp,f.methodOf=Ap,f.mixin=na,f.negate=Yi,f.nthArg=function Op(e){return e=$(e),j(function(n){return Ia(n,e)})},f.omit=Ph,f.omitBy=function Dh(e,n){return Hc(e,Yi(J(n)))},f.once=function kf(e){return Ac(2,e)},f.orderBy=function hf(e,n,i,s){return null==e?[]:(K(n)||(n=null==n?[]:[n]),K(i=s?d:i)||(i=null==i?[]:[i]),Pa(e,n,i))},f.over=Ep,f.overArgs=Of,f.overEvery=Ip,f.overSome=Pp,f.partial=Qs,f.partialRight=Pc,f.partition=pf,f.pick=Rh,f.pickBy=Hc,f.property=Kc,f.propertyOf=function Dp(e){return function(n){return null==e?d:sn(e,n)}},f.pull=fd,f.pullAll=wc,f.pullAllBy=function hd(e,n,i){return e&&e.length&&n&&n.length?Ts(e,n,J(i,2)):e},f.pullAllWith=function pd(e,n,i){return e&&e.length&&n&&n.length?Ts(e,n,d,i):e},f.pullAt=gd,f.range=Rp,f.rangeRight=Bp,f.rearg=Ef,f.reject=function mf(e,n){return(K(e)?ft:ba)(e,Yi(J(n,3)))},f.remove=function _d(e,n){var i=[];if(!e||!e.length)return i;var s=-1,l=[],h=e.length;for(n=J(n,3);++s<h;){var m=e[s];n(m,s,e)&&(i.push(m),l.push(s))}return Ra(e,l),i},f.rest=function If(e,n){if("function"!=typeof e)throw new ne(t);return j(e,n=n===d?n:$(n))},f.reverse=Js,f.sampleSize=function yf(e,n,i){return n=(i?Re(e,n,i):n===d)?1:$(n),(K(e)?Uu:ll)(e,n)},f.set=function Fh(e,n,i){return null==e?e:yr(e,n,i)},f.setWith=function Zh(e,n,i,s){return s="function"==typeof s?s:d,null==e?e:yr(e,n,i,s)},f.shuffle=function xf(e){return(K(e)?qu:fl)(e)},f.slice=function md(e,n,i){var s=null==e?0:e.length;return s?(i&&"number"!=typeof i&&Re(e,n,i)?(n=0,i=s):(n=null==n?0:$(n),i=i===d?s:$(i)),nt(e,n,i)):[]},f.sortBy=Cf,f.sortedUniq=function Sd(e){return e&&e.length?Fa(e):[]},f.sortedUniqBy=function Td(e,n){return e&&e.length?Fa(e,J(n,2)):[]},f.split=function sp(e,n,i){return i&&"number"!=typeof i&&Re(e,n,i)&&(n=i=d),(i=i===d?$e:i>>>0)?(e=se(e))&&("string"==typeof n||null!=n&&!Vs(n))&&!(n=ze(n))&&Nt(e)?Jt(Je(e),0,i):e.split(n,i):[]},f.spread=function Pf(e,n){if("function"!=typeof e)throw new ne(t);return n=null==n?0:Ce($(n),0),j(function(i){var s=i[n],l=Jt(i,0,n);return s&&ht(l,s),Ee(e,this,l)})},f.tail=function Md(e){var n=null==e?0:e.length;return n?nt(e,1,n):[]},f.take=function Ad(e,n,i){return e&&e.length?nt(e,0,(n=i||n===d?1:$(n))<0?0:n):[]},f.takeRight=function kd(e,n,i){var s=null==e?0:e.length;return s?nt(e,(n=s-(n=i||n===d?1:$(n)))<0?0:n,s):[]},f.takeRightWhile=function Od(e,n){return e&&e.length?Di(e,J(n,3),!1,!0):[]},f.takeWhile=function Ed(e,n){return e&&e.length?Di(e,J(n,3)):[]},f.tap=function Jd(e,n){return n(e),e},f.throttle=function Df(e,n,i){var s=!0,l=!0;if("function"!=typeof e)throw new ne(t);return he(i)&&(s="leading"in i?!!i.leading:s,l="trailing"in i?!!i.trailing:l),Ic(e,n,{leading:s,maxWait:n,trailing:l})},f.thru=Hi,f.toArray=Zc,f.toPairs=Gc,f.toPairsIn=Wc,f.toPath=function Up(e){return K(e)?fe(e,mt):Qe(e)?[e]:Ne(gc(se(e)))},f.toPlainObject=Nc,f.transform=function Lh(e,n,i){var s=K(e),l=s||Yt(e)||Rn(e);if(n=J(n,4),null==i){var h=e&&e.constructor;i=l?s?new h:[]:he(e)&&Et(h)?En(xi(e)):{}}return(l?Le:gt)(e,function(m,v,b){return n(i,m,v,b)}),i},f.unary=function Rf(e){return Mc(e,1)},f.union=Id,f.unionBy=Pd,f.unionWith=Dd,f.uniq=function Rd(e){return e&&e.length?Gt(e):[]},f.uniqBy=function Bd(e,n){return e&&e.length?Gt(e,J(n,2)):[]},f.uniqWith=function Fd(e,n){return n="function"==typeof n?n:d,e&&e.length?Gt(e,d,n):[]},f.unset=function Nh(e,n){return null==e||Os(e,n)},f.unzip=Ys,f.unzipWith=bc,f.update=function Uh(e,n,i){return null==e?e:La(e,n,Ps(i))},f.updateWith=function qh(e,n,i,s){return s="function"==typeof s?s:d,null==e?e:La(e,n,Ps(i),s)},f.values=Bn,f.valuesIn=function Hh(e){return null==e?[]:cr(e,qe(e))},f.without=Zd,f.words=zc,f.wrap=function Bf(e,n){return Qs(Ps(n),e)},f.xor=Ld,f.xorBy=Nd,f.xorWith=Ud,f.zip=qd,f.zipObject=function Hd(e,n){return Ua(e||[],n||[],gr)},f.zipObjectDeep=function Gd(e,n){return Ua(e||[],n||[],yr)},f.zipWith=Wd,f.entries=Gc,f.entriesIn=Wc,f.extend=Uc,f.extendWith=Ki,na(f,f),f.add=Hp,f.attempt=Qc,f.camelCase=Yh,f.capitalize=Jc,f.ceil=Gp,f.clamp=function Gh(e,n,i){return i===d&&(i=n,n=d),i!==d&&(i=(i=it(i))==i?i:0),n!==d&&(n=(n=it(n))==n?n:0),on(it(e),n,i)},f.clone=function Zf(e){return tt(e,4)},f.cloneDeep=function Nf(e){return tt(e,5)},f.cloneDeepWith=function Uf(e,n){return tt(e,5,n="function"==typeof n?n:d)},f.cloneWith=function Lf(e,n){return tt(e,4,n="function"==typeof n?n:d)},f.conformsTo=function qf(e,n){return null==n||ya(e,n,Se(n))},f.deburr=Yc,f.defaultTo=function wp(e,n){return null==e||e!=e?n:e},f.divide=Wp,f.endsWith=function zh(e,n,i){e=se(e),n=ze(n);var s=e.length,l=i=i===d?s:on($(i),0,s);return(i-=n.length)>=0&&e.slice(i,l)==n},f.eq=ct,f.escape=function Qh(e){return(e=se(e))&&Hn.test(e)?e.replace(Or,es):e},f.escapeRegExp=function Kh(e){return(e=se(e))&&Dr.test(e)?e.replace(Pr,"\\$&"):e},f.every=function tf(e,n,i){var s=K(e)?si:Ju;return i&&Re(e,n,i)&&(n=d),s(e,J(n,3))},f.find=rf,f.findIndex=mc,f.findKey=function mh(e,n){return ci(e,J(n,3),gt)},f.findLast=of,f.findLastIndex=vc,f.findLastKey=function vh(e,n){return ci(e,J(n,3),ys)},f.floor=Jp,f.forEach=Sc,f.forEachRight=Tc,f.forIn=function yh(e,n){return null==e?e:vs(e,J(n,3),qe)},f.forInRight=function xh(e,n){return null==e?e:Ca(e,J(n,3),qe)},f.forOwn=function wh(e,n){return e&&gt(e,J(n,3))},f.forOwnRight=function bh(e,n){return e&&ys(e,J(n,3))},f.get=$s,f.gt=Hf,f.gte=Gf,f.has=function Th(e,n){return null!=e&&sc(e,n,zu)},f.hasIn=Xs,f.head=xc,f.identity=He,f.includes=function lf(e,n,i,s){e=Ue(e)?e:Bn(e),i=i&&!s?$(i):0;var l=e.length;return i<0&&(i=Ce(l+i,0)),Qi(e)?i<=l&&e.indexOf(n,i)>-1:!!l&&Lt(e,n,i)>-1},f.indexOf=function id(e,n,i){var s=null==e?0:e.length;if(!s)return-1;var l=null==i?0:$(i);return l<0&&(l=Ce(s+l,0)),Lt(e,n,l)},f.inRange=function Wh(e,n,i){return n=It(n),i===d?(i=n,n=0):i=It(i),function Ku(e,n,i){return e>=Ae(n,i)&&e<Ce(n,i)}(e=it(e),n,i)},f.invoke=kh,f.isArguments=un,f.isArray=K,f.isArrayBuffer=Wf,f.isArrayLike=Ue,f.isArrayLikeObject=ve,f.isBoolean=function Jf(e){return!0===e||!1===e||ge(e)&&De(e)==zt},f.isBuffer=Yt,f.isDate=Yf,f.isElement=function zf(e){return ge(e)&&1===e.nodeType&&!Cr(e)},f.isEmpty=function Qf(e){if(null==e)return!0;if(Ue(e)&&(K(e)||"string"==typeof e||"function"==typeof e.splice||Yt(e)||Rn(e)||un(e)))return!e.length;var n=ke(e);if(n==Ge||n==We)return!e.size;if(wr(e))return!Cs(e).length;for(var i in e)if(ee.call(e,i))return!1;return!0},f.isEqual=function Kf(e,n){return vr(e,n)},f.isEqualWith=function Vf(e,n,i){var s=(i="function"==typeof i?i:d)?i(e,n):d;return s===d?vr(e,n,d,i):!!s},f.isError=Ks,f.isFinite=function $f(e){return"number"==typeof e&&ha(e)},f.isFunction=Et,f.isInteger=Dc,f.isLength=zi,f.isMap=Rc,f.isMatch=function Xf(e,n){return e===n||bs(e,n,Ns(n))},f.isMatchWith=function jf(e,n,i){return i="function"==typeof i?i:d,bs(e,n,Ns(n),i)},f.isNaN=function eh(e){return Bc(e)&&e!=+e},f.isNative=function th(e){if(Zl(e))throw new _("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ma(e)},f.isNil=function rh(e){return null==e},f.isNull=function nh(e){return null===e},f.isNumber=Bc,f.isObject=he,f.isObjectLike=ge,f.isPlainObject=Cr,f.isRegExp=Vs,f.isSafeInteger=function ih(e){return Dc(e)&&e>=-lt&&e<=lt},f.isSet=Fc,f.isString=Qi,f.isSymbol=Qe,f.isTypedArray=Rn,f.isUndefined=function oh(e){return e===d},f.isWeakMap=function sh(e){return ge(e)&&ke(e)==$t},f.isWeakSet=function ah(e){return ge(e)&&"[object WeakSet]"==De(e)},f.join=function ud(e,n){return null==e?"":ou.call(e,n)},f.kebabCase=Vh,f.last=rt,f.lastIndexOf=function ld(e,n,i){var s=null==e?0:e.length;if(!s)return-1;var l=s;return i!==d&&(l=(l=$(i))<0?Ce(s+l,0):Ae(l,s-1)),n==n?function as(u,r,o){for(var a=o+1;a--;)if(u[a]===r)return a;return a}(e,n,l):Tn(e,ui,l,!0)},f.lowerCase=$h,f.lowerFirst=Xh,f.lt=ch,f.lte=uh,f.max=function Yp(e){return e&&e.length?Oi(e,He,xs):d},f.maxBy=function zp(e,n){return e&&e.length?Oi(e,J(n,2),xs):d},f.mean=function Qp(e){return li(e,He)},f.meanBy=function Kp(e,n){return li(e,J(n,2))},f.min=function Vp(e){return e&&e.length?Oi(e,He,Ss):d},f.minBy=function $p(e,n){return e&&e.length?Oi(e,J(n,2),Ss):d},f.stubArray=ia,f.stubFalse=oa,f.stubObject=function Fp(){return{}},f.stubString=function Zp(){return""},f.stubTrue=function Lp(){return!0},f.multiply=Xp,f.nth=function dd(e,n){return e&&e.length?Ia(e,$(n)):d},f.noConflict=function kp(){return be._===this&&(be._=jc),this},f.noop=ra,f.now=Wi,f.pad=function jh(e,n,i){e=se(e);var s=(n=$(n))?Ut(e):0;if(!n||s>=n)return e;var l=(n-s)/2;return Zi(Si(l),i)+e+Zi(Ci(l),i)},f.padEnd=function ep(e,n,i){e=se(e);var s=(n=$(n))?Ut(e):0;return n&&s<n?e+Zi(n-s,i):e},f.padStart=function tp(e,n,i){e=se(e);var s=(n=$(n))?Ut(e):0;return n&&s<n?Zi(n-s,i)+e:e},f.parseInt=function np(e,n,i){return i||null==n?n=0:n&&(n=+n),cu(se(e).replace(Gn,""),n||0)},f.random=function Jh(e,n,i){if(i&&"boolean"!=typeof i&&Re(e,n,i)&&(n=i=d),i===d&&("boolean"==typeof n?(i=n,n=d):"boolean"==typeof e&&(i=e,e=d)),e===d&&n===d?(e=0,n=1):(e=It(e),n===d?(n=e,e=0):n=It(n)),e>n){var s=e;e=n,n=s}if(i||e%1||n%1){var l=pa();return Ae(e+l*(n-e+qo("1e-"+((l+"").length-1))),n)}return Ms(e,n)},f.reduce=function gf(e,n,i){var s=K(e)?nr:di,l=arguments.length<3;return s(e,J(n,4),i,l,Ht)},f.reduceRight=function _f(e,n,i){var s=K(e)?Yo:di,l=arguments.length<3;return s(e,J(n,4),i,l,wa)},f.repeat=function rp(e,n,i){return n=(i?Re(e,n,i):n===d)?1:$(n),As(se(e),n)},f.replace=function ip(){var e=arguments,n=se(e[0]);return e.length<3?n:n.replace(e[1],e[2])},f.result=function Bh(e,n,i){var s=-1,l=(n=Wt(n,e)).length;for(l||(l=1,e=d);++s<l;){var h=null==e?d:e[mt(n[s])];h===d&&(s=l,h=i),e=Et(h)?h.call(e):h}return e},f.round=jp,f.runInContext=u,f.sample=function vf(e){return(K(e)?ma:ul)(e)},f.size=function wf(e){if(null==e)return 0;if(Ue(e))return Qi(e)?Ut(e):e.length;var n=ke(e);return n==Ge||n==We?e.size:Cs(e).length},f.snakeCase=op,f.some=function bf(e,n,i){var s=K(e)?rr:hl;return i&&Re(e,n,i)&&(n=d),s(e,J(n,3))},f.sortedIndex=function vd(e,n){return Pi(e,n)},f.sortedIndexBy=function yd(e,n,i){return ks(e,n,J(i,2))},f.sortedIndexOf=function xd(e,n){var i=null==e?0:e.length;if(i){var s=Pi(e,n);if(s<i&&ct(e[s],n))return s}return-1},f.sortedLastIndex=function wd(e,n){return Pi(e,n,!0)},f.sortedLastIndexBy=function bd(e,n,i){return ks(e,n,J(i,2),!0)},f.sortedLastIndexOf=function Cd(e,n){if(null!=e&&e.length){var s=Pi(e,n,!0)-1;if(ct(e[s],n))return s}return-1},f.startCase=ap,f.startsWith=function cp(e,n,i){return e=se(e),i=null==i?0:on($(i),0,e.length),n=ze(n),e.slice(i,i+n.length)==n},f.subtract=eg,f.sum=function tg(e){return e&&e.length?sr(e,He):0},f.sumBy=function ng(e,n){return e&&e.length?sr(e,J(n,2)):0},f.template=function up(e,n,i){var s=f.templateSettings;i&&Re(e,n,i)&&(n=d),e=se(e),n=Ki({},n,s,nc);var v,b,l=Ki({},n.imports,s.imports,nc),h=Se(l),m=cr(l,h),O=0,E=n.interpolate||Zt,P="__p += '",Z=ae((n.escape||Zt).source+"|"+E.source+"|"+(E===Er?mo:Zt).source+"|"+(n.evaluate||Zt).source+"|$","g"),q="//# sourceURL="+(ee.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Fo+"]")+"\n";e.replace(Z,function(z,te,ie,Ke,Be,Ve){return ie||(ie=Ke),P+=e.slice(O,Ve).replace(xo,ts),te&&(v=!0,P+="' +\n__e("+te+") +\n'"),Be&&(b=!0,P+="';\n"+Be+";\n__p += '"),ie&&(P+="' +\n((__t = ("+ie+")) == null ? '' : __t) +\n'"),O=Ve+z.length,z}),P+="';\n";var Y=ee.call(n,"variable")&&n.variable;if(Y){if(go.test(Y))throw new _("Invalid `variable` option passed into `_.template`")}else P="with (obj) {\n"+P+"\n}\n";P=(b?P.replace(so,""):P).replace(_n,"$1").replace(mn,"$1;"),P="function("+(Y||"obj")+") {\n"+(Y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(v?", __e = _.escape":"")+(b?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+P+"return __p\n}";var X=Qc(function(){return k(h,q+"return "+P).apply(d,m)});if(X.source=P,Ks(X))throw X;return X},f.times=function Np(e,n){if((e=$(e))<1||e>lt)return[];var i=$e,s=Ae(e,$e);n=J(n),e-=$e;for(var l=ar(s,n);++i<e;)n(i);return l},f.toFinite=It,f.toInteger=$,f.toLength=Lc,f.toLower=function lp(e){return se(e).toLowerCase()},f.toNumber=it,f.toSafeInteger=function lh(e){return e?on($(e),-lt,lt):0===e?e:0},f.toString=se,f.toUpper=function dp(e){return se(e).toUpperCase()},f.trim=function fp(e,n,i){if((e=se(e))&&(i||n===d))return fi(e);if(!e||!(n=ze(n)))return e;var s=Je(e),l=Je(n);return Jt(s,hi(s,l),pi(s,l)+1).join("")},f.trimEnd=function hp(e,n,i){if((e=se(e))&&(i||n===d))return e.slice(0,_i(e)+1);if(!e||!(n=ze(n)))return e;var s=Je(e);return Jt(s,0,pi(s,Je(n))+1).join("")},f.trimStart=function pp(e,n,i){if((e=se(e))&&(i||n===d))return e.replace(Gn,"");if(!e||!(n=ze(n)))return e;var s=Je(e);return Jt(s,hi(s,Je(n))).join("")},f.truncate=function gp(e,n){var i=30,s="...";if(he(n)){var l="separator"in n?n.separator:l;i="length"in n?$(n.length):i,s="omission"in n?ze(n.omission):s}var h=(e=se(e)).length;if(Nt(e)){var m=Je(e);h=m.length}if(i>=h)return e;var v=i-Ut(s);if(v<1)return s;var b=m?Jt(m,0,v).join(""):e.slice(0,v);if(l===d)return b+s;if(m&&(v+=b.length-v),Vs(l)){if(e.slice(v).search(l)){var O,E=b;for(l.global||(l=ae(l.source,se(Br.exec(l))+"g")),l.lastIndex=0;O=l.exec(E);)var P=O.index;b=b.slice(0,P===d?v:P)}}else if(e.indexOf(ze(l),v)!=v){var Z=b.lastIndexOf(l);Z>-1&&(b=b.slice(0,Z))}return b+s},f.unescape=function _p(e){return(e=se(e))&&ao.test(e)?e.replace(kr,cs):e},f.uniqueId=function qp(e){var n=++$c;return se(e)+n},f.upperCase=mp,f.upperFirst=js,f.each=Sc,f.eachRight=Tc,f.first=xc,na(f,function(){var e={};return gt(f,function(n,i){ee.call(f.prototype,i)||(e[i]=n)}),e}(),{chain:!1}),f.VERSION="4.17.21",Le(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){f[e].placeholder=f}),Le(["drop","take"],function(e,n){re.prototype[e]=function(i){i=i===d?1:Ce($(i),0);var s=this.__filtered__&&!n?new re(this):this.clone();return s.__filtered__?s.__takeCount__=Ae(i,s.__takeCount__):s.__views__.push({size:Ae(i,$e),type:e+(s.__dir__<0?"Right":"")}),s},re.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),Le(["filter","map","takeWhile"],function(e,n){var i=n+1,s=1==i||3==i;re.prototype[e]=function(l){var h=this.clone();return h.__iteratees__.push({iteratee:J(l,3),type:i}),h.__filtered__=h.__filtered__||s,h}}),Le(["head","last"],function(e,n){var i="take"+(n?"Right":"");re.prototype[e]=function(){return this[i](1).value()[0]}}),Le(["initial","tail"],function(e,n){var i="drop"+(n?"":"Right");re.prototype[e]=function(){return this.__filtered__?new re(this):this[i](1)}}),re.prototype.compact=function(){return this.filter(He)},re.prototype.find=function(e){return this.filter(e).head()},re.prototype.findLast=function(e){return this.reverse().find(e)},re.prototype.invokeMap=j(function(e,n){return"function"==typeof e?new re(this):this.map(function(i){return mr(i,e,n)})}),re.prototype.reject=function(e){return this.filter(Yi(J(e)))},re.prototype.slice=function(e,n){e=$(e);var i=this;return i.__filtered__&&(e>0||n<0)?new re(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),n!==d&&(i=(n=$(n))<0?i.dropRight(-n):i.take(n-e)),i)},re.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},re.prototype.toArray=function(){return this.take($e)},gt(re.prototype,function(e,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),s=/^(?:head|last)$/.test(n),l=f[s?"take"+("last"==n?"Right":""):n],h=s||/^find/.test(n);!l||(f.prototype[n]=function(){var m=this.__wrapped__,v=s?[1]:arguments,b=m instanceof re,O=v[0],E=b||K(m),P=function(te){var ie=l.apply(f,ht([te],v));return s&&Z?ie[0]:ie};E&&i&&"function"==typeof O&&1!=O.length&&(b=E=!1);var Z=this.__chain__,q=!!this.__actions__.length,Y=h&&!Z,X=b&&!q;if(!h&&E){m=X?m:new re(this);var z=e.apply(m,v);return z.__actions__.push({func:Hi,args:[P],thisArg:d}),new et(z,Z)}return Y&&X?e.apply(this,v):(z=this.thru(P),Y?s?z.value()[0]:z.value():z)})}),Le(["pop","push","shift","sort","splice","unshift"],function(e){var n=me[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",s=/^(?:pop|shift)$/.test(e);f.prototype[e]=function(){var l=arguments;if(s&&!this.__chain__){var h=this.value();return n.apply(K(h)?h:[],l)}return this[i](function(m){return n.apply(K(m)?m:[],l)})}}),gt(re.prototype,function(e,n){var i=f[n];if(i){var s=i.name+"";ee.call(On,s)||(On[s]=[]),On[s].push({name:n,func:i})}}),On[Bi(d,2).name]=[{name:"wrapper",func:d}],re.prototype.clone=function gu(){var e=new re(this.__wrapped__);return e.__actions__=Ne(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ne(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ne(this.__views__),e},re.prototype.reverse=function _u(){if(this.__filtered__){var e=new re(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},re.prototype.value=function mu(){var e=this.__wrapped__.value(),n=this.__dir__,i=K(e),s=n<0,l=i?e.length:0,h=function Ol(e,n,i){for(var s=-1,l=i.length;++s<l;){var h=i[s],m=h.size;switch(h.type){case"drop":e+=m;break;case"dropRight":n-=m;break;case"take":n=Ae(n,e+m);break;case"takeRight":e=Ce(e,n-m)}}return{start:e,end:n}}(0,l,this.__views__),m=h.start,v=h.end,b=v-m,O=s?v:m-1,E=this.__iteratees__,P=E.length,Z=0,q=Ae(b,this.__takeCount__);if(!i||!s&&l==b&&q==b)return Na(e,this.__actions__);var Y=[];e:for(;b--&&Z<q;){for(var X=-1,z=e[O+=n];++X<P;){var te=E[X],Ke=te.type,Be=(0,te.iteratee)(z);if(2==Ke)z=Be;else if(!Be){if(1==Ke)continue e;break e}}Y[Z++]=z}return Y},f.prototype.at=Yd,f.prototype.chain=function zd(){return Cc(this)},f.prototype.commit=function Qd(){return new et(this.value(),this.__chain__)},f.prototype.next=function Kd(){this.__values__===d&&(this.__values__=Zc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?d:this.__values__[this.__index__++]}},f.prototype.plant=function $d(e){for(var n,i=this;i instanceof Ai;){var s=_c(i);s.__index__=0,s.__values__=d,n?l.__wrapped__=s:n=s;var l=s;i=i.__wrapped__}return l.__wrapped__=e,n},f.prototype.reverse=function Xd(){var e=this.__wrapped__;if(e instanceof re){var n=e;return this.__actions__.length&&(n=new re(this)),(n=n.reverse()).__actions__.push({func:Hi,args:[Js],thisArg:d}),new et(n,this.__chain__)}return this.thru(Js)},f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=function jd(){return Na(this.__wrapped__,this.__actions__)},f.prototype.first=f.prototype.head,lr&&(f.prototype[lr]=function Vd(){return this}),f}();be._=c,(I=function(){return c}.call(G,T,G,Fe))!==d&&(Fe.exports=I)}.call(this)},2754:(Fe,G,T)=>{"use strict";G.TD=void 0;var d=T(4354);Object.defineProperty(G,"TD",{enumerable:!0,get:function(){return d.requestMediaPermissions}})},4354:function(Fe,G,T){"use strict";var I=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(G,"__esModule",{value:!0}),G.requestVideoPermissions=G.requestAudioPermissions=G.requestMediaPermissions=G.MediaPermissionsErrorType=void 0;const d=I(T(7230));var x,p;(p=x=G.MediaPermissionsErrorType||(G.MediaPermissionsErrorType={})).SystemPermissionDenied="SystemPermissionDenied",p.UserPermissionDenied="UserPermissionDenied",p.CouldNotStartVideoSource="CouldNotStartVideoSource",p.Generic="Generic",G.requestMediaPermissions=p=>new Promise((g,B)=>{navigator.mediaDevices.getUserMedia(p??{audio:!0,video:!0}).then(S=>{S.getTracks().forEach(y=>{y.stop()}),g(!0)}).catch(S=>{const M=d.default.getParser(window.navigator.userAgent).getBrowserName(),C=S.name,w=S.message;let R=x.Generic;"Chrome"===M?"NotAllowedError"===C?"Permission denied by system"===w?R=x.SystemPermissionDenied:"Permission denied"===w&&(R=x.UserPermissionDenied):"NotReadableError"===C&&(R=x.CouldNotStartVideoSource):"Safari"===M?"NotAllowedError"===C&&(R=x.UserPermissionDenied):"Microsoft Edge"===M?"NotAllowedError"===C?R=x.UserPermissionDenied:"NotReadableError"===C&&(R=x.CouldNotStartVideoSource):"Firefox"===M&&("NotFoundError"===C||"NotReadableError"===C?R=x.SystemPermissionDenied:"NotAllowedError"===C?R=x.UserPermissionDenied:"AbortError"===C&&(R=x.CouldNotStartVideoSource)),B({type:R,name:S.name,message:S.message})})}),G.requestAudioPermissions=()=>(0,G.requestMediaPermissions)({audio:!0,video:!1}),G.requestVideoPermissions=()=>(0,G.requestMediaPermissions)({audio:!1,video:!0})},5439:Fe=>{window,Fe.exports=function(G){var T={};function I(d){if(T[d])return T[d].exports;var x=T[d]={i:d,l:!1,exports:{}};return G[d].call(x.exports,x,x.exports,I),x.l=!0,x.exports}return I.m=G,I.c=T,I.d=function(d,x,A){I.o(d,x)||Object.defineProperty(d,x,{enumerable:!0,get:A})},I.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},I.t=function(d,x){if(1&x&&(d=I(d)),8&x||4&x&&"object"==typeof d&&d&&d.__esModule)return d;var A=Object.create(null);if(I.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:d}),2&x&&"string"!=typeof d)for(var D in d)I.d(A,D,function(t){return d[t]}.bind(null,D));return A},I.n=function(d){var x=d&&d.__esModule?function(){return d.default}:function(){return d};return I.d(x,"a",x),x},I.o=function(d,x){return Object.prototype.hasOwnProperty.call(d,x)},I.p="/dist/",I(I.s=1)}([function(G,T,I){"use strict";var d=this&&this.__awaiter||function(A,D,t,p){return new(t||(t=Promise))(function(g,B){function S(C){try{M(p.next(C))}catch(w){B(w)}}function y(C){try{M(p.throw(C))}catch(w){B(w)}}function M(C){var w;C.done?g(C.value):(w=C.value,w instanceof t?w:new t(function(R){R(w)})).then(S,y)}M((p=p.apply(A,D||[])).next())})},x=this&&this.__generator||function(A,D){var t,p,g,B,S={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return B={next:y(0),throw:y(1),return:y(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B;function y(M){return function(C){return function(w){if(t)throw new TypeError("Generator is already executing.");for(;B&&(B=0,w[0]&&(S=0)),S;)try{if(t=1,p&&(g=2&w[0]?p.return:w[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,w[1])).done)return g;switch(p=0,g&&(w=[2&w[0],g.value]),w[0]){case 0:case 1:g=w;break;case 4:return S.label++,{value:w[1],done:!1};case 5:S.label++,p=w[1],w=[0];continue;case 7:w=S.ops.pop(),S.trys.pop();continue;default:if(!((g=(g=S.trys).length>0&&g[g.length-1])||6!==w[0]&&2!==w[0])){S=0;continue}if(3===w[0]&&(!g||w[1]>g[0]&&w[1]<g[3])){S.label=w[1];break}if(6===w[0]&&S.label<g[1]){S.label=g[1],g=w;break}if(g&&S.label<g[2]){S.label=g[2],S.ops.push(w);break}g[2]&&S.ops.pop(),S.trys.pop();continue}w=D.call(A,S)}catch(R){w=[6,R],p=0}finally{t=g=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([M,C])}}};Object.defineProperty(T,"__esModule",{value:!0}),T.file2b64=void 0,T.file2b64=function(A){return d(this,void 0,void 0,function(){var D,t;return x(this,function(p){return D=new FileReader,t=new Promise(function(g,B){D.addEventListener("load",function(){var S,y=null===(S=D.result)||void 0===S?void 0:S.toString();y?g(y):B("could not convert file to base64")},!1)}),D.readAsDataURL(A),[2,t]})})}},function(G,T,I){"use strict";var d=this&&this.__awaiter||function(S,y,M,C){return new(M||(M=Promise))(function(w,R){function F(L){try{V(C.next(L))}catch(H){R(H)}}function W(L){try{V(C.throw(L))}catch(H){R(H)}}function V(L){var H;L.done?w(L.value):(H=L.value,H instanceof M?H:new M(function(oe){oe(H)})).then(F,W)}V((C=C.apply(S,y||[])).next())})},x=this&&this.__generator||function(S,y){var M,C,w,R,F={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return R={next:W(0),throw:W(1),return:W(2)},"function"==typeof Symbol&&(R[Symbol.iterator]=function(){return this}),R;function W(V){return function(L){return function(H){if(M)throw new TypeError("Generator is already executing.");for(;R&&(R=0,H[0]&&(F=0)),F;)try{if(M=1,C&&(w=2&H[0]?C.return:H[0]?C.throw||((w=C.return)&&w.call(C),0):C.next)&&!(w=w.call(C,H[1])).done)return w;switch(C=0,w&&(H=[2&H[0],w.value]),H[0]){case 0:case 1:w=H;break;case 4:return F.label++,{value:H[1],done:!1};case 5:F.label++,C=H[1],H=[0];continue;case 7:H=F.ops.pop(),F.trys.pop();continue;default:if(!((w=(w=F.trys).length>0&&w[w.length-1])||6!==H[0]&&2!==H[0])){F=0;continue}if(3===H[0]&&(!w||H[1]>w[0]&&H[1]<w[3])){F.label=H[1];break}if(6===H[0]&&F.label<w[1]){F.label=w[1],w=H;break}if(w&&F.label<w[2]){F.label=w[2],F.ops.push(H);break}w[2]&&F.ops.pop(),F.trys.pop();continue}H=y.call(S,F)}catch(oe){H=[6,oe],C=0}finally{M=w=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([V,L])}}};Object.defineProperty(T,"__esModule",{value:!0}),T.imageCompressor=void 0;var A=I(2),D=I(3),t=I(0),p=I(4),g=I(5),B=function(){function S(y,M){var C=this;this.quill=y,this.options=M||{};var w=!!M.debug;this.Logger=new g.ConsoleLogger(w,!!M.suppressErrorLogging),(0,D.warnAboutOptions)(M,this.Logger),this.imageDrop=new A.ImageDrop(y,function(W){return d(C,void 0,void 0,function(){var V;return x(this,function(L){switch(L.label){case 0:return this.Logger.log("onImageDrop",{dataUrl:W}),[4,this.downscaleImageFromUrl(W)];case 1:return V=L.sent(),this.insertToEditor(V,S.b64toBlob(V)),[2]}})})},this.Logger),this.Logger.log("fileChanged",{options:M,quill:y,debug:w});var F=this.quill.getModule("toolbar");F?F.addHandler("image",function(){return C.selectLocalImage()}):this.Logger.error("Quill toolbar module not found! need { toolbar: // options } in Quill.modules for image icon to sit in")}return S.b64toBlob=function(y){for(var M=atob(y.split(",")[1]),C=y.slice(5).split(";")[0],w=new ArrayBuffer(M.length),R=new Uint8Array(w),F=0;F<M.length;F++)R[F]=M.charCodeAt(F);return new Blob([w],{type:C})},S.prototype.selectLocalImage=function(y){var M=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=function(){return M.fileChanged().then(function(){return y&&y()})},document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){M.fileHolder&&document.body.removeChild(M.fileHolder)})},S.prototype.fileChanged=function(y){var M;return d(this,void 0,void 0,function(){var C,w,R,F;return x(this,function(W){switch(W.label){case 0:return(C=y||(null===(M=this.fileHolder)||void 0===M?void 0:M.files))&&C.length?(this.Logger.log("fileChanged",{file:w=C[0]}),w?[4,(0,t.file2b64)(w)]:[2]):[2];case 1:return R=W.sent(),[4,this.downscaleImageFromUrl(R)];case 2:return F=W.sent(),this.insertToEditor(F,S.b64toBlob(F)),[2]}})})},S.prototype.downscaleImageFromUrl=function(y){return d(this,void 0,void 0,function(){var M;return x(this,function(C){switch(C.label){case 0:return[4,(0,p.downscaleImage)(this.Logger,y,this.options.maxWidth,this.options.maxHeight,this.options.imageType,this.options.keepImageTypes,this.options.ignoreImageTypes,this.options.quality)];case 1:return M=C.sent(),this.Logger.log("downscaleImageFromUrl",{dataUrl:y,dataUrlCompressed:M}),[2,M]}})})},S.prototype.insertToEditor=function(y,M){if(this.options.insertIntoEditor)this.options.insertIntoEditor(y,M);else{this.Logger.log("insertToEditor",{url:y}),this.range=this.quill.getSelection();var C=this.range;if(!C)return;this.logFileSize(y),this.quill.insertEmbed(C.index,"image","".concat(y),"user"),C.index++,this.quill.setSelection(C,"api")}},S.prototype.logFileSize=function(y){var M=(Math.round(3*(y.length-22)/4)/1024).toFixed(0);this.Logger.log("estimated img size: "+M+" kb")},S}();T.imageCompressor=B,window.imageCompressor=B,T.default=B},function(G,T,I){"use strict";var d=this&&this.__awaiter||function(B,S,y,M){return new(y||(y=Promise))(function(C,w){function R(V){try{W(M.next(V))}catch(L){w(L)}}function F(V){try{W(M.throw(V))}catch(L){w(L)}}function W(V){var L;V.done?C(V.value):(L=V.value,L instanceof y?L:new y(function(H){H(L)})).then(R,F)}W((M=M.apply(B,S||[])).next())})},x=this&&this.__generator||function(B,S){var y,M,C,w,R={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return w={next:F(0),throw:F(1),return:F(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function F(W){return function(V){return function(L){if(y)throw new TypeError("Generator is already executing.");for(;w&&(w=0,L[0]&&(R=0)),R;)try{if(y=1,M&&(C=2&L[0]?M.return:L[0]?M.throw||((C=M.return)&&C.call(M),0):M.next)&&!(C=C.call(M,L[1])).done)return C;switch(M=0,C&&(L=[2&L[0],C.value]),L[0]){case 0:case 1:C=L;break;case 4:return R.label++,{value:L[1],done:!1};case 5:R.label++,M=L[1],L=[0];continue;case 7:L=R.ops.pop(),R.trys.pop();continue;default:if(!((C=(C=R.trys).length>0&&C[C.length-1])||6!==L[0]&&2!==L[0])){R=0;continue}if(3===L[0]&&(!C||L[1]>C[0]&&L[1]<C[3])){R.label=L[1];break}if(6===L[0]&&R.label<C[1]){R.label=C[1],C=L;break}if(C&&R.label<C[2]){R.label=C[2],R.ops.push(L);break}C[2]&&R.ops.pop(),R.trys.pop();continue}L=S.call(B,R)}catch(H){L=[6,H],M=0}finally{y=C=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}([W,V])}}};Object.defineProperty(T,"__esModule",{value:!0}),T.ImageDrop=void 0;var A=I(0),D=function(){function B(S,y,M){var C=this;this.quill=S,this.onNewDataUrl=y,this.logger=M,this.quill.root.addEventListener("drop",function(w){return C.handleDrop(w)},!1),this.quill.root.addEventListener("paste",function(w){return C.handlePaste(w)},!1)}return B.prototype.handleDrop=function(S){return d(this,void 0,void 0,function(){var y,M,C,w,R,F,W;return x(this,function(V){switch(V.label){case 0:return S.preventDefault(),document.caretRangeFromPoint&&(y=document.getSelection(),M=document.caretRangeFromPoint(S.clientX,S.clientY),y&&M&&y.setBaseAndExtent(M.startContainer,M.startOffset,M.startContainer,M.startOffset)),[4,p(S)];case 1:return C=V.sent(),w=Array.from(C||[]).filter(function(L){return g(L.type)}),(R=w?.[0])?[4,(0,A.file2b64)(R)]:[3,3];case 2:return W=V.sent(),this.logger.log("handleNewImageFiles",{evt:S,files:C,filesFiltered:w,firstImage:R,base64ImageSrc:W}),this.onNewDataUrl(W),[2];case 3:return[4,t(S)];case 4:return(F=V.sent())?[4,(0,A.file2b64)(F)]:[3,6];case 5:return W=V.sent(),this.logger.log("handleNewImageFiles",{evt:S,blob:F,base64ImageSrc:W}),this.onNewDataUrl(W),[2];case 6:return[2]}})})},B.prototype.handlePaste=function(S){var y,M;return d(this,void 0,void 0,function(){var C,w,R,F;return x(this,function(W){switch(W.label){case 0:return C=Array.from((null===(y=S?.clipboardData)||void 0===y?void 0:y.items)||[]),this.logger.log("handlePaste",{files:C,evt:S}),w=C.filter(function(V){return g(V.type)}),this.logger.log("handlePaste",{images:w,evt:S}),w.length?w.filter(function(V){return"text/html"!==V.type}).length?(S.preventDefault(),(R=null===(M=w.pop())||void 0===M?void 0:M.getAsFile())?[4,(0,A.file2b64)(R)]:[2]):(this.logger.log("handlePaste also detected html"),[2]):[2];case 1:return F=W.sent(),this.logger.log("handleNewImageFiles",{base64ImageSrc:F}),this.onNewDataUrl(F),[2]}})})},B}();function t(B){var S;return d(this,void 0,void 0,function(){var y;return x(this,function(M){switch(M.label){case 0:return(y=null===(S=B.dataTransfer)||void 0===S?void 0:S.getData("URL"))?[4,fetch(y)]:[3,3];case 1:return[4,M.sent().blob()];case 2:return[2,M.sent()];case 3:return[2]}})})}function p(B){var S;return d(this,void 0,void 0,function(){return x(this,function(y){return[2,null===(S=B?.dataTransfer)||void 0===S?void 0:S.files]})})}function g(B){return!!B.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)/i)}T.ImageDrop=D},function(G,T,I){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.warnAboutOptions=void 0,T.warnAboutOptions=function(d,x){d.maxWidth=d.maxWidth||1e3,d.maxHeight=d.maxHeight||1e3,d.maxWidth&&"number"!=typeof d.maxWidth&&(x.warn("[config error] 'maxWidth' is required to be a \"number\" (in pixels), \nreceived: ".concat(d.maxWidth,"\n-> using default 1000")),d.maxWidth=1e3),d.maxHeight&&"number"!=typeof d.maxHeight&&(x.warn("[config error] 'maxHeight' is required to be a \"number\" (in pixels), \nreceived: ".concat(d.maxHeight,"\n-> using default 1000")),d.maxHeight=1e3),d.quality&&"number"!=typeof d.quality&&(x.warn("quill.imageCompressor: [config error] 'quality' is required to be a \"number\", \nreceived: ".concat(d.quality,"\n-> using default 0.7")),d.quality=.7),!d.imageType||"string"==typeof d.imageType&&d.imageType.startsWith("image/")||(x.warn('quill.imageCompressor: [config error] \'imageType\' is required be in the form of "image/png" or "image/jpeg" etc ..., \nreceived: '.concat(d.imageType,"\n-> using default image/jpeg")),d.imageType="image/jpeg"),d.keepImageTypes||(d.keepImageTypes=[]),d.keepImageTypes&&!Array.isArray(d.keepImageTypes)&&(x.warn("quill.imageCompressor: [config error] 'keepImageTypes' is required to be a \"array\", received: ".concat(d.keepImageTypes," -> using default []")),d.keepImageTypes=[]),d.ignoreImageTypes||(d.ignoreImageTypes=[]),d.ignoreImageTypes&&!Array.isArray(d.ignoreImageTypes)&&(x.warn("quill.imageCompressor: [config error] 'ignoreImageTypes' is required to be a \"array\", received: ".concat(d.ignoreImageTypes," -> using default []")),d.ignoreImageTypes=[]),d.insertIntoEditor&&"function"!=typeof d.insertIntoEditor&&(x.warn("quill.imageCompressor: [config error] 'insertIntoEditor' is required to be a \"function\", received: ".concat(d.insertIntoEditor," -> using default undefined")),d.insertIntoEditor=void 0)}},function(G,T,I){"use strict";var d=this&&this.__awaiter||function(A,D,t,p){return new(t||(t=Promise))(function(g,B){function S(C){try{M(p.next(C))}catch(w){B(w)}}function y(C){try{M(p.throw(C))}catch(w){B(w)}}function M(C){var w;C.done?g(C.value):(w=C.value,w instanceof t?w:new t(function(R){R(w)})).then(S,y)}M((p=p.apply(A,D||[])).next())})},x=this&&this.__generator||function(A,D){var t,p,g,B,S={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return B={next:y(0),throw:y(1),return:y(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B;function y(M){return function(C){return function(w){if(t)throw new TypeError("Generator is already executing.");for(;B&&(B=0,w[0]&&(S=0)),S;)try{if(t=1,p&&(g=2&w[0]?p.return:w[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,w[1])).done)return g;switch(p=0,g&&(w=[2&w[0],g.value]),w[0]){case 0:case 1:g=w;break;case 4:return S.label++,{value:w[1],done:!1};case 5:S.label++,p=w[1],w=[0];continue;case 7:w=S.ops.pop(),S.trys.pop();continue;default:if(!((g=(g=S.trys).length>0&&g[g.length-1])||6!==w[0]&&2!==w[0])){S=0;continue}if(3===w[0]&&(!g||w[1]>g[0]&&w[1]<g[3])){S.label=w[1];break}if(6===w[0]&&S.label<g[1]){S.label=g[1],g=w;break}if(g&&S.label<g[2]){S.label=g[2],S.ops.push(w);break}g[2]&&S.ops.pop(),S.trys.pop();continue}w=D.call(A,S)}catch(R){w=[6,R],p=0}finally{t=g=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([M,C])}}};Object.defineProperty(T,"__esModule",{value:!0}),T.downscaleImage=void 0,T.downscaleImage=function(A,D,t,p,g,B,S,y){return d(this,void 0,void 0,function(){var M,C,w,R,F,W,V,L;return x(this,function(H){switch(H.label){case 0:return M=D.split(";")[0].split(":")[1],g=g||"image/jpeg",y=y||.7,(C=new Image).src=D,[4,new Promise(function(oe){C.onload=function(){oe()}})];case 1:return H.sent(),w=function(oe,xe,we,ce){if(we&&ce&&oe<=we&&xe<=ce)return[oe,xe];if(we&&oe>we){var ue=we,_e=Math.floor(xe/oe*ue);if(ce&&_e>ce){var vt=ce;return[Math.floor(oe/xe*vt),vt]}return[ue,_e]}return ce&&xe>ce?(_e=ce,[ue=Math.floor(oe/xe*_e),_e]):[xe,oe]}(C.width,C.height,t,p),R=w[0],F=w[1],(W=document.createElement("canvas")).width=R,W.height=F,V=W.getContext("2d"),"image/jpeg"===g&&(V.fillStyle="#FFFFFF",V.fillRect(0,0,C.width,C.height)),S?.includes(M)?[2,D]:(B?.includes(M)&&(g=M),V.drawImage(C,0,0,R,F),L=W.toDataURL(g,y),A.log("downscaling image...",{args:{dataUrl:D,maxWidth:t,maxHeight:p,imageType:g,ignoreImageTypes:S,keepImageTypes:B,imageQuality:y},newHeight:F,newWidth:R}),[2,L])}})})}},function(G,T,I){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.ConsoleLogger=void 0;var d=function(){function x(A,D){this.debug=A,this.suppressErrorLogging=D}return x.prototype.prefixString=function(){return"</> quill-image-compress: "},Object.defineProperty(x.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"error",{get:function(){return this.suppressErrorLogging?function(){}:console.error.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"warn",{get:function(){return this.suppressErrorLogging?function(){}:console.warn.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),x}();T.ConsoleLogger=d}])}}]);
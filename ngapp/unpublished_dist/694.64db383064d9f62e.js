(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[694],{3694:(Fe,Y,k)=>{"use strict";k.r(Y),k.d(Y,{StudentModule:()=>hi});var D=k(6895),l=k(1390),w=k(970),E=k(4633),B=k(8977),t=k(4650),h=k(5412);let _=(()=>{class a{canDeactivate(r,s,u){return!!r.storySaved||(r.showModal(),r.modalChoice)}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),N=(()=>{class a{constructor(r,s){this.dialog=r,this.ts=s}canDeactivate(r){if(r.recordingSaved)return!0;let s;return s=this.dialog.open(E.p,{data:{title:this.ts.l.save_changes_made_to_this_recording,type:"",confirmText:this.ts.l.save,cancelText:this.ts.l.cancel},width:"30vh"}),s.afterClosed().subscribe(u=>{if(s=void 0,u)return r.saveRecordings(),!0}),!1}}return a.\u0275fac=function(r){return new(r||a)(t.LFG(h.uw),t.LFG(B.D))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),A=(()=>{class a{canDeactivate(r,s,u){if(r.chosenSections)for(const v of r.chosenSections)v.stop();return!0}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var x=k(5861),O=k(4412);class M extends O.i{constructor(){super(...arguments),this.createdWithPrompts=!1}}var b=k(1765),Z=k(1745),U=k(1512),z=k(6469),X=k(4687),H=k(1245),W=k(25),ae=k(5042),we=k(530),be=k(8443);let le=(()=>{class a{transform(r,s){return r?s?(s=s.toLocaleLowerCase(),r.filter(u=>u instanceof be.n?u.username.toLocaleLowerCase().includes(s):u instanceof M?u.title.toLocaleLowerCase().includes(s)||u.text.toLocaleLowerCase().includes(s):void 0)):r:[]}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275pipe=t.Yjl({name:"appFilter",type:a,pure:!0}),a})();var de=k(3905),ve=k(4006),Pt=k(9121);function Ki(a,g){1&a&&(t.TgZ(0,"div",17),t._UZ(1,"grid-spinner"),t.qZA())}function Vi(a,g){if(1&a&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&a){const r=t.oxw();t.xp6(1),t.hij(" ",r.ts.l.click_new_story," ")}}function Er(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"input",23),t.NdJ("click",function(){t.CHM(r);const u=t.oxw().$implicit,v=t.oxw();return t.KtG(v.toggleDelete(u._id))}),t.qZA()}}function $i(a,g){if(1&a&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&a){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,r.lastUpdated,"M/d/yy, h:mm a"))}}function Xi(a,g){if(1&a&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&a){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,r.lastUpdated,"d/M/yy, h:mm a"))}}const yt=function(a){return["../dashboard",a]};function ft(a,g){if(1&a&&(t.TgZ(0,"div")(1,"div",18)(2,"div",19),t.YNc(3,Er,1,0,"input",20),t.TgZ(4,"div",21),t._uU(5),t.qZA()(),t.YNc(6,$i,3,4,"div",22),t.YNc(7,Xi,3,4,"div",22),t.qZA(),t._UZ(8,"hr"),t.qZA()),2&a){const r=g.$implicit,s=t.oxw();t.xp6(3),t.Q6J("ngIf",s.deleteMode),t.xp6(1),t.Q6J("searchedWord",s.searchText)("content",r.title)("classToApply","font-weight-bold")("setTitle","true")("routerLink",t.VKq(9,yt,r._id)),t.xp6(1),t.hij(" ",r.title," "),t.xp6(1),t.Q6J("ngIf",s.isFromAmerica),t.xp6(1),t.Q6J("ngIf",!s.isFromAmerica)}}function ji(a,g){if(1&a&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.unreadMessages," ")}}function hn(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(r);const u=t.oxw();return t.KtG(u.goToMessages())}),t._uU(1),t.YNc(2,ji,2,1,"span",26),t.qZA()}if(2&a){const r=t.oxw();t.xp6(1),t.hij(" ",r.ts.l.messages," "),t.xp6(1),t.Q6J("ngIf",r.unreadMessages>0)}}function Xe(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(r);const u=t.oxw();return t.KtG(u.goToStats())}),t._uU(1),t.qZA()}if(2&a){const r=t.oxw();t.xp6(1),t.hij(" ",r.ts.l.stats," ")}}let eo=(()=>{class a{constructor(r,s,u,v,p,T,C,F,L,J,ie){this.storyService=r,this.auth=s,this.engagement=u,this.ts=v,this.router=p,this.messageService=T,this.profileService=C,this.classroomService=F,this.notificationService=L,this.recordingService=J,this.dialog=ie,this.stories=[],this.toBeDeleted=[],this.userId="",this.messagesForNotifications=[],this.unreadMessages=0,this.isFromAmerica=!1,this.isEnrolled=!1,this.searchText="",this.storiesLoaded=!1}ngOnInit(){var r=this;return(0,x.Z)(function*(){const s=r.auth.getUserDetails();s?(r.stories=(yield(0,de.z)(r.storyService.getStoriesForLoggedInUser())).map(u=>(new M).fromJSON(u)),r.stories.sort((u,v)=>u.date>v.date?-1:1),r.storiesLoaded=!0,r.userId=s._id,r.deleteMode=!1,r.toBeDeleted=[],r.notificationService.getStudentNotifications(),r.classroomService.getClassroomOfStudent(r.userId).subscribe(u=>{r.isEnrolled=null!=u}),r.messageService.getMessagesForLoggedInUser().subscribe(u=>{r.messagesForNotifications=u,r.unreadMessages=r.messageService.getNumberOfUnreadMessages(r.messagesForNotifications)}),r.profileService.getForUser(r.userId).subscribe(u=>{let p=u.profile.country;r.isFromAmerica="United States of America"==p||"America"==p||"USA"==p||"United States"==p},u=>{r.router.navigateByUrl("/register-profile")})):r.auth.logout()})()}toggleDeleteMode(){if(this.deleteMode&&this.toBeDeleted.length>0)for(let r of this.toBeDeleted)this.engagement.addEventForLoggedInUser(U.tw["DELETE-STORY"],{_id:r}),this.recordingService.deleteStoryRecordingAudio(r).subscribe(s=>{}),this.recordingService.deleteStoryRecording(r).subscribe(s=>{}),this.storyService.deleteStory(r).subscribe(s=>{this.ngOnInit()});else this.deleteMode=!this.deleteMode||0!==this.toBeDeleted.length}toggleEditMode(){this.editMode=!this.editMode}toggleDelete(r){if(this.toBeDeleted.includes(r)){var s=this.toBeDeleted.indexOf(r);this.toBeDeleted.splice(s,1)}else this.toBeDeleted.push(r)}goToMessages(){this.router.navigateByUrl("/messages/"+this.userId)}goToStats(){this.router.navigateByUrl("/stats-dashboard/"+this.userId)}createNewStory(){var r=this;this.dialogRef=this.dialog.open(E.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var s=(0,x.Z)(function*(u){if(r.dialogRef=void 0,u)if(u[0]){let v="connemara";u[1]==r.ts.l.munster&&(v="kerry"),u[1]==r.ts.l.ulster&&(v="donegal"),r.storyService.saveStory(r.auth.getUserDetails()._id,u[0],new Date,v,"",r.auth.getUserDetails().username,!1)}else alert(r.ts.l.title_required)});return function(u){return s.apply(this,arguments)}}())}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(b.N),t.Y36(Z.$),t.Y36(z.M),t.Y36(B.D),t.Y36(l.F0),t.Y36(H.e),t.Y36(X.H),t.Y36(W.u),t.Y36(ae.g),t.Y36(we.s),t.Y36(h.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-book-contents"]],features:[t._Bn([le])],decls:27,vars:17,consts:[[1,"bookContainer"],[1,"contentsContainer"],[1,"bookContentsTitle"],[1,"contentsTitleContainer"],[1,"contentsLinkTitle"],[1,"contentsDateTitle"],["role","main"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"contentsLinkContainer"],["class","newStoryMessage",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"contentsBtnsContainer"],[1,"btn","deleteBtn",3,"click"],["src","assets/img/trash.ico",1,"trashImg"],["class","btn messagesBtn",3,"click",4,"ngIf"],["data-cy","create-story",1,"btn","newStoryBtn",3,"click"],[1,"newStoryMessage"],[1,"contentSection"],[1,"contentsLink"],["type","checkbox","class","deleteCheckbox",3,"click",4,"ngIf"],["appHighlight","",3,"searchedWord","content","classToApply","setTitle","routerLink"],["class","contentsDate",4,"ngIf"],["type","checkbox",1,"deleteCheckbox",3,"click"],[1,"contentsDate"],[1,"btn","messagesBtn",3,"click"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",6)(10,"div")(11,"div",7)(12,"input",8),t.NdJ("ngModelChange",function(v){return s.searchText=v}),t.qZA()()()(),t.TgZ(13,"div",9)(14,"div"),t._uU(15),t.qZA(),t.YNc(16,Ki,2,0,"div",10),t.YNc(17,Vi,2,1,"div",10),t.YNc(18,ft,9,11,"div",11),t.ALo(19,"appFilter"),t.qZA(),t.TgZ(20,"div",12)(21,"button",13),t.NdJ("click",function(){return s.toggleDeleteMode()}),t._UZ(22,"img",14),t.qZA(),t.YNc(23,hn,3,2,"button",15),t.YNc(24,Xe,2,1,"button",15),t.TgZ(25,"button",16),t.NdJ("click",function(){return s.createNewStory()}),t._uU(26),t.qZA()()()()),2&r&&(t.xp6(3),t.Oqu(s.ts.l.my_stories),t.xp6(3),t.Oqu(s.ts.l.title),t.xp6(2),t.Oqu(s.ts.l.last_updated),t.xp6(4),t.s9C("placeholder",s.ts.l.search_story_title_or_content),t.Q6J("ngModel",s.searchText),t.xp6(3),t.hij(" ",s.ts.l.loading," "),t.xp6(1),t.Q6J("ngIf",!s.storiesLoaded),t.xp6(1),t.Q6J("ngIf",0===s.stories.length&&s.storiesLoaded),t.xp6(1),t.Q6J("ngForOf",t.xi3(19,14,s.stories,s.searchText)),t.xp6(3),t.ekj("deleteModeBtn",s.deleteMode),t.xp6(2),t.Q6J("ngIf",s.isEnrolled),t.xp6(1),t.Q6J("ngIf",s.stories.length>0),t.xp6(2),t.hij("",s.ts.l.new_story," "))},dependencies:[D.sg,D.O5,l.rH,ve.Fj,ve.JJ,ve.On,Pt.P,D.uU,le],styles:[".bookContainer[_ngcontent-%COMP%]{height:auto;width:80%;background:url(https://www.abair.ie/scealai/assets/img/paperBg.jpg) no-repeat center fixed;margin-left:10%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.contentsContainer[_ngcontent-%COMP%]{padding:20px}.bookContentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);padding-left:5%;padding-right:5%;display:inline-block;font-size:18pt}.contentsLinkContainer[_ngcontent-%COMP%]{height:500px;overflow:auto;padding:10px;background-color:#f7f2e7;box-shadow:inset 0 0 12px #00000080;border-radius:5px}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.contentsDate[_ngcontent-%COMP%]{color:var(--dark-text)}.contentsBtnsContainer[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:1rem}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;padding:2px 7px 7px;height:38px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:24px}.messagesBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;border-radius:5px;display:flex}.messagesBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.newStoryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.newStoryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}@media only screen and (max-width: 700px){.contentsContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%}.contentsLinkContainer[_ngcontent-%COMP%]{height:270px;padding-top:10px}.contentsLinkTitle[_ngcontent-%COMP%], .contentsDateTitle[_ngcontent-%COMP%]{font-size:12pt}.optionsPopupBtn[_ngcontent-%COMP%]{padding:2px 5px 5px;margin:0 4px 0 0;height:30px;font-size:12pt}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:0 3px 3px;height:30px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:20px}}.newStoryMessage[_ngcontent-%COMP%]{color:#a79d88;width:80%;margin-left:10%;margin-top:30px}@media only screen and (min-width: 700px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}@media only screen and (min-width: 1400px) and (min-height: 800px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}"]}),a})();var st=k(7579),Ir=k(1884),Dt=k(9971),xt=k.n(Dt),to=k(5439),zt=k.n(to),Qt=k(7489),Rt=k(4186),pn=k(5592),Oe=k(9742),Pr=k(6618);let Ge=(()=>{class a{constructor(){}convertHtmlTextToArrayOfSentences(r){return this.sentences(this.convertHtmlToPlainText(r))}sentences(r){return this.naiveSentences(r)}splitWithReplacement(r,s){const u=r.split(s);return u.slice(0,-1).filter(Boolean).map(v=>v+s).concat(u.slice(-1).filter(Boolean))}extraShortening(r){return r.flatMap(s=>" "==s?[]:s.charAt(100)?this.splitWithReplacement(s,","):[s])}naiveSentences(r){let s=r.split("\n").filter(Boolean);for(const u of[".","!","?"])s=s.flatMap(v=>this.splitWithReplacement(v,u));return this.extraShortening(s)}convertHtmlToPlainText(r){const s=document.createElement("div");return s.innerHTML=r,s.textContent||s.innerText||""}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Ft=k(9549),Dr=k(4385),We=k(3238);function Rr(a,g){if(1&a&&(t.TgZ(0,"mat-option",3),t._uU(1),t.qZA()),2&a){const r=g.$implicit,s=t.oxw();t.s9C("gender",r.gender),t.Q6J("value",r),t.xp6(1),t.hij(" ",r.note+r.name+" ("+s.ts.message(r.dialect)+") "," ")}}let no=(()=>{class a{constructor(r){this.ts=r,this.voices=Oe.be,this.selected=this.voices[0],this.selectVoice=new t.vpe}ngOnInit(){this.selectVoice.emit(this.selected)}color(r){return r.startsWith("f")?"rgba(255, 191, 194)":"rgba(194, 218, 255)"}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(B.D))},a.\u0275cmp=t.Xpm({type:a,selectors:[["synth-voice-select"]],outputs:{selectVoice:"selectVoice"},decls:5,vars:3,consts:[["appearance","fill"],[3,"value","valueChange","selectionChange"],["matNativeControl","","required","",3,"gender","value",4,"ngFor","ngForOf"],["matNativeControl","","required","",3,"gender","value"]],template:function(r,s){1&r&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",1),t.NdJ("valueChange",function(v){return s.selected=v})("selectionChange",function(v){return s.selectVoice.emit(v.value)}),t.YNc(4,Rr,2,3,"mat-option",2),t.qZA()()),2&r&&(t.xp6(2),t.Oqu(s.ts.message("voice")),t.xp6(1),t.Q6J("value",s.selected),t.xp6(1),t.Q6J("ngForOf",s.voices))},dependencies:[D.sg,Ft.KE,Ft.hX,Dr.gD,We.ey],encapsulation:2}),a})();const Kt=["voiceSelect"];function Je(a,g){1&a&&t._UZ(0,"div",11)}function Vt(a,g){1&a&&t._UZ(0,"div",11)}function gn(a,g){if(1&a&&t._UZ(0,"app-synth-item",12),2&a){const r=g.$implicit,s=g.index,u=t.oxw();t.Q6J("synthItem",r)("i",s)("storyId",u.storyId)}}let ro=(()=>{class a{constructor(r,s,u,v,p){this.router=r,this.textProcessor=s,this.cdref=u,this.synth=v,this.ts=p,this.hideEntireSynthesisPlayer=!0,this.synthItems=[],this.allAudioSources=[]}ngOnInit(){this.refresh()}refresh(r){r&&(this.selected=r),this.synthItems.map(s=>{s.audioUrl=void 0,s.dispose()}),this.text&&setTimeout(()=>{this.synthItems=this.textProcessor.sentences(this.text).map(s=>this.getSynthItem(s)),this.cdref.detectChanges(),this.audio=null},50)}getSynthItem(r){return new Pr.e(r,this.selected,this.synth)}audioLoaded(){return this.synthItems.every(r=>null!=r.audioUrl||r.exceptions.length>0)}combineAndPlayAudio(){var r=this;return(0,x.Z)(function*(){r.audio||(yield r.combineAudioSources()),r.playAllAudio()})()}combineAudioSources(){var r=this;return(0,x.Z)(function*(){r.allAudioSources=r.synthItems.map(u=>u.audioUrl);let s=r.allAudioSources.map(u=>fetch(u).then(v=>v.blob()));yield Promise.all(s).then(u=>{let v=new Blob(u);r.blobUrl=URL.createObjectURL(v),r.audio=new Audio(r.blobUrl)})})()}playAllAudio(){this.audio.paused?this.audio.play():(this.audio.pause(),this.audio.currentTime=0)}downloadAudio(){var r=this;return(0,x.Z)(function*(){r.audio||(yield r.combineAudioSources());const s=document.createElement("a");s.style.display="none",s.href=r.blobUrl,s.download=r.storyTitle+".mp3",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r.blobUrl)})()}goToFastSynthesiser(){this.router.navigateByUrl("/student/synthesis/"+this.storyId)}stopSynthesis(){this.synthItems.map(r=>{r.audioUrl=void 0,r.dispose()})}toggleHidden(){this.hideEntireSynthesisPlayer=!this.hideEntireSynthesisPlayer,this.refresh()}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(l.F0),t.Y36(Ge),t.Y36(t.sBO),t.Y36(Oe.cf),t.Y36(B.D))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-synthesis-player"]],viewQuery:function(r,s){if(1&r&&t.Gf(Kt,5),2&r){let u;t.iGM(u=t.CRH())&&(s.voiceSelect=u.first)}},inputs:{storyId:"storyId",text:"text",storyTitle:"storyTitle"},decls:22,vars:11,consts:[[1,"synth",3,"hidden"],[1,"synthHeader"],[1,"reload",3,"click"],[3,"selectVoice"],[1,"fast-synth",3,"click"],[1,"btnContainer",2,"justify-content","space-between"],[1,"playAllButton",2,"text-align","center","width","100px",3,"disabled","click"],["class","spinner-grow","style","width: 1rem; height: 1rem;",4,"ngIf"],[1,"playAllButton",2,"text-align","center","width","150px",3,"disabled","click"],[1,"items"],[3,"synthItem","i","storyId",4,"ngFor","ngForOf"],[1,"spinner-grow",2,"width","1rem","height","1rem"],[3,"synthItem","i","storyId"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0)(1,"div")(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()(),t.TgZ(6,"div",1)(7,"div",2),t.NdJ("click",function(){return s.refresh()}),t._uU(8,"\u21bb"),t.qZA(),t.TgZ(9,"synth-voice-select",3),t.NdJ("selectVoice",function(v){return s.refresh(v)}),t.qZA(),t.TgZ(10,"div",4),t.NdJ("click",function(){return s.goToFastSynthesiser()}),t._uU(11),t.qZA()(),t.TgZ(12,"div",5)(13,"button",6),t.NdJ("click",function(){return s.combineAndPlayAudio()}),t.YNc(14,Je,1,0,"div",7),t._uU(15),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){return s.downloadAudio()}),t.YNc(17,Vt,1,0,"div",7),t._uU(18),t.qZA()(),t._UZ(19,"hr"),t.TgZ(20,"div",9),t.YNc(21,gn,1,3,"app-synth-item",10),t.qZA()()),2&r&&(t.Q6J("hidden",s.hideEntireSynthesisPlayer),t.xp6(3),t.Oqu(s.ts.l.listen_back_to_your_story?s.ts.l.listen_back_to_your_story:"listen_back_to_your_story"),t.xp6(2),t.hij("(",s.ts.l.dnn_synthesiser?s.ts.l.dnn_synthesiser:"dnn_synthesiser",")"),t.xp6(6),t.hij(" ",s.ts.l.go_to_fast_synthesiser?s.ts.l.go_to_fast_synthesiser:"go_to_fast_synthesiser"," "),t.xp6(2),t.Q6J("disabled",!s.audioLoaded()),t.xp6(1),t.Q6J("ngIf",!s.audioLoaded()),t.xp6(1),t.hij(" ",s.ts.l.play," "),t.xp6(1),t.Q6J("disabled",!s.audioLoaded()),t.xp6(1),t.Q6J("ngIf",!s.audioLoaded()),t.xp6(1),t.hij(" ",s.ts.l.download," "),t.xp6(3),t.Q6J("ngForOf",s.synthItems))},dependencies:[D.sg,D.O5,no],styles:[".synth[_ngcontent-%COMP%]{display:grid;padding:20px;border-radius:15px;margin:30px;background-color:#ffffff80;border:2px}.synthHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]{font-family:Lucida Sans Unicode;font-size:20px;width:2rem;height:2rem;border-radius:.5em;padding:0;margin:0;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]:hover{color:#000;font-weight:700}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]{padding:3px;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]:hover{color:#000;border-radius:2px;font-weight:700}.items[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:3px;padding-left:1rem;padding-top:1rem;border-radius:3px;text-align:left;flex-wrap:wrap;justify-content:left}.playAllButton[_ngcontent-%COMP%]{padding:5px;border-radius:5px;border:none;width:100px;text-align:center;background-color:#95cdcd}.playAllButton[_ngcontent-%COMP%]:hover:enabled{color:#fff}"]}),a})();const io=function $t(){const g=Object.values({"no break whitespace":"\xa0","ogham space mark":"\u1680","zero width no-break space":"\ufeff","ideographic space":"\u3000","narrow no-break space":"\u202f","EN QUAD":"\u2000","EM QUAD":"\u2001","EN SPACE (nut)":"\u2002","EM SPACE (mutton)":"\u2003","THREE-PER-EM SPACE":"\u2004","FOUR-PER-EM SPACE (mid space)":"\u2005","SIX-PER-EM SPACE":"\u2006","FIGURE SPACE":"\u2007","PUNCTUATION SPACE":"\u2008","THIN SPACE":"\u2009","HAIR SPACE":"\u200a"}).join("");return new RegExp("["+g+"]","g")}();function _n(a){return Object.assign({},a)}class Gn{constructor(g,r,s){this.errorsWithSentences=[],this.http=r,this.auth=s,this.grammarCheckers=g,this.cacheMap=new Map;for(const u of g)this.cacheMap.set(u.name,{})}check$(g){const r=new st.x;return this.check(function Xt(a){return a.replace(io," ")}(g),r),r}check(g,r){var s=this;return(0,x.Z)(function*(){const v=function Hn(a,g){const r=[];let s=0;for(let u of a)if(u){const p=s+g.slice(s).indexOf(u);r.push({sentence:u,offset:p}),s=p+u.length}return r}(yield(0,de.z)(s.http.post(Rt.Z.baseurl+"nlp/sentenceTokenize",{text:g})),g);s.errorsWithSentences=[];const p=(yield Promise.all(s.grammarCheckers.map(function(){var T=(0,x.Z)(function*(C){return yield Promise.all(v.map(function(){var F=(0,x.Z)(function*(L,J){const ie=L.sentence,j=L.offset;function et(ze){return ze.fromX+=j,ze.toX+=j,r.next(ze),ze}if(ie in s.cacheMap.get(C.name)){let ze=s.cacheMap.get(C.name)[ie].map(_n).map(et);return s.errorsWithSentences[J]=s.errorsWithSentences[J]?[s.errorsWithSentences[J][0].concat(ze),ie,J]:[ze,ie,J],ze}const gt=yield C.check(ie,s.auth.getToken());s.cacheMap.get(C.name)[ie]=gt;const Le=gt.map(_n).map(et);return s.errorsWithSentences[J]=s.errorsWithSentences[J]?[s.errorsWithSentences[J][0].concat(gt),ie,J]:[gt,ie,J],Le});return function(L,J){return F.apply(this,arguments)}}()))});return function(C){return T.apply(this,arguments)}}()))).flat().filter(T=>T.length);return r.complete(),s.countNewErrors(p.flat()),p})()}countNewErrors(g){var r=this;return(0,x.Z)(function*(){r.previousErrorTags=g,r.countNewErrors=r._countNewErrorsAfterFirstTime})()}_countNewErrorsAfterFirstTime(g){return(0,x.Z)(function*(){const s=function Bt(a,g){return function p(T,C){return C.filter(F=>!T.includes(F)||(T[T.indexOf(F)]=null,!1)).map(F=>JSON.parse(F)[1])}(v(a),v(g));function v(T){return T.map(C=>JSON.stringify([C.errorText,C.type]))}}(r.previousErrorTags,g),v={countsByType:(a=s,a.reduce(function r(s,u){return s[u]||(s[u]=0),s[u]+=1,s},{}))};var a;r.http.post(Rt.Z.baseurl+"gramadoir/userGrammarCounts/",v).subscribe(),r.previousErrorTags=g})()}saveErrorsWithSentences(g){var r=this;return(0,x.Z)(function*(){if(!r.errorsWithSentences||!g)return;const s={Authorization:"Bearer "+r.auth.getToken()};r.http.post(Rt.Z.baseurl+"gramadoir/insert/",{storyId:g,sentences:r.errorsWithSentences},{headers:s}).subscribe()})()}}const mn=xt().import("parchment"),Wn=xt().import("ui/tooltip");xt().register(new mn.Attributor.Attribute("highlight-tag","highlight-tag",{scope:mn.Scope.INLINE}));class Jn{constructor(g,r,s){this.mostRecentHoveredMessage="",this.quillEditor=g,this.ts=r,this.engagement=s}show(g){g&&((g=this.mergeTags(g)).forEach(s=>{this.quillEditor.formatText(s.fromX,s.toX-s.fromX,{"highlight-tag":JSON.stringify(s)},"api")}),document.querySelectorAll("[highlight-tag]").forEach(s=>{const u=s.getAttribute("highlight-tag");if(!u)return;const v=JSON.parse(u),p=new Wn(this.quillEditor);p.root.classList.add("custom-tooltip"),s.addEventListener("mouseover",()=>{this.mouseOverTagElem(v,s,p)}),s.addEventListener("mouseout",()=>{s.removeAttribute("data-selected"),p.hide()})}))}hide(g){g.forEach(r=>{this.quillEditor.formatText(r.fromX,r.toX-r.fromX,{"highlight-tag":null,"background-color":"","data-selected":null})}),document.querySelectorAll(".custom-tooltip").forEach(r=>r.remove())}hideAll(){document.querySelectorAll("[data-selected]").forEach(r=>r.removeAttribute("data-selected")),this.quillEditor.formatText(0,this.quillEditor.getLength(),{"highlight-tag":null,"background-color":"","data-selected":null}),document.querySelectorAll(".custom-tooltip").forEach(r=>r.remove())}mouseOverTagElem(g,r,s){r.setAttribute("data-selected","");const u=this.quillEditor.root.scrollTop;this.quillEditor.root.scroll({top:+u+1}),this.quillEditor.root.scroll({top:+u});const v=this.makeTooltipContents(g.data,this.ts.l.iso_code);s.root.innerHTML=v,this.mostRecentHoveredMessage=v,s.show(),s.position(this.quillEditor.getBounds(g.fromX,g.toX-g.fromX));let p=s.root.getAttribute("style")||"";p+="\n          font-size: medium;\n          padding: 20px;\n          -webkit-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          -moz-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          border: 2px solid var(--scealai-med-brown);\n          border-radius: 2px;\n        ",s.root.setAttribute("style",p);const T=s.root.offsetLeft+s.root.offsetWidth-this.quillEditor.root.offsetWidth;s.root.style.left=T>0?s.root.offsetLeft-T-5+"px":s.root.style.left,s.root.style.left=s.root.offsetLeft<0?s.root.offsetLeft-s.root.offsetLeft+5+"px":s.root.style.left,this.engagement.mouseOverGrammarSuggestionEvent(g)}getGrammarMessage(g){return g?this.mostRecentHoveredMessage?this.mostRecentHoveredMessage:this.ts.message("hover_over_a_highlighted_word_for_a_grammar_suggestion"):this.ts.message("checking_grammar")}makeTooltipContents(g,r){return g.map(v=>`<div style="white-space: pre-wrap; text-align: left;"><span class="circle" style="background: ${v.color}"></span> ${(v=>"en"==r?v.nameEN:v.nameGA)(v)}: ${(v=>"en"==r?v.messageEN:v.messageGA)(v)}</div>`).join("<hr>")}overlaps(g,r){return g.fromX<=r.toX&&g.toX>=r.fromX}makeMergedTag(g){const r=Math.min(...g.map(v=>v.fromX)),s=Math.max(...g.map(v=>v.toX));return{data:g.reduce((v,p)=>this.arrayToSet(v.concat(p.data)),[]),fromX:r,toX:s}}mergeTags(g,r=0){if(!g.length)return g;const s=g[0],u=g.filter(C=>this.overlaps(s,C)),v=this.makeMergedTag(u),p=g.filter(C=>!u.includes(C)).concat([v]),T=g.length==p.length;return T&&r==g.length-1?g:this.mergeTags(p,T?r+1:r)}arrayToSet(g){return g.filter((r,s,u)=>s===u.findIndex(v=>JSON.stringify(v)===JSON.stringify(r)))}}var _e=k(8043);const Yn={name:"Leathan_Caol",check:function Br(a){return zn.apply(this,arguments)}},vn=["a","o","u","\xe1","\xf3","\xfa","A","O","U","\xc1","\xd3","\xda"],yn=["e","i","\xe9","\xed","E","I","\xc9","\xcd"],oo=["b","c","d","f","g","h","l","m","n","p","r","s","t","v","z","B","C","D","F","G","H","L","M","N","P","R","S","T","V","Z"],Fr=["aniar","an\xedos","ar\xe9ir","ar\xeds","ar\xedst","anseo","ansin","ansi\xfad","c\xe9n","den","faoina","ina","inar","insa","lena","lenar"];function zn(){return(zn=(0,x.Z)(function*(a){return new Promise((g,r)=>{const s=so(a);let u=[];for(const v of s)u.push({errorText:a,messageGA:_e.U["LEATHAN-CAOL"].messageGA,messageEN:_e.U["LEATHAN-CAOL"].messageEN,context:a,nameEN:_e.U["LEATHAN-CAOL"].nameEN,nameGA:_e.U["LEATHAN-CAOL"].nameGA,color:_e.U["LEATHAN-CAOL"].color,fromX:v.first,toX:v.first+1,type:"LEATHAN-CAOL"}),u.push({errorText:a,messageGA:_e.U["LEATHAN-CAOL"].messageGA,messageEN:_e.U["LEATHAN-CAOL"].messageEN,context:a,nameEN:_e.U["LEATHAN-CAOL"].nameEN,nameGA:_e.U["LEATHAN-CAOL"].nameGA,color:_e.U["LEATHAN-CAOL"].color,fromX:v.second,toX:v.second+1,type:"LEATHAN-CAOL"});g(u)})})).apply(this,arguments)}function so(a){const g=function ao(a){let g=[];for(let r of Fr){let u=co(a.toLowerCase(),r);for(let v of u)g[v]=r.length}return g}(a),r=[];for(let s=0;s<a.length-1;s++)if(g[s]>0&&(s+=g[s]),Lr(a[s])&&xn(a[s+1])){let u=s++;for(;xn(a[s]);)s++;if(Lr(a[s])&&!lo(a[u],a[s])){const v=uo(a[u]);r.push({broadFirst:v,first:u,second:s})}}return r}function co(a,g){var r=[];let s=new RegExp("[\\s.!?\\-]"+g+"[\\s.!?\\-]","g"),u=s.exec(a);for(;u;){s=new RegExp(g);let v=s.exec(u[0]);r.push(u.index+v.index),a=Zr(a,u.index,"#".repeat(5)),s=new RegExp("[\\s.!?\\-]"+g+"[\\s.!?\\-]","g"),u=s.exec(a)}return r}function Zr(a,g,r){return a.substr(0,g)+r+a.substr(g+r.length)}function Lr(a){return vn.includes(a)||yn.includes(a)}function uo(a){return vn.includes(a)}function xn(a){return oo.includes(a)}function lo(a,g){return vn.includes(a)&&vn.includes(g)||yn.includes(a)&&yn.includes(g)}const Qn={name:"AnGramadoir",check:function fo(a,g){return Kn.apply(this,arguments)}};function Kn(){return Kn=(0,x.Z)(function*(a,g){return new Promise(function(){var r=(0,x.Z)(function*(s,u){let v=[];try{v=yield Nr(`${Rt.Z.baseurl}gramadoir/callAnGramadoir/${encodeURIComponent(a)}`,g)}catch{try{v=yield Nr(`https://cadhan.com/api/gramadoir/1.0/en/${a}`)}catch{u()}}s(v.map(T=>{const C=ho(T.ruleId),F=_e.U[C];return{errorText:T.errortext,messageGA:F.messageGA.replace("#",T.errortext),messageEN:F.messageEN.replace("#",T.errortext),context:T.context,nameEN:F.nameEN,nameGA:F.nameGA,color:F.color,fromX:+T.fromx,toX:+T.tox+1,type:C}}))});return function(s,u){return r.apply(this,arguments)}}())}),Kn.apply(this,arguments)}function Nr(a,g){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,x.Z)(function*(a,g){let r={};g&&(r={Authorization:"Bearer "+g});const s=yield fetch(a,{headers:r});if(s.ok)return yield s.json();throw new Error(s.statusText)})).apply(this,arguments)}function ho(a){if(!a)return"";const g=a.replace(/[A-Za-z:]+\//,"");if(!g)return"";const r=/[A-Z]+/.exec(g);return r&&r[0]?r[0]:""}const po={name:"RelativeClause",check:function _o(a){return wn.apply(this,arguments)}},go="https://phoneticsrv3.lcs.tcd.ie/gramsrv/api/grammar";function wn(){return wn=(0,x.Z)(function*(a){return new Promise(function(){var g=(0,x.Z)(function*(r,s){r((yield mo(a)).map(p=>({errorText:a.slice(p.fromx,p.tox),messageGA:p.msg,messageEN:p.msg,context:p.context,nameEN:_e.U["RELATIVE-CLAUSE"].nameEN,nameGA:_e.U["RELATIVE-CLAUSE"].nameGA,color:_e.U["RELATIVE-CLAUSE"].color,fromX:p.fromx,toX:p.tox,type:"RELATIVE-CLAUSE"})))});return function(r,s){return g.apply(this,arguments)}}())}),wn.apply(this,arguments)}function mo(a){return $n.apply(this,arguments)}function $n(){return($n=(0,x.Z)(function*(a){const g=yield fetch(go,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:vo(a.replace(/\n/g," "))});return g.ok?yield g.json():[]})).apply(this,arguments)}function vo(a){return`text=${encodeURIComponent(a)}&check=relclause`}var Ur=k(529),wt=k(5589),Xn=k(2687),bn=k(445),jt=k(1281),en=k(9521),yo=k(3353),xo=k(4968),wo=k(6451),bt=k(9300),jn=k(4004),er=k(9718),at=k(2722),qr=k(5698),Hr=k(8675),bo=k(8372),je=k(7340);const tr=["*"],Gr=["content"];function nr(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){t.CHM(r);const u=t.oxw();return t.KtG(u._onBackdropClicked())}),t.qZA()}if(2&a){const r=t.oxw();t.ekj("mat-drawer-shown",r._isShowingBackdrop())}}function Co(a,g){1&a&&(t.TgZ(0,"mat-drawer-content"),t.Hsn(1,2),t.qZA())}const Wr=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Cn=["mat-drawer","mat-drawer-content","*"],Ao={transformDrawer:(0,je.X$)("transform",[(0,je.SB)("open, open-instant",(0,je.oB)({transform:"none",visibility:"visible"})),(0,je.SB)("void",(0,je.oB)({"box-shadow":"none",visibility:"hidden"})),(0,je.eR)("void => open-instant",(0,je.jt)("0ms")),(0,je.eR)("void <=> open, open-instant => void",(0,je.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},rr=new t.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Zt(){return!1}}),Sn=new t.OlP("MAT_DRAWER_CONTAINER");let Tn=(()=>{class a extends wt.PQ{constructor(r,s,u,v,p){super(u,v,p),this._changeDetectorRef=r,this._container=s}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(t.sBO),t.Y36((0,t.Gpc)(()=>ir)),t.Y36(t.SBq),t.Y36(wt.mF),t.Y36(t.R0b))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(r,s){2&r&&t.Udp("margin-left",s._container._contentMargins.left,"px")("margin-right",s._container._contentMargins.right,"px")},features:[t._Bn([{provide:wt.PQ,useExisting:a}]),t.qOj],ngContentSelectors:tr,decls:1,vars:0,template:function(r,s){1&r&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),a})(),Mn=(()=>{class a{constructor(r,s,u,v,p,T,C,F){this._elementRef=r,this._focusTrapFactory=s,this._focusMonitor=u,this._platform=v,this._ngZone=p,this._interactivityChecker=T,this._doc=C,this._container=F,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new st.x,this._animationEnd=new st.x,this._animationState="void",this.openedChange=new t.vpe(!0),this._openedStream=this.openedChange.pipe((0,bt.h)(L=>L),(0,jn.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,bt.h)(L=>L.fromState!==L.toState&&0===L.toState.indexOf("open")),(0,er.h)(void 0)),this._closedStream=this.openedChange.pipe((0,bt.h)(L=>!L),(0,jn.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,bt.h)(L=>L.fromState!==L.toState&&"void"===L.toState),(0,er.h)(void 0)),this._destroyed=new st.x,this.onPositionChanged=new t.vpe,this._modeChanged=new st.x,this.openedChange.subscribe(L=>{L?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,xo.R)(this._elementRef.nativeElement,"keydown").pipe((0,bt.h)(L=>L.keyCode===en.hY&&!this.disableClose&&!(0,en.Vb)(L)),(0,at.R)(this._destroyed)).subscribe(L=>this._ngZone.run(()=>{this.close(),L.stopPropagation(),L.preventDefault()}))}),this._animationEnd.pipe((0,Ir.x)((L,J)=>L.fromState===J.fromState&&L.toState===J.toState)).subscribe(L=>{const{fromState:J,toState:ie}=L;(0===ie.indexOf("open")&&"void"===J||"void"===ie&&0===J.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(r){(r="end"===r?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(r),this._position=r,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(r){this._mode=r,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(r){this._disableClose=(0,jt.Ig)(r)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(r){("true"===r||"false"===r||null==r)&&(r=(0,jt.Ig)(r)),this._autoFocus=r}get opened(){return this._opened}set opened(r){this.toggle((0,jt.Ig)(r))}_forceFocus(r,s){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const u=()=>{r.removeEventListener("blur",u),r.removeEventListener("mousedown",u),r.removeAttribute("tabindex")};r.addEventListener("blur",u),r.addEventListener("mousedown",u)})),r.focus(s)}_focusByCssSelector(r,s){let u=this._elementRef.nativeElement.querySelector(r);u&&this._forceFocus(u,s)}_takeFocus(){if(!this._focusTrap)return;const r=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(s=>{!s&&"function"==typeof this._elementRef.nativeElement.focus&&r.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(r){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,r):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const r=this._doc.activeElement;return!!r&&this._elementRef.nativeElement.contains(r)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(r){return this.toggle(!0,r)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(r=!this.opened,s){r&&s&&(this._openedVia=s);const u=this._setOpen(r,!r&&this._isFocusWithinDrawer(),this._openedVia||"program");return r||(this._openedVia=null),u}_setOpen(r,s,u){return this._opened=r,r?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",s&&this._restoreFocus(u)),this._updateFocusTrapState(),new Promise(v=>{this.openedChange.pipe((0,qr.q)(1)).subscribe(p=>v(p?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(r){const s=this._elementRef.nativeElement,u=s.parentNode;"end"===r?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),u.insertBefore(this._anchor,s)),u.appendChild(s)):this._anchor&&this._anchor.parentNode.insertBefore(s,this._anchor)}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(t.SBq),t.Y36(Xn.qV),t.Y36(Xn.tE),t.Y36(yo.t4),t.Y36(t.R0b),t.Y36(Xn.ic),t.Y36(D.K0,8),t.Y36(Sn,8))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-drawer"]],viewQuery:function(r,s){if(1&r&&t.Gf(Gr,5),2&r){let u;t.iGM(u=t.CRH())&&(s._content=u.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(r,s){1&r&&t.WFA("@transform.start",function(v){return s._animationStarted.next(v)})("@transform.done",function(v){return s._animationEnd.next(v)}),2&r&&(t.uIk("align",null),t.d8E("@transform",s._animationState),t.ekj("mat-drawer-end","end"===s.position)("mat-drawer-over","over"===s.mode)("mat-drawer-push","push"===s.mode)("mat-drawer-side","side"===s.mode)("mat-drawer-opened",s.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:tr,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(r,s){1&r&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA())},dependencies:[wt.PQ],encapsulation:2,data:{animation:[Ao.transformDrawer]},changeDetection:0}),a})(),ir=(()=>{class a{constructor(r,s,u,v,p,T=!1,C){this._dir=r,this._element=s,this._ngZone=u,this._changeDetectorRef=v,this._animationMode=C,this._drawers=new t.n_E,this.backdropClick=new t.vpe,this._destroyed=new st.x,this._doCheckSubject=new st.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new st.x,r&&r.change.pipe((0,at.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),p.change().pipe((0,at.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=T}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(r){this._autosize=(0,jt.Ig)(r)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(r){this._backdropOverride=null==r?null:(0,jt.Ig)(r)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Hr.O)(this._allDrawers),(0,at.R)(this._destroyed)).subscribe(r=>{this._drawers.reset(r.filter(s=>!s._container||s._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Hr.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(r=>{this._watchDrawerToggle(r),this._watchDrawerPosition(r),this._watchDrawerMode(r)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,bo.b)(10),(0,at.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(r=>r.open())}close(){this._drawers.forEach(r=>r.close())}updateContentMargins(){let r=0,s=0;if(this._left&&this._left.opened)if("side"==this._left.mode)r+=this._left._getWidth();else if("push"==this._left.mode){const u=this._left._getWidth();r+=u,s-=u}if(this._right&&this._right.opened)if("side"==this._right.mode)s+=this._right._getWidth();else if("push"==this._right.mode){const u=this._right._getWidth();s+=u,r-=u}r=r||null,s=s||null,(r!==this._contentMargins.left||s!==this._contentMargins.right)&&(this._contentMargins={left:r,right:s},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(r){r._animationStarted.pipe((0,bt.h)(s=>s.fromState!==s.toState),(0,at.R)(this._drawers.changes)).subscribe(s=>{"open-instant"!==s.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==r.mode&&r.openedChange.pipe((0,at.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(r.opened))}_watchDrawerPosition(r){!r||r.onPositionChanged.pipe((0,at.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,qr.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(r){r&&r._modeChanged.pipe((0,at.R)((0,wo.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(r){const s=this._element.nativeElement.classList,u="mat-drawer-container-has-open";r?s.add(u):s.remove(u)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(r=>{"end"==r.position?this._end=r:this._start=r}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(r=>r&&!r.disableClose&&this._canHaveBackdrop(r)).forEach(r=>r._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(r){return"side"!==r.mode||!!this._backdropOverride}_isDrawerOpen(r){return null!=r&&r.opened}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(bn.Is,8),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(wt.rL),t.Y36(rr),t.Y36(t.QbO,8))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-drawer-container"]],contentQueries:function(r,s,u){if(1&r&&(t.Suo(u,Tn,5),t.Suo(u,Mn,5)),2&r){let v;t.iGM(v=t.CRH())&&(s._content=v.first),t.iGM(v=t.CRH())&&(s._allDrawers=v)}},viewQuery:function(r,s){if(1&r&&t.Gf(Tn,5),2&r){let u;t.iGM(u=t.CRH())&&(s._userContent=u.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,s){2&r&&t.ekj("mat-drawer-container-explicit-backdrop",s._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[t._Bn([{provide:Sn,useExisting:a}])],ngContentSelectors:Cn,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,s){1&r&&(t.F$t(Wr),t.YNc(0,nr,1,2,"div",0),t.Hsn(1),t.Hsn(2,1),t.YNc(3,Co,2,0,"mat-drawer-content",1)),2&r&&(t.Q6J("ngIf",s.hasBackdrop),t.xp6(3),t.Q6J("ngIf",!s._content))},dependencies:[D.O5,Tn],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),a})(),Yr=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[D.ez,We.BQ,wt.ZD,wt.ZD,We.BQ]}),a})();var An=k(7392),zr=k(5802),Qr=k(4859),tn=k(8255);function Po(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div")(1,"div",5),t._uU(2),t.qZA(),t.TgZ(3,"div",6)(4,"input",7),t.NdJ("ngModelChange",function(u){t.CHM(r);const v=t.oxw();return t.KtG(v.searchText=u)}),t.qZA()()()}if(2&a){const r=t.oxw();t.xp6(2),t.Oqu(r.ts.l.my_stories),t.xp6(2),t.s9C("placeholder",r.ts.l.search_story_title_or_content),t.Q6J("ngModel",r.searchText)}}function Do(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",8),t.NdJ("click",function(){const v=t.CHM(r).$implicit,p=t.oxw();return t.KtG(p.setStory(v))}),t.TgZ(1,"div",9)(2,"div",10),t.NdJ("blur",function(){const u=t.CHM(r),v=u.index,p=u.$implicit,T=t.oxw();return t.KtG(T.saveStoryTitle(v,p))})("keydown.enter",function(){const u=t.CHM(r),v=u.index,p=u.$implicit,T=t.oxw();return t.KtG(T.saveStoryTitle(v,p))}),t._uU(3),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.ALo(6,"date"),t.TgZ(7,"button",12)(8,"mat-icon"),t._uU(9,"more_vert"),t.qZA()(),t.TgZ(10,"mat-menu",null,13)(12,"button",14),t.NdJ("click",function(){const v=t.CHM(r).$implicit,p=t.oxw();return t.KtG(p.openDeleteStoryDialog(v._id))}),t.TgZ(13,"mat-icon"),t._uU(14,"delete"),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.qZA()(),t.TgZ(17,"button",14),t.NdJ("click",function(){const v=t.CHM(r).index,p=t.oxw();return t.KtG(p.makeTitleDivEditable(v))}),t.TgZ(18,"mat-icon"),t._uU(19,"create"),t.qZA(),t.TgZ(20,"span"),t._uU(21),t.qZA()()()()(),t._UZ(22,"hr"),t.qZA()}if(2&a){const r=g.$implicit,s=g.index,u=t.MAs(11),v=t.oxw();t.xp6(1),t.uIk("id",r._id),t.xp6(1),t.uIk("id",s),t.xp6(1),t.hij(" ",null==r?null:r.title," "),t.xp6(2),t.hij(" ",t.xi3(6,7,r.lastUpdated,"d/M/yy")," "),t.xp6(2),t.Q6J("matMenuTriggerFor",u),t.xp6(9),t.Oqu(v.ts.l.delete),t.xp6(5),t.Oqu(v.ts.l.rename)}}let Ro=(()=>{class a{constructor(r,s,u,v,p,T){this.ts=r,this.auth=s,this.storyService=u,this.engagement=v,this.recordingService=p,this.dialog=T,this.stories=[],this.lastClickedStoryId="",this.searchText="",this.storyEmitter=new t.vpe,this.hasFeedback=new t.vpe,this.titleUpdated=new t.vpe}ngOnInit(){this.getStories()}getStories(){var r=this;return(0,x.Z)(function*(){r.stories=(yield(0,de.z)(r.storyService.getStoriesForLoggedInUser())).map(s=>(new M).fromJSON(s)),r.stories.length>0&&(r.stories.sort((s,u)=>s.date>u.date?-1:1),r.lastClickedStoryId=r.stories[0]._id,setTimeout(()=>{r.setStory(r.stories[0])}))})()}setStory(r){null==r.htmlText&&(r.htmlText=r.text),this.storyEmitter.emit(r),this.hasFeedback.emit(!!(r.feedback.text||r.feedback.audioId||r.feedback.feedbackMarkup));let s=r._id,u=document.getElementById(s);u&&(this.lastClickedStoryId&&document.getElementById(this.lastClickedStoryId).classList.remove("clickedresultCard"),this.lastClickedStoryId=s,u.classList.add("clickedresultCard"))}createNewStory(){var r=this;this.dialogRef=this.dialog.open(E.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var s=(0,x.Z)(function*(u){if(r.dialogRef=void 0,u)if(u[0]){let v="connemara";u[1]==r.ts.l.munster&&(v="kerry"),u[1]==r.ts.l.ulster&&(v="donegal"),r.storyService.saveStory(r.auth.getUserDetails()._id,u[0],new Date,v,"",r.auth.getUserDetails().username,!1).subscribe({next:()=>{r.getStories()},error:()=>{alert("Not able to create a new story")}})}else alert(r.ts.l.title_required)});return function(u){return s.apply(this,arguments)}}())}openDeleteStoryDialog(r){var s=this;this.dialogRef=this.dialog.open(E.p,{data:{title:this.ts.l.delete_story,message:"Are you sure you want to delete this story?",confirmText:this.ts.l.yes,cancelText:this.ts.l.no},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var u=(0,x.Z)(function*(v){s.dialogRef=void 0,v&&s.deleteStory(r)});return function(v){return u.apply(this,arguments)}}())}deleteStory(r){this.recordingService.deleteStoryRecordingAudio(r).subscribe(u=>{}),this.recordingService.deleteStoryRecording(r).subscribe(u=>{});const s=this.stories.findIndex(u=>u._id===r);this.storyService.deleteStory(r).subscribe(u=>{this.engagement.addEventForLoggedInUser(U.tw["DELETE-STORY"],{_id:r}),this.stories.splice(s,1),this.stories.length?this.setStory(this.stories[0]):this.storyEmitter.emit(null)})}makeTitleDivEditable(r){const s=document.getElementById(r);s.setAttribute("contenteditable","true"),window.setTimeout(()=>s.focus(),0)}saveStoryTitle(r,s){const u=document.getElementById(r);u.setAttribute("contenteditable","false"),s.title.trim()!=u.textContent.trim()&&(s.title=u.textContent,this.storyService.updateTitle(s._id,s.title.trim()).subscribe({next:()=>{this.titleUpdated.emit(s.title.trim())},error:()=>console.log("error updating title")}))}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(B.D),t.Y36(Z.$),t.Y36(b.N),t.Y36(z.M),t.Y36(we.s),t.Y36(h.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-story-drawer"]],outputs:{storyEmitter:"storyEmitter",hasFeedback:"hasFeedback",titleUpdated:"titleUpdated"},decls:8,vars:5,consts:[[1,"body"],[4,"ngIf"],[1,"storyList"],[3,"click",4,"ngFor","ngForOf"],["mat-fab","",1,"newStoryButton",3,"click"],[1,"myStories"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control","searchBox",3,"ngModel","placeholder","ngModelChange"],[3,"click"],[1,"contentSection"],[1,"contentsTitle",3,"blur","keydown.enter"],[1,"contentsDate"],["mat-icon-button","","aria-label","Options to delete or rename your story",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0),t.YNc(1,Po,5,3,"div",1),t.TgZ(2,"div",2),t.YNc(3,Do,23,10,"div",3),t.ALo(4,"appFilter"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return s.createNewStory()}),t.TgZ(6,"mat-icon"),t._uU(7,"add"),t.qZA()()()),2&r&&(t.xp6(1),t.Q6J("ngIf",s.stories.length>0),t.xp6(2),t.Q6J("ngForOf",t.xi3(4,2,s.stories,s.searchText)))},dependencies:[D.sg,D.O5,ve.Fj,ve.JJ,ve.On,Qr.lW,An.Hw,tn.VK,tn.OP,tn.p6,D.uU,le],styles:[".body[_ngcontent-%COMP%]{display:flex;width:100%;height:98%;flex-direction:column}.storyList[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto}.myStories[_ngcontent-%COMP%]{color:var(--dark-text);font-size:16pt;padding-bottom:10px;text-align:left;font-weight:bolder}.searchBox[_ngcontent-%COMP%]{min-width:300px}.contentSection[_ngcontent-%COMP%]{display:flex}.contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;text-decoration:none;min-width:50%;flex:1 0 50%;overflow-wrap:break-word}.contentsTitle[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsDate[_ngcontent-%COMP%]{flex:1 0 50%;text-align:right;padding-right:20px}.newStoryButton[_ngcontent-%COMP%]{margin-left:auto}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%]{background-color:var(--scealai-green);box-shadow:none}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:2px;font-weight:bolder;border-radius:10px}"]}),a})();var kn=k(1481);function or(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",10)(1,"label",11),t._uU(2),t.qZA(),t.TgZ(3,"input",12),t.NdJ("ngModelChange",function(u){t.CHM(r);const v=t.oxw();return t.KtG(v.wordLookedUp=u)})("keyup.enter",function(){t.CHM(r);const u=t.oxw();return t.KtG(u.lookupWord())})("click",function(){t.CHM(r);const u=t.oxw();return t.KtG(u.clearDictInput())}),t.qZA(),t.TgZ(4,"button",13),t.NdJ("click",function(){t.CHM(r);const u=t.oxw();return t.KtG(u.lookupWord())}),t._UZ(5,"i",14),t.qZA()()}if(2&a){const r=t.oxw();t.xp6(2),t.hij("",r.ts.l.search,":"),t.xp6(1),t.Q6J("ngModel",r.wordLookedUp)}}function Fo(a,g){if(1&a&&t._UZ(0,"iframe",15),2&a){const r=t.oxw();t.Q6J("src",r.defaultDictIframeText,t.uOi)}}function Bo(a,g){1&a&&(t.TgZ(0,"div",16)(1,"ul")(2,"li")(3,"a",17),t._uU(4,"potafocal.com"),t.qZA()(),t.TgZ(5,"li")(6,"a",18),t._uU(7,"focloir.ie"),t.qZA()()()())}let Zo=(()=>{class a{constructor(r,s,u,v){this.ts=r,this.sanitizer=s,this.http=u,this.engagement=v,this.wordLookedUp="",this.selectTeanglann=!0,this.defaultDictIframeText=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/html;charset=utf-8,"+this.ts.l.search_for_words_in_dictionary),this.closeDictionaryEmitter=new t.vpe}ngOnInit(){}lookupWord(){var r=this;return(0,x.Z)(function*(){if(r.wordLookedUp){const s=r.http.post(Rt.Z.baseurl+"proxy/",{url:`https://www.teanglann.ie/en/fgb/${r.wordLookedUp}`}),u=yield(0,de.z)(s),v=(new DOMParser).parseFromString(u,"text/html");v.querySelectorAll(".ex > .head > a").forEach(L=>L.href=`https://www.teanglann.ie${L.href.slice(L.href.lastIndexOf("/en/"))}`),v.querySelector(".moar")?.remove();const C=v.querySelector(".listings");C.style.cssText+="margin-right: 0px; padding: 10px;",document.getElementById("dictiframe").src='data:text/html;charset=utf-8,<link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/template.css"><link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/fgb.css">'+C.outerHTML,r.engagement.addEventForLoggedInUser(U.tw["USE-DICTIONARY"],null,r.wordLookedUp)}else alert(r.ts.l.enter_a_word_to_lookup)})()}clearDictInput(){this.wordLookedUp&&(this.wordLookedUp="")}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(B.D),t.Y36(kn.H7),t.Y36(Ur.eN),t.Y36(z.M))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dictionary-drawer"]],outputs:{closeDictionaryEmitter:"closeDictionaryEmitter"},decls:16,vars:5,consts:[[1,"dictionaryContainer"],[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"dictionarySubHeader"],[1,"dictionaryName",3,"click"],["class","dictionaryInput",4,"ngIf"],[2,"height","100%"],["class","dictionaryIframe","id","dictiframe",3,"src",4,"ngIf"],["class","dictionaryIframe","style","text-align: left",4,"ngIf"],[1,"dictionaryInput"],["for","dictlookup"],["type","text","id","dictlookup","name","dictlookup","autofocus","",3,"ngModel","ngModelChange","keyup.enter","click"],[1,"searchDictionaryBtn",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["id","dictiframe",1,"dictionaryIframe",3,"src"],[1,"dictionaryIframe",2,"text-align","left"],["href","http://www.potafocal.com/beo/","target","_blank"],["href","https://www.focloir.ie","target","_blank"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3),t.qZA(),t.TgZ(4,"div",2),t.NdJ("click",function(){return s.closeDictionaryEmitter.next(!0)}),t._UZ(5,"i",3),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5),t.NdJ("click",function(){return s.selectTeanglann=!0}),t._uU(8," Teanglann "),t.qZA(),t._uU(9," | "),t.TgZ(10,"div",5),t.NdJ("click",function(){return s.selectTeanglann=!1}),t._uU(11),t.qZA()(),t.YNc(12,or,6,2,"div",6),t.TgZ(13,"div",7),t.YNc(14,Fo,1,1,"iframe",8),t.qZA(),t.YNc(15,Bo,8,0,"div",9),t.qZA()),2&r&&(t.xp6(3),t.hij(" ",s.ts.l.dictionary," "),t.xp6(8),t.hij(" ",s.ts.l.external_links," "),t.xp6(1),t.Q6J("ngIf",s.selectTeanglann),t.xp6(2),t.Q6J("ngIf",s.selectTeanglann),t.xp6(1),t.Q6J("ngIf",!s.selectTeanglann))},dependencies:[D.O5,ve.Fj,ve.JJ,ve.On],styles:[".dictionaryContainer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:wrap}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.dictionarySubHeader[_ngcontent-%COMP%]{padding-left:10px;padding-bottom:5px;background-color:var(--scealai-green);color:#fff;display:flex}.dictionaryName[_ngcontent-%COMP%]{background-color:var(--scealai-green);font-size:12px;color:#fff;padding-right:5px;padding-top:5px}.dictionaryName[_ngcontent-%COMP%]:hover{color:var(--scealai-light-green);text-decoration:none;cursor:pointer}.dictionaryInput[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;display:flex;padding-bottom:10px;padding-left:10px;gap:1rem}.searchDictionaryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.searchDictionaryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.dictionaryIframe[_ngcontent-%COMP%]{width:100%;border-radius:0 0 5px 5px}"]}),a})();const Lo=function(a){return{"background-color":a}};function No(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",5),t.NdJ("click",function(){const v=t.CHM(r).$implicit,p=t.oxw();return t.KtG(p.toggleLegendTag(v.key))}),t._UZ(1,"div",6),t._uU(2),t.ALo(3,"titlecase"),t.ALo(4,"titlecase"),t._uU(5),t.qZA()}if(2&a){const r=g.$implicit,s=t.oxw();t.uIk("id",r.key),t.xp6(1),t.Q6J("ngStyle",t.VKq(8,Lo,r.value[0].color)),t.xp6(1),t.hij(" ","en"==s.ts.l.iso_code?t.lcZ(3,4,r.value[0].nameEN):t.lcZ(4,6,r.value[0].nameGA)," "),t.xp6(3),t.hij(" (","Broad/Slender"==r.value[0].nameEN?r.value.length/2:r.value.length,") ")}}let he=(()=>{class a{constructor(r){this.ts=r,this.closeGrammarEmitter=new t.vpe}ngOnInit(){}toggleLegendTag(r){this.checkBoxes[r]=!this.checkBoxes[r],this.quillHighlighter.hideAll(),this.quillHighlighter.show(this.grammarErrors.filter(s=>this.checkBoxes[s.type]).map(_e.j)),this.checkBoxes[r]?document.getElementById(r).classList.remove("hideLegendItem"):document.getElementById(r).classList.add("hideLegendItem")}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(B.D))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-grammar-error-drawer"]],inputs:{quillHighlighter:"quillHighlighter",grammarLoaded:"grammarLoaded",grammarErrorsTypeDict:"grammarErrorsTypeDict",grammarErrors:"grammarErrors",checkBoxes:"checkBoxes"},outputs:{closeGrammarEmitter:"closeGrammarEmitter"},decls:8,vars:4,consts:[[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"selectErrorCheckbox"],["class","errorContainer",3,"click",4,"ngFor","ngForOf"],[1,"errorContainer",3,"click"],[1,"circle",3,"ngStyle"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0)(1,"h5"),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.NdJ("click",function(){return s.closeGrammarEmitter.next(!0)}),t._UZ(4,"i",2),t.qZA()(),t.TgZ(5,"div",3),t.YNc(6,No,6,10,"div",4),t.ALo(7,"keyvalue"),t.qZA()),2&r&&(t.xp6(2),t.hij(" ",s.ts.message("grammar_errors")," "),t.xp6(4),t.Q6J("ngForOf",t.lcZ(7,2,s.grammarErrorsTypeDict)))},dependencies:[D.sg,D.PC,D.rS,D.Nd],styles:[".grammarMessageBanner[_ngcontent-%COMP%]{padding-bottom:20px}.circle[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border-radius:6px}.selectErrorCheckbox[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:space-around;text-align:left;padding-left:10px;padding-top:10px;gap:1.5rem;-webkit-user-select:none;-moz-user-select:none;user-select:none}.errorContainer[_ngcontent-%COMP%]{margin:2px}.errorContainer[_ngcontent-%COMP%]:hover{cursor:pointer}.errorColorBox[_ngcontent-%COMP%]{display:inline-flex;width:30px;height:15px}.hideLegendItem[_ngcontent-%COMP%]{text-decoration:line-through;opacity:.5}.dictionaryContainer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:wrap}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),a})();function fe(a,g){if(1&a&&t._UZ(0,"audio",7,8),2&a){const r=t.oxw();t.Q6J("src",r.audioSource,t.LSH)}}function Uo(a,g){if(1&a&&t._UZ(0,"div",9),2&a){const r=t.oxw();t.Q6J("innerHTML",r.sanitizer.bypassSecurityTrustHtml(null==r.story||null==r.story.feedback?null:r.story.feedback.feedbackMarkup),t.oJD)}}let qo=(()=>{class a{constructor(r,s,u,v,p){this.ts=r,this.sanitizer=s,this.storyService=u,this.engagement=v,this.notificationService=p,this.closeFeedbackEmitter=new t.vpe}ngOnInit(){}ngOnChanges(r){this.story&&(this.story.feedback.text||this.story.feedback.audioId||this.story.feedback.feedbackMarkup)&&this.getFeedback()}getFeedback(){this.story.feedback.audioId&&this.getFeedbackAudio(),""!==this.story.feedback.text&&(this.story.feedback.seenByStudent=!0),this.storyService.viewFeedback(this.story._id).subscribe(()=>{this.engagement.addEventForLoggedInUser(U.tw["VIEW-FEEDBACK"],this.story),this.notificationService.getStudentNotifications()})}getFeedbackAudio(){this.storyService.getFeedbackAudio(this.story._id).subscribe(r=>{this.audioSource=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(r)),console.log(this.audioSource)})}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(B.D),t.Y36(kn.H7),t.Y36(b.N),t.Y36(z.M),t.Y36(ae.g))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-feedback-drawer"]],inputs:{story:"story"},outputs:{closeFeedbackEmitter:"closeFeedbackEmitter"},features:[t.TTD],decls:11,vars:5,consts:[[1,"feedbackHeader"],[1,"closeFeedbackBtn",3,"click"],[1,"fa","fa-times"],[1,"textFieldContainer"],["readonly","",1,"textField",3,"placeholder","value"],["id","audio","controls","","class","audioPlayer",3,"src",4,"ngIf"],["class","textField","style","text-align: left; padding-left:25%; padding-right:25%;",3,"innerHTML",4,"ngIf"],["id","audio","controls","",1,"audioPlayer",3,"src"],["audioTag",""],[1,"textField",2,"text-align","left","padding-left","25%","padding-right","25%",3,"innerHTML"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.NdJ("click",function(){return s.closeFeedbackEmitter.next(!0)}),t._UZ(4,"i",2),t.qZA()(),t.TgZ(5,"div",3)(6,"textarea",4),t._uU(7,"    "),t.qZA(),t.YNc(8,fe,2,1,"audio",5),t._UZ(9,"hr"),t.YNc(10,Uo,1,1,"div",6),t.qZA()),2&r&&(t.xp6(2),t.hij(" ",s.ts.l.feedback," "),t.xp6(4),t.s9C("placeholder",s.ts.l.no_feedback_provided),t.s9C("value",null==s.story||null==s.story.feedback?null:s.story.feedback.text),t.xp6(2),t.Q6J("ngIf",s.audioSource&&(null==s.story||null==s.story.feedback?null:s.story.feedback.audioId)),t.xp6(2),t.Q6J("ngIf",null==s.story||null==s.story.feedback?null:s.story.feedback.feedbackMarkup))},dependencies:[D.O5],styles:[".feedbackHeader[_ngcontent-%COMP%]{width:100%;padding-left:20px;padding-right:20px;height:30px;background-color:var(--scealai-green);color:#fff;display:flex;align-items:center}.closeFeedbackBtn[_ngcontent-%COMP%]{margin-left:auto}.closeFeedbackBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.textFieldContainer[_ngcontent-%COMP%]{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px}.textField[_ngcontent-%COMP%]{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px;border:none}.audioPlayer[_ngcontent-%COMP%]{height:30px;width:90%;background-color:#f1f3f4;border:1px solid rgba(140,128,110,.5254901961)}"]}),a})();const Ho=["rightDrawer"],Go=["mySynthesisPlayer"];function Wo(a,g){1&a&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function Jo(a,g){if(1&a&&(t.TgZ(0,"span",23),t._uU(1),t.qZA()),2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.made_using_prompts," ")}}function Kr(a,g){if(1&a&&(t.TgZ(0,"div",24),t._uU(1),t._UZ(2,"i",25),t.qZA()),2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.saved," ")}}function Yo(a,g){if(1&a&&(t.TgZ(0,"div",24),t._uU(1),t._UZ(2,"i",26),t.qZA()),2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.saving," ")}}function Ce(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"input",18),t.NdJ("ngModelChange",function(u){t.CHM(r);const v=t.oxw();return t.KtG(v.updatedTitle=u)})("blur",function(){t.CHM(r);const u=t.oxw();return t.KtG(u.updateStoryTitle())}),t.qZA(),t.YNc(3,Wo,2,0,"span",19),t.YNc(4,Jo,2,1,"span",20),t.qZA(),t.TgZ(5,"div",21),t.YNc(6,Kr,3,1,"div",22),t.YNc(7,Yo,3,1,"div",22),t.qZA()()}if(2&a){const r=t.oxw();t.xp6(2),t.s9C("size",r.updatedTitle.length),t.Q6J("ngStyle",r.titleStyle())("ngModel",r.updatedTitle),t.xp6(1),t.Q6J("ngIf",!r.storySaved),t.xp6(1),t.Q6J("ngIf",null==r.story?null:r.story.createdWithPrompts),t.xp6(2),t.Q6J("ngIf",r.storySaved),t.xp6(1),t.Q6J("ngIf",!r.storySaved)}}function Vr(a,g){1&a&&t._UZ(0,"i",35)}function nn(a,g){1&a&&t._UZ(0,"i",36)}function $r(a,g){1&a&&(t.TgZ(0,"span",40),t._uU(1,"speech_to_text"),t.qZA())}function sr(a,g){1&a&&(t.TgZ(0,"button",41),t._UZ(1,"i",42),t.qZA())}function Be(a,g){1&a&&(t.TgZ(0,"div"),t._UZ(1,"div",43),t.qZA())}const Xr=function(a){return{disableDiv:a}};function jr(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",37),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.speakStory())}),t._uU(1),t.YNc(2,$r,2,0,"span",38),t.YNc(3,sr,2,0,"button",39),t.YNc(4,Be,2,0,"div",19),t.qZA()}if(2&a){const r=t.oxw(2);t.Q6J("ngClass",t.VKq(5,Xr,r.isTranscribing)),t.xp6(1),t.hij(" ",r.ts.l.speak," "),t.xp6(1),t.Q6J("ngIf",!r.isRecording),t.xp6(1),t.Q6J("ngIf",r.isRecording&&!r.isTranscribing),t.xp6(1),t.Q6J("ngIf",r.isTranscribing)}}function ei(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",44),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(2);return t.KtG(u.dontToggle=!0)}),t.TgZ(1,"button",45),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(2);return t.KtG(u.downloadStory())}),t._uU(2),t._UZ(3,"i",46),t.qZA()()}if(2&a){const r=t.oxw(2);t.xp6(1),t.s9C("href",r.downloadStoryUrl()),t.xp6(1),t.hij(" ",r.ts.l.download," ")}}function ti(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.goToRecording())}),t._uU(1),t._UZ(2,"i",48),t.qZA()}if(2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.recordings," ")}}function ni(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.toggleRightDrawer("feedback"))}),t._uU(1),t._UZ(2,"i",49),t.qZA()}if(2&a){const r=t.oxw(2);t.ekj("optionsBtnClicked",r.rightDrawerOpened&&"feedback"==r.selectedDrawer),t.xp6(1),t.hij(" ",r.ts.l.feedback," ")}}function ri(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.synthesisPlayer.toggleHidden())}),t._uU(1),t._UZ(2,"i",50),t.qZA()}if(2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.audio_check," ")}}function Ee(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.toggleRightDrawer("grammar"))}),t._uU(1),t._UZ(2,"i",51),t.qZA()}if(2&a){const r=t.oxw(2);t.ekj("optionsBtnClicked",r.rightDrawerOpened&&"grammar"==r.selectedDrawer),t.xp6(1),t.hij(" ",r.ts.l.grammar_errors," ")}}function zo(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(2);return u.dontToggle=!0,t.KtG(u.toggleRightDrawer("dictionary"))}),t._uU(1),t._UZ(2,"i",52),t.qZA()}if(2&a){const r=t.oxw(2);t.ekj("optionsBtnClicked",r.rightDrawerOpened&&"dictionary"==r.selectedDrawer),t.xp6(1),t.hij(" ",r.ts.l.dictionary," ")}}function Ze(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",27),t.NdJ("click",function(){t.CHM(r);const u=t.oxw();return t.KtG(u.toggleOptions())}),t.TgZ(1,"div",28),t.YNc(2,Vr,1,0,"i",29),t.YNc(3,nn,1,0,"i",30),t.qZA(),t.YNc(4,jr,5,7,"div",31),t.YNc(5,ei,4,2,"div",32),t.YNc(6,ti,3,1,"div",33),t.YNc(7,ni,3,3,"div",34),t.YNc(8,ri,3,1,"div",33),t.YNc(9,Ee,3,3,"div",34),t.YNc(10,zo,3,3,"div",34),t.qZA()}if(2&a){const r=t.oxw();t.xp6(2),t.Q6J("ngIf",!r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions&&r.hasFeedback),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions)}}function Qo(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",53,54)(2,"mat-icon",55),t.NdJ("click",function(){t.CHM(r),t.oxw();const u=t.MAs(4);return t.KtG(u.toggle())}),t._uU(3,"menu"),t.qZA(),t.TgZ(4,"quill-editor",56),t.NdJ("ngModelChange",function(u){t.CHM(r);const v=t.oxw();return t.KtG(v.story.htmlText=u)})("onContentChanged",function(u){t.CHM(r);const v=t.oxw();return t.KtG(v.onContentChanged(u))})("onEditorCreated",function(u){t.CHM(r);const v=t.oxw();return t.KtG(v.onEditorCreated(u))}),t.qZA()()}if(2&a){const r=t.oxw();t.Q6J("ngStyle",r.quillEditorStyle),t.xp6(4),t.Q6J("modules",r.quillToolbar)("preserveWhitespace",!0)("debounceTime",1500)("ngModel",r.story.htmlText)}}function ii(a,g){1&a&&(t.TgZ(0,"div",57),t._uU(1," Click on the '+' button to create your first story! "),t.qZA())}function ht(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"app-feedback-drawer",58),t.NdJ("closeFeedbackEmitter",function(){t.CHM(r);const u=t.oxw();return t.KtG(u.toggleRightDrawer("feedback"))}),t.qZA()}if(2&a){const r=t.oxw();t.Q6J("story",r.story)}}function On(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"app-dictionary-drawer",59),t.NdJ("closeDictionaryEmitter",function(){t.CHM(r);const u=t.oxw();return t.KtG(u.toggleRightDrawer("dictionary"))}),t.qZA()}}function ar(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"app-grammar-error-drawer",60),t.NdJ("closeGrammarEmitter",function(){t.CHM(r);const u=t.oxw();return t.KtG(u.toggleRightDrawer("grammar"))}),t.qZA()}if(2&a){const r=t.oxw();t.Q6J("quillHighlighter",r.quillHighlighter)("grammarLoaded",r.grammarLoaded)("grammarErrorsTypeDict",r.grammarErrorsTypeDict)("grammarErrors",r.grammarErrors)("checkBoxes",r.checkBoxes)}}xt().register("modules/imageCompress",zt());let pe=(()=>{class a{constructor(r,s,u,v,p,T,C,F,L){this.ts=r,this.auth=s,this.storyService=u,this.recordAudioService=v,this.engagement=p,this.classroomService=T,this.dialog=C,this.http=F,this.router=L,this.stories=[],this.saveStoryDebounceId=0,this.mostRecentAttemptToSaveStory=new Date,this.storySaved=!0,this.storiesLoaded=!1,this.downloadStoryFormat=".pdf",this.hasFeedback=!1,this.updatedTitle="",this.grammarLoaded=!1,this.grammarErrors=[],this.showErrorTags=!1,this.grammarCheckerOptions={anGramadoir:Qn,relativeClause:po,broadSlender:Yn},this.checkBoxes={},this.grammarErrorsTypeDict={},this.showOptions=!0,this.dontToggle=!1,this.rightDrawerOpened=!1,this.selectedDrawer="grammar",this.words=[],this.wordCount=0,this.textUpdated=new st.x,this.quillToolbar={toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"],["image"]],imageCompress:{quality:.7,maxWidth:500,maxHeight:500,imageType:"image/png",debug:!1,suppressErrorLogging:!1,insertIntoEditor:void 0}},this.isRecording=!1,this.isTranscribing=!1,this.setUpGrammarChecking()}ngOnInit(){return(0,x.Z)(function*(){})()}setUpGrammarChecking(){var r=this;return(0,x.Z)(function*(){const s=r.auth.getUserDetails();if(!s)return;let u=yield(0,de.z)(r.classroomService.getClassroomOfStudent(s._id)),v=[];u&&u.grammarCheckers&&u.grammarCheckers.length>0?u.grammarCheckers.forEach(p=>{r.grammarCheckerOptions[p]&&v.push(r.grammarCheckerOptions[p])}):v=Object.values(r.grammarCheckerOptions),r.grammarEngine=new Gn(v,r.http,r.auth),r.textUpdated.pipe((0,Ir.x)()).subscribe((0,x.Z)(function*(){r.runGrammarCheck()}))})()}runGrammarCheck(){if(this.grammarLoaded=!1,this.story.text.replace(/\n/g," "))try{this.grammarErrors=[],this.grammarEngine.check$(this.story.text).subscribe({next:s=>{this.grammarErrors.push(s),this.showErrorTags&&this.quillHighlighter.show([(0,_e.j)(s)])},error:function(){},complete:()=>{if(this.quillHighlighter){this.grammarErrors&&this.grammarEngine.saveErrorsWithSentences(this.story._id).then(console.log,console.error),this.grammarErrorsTypeDict=this.grammarErrors.reduce(function(s,u){return s[u.type]||(s[u.type]=[]),s[u.type].push(u),s},{});for(const s of Object.keys(this.grammarErrorsTypeDict))this.checkBoxes[s]=!0;this.quillHighlighter.hideAll(),this.showErrorTags&&this.quillHighlighter.show(this.grammarErrors.filter(s=>this.checkBoxes[s.type]).map(_e.j)),this.grammarLoaded=!0}}})}catch(s){this.grammarErrors||window.alert("There was an error while trying to fetch grammar suggestions from the Gramad\xf3ir server:\n"+s.message+"\nSee the browser console for more information"),console.dir(s)}}toggleRightDrawer(r){this.rightDrawerOpened?this.selectedDrawer===r&&(this.rightDrawer.close(),this.rightDrawerOpened=!1):(this.rightDrawer.open(),this.rightDrawerOpened=!0),this.selectedDrawer=r,"grammar"==this.selectedDrawer&&this.rightDrawerOpened?(this.showErrorTags=!0,this.runGrammarCheck(),this.toggleGrammarTags()):(this.showErrorTags=!1,this.toggleGrammarTags())}setCurrentStory(r){this.story=r,this.story&&(this.storySaved=!0,this.updatedTitle=this.story.title,this.getWordCount(this.story.text),this.textUpdated.next(r.text))}onContentChanged(r){"user"===(this.story.text=r.text,this.getWordCount(r.text),r.source)&&(this.storySaved=!1,this.textUpdated.next(r.text),this.debounceSaveStory())}onEditorCreated(r){r.history.options.userOnly=!0,this.quillEditor=r,this.quillEditor.root.setAttribute("spellcheck","false"),r.focus(),this.quillHighlighter=new Jn(this.quillEditor,this.ts,this.engagement)}getWordCount(r){if(!r)return 0;const s=r.replace(/[\t\n\r\.\?\!]/gm," ").split(" ");this.words=[],s.map(u=>{const v=u.trim();v.length>0&&this.words.push(v)}),this.wordCount=this.words.length}debounceSaveStory(){this.saveStoryDebounceId++;const r=this.saveStoryDebounceId,s=new Date;setTimeout(()=>{r===this.saveStoryDebounceId&&this.saveStory(r,s)},1e3)}saveStory(r,s){var u=this;return(0,x.Z)(function*(){const v=new Date;if(u.mostRecentAttemptToSaveStory=v,!u.story._id)return window.alert("Cannot save story. The id is not known");const p=u.stripGramadoirAttributesFromHtml((0,Qt.clone)(u.story.htmlText)),T={title:u.story.title,dialect:u.story.dialect,text:u.story.text,htmlText:p,lastUpdated:s};u.engagement.addEventForLoggedInUser(U.tw["SAVE-STORY"],u.story);try{yield(0,de.z)(u.storyService.updateStory(T,u.story._id)),(r===u.saveStoryDebounceId||"modal"===r)&&(u.storySaved=!0)}catch(C){throw window.alert("Error while trying to save story: "+C.message),C}try{v===u.mostRecentAttemptToSaveStory&&(u.storySaved=!0)}catch(C){throw window.alert("Error setting storySaved to true: "+C.message),C}})()}stripGramadoirAttributesFromHtml(r){return r&&r.replace?r.replace(/\s*style="([^"])+"/g,"").replace(/\s*highlight-tag-type="([^"])+"/g,"").replace(/\s*highlight-tag="([^"])+"/g,""):""}toggleOptions(){this.dontToggle||(this.showOptions=!this.showOptions),this.dontToggle=!1}titleStyle(){return{"font-style":this.storySaved?"normal":"italic"}}updateStoryTitle(){this.updatedTitle!=this.story.title&&(this.storySaved=!1,this.story.title=this.updatedTitle,this.storyService.updateTitle(this.story._id,this.story.title).subscribe({next:()=>{this.storySaved=!0,console.log("title updated")},error:()=>console.log("error updating title")}))}downloadStory(){this.dialogRef=this.dialog.open(E.p,{data:{title:this.ts.l.download,type:"select",data:[this.story.title,[".pdf",".docx",".txt",".odt"]],confirmText:this.ts.l.download,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(r=>{this.dialogRef=void 0,r&&(this.downloadStoryFormat=r[1]?r[1]:".pdf",this.http.get(this.downloadStoryUrl(),{responseType:"blob"}).subscribe(s=>{const u=window.document.createElement("a");u.href=window.URL.createObjectURL(s),u.download=r[0]?r[0]:this.story.title,document.body.appendChild(u),u.click(),document.body.removeChild(u)}))})}downloadStoryUrl(){return Rt.Z.baseurl+"story/downloadStory/"+this.story._id+"/"+this.downloadStoryFormat}toggleGrammarTags(){var r=this;return(0,x.Z)(function*(){r.showErrorTags?r.quillHighlighter.show(r.grammarErrors.filter(s=>r.checkBoxes[s.type]).map(_e.j)):r.quillHighlighter.hideAll()})()}goToRecording(){this.router.navigateByUrl("/student/record-story/"+this.story._id)}speakStory(){var r=this;return(0,x.Z)(function*(){if(r.isRecording){r.isTranscribing=!0,r.recordAudioService.stopRecording();let s=yield r.recordAudioService.getAudioTranscription();if(r.isTranscribing=!1,s){let u=r.quillEditor.getSelection(!0);r.quillEditor.insertText(u.index,s+"."),r.story.text=r.quillEditor.getText(),r.story.htmlText=r.quillEditor.root.innerHTML,r.getWordCount(s),r.storySaved=!1,r.debounceSaveStory()}}else r.recordAudioService.recordAudio();r.isRecording=!r.isRecording})()}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(B.D),t.Y36(Z.$),t.Y36(b.N),t.Y36(pn.r),t.Y36(z.M),t.Y36(W.u),t.Y36(h.uw),t.Y36(Ur.eN),t.Y36(l.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard"]],viewQuery:function(r,s){if(1&r&&(t.Gf(Ho,5),t.Gf(Go,5)),2&r){let u;t.iGM(u=t.CRH())&&(s.rightDrawer=u.first),t.iGM(u=t.CRH())&&(s.synthesisPlayer=u.first)}},decls:18,vars:10,consts:[["class","storyTitleHeader",4,"ngIf"],["class","optionsBtnContainer",3,"click",4,"ngIf"],["autosize","",1,"bodyContainer"],["mode","side","opened","true",1,"storyListDrawer"],["storyDrawer",""],[3,"storyEmitter","hasFeedback","titleUpdated"],[1,"storyContainer"],["class","ql-container",3,"ngStyle",4,"ngIf","ngIfElse"],["newStoryMessage",""],["mode","side","position","end",1,"rightDrawer"],["rightDrawer",""],[3,"story","closeFeedbackEmitter",4,"ngIf"],[3,"closeDictionaryEmitter",4,"ngIf"],[3,"quillHighlighter","grammarLoaded","grammarErrorsTypeDict","grammarErrors","checkBoxes","closeGrammarEmitter",4,"ngIf"],[3,"text","storyId","storyTitle"],["mySynthesisPlayer",""],[1,"storyTitleHeader"],[1,"storyTitleContainer"],[1,"storyTitle",3,"ngStyle","size","ngModel","ngModelChange","blur"],[4,"ngIf"],["style","color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"saveIcon"],["class","savedIcon",4,"ngIf"],[2,"color","rgba(0, 0, 0, 0.4)"],[1,"savedIcon"],[1,"fas","fa-check"],[1,"fas","fa-save"],[1,"optionsBtnContainer",3,"click"],[1,"optionsBtn"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-right",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"ngClass","click",4,"ngIf"],["style","display: flex",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"optionsBtnClicked","click",4,"ngIf"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-right"],[1,"optionsBtn","optionsPopupBtn",3,"ngClass","click"],["class","material-symbols-outlined optionsBtnIcon",4,"ngIf"],["class","notRecordingBtn blink",4,"ngIf"],[1,"material-symbols-outlined","optionsBtnIcon"],[1,"notRecordingBtn","blink"],[1,"fas","fa-stop-circle"],[1,"dot-flashing"],[2,"display","flex",3,"click"],["target","_blank",1,"optionsBtn","optionsPopupBtn",2,"text-decoration","none",3,"href","click"],[1,"fas","fa-download","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"click"],[1,"fas","fa-microphone","optionsBtnIcon"],[1,"fas","fa-comment-dots","optionsBtnIcon"],[1,"fas","fa-volume-up","optionsBtnIcon"],[1,"fas","fa-spell-check","optionsBtnIcon"],[1,"fas","fa-book","optionsBtnIcon"],[1,"ql-container",3,"ngStyle"],["quillHeightSpan",""],[1,"menuButton",3,"click"],["placeholder","",3,"modules","preserveWhitespace","debounceTime","ngModel","ngModelChange","onContentChanged","onEditorCreated"],[1,"newStoryMessage"],[3,"story","closeFeedbackEmitter"],[3,"closeDictionaryEmitter"],[3,"quillHighlighter","grammarLoaded","grammarErrorsTypeDict","grammarErrors","checkBoxes","closeGrammarEmitter"]],template:function(r,s){if(1&r&&(t.YNc(0,Ce,8,7,"div",0),t.YNc(1,Ze,11,9,"div",1),t.TgZ(2,"mat-drawer-container",2)(3,"mat-drawer",3,4)(5,"app-story-drawer",5,4),t.NdJ("storyEmitter",function(v){return s.setCurrentStory(v)})("hasFeedback",function(v){return s.hasFeedback=v})("titleUpdated",function(v){return s.updatedTitle=v}),t.qZA()(),t.TgZ(7,"div",6),t.YNc(8,Qo,5,5,"div",7),t.YNc(9,ii,2,0,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(11,"mat-drawer",9,10),t.YNc(13,ht,1,1,"app-feedback-drawer",11),t.YNc(14,On,1,0,"app-dictionary-drawer",12),t.YNc(15,ar,1,5,"app-grammar-error-drawer",13),t.qZA()(),t._UZ(16,"app-synthesis-player",14,15)),2&r){const u=t.MAs(10);t.Q6J("ngIf",s.story),t.xp6(1),t.Q6J("ngIf",s.story),t.xp6(7),t.Q6J("ngIf",s.story)("ngIfElse",u),t.xp6(5),t.Q6J("ngIf","feedback"==s.selectedDrawer),t.xp6(1),t.Q6J("ngIf","dictionary"==s.selectedDrawer),t.xp6(1),t.Q6J("ngIf","grammar"==s.selectedDrawer),t.xp6(1),t.Q6J("text",null==s.story?null:s.story.text)("storyId",null==s.story?null:s.story._id)("storyTitle",null==s.story?null:s.story.title)}},dependencies:[D.mk,D.O5,D.PC,ve.Fj,ve.JJ,ve.On,Mn,ir,An.Hw,zr.g6,ro,Ro,Zo,he,qo],styles:[".storyTitleHeader{display:flex;justify-content:center;margin-top:-30px;padding-bottom:20px}.storyTitleContainer{margin:auto;overflow:auto;font-size:20px;font-weight:bolder}.storyTitle{border:1px solid transparent;text-align:center;resize:none}.storyTitle:hover{border:1px solid;border-radius:5px}.saveIcon{align-self:flex-end;white-space:nowrap;color:var(--dark-text);border-style:none;font-size:11pt;padding:5px}.savedIcon{color:var(--scealai-light-brown)}.optionsBtnContainer>*{height:2rem}.optionsBtnContainer{display:flex;justify-content:space-between;flex-wrap:wrap;--options-btn-background-color-hover: lightgray;margin-left:2%;margin-right:2%}.optionsBtn{background-color:var(--scealai-yellow);border-style:none;color:#464444;margin:0;border-radius:2px;display:flex;align-items:center;padding:5px;background:rgba(223,217,200,0)}.optionsBtn:hover{background-color:var(--options-btn-background-color-hover);color:#35322f;cursor:pointer;border-radius:2}.optionsPopupBtn{margin-right:4px}.optionsBtnIcon{margin-left:5px}.optionsBtnClicked{background-color:var(--options-btn-background-color-hover);color:#35322f;border-radius:2}.notRecordingBtn{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.bodyContainer{width:100%;height:100%}.storyListDrawer{padding:40px;max-width:35%;height:100%}.storyContainer{height:100%}.ql-container{background-color:#f8f9fa;height:100%}.ql-editor{background-color:#fff;z-index:1;margin-top:20px;font-size:14pt;font-family:Times New Roman,Times,serif;min-height:70vh!important;max-height:70vh!important}.menuButton{float:left;padding-left:10px;padding-top:5px;transform:scale(2);z-index:100}.menuButton:hover{cursor:pointer}.newStoryMessage{font-weight:bolder;max-width:200px;padding-top:50px;padding-bottom:50px;height:80vh;width:100%}.rightDrawer{width:25%;height:100%}.blink{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}\n",".custom-tooltip:before{content:none!important}.circle{display:inline-block;width:12px;height:12px;border-radius:6px}[data-selected]{margin:.3em}[highlight-tag]{text-decoration:underline;text-decoration-color:var(--highlight-error-red);text-decoration-thickness:3px;position:relative}span[highlight-tag]:hover{cursor:pointer}span:not[highlight-tag-type]{border-radius:0;padding-left:0;padding-right:0}\n",'.ql-editor{overflow-y:auto}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=times-new-roman]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=times-new-roman]:before{content:"Times New Roman";font-family:Times New Roman}.ql-font-times-new-roman{font-family:times new roman}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=arial]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=arial]:before{content:"Arial";font-family:arial}.ql-font-arial{font-family:arial}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=sans-serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=sans-serif]:before{content:"Sans Serif";font-family:"sans serif"}.ql-font-sans-serif{font-family:"sans serif"}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{content:"Monospace";font-family:"monospace"}.ql-font-monospace{font-family:"monospace"}\n'],encapsulation:2}),a})(),ct=(()=>{class a{constructor(r){this.sanitizer=r}transform(r){return this.sanitizer.bypassSecurityTrustHtml(r)}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(kn.H7,16))},a.\u0275pipe=t.Yjl({name:"safeHtml",type:a,pure:!0}),a})();function cr(a,g){if(1&a&&(t.TgZ(0,"div",14)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&a){const r=t.oxw();t.xp6(2),t.Oqu(r.ts.l.synthesising)}}function Ko(a,g){1&a&&(t._UZ(0,"span",18),t.ALo(1,"safeHtml")),2&a&&t.Q6J("innerHTML",t.lcZ(1,1,g.$implicit.outerHTML),t.oJD)}function ur(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(r);const u=t.oxw().$implicit,v=t.oxw(2);return t.KtG(v.stopSection(u))}),t._UZ(1,"i",20),t.qZA()}}function Vo(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(r);const u=t.oxw().$implicit,v=t.oxw(2);return t.KtG(v.playSection(u))}),t._UZ(1,"i",21),t.qZA()}}function $o(a,g){if(1&a&&(t.TgZ(0,"div",2),t.YNc(1,Ko,2,3,"span",16),t.YNc(2,ur,2,0,"button",17),t.YNc(3,Vo,2,0,"button",17),t.qZA()),2&a){const r=g.$implicit;t.xp6(1),t.Q6J("ngForOf",r.spans),t.xp6(1),t.Q6J("ngIf",!r.audio.paused),t.xp6(1),t.Q6J("ngIf",r.audio.paused)}}function Xo(a,g){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,$o,4,3,"div",15),t.qZA()),2&a){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.chosenSections)}}function oi(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div")(1,"button",24),t._uU(2),t.qZA(),t.TgZ(3,"button",25),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(2);return t.KtG(u.changeSections(u.sentences))}),t._uU(4),t.qZA()()}if(2&a){const r=t.oxw(2);t.xp6(2),t.Oqu(r.ts.l.paragraph),t.xp6(2),t.Oqu(r.ts.l.sentence)}}function En(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div")(1,"button",25),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(2);return t.KtG(u.changeSections(u.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",24),t._uU(4),t.qZA()()}if(2&a){const r=t.oxw(2);t.xp6(2),t.Oqu(r.ts.l.paragraph),t.xp6(2),t.Oqu(r.ts.l.sentence)}}function Lt(a,g){if(1&a&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t.qZA(),t.YNc(3,oi,5,2,"div",11),t.YNc(4,En,5,2,"div",11),t.qZA()),2&a){const r=t.oxw();t.xp6(2),t.hij(" ",r.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",r.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",r.isSentenceMode())}}let jo=(()=>{class a{constructor(r,s,u,v,p){this.storyService=r,this.route=s,this.router=u,this.ts=v,this.synthesis=p,this.paragraphs=[],this.sentences=[],this.audioFinishedLoading=!1}ngOnInit(){var r=this;return(0,x.Z)(function*(){r.storyId=r.route.snapshot.paramMap.get("id");let s=yield(0,de.z)(r.storyService.getStory(r.storyId));r.synthesis.synthesiseStory(s).then(([u,v])=>{r.paragraphs=u,r.sentences=v,r.chosenSections=r.paragraphs,r.audioFinishedLoading=!0})})()}isSentenceMode(){return this.chosenSections[0]instanceof Oe.cj}isParagraphMode(){return this.chosenSections[0]instanceof Oe.nv}changeSections(r){this.chosenSections=r,this.paragraphs.concat(this.sentences).forEach(u=>this.stopSection(u))}playSection(r){r.play(),r.highlight()}stopSection(r){r.stop(),r.removeHighlight()}goToDashboard(){this.router.navigateByUrl("/student/dashboard/"+this.storyId)}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(b.N),t.Y36(l.gz),t.Y36(l.F0),t.Y36(B.D),t.Y36(Oe.cf))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-synthesis"]],decls:18,vars:5,consts:[["src","assets/img/book.png",1,"bookImg"],[1,"page"],[1,"paragraphContainer"],[1,"bookContainerSynth"],[1,"bookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"storyContainer"],[1,"storyHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[4,"ngIf"],[1,"footer"],["class","btnContainer",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"btnContainer"],[1,"footerText"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"]],template:function(r,s){1&r&&(t._UZ(0,"img",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t.NdJ("click",function(){return s.goToDashboard()}),t._UZ(6,"i",6),t._uU(7),t.qZA(),t._UZ(8,"div"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8),t._uU(11),t.qZA(),t.TgZ(12,"div")(13,"div",9),t.YNc(14,cr,4,1,"div",10),t.YNc(15,Xo,2,1,"div",11),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,Lt,5,3,"div",13),t.qZA()()()()()),2&r&&(t.xp6(7),t.hij(" ",s.ts.l.story,""),t.xp6(4),t.hij(" ",s.ts.l.listen_and_correct," "),t.xp6(3),t.Q6J("ngIf",!s.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",s.audioFinishedLoading),t.xp6(2),t.Q6J("ngIf",s.audioFinishedLoading))},dependencies:[D.sg,D.O5,Pt.P,ct],styles:['.bookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:var(--dark-text);width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.storyContainer[_ngcontent-%COMP%]{margin-top:10px}.storyHeader[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]:hover, .selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),a})();class si{constructor(g,r=[],s=[],u=[],v=[],p=[],T=[]){this.paragraphAudioIds=r,this.paragraphIndices=s,this.paragraphTranscriptions=u,this.sentenceAudioIds=v,this.sentenceIndices=p,this.sentenceTranscriptions=T,this.storyData=g,this.date=new Date,this.archived=!1}}var ai=k(2754);function lr(a,g){1&a&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function dr(a,g){if(1&a&&(t.TgZ(0,"div",16),t._uU(1),t._UZ(2,"i",17),t.qZA()),2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.saved," ")}}function ci(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(2);return t.KtG(u.saveRecordings())}),t._uU(1),t._UZ(2,"i",19),t.qZA()}if(2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.save," ")}}function es(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t.NdJ("click",function(){t.CHM(r);const u=t.oxw();return t.KtG(u.goToDashboard())}),t._UZ(2,"i",10),t._uU(3),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.YNc(6,lr,2,0,"span",12),t.qZA(),t.TgZ(7,"div",13),t.YNc(8,dr,3,1,"div",14),t.YNc(9,ci,3,1,"div",15),t.qZA()()}if(2&a){const r=t.oxw();t.xp6(3),t.hij(" ",r.ts.l.story," "),t.xp6(2),t.hij(" ",null==r.story?null:r.story.title,""),t.xp6(1),t.Q6J("ngIf",!r.recordingSaved),t.xp6(2),t.Q6J("ngIf",r.recordingSaved),t.xp6(1),t.Q6J("ngIf",!r.recordingSaved)}}function fr(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){t.CHM(r),t.oxw();const u=t.MAs(5);return t.KtG(u.toggle())}),t.TgZ(1,"mat-icon"),t._uU(2,"menu"),t.qZA(),t._uU(3),t.qZA()}if(2&a){const r=t.oxw();t.xp6(3),t.hij(" ",r.ts.l.archive," ")}}const hr=function(a){return{"font-style":a}};function ts(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div")(1,"div",21),t.NdJ("click",function(){const v=t.CHM(r).$implicit,p=t.oxw();return t.KtG(p.setCurrentRecording(v))}),t.TgZ(2,"div",22)(3,"div",23),t._uU(4),t.qZA()(),t.TgZ(5,"div",24),t._uU(6),t.ALo(7,"date"),t.qZA()(),t._UZ(8,"hr"),t.qZA()}if(2&a){const r=g.$implicit;t.xp6(1),t.uIk("id",r._id),t.xp6(2),t.Q6J("ngStyle",t.VKq(7,hr,r.archived?"none":"italic")),t.xp6(1),t.hij(" ",null==r||null==r.storyData?null:r.storyData.title,""),t.xp6(2),t.hij(" ",t.xi3(7,4,r.date,"d/M/yy, h:mm a")," ")}}function ui(a,g){if(1&a&&(t.TgZ(0,"div",30)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&a){const r=t.oxw(2);t.xp6(2),t.Oqu(r.ts.l.synthesising)}}function Ie(a,g){1&a&&(t._UZ(0,"span",42),t.ALo(1,"safeHtml")),2&a&&t.Q6J("innerHTML",t.lcZ(1,1,g.$implicit.outerHTML),t.oJD)}function pr(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(r);const u=t.oxw().$implicit,v=t.oxw(3);return t.KtG(v.stopSection(u))}),t._UZ(1,"i",44),t.qZA()}}function rn(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(r);const u=t.oxw().$implicit,v=t.oxw(3);return t.KtG(v.playSection(u))}),t._UZ(1,"i",45),t.qZA()}}function li(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(r);const u=t.oxw().index,v=t.oxw(3);return t.KtG(v.recordAudio(u))}),t._UZ(1,"i",47),t.qZA()}}function di(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(r);const u=t.oxw().index,v=t.oxw(3);return t.KtG(v.stopRecording(u))}),t._UZ(1,"i",49),t.qZA()}}function ns(a,g){1&a&&t._UZ(0,"hr",50)}function rs(a,g){1&a&&(t.TgZ(0,"div",51),t._UZ(1,"div",52),t.qZA())}function is(a,g){if(1&a&&(t.TgZ(0,"div",53)(1,"span",54),t._uU(2),t.qZA(),t.TgZ(3,"span",55),t._uU(4),t.qZA()()),2&a){const r=t.oxw().index,s=t.oxw(3);t.xp6(2),t.hij("",s.ts.l.speech_recognition_output," "),t.xp6(2),t.Oqu(s.sectionTranscriptions[r])}}function os(a,g){if(1&a&&t._UZ(0,"audio",59,60),2&a){const r=t.oxw(2).index,s=t.oxw(3);t.uIk("src",s.sectionAudioSources[r],t.LSH)}}function ss(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(2).index,v=t.oxw(3);return t.KtG(v.deleteRecording(u))}),t._UZ(1,"i",62),t.qZA()}}function Nt(a,g){if(1&a&&(t.TgZ(0,"div",56)(1,"div",54),t._uU(2),t.qZA(),t.YNc(3,os,2,1,"audio",57),t.YNc(4,ss,2,0,"button",58),t.qZA()),2&a){const r=t.oxw().index,s=t.oxw(3);t.xp6(2),t.Oqu(s.ts.l.your_recording),t.xp6(1),t.Q6J("ngIf",s.sectionAudioSources[r]),t.xp6(1),t.Q6J("ngIf",s.sectionAudioSources[r]&&!s.currentRecording.archived)}}function as(a,g){if(1&a&&(t.TgZ(0,"div",32)(1,"div",33)(2,"div"),t.YNc(3,Ie,2,3,"span",34),t.YNc(4,pr,2,0,"button",35),t.YNc(5,rn,2,0,"button",35),t.YNc(6,li,2,0,"button",36),t.YNc(7,di,2,0,"button",37),t.qZA(),t.YNc(8,ns,1,0,"hr",38),t.YNc(9,rs,2,0,"div",39),t.YNc(10,is,5,2,"div",40),t.YNc(11,Nt,5,3,"div",41),t.qZA()()),2&a){const r=g.$implicit,s=g.index,u=t.oxw(3);t.xp6(3),t.Q6J("ngForOf",r.spans),t.xp6(1),t.Q6J("ngIf",!r.audio.paused),t.xp6(1),t.Q6J("ngIf",r.audio.paused),t.xp6(1),t.Q6J("ngIf",!u.isRecording(r,s)&&!u.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",u.isRecording(r,s)&&!u.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",u.sectionAudioSources[s]),t.xp6(1),t.Q6J("ngIf",u.isTranscribing[s]),t.xp6(1),t.Q6J("ngIf",u.sectionTranscriptions[s]),t.xp6(1),t.Q6J("ngIf",u.sectionAudioSources[s])}}function cs(a,g){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,as,12,9,"div",31),t.qZA()),2&a){const r=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",r.chosenSections)}}function gr(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div")(1,"button",67),t._uU(2),t.qZA(),t.TgZ(3,"button",68),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(3);return t.KtG(u.changeSections(u.sentences))}),t._uU(4),t.qZA()()}if(2&a){const r=t.oxw(3);t.xp6(2),t.hij(" ",r.ts.l.paragraph," "),t.xp6(2),t.hij(" ",r.ts.l.sentence," ")}}function fi(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"div")(1,"button",68),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(3);return t.KtG(u.changeSections(u.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",67),t._uU(4),t.qZA()()}if(2&a){const r=t.oxw(3);t.xp6(2),t.hij(" ",r.ts.l.paragraph," "),t.xp6(2),t.hij(" ",r.ts.l.sentence," ")}}function pt(a,g){if(1&a){const r=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(r);const u=t.oxw(3);return t.KtG(u.archiveRecording())}),t._uU(1),t.qZA()}if(2&a){const r=t.oxw(3);t.xp6(1),t.hij(" ",r.ts.l.archive_recording," ")}}function In(a,g){if(1&a&&(t.TgZ(0,"div",63)(1,"div",64)(2,"div",65),t._uU(3),t.qZA(),t.YNc(4,gr,5,2,"div",12),t.YNc(5,fi,5,2,"div",12),t.YNc(6,pt,2,1,"button",66),t.qZA()()),2&a){const r=t.oxw(2);t.xp6(3),t.hij(" ",r.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",r.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",r.isSentenceMode()),t.xp6(1),t.Q6J("ngIf",!r.currentRecording.archived&&r.currentRecording.storyData.text!=r.story.text)}}function us(a,g){if(1&a&&(t.TgZ(0,"div",25)(1,"div",26),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t.YNc(4,ui,4,1,"div",28),t.YNc(5,cs,2,1,"div",12),t.qZA(),t.YNc(6,In,7,4,"div",29),t.qZA()),2&a){const r=t.oxw();t.xp6(2),t.hij(" ",r.ts.l.listen_record_compare," "),t.xp6(2),t.Q6J("ngIf",!r.audioFinishedLoading&&!r.recordingsFinishedLoading),t.xp6(1),t.Q6J("ngIf",r.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",r.audioFinishedLoading)}}const ds=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"contents",component:eo,canActivate:[w.P]},{path:"dashboard",component:pe,canActivate:[w.P],canDeactivate:[_]},{path:"synthesis/:id",component:jo,canActivate:[w.P],canDeactivate:[A]},{path:"record-story/:id",component:(()=>{class a{constructor(r,s,u,v,p,T,C,F,L){this.storyService=r,this.ts=s,this.sanitizer=u,this.route=v,this.router=p,this.recordingService=T,this.synthesis=C,this.engagement=F,this.dialog=L,this.story=new M,this.paragraphs=[],this.sentences=[],this.isRecordingParagraph=[],this.isRecordingSentence=[],this.isRecordingSection=[],this.paragraphAudioSources=[],this.sentenceAudioSources=[],this.sectionAudioSources=[],this.paragraphBlobs=[],this.sentenceBlobs=[],this.sectionBlobs=[],this.paragraphChunks=[],this.sentenceChunks=[],this.sectionChunks=[],this.recordingSaved=!0,this.audioFinishedLoading=!1,this.url_ASR_API="https://phoneticsrv3.lcs.tcd.ie/asr_api/recognise",this.sentenceTranscriptions=[],this.paragraphTranscriptions=[],this.sectionTranscriptions=[],this.isTranscribing=[!1],this.recordings=[],this.currentRecording=null,this.lastClickedRecordingId=""}ngOnInit(){var r=this;return(0,x.Z)(function*(){r.chunks=[],r.sectionAudioSources=r.paragraphAudioSources,r.sectionBlobs=r.paragraphBlobs,r.sectionChunks=r.paragraphChunks,r.sectionTranscriptions=r.paragraphTranscriptions,r.isRecordingSection=r.isRecordingParagraph;const s=r.route.snapshot.paramMap.get("id");r.story=yield(0,de.z)(r.storyService.getStory(s)),(0,ai.TD)({audio:!0,video:!1}).then((0,x.Z)(function*(){r.story.activeRecording?r.loadRecordings():r.createNewRecording()})).catch(u=>{r.openMicRequestDialog()})})()}loadRecordings(){var r=this;return(0,x.Z)(function*(){r.recordings=yield(0,de.z)(r.recordingService.getRecordings(r.story._id)),r.recordings.sort((u,v)=>u.date>v.date?-1:1);let s=r.recordings.filter(u=>!1===u.archived);r.setCurrentRecording(s[0])})()}setCurrentRecording(r){this.currentRecording=r,this.loadSynthesis(this.currentRecording.storyData),this.loadAudio(this.currentRecording);let s=this.currentRecording._id,u=document.getElementById(s);u&&(this.lastClickedRecordingId&&document.getElementById(this.lastClickedRecordingId).classList.remove("clickedresultCard"),this.lastClickedRecordingId=s,u.classList.add("clickedresultCard"))}createNewRecording(){var r=this;return(0,x.Z)(function*(){const s=yield(0,de.z)(r.recordingService.create(new si(r.story)));r.story=yield(0,de.z)(r.storyService.updateActiveRecording(r.story._id,s._id)),r.loadRecordings()})()}archiveRecording(){var r=this;return(0,x.Z)(function*(){yield(0,de.z)(r.recordingService.updateArchiveStatus(r.currentRecording._id)),r.createNewRecording()})()}loadSynthesis(r){this.synthesis.synthesiseStory(r).then(([s,u])=>{this.paragraphs=s,this.sentences=u,this.chosenSections=this.paragraphs,this.audioFinishedLoading=!0})}loadAudio(r){var s=this;return(0,x.Z)(function*(){s.audioFinishedLoading=!1,s.paragraphAudioSources=[],s.paragraphTranscriptions=[],s.sentenceAudioSources=[],s.sentenceTranscriptions=[],s.sectionAudioSources=[],s.sectionTranscriptions=[];for(let u=0;u<r.paragraphIndices.length;++u){let v=yield(0,de.z)(s.recordingService.getAudio(r.paragraphAudioIds[u]));s.paragraphBlobs[u]=v,s.paragraphAudioSources[r.paragraphIndices[u]]=s.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(v)),s.paragraphTranscriptions[r.paragraphIndices[u]]=r.paragraphTranscriptions[r.paragraphIndices[u]]}for(let u=0;u<r.sentenceIndices.length;++u){let v=yield(0,de.z)(s.recordingService.getAudio(r.sentenceAudioIds[u]));s.sentenceBlobs[u]=v,s.sentenceAudioSources[r.sentenceIndices[u]]=s.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(v)),s.sentenceTranscriptions[r.sentenceIndices[u]]=r.sentenceTranscriptions[r.sentenceIndices[u]]}s.sectionTranscriptions=s.paragraphTranscriptions,s.sectionAudioSources=s.paragraphAudioSources})()}recordAudio(r){this.engagement.addEventForLoggedInUser(U.tw["RECORD-STORY"],this.story),navigator.mediaDevices.getUserMedia({audio:!0}).then(u=>{this.stream=u,this.recorder=new MediaRecorder(this.stream),this.sectionChunks[r]=[],this.recorder.start(),this.isRecordingSection[r]=!0,this.recorder.ondataavailable=v=>{this.sectionChunks[r].push(v.data)}}).catch()}stopRecording(r){this.recorder.stop(),this.isRecordingSection[r]=!1,this.stream.getTracks().forEach(s=>s.stop()),setTimeout(()=>{const s=new Blob(this.sectionChunks[r],{type:"audio/mp3"});this.sectionBlobs[r]=s,this.sectionAudioSources[r]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(s)),this.recordingSaved=!1;const u=new FileReader;u.readAsDataURL(s),u.onloadend=function(){let v=u.result.split(";base64,")[1];this.getTranscription(v,r)}.bind(this)},500)}getTranscription(r,s){this.isTranscribing[s]=!0,this.isParagraphMode()&&(this.paragraphTranscriptions[s]=null),this.isSentenceMode()&&(this.sentenceTranscriptions[s]=null),fetch(this.url_ASR_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({recogniseBlob:r,developer:!0})}).then(v=>v.json()).then(v=>{let p=v.transcriptions[0].utterance;this.isParagraphMode()?(this.paragraphTranscriptions[s]=p,this.sectionTranscriptions[s]=this.paragraphTranscriptions[s]):this.isSentenceMode()&&(this.sentenceTranscriptions[s]=p,this.sectionTranscriptions[s]=this.sentenceTranscriptions[s]),this.isTranscribing[s]=!1})}deleteRecording(r){this.recordingSaved=!1,delete this.sectionAudioSources[r],delete this.sectionChunks[r],delete this.sectionBlobs[r],delete this.sectionTranscriptions[r]}saveRecordings(){var r=this;return(0,x.Z)(function*(){const s=Object.entries(r.paragraphBlobs).map(function(){var j=(0,x.Z)(function*([et,gt]){return r.recordingService.saveAudio(r.story._id,gt,et).toPromise()});return function(et){return j.apply(this,arguments)}}()),u=Object.entries(r.sentenceBlobs).map(function(){var j=(0,x.Z)(function*([et,gt]){return r.recordingService.saveAudio(r.story._id,gt,et).toPromise()});return function(et){return j.apply(this,arguments)}}()),v=yield Promise.all(s),p=yield Promise.all(u);let T=[],C=[];for(const j of v)T.push(j.index),C.push(j.fileId);let F=[],L=[];for(const j of p)F.push(j.index),L.push(j.fileId);const J={paragraphAudioIds:C,paragraphIndices:T,paragraphTranscriptions:r.paragraphTranscriptions,sentenceIndices:F,sentenceAudioIds:L,sentenceTranscriptions:r.sentenceTranscriptions};let ie=yield(0,de.z)(r.recordingService.update(r.story.activeRecording,J));if(ie){r.recordingSaved=!0;const j=r.recordings.indexOf(r.currentRecording);r.recordings.splice(j,1,ie)}else alert("Error while saving audio")})()}isRecording(r,s){return r instanceof Oe.cj?this.isRecordingSentence[s]:r instanceof Oe.nv?this.isRecordingParagraph[s]:void 0}isSentenceMode(){return this.chosenSections[0]instanceof Oe.cj}isParagraphMode(){return this.chosenSections[0]instanceof Oe.nv}changeSections(r){this.chosenSections=r,this.paragraphs.concat(this.sentences).forEach(u=>this.stopSection(u)),this.isSentenceMode()?(this.sectionAudioSources=this.sentenceAudioSources,this.sectionBlobs=this.sentenceBlobs,this.sectionChunks=this.sentenceChunks,this.sectionTranscriptions=this.sentenceTranscriptions,this.isRecordingSection=this.isRecordingSentence):this.isParagraphMode()&&(this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.sectionTranscriptions=this.paragraphTranscriptions,this.isRecordingSection=this.isRecordingParagraph)}playSection(r){r.play(),r.highlight()}stopSection(r){r.stop(),r.removeHighlight()}goToDashboard(){this.router.navigateByUrl("student/dashboard")}openMicRequestDialog(){var r=this;this.dialogRef=this.dialog.open(E.p,{data:{title:this.ts.l.microphone_blocked,message:this.ts.l.page_requires_microphone,confirmText:this.ts.l.refresh,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var s=(0,x.Z)(function*(u){r.dialogRef=void 0,console.log(u),u?r.ngOnInit():r.goToDashboard()});return function(u){return s.apply(this,arguments)}}())}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(b.N),t.Y36(B.D),t.Y36(kn.H7),t.Y36(l.gz),t.Y36(l.F0),t.Y36(we.s),t.Y36(Oe.cf),t.Y36(z.M),t.Y36(h.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-recording"]],decls:8,vars:4,consts:[[1,"content"],["class","recordingBookHeader",4,"ngIf"],["class","archiveButton",3,"click",4,"ngIf"],["autosize","",1,"archiveNavContainer"],["mode","side",1,"sidenav"],["drawer",""],[4,"ngFor","ngForOf"],["class","recordingStoryContainer",4,"ngIf"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"archiveButton",3,"click"],[1,"contentSection",3,"click"],[1,"contentsLink"],[3,"ngStyle"],[1,"contentsDate"],[1,"recordingStoryContainer"],[1,"recordingStoryHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],["class","footer","style","padding-top: 10px",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],["class","recordingBtn",3,"click",4,"ngIf"],["class","notRecordingBtn blink",3,"click",4,"ngIf"],["class","dividerLine",4,"ngIf"],["class","recognisedSpeechContainer",4,"ngIf"],["style","height: 40px",4,"ngIf"],["class","audioContainer",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"recordingBtn",3,"click"],[1,"fas","fa-microphone"],[1,"notRecordingBtn","blink",3,"click"],[1,"fas","fa-stop-circle"],[1,"dividerLine"],[1,"recognisedSpeechContainer"],[1,"dot-flashing"],[2,"height","40px"],[2,"opacity","0.5"],[1,"recognisedSpeech"],[1,"audioContainer"],["controls","","class","audioPlayer",4,"ngIf"],["class","notRecordingBtn trashBtn",3,"click",4,"ngIf"],["controls","",1,"audioPlayer"],["audioTag",""],[1,"notRecordingBtn","trashBtn",3,"click"],[1,"fas","fa-trash-alt"],[1,"footer",2,"padding-top","10px"],[1,"btnContainer"],[1,"footerText"],["class","changeSplitBtn","style","margin-left: auto",3,"click",4,"ngIf"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"],[1,"changeSplitBtn",2,"margin-left","auto",3,"click"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0),t.YNc(1,es,10,5,"div",1),t.YNc(2,fr,4,1,"div",2),t.TgZ(3,"mat-drawer-container",3)(4,"mat-drawer",4,5),t.YNc(6,ts,9,9,"div",6),t.qZA(),t.YNc(7,us,7,4,"div",7),t.qZA()()),2&r&&(t.xp6(1),t.Q6J("ngIf",s.story),t.xp6(1),t.Q6J("ngIf",s.recordings.length>0),t.xp6(4),t.Q6J("ngForOf",s.recordings),t.xp6(1),t.Q6J("ngIf",s.story))},dependencies:[D.sg,D.O5,D.PC,Pt.P,Mn,ir,An.Hw,D.uU,ct],styles:['.content[_ngcontent-%COMP%]{width:90%;margin-left:5%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.archiveNavContainer[_ngcontent-%COMP%]{height:70vh;background-color:#fff}.sidenav[_ngcontent-%COMP%]{padding:20px;width:20vw}.archiveButton[_ngcontent-%COMP%]{display:flex;margin-left:10px;margin-top:20px;font-size:16px}.archiveButton[_ngcontent-%COMP%]:hover, .contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:20px;height:80%}.textContainerSynth[_ngcontent-%COMP%]{box-shadow:0 0 11px 2px #0006;margin-left:5%;width:90%;color:var(--dark-text);background-color:#f8f9fa;text-align:left;overflow:auto;height:100%}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{white-space:nowrap;display:inline;border-style:none;color:var(--dark-text);width:10rem;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.bookTitle[_ngcontent-%COMP%]{overflow:auto;color:var(--dark-text);margin-left:2em;margin-right:2em;display:inline-block;font-size:16pt}.recordingSaveIcon[_ngcontent-%COMP%]{width:10rem;color:var(--dark-text);border-style:none;font-size:11pt;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{white-space:nowrap;color:var(--scealai-light-brown)}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);cursor:pointer;transition:.5s}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:10px;font-weight:700;border-radius:10px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.recordingBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px;float:right}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.recognisedSpeech[_ngcontent-%COMP%]{color:var(--scealai-green);font-style:italic;padding-left:5px}.audioContainer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.audioPlayer[_ngcontent-%COMP%]{width:25%;height:35px}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}.selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}.blink[_ngcontent-%COMP%]{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),a})(),canActivate:[w.P],canDeactivate:[N]}];let Ut=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[l.Bz.forChild(ds),l.Bz]}),a})();var Ye=k(3869);let hi=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[D.ez,Ut,Dr.LD,ve.u5,Ye.F,Yr,Qr.ot,An.Ps,tn.Tx,zr.fi.forRoot({customOptions:[{import:"formats/font",whitelist:["sans-serif","serif","monospace","arial","times-new-roman"]}]})]}),a})()},7230:function(Fe){Fe.exports=function(Y){var k={};function D(l){if(k[l])return k[l].exports;var w=k[l]={i:l,l:!1,exports:{}};return Y[l].call(w.exports,w,w.exports,D),w.l=!0,w.exports}return D.m=Y,D.c=k,D.d=function(l,w,E){D.o(l,w)||Object.defineProperty(l,w,{enumerable:!0,get:E})},D.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},D.t=function(l,w){if(1&w&&(l=D(l)),8&w||4&w&&"object"==typeof l&&l&&l.__esModule)return l;var E=Object.create(null);if(D.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:l}),2&w&&"string"!=typeof l)for(var B in l)D.d(E,B,function(t){return l[t]}.bind(null,B));return E},D.n=function(l){var w=l&&l.__esModule?function(){return l.default}:function(){return l};return D.d(w,"a",w),w},D.o=function(l,w){return Object.prototype.hasOwnProperty.call(l,w)},D.p="",D(D.s=90)}({17:function(Y,k,D){"use strict";k.__esModule=!0,k.default=void 0;var l=D(18),w=function(){function E(){}return E.getFirstMatch=function(B,t){var h=t.match(B);return h&&h.length>0&&h[1]||""},E.getSecondMatch=function(B,t){var h=t.match(B);return h&&h.length>1&&h[2]||""},E.matchAndReturnConst=function(B,t,h){if(B.test(t))return h},E.getWindowsVersionName=function(B){switch(B){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},E.getMacOSVersionName=function(B){var t=B.split(".").splice(0,2).map(function(h){return parseInt(h,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},E.getAndroidVersionName=function(B){var t=B.split(".").splice(0,2).map(function(h){return parseInt(h,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},E.getVersionPrecision=function(B){return B.split(".").length},E.compareVersions=function(B,t,h){void 0===h&&(h=!1);var _=E.getVersionPrecision(B),N=E.getVersionPrecision(t),A=Math.max(_,N),x=0,O=E.map([B,t],function(M){var b=A-E.getVersionPrecision(M),Z=M+new Array(b+1).join(".0");return E.map(Z.split("."),function(U){return new Array(20-U.length).join("0")+U}).reverse()});for(h&&(x=A-Math.min(_,N)),A-=1;A>=x;){if(O[0][A]>O[1][A])return 1;if(O[0][A]===O[1][A]){if(A===x)return 0;A-=1}else if(O[0][A]<O[1][A])return-1}},E.map=function(B,t){var h,_=[];if(Array.prototype.map)return Array.prototype.map.call(B,t);for(h=0;h<B.length;h+=1)_.push(t(B[h]));return _},E.find=function(B,t){var h,_;if(Array.prototype.find)return Array.prototype.find.call(B,t);for(h=0,_=B.length;h<_;h+=1){var N=B[h];if(t(N,h))return N}},E.assign=function(B){for(var t,h,_=B,N=arguments.length,A=new Array(N>1?N-1:0),x=1;x<N;x++)A[x-1]=arguments[x];if(Object.assign)return Object.assign.apply(Object,[B].concat(A));var O=function(){var M=A[t];"object"==typeof M&&null!==M&&Object.keys(M).forEach(function(b){_[b]=M[b]})};for(t=0,h=A.length;t<h;t+=1)O();return B},E.getBrowserAlias=function(B){return l.BROWSER_ALIASES_MAP[B]},E.getBrowserTypeByAlias=function(B){return l.BROWSER_MAP[B]||""},E}();k.default=w,Y.exports=k.default},18:function(Y,k,D){"use strict";k.__esModule=!0,k.ENGINE_MAP=k.OS_MAP=k.PLATFORMS_MAP=k.BROWSER_MAP=k.BROWSER_ALIASES_MAP=void 0,k.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},k.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},k.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},k.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},k.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(Y,k,D){"use strict";k.__esModule=!0,k.default=void 0;var l,w=(l=D(91))&&l.__esModule?l:{default:l},E=D(18);function B(h,_){for(var N=0;N<_.length;N++){var A=_[N];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(h,A.key,A)}}var t=function(){function h(){}var _,A;return h.getParser=function(x,O){if(void 0===O&&(O=!1),"string"!=typeof x)throw new Error("UserAgent should be a string");return new w.default(x,O)},h.parse=function(x){return new w.default(x).getResult()},_=h,A=[{key:"BROWSER_MAP",get:function(){return E.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return E.ENGINE_MAP}},{key:"OS_MAP",get:function(){return E.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return E.PLATFORMS_MAP}}],null&&B(_.prototype,null),A&&B(_,A),h}();k.default=t,Y.exports=k.default},91:function(Y,k,D){"use strict";k.__esModule=!0,k.default=void 0;var l=h(D(92)),w=h(D(93)),E=h(D(94)),B=h(D(95)),t=h(D(17));function h(N){return N&&N.__esModule?N:{default:N}}var _=function(){function N(x,O){if(void 0===O&&(O=!1),null==x||""===x)throw new Error("UserAgent parameter can't be empty");this._ua=x,this.parsedResult={},!0!==O&&this.parse()}var A=N.prototype;return A.getUA=function(){return this._ua},A.test=function(x){return x.test(this._ua)},A.parseBrowser=function(){var x=this;this.parsedResult.browser={};var O=t.default.find(l.default,function(M){if("function"==typeof M.test)return M.test(x);if(M.test instanceof Array)return M.test.some(function(b){return x.test(b)});throw new Error("Browser's test function is not valid")});return O&&(this.parsedResult.browser=O.describe(this.getUA())),this.parsedResult.browser},A.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},A.getBrowserName=function(x){return x?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},A.getBrowserVersion=function(){return this.getBrowser().version},A.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},A.parseOS=function(){var x=this;this.parsedResult.os={};var O=t.default.find(w.default,function(M){if("function"==typeof M.test)return M.test(x);if(M.test instanceof Array)return M.test.some(function(b){return x.test(b)});throw new Error("Browser's test function is not valid")});return O&&(this.parsedResult.os=O.describe(this.getUA())),this.parsedResult.os},A.getOSName=function(x){var O=this.getOS().name;return x?String(O).toLowerCase()||"":O||""},A.getOSVersion=function(){return this.getOS().version},A.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},A.getPlatformType=function(x){void 0===x&&(x=!1);var O=this.getPlatform().type;return x?String(O).toLowerCase()||"":O||""},A.parsePlatform=function(){var x=this;this.parsedResult.platform={};var O=t.default.find(E.default,function(M){if("function"==typeof M.test)return M.test(x);if(M.test instanceof Array)return M.test.some(function(b){return x.test(b)});throw new Error("Browser's test function is not valid")});return O&&(this.parsedResult.platform=O.describe(this.getUA())),this.parsedResult.platform},A.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},A.getEngineName=function(x){return x?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},A.parseEngine=function(){var x=this;this.parsedResult.engine={};var O=t.default.find(B.default,function(M){if("function"==typeof M.test)return M.test(x);if(M.test instanceof Array)return M.test.some(function(b){return x.test(b)});throw new Error("Browser's test function is not valid")});return O&&(this.parsedResult.engine=O.describe(this.getUA())),this.parsedResult.engine},A.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},A.getResult=function(){return t.default.assign({},this.parsedResult)},A.satisfies=function(x){var O=this,M={},b=0,Z={},U=0;if(Object.keys(x).forEach(function(le){var de=x[le];"string"==typeof de?(Z[le]=de,U+=1):"object"==typeof de&&(M[le]=de,b+=1)}),b>0){var z=Object.keys(M),X=t.default.find(z,function(le){return O.isOS(le)});if(X){var H=this.satisfies(M[X]);if(void 0!==H)return H}var W=t.default.find(z,function(le){return O.isPlatform(le)});if(W){var ae=this.satisfies(M[W]);if(void 0!==ae)return ae}}if(U>0){var we=Object.keys(Z),be=t.default.find(we,function(le){return O.isBrowser(le,!0)});if(void 0!==be)return this.compareVersion(Z[be])}},A.isBrowser=function(x,O){void 0===O&&(O=!1);var M=this.getBrowserName().toLowerCase(),b=x.toLowerCase(),Z=t.default.getBrowserTypeByAlias(b);return O&&Z&&(b=Z.toLowerCase()),b===M},A.compareVersion=function(x){var O=[0],M=x,b=!1,Z=this.getBrowserVersion();if("string"==typeof Z)return">"===x[0]||"<"===x[0]?(M=x.substr(1),"="===x[1]?(b=!0,M=x.substr(2)):O=[],O.push(">"===x[0]?1:-1)):"="===x[0]?M=x.substr(1):"~"===x[0]&&(b=!0,M=x.substr(1)),O.indexOf(t.default.compareVersions(Z,M,b))>-1},A.isOS=function(x){return this.getOSName(!0)===String(x).toLowerCase()},A.isPlatform=function(x){return this.getPlatformType(!0)===String(x).toLowerCase()},A.isEngine=function(x){return this.getEngineName(!0)===String(x).toLowerCase()},A.is=function(x,O){return void 0===O&&(O=!1),this.isBrowser(x,O)||this.isOS(x)||this.isPlatform(x)},A.some=function(x){var O=this;return void 0===x&&(x=[]),x.some(function(M){return O.is(M)})},N}();k.default=_,Y.exports=k.default},92:function(Y,k,D){"use strict";k.__esModule=!0,k.default=void 0;var l,w=(l=D(17))&&l.__esModule?l:{default:l},E=/version\/(\d+(\.?_?\d+)+)/i;k.default=[{test:[/googlebot/i],describe:function(t){var h={name:"Googlebot"},_=w.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/opera/i],describe:function(t){var h={name:"Opera"},_=w.default.getFirstMatch(E,t)||w.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/opr\/|opios/i],describe:function(t){var h={name:"Opera"},_=w.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/SamsungBrowser/i],describe:function(t){var h={name:"Samsung Internet for Android"},_=w.default.getFirstMatch(E,t)||w.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/Whale/i],describe:function(t){var h={name:"NAVER Whale Browser"},_=w.default.getFirstMatch(E,t)||w.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/MZBrowser/i],describe:function(t){var h={name:"MZ Browser"},_=w.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/focus/i],describe:function(t){var h={name:"Focus"},_=w.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/swing/i],describe:function(t){var h={name:"Swing"},_=w.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/coast/i],describe:function(t){var h={name:"Opera Coast"},_=w.default.getFirstMatch(E,t)||w.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var h={name:"Opera Touch"},_=w.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/yabrowser/i],describe:function(t){var h={name:"Yandex Browser"},_=w.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/ucbrowser/i],describe:function(t){var h={name:"UC Browser"},_=w.default.getFirstMatch(E,t)||w.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/Maxthon|mxios/i],describe:function(t){var h={name:"Maxthon"},_=w.default.getFirstMatch(E,t)||w.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/epiphany/i],describe:function(t){var h={name:"Epiphany"},_=w.default.getFirstMatch(E,t)||w.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/puffin/i],describe:function(t){var h={name:"Puffin"},_=w.default.getFirstMatch(E,t)||w.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/sleipnir/i],describe:function(t){var h={name:"Sleipnir"},_=w.default.getFirstMatch(E,t)||w.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/k-meleon/i],describe:function(t){var h={name:"K-Meleon"},_=w.default.getFirstMatch(E,t)||w.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/micromessenger/i],describe:function(t){var h={name:"WeChat"},_=w.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/qqbrowser/i],describe:function(t){var h={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},_=w.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/msie|trident/i],describe:function(t){var h={name:"Internet Explorer"},_=w.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/\sedg\//i],describe:function(t){var h={name:"Microsoft Edge"},_=w.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/edg([ea]|ios)/i],describe:function(t){var h={name:"Microsoft Edge"},_=w.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/vivaldi/i],describe:function(t){var h={name:"Vivaldi"},_=w.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/seamonkey/i],describe:function(t){var h={name:"SeaMonkey"},_=w.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/sailfish/i],describe:function(t){var h={name:"Sailfish"},_=w.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return _&&(h.version=_),h}},{test:[/silk/i],describe:function(t){var h={name:"Amazon Silk"},_=w.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/phantom/i],describe:function(t){var h={name:"PhantomJS"},_=w.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/slimerjs/i],describe:function(t){var h={name:"SlimerJS"},_=w.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var h={name:"BlackBerry"},_=w.default.getFirstMatch(E,t)||w.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var h={name:"WebOS Browser"},_=w.default.getFirstMatch(E,t)||w.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/bada/i],describe:function(t){var h={name:"Bada"},_=w.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/tizen/i],describe:function(t){var h={name:"Tizen"},_=w.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/qupzilla/i],describe:function(t){var h={name:"QupZilla"},_=w.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var h={name:"Firefox"},_=w.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/electron/i],describe:function(t){var h={name:"Electron"},_=w.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/MiuiBrowser/i],describe:function(t){var h={name:"Miui"},_=w.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/chromium/i],describe:function(t){var h={name:"Chromium"},_=w.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/chrome|crios|crmo/i],describe:function(t){var h={name:"Chrome"},_=w.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/GSA/i],describe:function(t){var h={name:"Google Search"},_=w.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:function(t){var h=!t.test(/like android/i),_=t.test(/android/i);return h&&_},describe:function(t){var h={name:"Android Browser"},_=w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/playstation 4/i],describe:function(t){var h={name:"PlayStation 4"},_=w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/safari|applewebkit/i],describe:function(t){var h={name:"Safari"},_=w.default.getFirstMatch(E,t);return _&&(h.version=_),h}},{test:[/.*/i],describe:function(t){var h=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:w.default.getFirstMatch(h,t),version:w.default.getSecondMatch(h,t)}}}],Y.exports=k.default},93:function(Y,k,D){"use strict";k.__esModule=!0,k.default=void 0;var l,w=(l=D(17))&&l.__esModule?l:{default:l},E=D(18);k.default=[{test:[/Roku\/DVP/],describe:function(t){var h=w.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:E.OS_MAP.Roku,version:h}}},{test:[/windows phone/i],describe:function(t){var h=w.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:E.OS_MAP.WindowsPhone,version:h}}},{test:[/windows /i],describe:function(t){var h=w.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),_=w.default.getWindowsVersionName(h);return{name:E.OS_MAP.Windows,version:h,versionName:_}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var h={name:E.OS_MAP.iOS},_=w.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return _&&(h.version=_),h}},{test:[/macintosh/i],describe:function(t){var h=w.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),_=w.default.getMacOSVersionName(h),N={name:E.OS_MAP.MacOS,version:h};return _&&(N.versionName=_),N}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var h=w.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:E.OS_MAP.iOS,version:h}}},{test:function(t){var h=!t.test(/like android/i),_=t.test(/android/i);return h&&_},describe:function(t){var h=w.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),_=w.default.getAndroidVersionName(h),N={name:E.OS_MAP.Android,version:h};return _&&(N.versionName=_),N}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var h=w.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),_={name:E.OS_MAP.WebOS};return h&&h.length&&(_.version=h),_}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var h=w.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||w.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||w.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:E.OS_MAP.BlackBerry,version:h}}},{test:[/bada/i],describe:function(t){var h=w.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:E.OS_MAP.Bada,version:h}}},{test:[/tizen/i],describe:function(t){var h=w.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:E.OS_MAP.Tizen,version:h}}},{test:[/linux/i],describe:function(){return{name:E.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:E.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var h=w.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:E.OS_MAP.PlayStation4,version:h}}}],Y.exports=k.default},94:function(Y,k,D){"use strict";k.__esModule=!0,k.default=void 0;var l,w=(l=D(17))&&l.__esModule?l:{default:l},E=D(18);k.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var h=w.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",_={type:E.PLATFORMS_MAP.mobile,vendor:"Huawei"};return h&&(_.model=h),_}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:E.PLATFORMS_MAP.tablet}}},{test:function(t){var h=t.test(/ipod|iphone/i),_=t.test(/like (ipod|iphone)/i);return h&&!_},describe:function(t){var h=w.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:E.PLATFORMS_MAP.mobile,vendor:"Apple",model:h}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:E.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:E.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:E.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var h=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&h>=3},describe:function(){return{type:E.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:E.PLATFORMS_MAP.tv}}}],Y.exports=k.default},95:function(Y,k,D){"use strict";k.__esModule=!0,k.default=void 0;var l,w=(l=D(17))&&l.__esModule?l:{default:l},E=D(18);k.default=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:E.ENGINE_MAP.Blink};var h=w.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:E.ENGINE_MAP.EdgeHTML,version:h}}},{test:[/trident/i],describe:function(t){var h={name:E.ENGINE_MAP.Trident},_=w.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:function(t){return t.test(/presto/i)},describe:function(t){var h={name:E.ENGINE_MAP.Presto},_=w.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:function(t){var h=t.test(/gecko/i),_=t.test(/like gecko/i);return h&&!_},describe:function(t){var h={name:E.ENGINE_MAP.Gecko},_=w.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:E.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var h={name:E.ENGINE_MAP.WebKit},_=w.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return _&&(h.version=_),h}}],Y.exports=k.default}})},7489:function(Fe,Y,k){var D;Fe=k.nmd(Fe),function(){var l,t="Expected a function",_="__lodash_hash_undefined__",A="__lodash_placeholder__",yt=1/0,ft=9007199254740991,Xe=4294967295,Ir=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Dt="[object Arguments]",xt="[object Array]",zt="[object Boolean]",Qt="[object Date]",pn="[object Error]",Oe="[object Function]",Pr="[object GeneratorFunction]",Ge="[object Map]",Ft="[object Number]",We="[object Object]",Rr="[object Promise]",Kt="[object RegExp]",Je="[object Set]",Vt="[object String]",gn="[object Symbol]",$t="[object WeakMap]",Xt="[object ArrayBuffer]",Bt="[object DataView]",qn="[object Float32Array]",Hn="[object Float64Array]",_n="[object Int8Array]",Gn="[object Int16Array]",mn="[object Int32Array]",Wn="[object Uint8Array]",Jn="[object Uint8ClampedArray]",_e="[object Uint16Array]",Yn="[object Uint32Array]",vn=/\b__p \+= '';/g,yn=/\b(__p \+=) '' \+/g,oo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Fr=/&(?:amp|lt|gt|quot|#39);/g,Br=/[&<>"']/g,zn=RegExp(Fr.source),so=RegExp(Br.source),ao=/<%-([\s\S]+?)%>/g,co=/<%([\s\S]+?)%>/g,Zr=/<%=([\s\S]+?)%>/g,Lr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,uo=/^\w*$/,oa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xn=/[\\^$.*+?()[\]{}|]/g,lo=RegExp(xn.source),Qn=/^\s+/,fo=/\s/,Kn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Nr=/\{\n\/\* \[wrapped with (.+)\] \*/,Vn=/,? & /,ho=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,po=/[()=,{}\[\]\/\s]/,go=/\\(\\)?/g,_o=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,wn=/\w*$/,mo=/^[-+]0x[0-9a-f]+$/i,$n=/^0b[01]+$/i,vo=/^\[object .+?Constructor\]$/,Ur=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,Xn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bn=/($^)/,jt=/['\n\r\u2028\u2029\\]/g,en="\\ud800-\\udfff",bt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",jn="\\u2700-\\u27bf",er="a-z\\xdf-\\xf6\\xf8-\\xff",je="A-Z\\xc0-\\xd6\\xd8-\\xde",tr="\\ufe0e\\ufe0f",Gr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Co="["+en+"]",Wr="["+Gr+"]",Cn="["+bt+"]",So="\\d+",sa="["+jn+"]",To="["+er+"]",Mo="[^"+en+Gr+So+jn+er+je+"]",Jr="\\ud83c[\\udffb-\\udfff]",ko="[^"+en+"]",rr="(?:\\ud83c[\\udde6-\\uddff]){2}",Sn="[\\ud800-\\udbff][\\udc00-\\udfff]",Zt="["+je+"]",Mn="(?:"+To+"|"+Mo+")",ir="(?:"+Zt+"|"+Mo+")",Oo="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Eo="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Io="(?:"+Cn+"|"+Jr+")?",Yr="["+tr+"]?",tn=Yr+Io+"(?:\\u200d(?:"+[ko,rr,Sn].join("|")+")"+Yr+Io+")*",Po="(?:"+[sa,rr,Sn].join("|")+")"+tn,Do="(?:"+[ko+Cn+"?",Cn,rr,Sn,Co].join("|")+")",Ro=RegExp("['\u2019]","g"),kn=RegExp(Cn,"g"),or=RegExp(Jr+"(?="+Jr+")|"+Do+tn,"g"),Fo=RegExp([Zt+"?"+To+"+"+Oo+"(?="+[Wr,Zt,"$"].join("|")+")",ir+"+"+Eo+"(?="+[Wr,Zt+Mn,"$"].join("|")+")",Zt+"?"+Mn+"+"+Oo,Zt+"+"+Eo,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",So,Po].join("|"),"g"),Bo=RegExp("[\\u200d"+en+bt+tr+"]"),Zo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Lo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],No=-1,he={};he[qn]=he[Hn]=he[_n]=he[Gn]=he[mn]=he[Wn]=he[Jn]=he[_e]=he[Yn]=!0,he[Dt]=he[xt]=he[Xt]=he[zt]=he[Bt]=he[Qt]=he[pn]=he[Oe]=he[Ge]=he[Ft]=he[We]=he[Kt]=he[Je]=he[Vt]=he[$t]=!1;var fe={};fe[Dt]=fe[xt]=fe[Xt]=fe[Bt]=fe[zt]=fe[Qt]=fe[qn]=fe[Hn]=fe[_n]=fe[Gn]=fe[mn]=fe[Ge]=fe[Ft]=fe[We]=fe[Kt]=fe[Je]=fe[Vt]=fe[gn]=fe[Wn]=fe[Jn]=fe[_e]=fe[Yn]=!0,fe[pn]=fe[Oe]=fe[$t]=!1;var Go={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wo=parseFloat,Jo=parseInt,Kr="object"==typeof global&&global&&global.Object===Object&&global,Yo="object"==typeof self&&self&&self.Object===Object&&self,Ce=Kr||Yo||Function("return this")(),Vr=Y&&!Y.nodeType&&Y,nn=Vr&&Fe&&!Fe.nodeType&&Fe,$r=nn&&nn.exports===Vr,sr=$r&&Kr.process,Be=function(){try{return nn&&nn.require&&nn.require("util").types||sr&&sr.binding&&sr.binding("util")}catch{}}(),Xr=Be&&Be.isArrayBuffer,jr=Be&&Be.isDate,ei=Be&&Be.isMap,ti=Be&&Be.isRegExp,ni=Be&&Be.isSet,ri=Be&&Be.isTypedArray;function Ee(p,T,C){switch(C.length){case 0:return p.call(T);case 1:return p.call(T,C[0]);case 2:return p.call(T,C[0],C[1]);case 3:return p.call(T,C[0],C[1],C[2])}return p.apply(T,C)}function zo(p,T,C,F){for(var L=-1,J=null==p?0:p.length;++L<J;){var ie=p[L];T(F,ie,C(ie),p)}return F}function Ze(p,T){for(var C=-1,F=null==p?0:p.length;++C<F&&!1!==T(p[C],C,p););return p}function Qo(p,T){for(var C=null==p?0:p.length;C--&&!1!==T(p[C],C,p););return p}function ii(p,T){for(var C=-1,F=null==p?0:p.length;++C<F;)if(!T(p[C],C,p))return!1;return!0}function ht(p,T){for(var C=-1,F=null==p?0:p.length,L=0,J=[];++C<F;){var ie=p[C];T(ie,C,p)&&(J[L++]=ie)}return J}function On(p,T){return!(null==p||!p.length)&&Lt(p,T,0)>-1}function ar(p,T,C){for(var F=-1,L=null==p?0:p.length;++F<L;)if(C(T,p[F]))return!0;return!1}function pe(p,T){for(var C=-1,F=null==p?0:p.length,L=Array(F);++C<F;)L[C]=T(p[C],C,p);return L}function ct(p,T){for(var C=-1,F=T.length,L=p.length;++C<F;)p[L+C]=T[C];return p}function cr(p,T,C,F){var L=-1,J=null==p?0:p.length;for(F&&J&&(C=p[++L]);++L<J;)C=T(C,p[L],L,p);return C}function Ko(p,T,C,F){var L=null==p?0:p.length;for(F&&L&&(C=p[--L]);L--;)C=T(C,p[L],L,p);return C}function ur(p,T){for(var C=-1,F=null==p?0:p.length;++C<F;)if(T(p[C],C,p))return!0;return!1}var Vo=lr("length");function oi(p,T,C){var F;return C(p,function(L,J,ie){if(T(L,J,ie))return F=J,!1}),F}function En(p,T,C,F){for(var L=p.length,J=C+(F?1:-1);F?J--:++J<L;)if(T(p[J],J,p))return J;return-1}function Lt(p,T,C){return T==T?function ls(p,T,C){for(var F=C-1,L=p.length;++F<L;)if(p[F]===T)return F;return-1}(p,T,C):En(p,si,C)}function jo(p,T,C,F){for(var L=C-1,J=p.length;++L<J;)if(F(p[L],T))return L;return-1}function si(p){return p!=p}function ai(p,T){var C=null==p?0:p.length;return C?fr(p,T)/C:NaN}function lr(p){return function(T){return null==T?l:T[p]}}function dr(p){return function(T){return null==p?l:p[T]}}function ci(p,T,C,F,L){return L(p,function(J,ie,j){C=F?(F=!1,J):T(C,J,ie,j)}),C}function fr(p,T){for(var C,F=-1,L=p.length;++F<L;){var J=T(p[F]);J!==l&&(C=C===l?J:C+J)}return C}function hr(p,T){for(var C=-1,F=Array(p);++C<p;)F[C]=T(C);return F}function ui(p){return p&&p.slice(0,hi(p)+1).replace(Qn,"")}function Ie(p){return function(T){return p(T)}}function pr(p,T){return pe(T,function(C){return p[C]})}function rn(p,T){return p.has(T)}function li(p,T){for(var C=-1,F=p.length;++C<F&&Lt(T,p[C],0)>-1;);return C}function di(p,T){for(var C=p.length;C--&&Lt(T,p[C],0)>-1;);return C}function ns(p,T){for(var C=p.length,F=0;C--;)p[C]===T&&++F;return F}var rs=dr({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),is=dr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function os(p){return"\\"+Go[p]}function Nt(p){return Bo.test(p)}function gr(p){var T=-1,C=Array(p.size);return p.forEach(function(F,L){C[++T]=[L,F]}),C}function fi(p,T){return function(C){return p(T(C))}}function pt(p,T){for(var C=-1,F=p.length,L=0,J=[];++C<F;){var ie=p[C];(ie===T||ie===A)&&(p[C]=A,J[L++]=C)}return J}function In(p){var T=-1,C=Array(p.size);return p.forEach(function(F){C[++T]=F}),C}function Ut(p){return Nt(p)?function g(p){for(var T=or.lastIndex=0;or.test(p);)++T;return T}(p):Vo(p)}function Ye(p){return Nt(p)?function r(p){return p.match(or)||[]}(p):function $o(p){return p.split("")}(p)}function hi(p){for(var T=p.length;T--&&fo.test(p.charAt(T)););return T}var a=dr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),v=function p(T){var e,C=(T=null==T?Ce:v.defaults(Ce.Object(),T,v.pick(Ce,Lo))).Array,F=T.Date,L=T.Error,J=T.Function,ie=T.Math,j=T.Object,et=T.RegExp,gt=T.String,Le=T.TypeError,ze=C.prototype,Pn=j.prototype,pi=T["__core-js_shared__"],gi=J.prototype.toString,ue=Pn.hasOwnProperty,$c=0,aa=(e=/[^.]+$/.exec(pi&&pi.keys&&pi.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",_i=Pn.toString,Xc=gi.call(j),jc=Ce._,eu=et("^"+gi.call(ue).replace(xn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mi=$r?T.Buffer:l,qt=T.Symbol,vi=T.Uint8Array,ca=mi?mi.allocUnsafe:l,yi=fi(j.getPrototypeOf,j),ua=j.create,la=Pn.propertyIsEnumerable,xi=ze.splice,da=qt?qt.isConcatSpreadable:l,_r=qt?qt.iterator:l,on=qt?qt.toStringTag:l,wi=function(){try{var e=ln(j,"defineProperty");return e({},"",{}),e}catch{}}(),tu=T.clearTimeout!==Ce.clearTimeout&&T.clearTimeout,nu=F&&F.now!==Ce.Date.now&&F.now,ru=T.setTimeout!==Ce.setTimeout&&T.setTimeout,bi=ie.ceil,Ci=ie.floor,fs=j.getOwnPropertySymbols,iu=mi?mi.isBuffer:l,fa=T.isFinite,ou=ze.join,su=fi(j.keys,j),Se=ie.max,Ae=ie.min,au=F.now,cu=T.parseInt,ha=ie.random,uu=ze.reverse,hs=ln(T,"DataView"),mr=ln(T,"Map"),ps=ln(T,"Promise"),Dn=ln(T,"Set"),vr=ln(T,"WeakMap"),yr=ln(j,"create"),Si=vr&&new vr,Rn={},lu=dn(hs),du=dn(mr),fu=dn(ps),hu=dn(Dn),pu=dn(vr),Ti=qt?qt.prototype:l,xr=Ti?Ti.valueOf:l,pa=Ti?Ti.toString:l;function d(e){if(me(e)&&!$(e)&&!(e instanceof oe)){if(e instanceof tt)return e;if(ue.call(e,"__wrapped__"))return gc(e)}return new tt(e)}var Fn=function(){function e(){}return function(n){if(!ge(n))return{};if(ua)return ua(n);e.prototype=n;var i=new e;return e.prototype=l,i}}();function Mi(){}function tt(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=l}function oe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Xe,this.__views__=[]}function sn(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var o=e[n];this.set(o[0],o[1])}}function Ct(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var o=e[n];this.set(o[0],o[1])}}function St(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var o=e[n];this.set(o[0],o[1])}}function an(e){var n=-1,i=null==e?0:e.length;for(this.__data__=new St;++n<i;)this.add(e[n])}function ut(e){var n=this.__data__=new Ct(e);this.size=n.size}function ga(e,n){var i=$(e),o=!i&&fn(e),c=!i&&!o&&Yt(e),f=!i&&!o&&!c&&Nn(e),m=i||o||c||f,y=m?hr(e.length,gt):[],S=y.length;for(var I in e)(n||ue.call(e,I))&&(!m||!("length"==I||c&&("offset"==I||"parent"==I)||f&&("buffer"==I||"byteLength"==I||"byteOffset"==I)||kt(I,S)))&&y.push(I);return y}function _a(e){var n=e.length;return n?e[Ts(0,n-1)]:l}function Uu(e,n){return Ui(Ne(e),cn(n,0,e.length))}function qu(e){return Ui(Ne(e))}function gs(e,n,i){(i!==l&&!lt(e[n],i)||i===l&&!(n in e))&&Tt(e,n,i)}function wr(e,n,i){var o=e[n];(!ue.call(e,n)||!lt(o,i)||i===l&&!(n in e))&&Tt(e,n,i)}function Ai(e,n){for(var i=e.length;i--;)if(lt(e[i][0],n))return i;return-1}function Hu(e,n,i,o){return Ht(e,function(c,f,m){n(o,c,i(c),m)}),o}function ma(e,n){return e&&mt(n,Te(n),e)}function Tt(e,n,i){"__proto__"==n&&wi?wi(e,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[n]=i}function _s(e,n){for(var i=-1,o=n.length,c=C(o),f=null==e;++i<o;)c[i]=f?l:Vs(e,n[i]);return c}function cn(e,n,i){return e==e&&(i!==l&&(e=e<=i?e:i),n!==l&&(e=e>=n?e:n)),e}function nt(e,n,i,o,c,f){var m,y=1&n,S=2&n,I=4&n;if(i&&(m=c?i(e,o,c,f):i(e)),m!==l)return m;if(!ge(e))return e;var P=$(e);if(P){if(m=function Il(e){var n=e.length,i=new e.constructor(n);return n&&"string"==typeof e[0]&&ue.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(e),!y)return Ne(e,m)}else{var R=ke(e),q=R==Oe||R==Pr;if(Yt(e))return qa(e,y);if(R==We||R==Dt||q&&!c){if(m=S||q?{}:sc(e),!y)return S?function xl(e,n){return mt(e,ic(e),n)}(e,function Gu(e,n){return e&&mt(n,qe(n),e)}(m,e)):function yl(e,n){return mt(e,Ns(e),n)}(e,ma(m,e))}else{if(!fe[R])return c?e:{};m=function Pl(e,n,i){var o=e.constructor;switch(n){case Xt:return Ps(e);case zt:case Qt:return new o(+e);case Bt:return function gl(e,n){var i=n?Ps(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,i);case qn:case Hn:case _n:case Gn:case mn:case Wn:case Jn:case _e:case Yn:return Ha(e,i);case Ge:return new o;case Ft:case Vt:return new o(e);case Kt:return function _l(e){var n=new e.constructor(e.source,wn.exec(e));return n.lastIndex=e.lastIndex,n}(e);case Je:return new o;case gn:return function ml(e){return xr?j(xr.call(e)):{}}(e)}}(e,R,y)}}f||(f=new ut);var G=f.get(e);if(G)return G;f.set(e,m),Fc(e)?e.forEach(function(V){m.add(nt(V,n,i,V,e,f))}):Dc(e)&&e.forEach(function(V,re){m.set(re,nt(V,n,i,re,e,f))});var te=P?l:(I?S?Bs:Fs:S?qe:Te)(e);return Ze(te||e,function(V,re){te&&(V=e[re=V]),wr(m,re,nt(V,n,i,re,e,f))}),m}function va(e,n,i){var o=i.length;if(null==e)return!o;for(e=j(e);o--;){var c=i[o],m=e[c];if(m===l&&!(c in e)||!(0,n[c])(m))return!1}return!0}function ya(e,n,i){if("function"!=typeof e)throw new Le(t);return kr(function(){e.apply(l,i)},n)}function br(e,n,i,o){var c=-1,f=On,m=!0,y=e.length,S=[],I=n.length;if(!y)return S;i&&(n=pe(n,Ie(i))),o?(f=ar,m=!1):n.length>=200&&(f=rn,m=!1,n=new an(n));e:for(;++c<y;){var P=e[c],R=null==i?P:i(P);if(P=o||0!==P?P:0,m&&R==R){for(var q=I;q--;)if(n[q]===R)continue e;S.push(P)}else f(n,R,o)||S.push(P)}return S}d.templateSettings={escape:ao,evaluate:co,interpolate:Zr,variable:"",imports:{_:d}},(d.prototype=Mi.prototype).constructor=d,(tt.prototype=Fn(Mi.prototype)).constructor=tt,(oe.prototype=Fn(Mi.prototype)).constructor=oe,sn.prototype.clear=function vu(){this.__data__=yr?yr(null):{},this.size=0},sn.prototype.delete=function yu(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},sn.prototype.get=function xu(e){var n=this.__data__;if(yr){var i=n[e];return i===_?l:i}return ue.call(n,e)?n[e]:l},sn.prototype.has=function wu(e){var n=this.__data__;return yr?n[e]!==l:ue.call(n,e)},sn.prototype.set=function bu(e,n){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=yr&&n===l?_:n,this},Ct.prototype.clear=function Cu(){this.__data__=[],this.size=0},Ct.prototype.delete=function Su(e){var n=this.__data__,i=Ai(n,e);return!(i<0||(i==n.length-1?n.pop():xi.call(n,i,1),--this.size,0))},Ct.prototype.get=function Tu(e){var n=this.__data__,i=Ai(n,e);return i<0?l:n[i][1]},Ct.prototype.has=function Mu(e){return Ai(this.__data__,e)>-1},Ct.prototype.set=function Au(e,n){var i=this.__data__,o=Ai(i,e);return o<0?(++this.size,i.push([e,n])):i[o][1]=n,this},St.prototype.clear=function ku(){this.size=0,this.__data__={hash:new sn,map:new(mr||Ct),string:new sn}},St.prototype.delete=function Ou(e){var n=Ni(this,e).delete(e);return this.size-=n?1:0,n},St.prototype.get=function Eu(e){return Ni(this,e).get(e)},St.prototype.has=function Iu(e){return Ni(this,e).has(e)},St.prototype.set=function Pu(e,n){var i=Ni(this,e),o=i.size;return i.set(e,n),this.size+=i.size==o?0:1,this},an.prototype.add=an.prototype.push=function Du(e){return this.__data__.set(e,_),this},an.prototype.has=function Ru(e){return this.__data__.has(e)},ut.prototype.clear=function Fu(){this.__data__=new Ct,this.size=0},ut.prototype.delete=function Bu(e){var n=this.__data__,i=n.delete(e);return this.size=n.size,i},ut.prototype.get=function Zu(e){return this.__data__.get(e)},ut.prototype.has=function Lu(e){return this.__data__.has(e)},ut.prototype.set=function Nu(e,n){var i=this.__data__;if(i instanceof Ct){var o=i.__data__;if(!mr||o.length<199)return o.push([e,n]),this.size=++i.size,this;i=this.__data__=new St(o)}return i.set(e,n),this.size=i.size,this};var Ht=Ya(_t),xa=Ya(vs,!0);function Ju(e,n){var i=!0;return Ht(e,function(o,c,f){return i=!!n(o,c,f)}),i}function ki(e,n,i){for(var o=-1,c=e.length;++o<c;){var f=e[o],m=n(f);if(null!=m&&(y===l?m==m&&!Ke(m):i(m,y)))var y=m,S=f}return S}function wa(e,n){var i=[];return Ht(e,function(o,c,f){n(o,c,f)&&i.push(o)}),i}function Me(e,n,i,o,c){var f=-1,m=e.length;for(i||(i=Rl),c||(c=[]);++f<m;){var y=e[f];n>0&&i(y)?n>1?Me(y,n-1,i,o,c):ct(c,y):o||(c[c.length]=y)}return c}var ms=za(),ba=za(!0);function _t(e,n){return e&&ms(e,n,Te)}function vs(e,n){return e&&ba(e,n,Te)}function Oi(e,n){return ht(n,function(i){return Ot(e[i])})}function un(e,n){for(var i=0,o=(n=Wt(n,e)).length;null!=e&&i<o;)e=e[vt(n[i++])];return i&&i==o?e:l}function Ca(e,n,i){var o=n(e);return $(e)?o:ct(o,i(e))}function Pe(e){return null==e?e===l?"[object Undefined]":"[object Null]":on&&on in j(e)?function kl(e){var n=ue.call(e,on),i=e[on];try{e[on]=l;var o=!0}catch{}var c=_i.call(e);return o&&(n?e[on]=i:delete e[on]),c}(e):function ql(e){return _i.call(e)}(e)}function ys(e,n){return e>n}function zu(e,n){return null!=e&&ue.call(e,n)}function Qu(e,n){return null!=e&&n in j(e)}function xs(e,n,i){for(var o=i?ar:On,c=e[0].length,f=e.length,m=f,y=C(f),S=1/0,I=[];m--;){var P=e[m];m&&n&&(P=pe(P,Ie(n))),S=Ae(P.length,S),y[m]=!i&&(n||c>=120&&P.length>=120)?new an(m&&P):l}P=e[0];var R=-1,q=y[0];e:for(;++R<c&&I.length<S;){var G=P[R],K=n?n(G):G;if(G=i||0!==G?G:0,!(q?rn(q,K):o(I,K,i))){for(m=f;--m;){var te=y[m];if(!(te?rn(te,K):o(e[m],K,i)))continue e}q&&q.push(K),I.push(G)}}return I}function Cr(e,n,i){var o=null==(e=lc(e,n=Wt(n,e)))?e:e[vt(it(n))];return null==o?l:Ee(o,e,i)}function Sa(e){return me(e)&&Pe(e)==Dt}function Sr(e,n,i,o,c){return e===n||(null==e||null==n||!me(e)&&!me(n)?e!=e&&n!=n:function ju(e,n,i,o,c,f){var m=$(e),y=$(n),S=m?xt:ke(e),I=y?xt:ke(n),P=(S=S==Dt?We:S)==We,R=(I=I==Dt?We:I)==We,q=S==I;if(q&&Yt(e)){if(!Yt(n))return!1;m=!0,P=!1}if(q&&!P)return f||(f=new ut),m||Nn(e)?rc(e,n,i,o,c,f):function Ml(e,n,i,o,c,f,m){switch(i){case Bt:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case Xt:return!(e.byteLength!=n.byteLength||!f(new vi(e),new vi(n)));case zt:case Qt:case Ft:return lt(+e,+n);case pn:return e.name==n.name&&e.message==n.message;case Kt:case Vt:return e==n+"";case Ge:var y=gr;case Je:if(y||(y=In),e.size!=n.size&&!(1&o))return!1;var I=m.get(e);if(I)return I==n;o|=2,m.set(e,n);var P=rc(y(e),y(n),o,c,f,m);return m.delete(e),P;case gn:if(xr)return xr.call(e)==xr.call(n)}return!1}(e,n,S,i,o,c,f);if(!(1&i)){var G=P&&ue.call(e,"__wrapped__"),K=R&&ue.call(n,"__wrapped__");if(G||K){var te=G?e.value():e,V=K?n.value():n;return f||(f=new ut),c(te,V,i,o,f)}}return!!q&&(f||(f=new ut),function Al(e,n,i,o,c,f){var m=1&i,y=Fs(e),S=y.length;if(S!=Fs(n).length&&!m)return!1;for(var R=S;R--;){var q=y[R];if(!(m?q in n:ue.call(n,q)))return!1}var G=f.get(e),K=f.get(n);if(G&&K)return G==n&&K==e;var te=!0;f.set(e,n),f.set(n,e);for(var V=m;++R<S;){var re=e[q=y[R]],se=n[q];if(o)var Ve=m?o(se,re,q,n,e,f):o(re,se,q,e,n,f);if(!(Ve===l?re===se||c(re,se,i,o,f):Ve)){te=!1;break}V||(V="constructor"==q)}if(te&&!V){var Re=e.constructor,$e=n.constructor;Re!=$e&&"constructor"in e&&"constructor"in n&&!("function"==typeof Re&&Re instanceof Re&&"function"==typeof $e&&$e instanceof $e)&&(te=!1)}return f.delete(e),f.delete(n),te}(e,n,i,o,c,f))}(e,n,i,o,Sr,c))}function ws(e,n,i,o){var c=i.length,f=c,m=!o;if(null==e)return!f;for(e=j(e);c--;){var y=i[c];if(m&&y[2]?y[1]!==e[y[0]]:!(y[0]in e))return!1}for(;++c<f;){var S=(y=i[c])[0],I=e[S],P=y[1];if(m&&y[2]){if(I===l&&!(S in e))return!1}else{var R=new ut;if(o)var q=o(I,P,S,e,n,R);if(!(q===l?Sr(P,I,3,o,R):q))return!1}}return!0}function Ta(e){return!(!ge(e)||function Bl(e){return!!aa&&aa in e}(e))&&(Ot(e)?eu:vo).test(dn(e))}function Ma(e){return"function"==typeof e?e:null==e?He:"object"==typeof e?$(e)?Oa(e[0],e[1]):ka(e):Qc(e)}function bs(e){if(!Ar(e))return su(e);var n=[];for(var i in j(e))ue.call(e,i)&&"constructor"!=i&&n.push(i);return n}function Cs(e,n){return e<n}function Aa(e,n){var i=-1,o=Ue(e)?C(e.length):[];return Ht(e,function(c,f,m){o[++i]=n(c,f,m)}),o}function ka(e){var n=Ls(e);return 1==n.length&&n[0][2]?cc(n[0][0],n[0][1]):function(i){return i===e||ws(i,e,n)}}function Oa(e,n){return Us(e)&&ac(n)?cc(vt(e),n):function(i){var o=Vs(i,e);return o===l&&o===n?$s(i,e):Sr(n,o,3)}}function Ei(e,n,i,o,c){e!==n&&ms(n,function(f,m){if(c||(c=new ut),ge(f))!function ol(e,n,i,o,c,f,m){var y=Hs(e,i),S=Hs(n,i),I=m.get(S);if(I)gs(e,i,I);else{var P=f?f(y,S,i+"",e,n,m):l,R=P===l;if(R){var q=$(S),G=!q&&Yt(S),K=!q&&!G&&Nn(S);P=S,q||G||K?$(y)?P=y:ye(y)?P=Ne(y):G?(R=!1,P=qa(S,!0)):K?(R=!1,P=Ha(S,!0)):P=[]:Or(S)||fn(S)?(P=y,fn(y)?P=Lc(y):(!ge(y)||Ot(y))&&(P=sc(S))):R=!1}R&&(m.set(S,P),c(P,S,o,f,m),m.delete(S)),gs(e,i,P)}}(e,n,m,i,Ei,o,c);else{var y=o?o(Hs(e,m),f,m+"",e,n,c):l;y===l&&(y=f),gs(e,m,y)}},qe)}function Ea(e,n){var i=e.length;if(i)return kt(n+=n<0?i:0,i)?e[n]:l}function Ia(e,n,i){n=n.length?pe(n,function(f){return $(f)?function(m){return un(m,1===f.length?f[0]:f)}:f}):[He];var o=-1;return n=pe(n,Ie(Q())),function es(p,T){var C=p.length;for(p.sort(T);C--;)p[C]=p[C].value;return p}(Aa(e,function(f,m,y){return{criteria:pe(n,function(I){return I(f)}),index:++o,value:f}}),function(f,m){return function vl(e,n,i){for(var o=-1,c=e.criteria,f=n.criteria,m=c.length,y=i.length;++o<m;){var S=Ga(c[o],f[o]);if(S)return o>=y?S:S*("desc"==i[o]?-1:1)}return e.index-n.index}(f,m,i)})}function Pa(e,n,i){for(var o=-1,c=n.length,f={};++o<c;){var m=n[o],y=un(e,m);i(y,m)&&Tr(f,Wt(m,e),y)}return f}function Ss(e,n,i,o){var c=o?jo:Lt,f=-1,m=n.length,y=e;for(e===n&&(n=Ne(n)),i&&(y=pe(e,Ie(i)));++f<m;)for(var S=0,I=n[f],P=i?i(I):I;(S=c(y,P,S,o))>-1;)y!==e&&xi.call(y,S,1),xi.call(e,S,1);return e}function Da(e,n){for(var i=e?n.length:0,o=i-1;i--;){var c=n[i];if(i==o||c!==f){var f=c;kt(c)?xi.call(e,c,1):ks(e,c)}}return e}function Ts(e,n){return e+Ci(ha()*(n-e+1))}function Ms(e,n){var i="";if(!e||n<1||n>ft)return i;do{n%2&&(i+=e),(n=Ci(n/2))&&(e+=e)}while(n);return i}function ne(e,n){return Gs(uc(e,n,He),e+"")}function ul(e){return _a(Un(e))}function ll(e,n){var i=Un(e);return Ui(i,cn(n,0,i.length))}function Tr(e,n,i,o){if(!ge(e))return e;for(var c=-1,f=(n=Wt(n,e)).length,m=f-1,y=e;null!=y&&++c<f;){var S=vt(n[c]),I=i;if("__proto__"===S||"constructor"===S||"prototype"===S)return e;if(c!=m){var P=y[S];(I=o?o(P,S,y):l)===l&&(I=ge(P)?P:kt(n[c+1])?[]:{})}wr(y,S,I),y=y[S]}return e}var Ra=Si?function(e,n){return Si.set(e,n),e}:He,dl=wi?function(e,n){return wi(e,"toString",{configurable:!0,enumerable:!1,value:js(n),writable:!0})}:He;function fl(e){return Ui(Un(e))}function rt(e,n,i){var o=-1,c=e.length;n<0&&(n=-n>c?0:c+n),(i=i>c?c:i)<0&&(i+=c),c=n>i?0:i-n>>>0,n>>>=0;for(var f=C(c);++o<c;)f[o]=e[o+n];return f}function hl(e,n){var i;return Ht(e,function(o,c,f){return!(i=n(o,c,f))}),!!i}function Ii(e,n,i){var o=0,c=null==e?o:e.length;if("number"==typeof n&&n==n&&c<=2147483647){for(;o<c;){var f=o+c>>>1,m=e[f];null!==m&&!Ke(m)&&(i?m<=n:m<n)?o=f+1:c=f}return c}return As(e,n,He,i)}function As(e,n,i,o){var c=0,f=null==e?0:e.length;if(0===f)return 0;for(var m=(n=i(n))!=n,y=null===n,S=Ke(n),I=n===l;c<f;){var P=Ci((c+f)/2),R=i(e[P]),q=R!==l,G=null===R,K=R==R,te=Ke(R);if(m)var V=o||K;else V=I?K&&(o||q):y?K&&q&&(o||!G):S?K&&q&&!G&&(o||!te):!G&&!te&&(o?R<=n:R<n);V?c=P+1:f=P}return Ae(f,4294967294)}function Fa(e,n){for(var i=-1,o=e.length,c=0,f=[];++i<o;){var m=e[i],y=n?n(m):m;if(!i||!lt(y,S)){var S=y;f[c++]=0===m?0:m}}return f}function Ba(e){return"number"==typeof e?e:Ke(e)?NaN:+e}function Qe(e){if("string"==typeof e)return e;if($(e))return pe(e,Qe)+"";if(Ke(e))return pa?pa.call(e):"";var n=e+"";return"0"==n&&1/e==-yt?"-0":n}function Gt(e,n,i){var o=-1,c=On,f=e.length,m=!0,y=[],S=y;if(i)m=!1,c=ar;else if(f>=200){var I=n?null:Sl(e);if(I)return In(I);m=!1,c=rn,S=new an}else S=n?[]:y;e:for(;++o<f;){var P=e[o],R=n?n(P):P;if(P=i||0!==P?P:0,m&&R==R){for(var q=S.length;q--;)if(S[q]===R)continue e;n&&S.push(R),y.push(P)}else c(S,R,i)||(S!==y&&S.push(R),y.push(P))}return y}function ks(e,n){return null==(e=lc(e,n=Wt(n,e)))||delete e[vt(it(n))]}function Za(e,n,i,o){return Tr(e,n,i(un(e,n)),o)}function Pi(e,n,i,o){for(var c=e.length,f=o?c:-1;(o?f--:++f<c)&&n(e[f],f,e););return i?rt(e,o?0:f,o?f+1:c):rt(e,o?f+1:0,o?c:f)}function La(e,n){var i=e;return i instanceof oe&&(i=i.value()),cr(n,function(o,c){return c.func.apply(c.thisArg,ct([o],c.args))},i)}function Os(e,n,i){var o=e.length;if(o<2)return o?Gt(e[0]):[];for(var c=-1,f=C(o);++c<o;)for(var m=e[c],y=-1;++y<o;)y!=c&&(f[c]=br(f[c]||m,e[y],n,i));return Gt(Me(f,1),n,i)}function Na(e,n,i){for(var o=-1,c=e.length,f=n.length,m={};++o<c;)i(m,e[o],o<f?n[o]:l);return m}function Es(e){return ye(e)?e:[]}function Is(e){return"function"==typeof e?e:He}function Wt(e,n){return $(e)?e:Us(e,n)?[e]:pc(ce(e))}var pl=ne;function Jt(e,n,i){var o=e.length;return i=i===l?o:i,!n&&i>=o?e:rt(e,n,i)}var Ua=tu||function(e){return Ce.clearTimeout(e)};function qa(e,n){if(n)return e.slice();var i=e.length,o=ca?ca(i):new e.constructor(i);return e.copy(o),o}function Ps(e){var n=new e.constructor(e.byteLength);return new vi(n).set(new vi(e)),n}function Ha(e,n){var i=n?Ps(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Ga(e,n){if(e!==n){var i=e!==l,o=null===e,c=e==e,f=Ke(e),m=n!==l,y=null===n,S=n==n,I=Ke(n);if(!y&&!I&&!f&&e>n||f&&m&&S&&!y&&!I||o&&m&&S||!i&&S||!c)return 1;if(!o&&!f&&!I&&e<n||I&&i&&c&&!o&&!f||y&&i&&c||!m&&c||!S)return-1}return 0}function Wa(e,n,i,o){for(var c=-1,f=e.length,m=i.length,y=-1,S=n.length,I=Se(f-m,0),P=C(S+I),R=!o;++y<S;)P[y]=n[y];for(;++c<m;)(R||c<f)&&(P[i[c]]=e[c]);for(;I--;)P[y++]=e[c++];return P}function Ja(e,n,i,o){for(var c=-1,f=e.length,m=-1,y=i.length,S=-1,I=n.length,P=Se(f-y,0),R=C(P+I),q=!o;++c<P;)R[c]=e[c];for(var G=c;++S<I;)R[G+S]=n[S];for(;++m<y;)(q||c<f)&&(R[G+i[m]]=e[c++]);return R}function Ne(e,n){var i=-1,o=e.length;for(n||(n=C(o));++i<o;)n[i]=e[i];return n}function mt(e,n,i,o){var c=!i;i||(i={});for(var f=-1,m=n.length;++f<m;){var y=n[f],S=o?o(i[y],e[y],y,i,e):l;S===l&&(S=e[y]),c?Tt(i,y,S):wr(i,y,S)}return i}function Di(e,n){return function(i,o){var c=$(i)?zo:Hu,f=n?n():{};return c(i,e,Q(o,2),f)}}function Bn(e){return ne(function(n,i){var o=-1,c=i.length,f=c>1?i[c-1]:l,m=c>2?i[2]:l;for(f=e.length>3&&"function"==typeof f?(c--,f):l,m&&De(i[0],i[1],m)&&(f=c<3?l:f,c=1),n=j(n);++o<c;){var y=i[o];y&&e(n,y,o,f)}return n})}function Ya(e,n){return function(i,o){if(null==i)return i;if(!Ue(i))return e(i,o);for(var c=i.length,f=n?c:-1,m=j(i);(n?f--:++f<c)&&!1!==o(m[f],f,m););return i}}function za(e){return function(n,i,o){for(var c=-1,f=j(n),m=o(n),y=m.length;y--;){var S=m[e?y:++c];if(!1===i(f[S],S,f))break}return n}}function Qa(e){return function(n){var i=Nt(n=ce(n))?Ye(n):l,o=i?i[0]:n.charAt(0),c=i?Jt(i,1).join(""):n.slice(1);return o[e]()+c}}function Zn(e){return function(n){return cr(Yc(Jc(n).replace(Ro,"")),e,"")}}function Mr(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var i=Fn(e.prototype),o=e.apply(i,n);return ge(o)?o:i}}function Ka(e){return function(n,i,o){var c=j(n);if(!Ue(n)){var f=Q(i,3);n=Te(n),i=function(y){return f(c[y],y,c)}}var m=e(n,i,o);return m>-1?c[f?n[m]:m]:l}}function Va(e){return At(function(n){var i=n.length,o=i,c=tt.prototype.thru;for(e&&n.reverse();o--;){var f=n[o];if("function"!=typeof f)throw new Le(t);if(c&&!m&&"wrapper"==Li(f))var m=new tt([],!0)}for(o=m?o:i;++o<i;){var y=Li(f=n[o]),S="wrapper"==y?Zs(f):l;m=S&&qs(S[0])&&424==S[1]&&!S[4].length&&1==S[9]?m[Li(S[0])].apply(m,S[3]):1==f.length&&qs(f)?m[y]():m.thru(f)}return function(){var I=arguments,P=I[0];if(m&&1==I.length&&$(P))return m.plant(P).value();for(var R=0,q=i?n[R].apply(this,I):P;++R<i;)q=n[R].call(this,q);return q}})}function Ri(e,n,i,o,c,f,m,y,S,I){var P=128&n,R=1&n,q=2&n,G=24&n,K=512&n,te=q?l:Mr(e);return function V(){for(var re=arguments.length,se=C(re),Ve=re;Ve--;)se[Ve]=arguments[Ve];if(G)var Re=Ln(V),$e=ns(se,Re);if(o&&(se=Wa(se,o,c,G)),f&&(se=Ja(se,f,m,G)),re-=$e,G&&re<I){var xe=pt(se,Re);return ja(e,n,Ri,V.placeholder,i,se,xe,y,S,I-re)}var dt=R?i:this,It=q?dt[e]:e;return re=se.length,y?se=Hl(se,y):K&&re>1&&se.reverse(),P&&S<re&&(se.length=S),this&&this!==Ce&&this instanceof V&&(It=te||Mr(It)),It.apply(dt,se)}}function $a(e,n){return function(i,o){return function Vu(e,n,i,o){return _t(e,function(c,f,m){n(o,i(c),f,m)}),o}(i,e,n(o),{})}}function Fi(e,n){return function(i,o){var c;if(i===l&&o===l)return n;if(i!==l&&(c=i),o!==l){if(c===l)return o;"string"==typeof i||"string"==typeof o?(i=Qe(i),o=Qe(o)):(i=Ba(i),o=Ba(o)),c=e(i,o)}return c}}function Ds(e){return At(function(n){return n=pe(n,Ie(Q())),ne(function(i){var o=this;return e(n,function(c){return Ee(c,o,i)})})})}function Bi(e,n){var i=(n=n===l?" ":Qe(n)).length;if(i<2)return i?Ms(n,e):n;var o=Ms(n,bi(e/Ut(n)));return Nt(n)?Jt(Ye(o),0,e).join(""):o.slice(0,e)}function Xa(e){return function(n,i,o){return o&&"number"!=typeof o&&De(n,i,o)&&(i=o=l),n=Et(n),i===l?(i=n,n=0):i=Et(i),function cl(e,n,i,o){for(var c=-1,f=Se(bi((n-e)/(i||1)),0),m=C(f);f--;)m[o?f:++c]=e,e+=i;return m}(n,i,o=o===l?n<i?1:-1:Et(o),e)}}function Zi(e){return function(n,i){return"string"==typeof n&&"string"==typeof i||(n=ot(n),i=ot(i)),e(n,i)}}function ja(e,n,i,o,c,f,m,y,S,I){var P=8&n;n|=P?32:64,4&(n&=~(P?64:32))||(n&=-4);var te=[e,n,c,P?f:l,P?m:l,P?l:f,P?l:m,y,S,I],V=i.apply(l,te);return qs(e)&&dc(V,te),V.placeholder=o,fc(V,e,n)}function Rs(e){var n=ie[e];return function(i,o){if(i=ot(i),(o=null==o?0:Ae(ee(o),292))&&fa(i)){var c=(ce(i)+"e").split("e");return+((c=(ce(n(c[0]+"e"+(+c[1]+o)))+"e").split("e"))[0]+"e"+(+c[1]-o))}return n(i)}}var Sl=Dn&&1/In(new Dn([,-0]))[1]==yt?function(e){return new Dn(e)}:na;function ec(e){return function(n){var i=ke(n);return i==Ge?gr(n):i==Je?function us(p){var T=-1,C=Array(p.size);return p.forEach(function(F){C[++T]=[F,F]}),C}(n):function ts(p,T){return pe(T,function(C){return[C,p[C]]})}(n,e(n))}}function Mt(e,n,i,o,c,f,m,y){var S=2&n;if(!S&&"function"!=typeof e)throw new Le(t);var I=o?o.length:0;if(I||(n&=-97,o=c=l),m=m===l?m:Se(ee(m),0),y=y===l?y:ee(y),I-=c?c.length:0,64&n){var P=o,R=c;o=c=l}var q=S?l:Zs(e),G=[e,n,i,o,c,P,R,f,m,y];if(q&&function Nl(e,n){var i=e[1],o=n[1],c=i|o;if(!(c<131||(128==o&&8==i||128==o&&256==i&&e[7].length<=n[8]||384==o&&n[7].length<=n[8]&&8==i)))return e;1&o&&(e[2]=n[2],c|=1&i?0:4);var y=n[3];if(y){var S=e[3];e[3]=S?Wa(S,y,n[4]):y,e[4]=S?pt(e[3],A):n[4]}(y=n[5])&&(e[5]=(S=e[5])?Ja(S,y,n[6]):y,e[6]=S?pt(e[5],A):n[6]),(y=n[7])&&(e[7]=y),128&o&&(e[8]=null==e[8]?n[8]:Ae(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=c}(G,q),e=G[0],n=G[1],i=G[2],o=G[3],c=G[4],!(y=G[9]=G[9]===l?S?0:e.length:Se(G[9]-I,0))&&24&n&&(n&=-25),n&&1!=n)K=8==n||16==n?function bl(e,n,i){var o=Mr(e);return function c(){for(var f=arguments.length,m=C(f),y=f,S=Ln(c);y--;)m[y]=arguments[y];var I=f<3&&m[0]!==S&&m[f-1]!==S?[]:pt(m,S);return(f-=I.length)<i?ja(e,n,Ri,c.placeholder,l,m,I,l,l,i-f):Ee(this&&this!==Ce&&this instanceof c?o:e,this,m)}}(e,n,y):32!=n&&33!=n||c.length?Ri.apply(l,G):function Cl(e,n,i,o){var c=1&n,f=Mr(e);return function m(){for(var y=-1,S=arguments.length,I=-1,P=o.length,R=C(P+S),q=this&&this!==Ce&&this instanceof m?f:e;++I<P;)R[I]=o[I];for(;S--;)R[I++]=arguments[++y];return Ee(q,c?i:this,R)}}(e,n,i,o);else var K=function wl(e,n,i){var o=1&n,c=Mr(e);return function f(){return(this&&this!==Ce&&this instanceof f?c:e).apply(o?i:this,arguments)}}(e,n,i);return fc((q?Ra:dc)(K,G),e,n)}function tc(e,n,i,o){return e===l||lt(e,Pn[i])&&!ue.call(o,i)?n:e}function nc(e,n,i,o,c,f){return ge(e)&&ge(n)&&(f.set(n,e),Ei(e,n,l,nc,f),f.delete(n)),e}function Tl(e){return Or(e)?l:e}function rc(e,n,i,o,c,f){var m=1&i,y=e.length,S=n.length;if(y!=S&&!(m&&S>y))return!1;var I=f.get(e),P=f.get(n);if(I&&P)return I==n&&P==e;var R=-1,q=!0,G=2&i?new an:l;for(f.set(e,n),f.set(n,e);++R<y;){var K=e[R],te=n[R];if(o)var V=m?o(te,K,R,n,e,f):o(K,te,R,e,n,f);if(V!==l){if(V)continue;q=!1;break}if(G){if(!ur(n,function(re,se){if(!rn(G,se)&&(K===re||c(K,re,i,o,f)))return G.push(se)})){q=!1;break}}else if(K!==te&&!c(K,te,i,o,f)){q=!1;break}}return f.delete(e),f.delete(n),q}function At(e){return Gs(uc(e,l,vc),e+"")}function Fs(e){return Ca(e,Te,Ns)}function Bs(e){return Ca(e,qe,ic)}var Zs=Si?function(e){return Si.get(e)}:na;function Li(e){for(var n=e.name+"",i=Rn[n],o=ue.call(Rn,n)?i.length:0;o--;){var c=i[o],f=c.func;if(null==f||f==e)return c.name}return n}function Ln(e){return(ue.call(d,"placeholder")?d:e).placeholder}function Q(){var e=d.iteratee||ea;return e=e===ea?Ma:e,arguments.length?e(arguments[0],arguments[1]):e}function Ni(e,n){var i=e.__data__;return function Fl(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}(n)?i["string"==typeof n?"string":"hash"]:i.map}function Ls(e){for(var n=Te(e),i=n.length;i--;){var o=n[i],c=e[o];n[i]=[o,c,ac(c)]}return n}function ln(e,n){var i=function ss(p,T){return null==p?l:p[T]}(e,n);return Ta(i)?i:l}var Ns=fs?function(e){return null==e?[]:(e=j(e),ht(fs(e),function(n){return la.call(e,n)}))}:ra,ic=fs?function(e){for(var n=[];e;)ct(n,Ns(e)),e=yi(e);return n}:ra,ke=Pe;function oc(e,n,i){for(var o=-1,c=(n=Wt(n,e)).length,f=!1;++o<c;){var m=vt(n[o]);if(!(f=null!=e&&i(e,m)))break;e=e[m]}return f||++o!=c?f:!!(c=null==e?0:e.length)&&Yi(c)&&kt(m,c)&&($(e)||fn(e))}function sc(e){return"function"!=typeof e.constructor||Ar(e)?{}:Fn(yi(e))}function Rl(e){return $(e)||fn(e)||!!(da&&e&&e[da])}function kt(e,n){var i=typeof e;return!!(n=n??ft)&&("number"==i||"symbol"!=i&&wt.test(e))&&e>-1&&e%1==0&&e<n}function De(e,n,i){if(!ge(i))return!1;var o=typeof n;return!!("number"==o?Ue(i)&&kt(n,i.length):"string"==o&&n in i)&&lt(i[n],e)}function Us(e,n){if($(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Ke(e))||uo.test(e)||!Lr.test(e)||null!=n&&e in j(n)}function qs(e){var n=Li(e),i=d[n];if("function"!=typeof i||!(n in oe.prototype))return!1;if(e===i)return!0;var o=Zs(i);return!!o&&e===o[0]}(hs&&ke(new hs(new ArrayBuffer(1)))!=Bt||mr&&ke(new mr)!=Ge||ps&&ke(ps.resolve())!=Rr||Dn&&ke(new Dn)!=Je||vr&&ke(new vr)!=$t)&&(ke=function(e){var n=Pe(e),i=n==We?e.constructor:l,o=i?dn(i):"";if(o)switch(o){case lu:return Bt;case du:return Ge;case fu:return Rr;case hu:return Je;case pu:return $t}return n});var Zl=pi?Ot:ia;function Ar(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||Pn)}function ac(e){return e==e&&!ge(e)}function cc(e,n){return function(i){return null!=i&&i[e]===n&&(n!==l||e in j(i))}}function uc(e,n,i){return n=Se(n===l?e.length-1:n,0),function(){for(var o=arguments,c=-1,f=Se(o.length-n,0),m=C(f);++c<f;)m[c]=o[n+c];c=-1;for(var y=C(n+1);++c<n;)y[c]=o[c];return y[n]=i(m),Ee(e,this,y)}}function lc(e,n){return n.length<2?e:un(e,rt(n,0,-1))}function Hl(e,n){for(var i=e.length,o=Ae(n.length,i),c=Ne(e);o--;){var f=n[o];e[o]=kt(f,i)?c[f]:l}return e}function Hs(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var dc=hc(Ra),kr=ru||function(e,n){return Ce.setTimeout(e,n)},Gs=hc(dl);function fc(e,n,i){var o=n+"";return Gs(e,function Dl(e,n){var i=n.length;if(!i)return e;var o=i-1;return n[o]=(i>1?"& ":"")+n[o],n=n.join(i>2?", ":" "),e.replace(Kn,"{\n/* [wrapped with "+n+"] */\n")}(o,function Gl(e,n){return Ze(Ir,function(i){var o="_."+i[0];n&i[1]&&!On(e,o)&&e.push(o)}),e.sort()}(function El(e){var n=e.match(Nr);return n?n[1].split(Vn):[]}(o),i)))}function hc(e){var n=0,i=0;return function(){var o=au(),c=16-(o-i);if(i=o,c>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(l,arguments)}}function Ui(e,n){var i=-1,o=e.length,c=o-1;for(n=n===l?o:n;++i<n;){var f=Ts(i,c),m=e[f];e[f]=e[i],e[i]=m}return e.length=n,e}var pc=function Ll(e){var n=Wi(e,function(o){return 500===i.size&&i.clear(),o}),i=n.cache;return n}(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(oa,function(i,o,c,f){n.push(c?f.replace(go,"$1"):o||i)}),n});function vt(e){if("string"==typeof e||Ke(e))return e;var n=e+"";return"0"==n&&1/e==-yt?"-0":n}function dn(e){if(null!=e){try{return gi.call(e)}catch{}try{return e+""}catch{}}return""}function gc(e){if(e instanceof oe)return e.clone();var n=new tt(e.__wrapped__,e.__chain__);return n.__actions__=Ne(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var zl=ne(function(e,n){return ye(e)?br(e,Me(n,1,ye,!0)):[]}),Ql=ne(function(e,n){var i=it(n);return ye(i)&&(i=l),ye(e)?br(e,Me(n,1,ye,!0),Q(i,2)):[]}),Kl=ne(function(e,n){var i=it(n);return ye(i)&&(i=l),ye(e)?br(e,Me(n,1,ye,!0),l,i):[]});function _c(e,n,i){var o=null==e?0:e.length;if(!o)return-1;var c=null==i?0:ee(i);return c<0&&(c=Se(o+c,0)),En(e,Q(n,3),c)}function mc(e,n,i){var o=null==e?0:e.length;if(!o)return-1;var c=o-1;return i!==l&&(c=ee(i),c=i<0?Se(o+c,0):Ae(c,o-1)),En(e,Q(n,3),c,!0)}function vc(e){return null!=e&&e.length?Me(e,1):[]}function yc(e){return e&&e.length?e[0]:l}var sd=ne(function(e){var n=pe(e,Es);return n.length&&n[0]===e[0]?xs(n):[]}),ad=ne(function(e){var n=it(e),i=pe(e,Es);return n===it(i)?n=l:i.pop(),i.length&&i[0]===e[0]?xs(i,Q(n,2)):[]}),cd=ne(function(e){var n=it(e),i=pe(e,Es);return(n="function"==typeof n?n:l)&&i.pop(),i.length&&i[0]===e[0]?xs(i,l,n):[]});function it(e){var n=null==e?0:e.length;return n?e[n-1]:l}var fd=ne(xc);function xc(e,n){return e&&e.length&&n&&n.length?Ss(e,n):e}var gd=At(function(e,n){var i=null==e?0:e.length,o=_s(e,n);return Da(e,pe(n,function(c){return kt(c,i)?+c:c}).sort(Ga)),o});function Ws(e){return null==e?e:uu.call(e)}var Id=ne(function(e){return Gt(Me(e,1,ye,!0))}),Pd=ne(function(e){var n=it(e);return ye(n)&&(n=l),Gt(Me(e,1,ye,!0),Q(n,2))}),Dd=ne(function(e){var n=it(e);return n="function"==typeof n?n:l,Gt(Me(e,1,ye,!0),l,n)});function Js(e){if(!e||!e.length)return[];var n=0;return e=ht(e,function(i){if(ye(i))return n=Se(i.length,n),!0}),hr(n,function(i){return pe(e,lr(i))})}function wc(e,n){if(!e||!e.length)return[];var i=Js(e);return null==n?i:pe(i,function(o){return Ee(n,l,o)})}var Zd=ne(function(e,n){return ye(e)?br(e,n):[]}),Ld=ne(function(e){return Os(ht(e,ye))}),Nd=ne(function(e){var n=it(e);return ye(n)&&(n=l),Os(ht(e,ye),Q(n,2))}),Ud=ne(function(e){var n=it(e);return n="function"==typeof n?n:l,Os(ht(e,ye),l,n)}),qd=ne(Js),Wd=ne(function(e){var n=e.length,i=n>1?e[n-1]:l;return i="function"==typeof i?(e.pop(),i):l,wc(e,i)});function bc(e){var n=d(e);return n.__chain__=!0,n}function qi(e,n){return n(e)}var Yd=At(function(e){var n=e.length,i=n?e[0]:0,o=this.__wrapped__,c=function(f){return _s(f,e)};return!(n>1||this.__actions__.length)&&o instanceof oe&&kt(i)?((o=o.slice(i,+i+(n?1:0))).__actions__.push({func:qi,args:[c],thisArg:l}),new tt(o,this.__chain__).thru(function(f){return n&&!f.length&&f.push(l),f})):this.thru(c)}),ef=Di(function(e,n,i){ue.call(e,i)?++e[i]:Tt(e,i,1)}),rf=Ka(_c),of=Ka(mc);function Cc(e,n){return($(e)?Ze:Ht)(e,Q(n,3))}function Sc(e,n){return($(e)?Qo:xa)(e,Q(n,3))}var uf=Di(function(e,n,i){ue.call(e,i)?e[i].push(n):Tt(e,i,[n])}),df=ne(function(e,n,i){var o=-1,c="function"==typeof n,f=Ue(e)?C(e.length):[];return Ht(e,function(m){f[++o]=c?Ee(n,m,i):Cr(m,n,i)}),f}),ff=Di(function(e,n,i){Tt(e,i,n)});function Hi(e,n){return($(e)?pe:Aa)(e,Q(n,3))}var pf=Di(function(e,n,i){e[i?0:1].push(n)},function(){return[[],[]]}),Cf=ne(function(e,n){if(null==e)return[];var i=n.length;return i>1&&De(e,n[0],n[1])?n=[]:i>2&&De(n[0],n[1],n[2])&&(n=[n[0]]),Ia(e,Me(n,1),[])}),Gi=nu||function(){return Ce.Date.now()};function Tc(e,n,i){return n=i?l:n,Mt(e,128,l,l,l,l,n=e&&null==n?e.length:n)}function Mc(e,n){var i;if("function"!=typeof n)throw new Le(t);return e=ee(e),function(){return--e>0&&(i=n.apply(this,arguments)),e<=1&&(n=l),i}}var Ys=ne(function(e,n,i){var o=1;if(i.length){var c=pt(i,Ln(Ys));o|=32}return Mt(e,o,n,i,c)}),Ac=ne(function(e,n,i){var o=3;if(i.length){var c=pt(i,Ln(Ac));o|=32}return Mt(n,o,e,i,c)});function Ec(e,n,i){var o,c,f,m,y,S,I=0,P=!1,R=!1,q=!0;if("function"!=typeof e)throw new Le(t);function G(xe){var dt=o,It=c;return o=c=l,I=xe,m=e.apply(It,dt)}function K(xe){return I=xe,y=kr(re,n),P?G(xe):m}function V(xe){var dt=xe-S;return S===l||dt>=n||dt<0||R&&xe-I>=f}function re(){var xe=Gi();if(V(xe))return se(xe);y=kr(re,function te(xe){var Kc=n-(xe-S);return R?Ae(Kc,f-(xe-I)):Kc}(xe))}function se(xe){return y=l,q&&o?G(xe):(o=c=l,m)}function $e(){var xe=Gi(),dt=V(xe);if(o=arguments,c=this,S=xe,dt){if(y===l)return K(S);if(R)return Ua(y),y=kr(re,n),G(S)}return y===l&&(y=kr(re,n)),m}return n=ot(n)||0,ge(i)&&(P=!!i.leading,f=(R="maxWait"in i)?Se(ot(i.maxWait)||0,n):f,q="trailing"in i?!!i.trailing:q),$e.cancel=function Ve(){y!==l&&Ua(y),I=0,o=S=c=y=l},$e.flush=function Re(){return y===l?m:se(Gi())},$e}var Tf=ne(function(e,n){return ya(e,1,n)}),Mf=ne(function(e,n,i){return ya(e,ot(n)||0,i)});function Wi(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new Le(t);var i=function(){var o=arguments,c=n?n.apply(this,o):o[0],f=i.cache;if(f.has(c))return f.get(c);var m=e.apply(this,o);return i.cache=f.set(c,m)||f,m};return i.cache=new(Wi.Cache||St),i}function Ji(e){if("function"!=typeof e)throw new Le(t);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}Wi.Cache=St;var Of=pl(function(e,n){var i=(n=1==n.length&&$(n[0])?pe(n[0],Ie(Q())):pe(Me(n,1),Ie(Q()))).length;return ne(function(o){for(var c=-1,f=Ae(o.length,i);++c<f;)o[c]=n[c].call(this,o[c]);return Ee(e,this,o)})}),zs=ne(function(e,n){var i=pt(n,Ln(zs));return Mt(e,32,l,n,i)}),Ic=ne(function(e,n){var i=pt(n,Ln(Ic));return Mt(e,64,l,n,i)}),Ef=At(function(e,n){return Mt(e,256,l,l,l,n)});function lt(e,n){return e===n||e!=e&&n!=n}var Hf=Zi(ys),Gf=Zi(function(e,n){return e>=n}),fn=Sa(function(){return arguments}())?Sa:function(e){return me(e)&&ue.call(e,"callee")&&!la.call(e,"callee")},$=C.isArray,Wf=Xr?Ie(Xr):function $u(e){return me(e)&&Pe(e)==Xt};function Ue(e){return null!=e&&Yi(e.length)&&!Ot(e)}function ye(e){return me(e)&&Ue(e)}var Yt=iu||ia,Yf=jr?Ie(jr):function Xu(e){return me(e)&&Pe(e)==Qt};function Qs(e){if(!me(e))return!1;var n=Pe(e);return n==pn||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!Or(e)}function Ot(e){if(!ge(e))return!1;var n=Pe(e);return n==Oe||n==Pr||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Pc(e){return"number"==typeof e&&e==ee(e)}function Yi(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ft}function ge(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function me(e){return null!=e&&"object"==typeof e}var Dc=ei?Ie(ei):function el(e){return me(e)&&ke(e)==Ge};function Rc(e){return"number"==typeof e||me(e)&&Pe(e)==Ft}function Or(e){if(!me(e)||Pe(e)!=We)return!1;var n=yi(e);if(null===n)return!0;var i=ue.call(n,"constructor")&&n.constructor;return"function"==typeof i&&i instanceof i&&gi.call(i)==Xc}var Ks=ti?Ie(ti):function tl(e){return me(e)&&Pe(e)==Kt},Fc=ni?Ie(ni):function nl(e){return me(e)&&ke(e)==Je};function zi(e){return"string"==typeof e||!$(e)&&me(e)&&Pe(e)==Vt}function Ke(e){return"symbol"==typeof e||me(e)&&Pe(e)==gn}var Nn=ri?Ie(ri):function rl(e){return me(e)&&Yi(e.length)&&!!he[Pe(e)]},ch=Zi(Cs),uh=Zi(function(e,n){return e<=n});function Bc(e){if(!e)return[];if(Ue(e))return zi(e)?Ye(e):Ne(e);if(_r&&e[_r])return function cs(p){for(var T,C=[];!(T=p.next()).done;)C.push(T.value);return C}(e[_r]());var n=ke(e);return(n==Ge?gr:n==Je?In:Un)(e)}function Et(e){return e?(e=ot(e))===yt||e===-yt?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ee(e){var n=Et(e),i=n%1;return n==n?i?n-i:n:0}function Zc(e){return e?cn(ee(e),0,Xe):0}function ot(e){if("number"==typeof e)return e;if(Ke(e))return NaN;if(ge(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=ge(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=ui(e);var i=$n.test(e);return i||Ur.test(e)?Jo(e.slice(2),i?2:8):mo.test(e)?NaN:+e}function Lc(e){return mt(e,qe(e))}function ce(e){return null==e?"":Qe(e)}var dh=Bn(function(e,n){if(Ar(n)||Ue(n))mt(n,Te(n),e);else for(var i in n)ue.call(n,i)&&wr(e,i,n[i])}),Nc=Bn(function(e,n){mt(n,qe(n),e)}),Qi=Bn(function(e,n,i,o){mt(n,qe(n),e,o)}),fh=Bn(function(e,n,i,o){mt(n,Te(n),e,o)}),hh=At(_s),gh=ne(function(e,n){e=j(e);var i=-1,o=n.length,c=o>2?n[2]:l;for(c&&De(n[0],n[1],c)&&(o=1);++i<o;)for(var f=n[i],m=qe(f),y=-1,S=m.length;++y<S;){var I=m[y],P=e[I];(P===l||lt(P,Pn[I])&&!ue.call(e,I))&&(e[I]=f[I])}return e}),_h=ne(function(e){return e.push(l,nc),Ee(Uc,l,e)});function Vs(e,n,i){var o=null==e?l:un(e,n);return o===l?i:o}function $s(e,n){return null!=e&&oc(e,n,Qu)}var Mh=$a(function(e,n,i){null!=n&&"function"!=typeof n.toString&&(n=_i.call(n)),e[n]=i},js(He)),Ah=$a(function(e,n,i){null!=n&&"function"!=typeof n.toString&&(n=_i.call(n)),ue.call(e,n)?e[n].push(i):e[n]=[i]},Q),kh=ne(Cr);function Te(e){return Ue(e)?ga(e):bs(e)}function qe(e){return Ue(e)?ga(e,!0):function il(e){if(!ge(e))return function Ul(e){var n=[];if(null!=e)for(var i in j(e))n.push(i);return n}(e);var n=Ar(e),i=[];for(var o in e)"constructor"==o&&(n||!ue.call(e,o))||i.push(o);return i}(e)}var Ih=Bn(function(e,n,i){Ei(e,n,i)}),Uc=Bn(function(e,n,i,o){Ei(e,n,i,o)}),Ph=At(function(e,n){var i={};if(null==e)return i;var o=!1;n=pe(n,function(f){return f=Wt(f,e),o||(o=f.length>1),f}),mt(e,Bs(e),i),o&&(i=nt(i,7,Tl));for(var c=n.length;c--;)ks(i,n[c]);return i}),Rh=At(function(e,n){return null==e?{}:function sl(e,n){return Pa(e,n,function(i,o){return $s(e,o)})}(e,n)});function qc(e,n){if(null==e)return{};var i=pe(Bs(e),function(o){return[o]});return n=Q(n),Pa(e,i,function(o,c){return n(o,c[0])})}var Hc=ec(Te),Gc=ec(qe);function Un(e){return null==e?[]:pr(e,Te(e))}var Yh=Zn(function(e,n,i){return n=n.toLowerCase(),e+(i?Wc(n):n)});function Wc(e){return Xs(ce(e).toLowerCase())}function Jc(e){return(e=ce(e))&&e.replace(Xn,rs).replace(kn,"")}var Vh=Zn(function(e,n,i){return e+(i?"-":"")+n.toLowerCase()}),$h=Zn(function(e,n,i){return e+(i?" ":"")+n.toLowerCase()}),Xh=Qa("toLowerCase"),op=Zn(function(e,n,i){return e+(i?"_":"")+n.toLowerCase()}),ap=Zn(function(e,n,i){return e+(i?" ":"")+Xs(n)}),mp=Zn(function(e,n,i){return e+(i?" ":"")+n.toUpperCase()}),Xs=Qa("toUpperCase");function Yc(e,n,i){return e=ce(e),(n=i?l:n)===l?function as(p){return Zo.test(p)}(e)?function s(p){return p.match(Fo)||[]}(e):function Xo(p){return p.match(ho)||[]}(e):e.match(n)||[]}var zc=ne(function(e,n){try{return Ee(e,l,n)}catch(i){return Qs(i)?i:new L(i)}}),vp=At(function(e,n){return Ze(n,function(i){i=vt(i),Tt(e,i,Ys(e[i],e))}),e});function js(e){return function(){return e}}var bp=Va(),Cp=Va(!0);function He(e){return e}function ea(e){return Ma("function"==typeof e?e:nt(e,1))}var Mp=ne(function(e,n){return function(i){return Cr(i,e,n)}}),Ap=ne(function(e,n){return function(i){return Cr(e,i,n)}});function ta(e,n,i){var o=Te(n),c=Oi(n,o);null==i&&(!ge(n)||!c.length&&o.length)&&(i=n,n=e,e=this,c=Oi(n,Te(n)));var f=!(ge(i)&&"chain"in i&&!i.chain),m=Ot(e);return Ze(c,function(y){var S=n[y];e[y]=S,m&&(e.prototype[y]=function(){var I=this.__chain__;if(f||I){var P=e(this.__wrapped__),R=P.__actions__=Ne(this.__actions__);return R.push({func:S,args:arguments,thisArg:e}),P.__chain__=I,P}return S.apply(e,ct([this.value()],arguments))})}),e}function na(){}var Ep=Ds(pe),Ip=Ds(ii),Pp=Ds(ur);function Qc(e){return Us(e)?lr(vt(e)):function al(e){return function(n){return un(n,e)}}(e)}var Rp=Xa(),Fp=Xa(!0);function ra(){return[]}function ia(){return!1}var Hp=Fi(function(e,n){return e+n},0),Gp=Rs("ceil"),Wp=Fi(function(e,n){return e/n},1),Jp=Rs("floor"),Xp=Fi(function(e,n){return e*n},1),jp=Rs("round"),eg=Fi(function(e,n){return e-n},0);return d.after=function Sf(e,n){if("function"!=typeof n)throw new Le(t);return e=ee(e),function(){if(--e<1)return n.apply(this,arguments)}},d.ary=Tc,d.assign=dh,d.assignIn=Nc,d.assignInWith=Qi,d.assignWith=fh,d.at=hh,d.before=Mc,d.bind=Ys,d.bindAll=vp,d.bindKey=Ac,d.castArray=function Bf(){if(!arguments.length)return[];var e=arguments[0];return $(e)?e:[e]},d.chain=bc,d.chunk=function Wl(e,n,i){n=(i?De(e,n,i):n===l)?1:Se(ee(n),0);var o=null==e?0:e.length;if(!o||n<1)return[];for(var c=0,f=0,m=C(bi(o/n));c<o;)m[f++]=rt(e,c,c+=n);return m},d.compact=function Jl(e){for(var n=-1,i=null==e?0:e.length,o=0,c=[];++n<i;){var f=e[n];f&&(c[o++]=f)}return c},d.concat=function Yl(){var e=arguments.length;if(!e)return[];for(var n=C(e-1),i=arguments[0],o=e;o--;)n[o-1]=arguments[o];return ct($(i)?Ne(i):[i],Me(n,1))},d.cond=function yp(e){var n=null==e?0:e.length,i=Q();return e=n?pe(e,function(o){if("function"!=typeof o[1])throw new Le(t);return[i(o[0]),o[1]]}):[],ne(function(o){for(var c=-1;++c<n;){var f=e[c];if(Ee(f[0],this,o))return Ee(f[1],this,o)}})},d.conforms=function xp(e){return function Wu(e){var n=Te(e);return function(i){return va(i,e,n)}}(nt(e,1))},d.constant=js,d.countBy=ef,d.create=function ph(e,n){var i=Fn(e);return null==n?i:ma(i,n)},d.curry=function kc(e,n,i){var o=Mt(e,8,l,l,l,l,l,n=i?l:n);return o.placeholder=kc.placeholder,o},d.curryRight=function Oc(e,n,i){var o=Mt(e,16,l,l,l,l,l,n=i?l:n);return o.placeholder=Oc.placeholder,o},d.debounce=Ec,d.defaults=gh,d.defaultsDeep=_h,d.defer=Tf,d.delay=Mf,d.difference=zl,d.differenceBy=Ql,d.differenceWith=Kl,d.drop=function Vl(e,n,i){var o=null==e?0:e.length;return o?rt(e,(n=i||n===l?1:ee(n))<0?0:n,o):[]},d.dropRight=function $l(e,n,i){var o=null==e?0:e.length;return o?rt(e,0,(n=o-(n=i||n===l?1:ee(n)))<0?0:n):[]},d.dropRightWhile=function Xl(e,n){return e&&e.length?Pi(e,Q(n,3),!0,!0):[]},d.dropWhile=function jl(e,n){return e&&e.length?Pi(e,Q(n,3),!0):[]},d.fill=function ed(e,n,i,o){var c=null==e?0:e.length;return c?(i&&"number"!=typeof i&&De(e,n,i)&&(i=0,o=c),function Yu(e,n,i,o){var c=e.length;for((i=ee(i))<0&&(i=-i>c?0:c+i),(o=o===l||o>c?c:ee(o))<0&&(o+=c),o=i>o?0:Zc(o);i<o;)e[i++]=n;return e}(e,n,i,o)):[]},d.filter=function nf(e,n){return($(e)?ht:wa)(e,Q(n,3))},d.flatMap=function sf(e,n){return Me(Hi(e,n),1)},d.flatMapDeep=function af(e,n){return Me(Hi(e,n),yt)},d.flatMapDepth=function cf(e,n,i){return i=i===l?1:ee(i),Me(Hi(e,n),i)},d.flatten=vc,d.flattenDeep=function td(e){return null!=e&&e.length?Me(e,yt):[]},d.flattenDepth=function nd(e,n){return null!=e&&e.length?Me(e,n=n===l?1:ee(n)):[]},d.flip=function Af(e){return Mt(e,512)},d.flow=bp,d.flowRight=Cp,d.fromPairs=function rd(e){for(var n=-1,i=null==e?0:e.length,o={};++n<i;){var c=e[n];o[c[0]]=c[1]}return o},d.functions=function Ch(e){return null==e?[]:Oi(e,Te(e))},d.functionsIn=function Sh(e){return null==e?[]:Oi(e,qe(e))},d.groupBy=uf,d.initial=function od(e){return null!=e&&e.length?rt(e,0,-1):[]},d.intersection=sd,d.intersectionBy=ad,d.intersectionWith=cd,d.invert=Mh,d.invertBy=Ah,d.invokeMap=df,d.iteratee=ea,d.keyBy=ff,d.keys=Te,d.keysIn=qe,d.map=Hi,d.mapKeys=function Oh(e,n){var i={};return n=Q(n,3),_t(e,function(o,c,f){Tt(i,n(o,c,f),o)}),i},d.mapValues=function Eh(e,n){var i={};return n=Q(n,3),_t(e,function(o,c,f){Tt(i,c,n(o,c,f))}),i},d.matches=function Sp(e){return ka(nt(e,1))},d.matchesProperty=function Tp(e,n){return Oa(e,nt(n,1))},d.memoize=Wi,d.merge=Ih,d.mergeWith=Uc,d.method=Mp,d.methodOf=Ap,d.mixin=ta,d.negate=Ji,d.nthArg=function Op(e){return e=ee(e),ne(function(n){return Ea(n,e)})},d.omit=Ph,d.omitBy=function Dh(e,n){return qc(e,Ji(Q(n)))},d.once=function kf(e){return Mc(2,e)},d.orderBy=function hf(e,n,i,o){return null==e?[]:($(n)||(n=null==n?[]:[n]),$(i=o?l:i)||(i=null==i?[]:[i]),Ia(e,n,i))},d.over=Ep,d.overArgs=Of,d.overEvery=Ip,d.overSome=Pp,d.partial=zs,d.partialRight=Ic,d.partition=pf,d.pick=Rh,d.pickBy=qc,d.property=Qc,d.propertyOf=function Dp(e){return function(n){return null==e?l:un(e,n)}},d.pull=fd,d.pullAll=xc,d.pullAllBy=function hd(e,n,i){return e&&e.length&&n&&n.length?Ss(e,n,Q(i,2)):e},d.pullAllWith=function pd(e,n,i){return e&&e.length&&n&&n.length?Ss(e,n,l,i):e},d.pullAt=gd,d.range=Rp,d.rangeRight=Fp,d.rearg=Ef,d.reject=function mf(e,n){return($(e)?ht:wa)(e,Ji(Q(n,3)))},d.remove=function _d(e,n){var i=[];if(!e||!e.length)return i;var o=-1,c=[],f=e.length;for(n=Q(n,3);++o<f;){var m=e[o];n(m,o,e)&&(i.push(m),c.push(o))}return Da(e,c),i},d.rest=function If(e,n){if("function"!=typeof e)throw new Le(t);return ne(e,n=n===l?n:ee(n))},d.reverse=Ws,d.sampleSize=function yf(e,n,i){return n=(i?De(e,n,i):n===l)?1:ee(n),($(e)?Uu:ll)(e,n)},d.set=function Bh(e,n,i){return null==e?e:Tr(e,n,i)},d.setWith=function Zh(e,n,i,o){return o="function"==typeof o?o:l,null==e?e:Tr(e,n,i,o)},d.shuffle=function xf(e){return($(e)?qu:fl)(e)},d.slice=function md(e,n,i){var o=null==e?0:e.length;return o?(i&&"number"!=typeof i&&De(e,n,i)?(n=0,i=o):(n=null==n?0:ee(n),i=i===l?o:ee(i)),rt(e,n,i)):[]},d.sortBy=Cf,d.sortedUniq=function Sd(e){return e&&e.length?Fa(e):[]},d.sortedUniqBy=function Td(e,n){return e&&e.length?Fa(e,Q(n,2)):[]},d.split=function sp(e,n,i){return i&&"number"!=typeof i&&De(e,n,i)&&(n=i=l),(i=i===l?Xe:i>>>0)?(e=ce(e))&&("string"==typeof n||null!=n&&!Ks(n))&&!(n=Qe(n))&&Nt(e)?Jt(Ye(e),0,i):e.split(n,i):[]},d.spread=function Pf(e,n){if("function"!=typeof e)throw new Le(t);return n=null==n?0:Se(ee(n),0),ne(function(i){var o=i[n],c=Jt(i,0,n);return o&&ct(c,o),Ee(e,this,c)})},d.tail=function Md(e){var n=null==e?0:e.length;return n?rt(e,1,n):[]},d.take=function Ad(e,n,i){return e&&e.length?rt(e,0,(n=i||n===l?1:ee(n))<0?0:n):[]},d.takeRight=function kd(e,n,i){var o=null==e?0:e.length;return o?rt(e,(n=o-(n=i||n===l?1:ee(n)))<0?0:n,o):[]},d.takeRightWhile=function Od(e,n){return e&&e.length?Pi(e,Q(n,3),!1,!0):[]},d.takeWhile=function Ed(e,n){return e&&e.length?Pi(e,Q(n,3)):[]},d.tap=function Jd(e,n){return n(e),e},d.throttle=function Df(e,n,i){var o=!0,c=!0;if("function"!=typeof e)throw new Le(t);return ge(i)&&(o="leading"in i?!!i.leading:o,c="trailing"in i?!!i.trailing:c),Ec(e,n,{leading:o,maxWait:n,trailing:c})},d.thru=qi,d.toArray=Bc,d.toPairs=Hc,d.toPairsIn=Gc,d.toPath=function Up(e){return $(e)?pe(e,vt):Ke(e)?[e]:Ne(pc(ce(e)))},d.toPlainObject=Lc,d.transform=function Lh(e,n,i){var o=$(e),c=o||Yt(e)||Nn(e);if(n=Q(n,4),null==i){var f=e&&e.constructor;i=c?o?new f:[]:ge(e)&&Ot(f)?Fn(yi(e)):{}}return(c?Ze:_t)(e,function(m,y,S){return n(i,m,y,S)}),i},d.unary=function Rf(e){return Tc(e,1)},d.union=Id,d.unionBy=Pd,d.unionWith=Dd,d.uniq=function Rd(e){return e&&e.length?Gt(e):[]},d.uniqBy=function Fd(e,n){return e&&e.length?Gt(e,Q(n,2)):[]},d.uniqWith=function Bd(e,n){return n="function"==typeof n?n:l,e&&e.length?Gt(e,l,n):[]},d.unset=function Nh(e,n){return null==e||ks(e,n)},d.unzip=Js,d.unzipWith=wc,d.update=function Uh(e,n,i){return null==e?e:Za(e,n,Is(i))},d.updateWith=function qh(e,n,i,o){return o="function"==typeof o?o:l,null==e?e:Za(e,n,Is(i),o)},d.values=Un,d.valuesIn=function Hh(e){return null==e?[]:pr(e,qe(e))},d.without=Zd,d.words=Yc,d.wrap=function Ff(e,n){return zs(Is(n),e)},d.xor=Ld,d.xorBy=Nd,d.xorWith=Ud,d.zip=qd,d.zipObject=function Hd(e,n){return Na(e||[],n||[],wr)},d.zipObjectDeep=function Gd(e,n){return Na(e||[],n||[],Tr)},d.zipWith=Wd,d.entries=Hc,d.entriesIn=Gc,d.extend=Nc,d.extendWith=Qi,ta(d,d),d.add=Hp,d.attempt=zc,d.camelCase=Yh,d.capitalize=Wc,d.ceil=Gp,d.clamp=function Gh(e,n,i){return i===l&&(i=n,n=l),i!==l&&(i=(i=ot(i))==i?i:0),n!==l&&(n=(n=ot(n))==n?n:0),cn(ot(e),n,i)},d.clone=function Zf(e){return nt(e,4)},d.cloneDeep=function Nf(e){return nt(e,5)},d.cloneDeepWith=function Uf(e,n){return nt(e,5,n="function"==typeof n?n:l)},d.cloneWith=function Lf(e,n){return nt(e,4,n="function"==typeof n?n:l)},d.conformsTo=function qf(e,n){return null==n||va(e,n,Te(n))},d.deburr=Jc,d.defaultTo=function wp(e,n){return null==e||e!=e?n:e},d.divide=Wp,d.endsWith=function zh(e,n,i){e=ce(e),n=Qe(n);var o=e.length,c=i=i===l?o:cn(ee(i),0,o);return(i-=n.length)>=0&&e.slice(i,c)==n},d.eq=lt,d.escape=function Qh(e){return(e=ce(e))&&so.test(e)?e.replace(Br,is):e},d.escapeRegExp=function Kh(e){return(e=ce(e))&&lo.test(e)?e.replace(xn,"\\$&"):e},d.every=function tf(e,n,i){var o=$(e)?ii:Ju;return i&&De(e,n,i)&&(n=l),o(e,Q(n,3))},d.find=rf,d.findIndex=_c,d.findKey=function mh(e,n){return oi(e,Q(n,3),_t)},d.findLast=of,d.findLastIndex=mc,d.findLastKey=function vh(e,n){return oi(e,Q(n,3),vs)},d.floor=Jp,d.forEach=Cc,d.forEachRight=Sc,d.forIn=function yh(e,n){return null==e?e:ms(e,Q(n,3),qe)},d.forInRight=function xh(e,n){return null==e?e:ba(e,Q(n,3),qe)},d.forOwn=function wh(e,n){return e&&_t(e,Q(n,3))},d.forOwnRight=function bh(e,n){return e&&vs(e,Q(n,3))},d.get=Vs,d.gt=Hf,d.gte=Gf,d.has=function Th(e,n){return null!=e&&oc(e,n,zu)},d.hasIn=$s,d.head=yc,d.identity=He,d.includes=function lf(e,n,i,o){e=Ue(e)?e:Un(e),i=i&&!o?ee(i):0;var c=e.length;return i<0&&(i=Se(c+i,0)),zi(e)?i<=c&&e.indexOf(n,i)>-1:!!c&&Lt(e,n,i)>-1},d.indexOf=function id(e,n,i){var o=null==e?0:e.length;if(!o)return-1;var c=null==i?0:ee(i);return c<0&&(c=Se(o+c,0)),Lt(e,n,c)},d.inRange=function Wh(e,n,i){return n=Et(n),i===l?(i=n,n=0):i=Et(i),function Ku(e,n,i){return e>=Ae(n,i)&&e<Se(n,i)}(e=ot(e),n,i)},d.invoke=kh,d.isArguments=fn,d.isArray=$,d.isArrayBuffer=Wf,d.isArrayLike=Ue,d.isArrayLikeObject=ye,d.isBoolean=function Jf(e){return!0===e||!1===e||me(e)&&Pe(e)==zt},d.isBuffer=Yt,d.isDate=Yf,d.isElement=function zf(e){return me(e)&&1===e.nodeType&&!Or(e)},d.isEmpty=function Qf(e){if(null==e)return!0;if(Ue(e)&&($(e)||"string"==typeof e||"function"==typeof e.splice||Yt(e)||Nn(e)||fn(e)))return!e.length;var n=ke(e);if(n==Ge||n==Je)return!e.size;if(Ar(e))return!bs(e).length;for(var i in e)if(ue.call(e,i))return!1;return!0},d.isEqual=function Kf(e,n){return Sr(e,n)},d.isEqualWith=function Vf(e,n,i){var o=(i="function"==typeof i?i:l)?i(e,n):l;return o===l?Sr(e,n,l,i):!!o},d.isError=Qs,d.isFinite=function $f(e){return"number"==typeof e&&fa(e)},d.isFunction=Ot,d.isInteger=Pc,d.isLength=Yi,d.isMap=Dc,d.isMatch=function Xf(e,n){return e===n||ws(e,n,Ls(n))},d.isMatchWith=function jf(e,n,i){return i="function"==typeof i?i:l,ws(e,n,Ls(n),i)},d.isNaN=function eh(e){return Rc(e)&&e!=+e},d.isNative=function th(e){if(Zl(e))throw new L("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ta(e)},d.isNil=function rh(e){return null==e},d.isNull=function nh(e){return null===e},d.isNumber=Rc,d.isObject=ge,d.isObjectLike=me,d.isPlainObject=Or,d.isRegExp=Ks,d.isSafeInteger=function ih(e){return Pc(e)&&e>=-ft&&e<=ft},d.isSet=Fc,d.isString=zi,d.isSymbol=Ke,d.isTypedArray=Nn,d.isUndefined=function oh(e){return e===l},d.isWeakMap=function sh(e){return me(e)&&ke(e)==$t},d.isWeakSet=function ah(e){return me(e)&&"[object WeakSet]"==Pe(e)},d.join=function ud(e,n){return null==e?"":ou.call(e,n)},d.kebabCase=Vh,d.last=it,d.lastIndexOf=function ld(e,n,i){var o=null==e?0:e.length;if(!o)return-1;var c=o;return i!==l&&(c=(c=ee(i))<0?Se(o+c,0):Ae(c,o-1)),n==n?function ds(p,T,C){for(var F=C+1;F--;)if(p[F]===T)return F;return F}(e,n,c):En(e,si,c,!0)},d.lowerCase=$h,d.lowerFirst=Xh,d.lt=ch,d.lte=uh,d.max=function Yp(e){return e&&e.length?ki(e,He,ys):l},d.maxBy=function zp(e,n){return e&&e.length?ki(e,Q(n,2),ys):l},d.mean=function Qp(e){return ai(e,He)},d.meanBy=function Kp(e,n){return ai(e,Q(n,2))},d.min=function Vp(e){return e&&e.length?ki(e,He,Cs):l},d.minBy=function $p(e,n){return e&&e.length?ki(e,Q(n,2),Cs):l},d.stubArray=ra,d.stubFalse=ia,d.stubObject=function Bp(){return{}},d.stubString=function Zp(){return""},d.stubTrue=function Lp(){return!0},d.multiply=Xp,d.nth=function dd(e,n){return e&&e.length?Ea(e,ee(n)):l},d.noConflict=function kp(){return Ce._===this&&(Ce._=jc),this},d.noop=na,d.now=Gi,d.pad=function jh(e,n,i){e=ce(e);var o=(n=ee(n))?Ut(e):0;if(!n||o>=n)return e;var c=(n-o)/2;return Bi(Ci(c),i)+e+Bi(bi(c),i)},d.padEnd=function ep(e,n,i){e=ce(e);var o=(n=ee(n))?Ut(e):0;return n&&o<n?e+Bi(n-o,i):e},d.padStart=function tp(e,n,i){e=ce(e);var o=(n=ee(n))?Ut(e):0;return n&&o<n?Bi(n-o,i)+e:e},d.parseInt=function np(e,n,i){return i||null==n?n=0:n&&(n=+n),cu(ce(e).replace(Qn,""),n||0)},d.random=function Jh(e,n,i){if(i&&"boolean"!=typeof i&&De(e,n,i)&&(n=i=l),i===l&&("boolean"==typeof n?(i=n,n=l):"boolean"==typeof e&&(i=e,e=l)),e===l&&n===l?(e=0,n=1):(e=Et(e),n===l?(n=e,e=0):n=Et(n)),e>n){var o=e;e=n,n=o}if(i||e%1||n%1){var c=ha();return Ae(e+c*(n-e+Wo("1e-"+((c+"").length-1))),n)}return Ts(e,n)},d.reduce=function gf(e,n,i){var o=$(e)?cr:ci,c=arguments.length<3;return o(e,Q(n,4),i,c,Ht)},d.reduceRight=function _f(e,n,i){var o=$(e)?Ko:ci,c=arguments.length<3;return o(e,Q(n,4),i,c,xa)},d.repeat=function rp(e,n,i){return n=(i?De(e,n,i):n===l)?1:ee(n),Ms(ce(e),n)},d.replace=function ip(){var e=arguments,n=ce(e[0]);return e.length<3?n:n.replace(e[1],e[2])},d.result=function Fh(e,n,i){var o=-1,c=(n=Wt(n,e)).length;for(c||(c=1,e=l);++o<c;){var f=null==e?l:e[vt(n[o])];f===l&&(o=c,f=i),e=Ot(f)?f.call(e):f}return e},d.round=jp,d.runInContext=p,d.sample=function vf(e){return($(e)?_a:ul)(e)},d.size=function wf(e){if(null==e)return 0;if(Ue(e))return zi(e)?Ut(e):e.length;var n=ke(e);return n==Ge||n==Je?e.size:bs(e).length},d.snakeCase=op,d.some=function bf(e,n,i){var o=$(e)?ur:hl;return i&&De(e,n,i)&&(n=l),o(e,Q(n,3))},d.sortedIndex=function vd(e,n){return Ii(e,n)},d.sortedIndexBy=function yd(e,n,i){return As(e,n,Q(i,2))},d.sortedIndexOf=function xd(e,n){var i=null==e?0:e.length;if(i){var o=Ii(e,n);if(o<i&&lt(e[o],n))return o}return-1},d.sortedLastIndex=function wd(e,n){return Ii(e,n,!0)},d.sortedLastIndexBy=function bd(e,n,i){return As(e,n,Q(i,2),!0)},d.sortedLastIndexOf=function Cd(e,n){if(null!=e&&e.length){var o=Ii(e,n,!0)-1;if(lt(e[o],n))return o}return-1},d.startCase=ap,d.startsWith=function cp(e,n,i){return e=ce(e),i=null==i?0:cn(ee(i),0,e.length),n=Qe(n),e.slice(i,i+n.length)==n},d.subtract=eg,d.sum=function tg(e){return e&&e.length?fr(e,He):0},d.sumBy=function ng(e,n){return e&&e.length?fr(e,Q(n,2)):0},d.template=function up(e,n,i){var o=d.templateSettings;i&&De(e,n,i)&&(n=l),e=ce(e),n=Qi({},n,o,tc);var y,S,c=Qi({},n.imports,o.imports,tc),f=Te(c),m=pr(c,f),I=0,P=n.interpolate||bn,R="__p += '",q=et((n.escape||bn).source+"|"+P.source+"|"+(P===Zr?_o:bn).source+"|"+(n.evaluate||bn).source+"|$","g"),G="//# sourceURL="+(ue.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++No+"]")+"\n";e.replace(q,function(V,re,se,Ve,Re,$e){return se||(se=Ve),R+=e.slice(I,$e).replace(jt,os),re&&(y=!0,R+="' +\n__e("+re+") +\n'"),Re&&(S=!0,R+="';\n"+Re+";\n__p += '"),se&&(R+="' +\n((__t = ("+se+")) == null ? '' : __t) +\n'"),I=$e+V.length,V}),R+="';\n";var K=ue.call(n,"variable")&&n.variable;if(K){if(po.test(K))throw new L("Invalid `variable` option passed into `_.template`")}else R="with (obj) {\n"+R+"\n}\n";R=(S?R.replace(vn,""):R).replace(yn,"$1").replace(oo,"$1;"),R="function("+(K||"obj")+") {\n"+(K?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(y?", __e = _.escape":"")+(S?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+R+"return __p\n}";var te=zc(function(){return J(f,G+"return "+R).apply(l,m)});if(te.source=R,Qs(te))throw te;return te},d.times=function Np(e,n){if((e=ee(e))<1||e>ft)return[];var i=Xe,o=Ae(e,Xe);n=Q(n),e-=Xe;for(var c=hr(o,n);++i<e;)n(i);return c},d.toFinite=Et,d.toInteger=ee,d.toLength=Zc,d.toLower=function lp(e){return ce(e).toLowerCase()},d.toNumber=ot,d.toSafeInteger=function lh(e){return e?cn(ee(e),-ft,ft):0===e?e:0},d.toString=ce,d.toUpper=function dp(e){return ce(e).toUpperCase()},d.trim=function fp(e,n,i){if((e=ce(e))&&(i||n===l))return ui(e);if(!e||!(n=Qe(n)))return e;var o=Ye(e),c=Ye(n);return Jt(o,li(o,c),di(o,c)+1).join("")},d.trimEnd=function hp(e,n,i){if((e=ce(e))&&(i||n===l))return e.slice(0,hi(e)+1);if(!e||!(n=Qe(n)))return e;var o=Ye(e);return Jt(o,0,di(o,Ye(n))+1).join("")},d.trimStart=function pp(e,n,i){if((e=ce(e))&&(i||n===l))return e.replace(Qn,"");if(!e||!(n=Qe(n)))return e;var o=Ye(e);return Jt(o,li(o,Ye(n))).join("")},d.truncate=function gp(e,n){var i=30,o="...";if(ge(n)){var c="separator"in n?n.separator:c;i="length"in n?ee(n.length):i,o="omission"in n?Qe(n.omission):o}var f=(e=ce(e)).length;if(Nt(e)){var m=Ye(e);f=m.length}if(i>=f)return e;var y=i-Ut(o);if(y<1)return o;var S=m?Jt(m,0,y).join(""):e.slice(0,y);if(c===l)return S+o;if(m&&(y+=S.length-y),Ks(c)){if(e.slice(y).search(c)){var I,P=S;for(c.global||(c=et(c.source,ce(wn.exec(c))+"g")),c.lastIndex=0;I=c.exec(P);)var R=I.index;S=S.slice(0,R===l?y:R)}}else if(e.indexOf(Qe(c),y)!=y){var q=S.lastIndexOf(c);q>-1&&(S=S.slice(0,q))}return S+o},d.unescape=function _p(e){return(e=ce(e))&&zn.test(e)?e.replace(Fr,a):e},d.uniqueId=function qp(e){var n=++$c;return ce(e)+n},d.upperCase=mp,d.upperFirst=Xs,d.each=Cc,d.eachRight=Sc,d.first=yc,ta(d,function(){var e={};return _t(d,function(n,i){ue.call(d.prototype,i)||(e[i]=n)}),e}(),{chain:!1}),d.VERSION="4.17.21",Ze(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){d[e].placeholder=d}),Ze(["drop","take"],function(e,n){oe.prototype[e]=function(i){i=i===l?1:Se(ee(i),0);var o=this.__filtered__&&!n?new oe(this):this.clone();return o.__filtered__?o.__takeCount__=Ae(i,o.__takeCount__):o.__views__.push({size:Ae(i,Xe),type:e+(o.__dir__<0?"Right":"")}),o},oe.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),Ze(["filter","map","takeWhile"],function(e,n){var i=n+1,o=1==i||3==i;oe.prototype[e]=function(c){var f=this.clone();return f.__iteratees__.push({iteratee:Q(c,3),type:i}),f.__filtered__=f.__filtered__||o,f}}),Ze(["head","last"],function(e,n){var i="take"+(n?"Right":"");oe.prototype[e]=function(){return this[i](1).value()[0]}}),Ze(["initial","tail"],function(e,n){var i="drop"+(n?"":"Right");oe.prototype[e]=function(){return this.__filtered__?new oe(this):this[i](1)}}),oe.prototype.compact=function(){return this.filter(He)},oe.prototype.find=function(e){return this.filter(e).head()},oe.prototype.findLast=function(e){return this.reverse().find(e)},oe.prototype.invokeMap=ne(function(e,n){return"function"==typeof e?new oe(this):this.map(function(i){return Cr(i,e,n)})}),oe.prototype.reject=function(e){return this.filter(Ji(Q(e)))},oe.prototype.slice=function(e,n){e=ee(e);var i=this;return i.__filtered__&&(e>0||n<0)?new oe(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),n!==l&&(i=(n=ee(n))<0?i.dropRight(-n):i.take(n-e)),i)},oe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},oe.prototype.toArray=function(){return this.take(Xe)},_t(oe.prototype,function(e,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),o=/^(?:head|last)$/.test(n),c=d[o?"take"+("last"==n?"Right":""):n],f=o||/^find/.test(n);!c||(d.prototype[n]=function(){var m=this.__wrapped__,y=o?[1]:arguments,S=m instanceof oe,I=y[0],P=S||$(m),R=function(re){var se=c.apply(d,ct([re],y));return o&&q?se[0]:se};P&&i&&"function"==typeof I&&1!=I.length&&(S=P=!1);var q=this.__chain__,G=!!this.__actions__.length,K=f&&!q,te=S&&!G;if(!f&&P){m=te?m:new oe(this);var V=e.apply(m,y);return V.__actions__.push({func:qi,args:[R],thisArg:l}),new tt(V,q)}return K&&te?e.apply(this,y):(V=this.thru(R),K?o?V.value()[0]:V.value():V)})}),Ze(["pop","push","shift","sort","splice","unshift"],function(e){var n=ze[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);d.prototype[e]=function(){var c=arguments;if(o&&!this.__chain__){var f=this.value();return n.apply($(f)?f:[],c)}return this[i](function(m){return n.apply($(m)?m:[],c)})}}),_t(oe.prototype,function(e,n){var i=d[n];if(i){var o=i.name+"";ue.call(Rn,o)||(Rn[o]=[]),Rn[o].push({name:n,func:i})}}),Rn[Ri(l,2).name]=[{name:"wrapper",func:l}],oe.prototype.clone=function gu(){var e=new oe(this.__wrapped__);return e.__actions__=Ne(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ne(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ne(this.__views__),e},oe.prototype.reverse=function _u(){if(this.__filtered__){var e=new oe(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},oe.prototype.value=function mu(){var e=this.__wrapped__.value(),n=this.__dir__,i=$(e),o=n<0,c=i?e.length:0,f=function Ol(e,n,i){for(var o=-1,c=i.length;++o<c;){var f=i[o],m=f.size;switch(f.type){case"drop":e+=m;break;case"dropRight":n-=m;break;case"take":n=Ae(n,e+m);break;case"takeRight":e=Se(e,n-m)}}return{start:e,end:n}}(0,c,this.__views__),m=f.start,y=f.end,S=y-m,I=o?y:m-1,P=this.__iteratees__,R=P.length,q=0,G=Ae(S,this.__takeCount__);if(!i||!o&&c==S&&G==S)return La(e,this.__actions__);var K=[];e:for(;S--&&q<G;){for(var te=-1,V=e[I+=n];++te<R;){var re=P[te],Ve=re.type,Re=(0,re.iteratee)(V);if(2==Ve)V=Re;else if(!Re){if(1==Ve)continue e;break e}}K[q++]=V}return K},d.prototype.at=Yd,d.prototype.chain=function zd(){return bc(this)},d.prototype.commit=function Qd(){return new tt(this.value(),this.__chain__)},d.prototype.next=function Kd(){this.__values__===l&&(this.__values__=Bc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?l:this.__values__[this.__index__++]}},d.prototype.plant=function $d(e){for(var n,i=this;i instanceof Mi;){var o=gc(i);o.__index__=0,o.__values__=l,n?c.__wrapped__=o:n=o;var c=o;i=i.__wrapped__}return c.__wrapped__=e,n},d.prototype.reverse=function Xd(){var e=this.__wrapped__;if(e instanceof oe){var n=e;return this.__actions__.length&&(n=new oe(this)),(n=n.reverse()).__actions__.push({func:qi,args:[Ws],thisArg:l}),new tt(n,this.__chain__)}return this.thru(Ws)},d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=function jd(){return La(this.__wrapped__,this.__actions__)},d.prototype.first=d.prototype.head,_r&&(d.prototype[_r]=function Vd(){return this}),d}();Ce._=v,(D=function(){return v}.call(Y,k,Y,Fe))!==l&&(Fe.exports=D)}.call(this)},2754:(Fe,Y,k)=>{"use strict";Y.TD=void 0;var l=k(4354);Object.defineProperty(Y,"TD",{enumerable:!0,get:function(){return l.requestMediaPermissions}})},4354:function(Fe,Y,k){"use strict";var D=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Y,"__esModule",{value:!0}),Y.requestVideoPermissions=Y.requestAudioPermissions=Y.requestMediaPermissions=Y.MediaPermissionsErrorType=void 0;const l=D(k(7230));var w,h;(h=w=Y.MediaPermissionsErrorType||(Y.MediaPermissionsErrorType={})).SystemPermissionDenied="SystemPermissionDenied",h.UserPermissionDenied="UserPermissionDenied",h.CouldNotStartVideoSource="CouldNotStartVideoSource",h.Generic="Generic",Y.requestMediaPermissions=h=>new Promise((_,N)=>{navigator.mediaDevices.getUserMedia(h??{audio:!0,video:!0}).then(A=>{A.getTracks().forEach(x=>{x.stop()}),_(!0)}).catch(A=>{const O=l.default.getParser(window.navigator.userAgent).getBrowserName(),M=A.name,b=A.message;let Z=w.Generic;"Chrome"===O?"NotAllowedError"===M?"Permission denied by system"===b?Z=w.SystemPermissionDenied:"Permission denied"===b&&(Z=w.UserPermissionDenied):"NotReadableError"===M&&(Z=w.CouldNotStartVideoSource):"Safari"===O?"NotAllowedError"===M&&(Z=w.UserPermissionDenied):"Microsoft Edge"===O?"NotAllowedError"===M?Z=w.UserPermissionDenied:"NotReadableError"===M&&(Z=w.CouldNotStartVideoSource):"Firefox"===O&&("NotFoundError"===M||"NotReadableError"===M?Z=w.SystemPermissionDenied:"NotAllowedError"===M?Z=w.UserPermissionDenied:"AbortError"===M&&(Z=w.CouldNotStartVideoSource)),N({type:Z,name:A.name,message:A.message})})}),Y.requestAudioPermissions=()=>(0,Y.requestMediaPermissions)({audio:!0,video:!1}),Y.requestVideoPermissions=()=>(0,Y.requestMediaPermissions)({audio:!1,video:!0})},5439:Fe=>{window,Fe.exports=function(Y){var k={};function D(l){if(k[l])return k[l].exports;var w=k[l]={i:l,l:!1,exports:{}};return Y[l].call(w.exports,w,w.exports,D),w.l=!0,w.exports}return D.m=Y,D.c=k,D.d=function(l,w,E){D.o(l,w)||Object.defineProperty(l,w,{enumerable:!0,get:E})},D.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},D.t=function(l,w){if(1&w&&(l=D(l)),8&w||4&w&&"object"==typeof l&&l&&l.__esModule)return l;var E=Object.create(null);if(D.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:l}),2&w&&"string"!=typeof l)for(var B in l)D.d(E,B,function(t){return l[t]}.bind(null,B));return E},D.n=function(l){var w=l&&l.__esModule?function(){return l.default}:function(){return l};return D.d(w,"a",w),w},D.o=function(l,w){return Object.prototype.hasOwnProperty.call(l,w)},D.p="/dist/",D(D.s=1)}([function(Y,k,D){"use strict";var l=this&&this.__awaiter||function(E,B,t,h){return new(t||(t=Promise))(function(_,N){function A(M){try{O(h.next(M))}catch(b){N(b)}}function x(M){try{O(h.throw(M))}catch(b){N(b)}}function O(M){var b;M.done?_(M.value):(b=M.value,b instanceof t?b:new t(function(Z){Z(b)})).then(A,x)}O((h=h.apply(E,B||[])).next())})},w=this&&this.__generator||function(E,B){var t,h,_,N,A={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return N={next:x(0),throw:x(1),return:x(2)},"function"==typeof Symbol&&(N[Symbol.iterator]=function(){return this}),N;function x(O){return function(M){return function(b){if(t)throw new TypeError("Generator is already executing.");for(;N&&(N=0,b[0]&&(A=0)),A;)try{if(t=1,h&&(_=2&b[0]?h.return:b[0]?h.throw||((_=h.return)&&_.call(h),0):h.next)&&!(_=_.call(h,b[1])).done)return _;switch(h=0,_&&(b=[2&b[0],_.value]),b[0]){case 0:case 1:_=b;break;case 4:return A.label++,{value:b[1],done:!1};case 5:A.label++,h=b[1],b=[0];continue;case 7:b=A.ops.pop(),A.trys.pop();continue;default:if(!((_=(_=A.trys).length>0&&_[_.length-1])||6!==b[0]&&2!==b[0])){A=0;continue}if(3===b[0]&&(!_||b[1]>_[0]&&b[1]<_[3])){A.label=b[1];break}if(6===b[0]&&A.label<_[1]){A.label=_[1],_=b;break}if(_&&A.label<_[2]){A.label=_[2],A.ops.push(b);break}_[2]&&A.ops.pop(),A.trys.pop();continue}b=B.call(E,A)}catch(Z){b=[6,Z],h=0}finally{t=_=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([O,M])}}};Object.defineProperty(k,"__esModule",{value:!0}),k.file2b64=void 0,k.file2b64=function(E){return l(this,void 0,void 0,function(){var B,t;return w(this,function(h){return B=new FileReader,t=new Promise(function(_,N){B.addEventListener("load",function(){var A,x=null===(A=B.result)||void 0===A?void 0:A.toString();x?_(x):N("could not convert file to base64")},!1)}),B.readAsDataURL(E),[2,t]})})}},function(Y,k,D){"use strict";var l=this&&this.__awaiter||function(A,x,O,M){return new(O||(O=Promise))(function(b,Z){function U(H){try{X(M.next(H))}catch(W){Z(W)}}function z(H){try{X(M.throw(H))}catch(W){Z(W)}}function X(H){var W;H.done?b(H.value):(W=H.value,W instanceof O?W:new O(function(ae){ae(W)})).then(U,z)}X((M=M.apply(A,x||[])).next())})},w=this&&this.__generator||function(A,x){var O,M,b,Z,U={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return Z={next:z(0),throw:z(1),return:z(2)},"function"==typeof Symbol&&(Z[Symbol.iterator]=function(){return this}),Z;function z(X){return function(H){return function(W){if(O)throw new TypeError("Generator is already executing.");for(;Z&&(Z=0,W[0]&&(U=0)),U;)try{if(O=1,M&&(b=2&W[0]?M.return:W[0]?M.throw||((b=M.return)&&b.call(M),0):M.next)&&!(b=b.call(M,W[1])).done)return b;switch(M=0,b&&(W=[2&W[0],b.value]),W[0]){case 0:case 1:b=W;break;case 4:return U.label++,{value:W[1],done:!1};case 5:U.label++,M=W[1],W=[0];continue;case 7:W=U.ops.pop(),U.trys.pop();continue;default:if(!((b=(b=U.trys).length>0&&b[b.length-1])||6!==W[0]&&2!==W[0])){U=0;continue}if(3===W[0]&&(!b||W[1]>b[0]&&W[1]<b[3])){U.label=W[1];break}if(6===W[0]&&U.label<b[1]){U.label=b[1],b=W;break}if(b&&U.label<b[2]){U.label=b[2],U.ops.push(W);break}b[2]&&U.ops.pop(),U.trys.pop();continue}W=x.call(A,U)}catch(ae){W=[6,ae],M=0}finally{O=b=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([X,H])}}};Object.defineProperty(k,"__esModule",{value:!0}),k.imageCompressor=void 0;var E=D(2),B=D(3),t=D(0),h=D(4),_=D(5),N=function(){function A(x,O){var M=this;this.quill=x,this.options=O||{};var b=!!O.debug;this.Logger=new _.ConsoleLogger(b,!!O.suppressErrorLogging),(0,B.warnAboutOptions)(O,this.Logger),this.imageDrop=new E.ImageDrop(x,function(z){return l(M,void 0,void 0,function(){var X;return w(this,function(H){switch(H.label){case 0:return this.Logger.log("onImageDrop",{dataUrl:z}),[4,this.downscaleImageFromUrl(z)];case 1:return X=H.sent(),this.insertToEditor(X,A.b64toBlob(X)),[2]}})})},this.Logger),this.Logger.log("fileChanged",{options:O,quill:x,debug:b});var U=this.quill.getModule("toolbar");U?U.addHandler("image",function(){return M.selectLocalImage()}):this.Logger.error("Quill toolbar module not found! need { toolbar: // options } in Quill.modules for image icon to sit in")}return A.b64toBlob=function(x){for(var O=atob(x.split(",")[1]),M=x.slice(5).split(";")[0],b=new ArrayBuffer(O.length),Z=new Uint8Array(b),U=0;U<O.length;U++)Z[U]=O.charCodeAt(U);return new Blob([b],{type:M})},A.prototype.selectLocalImage=function(x){var O=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=function(){return O.fileChanged().then(function(){return x&&x()})},document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){O.fileHolder&&document.body.removeChild(O.fileHolder)})},A.prototype.fileChanged=function(x){var O;return l(this,void 0,void 0,function(){var M,b,Z,U;return w(this,function(z){switch(z.label){case 0:return(M=x||(null===(O=this.fileHolder)||void 0===O?void 0:O.files))&&M.length?(this.Logger.log("fileChanged",{file:b=M[0]}),b?[4,(0,t.file2b64)(b)]:[2]):[2];case 1:return Z=z.sent(),[4,this.downscaleImageFromUrl(Z)];case 2:return U=z.sent(),this.insertToEditor(U,A.b64toBlob(U)),[2]}})})},A.prototype.downscaleImageFromUrl=function(x){return l(this,void 0,void 0,function(){var O;return w(this,function(M){switch(M.label){case 0:return[4,(0,h.downscaleImage)(this.Logger,x,this.options.maxWidth,this.options.maxHeight,this.options.imageType,this.options.keepImageTypes,this.options.ignoreImageTypes,this.options.quality)];case 1:return O=M.sent(),this.Logger.log("downscaleImageFromUrl",{dataUrl:x,dataUrlCompressed:O}),[2,O]}})})},A.prototype.insertToEditor=function(x,O){if(this.options.insertIntoEditor)this.options.insertIntoEditor(x,O);else{this.Logger.log("insertToEditor",{url:x}),this.range=this.quill.getSelection();var M=this.range;if(!M)return;this.logFileSize(x),this.quill.insertEmbed(M.index,"image","".concat(x),"user"),M.index++,this.quill.setSelection(M,"api")}},A.prototype.logFileSize=function(x){var O=(Math.round(3*(x.length-22)/4)/1024).toFixed(0);this.Logger.log("estimated img size: "+O+" kb")},A}();k.imageCompressor=N,window.imageCompressor=N,k.default=N},function(Y,k,D){"use strict";var l=this&&this.__awaiter||function(N,A,x,O){return new(x||(x=Promise))(function(M,b){function Z(X){try{z(O.next(X))}catch(H){b(H)}}function U(X){try{z(O.throw(X))}catch(H){b(H)}}function z(X){var H;X.done?M(X.value):(H=X.value,H instanceof x?H:new x(function(W){W(H)})).then(Z,U)}z((O=O.apply(N,A||[])).next())})},w=this&&this.__generator||function(N,A){var x,O,M,b,Z={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return b={next:U(0),throw:U(1),return:U(2)},"function"==typeof Symbol&&(b[Symbol.iterator]=function(){return this}),b;function U(z){return function(X){return function(H){if(x)throw new TypeError("Generator is already executing.");for(;b&&(b=0,H[0]&&(Z=0)),Z;)try{if(x=1,O&&(M=2&H[0]?O.return:H[0]?O.throw||((M=O.return)&&M.call(O),0):O.next)&&!(M=M.call(O,H[1])).done)return M;switch(O=0,M&&(H=[2&H[0],M.value]),H[0]){case 0:case 1:M=H;break;case 4:return Z.label++,{value:H[1],done:!1};case 5:Z.label++,O=H[1],H=[0];continue;case 7:H=Z.ops.pop(),Z.trys.pop();continue;default:if(!((M=(M=Z.trys).length>0&&M[M.length-1])||6!==H[0]&&2!==H[0])){Z=0;continue}if(3===H[0]&&(!M||H[1]>M[0]&&H[1]<M[3])){Z.label=H[1];break}if(6===H[0]&&Z.label<M[1]){Z.label=M[1],M=H;break}if(M&&Z.label<M[2]){Z.label=M[2],Z.ops.push(H);break}M[2]&&Z.ops.pop(),Z.trys.pop();continue}H=A.call(N,Z)}catch(W){H=[6,W],O=0}finally{x=M=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([z,X])}}};Object.defineProperty(k,"__esModule",{value:!0}),k.ImageDrop=void 0;var E=D(0),B=function(){function N(A,x,O){var M=this;this.quill=A,this.onNewDataUrl=x,this.logger=O,this.quill.root.addEventListener("drop",function(b){return M.handleDrop(b)},!1),this.quill.root.addEventListener("paste",function(b){return M.handlePaste(b)},!1)}return N.prototype.handleDrop=function(A){return l(this,void 0,void 0,function(){var x,O,M,b,Z,U,z;return w(this,function(X){switch(X.label){case 0:return A.preventDefault(),document.caretRangeFromPoint&&(x=document.getSelection(),O=document.caretRangeFromPoint(A.clientX,A.clientY),x&&O&&x.setBaseAndExtent(O.startContainer,O.startOffset,O.startContainer,O.startOffset)),[4,h(A)];case 1:return M=X.sent(),b=Array.from(M||[]).filter(function(H){return _(H.type)}),(Z=b?.[0])?[4,(0,E.file2b64)(Z)]:[3,3];case 2:return z=X.sent(),this.logger.log("handleNewImageFiles",{evt:A,files:M,filesFiltered:b,firstImage:Z,base64ImageSrc:z}),this.onNewDataUrl(z),[2];case 3:return[4,t(A)];case 4:return(U=X.sent())?[4,(0,E.file2b64)(U)]:[3,6];case 5:return z=X.sent(),this.logger.log("handleNewImageFiles",{evt:A,blob:U,base64ImageSrc:z}),this.onNewDataUrl(z),[2];case 6:return[2]}})})},N.prototype.handlePaste=function(A){var x,O;return l(this,void 0,void 0,function(){var M,b,Z,U;return w(this,function(z){switch(z.label){case 0:return M=Array.from((null===(x=A?.clipboardData)||void 0===x?void 0:x.items)||[]),this.logger.log("handlePaste",{files:M,evt:A}),b=M.filter(function(X){return _(X.type)}),this.logger.log("handlePaste",{images:b,evt:A}),b.length?b.filter(function(X){return"text/html"!==X.type}).length?(A.preventDefault(),(Z=null===(O=b.pop())||void 0===O?void 0:O.getAsFile())?[4,(0,E.file2b64)(Z)]:[2]):(this.logger.log("handlePaste also detected html"),[2]):[2];case 1:return U=z.sent(),this.logger.log("handleNewImageFiles",{base64ImageSrc:U}),this.onNewDataUrl(U),[2]}})})},N}();function t(N){var A;return l(this,void 0,void 0,function(){var x;return w(this,function(O){switch(O.label){case 0:return(x=null===(A=N.dataTransfer)||void 0===A?void 0:A.getData("URL"))?[4,fetch(x)]:[3,3];case 1:return[4,O.sent().blob()];case 2:return[2,O.sent()];case 3:return[2]}})})}function h(N){var A;return l(this,void 0,void 0,function(){return w(this,function(x){return[2,null===(A=N?.dataTransfer)||void 0===A?void 0:A.files]})})}function _(N){return!!N.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)/i)}k.ImageDrop=B},function(Y,k,D){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.warnAboutOptions=void 0,k.warnAboutOptions=function(l,w){l.maxWidth=l.maxWidth||1e3,l.maxHeight=l.maxHeight||1e3,l.maxWidth&&"number"!=typeof l.maxWidth&&(w.warn("[config error] 'maxWidth' is required to be a \"number\" (in pixels), \nreceived: ".concat(l.maxWidth,"\n-> using default 1000")),l.maxWidth=1e3),l.maxHeight&&"number"!=typeof l.maxHeight&&(w.warn("[config error] 'maxHeight' is required to be a \"number\" (in pixels), \nreceived: ".concat(l.maxHeight,"\n-> using default 1000")),l.maxHeight=1e3),l.quality&&"number"!=typeof l.quality&&(w.warn("quill.imageCompressor: [config error] 'quality' is required to be a \"number\", \nreceived: ".concat(l.quality,"\n-> using default 0.7")),l.quality=.7),!l.imageType||"string"==typeof l.imageType&&l.imageType.startsWith("image/")||(w.warn('quill.imageCompressor: [config error] \'imageType\' is required be in the form of "image/png" or "image/jpeg" etc ..., \nreceived: '.concat(l.imageType,"\n-> using default image/jpeg")),l.imageType="image/jpeg"),l.keepImageTypes||(l.keepImageTypes=[]),l.keepImageTypes&&!Array.isArray(l.keepImageTypes)&&(w.warn("quill.imageCompressor: [config error] 'keepImageTypes' is required to be a \"array\", received: ".concat(l.keepImageTypes," -> using default []")),l.keepImageTypes=[]),l.ignoreImageTypes||(l.ignoreImageTypes=[]),l.ignoreImageTypes&&!Array.isArray(l.ignoreImageTypes)&&(w.warn("quill.imageCompressor: [config error] 'ignoreImageTypes' is required to be a \"array\", received: ".concat(l.ignoreImageTypes," -> using default []")),l.ignoreImageTypes=[]),l.insertIntoEditor&&"function"!=typeof l.insertIntoEditor&&(w.warn("quill.imageCompressor: [config error] 'insertIntoEditor' is required to be a \"function\", received: ".concat(l.insertIntoEditor," -> using default undefined")),l.insertIntoEditor=void 0)}},function(Y,k,D){"use strict";var l=this&&this.__awaiter||function(E,B,t,h){return new(t||(t=Promise))(function(_,N){function A(M){try{O(h.next(M))}catch(b){N(b)}}function x(M){try{O(h.throw(M))}catch(b){N(b)}}function O(M){var b;M.done?_(M.value):(b=M.value,b instanceof t?b:new t(function(Z){Z(b)})).then(A,x)}O((h=h.apply(E,B||[])).next())})},w=this&&this.__generator||function(E,B){var t,h,_,N,A={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return N={next:x(0),throw:x(1),return:x(2)},"function"==typeof Symbol&&(N[Symbol.iterator]=function(){return this}),N;function x(O){return function(M){return function(b){if(t)throw new TypeError("Generator is already executing.");for(;N&&(N=0,b[0]&&(A=0)),A;)try{if(t=1,h&&(_=2&b[0]?h.return:b[0]?h.throw||((_=h.return)&&_.call(h),0):h.next)&&!(_=_.call(h,b[1])).done)return _;switch(h=0,_&&(b=[2&b[0],_.value]),b[0]){case 0:case 1:_=b;break;case 4:return A.label++,{value:b[1],done:!1};case 5:A.label++,h=b[1],b=[0];continue;case 7:b=A.ops.pop(),A.trys.pop();continue;default:if(!((_=(_=A.trys).length>0&&_[_.length-1])||6!==b[0]&&2!==b[0])){A=0;continue}if(3===b[0]&&(!_||b[1]>_[0]&&b[1]<_[3])){A.label=b[1];break}if(6===b[0]&&A.label<_[1]){A.label=_[1],_=b;break}if(_&&A.label<_[2]){A.label=_[2],A.ops.push(b);break}_[2]&&A.ops.pop(),A.trys.pop();continue}b=B.call(E,A)}catch(Z){b=[6,Z],h=0}finally{t=_=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([O,M])}}};Object.defineProperty(k,"__esModule",{value:!0}),k.downscaleImage=void 0,k.downscaleImage=function(E,B,t,h,_,N,A,x){return l(this,void 0,void 0,function(){var O,M,b,Z,U,z,X,H;return w(this,function(W){switch(W.label){case 0:return O=B.split(";")[0].split(":")[1],_=_||"image/jpeg",x=x||.7,(M=new Image).src=B,[4,new Promise(function(ae){M.onload=function(){ae()}})];case 1:return W.sent(),b=function(ae,we,be,le){if(be&&le&&ae<=be&&we<=le)return[ae,we];if(be&&ae>be){var de=be,ve=Math.floor(we/ae*de);if(le&&ve>le){var Pt=le;return[Math.floor(ae/we*Pt),Pt]}return[de,ve]}return le&&we>le?(ve=le,[de=Math.floor(ae/we*ve),ve]):[we,ae]}(M.width,M.height,t,h),Z=b[0],U=b[1],(z=document.createElement("canvas")).width=Z,z.height=U,X=z.getContext("2d"),"image/jpeg"===_&&(X.fillStyle="#FFFFFF",X.fillRect(0,0,M.width,M.height)),A?.includes(O)?[2,B]:(N?.includes(O)&&(_=O),X.drawImage(M,0,0,Z,U),H=z.toDataURL(_,x),E.log("downscaling image...",{args:{dataUrl:B,maxWidth:t,maxHeight:h,imageType:_,ignoreImageTypes:A,keepImageTypes:N,imageQuality:x},newHeight:U,newWidth:Z}),[2,H])}})})}},function(Y,k,D){"use strict";Object.defineProperty(k,"__esModule",{value:!0}),k.ConsoleLogger=void 0;var l=function(){function w(E,B){this.debug=E,this.suppressErrorLogging=B}return w.prototype.prefixString=function(){return"</> quill-image-compress: "},Object.defineProperty(w.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"error",{get:function(){return this.suppressErrorLogging?function(){}:console.error.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"warn",{get:function(){return this.suppressErrorLogging?function(){}:console.warn.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),w}();k.ConsoleLogger=l}])}}]);
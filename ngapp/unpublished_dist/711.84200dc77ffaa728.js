(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[711],{3711:(Fo,yn,S)=>{"use strict";S.r(yn),S.d(yn,{AdminModule:()=>jf});var L=S(6895),Q=S(4006),Ce=S(1390),De=S(8977),e=S(4650);let Tn=(()=>{class n{constructor(t){this.ts=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(De.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-dashboard"]],decls:21,vars:3,consts:[[1,"content"],[1,"adminTitle"],[1,"buttonContainer"],[1,"buttonRow"],["routerLink","teachers",1,"adminBtnContainer"],["routerLink","find-user",1,"adminBtnContainer"],[1,"adminBtnContainer"],["href","https://analytics.google.com/analytics/web/?authuser=2#/report-home/a178889778w247370276p229672953","target","_blank",1,"adminBtnContainer",2,"text-decoration","none"],["routerLink","database-stats",1,"adminBtnContainer"],["routerLink","profile-stats",1,"adminBtnContainer"],["routerLink","feature-stats",1,"adminBtnContainer"],["routerLink","add-content",1,"adminBtnContainer"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"div",5),e._uU(8),e.qZA(),e.TgZ(9,"div",6)(10,"a",7),e._uU(11," Google Analytics "),e.qZA()()(),e.TgZ(12,"div",3)(13,"div",8),e._uU(14," DB Stats "),e.qZA(),e.TgZ(15,"div",9),e._uU(16," Profile Stats "),e.qZA(),e.TgZ(17,"div",10),e._uU(18," Feature Stats "),e.qZA(),e.TgZ(19,"div",11),e._uU(20," Add Content "),e.qZA()()()()),2&t&&(e.xp6(2),e.hij(" ",a.ts.l.admin_dashboard," "),e.xp6(4),e.hij(" ",a.ts.l.teachers," "),e.xp6(2),e.hij(" ",a.ts.l.find_user," "))},dependencies:[Ce.rH],styles:[".content[_ngcontent-%COMP%]{width:90%;margin-left:5%;height:72vh;background-color:#fff;border-radius:5px;box-shadow:-1px 5px 32px 10px #0003}.adminTitle[_ngcontent-%COMP%]{font-size:20pt;height:6vh;display:flex;align-items:center;justify-content:center;color:#fff;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0}.buttonContainer[_ngcontent-%COMP%]{padding:10%;padding-top:25vh;align-items:center;justify-content:center;overflow:auto;flex-wrap:wrap}.buttonRow[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:5px;flex-wrap:wrap}.adminBtnContainer[_ngcontent-%COMP%]{width:150px;height:80px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:16pt;background-color:var(--scealai-med-brown);margin:5px;border-radius:5px}.adminBtnContainer[_ngcontent-%COMP%]:hover{color:var(--orange-text);background-color:var(--scealai-med-brown-hover);transition:color,background-color,.5s;cursor:pointer}@media (max-width: 550px){.content[_ngcontent-%COMP%]{flex-direction:column;flex-wrap:nowrap;padding-left:5%;padding-right:5%;margin-top:0vh}.adminBtnContainer[_ngcontent-%COMP%]{width:90%;height:80px;padding:10px}}"]}),n})();var Cn=S(1042),qe=S(4186),ft=S(4633),Ve=S(529),Sn=S(5412);function wt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",13),e._uU(1),e.TgZ(2,"i",14),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.openDeleteCodeDialog(r.code))}),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function wn(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.goToUser(r._id))}),e._uU(1),e.qZA()}if(2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.username," ")}}let li=(()=>{class n{constructor(t,a,o,r){this.http=t,this.router=a,this.ts=o,this.dialog=r,this.copiedTextClass="hidden",this.baseUrl=qe.Z.baseurl}ngOnInit(){this.getActiveTeacherCodes(),this.getTeachers()}generateCode(){this.teacherCode=(0,Cn.Z)(),this.http.post(this.baseUrl+"teacherCode/create",{code:this.teacherCode}).subscribe(a=>{this.getActiveTeacherCodes()})}getActiveTeacherCodes(){this.http.get(this.baseUrl+"teacherCode/activeCodes").subscribe(t=>{this.activeTeacherCodes=t})}getTeachers(){this.http.get(this.baseUrl+"user/teachers").subscribe(t=>{this.teachers=t})}deleteTeacherCode(){null!=this.codeToDelete&&this.http.get(this.baseUrl+"teacherCode/delete/"+this.codeToDelete).subscribe(t=>{this.getActiveTeacherCodes()})}copyToClipboard(){document.addEventListener("copy",t=>{t.clipboardData.setData("text/plain",this.teacherCode.toString()),t.preventDefault(),document.removeEventListener("copy",null)}),document.execCommand("copy"),this.copiedTextClass="visible",setTimeout(()=>this.copiedTextClass="hiddenFade",1e3)}openDeleteCodeDialog(t){this.codeToDelete=t,this.dialogRef=this.dialog.open(ft.p,{data:{title:this.ts.l.sure_you_want_to_delete_code,confirmText:this.ts.l.delete,cancelText:this.ts.l.cancel},width:"50%"}),this.dialogRef.afterClosed().subscribe(a=>{this.dialogRef=void 0,a&&this.deleteTeacherCode()})}goToUser(t){this.router.navigateByUrl("admin/user/"+t.toString())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ve.eN),e.Y36(Ce.F0),e.Y36(De.D),e.Y36(Sn.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-teachers"]],decls:23,vars:11,consts:[[1,"adminContent"],[1,"generateCodeTitle"],[1,"teacherCodeTitle"],[1,"teacherCodeButton",3,"click"],[1,"teacherCodeDisplay"],["readonly","",1,"teacherCodeTextarea"],[1,"far","fa-copy","copyIcon",3,"click"],[1,"teacherAccountsContainer"],[1,"teacherAccountsDisplay"],[1,"teacherAccountsHeader"],[1,"teacherAccountsBody"],["class","activeTeacherCodeContainer",4,"ngFor","ngForOf"],["class","activeTeacherCodeContainer whiteBtn",3,"click",4,"ngFor","ngForOf"],[1,"activeTeacherCodeContainer"],["aria-hidden","true",1,"fa","fa-times","greenBtn",3,"click"],[1,"activeTeacherCodeContainer","whiteBtn",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.NdJ("click",function(){return a.generateCode()}),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"textarea",5),e._uU(8),e.qZA(),e.TgZ(9,"i",6),e.NdJ("click",function(){return a.copyToClipboard()}),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA()(),e.TgZ(12,"div",7)(13,"div",8)(14,"div",9),e._uU(15),e.qZA(),e.TgZ(16,"div",10),e.YNc(17,wt,3,1,"div",11),e.qZA()(),e.TgZ(18,"div",8)(19,"div",9),e._uU(20),e.qZA(),e.TgZ(21,"div",10),e.YNc(22,wn,2,1,"div",12),e.qZA()()()()),2&t&&(e.xp6(3),e.Oqu(a.ts.l.teacher_account_code),e.xp6(2),e.Oqu(a.ts.l.generate),e.xp6(3),e.Oqu(a.teacherCode),e.xp6(2),e.Gre("",a.copiedTextClass," copiedText"),e.xp6(1),e.hij("",a.ts.l.copied,"!"),e.xp6(4),e.hij(" ",a.ts.l.active_account_codes," "),e.xp6(2),e.Q6J("ngForOf",a.activeTeacherCodes),e.xp6(3),e.hij(" ",a.ts.l.teacher_accounts," "),e.xp6(2),e.Q6J("ngForOf",a.teachers))},dependencies:[L.sg],styles:[".adminContent[_ngcontent-%COMP%]{flex-direction:column}.generateCodeTitle[_ngcontent-%COMP%]{font-size:14pt;display:flex;justify-content:center}.teacherCodeTitle[_ngcontent-%COMP%]{padding:5px}.teacherCodeButton[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;padding:5px 10px;margin-left:10px;border-radius:5px}.teacherCodeButton[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--scealai-dark-green)}.teacherCodeDisplay[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:2vh}.teacherCodeTextarea[_ngcontent-%COMP%]{width:40%;height:30px;font-size:12pt;resize:none;background-color:#d1d1d1;border:none;border-radius:5px 0 0 5px}.copyIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;width:30px;height:30px;padding:4px;font-size:16pt;border-radius:0 5px 5px 0}.copyIcon[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--scealai-dark-green)}.copiedText[_ngcontent-%COMP%]{margin-left:10px;color:var(--scealai-green)}.teacherAccountsContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:80%;margin-left:10%}.teacherAccountsDisplay[_ngcontent-%COMP%]{margin-top:4vh;width:40%;height:45vh;background-color:#d1d1d1;border-radius:0 0 5px 5px}.teacherAccountsHeader[_ngcontent-%COMP%]{font-size:14pt;height:4vh;display:flex;align-items:center;justify-content:center;color:#fff;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0}.teacherAccountsBody[_ngcontent-%COMP%]{padding:10px 10px 0;text-align:left;overflow:auto;height:40vh}.activeTeacherCodeContainer[_ngcontent-%COMP%]{background-color:#fff;padding:5px;border-radius:5px;margin-bottom:10px;font-size:11pt}.greenBtn[_ngcontent-%COMP%]{color:var(--scealai-dark-green);font-size:12pt;padding:5px;float:right;margin-top:-2px}.greenBtn[_ngcontent-%COMP%]:hover{cursor:pointer;font-size:14pt;padding:4px}.whiteBtn[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--scealai-med-brown-hover);cursor:pointer}.hidden[_ngcontent-%COMP%]{visibility:hidden;opacity:0}.hiddenFade[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility .3s,opacity .3s ease-in}.visible[_ngcontent-%COMP%]{visibility:visible;opacity:1}"]}),n})();var fi=S(8443),ut=S(8386),ot=S(7579),Zt=S(8372),ke=S(1884),Vt=S(9121);function ui(n,i){if(1&n&&(e.TgZ(0,"div",5)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.ts.l.compiling_data)}}function pi(n,i){if(1&n&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA()()),2&n){const t=i.$implicit,a=e.oxw(3);e.MGl("routerLink","../user/",t._id,""),e.xp6(1),e.Q6J("searchedWord",a.searchText)("content",t.username)("classToApply","font-weight-bold")("setTitle","true"),e.xp6(1),e.hij(" ",t.username,""),e.xp6(2),e.Oqu(t.role)}}function hi(n,i){if(1&n&&(e.TgZ(0,"div",19),e.YNc(1,pi,5,7,"div",20),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.userResults)}}function rt(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1," Type above to search for users. "),e.qZA())}function gi(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1," No usernames match the string entered above. "),e.qZA())}function At(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div"),e._uU(3," Include: "),e.qZA(),e.TgZ(4,"div",8)(5,"input",9),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.roleFilter.STUDENT=o)}),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",8)(8,"input",9),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.roleFilter.TEACHER=o)}),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"div",8)(11,"input",9),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.roleFilter.ADMIN=o)}),e.qZA(),e._uU(12),e.qZA()(),e.TgZ(13,"div",10)(14,"div")(15,"div",11)(16,"label",12),e._uU(17),e.qZA(),e.TgZ(18,"div",13)(19,"input",14),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.searchModelChanged.next(o))}),e.qZA(),e.TgZ(20,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.currentPage=0,e.KtG(o.searchUsers())}),e._uU(21,"Search"),e.qZA()()()()(),e.TgZ(22,"div")(23,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.goPrevPage())}),e._uU(24,"<"),e.qZA(),e._uU(25),e.TgZ(26,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.goNextPage())}),e._uU(27,">"),e.qZA()(),e.TgZ(28,"div",16),e._uU(29),e.qZA(),e.YNc(30,hi,2,1,"div",17),e.YNc(31,rt,2,0,"div",18),e.YNc(32,gi,2,0,"div",18),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.roleFilter.STUDENT),e.xp6(1),e.hij(" ",t.ts.l.students,""),e.xp6(2),e.Q6J("ngModel",t.roleFilter.TEACHER),e.xp6(1),e.hij(" ",t.ts.l.teachers,""),e.xp6(2),e.Q6J("ngModel",t.roleFilter.ADMIN),e.xp6(1),e.hij(" ",t.ts.l.admins,""),e.xp6(5),e.Oqu(t.ts.l.search_user),e.xp6(2),e.Q6J("ngModel",t.searchText),e.xp6(6),e.AsE(" Page ",t.currentPage+1," / ",t.totalPages+1," "),e.xp6(4),e.AsE("",t.ts.l.results," (",t.resultCount,")"),e.xp6(1),e.Q6J("ngIf",t.resultCount>0),e.xp6(1),e.Q6J("ngIf",!t.searchText),e.xp6(1),e.Q6J("ngIf",t.searchText&&0==t.resultCount)}}let Pt=(()=>{class n{constructor(t,a){this.userService=t,this.ts=a,this.searchModelChanged=new ot.x,this.userCount=0,this.userResults=[],this.numberOfUsers=0,this.resultCount=0,this.currentPage=0,this.totalPages=0,this.LIMIT=20,this.roleFilter={STUDENT:!0,TEACHER:!0,ADMIN:!0},this.dataLoaded=!0}ngOnInit(){this.userService.getUserCount().subscribe(t=>this.userCount=t.total),this.searchModelChangeSubscription=this.searchModelChanged.pipe((0,Zt.b)(1e3),(0,ke.x)()).subscribe(t=>{this.searchText=t,this.currentPage=0,this.searchUsers()})}ngOnDestroy(){this.searchModelChangeSubscription.unsubscribe()}validSearchText(){try{new RegExp(this.searchText,"i")}catch(t){return console.log("Caught error:",t),alert("invalid regular expression"),!1}return!0}searchUsers(){if(!this.validSearchText())return;this.dataLoaded=!1,this.userResults=[];const t=Object.entries(this.roleFilter).filter(a=>a[1]).map(a=>a[0]);this.userService.searchUser(this.searchText,this.currentPage,this.LIMIT,t).subscribe(a=>{this.userResults=a.users.map(o=>(new fi.n).fromJSON(o)),this.resultCount=a.count,this.dataLoaded=!0,this.getPageCount()})}getPageCount(){const t=Math.ceil(this.resultCount/this.LIMIT);this.totalPages=t>0?t-1:0}goNextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.searchUsers())}goPrevPage(){this.currentPage>0&&(this.currentPage--,this.searchUsers())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ut.K),e.Y36(De.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-find-user"]],decls:6,vars:4,consts:[[1,"adminContainer"],[1,"searchContainer"],[1,"searchHeader"],["class","adminLoaderContainer",4,"ngIf"],["class","searchResultsContainer",4,"ngIf"],[1,"adminLoaderContainer"],[1,"searchResultsContainer"],[1,"filter"],[1,"checkbox-line"],["type","checkbox",3,"ngModel","ngModelChange"],["role","main"],[1,"form-group"],["for","search-text"],[2,"display","flex"],["type","text","id","search-text","aria-describedby","search-text","placeholder","Enter user to search",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"],[2,"margin","5px"],["class","resultContainer",4,"ngIf"],[4,"ngIf"],[1,"resultContainer"],["class","resultCard",3,"routerLink",4,"ngFor","ngForOf"],[1,"resultCard",3,"routerLink"],["appHighlight","",3,"searchedWord","content","classToApply","setTitle"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.YNc(4,ui,4,1,"div",3),e.YNc(5,At,33,15,"div",4),e.qZA()()),2&t&&(e.xp6(3),e.AsE(" ",a.ts.l.all_users," (",a.userCount,") "),e.xp6(1),e.Q6J("ngIf",!a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded))},dependencies:[L.sg,L.O5,Ce.rH,Q.Fj,Q.Wl,Q.JJ,Q.On,Vt.P],styles:[".adminContainer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.searchContainer[_ngcontent-%COMP%]{background:#d1d1d1;width:60%;border-radius:4px}.searchHeader[_ngcontent-%COMP%]{background:var(--scealai-dark-green);border-radius:4px 4px 0 0;font-size:14pt;color:#fff}.adminLoaderContainer[_ngcontent-%COMP%]{width:35%}.searchResultsContainer[_ngcontent-%COMP%]{padding:10px 10px 0;height:500px}.filter[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;margin-bottom:10px;font-size:12pt;display:flex;justify-content:space-between;padding:10px}.resultContainer[_ngcontent-%COMP%]{padding:10px 10px 0;box-shadow:inset 0 0 7px #000000b6;border-radius:5px;overflow-y:scroll;max-height:250px}.resultCard[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;margin-bottom:10px;font-size:12pt;display:flex;justify-content:space-between;padding:10px}.resultCard[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--scealai-med-brown-hover);cursor:pointer}"]}),n})();var fe=S(5861),ue=S(3905),Mt=S(1765),Ot=S(25),Zn=S(4687),Dt=S(8053),ce=S(9301),U=1e-6,R=Math.PI,oe=R/2,An=R/4,ye=2*R,_e=180/R,G=R/180,J=Math.abs,Ke=Math.atan,Ue=Math.atan2,k=Math.cos,pt=Math.ceil,qt=Math.exp,Ie=(Math,Math,Math.log),Xt=Math.pow,E=Math.sin,Se=Math.sign||function(n){return n>0?1:n<0?-1:0},pe=Math.sqrt,en=Math.tan;function Pn(n){return n>1?0:n<-1?R:Math.acos(n)}function Ze(n){return n>1?oe:n<-1?-oe:Math.asin(n)}function d(n){return function(i,t){var a=k(i),o=k(t),r=n(a*o);return r===1/0?[2,0]:[r*o*E(i),r*E(t)]}}function m(n){return function(i,t){var a=pe(i*i+t*t),o=n(a),r=E(o),s=k(o);return[Ue(i*r,a*s),Ze(a&&t*r/a)]}}function _(){}function y(){var i,n=[];return{point:function(t,a,o){i.push([t,a,o])},lineStart:function(){n.push(i=[])},lineEnd:_,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],i=null,t}}}function b(n,i){return J(n[0]-i[0])<U&&J(n[1]-i[1])<U}function C(n,i,t,a){this.x=n,this.z=i,this.o=t,this.e=a,this.v=!1,this.n=this.p=null}function A(n,i,t,a,o){var c,u,r=[],s=[];if(n.forEach(function(x){if(!((D=x.length-1)<=0)){var D,N,O=x[0],q=x[D];if(b(O,q)){if(!O[2]&&!q[2]){for(o.lineStart(),c=0;c<D;++c)o.point((O=x[c])[0],O[1]);return void o.lineEnd()}q[0]+=2*U}r.push(N=new C(O,x,null,!0)),s.push(N.o=new C(O,null,N,!1)),r.push(N=new C(q,x,null,!1)),s.push(N.o=new C(q,null,N,!0))}}),r.length){for(s.sort(i),M(r),M(s),c=0,u=s.length;c<u;++c)s[c].e=t=!t;for(var l,p,g=r[0];;){for(var h=g,v=!0;h.v;)if((h=h.n)===g)return;l=h.z,o.lineStart();do{if(h.v=h.o.v=!0,h.e){if(v)for(c=0,u=l.length;c<u;++c)o.point((p=l[c])[0],p[1]);else a(h.x,h.n.x,1,o);h=h.n}else{if(v)for(c=(l=h.p.z).length-1;c>=0;--c)o.point((p=l[c])[0],p[1]);else a(h.x,h.p.x,-1,o);h=h.p}l=(h=h.o).z,v=!v}while(!h.v);o.lineEnd()}}}function M(n){if(i=n.length){for(var i,o,t=0,a=n[0];++t<i;)a.n=o=n[t],o.p=a,a=o;a.n=o=n[0],o.p=a}}class P{constructor(){this._partials=new Float64Array(32),this._n=0}add(i){const t=this._partials;let a=0;for(let o=0;o<this._n&&o<32;o++){const r=t[o],s=i+r,c=Math.abs(i)<Math.abs(r)?i-(s-r):r-(s-i);c&&(t[a++]=c),i=s}return t[a]=i,this._n=a+1,this}valueOf(){const i=this._partials;let a,o,r,t=this._n,s=0;if(t>0){for(s=i[--t];t>0&&(a=s,o=i[--t],s=a+o,r=o-(s-a),!r););t>0&&(r<0&&i[t-1]<0||r>0&&i[t-1]>0)&&(o=2*r,a=s+o,o==a-s&&(s=a))}return s}}function F(n){return[Ue(n[1],n[0]),Ze(n[2])]}function ee(n){var i=n[0],t=n[1],a=k(t);return[a*k(i),a*E(i),E(t)]}function se(n,i){return n[0]*i[0]+n[1]*i[1]+n[2]*i[2]}function B(n,i){return[n[1]*i[2]-n[2]*i[1],n[2]*i[0]-n[0]*i[2],n[0]*i[1]-n[1]*i[0]]}function he(n,i){n[0]+=i[0],n[1]+=i[1],n[2]+=i[2]}function ge(n,i){return[n[0]*i,n[1]*i,n[2]*i]}function me(n){var i=pe(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=i,n[1]/=i,n[2]/=i}function ve(n){return J(n[0])<=R?n[0]:Se(n[0])*((J(n[0])+R)%ye-R)}function le(n,i){var t=ve(i),a=i[1],o=E(a),r=[E(t),-k(t),0],s=0,c=0,u=new P;1===o?a=oe+U:-1===o&&(a=-oe-U);for(var g=0,l=n.length;g<l;++g)if(h=(p=n[g]).length)for(var p,h,v=p[h-1],x=ve(v),D=v[1]/2+An,O=E(D),q=k(D),N=0;N<h;++N,x=I,O=z,q=ne,v=w){var w=p[N],I=ve(w),H=w[1]/2+An,z=E(H),ne=k(H),V=I-x,K=V>=0?1:-1,re=K*V,Y=re>R,Pe=O*z;if(u.add(Ue(Pe*K*E(re),q*ne+Pe*k(re))),s+=Y?V+K*ye:V,Y^x>=t^I>=t){var de=B(ee(v),ee(w));me(de);var ie=B(r,de);me(ie);var T=(Y^V>=0?-1:1)*Ze(ie[2]);(a>T||a===T&&(de[0]||de[1]))&&(c+=Y^V>=0?1:-1)}}return(s<-U||s<U&&u<-1e-12)^1&c}function we(n){return Array.from(function*Fe(n){for(const i of n)yield*i}(n))}function Ae(n,i,t,a){return function(o){var g,l,p,r=i(o),s=y(),c=i(s),u=!1,h={point:v,lineStart:D,lineEnd:O,polygonStart:function(){h.point=q,h.lineStart=N,h.lineEnd=w,l=[],g=[]},polygonEnd:function(){h.point=v,h.lineStart=D,h.lineEnd=O,l=we(l);var I=le(g,a);l.length?(u||(o.polygonStart(),u=!0),A(l,Ye,I,t,o)):I&&(u||(o.polygonStart(),u=!0),o.lineStart(),t(null,null,1,o),o.lineEnd()),u&&(o.polygonEnd(),u=!1),l=g=null},sphere:function(){o.polygonStart(),o.lineStart(),t(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function v(I,H){n(I,H)&&o.point(I,H)}function x(I,H){r.point(I,H)}function D(){h.point=x,r.lineStart()}function O(){h.point=v,r.lineEnd()}function q(I,H){p.push([I,H]),c.point(I,H)}function N(){c.lineStart(),p=[]}function w(){q(p[0][0],p[0][1]),c.lineEnd();var z,V,K,re,I=c.clean(),H=s.result(),ne=H.length;if(p.pop(),g.push(p),p=null,ne){if(1&I){if((V=(K=H[0]).length-1)>0){for(u||(o.polygonStart(),u=!0),o.lineStart(),z=0;z<V;++z)o.point((re=K[z])[0],re[1]);o.lineEnd()}return}ne>1&&2&I&&H.push(H.pop().concat(H.shift())),l.push(H.filter(Re))}}return h}}function Re(n){return n.length>1}function Ye(n,i){return((n=n.x)[0]<0?n[1]-oe-U:oe-n[1])-((i=i.x)[0]<0?i[1]-oe-U:oe-i[1])}const Be=Ae(function(){return!0},function Ut(n){var o,i=NaN,t=NaN,a=NaN;return{lineStart:function(){n.lineStart(),o=1},point:function(r,s){var c=r>0?R:-R,u=J(r-i);J(u-R)<U?(n.point(i,t=(t+s)/2>0?oe:-oe),n.point(a,t),n.lineEnd(),n.lineStart(),n.point(c,t),n.point(r,t),o=0):a!==c&&u>=R&&(J(i-a)<U&&(i-=a*U),J(r-c)<U&&(r-=c*U),t=function tn(n,i,t,a){var o,r,s=E(n-t);return J(s)>U?Ke((E(i)*(r=k(a))*E(t)-E(a)*(o=k(i))*E(n))/(o*r*s)):(i+a)/2}(i,t,r,s),n.point(a,t),n.lineEnd(),n.lineStart(),n.point(c,t),o=0),n.point(i=r,t=s),a=c},lineEnd:function(){n.lineEnd(),i=t=NaN},clean:function(){return 2-o}}},function ht(n,i,t,a){var o;if(null==n)a.point(-R,o=t*oe),a.point(0,o),a.point(R,o),a.point(R,0),a.point(R,-o),a.point(0,-o),a.point(-R,-o),a.point(-R,0),a.point(-R,o);else if(J(n[0]-i[0])>U){var r=n[0]<i[0]?R:-R;a.point(-r,o=t*r/2),a.point(0,o),a.point(r,o)}else a.point(i[0],i[1])},[-R,-oe]);function It(n,i){(i=ee(i))[0]-=n,me(i);var t=Pn(-i[1]);return((-i[2]<0?-t:t)+ye-U)%ye}function Nt(n){var i=k(n),t=6*G,a=i>0,o=J(i)>U;function s(l,p){return k(l)*k(p)>i}function u(l,p,h){var D=[1,0,0],O=B(ee(l),ee(p)),q=se(O,O),N=O[0],w=q-N*N;if(!w)return!h&&l;var I=i*q/w,H=-i*N/w,z=B(D,O),ne=ge(D,I);he(ne,ge(O,H));var K=z,re=se(ne,K),Y=se(K,K),Pe=re*re-Y*(se(ne,ne)-1);if(!(Pe<0)){var de=pe(Pe),ie=ge(K,(-re-de)/Y);if(he(ie,ne),ie=F(ie),!h)return ie;var Le,T=l[0],$=p[0],xe=l[1],Me=p[1];$<T&&(Le=T,T=$,$=Le);var xn=$-T,it=J(xn-R)<U;if(!it&&Me<xe&&(Le=xe,xe=Me,Me=Le),it||xn<U?it?xe+Me>0^ie[1]<(J(ie[0]-T)<U?xe:Me):xe<=ie[1]&&ie[1]<=Me:xn>R^(T<=ie[0]&&ie[0]<=$)){var at=ge(K,(-re+de)/Y);return he(at,ne),[ie,F(at)]}}}function g(l,p){var h=a?n:R-n,v=0;return l<-h?v|=1:l>h&&(v|=2),p<-h?v|=4:p>h&&(v|=8),v}return Ae(s,function c(l){var p,h,v,x,D;return{lineStart:function(){x=v=!1,D=1},point:function(O,q){var w,N=[O,q],I=s(O,q),H=a?I?0:g(O,q):I?g(O+(O<0?R:-R),q):0;if(!p&&(x=v=I)&&l.lineStart(),I!==v&&(!(w=u(p,N))||b(p,w)||b(N,w))&&(N[2]=1),I!==v)D=0,I?(l.lineStart(),w=u(N,p),l.point(w[0],w[1])):(w=u(p,N),l.point(w[0],w[1],2),l.lineEnd()),p=w;else if(o&&p&&a^I){var z;!(H&h)&&(z=u(N,p,!0))&&(D=0,a?(l.lineStart(),l.point(z[0][0],z[0][1]),l.point(z[1][0],z[1][1]),l.lineEnd()):(l.point(z[1][0],z[1][1]),l.lineEnd(),l.lineStart(),l.point(z[0][0],z[0][1],3)))}I&&(!p||!b(p,N))&&l.point(N[0],N[1]),p=N,v=I,h=H},lineEnd:function(){v&&l.lineEnd(),p=null},clean:function(){return D|(x&&v)<<1}}},function r(l,p,h,v){!function Je(n,i,t,a,o,r){if(t){var s=k(i),c=E(i),u=a*t;null==o?(o=i+a*ye,r=i-u/2):(o=It(s,o),r=It(s,r),(a>0?o<r:o>r)&&(o+=a*ye));for(var g,l=o;a>0?l>r:l<r;l-=u)g=F([s,-c*k(l),-c*E(l)]),n.point(g[0],g[1])}}(v,n,t,h,l,p)},a?[0,-n]:[-R,n-R])}var et=1e9,Lt=-et;function Ro(n,i,t,a){function o(g,l){return n<=g&&g<=t&&i<=l&&l<=a}function r(g,l,p,h){var v=0,x=0;if(null==g||(v=s(g,p))!==(x=s(l,p))||u(g,l)<0^p>0)do{h.point(0===v||3===v?n:t,v>1?a:i)}while((v=(v+p+4)%4)!==x);else h.point(l[0],l[1])}function s(g,l){return J(g[0]-n)<U?l>0?0:3:J(g[0]-t)<U?l>0?2:1:J(g[1]-i)<U?l>0?1:0:l>0?3:2}function c(g,l){return u(g.x,l.x)}function u(g,l){var p=s(g,1),h=s(l,1);return p!==h?p-h:0===p?l[1]-g[1]:1===p?g[0]-l[0]:2===p?g[1]-l[1]:l[0]-g[0]}return function(g){var h,v,x,D,O,q,N,w,I,H,z,l=g,p=y(),ne={point:V,lineStart:function Pe(){ne.point=ie,v&&v.push(x=[]),H=!0,I=!1,N=w=NaN},lineEnd:function de(){h&&(ie(D,O),q&&I&&p.rejoin(),h.push(p.result())),ne.point=V,I&&l.lineEnd()},polygonStart:function re(){l=p,h=[],v=[],z=!0},polygonEnd:function Y(){var T=function K(){for(var T=0,$=0,xe=v.length;$<xe;++$)for(var St,at,Me=v[$],Le=1,xn=Me.length,it=Me[0],ci=it[0],Wt=it[1];Le<xn;++Le)St=ci,at=Wt,ci=(it=Me[Le])[0],Wt=it[1],at<=a?Wt>a&&(ci-St)*(a-at)>(Wt-at)*(n-St)&&++T:Wt<=a&&(ci-St)*(a-at)<(Wt-at)*(n-St)&&--T;return T}(),$=z&&T,xe=(h=we(h)).length;($||xe)&&(g.polygonStart(),$&&(g.lineStart(),r(null,null,1,g),g.lineEnd()),xe&&A(h,c,T,r,g),g.polygonEnd()),l=g,h=v=x=null}};function V(T,$){o(T,$)&&l.point(T,$)}function ie(T,$){var xe=o(T,$);if(v&&x.push([T,$]),H)D=T,O=$,q=xe,H=!1,xe&&(l.lineStart(),l.point(T,$));else if(xe&&I)l.point(T,$);else{var Me=[N=Math.max(Lt,Math.min(et,N)),w=Math.max(Lt,Math.min(et,w))],Le=[T=Math.max(Lt,Math.min(et,T)),$=Math.max(Lt,Math.min(et,$))];!function Xe(n,i,t,a,o,r){var x,s=n[0],c=n[1],l=0,p=1,h=i[0]-s,v=i[1]-c;if(x=t-s,h||!(x>0)){if(x/=h,h<0){if(x<l)return;x<p&&(p=x)}else if(h>0){if(x>p)return;x>l&&(l=x)}if(x=o-s,h||!(x<0)){if(x/=h,h<0){if(x>p)return;x>l&&(l=x)}else if(h>0){if(x<l)return;x<p&&(p=x)}if(x=a-c,v||!(x>0)){if(x/=v,v<0){if(x<l)return;x<p&&(p=x)}else if(v>0){if(x>p)return;x>l&&(l=x)}if(x=r-c,v||!(x<0)){if(x/=v,v<0){if(x>p)return;x>l&&(l=x)}else if(v>0){if(x<l)return;x<p&&(p=x)}return l>0&&(n[0]=s+l*h,n[1]=c+l*v),p<1&&(i[0]=s+p*h,i[1]=c+p*v),!0}}}}}(Me,Le,n,i,t,a)?xe&&(l.lineStart(),l.point(T,$),z=!1):(I||(l.lineStart(),l.point(Me[0],Me[1])),l.point(Le[0],Le[1]),xe||l.lineEnd(),z=!1)}N=T,w=$,I=xe}return ne}}function vi(n,i){function t(a,o){return a=n(a,o),i(a[0],a[1])}return n.invert&&i.invert&&(t.invert=function(a,o){return(a=i.invert(a,o))&&n.invert(a[0],a[1])}),t}const bi=n=>n;function xi(n,i){return J(n)>R&&(n-=Math.round(n/ye)*ye),[n,i]}function Wi(n,i,t){return(n%=ye)?i||t?vi(Ki(n),Xi(i,t)):Ki(n):i||t?Xi(i,t):xi}function Vi(n){return function(i,t){return J(i+=n)>R&&(i-=Math.round(i/ye)*ye),[i,t]}}function Ki(n){var i=Vi(n);return i.invert=Vi(-n),i}function Xi(n,i){var t=k(n),a=E(n),o=k(i),r=E(i);function s(c,u){var g=k(u),l=k(c)*g,p=E(c)*g,h=E(u),v=h*t+l*a;return[Ue(p*o-v*r,l*t-h*a),Ze(v*o+p*r)]}return s.invert=function(c,u){var g=k(u),l=k(c)*g,p=E(c)*g,h=E(u),v=h*o-p*r;return[Ue(p*o+h*r,l*t+v*a),Ze(v*t-l*a)]},s}function Mn(n){return function(i){var t=new yi;for(var a in n)t[a]=n[a];return t.stream=i,t}}function yi(){}function On(n,i){n&&ta.hasOwnProperty(n.type)&&ta[n.type](n,i)}xi.invert=xi,yi.prototype={constructor:yi,point:function(n,i){this.stream.point(n,i)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ea={Feature:function(n,i){On(n.geometry,i)},FeatureCollection:function(n,i){for(var t=n.features,a=-1,o=t.length;++a<o;)On(t[a].geometry,i)}},ta={Sphere:function(n,i){i.sphere()},Point:function(n,i){i.point((n=n.coordinates)[0],n[1],n[2])},MultiPoint:function(n,i){for(var t=n.coordinates,a=-1,o=t.length;++a<o;)i.point((n=t[a])[0],n[1],n[2])},LineString:function(n,i){Ti(n.coordinates,i,0)},MultiLineString:function(n,i){for(var t=n.coordinates,a=-1,o=t.length;++a<o;)Ti(t[a],i,0)},Polygon:function(n,i){na(n.coordinates,i)},MultiPolygon:function(n,i){for(var t=n.coordinates,a=-1,o=t.length;++a<o;)na(t[a],i)},GeometryCollection:function(n,i){for(var t=n.geometries,a=-1,o=t.length;++a<o;)On(t[a],i)}};function Ti(n,i,t){var r,a=-1,o=n.length-t;for(i.lineStart();++a<o;)i.point((r=n[a])[0],r[1],r[2]);i.lineEnd()}function na(n,i){var t=-1,a=n.length;for(i.polygonStart();++t<a;)Ti(n[t],i,1);i.polygonEnd()}function gt(n,i){n&&ea.hasOwnProperty(n.type)?ea[n.type](n,i):On(n,i)}var kt=1/0,Dn=kt,nn=-kt,qn=nn;const Un={point:function jo(n,i){n<kt&&(kt=n),n>nn&&(nn=n),i<Dn&&(Dn=i),i>qn&&(qn=i)},lineStart:_,lineEnd:_,polygonStart:_,polygonEnd:_,result:function(){var n=[[kt,Dn],[nn,qn]];return nn=qn=-(Dn=kt=1/0),n}};function Ci(n,i,t){var a=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=a&&n.clipExtent(null),gt(t,n.stream(Un)),i(Un.result()),null!=a&&n.clipExtent(a),n}function Si(n,i,t){return Ci(n,function(a){var o=i[1][0]-i[0][0],r=i[1][1]-i[0][1],s=Math.min(o/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),c=+i[0][0]+(o-s*(a[1][0]+a[0][0]))/2,u=+i[0][1]+(r-s*(a[1][1]+a[0][1]))/2;n.scale(150*s).translate([c,u])},t)}function ia(n,i,t){return Si(n,[[0,0],i],t)}function aa(n,i,t){return Ci(n,function(a){var o=+i,r=o/(a[1][0]-a[0][0]),s=(o-r*(a[1][0]+a[0][0]))/2,c=-r*a[0][1];n.scale(150*r).translate([s,c])},t)}function oa(n,i,t){return Ci(n,function(a){var o=+i,r=o/(a[1][1]-a[0][1]),s=-r*a[0][0],c=(o-r*(a[1][1]+a[0][1]))/2;n.scale(150*r).translate([s,c])},t)}var Ho=k(30*G);function sa(n,i){return+i?function Jo(n,i){function t(a,o,r,s,c,u,g,l,p,h,v,x,D,O){var q=g-a,N=l-o,w=q*q+N*N;if(w>4*i&&D--){var I=s+h,H=c+v,z=u+x,ne=pe(I*I+H*H+z*z),V=Ze(z/=ne),K=J(J(z)-1)<U||J(r-p)<U?(r+p)/2:Ue(H,I),re=n(K,V),Y=re[0],Pe=re[1],de=Y-a,ie=Pe-o,T=N*de-q*ie;(T*T/w>i||J((q*de+N*ie)/w-.5)>.3||s*h+c*v+u*x<Ho)&&(t(a,o,r,s,c,u,Y,Pe,K,I/=ne,H/=ne,z,D,O),O.point(Y,Pe),t(Y,Pe,K,I,H,z,g,l,p,h,v,x,D,O))}}return function(a){var o,r,s,c,u,g,l,p,h,v,x,D,O={point:q,lineStart:N,lineEnd:I,polygonStart:function(){a.polygonStart(),O.lineStart=H},polygonEnd:function(){a.polygonEnd(),O.lineStart=N}};function q(V,K){V=n(V,K),a.point(V[0],V[1])}function N(){p=NaN,O.point=w,a.lineStart()}function w(V,K){var re=ee([V,K]),Y=n(V,K);t(p,h,l,v,x,D,p=Y[0],h=Y[1],l=V,v=re[0],x=re[1],D=re[2],16,a),a.point(p,h)}function I(){O.point=q,a.lineEnd()}function H(){N(),O.point=z,O.lineEnd=ne}function z(V,K){w(o=V,K),r=p,s=h,c=v,u=x,g=D,O.point=w}function ne(){t(p,h,l,v,x,D,r,s,o,c,u,g,16,a),O.lineEnd=I,I()}return O}}(n,i):function zo(n){return Mn({point:function(i,t){i=n(i,t),this.stream.point(i[0],i[1])}})}(n)}var $o=Mn({point:function(n,i){this.stream.point(n*G,i*G)}});function ca(n,i,t,a,o,r){if(!r)return function Qo(n,i,t,a,o){function r(s,c){return[i+n*(s*=a),t-n*(c*=o)]}return r.invert=function(s,c){return[(s-i)/n*a,(t-c)/n*o]},r}(n,i,t,a,o);var s=k(r),c=E(r),u=s*n,g=c*n,l=s/n,p=c/n,h=(c*t-s*i)/n,v=(c*i+s*t)/n;function x(D,O){return[u*(D*=a)-g*(O*=o)+i,t-g*D-u*O]}return x.invert=function(D,O){return[a*(l*D-p*O+h),o*(v-p*D-l*O)]},x}function tt(n){return la(function(){return n})()}function la(n){var i,l,q,N,w,z,ne,V,K,re,t=150,a=480,o=250,r=0,s=0,c=0,u=0,g=0,p=0,h=1,v=1,x=null,D=Be,O=null,I=bi,H=.5;function Y(T){return V(T[0]*G,T[1]*G)}function Pe(T){return(T=V.invert(T[0],T[1]))&&[T[0]*_e,T[1]*_e]}function de(){var T=ca(t,0,0,h,v,p).apply(null,i(r,s)),$=ca(t,a-T[0],o-T[1],h,v,p);return l=Wi(c,u,g),ne=vi(i,$),V=vi(l,ne),z=sa(ne,H),ie()}function ie(){return K=re=null,Y}return Y.stream=function(T){return K&&re===T?K:K=$o(function Go(n){return Mn({point:function(i,t){var a=n(i,t);return this.stream.point(a[0],a[1])}})}(l)(D(z(I(re=T)))))},Y.preclip=function(T){return arguments.length?(D=T,x=void 0,ie()):D},Y.postclip=function(T){return arguments.length?(I=T,O=q=N=w=null,ie()):I},Y.clipAngle=function(T){return arguments.length?(D=+T?Nt(x=T*G):(x=null,Be),ie()):x*_e},Y.clipExtent=function(T){return arguments.length?(I=null==T?(O=q=N=w=null,bi):Ro(O=+T[0][0],q=+T[0][1],N=+T[1][0],w=+T[1][1]),ie()):null==O?null:[[O,q],[N,w]]},Y.scale=function(T){return arguments.length?(t=+T,de()):t},Y.translate=function(T){return arguments.length?(a=+T[0],o=+T[1],de()):[a,o]},Y.center=function(T){return arguments.length?(r=T[0]%360*G,s=T[1]%360*G,de()):[r*_e,s*_e]},Y.rotate=function(T){return arguments.length?(c=T[0]%360*G,u=T[1]%360*G,g=T.length>2?T[2]%360*G:0,de()):[c*_e,u*_e,g*_e]},Y.angle=function(T){return arguments.length?(p=T%360*G,de()):p*_e},Y.reflectX=function(T){return arguments.length?(h=T?-1:1,de()):h<0},Y.reflectY=function(T){return arguments.length?(v=T?-1:1,de()):v<0},Y.precision=function(T){return arguments.length?(z=sa(ne,H=T*T),ie()):pe(H)},Y.fitExtent=function(T,$){return Si(Y,T,$)},Y.fitSize=function(T,$){return ia(Y,T,$)},Y.fitWidth=function(T,$){return aa(Y,T,$)},Y.fitHeight=function(T,$){return oa(Y,T,$)},function(){return i=n.apply(this,arguments),Y.invert=i.invert&&Pe,de()}}var da=d(function(n){return pe(2/(1+n))});da.invert=m(function(n){return 2*Ze(n/2)});var fa=d(function(n){return(n=Pn(n))&&n/E(n)});function ua(n,i){var t=k(i),a=k(n)*t;return[t*E(n)/a,E(i)/a]}function pa(n,i){return[k(i)*E(n),E(i)]}function ha(n,i){var t=k(i),a=1+k(n)*t;return[t*E(n)/a,E(i)/a]}fa.invert=m(function(n){return n}),ua.invert=m(Ke),pa.invert=m(Ze),ha.invert=m(function(n){return 2*Ke(n)});var an=1.340264,on=-.081106,rn=893e-6,sn=.003796,In=pe(3)/2;function ga(n,i){var t=Ze(In*E(i)),a=t*t,o=a*a*a;return[n*k(t)/(In*(an+3*on*a+o*(7*rn+9*sn*a))),t*(an+on*a+o*(rn+sn*a))]}function wi(n){var i=0,t=R/3,a=la(n),o=a(i,t);return o.parallels=function(r){return arguments.length?a(i=r[0]*G,t=r[1]*G):[i*_e,t*_e]},o}function ar(n,i){var t=E(n),a=(t+E(i))/2;if(J(a)<U)return function ir(n){var i=k(n);function t(a,o){return[a*i,E(o)/i]}return t.invert=function(a,o){return[a/i,Ze(o*i)]},t}(n);var o=1+t*(2*a-t),r=pe(o)/a;function s(c,u){var g=pe(o-2*a*E(u))/a;return[g*E(c*=a),r-g*k(c)]}return s.invert=function(c,u){var g=r-u,l=Ue(c,J(g))*Se(g);return g*a<0&&(l-=R*Se(c)*Se(g)),[l/a,Ze((o-(c*c+g*g)*a*a)/(2*a))]},s}function En(){return wi(ar).scale(155.424).center([0,33.6442])}function ma(){return En().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Nn(n,i){return[n,Ie(en((oe+i)/2))]}function _a(n){var c,u,g,i=tt(n),t=i.center,a=i.scale,o=i.translate,r=i.clipExtent,s=null;function l(){var p=R*a(),h=i(function Yo(n){function i(t){return(t=n(t[0]*G,t[1]*G))[0]*=_e,t[1]*=_e,t}return n=Wi(n[0]*G,n[1]*G,n.length>2?n[2]*G:0),i.invert=function(t){return(t=n.invert(t[0]*G,t[1]*G))[0]*=_e,t[1]*=_e,t},i}(i.rotate()).invert([0,0]));return r(null==s?[[h[0]-p,h[1]-p],[h[0]+p,h[1]+p]]:n===Nn?[[Math.max(h[0]-p,s),c],[Math.min(h[0]+p,u),g]]:[[s,Math.max(h[1]-p,c)],[u,Math.min(h[1]+p,g)]])}return i.scale=function(p){return arguments.length?(a(p),l()):a()},i.translate=function(p){return arguments.length?(o(p),l()):o()},i.center=function(p){return arguments.length?(t(p),l()):t()},i.clipExtent=function(p){return arguments.length?(null==p?s=c=u=g=null:(s=+p[0][0],c=+p[0][1],u=+p[1][0],g=+p[1][1]),l()):null==s?null:[[s,c],[u,g]]},l()}function Ln(n){return en((oe+n)/2)}function cr(n,i){var t=k(n),a=n===i?E(n):Ie(t/k(i))/Ie(Ln(i)/Ln(n)),o=t*Xt(Ln(n),a)/a;if(!a)return Nn;function r(s,c){o>0?c<-oe+U&&(c=-oe+U):c>oe-U&&(c=oe-U);var u=o/Xt(Ln(c),a);return[u*E(a*s),o-u*k(a*s)]}return r.invert=function(s,c){var u=o-c,g=Se(a)*pe(s*s+u*u),l=Ue(s,J(u))*Se(u);return u*a<0&&(l-=R*Se(s)*Se(u)),[l/a,2*Ke(Xt(o/g,1/a))-oe]},r}function kn(n,i){return[n,i]}function fr(n,i){var t=k(n),a=n===i?E(n):(t-k(i))/(i-n),o=t/a+n;if(J(a)<U)return kn;function r(s,c){var u=o-c,g=a*s;return[u*E(g),o-u*k(g)]}return r.invert=function(s,c){var u=o-c,g=Ue(s,J(u))*Se(u);return u*a<0&&(g-=R*Se(s)*Se(u)),[g/a,o-Se(a)*pe(s*s+u*u)]},r}function va(n,i){return[Ie(en((oe+i)/2)),-n]}function ba(n,i){var t=i*i,a=t*t;return[n*(.8707-.131979*t+a*(a*(.003971*t-.001529*a)-.013791)),i*(1.007226+t*(.015085+a*(.028874*t-.044475-.005916*a)))]}ga.invert=function(n,i){for(var s,t=i,a=t*t,o=a*a*a,r=0;r<12&&(o=(a=(t-=s=(t*(an+on*a+o*(rn+sn*a))-i)/(an+3*on*a+o*(7*rn+9*sn*a)))*t)*a*a,!(J(s)<1e-12));++r);return[In*n*(an+3*on*a+o*(7*rn+9*sn*a))/k(t),Ze(E(t)/In)]},Nn.invert=function(n,i){return[n,2*Ke(qt(i))-oe]},kn.invert=kn,va.invert=function(n,i){return[-i,2*Ke(qt(n))-oe]},ba.invert=function(n,i){var o,t=i,a=25;do{var r=t*t,s=r*r;t-=o=(t*(1.007226+r*(.015085+s*(.028874*r-.044475-.005916*s)))-i)/(1.007226+r*(.045255+s*(.259866*r-.311325-.005916*11*s)))}while(J(o)>U&&--a>0);return[n/(.8707+(r=t*t)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),t]};var xa,ya,Pi,Mi,Zi=new P,Ai=new P,st={point:_,lineStart:_,lineEnd:_,polygonStart:function(){st.lineStart=gr,st.lineEnd=_r},polygonEnd:function(){st.lineStart=st.lineEnd=st.point=_,Zi.add(J(Ai)),Ai=new P},result:function(){var n=Zi/2;return Zi=new P,n}};function gr(){st.point=mr}function mr(n,i){st.point=Ta,xa=Pi=n,ya=Mi=i}function Ta(n,i){Ai.add(Mi*n-Pi*i),Pi=n,Mi=i}function _r(){Ta(xa,ya)}const Ca=st;var Sa,wa,$e,Ge,Oi=0,Di=0,cn=0,Fn=0,Rn=0,Ft=0,qi=0,Ui=0,ln=0,je={point:mt,lineStart:Za,lineEnd:Aa,polygonStart:function(){je.lineStart=xr,je.lineEnd=yr},polygonEnd:function(){je.point=mt,je.lineStart=Za,je.lineEnd=Aa},result:function(){var n=ln?[qi/ln,Ui/ln]:Ft?[Fn/Ft,Rn/Ft]:cn?[Oi/cn,Di/cn]:[NaN,NaN];return Oi=Di=cn=Fn=Rn=Ft=qi=Ui=ln=0,n}};function mt(n,i){Oi+=n,Di+=i,++cn}function Za(){je.point=vr}function vr(n,i){je.point=br,mt($e=n,Ge=i)}function br(n,i){var t=n-$e,a=i-Ge,o=pe(t*t+a*a);Fn+=o*($e+n)/2,Rn+=o*(Ge+i)/2,Ft+=o,mt($e=n,Ge=i)}function Aa(){je.point=mt}function xr(){je.point=Tr}function yr(){Pa(Sa,wa)}function Tr(n,i){je.point=Pa,mt(Sa=$e=n,wa=Ge=i)}function Pa(n,i){var t=n-$e,a=i-Ge,o=pe(t*t+a*a);Fn+=o*($e+n)/2,Rn+=o*(Ge+i)/2,Ft+=o,qi+=(o=Ge*n-$e*i)*($e+n),Ui+=o*(Ge+i),ln+=3*o,mt($e=n,Ge=i)}const Ma=je;function Oa(n){this._context=n}Oa.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(n,i){switch(this._point){case 0:this._context.moveTo(n,i),this._point=1;break;case 1:this._context.lineTo(n,i);break;default:this._context.moveTo(n+this._radius,i),this._context.arc(n,i,this._radius,0,ye)}},result:_};var Ei,Da,qa,dn,fn,Ii=new P,Yn={point:_,lineStart:function(){Yn.point=Cr},lineEnd:function(){Ei&&Ua(Da,qa),Yn.point=_},polygonStart:function(){Ei=!0},polygonEnd:function(){Ei=null},result:function(){var n=+Ii;return Ii=new P,n}};function Cr(n,i){Yn.point=Ua,Da=dn=n,qa=fn=i}function Ua(n,i){Ii.add(pe((dn-=n)*dn+(fn-=i)*fn)),dn=n,fn=i}const Ia=Yn;let Ea,Bn,Na,La;class ka{constructor(i){this._append=null==i?Fa:function Sr(n){const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);if(i>15)return Fa;if(i!==Ea){const t=10**i;Ea=i,Bn=function(o){let r=1;this._+=o[0];for(const s=o.length;r<s;++r)this._+=Math.round(arguments[r]*t)/t+o[r]}}return Bn}(i),this._radius=4.5,this._=""}pointRadius(i){return this._radius=+i,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(i,t){switch(this._point){case 0:this._append`M${i},${t}`,this._point=1;break;case 1:this._append`L${i},${t}`;break;default:if(this._append`M${i},${t}`,this._radius!==Na||this._append!==Bn){const a=this._radius,o=this._;this._="",this._append`m0,${a}a${a},${a} 0 1,1 0,${-2*a}a${a},${a} 0 1,1 0,${2*a}z`,Na=a,Bn=this._append,La=this._,this._=o}this._+=La}}result(){const i=this._;return this._="",i.length?i:null}}function Fa(n){let i=1;this._+=n[0];for(const t=n.length;i<t;++i)this._+=arguments[i]+n[i]}function Ra(n,i){let o,r,t=3,a=4.5;function s(c){return c&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),gt(c,o(r))),r.result()}return s.area=function(c){return gt(c,o(Ca)),Ca.result()},s.measure=function(c){return gt(c,o(Ia)),Ia.result()},s.bounds=function(c){return gt(c,o(Un)),Un.result()},s.centroid=function(c){return gt(c,o(Ma)),Ma.result()},s.projection=function(c){return arguments.length?(o=null==c?(n=null,bi):(n=c).stream,s):n},s.context=function(c){return arguments.length?(r=null==c?(i=null,new ka(t)):new Oa(i=c),"function"!=typeof a&&r.pointRadius(a),s):i},s.pointRadius=function(c){return arguments.length?(a="function"==typeof c?c:(r.pointRadius(+c),+c),s):a},s.digits=function(c){if(!arguments.length)return t;if(null==c)t=null;else{const u=Math.floor(c);if(!(u>=0))throw new RangeError(`invalid digits: ${c}`);t=u}return null===i&&(r=new ka(t)),s},s.projection(n).digits(t).context(i)}var Ni,Li,jn,Hn,Rt={sphere:_,point:_,lineStart:function wr(){Rt.point=Ar,Rt.lineEnd=Zr},lineEnd:_,polygonStart:_,polygonEnd:_};function Zr(){Rt.point=Rt.lineEnd=_}function Ar(n,i){Li=n*=G,jn=E(i*=G),Hn=k(i),Rt.point=Pr}function Pr(n,i){n*=G;var t=E(i*=G),a=k(i),o=J(n-Li),r=k(o),c=a*E(o),u=Hn*t-jn*a*r,g=jn*t+Hn*a*r;Ni.add(Ue(pe(c*c+u*u),g)),Li=n,jn=t,Hn=a}var ki=[null,null],Or={type:"LineString",coordinates:ki};function Fi(n,i){return ki[0]=n,ki[1]=i,function Mr(n){return Ni=new P,gt(n,Rt),+Ni}(Or)}var Ya={Feature:function(n,i){return zn(n.geometry,i)},FeatureCollection:function(n,i){for(var t=n.features,a=-1,o=t.length;++a<o;)if(zn(t[a].geometry,i))return!0;return!1}},Ba={Sphere:function(){return!0},Point:function(n,i){return ja(n.coordinates,i)},MultiPoint:function(n,i){for(var t=n.coordinates,a=-1,o=t.length;++a<o;)if(ja(t[a],i))return!0;return!1},LineString:function(n,i){return Ha(n.coordinates,i)},MultiLineString:function(n,i){for(var t=n.coordinates,a=-1,o=t.length;++a<o;)if(Ha(t[a],i))return!0;return!1},Polygon:function(n,i){return za(n.coordinates,i)},MultiPolygon:function(n,i){for(var t=n.coordinates,a=-1,o=t.length;++a<o;)if(za(t[a],i))return!0;return!1},GeometryCollection:function(n,i){for(var t=n.geometries,a=-1,o=t.length;++a<o;)if(zn(t[a],i))return!0;return!1}};function zn(n,i){return!(!n||!Ba.hasOwnProperty(n.type))&&Ba[n.type](n,i)}function ja(n,i){return 0===Fi(n,i)}function Ha(n,i){for(var t,a,o,r=0,s=n.length;r<s;r++){if(0===(a=Fi(n[r],i))||r>0&&(o=Fi(n[r],n[r-1]))>0&&t<=o&&a<=o&&(t+a-o)*(1-Math.pow((t-a)/o,2))<1e-12*o)return!0;t=a}return!1}function za(n,i){return!!le(n.map(Dr),Ja(i))}function Dr(n){return(n=n.map(Ja)).pop(),n}function Ja(n){return[n[0]*G,n[1]*G]}function Yt(n,i,t){n=+n,i=+i,t=(o=arguments.length)<2?(i=n,n=0,1):o<3?1:+t;for(var a=-1,o=0|Math.max(0,Math.ceil((i-n)/t)),r=new Array(o);++a<o;)r[a]=n+a*t;return r}function $a(n,i,t){var a=Yt(n,i-U,t).concat(i);return function(o){return a.map(function(r){return[o,r]})}}function Ga(n,i,t){var a=Yt(n,i-U,t).concat(i);return function(o){return a.map(function(r){return[r,o]})}}function Qa(){var n,i,t,a,o,r,s,c,h,v,x,D,u=10,g=u,l=90,p=360,O=2.5;function q(){return{type:"MultiLineString",coordinates:N()}}function N(){return Yt(pt(a/l)*l,t,l).map(x).concat(Yt(pt(c/p)*p,s,p).map(D)).concat(Yt(pt(i/u)*u,n,u).filter(function(w){return J(w%l)>U}).map(h)).concat(Yt(pt(r/g)*g,o,g).filter(function(w){return J(w%p)>U}).map(v))}return q.lines=function(){return N().map(function(w){return{type:"LineString",coordinates:w}})},q.outline=function(){return{type:"Polygon",coordinates:[x(a).concat(D(s).slice(1),x(t).reverse().slice(1),D(c).reverse().slice(1))]}},q.extent=function(w){return arguments.length?q.extentMajor(w).extentMinor(w):q.extentMinor()},q.extentMajor=function(w){return arguments.length?(c=+w[0][1],s=+w[1][1],(a=+w[0][0])>(t=+w[1][0])&&(w=a,a=t,t=w),c>s&&(w=c,c=s,s=w),q.precision(O)):[[a,c],[t,s]]},q.extentMinor=function(w){return arguments.length?(r=+w[0][1],o=+w[1][1],(i=+w[0][0])>(n=+w[1][0])&&(w=i,i=n,n=w),r>o&&(w=r,r=o,o=w),q.precision(O)):[[i,r],[n,o]]},q.step=function(w){return arguments.length?q.stepMajor(w).stepMinor(w):q.stepMinor()},q.stepMajor=function(w){return arguments.length?(l=+w[0],p=+w[1],q):[l,p]},q.stepMinor=function(w){return arguments.length?(u=+w[0],g=+w[1],q):[u,g]},q.precision=function(w){return arguments.length?(O=+w,h=$a(r,o,90),v=Ga(i,n,O),x=$a(c,s,90),D=Ga(a,t,O),q):O},q.extentMajor([[-180,-90+U],[180,90-U]]).extentMinor([[-180,-80-U],[180,80+U]])}var be=S(1086);function W(n){for(var i=n.length/6|0,t=new Array(i),a=0;a<i;)t[a]="#"+n.slice(6*a,6*++a);return t}function Jn(n,i,t){n.prototype=i.prototype=t,t.constructor=n}function Ri(n,i){var t=Object.create(n.prototype);for(var a in i)t[a]=i[a];return t}function Bt(){}var jt=1/.7,Ht="\\s*([+-]?\\d+)\\s*",un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ir=/^#([0-9a-f]{3,8})$/,Er=new RegExp(`^rgb\\(${Ht},${Ht},${Ht}\\)$`),Nr=new RegExp(`^rgb\\(${Qe},${Qe},${Qe}\\)$`),Lr=new RegExp(`^rgba\\(${Ht},${Ht},${Ht},${un}\\)$`),kr=new RegExp(`^rgba\\(${Qe},${Qe},${Qe},${un}\\)$`),Fr=new RegExp(`^hsl\\(${un},${Qe},${Qe}\\)$`),Rr=new RegExp(`^hsla\\(${un},${Qe},${Qe},${un}\\)$`),Wa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Va(){return this.rgb().formatHex()}function Ka(){return this.rgb().formatRgb()}function Yi(n){var i,t;return n=(n+"").trim().toLowerCase(),(i=Ir.exec(n))?(t=i[1].length,i=parseInt(i[1],16),6===t?Xa(i):3===t?new Te(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===t?$n(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===t?$n(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Er.exec(n))?new Te(i[1],i[2],i[3],1):(i=Nr.exec(n))?new Te(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=Lr.exec(n))?$n(i[1],i[2],i[3],i[4]):(i=kr.exec(n))?$n(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=Fr.exec(n))?io(i[1],i[2]/100,i[3]/100,1):(i=Rr.exec(n))?io(i[1],i[2]/100,i[3]/100,i[4]):Wa.hasOwnProperty(n)?Xa(Wa[n]):"transparent"===n?new Te(NaN,NaN,NaN,0):null}function Xa(n){return new Te(n>>16&255,n>>8&255,255&n,1)}function $n(n,i,t,a){return a<=0&&(n=i=t=NaN),new Te(n,i,t,a)}function eo(n){return n instanceof Bt||(n=Yi(n)),n?new Te((n=n.rgb()).r,n.g,n.b,n.opacity):new Te}function pn(n,i,t,a){return 1===arguments.length?eo(n):new Te(n,i,t,a??1)}function Te(n,i,t,a){this.r=+n,this.g=+i,this.b=+t,this.opacity=+a}function to(){return`#${bt(this.r)}${bt(this.g)}${bt(this.b)}`}function no(){const n=Gn(this.opacity);return`${1===n?"rgb(":"rgba("}${vt(this.r)}, ${vt(this.g)}, ${vt(this.b)}${1===n?")":`, ${n})`}`}function Gn(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function vt(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function bt(n){return((n=vt(n))<16?"0":"")+n.toString(16)}function io(n,i,t,a){return a<=0?n=i=t=NaN:t<=0||t>=1?n=i=NaN:i<=0&&(n=NaN),new He(n,i,t,a)}function ao(n){if(n instanceof He)return new He(n.h,n.s,n.l,n.opacity);if(n instanceof Bt||(n=Yi(n)),!n)return new He;if(n instanceof He)return n;var i=(n=n.rgb()).r/255,t=n.g/255,a=n.b/255,o=Math.min(i,t,a),r=Math.max(i,t,a),s=NaN,c=r-o,u=(r+o)/2;return c?(s=i===r?(t-a)/c+6*(t<a):t===r?(a-i)/c+2:(i-t)/c+4,c/=u<.5?r+o:2-r-o,s*=60):c=u>0&&u<1?0:s,new He(s,c,u,n.opacity)}function He(n,i,t,a){this.h=+n,this.s=+i,this.l=+t,this.opacity=+a}function oo(n){return(n=(n||0)%360)<0?n+360:n}function Qn(n){return Math.max(0,Math.min(1,n||0))}function Bi(n,i,t){return 255*(n<60?i+(t-i)*n/60:n<180?t:n<240?i+(t-i)*(240-n)/60:i)}function ro(n,i,t,a,o){var r=n*n,s=r*n;return((1-3*n+3*r-s)*i+(4-6*r+3*s)*t+(1+3*n+3*r-3*s)*a+s*o)/6}Jn(Bt,Yi,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Va,formatHex:Va,formatHex8:function Yr(){return this.rgb().formatHex8()},formatHsl:function Br(){return ao(this).formatHsl()},formatRgb:Ka,toString:Ka}),Jn(Te,pn,Ri(Bt,{brighter(n){return n=null==n?jt:Math.pow(jt,n),new Te(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new Te(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Te(vt(this.r),vt(this.g),vt(this.b),Gn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:to,formatHex:to,formatHex8:function jr(){return`#${bt(this.r)}${bt(this.g)}${bt(this.b)}${bt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:no,toString:no})),Jn(He,function Hr(n,i,t,a){return 1===arguments.length?ao(n):new He(n,i,t,a??1)},Ri(Bt,{brighter(n){return n=null==n?jt:Math.pow(jt,n),new He(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new He(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(this.h<0),i=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,a=t+(t<.5?t:1-t)*i,o=2*t-a;return new Te(Bi(n>=240?n-240:n+120,o,a),Bi(n,o,a),Bi(n<120?n+240:n-120,o,a),this.opacity)},clamp(){return new He(oo(this.h),Qn(this.s),Qn(this.l),Gn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Gn(this.opacity);return`${1===n?"hsl(":"hsla("}${oo(this.h)}, ${100*Qn(this.s)}%, ${100*Qn(this.l)}%${1===n?")":`, ${n})`}`}}));const ji=n=>()=>n;function so(n,i){return function(t){return n+t*i}}function zt(n,i){var t=i-n;return t?so(n,t):ji(isNaN(n)?i:n)}function co(n){return function(i){var s,c,t=i.length,a=new Array(t),o=new Array(t),r=new Array(t);for(s=0;s<t;++s)c=pn(i[s]),a[s]=c.r||0,o[s]=c.g||0,r[s]=c.b||0;return a=n(a),o=n(o),r=n(r),c.opacity=1,function(u){return c.r=a(u),c.g=o(u),c.b=r(u),c+""}}}!function n(i){var t=function Qr(n){return 1==(n=+n)?zt:function(i,t){return t-i?function $r(n,i,t){return n=Math.pow(n,t),i=Math.pow(i,t)-n,t=1/t,function(a){return Math.pow(n+a*i,t)}}(i,t,n):ji(isNaN(i)?t:i)}}(i);function a(o,r){var s=t((o=pn(o)).r,(r=pn(r)).r),c=t(o.g,r.g),u=t(o.b,r.b),g=zt(o.opacity,r.opacity);return function(l){return o.r=s(l),o.g=c(l),o.b=u(l),o.opacity=g(l),o+""}}return a.gamma=n,a}(1);var Wr=co(function zr(n){var i=n.length-1;return function(t){var a=t<=0?t=0:t>=1?(t=1,i-1):Math.floor(t*i),o=n[a],r=n[a+1];return ro((t-a/i)*i,a>0?n[a-1]:2*o-r,o,r,a<i-1?n[a+2]:2*r-o)}});co(function Jr(n){var i=n.length;return function(t){var a=Math.floor(((t%=1)<0?++t:t)*i);return ro((t-a/i)*i,n[(a+i-1)%i],n[a%i],n[(a+1)%i],n[(a+2)%i])}});const te=n=>Wr(n[n.length-1]),Kr=te(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(W)),es=te(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(W)),ns=te(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(W)),as=te(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(W)),rs=Math.PI/180,ss=180/Math.PI;var Hi=1.78277,zi=-.29227,Wn=-.90649,hn=1.97294,fo=hn*Wn,uo=hn*Hi,po=Hi*zi- -.14861*Wn;function cs(n){if(n instanceof xt)return new xt(n.h,n.s,n.l,n.opacity);n instanceof Te||(n=eo(n));var t=n.g/255,a=n.b/255,o=(po*a+fo*(n.r/255)-uo*t)/(po+fo-uo),r=a-o,s=(hn*(t-o)-zi*r)/Wn,c=Math.sqrt(s*s+r*r)/(hn*o*(1-o)),u=c?Math.atan2(s,r)*ss-120:NaN;return new xt(u<0?u+360:u,c,o,n.opacity)}function We(n,i,t,a){return 1===arguments.length?cs(n):new xt(n,i,t,a??1)}function xt(n,i,t,a){this.h=+n,this.s=+i,this.l=+t,this.opacity=+a}function ho(n){return function i(t){function a(o,r){var s=n((o=We(o)).h,(r=We(r)).h),c=zt(o.s,r.s),u=zt(o.l,r.l),g=zt(o.opacity,r.opacity);return function(l){return o.h=s(l),o.s=c(l),o.l=u(Math.pow(l,t)),o.opacity=g(l),o+""}}return t=+t,a.gamma=i,a}(1)}Jn(xt,We,Ri(Bt,{brighter(n){return n=null==n?jt:Math.pow(jt,n),new xt(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new xt(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*rs,i=+this.l,t=isNaN(this.s)?0:this.s*i*(1-i),a=Math.cos(n),o=Math.sin(n);return new Te(255*(i+t*(-.14861*a+Hi*o)),255*(i+t*(zi*a+Wn*o)),255*(i+t*(hn*a)),this.opacity)}})),ho(function Gr(n,i){var t=i-n;return t?so(n,t>180||t<-180?t-360*Math.round(t/360):t):ji(isNaN(n)?i:n)});var Ji=ho(zt),ls=Ji(We(-100,.75,.35),We(80,1.5,.8)),ds=Ji(We(260,.75,.35),We(80,1.5,.8)),Vn=We();const us=Ji(We(300,.5,0),We(-240,.5,1)),hs=te(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(W)),ms=te(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(W)),vs=te(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(W));function Kn(n){var i=n.length;return function(t){return n[Math.max(0,Math.min(i-1,Math.floor(t*i)))]}}const bs=Kn(W("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var xs=Kn(W("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ys=Kn(W("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Ts=Kn(W("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const Ss=te(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(W)),Zs=te(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(W)),Ps=te(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(W)),Os=te(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(W)),qs=te(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(W)),Is=te(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(W)),Ns=te(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(W)),ks=te(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(W)),Rs=te(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(W)),Bs=te(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(W)),Hs=te(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(W)),Js=te(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(W)),Gs=te(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(W)),Ws=te(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(W)),Ks=te(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(W));var Xn=pn(),Xs=Math.PI/3,ec=2*Math.PI/3;const ic=te(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(W)),rc=te(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(W)),cc=te(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(W)),dc=te(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(W)),uc=te(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(W)),gn={geoAzimuthalEqualArea:function Wo(){return tt(da).scale(124.75).clipAngle(179.999)},geoAzimuthalEquidistant:function Vo(){return tt(fa).scale(79.4188).clipAngle(179.999)},geoGnomonic:function Ko(){return tt(ua).scale(144.049).clipAngle(60)},geoOrthographic:function Xo(){return tt(pa).scale(249.5).clipAngle(90+U)},geoStereographic:function er(){return tt(ha).scale(250).clipAngle(142)},geoEqualEarth:function nr(){return tt(ga).scale(177.158)},geoAlbers:ma,geoAlbersUsa:function rr(){var n,i,a,r,c,u,t=ma(),o=En().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=En().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g={point:function(h,v){u=[h,v]}};function l(h){var v=h[0],x=h[1];return u=null,a.point(v,x),u||(r.point(v,x),u)||(c.point(v,x),u)}function p(){return n=i=null,l}return l.invert=function(h){var v=t.scale(),x=t.translate(),D=(h[0]-x[0])/v,O=(h[1]-x[1])/v;return(O>=.12&&O<.234&&D>=-.425&&D<-.214?o:O>=.166&&O<.234&&D>=-.214&&D<-.115?s:t).invert(h)},l.stream=function(h){return n&&i===h?n:n=function or(n){var i=n.length;return{point:function(t,a){for(var o=-1;++o<i;)n[o].point(t,a)},sphere:function(){for(var t=-1;++t<i;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)n[t].polygonEnd()}}}([t.stream(i=h),o.stream(h),s.stream(h)])},l.precision=function(h){return arguments.length?(t.precision(h),o.precision(h),s.precision(h),p()):t.precision()},l.scale=function(h){return arguments.length?(t.scale(h),o.scale(.35*h),s.scale(h),l.translate(t.translate())):t.scale()},l.translate=function(h){if(!arguments.length)return t.translate();var v=t.scale(),x=+h[0],D=+h[1];return a=t.translate(h).clipExtent([[x-.455*v,D-.238*v],[x+.455*v,D+.238*v]]).stream(g),r=o.translate([x-.307*v,D+.201*v]).clipExtent([[x-.425*v+U,D+.12*v+U],[x-.214*v-U,D+.234*v-U]]).stream(g),c=s.translate([x-.205*v,D+.212*v]).clipExtent([[x-.214*v+U,D+.166*v+U],[x-.115*v-U,D+.234*v-U]]).stream(g),p()},l.fitExtent=function(h,v){return Si(l,h,v)},l.fitSize=function(h,v){return ia(l,h,v)},l.fitWidth=function(h,v){return aa(l,h,v)},l.fitHeight=function(h,v){return oa(l,h,v)},l.scale(1070)},geoConicConformal:function lr(){return wi(cr).scale(109.5).parallels([30,30])},geoConicEqualArea:En,geoConicEquidistant:function ur(){return wi(fr).scale(131.154).center([0,13.9389])},geoEquirectangular:function dr(){return tt(kn).scale(152.63)},geoMercator:function sr(){return _a(Nn).scale(961/ye)},geoTransverseMercator:function pr(){var n=_a(va),i=n.center,t=n.rotate;return n.center=function(a){return arguments.length?i([-a[1],a[0]]):[(a=i())[1],-a[0]]},n.rotate=function(a){return arguments.length?t([a[0],a[1],a.length>2?a[2]+90:90]):[(a=t())[0],a[1],a[2]-90]},t([0,0,90]).scale(159.155)},geoNaturalEarth1:function hr(){return tt(ba).scale(175.295)}};Object.keys(gn).forEach(n=>{gn[`${n.charAt(3).toLowerCase()}${n.slice(4)}`]=gn[n]});let $i=(()=>{class n extends ce.Ci{constructor(t){super(t),this.outlineBounds=null,this.oldChartBounds=null,this.geoPath=Ra()}init(t){t.position="chartArea",super.init(t),this.projection="function"==typeof t.projection?t.projection:(gn[t.projection]||gn.albersUsa)(),this.geoPath.projection(this.projection),this.outlineBounds=null,this.oldChartBounds=null}computeBounds(t){const a=Ra(this.projection.fitWidth(1e3,t)).bounds(t),o=Math.ceil(a[1][1]-a[0][1]),r=Math.ceil(a[1][0]-a[0][0]),s=this.projection.translate();this.outlineBounds={width:r,height:o,aspectRatio:r/o,refScale:this.projection.scale(),refX:s[0],refY:s[1]}}updateBounds(){const t=this.chart.chartArea,a=this.outlineBounds;if(!a)return!1;const o=this.options.padding,r="number"==typeof o?o:o.top,s="number"==typeof o?o:o.left,g=t.right-t.left-s-("number"==typeof o?o:o.right),l=t.bottom-t.top-r-("number"==typeof o?o:o.bottom),p=this.oldChartBounds;this.oldChartBounds={chartWidth:g,chartHeight:l};const h=Math.min(g/a.width,l/a.height),D=.5*(g-a.width*h)+t.left+s,O=.5*(l-a.height*h)+t.top+r,q=this.options;return this.projection.scale(a.refScale*h*q.projectionScale).translate([h*a.refX+D+q.projectionOffset[0],h*a.refY+O+q.projectionOffset[1]]),!p||p.chartWidth!==this.oldChartBounds.chartWidth||p.chartHeight!==this.oldChartBounds.chartHeight}}return n.id="projection",n.defaults={projection:"albersUsa",projectionScale:1,projectionOffset:[0,0],padding:0},n.descriptors={_scriptable:i=>"projection"!==i,_indexable:i=>"projectionOffset"!==i},n})();const ei={position:"chartArea",property:"value",grid:{z:1,drawOnChartArea:!1},ticks:{z:1},legend:{align:"right",position:"bottom-right",length:100,width:50,margin:8,indicatorWidth:10}};class Jt extends ce.f${constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(i){i.position="chartArea",super.init(i),this.axis="r"}parse(i,t){return i&&"number"==typeof i[this.options.property]?i[this.options.property]:super.parse(i,t)}isHorizontal(){return"top"===this.options.legend.align||"bottom"===this.options.legend.align}_getNormalizedValue(i){return null==i||Number.isNaN(i)?null:(i-this._startValue)/this._valueRange}update(i,t,a){const o=Math.min(t,this.bottom??Number.POSITIVE_INFINITY),r=Math.min(i,this.right??Number.POSITIVE_INFINITY),s=this.options.legend,c=this.isHorizontal(),u=(v,x)=>v<1?x*v:v,g=Math.min(r,u(c?s.length:s.width,r))-(c?0:s.indicatorWidth),l=Math.min(o,u(c?s.width:s.length,o))-(c?s.indicatorWidth:0);this.legendSize={w:g,h:l},this.bottom=l,this.height=l,this.right=g,this.width=g;const p=this.options.position;this.options.position=this.options.legend.align;const h=super.update(g,l,a);return this.options.position=p,this.height=Math.min(l,this.height),this.width=Math.min(g,this.width),h}_computeLabelArea(){}draw(i){if(!this._isVisible())return;const t=function hc(n,i,t,a,o){const{indicatorWidth:r,align:s,position:c}=i,u="top"===s||"bottom"===s,g=("left"===s?o.w:t)+(u?r:0),l=("top"===s?o.h:a)+(u?0:r),p=function pc(n){const{indicatorWidth:i,align:t,margin:a}=n;return{left:("number"==typeof a?a:a.left)+("right"===t?i:0),top:("number"==typeof a?a:a.top)+("bottom"===t?i:0),right:("number"==typeof a?a:a.right)+("left"===t?i:0),bottom:("number"==typeof a?a:a.bottom)+("top"===t?i:0)}}(i);if("string"==typeof c)switch(c){case"top-left":return[p.left,p.top];case"top":return[(n.right-g)/2,p.top];case"left":return[p.left,(n.bottom-l)/2];case"top-right":return[n.right-g-p.right,p.top];case"bottom-right":return[n.right-g-p.right,n.bottom-l-p.bottom];case"bottom":return[(n.right-g)/2,n.bottom-l-p.bottom];case"bottom-left":return[p.left,n.bottom-l-p.bottom];default:return[n.right-g-p.right,(n.bottom-l)/2]}return[c.x,c.y]}(i,this.options.legend,this.width,this.height,this.legendSize),{ctx:a}=this;a.save(),a.translate(t[0],t[1]);const o=this.options.position;this.options.position=this.options.legend.align,super.draw({...i,bottom:this.height+10,right:this.width}),this.options.position=o;const{indicatorWidth:r}=this.options.legend;switch(this.options.legend.align){case"left":a.translate(this.legendSize.w,0);break;case"top":a.translate(0,this.legendSize.h);break;case"bottom":a.translate(0,-r);break;default:a.translate(-r,0)}this._drawIndicator(),a.restore()}_drawIndicator(){}}class go extends ce.WV{constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(i){Jt.prototype.init.call(this,i)}parse(i,t){return Jt.prototype.parse.call(this,i,t)}isHorizontal(){return"top"===this.options.legend.align||"bottom"===this.options.legend.align}_getNormalizedValue(i){return null==i||Number.isNaN(i)?null:(Math.log10(i)-this._startValue)/this._valueRange}update(i,t,a){return Jt.prototype.update.call(this,i,t,a)}_computeLabelArea(){}draw(i){return Jt.prototype.draw.call(this,i)}_drawIndicator(){}}const nt={interpolateBlues:Kr,interpolateBrBG:es,interpolateBuGn:ns,interpolateBuPu:as,interpolateCividis:function os(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-n*(35.34-n*(2381.73-n*(6402.7-n*(7024.72-2710.57*n)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+n*(170.73+n*(52.82-n*(131.46-n*(176.58-67.37*n)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+n*(442.36-n*(2482.43-n*(6167.24-n*(6614.94-2475.67*n)))))))+")"},interpolateCool:ds,interpolateCubehelixDefault:us,interpolateGnBu:hs,interpolateGreens:ms,interpolateGreys:vs,interpolateInferno:ys,interpolateMagma:xs,interpolateOrRd:Ss,interpolateOranges:Zs,interpolatePRGn:Ps,interpolatePiYG:Os,interpolatePlasma:Ts,interpolatePuBu:qs,interpolatePuBuGn:Is,interpolatePuOr:Ns,interpolatePuRd:ks,interpolatePurples:Rs,interpolateRainbow:function fs(n){(n<0||n>1)&&(n-=Math.floor(n));var i=Math.abs(n-.5);return Vn.h=360*n-100,Vn.s=1.5-1.5*i,Vn.l=.8-.9*i,Vn+""},interpolateRdBu:Bs,interpolateRdGy:Hs,interpolateRdPu:Js,interpolateRdYlBu:Gs,interpolateRdYlGn:Ws,interpolateReds:Ks,interpolateSinebow:function tc(n){var i;return n=(.5-n)*Math.PI,Xn.r=255*(i=Math.sin(n))*i,Xn.g=255*(i=Math.sin(n+Xs))*i,Xn.b=255*(i=Math.sin(n+ec))*i,Xn+""},interpolateSpectral:ic,interpolateTurbo:function ac(n){return n=Math.max(0,Math.min(1,n)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+n*(1172.33-n*(10793.56-n*(33300.12-n*(38394.49-14825.05*n)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+n*(557.33+n*(1225.33-n*(3574.96-n*(1073.77+707.56*n)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+n*(3211.1-n*(15327.97-n*(27814-n*(22569.18-6838.66*n)))))))+")"},interpolateViridis:bs,interpolateWarm:ls,interpolateYlGn:rc,interpolateYlGnBu:cc,interpolateYlOrBr:dc,interpolateYlOrRd:uc};function mo(n,i){const t=1/i;if(n<=t)return 0;if(n>=1-t)return 1;for(let a=0;a<1;a+=t)if(n<a)return a-t/2;return n}Object.keys(nt).forEach(n=>{nt[`${n.charAt(11).toLowerCase()}${n.slice(12)}`]=nt[n],nt[n.slice(11)]=nt[n]});const _o={interpolate:"blues",missing:"transparent",quantize:0};class yt extends Jt{get interpolate(){const i=this.options;return i?"function"==typeof i.interpolate?i.interpolate:nt[i.interpolate]||nt.blues:t=>`rgb(${t},${t},${t})`}getColorForValue(i){const t=this._getNormalizedValue(i);return null==t||Number.isNaN(t)?this.options.missing:this.getColor(t)}getColor(i){let t=i;return this.options.quantize>0&&(t=mo(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){const{indicatorWidth:i}=this.options.legend,t=this._reversePixels;if(this.isHorizontal()){const a=this.width;if(this.options.quantize>0){const o=a/this.options.quantize,r=t?s=>a-o-s:s=>s;for(let s=0;s<a;s+=o)this.ctx.fillStyle=this.getColor((s+o/2)/a),this.ctx.fillRect(r(s),0,o,i)}else{const o=t?r=>a-1-r:r=>r;for(let r=0;r<a;r+=1)this.ctx.fillStyle=this.getColor((r+.5)/a),this.ctx.fillRect(o(r),0,1,i)}}else{const a=this.height;if(this.options.quantize>0){const o=a/this.options.quantize,r=t?s=>a-o-s:s=>s;for(let s=0;s<a;s+=o)this.ctx.fillStyle=this.getColor((s+o/2)/a),this.ctx.fillRect(0,r(s),i,o)}else{const o=t?r=>a-1-r:r=>r;for(let r=0;r<a;r+=1)this.ctx.fillStyle=this.getColor((r+.5)/a),this.ctx.fillRect(0,o(r),i,1)}}}}yt.id="color",yt.defaults=(0,be.a4)({},[ce.f$.defaults,ei,_o]),yt.descriptors={_scriptable:n=>"interpolate"!==n,_indexable:!1};class Gi extends go{constructor(){super(...arguments),this.interpolate=i=>`rgb(${i},${i},${i})`}init(i){super.init(i),this.interpolate="function"==typeof i.interpolate?i.interpolate:nt[i.interpolate]||nt.blues}getColorForValue(i){return yt.prototype.getColorForValue.call(this,i)}getColor(i){let t=i;return this.options.quantize>0&&(t=mo(t,this.options.quantize)),this.interpolate(t)}_drawIndicator(){return yt.prototype._drawIndicator.call(this)}}Gi.id="colorLogarithmic",Gi.defaults=(0,be.a4)({},[ce.WV.defaults,ei,_o]),Gi.descriptors={_scriptable:n=>"interpolate"!==n,_indexable:!1};const vo={missing:1,mode:"area",range:[2,20],legend:{align:"bottom",length:90,width:70,indicatorWidth:42}};class Tt extends Jt{constructor(){super(...arguments),this._model=null}getSizeForValue(i){const t=this._getNormalizedValue(i);return null==t||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(i){const[t,a]=this.options.range;if("area"===this.options.mode){const r=a*a*Math.PI,s=t*t*Math.PI;return Math.sqrt((i*(r-s)+s)/Math.PI)}return i*(a-t)+t}_drawIndicator(){const{ctx:i}=this,t=this.options.legend.indicatorWidth/2,a=this.isHorizontal(),o=this.ticks,r=this.getLabelItems(),s=r?r.map(c=>({[a?"x":"y"]:c.options.translation[a?0:1]})):o.map((c,u)=>({[a?"x":"y"]:this.getPixelForTick(u)}));if((this._gridLineItems||[]).forEach(c=>{if(i.save(),i.strokeStyle=c.color,i.lineWidth=c.width,i.setLineDash&&(i.setLineDash(c.borderDash),i.lineDashOffset=c.borderDashOffset),i.beginPath(),this.options.grid.drawTicks)switch(this.options.legend.align){case"left":i.moveTo(0,c.ty1),i.lineTo(t,c.ty2);break;case"top":i.moveTo(c.tx1,0),i.lineTo(c.tx2,t);break;case"bottom":i.moveTo(c.tx1,t),i.lineTo(c.tx2,2*t);break;default:i.moveTo(t,c.ty1),i.lineTo(2*t,c.ty2)}i.stroke(),i.restore()}),this._model){const c=this._model;i.strokeStyle=c.borderColor,i.lineWidth=c.borderWidth||0,i.fillStyle=c.backgroundColor}else i.fillStyle="blue";o.forEach((c,u)=>{const g=s[u],l=this.getSizeForValue(c.value),v={pointStyle:"circle",borderWidth:0,...this._model||{},radius:l};(0,be.at)(i,v,a?g.x:t,a?t:g.y)})}}Tt.id="size",Tt.defaults=(0,be.a4)({},[ce.f$.defaults,ei,vo]),Tt.descriptors={_scriptable:!0,_indexable:n=>"range"!==n};class bo extends go{constructor(){super(...arguments),this._model=null}getSizeForValue(i){const t=this._getNormalizedValue(i);return null==t||Number.isNaN(t)?this.options.missing:this.getSizeImpl(t)}getSizeImpl(i){return Tt.prototype.getSizeImpl.call(this,i)}_drawIndicator(){Tt.prototype._drawIndicator.call(this)}}bo.id="sizeLogarithmic",bo.defaults=(0,be.a4)({},[ce.WV.defaults,ei,vo]);class ct extends ce.W_{constructor(){super(...arguments),this.cache=void 0}inRange(i,t){const a=this.getBounds(),o=(Number.isNaN(i)||i>=a.x&&i<=a.x2)&&(Number.isNaN(t)||t>=a.y&&t<=a.y2),r=this.projectionScale.geoPath.projection();if(o&&!Number.isNaN(i)&&!Number.isNaN(t)&&"function"==typeof r.invert){const s=r.invert([i,t]);return null!=s&&function qr(n,i){return(n&&Ya.hasOwnProperty(n.type)?Ya[n.type]:zn)(n,i)}(this.feature,s)}return o}inXRange(i){return this.inRange(i,Number.NaN)}inYRange(i){return this.inRange(Number.NaN,i)}getCenterPoint(){if(this.cache&&this.cache.center)return this.cache.center;let i;if(this.center){const t=this.projectionScale.projection([this.center.longitude,this.center.latitude]);i={x:t[0],y:t[1]}}else{const t=this.projectionScale.geoPath.centroid(this.feature);i={x:t[0],y:t[1]}}return this.cache={...this.cache||{},center:i},i}getBounds(){if(this.cache&&this.cache.bounds)return this.cache.bounds;const i=function gc(n,i){return[[n[0][0]-i,n[0][1]-i],[n[1][0]+i,n[1][1]+i]]}(this.projectionScale.geoPath.bounds(this.feature),this.options.borderWidth/2),t={x:i[0][0],x2:i[1][0],y:i[0][1],y2:i[1][1],width:i[1][0]-i[0][0],height:i[1][1]-i[0][1]};return this.cache={...this.cache||{},bounds:t},t}_drawInCache(i){const t=this.getBounds();if(!Number.isFinite(t.x))return;const a=this.cache&&this.cache.canvas?this.cache.canvas:i.createElement("canvas"),o=Math.floor(t.x),r=Math.floor(t.y),s=Math.ceil(t.x+t.width),c=Math.ceil(t.y+t.height),u=this.pixelRatio||1;a.width=Math.max(s-o,1)*u,a.height=Math.max(c-r,1)*u;const g=a.getContext("2d");g&&(g.clearRect(0,0,a.width,a.height),g.save(),g.scale(u,u),g.translate(-o,-r),this._drawImpl(g),g.restore(),this.cache={...this.cache||{},canvas:a,canvasKey:this._optionsToKey()})}_optionsToKey(){const{options:i}=this;return`${i.backgroundColor};${i.borderColor};${i.borderWidth};${this.pixelRatio}`}_drawImpl(i){const{feature:t}=this,{options:a}=this;i.beginPath(),this.projectionScale.geoPath.context(i)(t),a.backgroundColor&&(i.fillStyle=a.backgroundColor,i.fill()),a.borderColor&&(i.strokeStyle=a.borderColor,i.lineWidth=a.borderWidth,i.stroke())}draw(i){const{feature:t}=this;if(!t)return;(!this.cache||this.cache.canvasKey!==this._optionsToKey())&&this._drawInCache(i.canvas.ownerDocument);const a=this.getBounds();if(this.cache&&this.cache.canvas){const o=Math.floor(a.x),r=Math.floor(a.y),s=Math.ceil(a.x+a.width),c=Math.ceil(a.y+a.height);i.drawImage(this.cache.canvas,o,r,s-o,c-r)}else Number.isFinite(a.x)&&(i.save(),this._drawImpl(i),i.restore())}}ct.id="geoFeature",ct.defaults={...ce.ZL.defaults,outlineBackgroundColor:null,outlineBorderWidth:0,graticuleBorderColor:"#CCCCCC",graticuleBorderWidth:0},ct.defaultRoutes={outlineBorderColor:"borderColor",...ce.ZL.defaultRoutes||{}};const xo={showOutline:!1,showGraticule:!1,clipMap:!0},yo={scales:{projection:{axis:"x",type:$i.id,position:"chartArea",display:!1}}};function To(n){const i={...n};return Object.keys(n).forEach(t=>{let a=t;if(t.startsWith("outline")){const o=t.slice(7);a=o[0].toLowerCase()+o.slice(1)}else{if(!t.startsWith("hoverOutline"))return;a=`hover${t.slice(12)}`}delete i[t],i[a]=n[t]}),i}class Co extends ce.Q7{getGeoDataset(){return super.getDataset()}getGeoOptions(){return this.chart.options}getProjectionScale(){return this.getScaleForId("projection")}linkScales(){const i=this.getGeoDataset(),t=this.getMeta();t.xAxisID="projection",i.xAxisID="projection",t.yAxisID="projection",i.yAxisID="projection",t.xScale=this.getScaleForId("projection"),t.yScale=this.getScaleForId("projection"),this.getProjectionScale().computeBounds(this.resolveOutline())}showOutline(){return(0,be.v)(this.getGeoDataset().showOutline,this.getGeoOptions().showOutline)}clipMap(){return(0,be.v)(this.getGeoDataset().clipMap,this.getGeoOptions().clipMap)}getGraticule(){return(0,be.v)(this.getGeoDataset().showGraticule,this.getGeoOptions().showGraticule)}update(i){super.update(i);const t=this.getMeta(),a=this.getProjectionScale(),o=a.updateBounds();if(this.showOutline()){const r=t.dataset;if(o&&delete r.cache,r.projectionScale=a,r.pixelRatio=this.chart.currentDevicePixelRatio,"resize"!==i){const s=To(this.resolveDatasetElementOptions(i)),c={feature:this.resolveOutline(),options:s};this.updateElement(r,void 0,c,i),this.getGraticule()&&(t.graticule=s)}}else this.getGraticule()&&"resize"!==i&&(t.graticule=To(this.resolveDatasetElementOptions(i)));this.updateElements(t.data,0,t.data.length,i),o&&t.data.forEach(r=>delete r.cache)}resolveOutline(){const t=this.getGeoDataset().outline||{type:"Sphere"};return Array.isArray(t)?{type:"FeatureCollection",features:t}:t}showGraticule(){const i=this.getGraticule(),t=this.getMeta().graticule;if(!i||!t)return;const{ctx:a}=this.chart,r=this.getProjectionScale().geoPath.context(a);if(a.save(),a.beginPath(),"boolean"==typeof i)i&&r(function Ur(){return Qa()()}());else{const s=Qa();i.stepMajor&&s.stepMajor(i.stepMajor),i.stepMinor&&s.stepMinor(i.stepMinor),r(s())}a.strokeStyle=t.graticuleBorderColor,a.lineWidth=t.graticuleBorderWidth,a.stroke(),a.restore()}draw(){const{chart:i}=this,t=this.clipMap();let a=!1;(!0===t||"outline"===t||"outline+graticule"===t)&&(a=!0,(0,be.Y)(i.ctx,i.chartArea)),this.showOutline()&&this.getMeta().dataset&&this.getMeta().dataset.draw.call(this.getMeta().dataset,i.ctx,i.chartArea),!0===t||"graticule"===t||"outline+graticule"===t?a||(0,be.Y)(i.ctx,i.chartArea):a&&(a=!1,(0,be.$)(i.ctx)),this.showGraticule(),!0===t||"items"===t?a||(0,be.Y)(i.ctx,i.chartArea):a&&(a=!1,(0,be.$)(i.ctx)),this.getMeta().data.forEach(o=>o.draw.call(o,i.ctx,i.chartArea)),a&&(a=!1,(0,be.$)(i.ctx))}}function So(n,i,t,a=[],o=[]){ce.i_.addControllers(t),Array.isArray(a)?ce.i_.addElements(...a):ce.i_.addElements(a),Array.isArray(o)?ce.i_.addScales(...o):ce.i_.addScales(o);const r=i;return r.type=n,r}class mn extends Co{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const i=this.getGeoDataset(),t=this.getMeta();t.vAxisID="color",t.rAxisID="color",i.vAxisID="color",i.rAxisID="color",t.rScale=this.getScaleForId("color"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,i.iAxisID=t.xAxisID}_getOtherScale(i){return i}parse(i,t){const a=this.getMeta().rScale,{data:o}=this.getDataset(),r=this._cachedMeta;for(let s=i;s<i+t;s+=1)r._parsed[s]={[a.axis]:a.parse(o[s],s)}}updateElements(i,t,a,o){const r=this.resolveDataElementOptions(t,o),s=this.getSharedOptions(r),c=this.includeOptions(o,s),u=this.getProjectionScale();this.updateSharedOptions(s,o,r);for(let g=t;g<t+a;g+=1){const l=i[g];l.projectionScale=u,l.feature=this._data[g].feature,l.center=this._data[g].center,l.pixelRatio=this.chart.currentDevicePixelRatio;const p=l.getCenterPoint(),h={x:p.x,y:p.y};c&&(h.options=s||this.resolveDataElementOptions(g,o)),this.updateElement(l,g,h,o)}}indexToColor(i){const t=this.getMeta().rScale;return t.getColorForValue(this.getParsed(i)[t.axis])}}mn.id="choropleth",mn.defaults=(0,be.a4)({},[xo,{datasetElementType:ct.id,dataElementType:ct.id}]),mn.overrides=(0,be.a4)({},[yo,{plugins:{tooltip:{callbacks:{title:()=>"",label(n){var i,t,a,o;return null==n.formattedValue?null===(t=null===(i=n.chart.data)||void 0===i?void 0:i.labels)||void 0===t?void 0:t[n.dataIndex]:`${null===(o=null===(a=n.chart.data)||void 0===a?void 0:a.labels)||void 0===o?void 0:o[n.dataIndex]}: ${n.formattedValue}`}}},colors:{enabled:!1}},scales:{color:{type:yt.id,axis:"x"}},elements:{geoFeature:{backgroundColor:n=>null==n.dataIndex?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToColor(n.dataIndex)}}}]);class wo extends ce.kL{constructor(i,t){super(i,So("choropleth",t,mn,ct,[yt,$i]))}}wo.id=mn.id;class _n extends Co{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const i=this.getGeoDataset(),t=this.getMeta();t.vAxisID="size",t.rAxisID="size",i.vAxisID="size",i.rAxisID="size",t.rScale=this.getScaleForId("size"),t.vScale=t.rScale,t.iScale=t.xScale,t.iAxisID=t.xAxisID,i.iAxisID=t.xAxisID}_getOtherScale(i){return i}parse(i,t){const a=this.getMeta().rScale,o=this.getDataset().data,r=this._cachedMeta;for(let s=i;s<i+t;s+=1){const c=o[s];r._parsed[s]={x:c.longitude??c.x,y:c.latitude??c.y,[a.axis]:a.parse(c,s)}}}updateElements(i,t,a,o){const r="reset"===o,s=this.resolveDataElementOptions(t,o),c=this.getSharedOptions(s),u=this.includeOptions(o,c),g=this.getProjectionScale();this.getMeta().rScale._model=s,this.updateSharedOptions(c,o,s);for(let l=t;l<t+a;l+=1){const p=i[l],h=this.getParsed(l),v=g.projection([h.x,h.y]),x={x:v?v[0]:0,y:v?v[1]:0,skip:Number.isNaN(h.x)||Number.isNaN(h.y)};u&&(x.options=c||this.resolveDataElementOptions(l,o),r&&(x.options.radius=0)),this.updateElement(p,l,x,o)}}indexToRadius(i){const t=this.getMeta().rScale;return t.getSizeForValue(this.getParsed(i)[t.axis])}}function vc(n){return n}function Zo(n,i){var t=i.id,a=i.bbox,o=i.properties??{},r=function yc(n,i){var t=function bc(n){if(null==n)return vc;var i,t,a=n.scale[0],o=n.scale[1],r=n.translate[0],s=n.translate[1];return function(c,u){u||(i=t=0);var g=2,l=c.length,p=new Array(l);for(p[0]=(i+=c[0])*a+r,p[1]=(t+=c[1])*o+s;g<l;)p[g]=c[g],++g;return p}}(n.transform),a=n.arcs;function o(l,p){p.length&&p.pop();for(var h=a[l<0?~l:l],v=0,x=h.length;v<x;++v)p.push(t(h[v],v));l<0&&function _c(n,i){for(var t,a=n.length,o=a-i;o<--a;)t=n[o],n[o++]=n[a],n[a]=t}(p,x)}function r(l){return t(l)}function s(l){for(var p=[],h=0,v=l.length;h<v;++h)o(l[h],p);return p.length<2&&p.push(p[0]),p}function c(l){for(var p=s(l);p.length<4;)p.push(p[0]);return p}function u(l){return l.map(c)}return function g(l){var h,p=l.type;switch(p){case"GeometryCollection":return{type:p,geometries:l.geometries.map(g)};case"Point":h=r(l.coordinates);break;case"MultiPoint":h=l.coordinates.map(r);break;case"LineString":h=s(l.arcs);break;case"MultiLineString":h=l.arcs.map(s);break;case"Polygon":h=u(l.arcs);break;case"MultiPolygon":h=l.arcs.map(u);break;default:return null}return{type:p,coordinates:h}}(i)}(n,i);return null==t&&null==a?{type:"Feature",properties:o,geometry:r}:null==a?{type:"Feature",id:t,properties:o,geometry:r}:{type:"Feature",id:t,bbox:a,properties:o,geometry:r}}_n.id="bubbleMap",_n.defaults=(0,be.a4)({},[xo,{dataElementType:ce.od.id,datasetElementType:ct.id,showOutline:!0,clipMap:"outline+graticule"}]),_n.overrides=(0,be.a4)({},[yo,{plugins:{tooltip:{callbacks:{title:()=>"",label(n){var i,t,a,o;return null==n.formattedValue?null===(t=null===(i=n.chart.data)||void 0===i?void 0:i.labels)||void 0===t?void 0:t[n.dataIndex]:`${null===(o=null===(a=n.chart.data)||void 0===a?void 0:a.labels)||void 0===o?void 0:o[n.dataIndex]}: ${n.formattedValue}`}}}},scales:{size:{axis:"x",type:Tt.id}},elements:{point:{radius:n=>null==n.dataIndex?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex),hoverRadius:n=>null==n.dataIndex?null:n.chart.getDatasetMeta(n.datasetIndex).controller.indexToRadius(n.dataIndex)+1}}}]),class mc extends ce.kL{constructor(i,t){super(i,So("bubbleMap",t,_n,ct,[Tt,$i]))}}.id=_n.id;const Tc={Dublin:"Contae \xc1tha Cliath",Monaghan:"Contae Mhuineach\xe1in",Galway:"Contae na Gaillimhe",Cork:"Contae Chorca\xed\xad",Limerick:"Contae Luimnigh",Waterford:"Contae Phort L\xe1irge",Tipperary:"Contae Thiobraid \xc1rann",Louth:"Contae L\xfa",Mayo:"Contae Mhaigh Eo",Meath:"Contae na M\xed",Offaly:"Contae U\xed\xadbh Fhail\xed",Westmeath:"Contae na hIarmh\xed\xad",Wexford:"Contae Loch Garman",Wicklow:"Contae Chill Mhant\xe1in",Kildare:"Contae Chill Dara",Kilkenny:"Contae Chill Chainnigh",Laois:"Contae Laoise",Kerry:"Contae Chiarra\xed",Roscommon:"Contae Ros Com\xe1in",Sligo:"Contae Shligigh",Donegal:"Contae Dh\xfan na nGall",Leitrim:"Contae Liatroma",Longford:"Contae an Longfoirt",Clare:"Contae an Chl\xe1ir",Carlow:"Contae Cheatharlach",Cavan:"Contae an Chabh\xe1in",Belfast:"B\xe9al Feirste",Antrim:"Contae Aontroma",Armagh:"Contae Ard Mhacha",Derry:"Contae Dhoire",Down:"Contae an D\xfain",Tryone:"Contae Th\xedr Eoghain",Fermanagh:"Contae Fhear Manach"};var Ct=S(3546);function Cc(n,i){if(1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("Number of Users (",t.userCounts.total,")")}}function Sc(n,i){if(1&n&&(e.TgZ(0,"mat-card")(1,"mat-card-header",4)(2,"mat-card-title"),e._uU(3,"Story Stats"),e.qZA()(),e.TgZ(4,"mat-card-content")(5,"mat-card")(6,"mat-card-content",12)(7,"b"),e._uU(8,"Total words:"),e.qZA(),e._uU(9),e.qZA()(),e.TgZ(10,"mat-card")(11,"mat-card-content",12)(12,"b"),e._uU(13,"Total stories:"),e.qZA(),e._uU(14),e.qZA()(),e.TgZ(15,"mat-card")(16,"mat-card-content",12)(17,"b"),e._uU(18,"Avg words per story:"),e.qZA(),e._uU(19),e.qZA()(),e.TgZ(20,"mat-card")(21,"mat-card-content",12)(22,"b"),e._uU(23,"Total recordings:"),e.qZA(),e._uU(24),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(9),e.hij(" ",t.storyStats.totalWords," "),e.xp6(5),e.hij(" ",t.storyStats.totalStories," "),e.xp6(5),e.hij(" ",t.storyStats.avgWordCount," "),e.xp6(5),e.hij(" ",t.storyStats.totalRecordings," ")}}function wc(n,i){if(1&n&&(e.TgZ(0,"mat-card")(1,"mat-card-header",4)(2,"mat-card-title"),e._uU(3,"User Stats"),e.qZA()(),e.TgZ(4,"mat-card-content")(5,"mat-card")(6,"mat-card-content",12)(7,"b"),e._uU(8,"Profiles filled out:"),e.qZA(),e._uU(9),e.ALo(10,"percent"),e.qZA()(),e.TgZ(11,"mat-card")(12,"mat-card-content",12)(13,"b"),e._uU(14,"Students with at least 1 story:"),e.qZA(),e._uU(15),e.ALo(16,"percent"),e.qZA()(),e.TgZ(17,"mat-card")(18,"mat-card-content",12)(19,"b"),e._uU(20,"Teaechers with at least 1 classroom:"),e.qZA(),e._uU(21),e.ALo(22,"percent"),e.qZA()(),e.TgZ(23,"mat-card")(24,"mat-card-content",12)(25,"b"),e._uU(26,"Language Settings:"),e.qZA(),e.TgZ(27,"div")(28,"b"),e._uU(29,"GA:"),e.qZA(),e._uU(30),e.ALo(31,"percent"),e.qZA(),e.TgZ(32,"div")(33,"b"),e._uU(34,"EN:"),e.qZA(),e._uU(35),e.ALo(36,"percent"),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(9),e.hij(" ",e.xi3(10,5,t.profileFilledPercentage,"2.2")," "),e.xp6(6),e.hij(" ",e.xi3(16,8,t.studentsWithStoriesPercentage,"2.2")," "),e.xp6(6),e.hij(" ",e.xi3(22,11,t.teachersWithClassroomsPercentage,"2.2")," "),e.xp6(9),e.hij(" ",e.xi3(31,14,t.irishPercentage,"2.2"),""),e.xp6(5),e.hij(" ",e.xi3(36,17,t.englishPercentage,"2.2"),"")}}function Zc(n,i){if(1&n&&(e.TgZ(0,"mat-card")(1,"mat-card-header",4)(2,"mat-card-title"),e._uU(3,"Teacher Stats"),e.qZA()(),e.TgZ(4,"mat-card-content")(5,"mat-card")(6,"mat-card-content",12)(7,"b"),e._uU(8,"Total classrooms:"),e.qZA(),e._uU(9),e.qZA()(),e.TgZ(10,"mat-card")(11,"mat-card-content",12)(12,"b"),e._uU(13,"Total stories with feedback:"),e.qZA(),e._uU(14),e.qZA()(),e.TgZ(15,"mat-card")(16,"mat-card-content",12)(17,"b"),e._uU(18,"Stories with only textual feedback:"),e.qZA(),e._uU(19),e.qZA()(),e.TgZ(20,"mat-card")(21,"mat-card-content",12)(22,"b"),e._uU(23,"Stories with only audio feedback:"),e.qZA(),e._uU(24),e.qZA()(),e.TgZ(25,"mat-card")(26,"mat-card-content",12)(27,"b"),e._uU(28,"Stories with both text/audio feedback:"),e.qZA(),e._uU(29),e.qZA()(),e.TgZ(30,"mat-card")(31,"mat-card-content",12)(32,"b"),e._uU(33,"Total words textual feedback:"),e.qZA(),e._uU(34),e.qZA()(),e.TgZ(35,"mat-card")(36,"mat-card-content",12)(37,"b"),e._uU(38,"Avg words textual feedback:"),e.qZA(),e._uU(39),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(9),e.hij(" ",t.totalClassrooms," "),e.xp6(5),e.hij(" ",t.storyStats.totalFeedback," "),e.xp6(5),e.hij(" ",t.storyStats.onlyTextFeedback," "),e.xp6(5),e.hij(" ",t.storyStats.onlyAudioFeedback," "),e.xp6(5),e.hij(" ",t.storyStats.bothAudioAndText," "),e.xp6(5),e.hij(" ",t.storyStats.totalFeedbackWords," "),e.xp6(5),e.hij(" ",t.storyStats.avgFeedbackWordCount," ")}}function Ac(n,i){1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1," Grammar Errors "),e.qZA())}function Pc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",16),e._UZ(2,"div",17),e.TgZ(3,"div"),e._uU(4),e.qZA()()()),2&n){const t=i.$implicit;e.xp6(2),e.Udp("background-color",t.fillStyle)("border-color",t.strokeStyle),e.xp6(2),e.Oqu(t.text)}}function Mc(n,i){if(1&n&&(e.TgZ(0,"div",13)(1,"div",14),e._uU(2,"Legend"),e.qZA(),e._UZ(3,"hr"),e.YNc(4,Pc,5,5,"div",15),e.qZA()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.pieChartLegendItems)}}let Oc=(()=>{class n{constructor(t,a,o,r,s,c){this.userService=t,this.storyService=a,this.classroomService=o,this.profileService=r,this.http=s,this.ts=c,this.pieChartLegendItems=[],this.totalClassrooms=0,this.profileFilledPercentage=0,this.studentsWithStoriesPercentage=0,this.teachersWithClassroomsPercentage=0,this.englishPercentage=0,this.irishPercentage=0,this.dataLoaded=!1}ngOnInit(){var t=this;return(0,fe.Z)(function*(){t.userCounts=yield(0,ue.z)(t.userService.getUserCountAndStatus()),t.storyStats=yield(0,ue.z)(t.storyService.getStoryStats()),t.grammarErrorCounts=yield(0,ue.z)(t.http.get(`${qe.Z.baseurl}gramadoir/getUserGrammarCounts`)),t.profileCountyCounts=yield(0,ue.z)(t.profileService.getCountyCounts()),t.totalClassrooms=yield(0,ue.z)(t.classroomService.getTotalClassrooms());let a=yield(0,ue.z)(t.profileService.getNumOfProfiles());t.profileFilledPercentage=a/t.userCounts.total;let o=yield(0,ue.z)(t.userService.countUsersWithStories());t.studentsWithStoriesPercentage=o/t.userCounts.totalStudents;let r=yield(0,ue.z)(t.userService.countTeachersWithClassrooms());t.teachersWithClassroomsPercentage=r/t.userCounts.totalTeachers;let s=yield(0,ue.z)(t.userService.getLanguageCount());t.englishPercentage=s.englishCount/t.userCounts.total,t.irishPercentage=s.irishCount/t.userCounts.total,t.dataLoaded=!0,yield t.makeUserGraph(),yield t.makeGrammarGraph(),yield t.getCountyMap()})()}makeUserGraph(){var t=this;return(0,fe.Z)(function*(){let o=document.getElementById("user-counts").getContext("2d");t.userChart=new Dt.kL(o,{type:"bar",data:{labels:["Students","Teachers"],datasets:[{label:"Active",data:[t.userCounts.activeStudents,t.userCounts.activeTeachers],backgroundColor:"green"},{label:"Pending",data:[t.userCounts.pendingStudents,t.userCounts.pendingTeachers],backgroundColor:"yellow"},{label:"Not specified",data:[t.userCounts.totalStudents-(t.userCounts.activeStudents+t.userCounts.pendingStudents),t.userCounts.totalTeachers-(t.userCounts.activeTeachers+t.userCounts.pendingTeachers)],backgroundColor:"red"}]},options:{plugins:{title:{display:!0,text:"Stacked bar chart"}},responsive:!0}})})()}makeGrammarGraph(){var t=this;return(0,fe.Z)(function*(){let o=document.getElementById("grammar-pie-chart").getContext("2d");t.pieChart&&t.pieChart.destroy(),t.pieChart=new Dt.kL(o,{type:"pie",data:{labels:Object.keys(t.grammarErrorCounts),datasets:[{label:"Grammar Error Counts ",data:Object.values(t.grammarErrorCounts),backgroundColor:Object.keys(t.grammarErrorCounts).map(r=>`#${(16777215*Math.random()<<0).toString(16)}`)}]},options:{plugins:{legend:{display:!1}}}}),t.pieChartLegendItems=t.pieChart.legend.legendItems})()}getCountyMap(){var t=this;return(0,fe.Z)(function*(){const a=yield fetch("https://raw.githubusercontent.com/gist/carsonfarmer/9791524/raw/b27ca0d78d46a84664fe7ef709eed4f7621f7a25/irish-counties.topojson").then(u=>u.json()),o=function xc(n,i){return"string"==typeof i&&(i=n.objects[i]),"GeometryCollection"===i.type?{type:"FeatureCollection",features:i.geometries.map(function(t){return Zo(n,t)})}:Zo(n,i)}(a,a.objects.counties).features,r=o.map(u=>u.id),s=o.map(u=>({feature:u,value:t.profileCountyCounts[Tc[u.id]]}));let c=document.getElementById("county-chart");t.countyChart=new wo(c.getContext("2d"),{data:{labels:r,datasets:[{label:"Counties",outline:o,showOutline:!0,data:s}]},options:{plugins:{legend:{display:!1}},scales:{projection:{axis:"x",projection:"equalEarth"}}}})})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ut.K),e.Y36(Mt.N),e.Y36(Ot.u),e.Y36(Zn.H),e.Y36(Ve.eN),e.Y36(De.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-database-stats"]],decls:26,vars:6,consts:[[1,"dashboard"],[1,"dashboard-header"],[1,"dashboard-title"],[1,"cards-container"],[1,"stats-card-header"],[4,"ngIf"],["id","user-counts"],[2,"display","flex"],["class","legendContainer",4,"ngIf"],[1,"pieContainer"],["id","grammar-pie-chart","width","200","height","200"],["id","county-chart"],[1,"cardText"],[1,"legendContainer"],[1,"legend"],[4,"ngFor","ngForOf"],[1,"legendPair"],[1,"legendMarker"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Database Stats"),e.qZA()(),e.TgZ(4,"div",3)(5,"mat-card")(6,"mat-card-header",4),e.YNc(7,Cc,2,1,"mat-card-title",5),e.qZA(),e.TgZ(8,"mat-card-content"),e._UZ(9,"canvas",6),e.qZA()(),e.YNc(10,Sc,25,4,"mat-card",5),e.YNc(11,wc,37,20,"mat-card",5),e.YNc(12,Zc,40,7,"mat-card",5),e.TgZ(13,"mat-card")(14,"mat-card-header",4),e.YNc(15,Ac,2,0,"mat-card-title",5),e.qZA(),e.TgZ(16,"mat-card-content",7),e.YNc(17,Mc,5,1,"div",8),e.TgZ(18,"div",9),e._UZ(19,"canvas",10),e.qZA()()(),e.TgZ(20,"mat-card")(21,"mat-card-header",4)(22,"mat-card-title"),e._uU(23," Map of Users "),e.qZA()(),e.TgZ(24,"mat-card-content"),e._UZ(25,"canvas",11),e.qZA()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",a.dataLoaded),e.xp6(3),e.Q6J("ngIf",a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded),e.xp6(3),e.Q6J("ngIf",a.dataLoaded),e.xp6(2),e.Q6J("ngIf",a.pieChartLegendItems.length>0))},dependencies:[L.sg,L.O5,Ct.a8,Ct.dk,Ct.dn,Ct.n5,L.Zx],styles:[".dashboard[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;background:white;margin-left:5%;padding:20px;margin-bottom:2%}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.cards-container[_ngcontent-%COMP%]{display:flex;align-items:stretch;justify-content:center;gap:1.5rem;flex-wrap:wrap;padding:20px}.stats-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}mat-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid grey;min-width:400px;padding:10px}.cardText[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem}.pieContainer[_ngcontent-%COMP%]{flex:1;width:50%;padding:10px;display:flex;justify-content:center}.legendContainer[_ngcontent-%COMP%]{overflow-y:scroll;width:40%;max-height:200px;max-width:200px;border:1px solid black;border-radius:5px;padding:5px}.legendPair[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem}.legendMarker[_ngcontent-%COMP%]{width:30px;height:10px}.legend[_ngcontent-%COMP%]{padding-top:5px;text-align:center;font-weight:700}"]}),n})();var Ao=S(1745);let Po=(()=>{class n{constructor(t,a){this.http=t,this.auth=a,this.baseUrl=qe.Z.baseurl+"stats/"}getProfileDataByDate(t,a){return this.http.get(this.baseUrl+"getProfileDataByDate/"+t+"/"+a)}getFeatureDataByDate(t,a){return this.http.get(this.baseUrl+"getFeatureDataByDate/"+t+"/"+a)}getFeatureDataSinceLog(t){return this.http.get(this.baseUrl+"getFeatureDataSinceLog/"+t.toString())}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Ve.eN),e.LFG(Ao.$))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ti=S(6469),ni=S(1512),Ee=S(9549),$t=S(7084),Ne=S(9602);function Dc(n,i){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.ts.l.invalid_start_date)}}function qc(n,i){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.ts.l.invalid_end_date)}}function Uc(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"mat-form-field",9)(2,"mat-label"),e._uU(3),e.qZA(),e.TgZ(4,"mat-date-range-input",10),e._UZ(5,"input",11)(6,"input",12),e.qZA(),e._UZ(7,"mat-datepicker-toggle",13)(8,"mat-date-range-picker",null,14),e.YNc(10,Dc,2,1,"mat-error",7),e.YNc(11,qc,2,1,"mat-error",7),e.qZA(),e.TgZ(12,"div"),e._uU(13),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"div",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.getProfileData())}),e._uU(16),e.qZA()()}if(2&n){const t=e.MAs(9),a=e.oxw();e.xp6(3),e.Oqu(a.ts.l.enter_date_range),e.xp6(1),e.Q6J("formGroup",a.range)("rangePicker",t),e.xp6(3),e.Q6J("for",t),e.xp6(3),e.Q6J("ngIf",a.range.controls.start.hasError("matStartDateInvalid")),e.xp6(1),e.Q6J("ngIf",a.range.controls.end.hasError("matEndDateInvalid")),e.xp6(2),e.hij(" (",a.ts.l.no_date_range_entered,") "),e.xp6(3),e.Oqu(a.ts.l.get_data)}}function Ic(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.setDataToDisplay(r.statsData))}),e._uU(2),e.ALo(3,"date"),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,t.date,"d/M/yy, h:mm a")," ")}}function Ec(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Ic,4,4,"div",16),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.previousLogs)}}function Nc(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",8),e.YNc(1,Ec,2,1,"div",7),e._UZ(2,"br"),e.TgZ(3,"div",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addNewProfileData())}),e._uU(4),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.previousLogs),e.xp6(3),e.Oqu(t.ts.l.add_data_log)}}function Lc(n,i){if(1&n&&(e.TgZ(0,"div",18)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.ts.l.compiling_data)}}function kc(n,i){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",t.ts.l.profiles_found,": ",t.numProfilesFound,"")}}function Fc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Rc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Yc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit,a=e.oxw(2);e.xp6(2),e.AsE(" ",a.ts.l.users_not_from_ireland," : ",t.value," ")}}function Bc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function jc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Hc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function zc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Jc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function $c(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Gc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Qc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Wc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Vc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Kc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Xc(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function el(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function tl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function nl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function il(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",20),e._uU(2),e.qZA(),e.TgZ(3,"mat-accordion",21)(4,"mat-expansion-panel")(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"b"),e._uU(8),e.qZA()(),e.TgZ(9,"mat-panel-description",22),e._uU(10),e.qZA()(),e.YNc(11,Fc,3,2,"div",23),e.ALo(12,"keyvalue"),e.qZA(),e.TgZ(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title")(16,"b"),e._uU(17),e.qZA()(),e.TgZ(18,"mat-panel-description",22),e._uU(19),e.qZA()(),e.YNc(20,Rc,3,2,"div",23),e.ALo(21,"keyvalue"),e.qZA(),e.TgZ(22,"mat-expansion-panel")(23,"mat-expansion-panel-header")(24,"mat-panel-title")(25,"b"),e._uU(26),e.qZA()(),e.TgZ(27,"mat-panel-description",22),e._uU(28),e.qZA()(),e.TgZ(29,"div",24)(30,"div"),e.YNc(31,Yc,3,2,"div",23),e.ALo(32,"keyvalue"),e.qZA(),e.TgZ(33,"div"),e.YNc(34,Bc,3,2,"div",23),e.ALo(35,"keyvalue"),e.qZA()()(),e.TgZ(36,"mat-expansion-panel")(37,"mat-expansion-panel-header")(38,"mat-panel-title")(39,"b"),e._uU(40),e.qZA()(),e.TgZ(41,"mat-panel-description",22),e._uU(42),e.qZA()(),e.YNc(43,jc,3,2,"div",23),e.ALo(44,"keyvalue"),e.qZA(),e.TgZ(45,"mat-expansion-panel")(46,"mat-expansion-panel-header")(47,"mat-panel-title")(48,"b"),e._uU(49),e.qZA()(),e.TgZ(50,"mat-panel-description",22),e._uU(51),e.qZA()(),e.YNc(52,Hc,3,2,"div",23),e.ALo(53,"keyvalue"),e.qZA(),e.TgZ(54,"mat-expansion-panel")(55,"mat-expansion-panel-header")(56,"mat-panel-title")(57,"b"),e._uU(58),e.qZA()(),e.TgZ(59,"mat-panel-description",22),e._uU(60),e.qZA()(),e.YNc(61,zc,3,2,"div",23),e.ALo(62,"keyvalue"),e.qZA(),e.TgZ(63,"mat-expansion-panel")(64,"mat-expansion-panel-header")(65,"mat-panel-title")(66,"b"),e._uU(67),e.qZA()(),e.TgZ(68,"mat-panel-description",22),e._uU(69),e.qZA()(),e.YNc(70,Jc,3,2,"div",23),e.ALo(71,"keyvalue"),e.qZA(),e.TgZ(72,"mat-expansion-panel")(73,"mat-expansion-panel-header")(74,"mat-panel-title")(75,"b"),e._uU(76),e.qZA()(),e.TgZ(77,"mat-panel-description",22),e._uU(78),e.qZA()(),e.YNc(79,$c,3,2,"div",23),e.ALo(80,"keyvalue"),e.qZA(),e.TgZ(81,"mat-expansion-panel")(82,"mat-expansion-panel-header")(83,"mat-panel-title")(84,"b"),e._uU(85),e.qZA()(),e.TgZ(86,"mat-panel-description",22),e._uU(87),e.qZA()(),e.YNc(88,Gc,3,2,"div",23),e.ALo(89,"keyvalue"),e.qZA(),e.TgZ(90,"mat-expansion-panel")(91,"mat-expansion-panel-header")(92,"mat-panel-title")(93,"b"),e._uU(94),e.qZA()(),e.TgZ(95,"mat-panel-description",22),e._uU(96),e.qZA()(),e.YNc(97,Qc,3,2,"div",23),e.ALo(98,"keyvalue"),e.qZA(),e.TgZ(99,"mat-expansion-panel")(100,"mat-expansion-panel-header")(101,"mat-panel-title")(102,"b"),e._uU(103),e.qZA()(),e.TgZ(104,"mat-panel-description",22),e._uU(105),e.qZA()(),e.YNc(106,Wc,3,2,"div",23),e.ALo(107,"keyvalue"),e.qZA(),e.TgZ(108,"mat-expansion-panel")(109,"mat-expansion-panel-header")(110,"mat-panel-title")(111,"b"),e._uU(112),e.qZA()(),e.TgZ(113,"mat-panel-description",22),e._uU(114),e.qZA()(),e.YNc(115,Vc,3,2,"div",23),e.ALo(116,"keyvalue"),e.qZA(),e.TgZ(117,"mat-expansion-panel")(118,"mat-expansion-panel-header")(119,"mat-panel-title")(120,"b"),e._uU(121),e.qZA()(),e.TgZ(122,"mat-panel-description",22),e._uU(123),e.qZA()(),e.YNc(124,Kc,3,2,"div",23),e.ALo(125,"keyvalue"),e.qZA(),e.TgZ(126,"mat-expansion-panel")(127,"mat-expansion-panel-header")(128,"mat-panel-title")(129,"b"),e._uU(130),e.qZA()(),e.TgZ(131,"mat-panel-description",22),e._uU(132),e.qZA()(),e.YNc(133,Xc,3,2,"div",23),e.ALo(134,"keyvalue"),e.qZA(),e.TgZ(135,"mat-expansion-panel")(136,"mat-expansion-panel-header")(137,"mat-panel-title")(138,"b"),e._uU(139),e.qZA()(),e.TgZ(140,"mat-panel-description",22),e._uU(141),e.qZA()(),e.YNc(142,el,3,2,"div",23),e.ALo(143,"keyvalue"),e.qZA(),e.TgZ(144,"mat-expansion-panel")(145,"mat-expansion-panel-header")(146,"mat-panel-title")(147,"b"),e._uU(148),e.qZA()(),e.TgZ(149,"mat-panel-description",22),e._uU(150),e.qZA()(),e.YNc(151,tl,3,2,"div",23),e.ALo(152,"keyvalue"),e.qZA(),e.TgZ(153,"mat-expansion-panel")(154,"mat-expansion-panel-header")(155,"mat-panel-title")(156,"b"),e._uU(157),e.qZA()(),e.TgZ(158,"mat-panel-description",22),e._uU(159),e.qZA()(),e.YNc(160,nl,3,2,"div",23),e.ALo(161,"keyvalue"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.personal_info," "),e.xp6(6),e.Oqu(t.ts.l.gender),e.xp6(2),e.hij(" ",t.ts.l.gender_of_users," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,53,t.dataToDisplay.gender)),e.xp6(6),e.Oqu(t.ts.l.age),e.xp6(2),e.hij(" ",t.ts.l.age_of_users," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(21,55,t.dataToDisplay.age)),e.xp6(6),e.Oqu(t.ts.l.country),e.xp6(2),e.hij(" ",t.ts.l.countries_of_users," "),e.xp6(3),e.Q6J("ngForOf",e.lcZ(32,57,t.dataToDisplay.notFromIreland)),e.xp6(3),e.Q6J("ngForOf",e.lcZ(35,59,t.dataToDisplay.country)),e.xp6(6),e.Oqu(t.ts.l.county),e.xp6(2),e.hij(" ",t.ts.l.county_of_users," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(44,61,t.dataToDisplay.county)),e.xp6(6),e.hij(" ",t.ts.l.student_school_level," "),e.xp6(2),e.hij(" ",t.ts.l.which_level_type_of_schooling," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(53,63,t.dataToDisplay.studentSchoolLevel)),e.xp6(6),e.hij(" ",t.ts.l.primary_year," "),e.xp6(2),e.hij(" ",t.ts.l.which_primary_year," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(62,65,t.dataToDisplay.primaryYear)),e.xp6(6),e.hij(" ",t.ts.l.secondary_year," "),e.xp6(2),e.hij(" ",t.ts.l.which_secondary_year," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(71,67,t.dataToDisplay.secondaryYear)),e.xp6(6),e.hij(" ",t.ts.l.school_type," "),e.xp6(2),e.hij(" ",t.ts.l.which_type_primary_secondary," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(80,69,t.dataToDisplay.studentSchoolType)),e.xp6(6),e.hij(" ",t.ts.l.third_level_studies," "),e.xp6(2),e.hij(" ",t.ts.l.what_third_level_students_study," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(89,71,t.dataToDisplay.thirdLevelOption)),e.xp6(6),e.hij(" ",t.ts.l.other_studies," "),e.xp6(2),e.hij(" ",t.ts.l.other_third_level_studies," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(98,73,t.dataToDisplay.otherStudies)),e.xp6(6),e.hij(" ",t.ts.l.third_level_year," "),e.xp6(2),e.hij(" ",t.ts.l.what_third_level_year," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(107,75,t.dataToDisplay.thirdLevelYear)),e.xp6(6),e.hij(" ",t.ts.l.USA_school," "),e.xp6(2),e.hij(" ",t.ts.l.what_students_study_in_USA," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(116,77,t.dataToDisplay.usaOption)),e.xp6(6),e.hij(" ",t.ts.l.postgrad_studies," "),e.xp6(2),e.hij(" ",t.ts.l.what_postgrad_studying," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(125,79,t.dataToDisplay.otherPostgradStudies)),e.xp6(6),e.hij(" ",t.ts.l.immersion_course," "),e.xp6(2),e.hij(" ",t.ts.l.students_attending_immersion_course," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(134,81,t.dataToDisplay.immersionCourse)),e.xp6(6),e.hij(" ",t.ts.l.teacher_school_types," "),e.xp6(2),e.hij(" ",t.ts.l.school_level_of_teachers," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(143,83,t.dataToDisplay.teacherSchoolTypes)),e.xp6(6),e.hij(" ",t.ts.l.teacher_primary_school," "),e.xp6(2),e.hij(" ",t.ts.l.type_of_primary_teacher," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(152,85,t.dataToDisplay.teacherPrimaryType)),e.xp6(6),e.hij(" ",t.ts.l.teacher_secondary_school," "),e.xp6(2),e.hij(" ",t.ts.l.type_of_secondary_teacher," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(161,87,t.dataToDisplay.teacherSecondaryType))}}function al(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function ol(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function rl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function sl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function cl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function ll(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function dl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," years : ",t.value," ")}}function fl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function ul(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",20),e._uU(2),e.qZA(),e.TgZ(3,"mat-accordion",21)(4,"mat-expansion-panel")(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"b"),e._uU(8),e.qZA()(),e.TgZ(9,"mat-panel-description",22),e._uU(10),e.qZA()(),e.YNc(11,al,3,2,"div",23),e.ALo(12,"keyvalue"),e.qZA(),e.TgZ(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title")(16,"b"),e._uU(17),e.qZA()(),e.TgZ(18,"mat-panel-description",22),e._uU(19),e.qZA()(),e.YNc(20,ol,3,2,"div",23),e.ALo(21,"keyvalue"),e.qZA(),e.TgZ(22,"mat-expansion-panel")(23,"mat-expansion-panel-header")(24,"mat-panel-title")(25,"b"),e._uU(26),e.qZA()(),e.TgZ(27,"mat-panel-description",22),e._uU(28),e.qZA()(),e.YNc(29,rl,3,2,"div",23),e.ALo(30,"keyvalue"),e.qZA(),e.TgZ(31,"mat-expansion-panel")(32,"mat-expansion-panel-header")(33,"mat-panel-title")(34,"b"),e._uU(35),e.qZA()(),e.TgZ(36,"mat-panel-description",22),e._uU(37),e.qZA()(),e.YNc(38,sl,3,2,"div",23),e.ALo(39,"keyvalue"),e.qZA(),e.TgZ(40,"mat-expansion-panel")(41,"mat-expansion-panel-header")(42,"mat-panel-title")(43,"b"),e._uU(44),e.qZA()(),e.TgZ(45,"mat-panel-description",22),e._uU(46),e.qZA()(),e.YNc(47,cl,3,2,"div",23),e.ALo(48,"keyvalue"),e.qZA(),e.TgZ(49,"mat-expansion-panel")(50,"mat-expansion-panel-header")(51,"mat-panel-title")(52,"b"),e._uU(53),e.qZA()(),e.TgZ(54,"mat-panel-description",22),e._uU(55),e.qZA()(),e.YNc(56,ll,3,2,"div",23),e.ALo(57,"keyvalue"),e.qZA(),e.TgZ(58,"mat-expansion-panel")(59,"mat-expansion-panel-header")(60,"mat-panel-title")(61,"b"),e._uU(62),e.qZA()(),e.TgZ(63,"mat-panel-description",22),e._uU(64),e.qZA()(),e.YNc(65,dl,3,2,"div",23),e.ALo(66,"keyvalue"),e.qZA(),e.TgZ(67,"mat-expansion-panel")(68,"mat-expansion-panel-header")(69,"mat-panel-title")(70,"b"),e._uU(71),e.qZA()(),e.TgZ(72,"mat-panel-description",22),e._uU(73),e.qZA()(),e.YNc(74,fl,3,2,"div",23),e.ALo(75,"keyvalue"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.language_competence," "),e.xp6(6),e.Oqu(t.ts.l.native_speaker),e.xp6(2),e.hij(" ",t.ts.l.status_of_native_speakers," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,25,t.dataToDisplay.nativeSpeakerStatus)),e.xp6(6),e.Oqu(t.ts.l.dialect),e.xp6(2),e.hij(" ",t.ts.l.dialect_preference," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(21,27,t.dataToDisplay.dialectPreference)),e.xp6(6),e.Oqu(t.ts.l.spoken_comprehension_level_of_users),e.xp6(2),e.hij(" ",t.ts.l.spoken_comprehension_level_of_users," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(30,29,t.dataToDisplay.spokenComprehensionLevel)),e.xp6(6),e.Oqu(t.ts.l.other_languages),e.xp6(2),e.hij(" ",t.ts.l.other_languages_at_home," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(39,31,t.dataToDisplay.otherLanguages)),e.xp6(6),e.hij(" ",t.ts.l.father_native_tongue," "),e.xp6(2),e.hij(" ",t.ts.l.native_tongue_father," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(48,33,t.dataToDisplay.fatherNativeTongue)),e.xp6(6),e.hij(" ",t.ts.l.mother_native_tongue," "),e.xp6(2),e.hij(" ",t.ts.l.native_tongue_mother," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(57,35,t.dataToDisplay.motherNativeTongue)),e.xp6(6),e.hij(" ",t.ts.l.years_of_irish," "),e.xp6(2),e.hij(" ",t.ts.l.number_of_years_students_study_irish," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(66,37,t.dataToDisplay.yearsOfIrish)),e.xp6(6),e.hij(" ",t.ts.l.other_language_proficiency," "),e.xp6(2),e.hij(" ",t.ts.l.other_languages_users_speak," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(75,39,t.dataToDisplay.otherLanguageProficiency))}}function pl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function hl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function gl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function ml(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function _l(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function vl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function bl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function xl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div"),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function yl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.AsE(" ",t.key," : ",t.value," ")}}function Tl(n,i){if(1&n&&(e.TgZ(0,"div")(1,"div",20),e._uU(2),e.qZA(),e.TgZ(3,"mat-accordion",21)(4,"mat-expansion-panel")(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"b"),e._uU(8),e.qZA()(),e.TgZ(9,"mat-panel-description",22),e._uU(10),e.qZA()(),e.YNc(11,pl,3,2,"div",23),e.ALo(12,"keyvalue"),e.qZA(),e.TgZ(13,"mat-expansion-panel")(14,"mat-expansion-panel-header")(15,"mat-panel-title")(16,"b"),e._uU(17),e.qZA()(),e.TgZ(18,"mat-panel-description",22),e._uU(19),e.qZA()(),e.YNc(20,hl,3,2,"div",23),e.ALo(21,"keyvalue"),e.qZA(),e.TgZ(22,"mat-expansion-panel")(23,"mat-expansion-panel-header")(24,"mat-panel-title")(25,"b"),e._uU(26),e.qZA()(),e.TgZ(27,"mat-panel-description",22),e._uU(28),e.qZA()(),e.TgZ(29,"div",24)(30,"div")(31,"div",26),e._uU(32),e.qZA(),e.YNc(33,gl,3,2,"div",23),e.ALo(34,"keyvalue"),e.qZA(),e.TgZ(35,"div")(36,"div",26),e._uU(37),e.qZA(),e.YNc(38,ml,3,2,"div",23),e.ALo(39,"keyvalue"),e.qZA()()(),e.TgZ(40,"mat-expansion-panel")(41,"mat-expansion-panel-header")(42,"mat-panel-title")(43,"b"),e._uU(44),e.qZA()(),e.TgZ(45,"mat-panel-description",22),e._uU(46),e.qZA()(),e.TgZ(47,"div",24)(48,"div")(49,"div",26),e._uU(50),e.qZA(),e.YNc(51,_l,3,2,"div",23),e.ALo(52,"keyvalue"),e.qZA(),e.TgZ(53,"div")(54,"div",26),e._uU(55),e.qZA(),e.YNc(56,vl,3,2,"div",23),e.ALo(57,"keyvalue"),e.qZA()()(),e.TgZ(58,"mat-expansion-panel")(59,"mat-expansion-panel-header")(60,"mat-panel-title")(61,"b"),e._uU(62),e.qZA()(),e.TgZ(63,"mat-panel-description",22),e._uU(64),e.qZA()(),e.TgZ(65,"div",24)(66,"div")(67,"div",26),e._uU(68),e.qZA(),e.YNc(69,bl,3,2,"div",23),e.ALo(70,"keyvalue"),e.qZA(),e.TgZ(71,"div")(72,"div",26),e._uU(73),e.qZA(),e.YNc(74,xl,3,2,"div",23),e.ALo(75,"keyvalue"),e.qZA()()(),e.TgZ(76,"mat-expansion-panel")(77,"mat-expansion-panel-header")(78,"mat-panel-title")(79,"b"),e._uU(80),e.qZA()(),e.TgZ(81,"mat-panel-description",22),e._uU(82),e.qZA()(),e.YNc(83,yl,3,2,"div",23),e.ALo(84,"keyvalue"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.exposure_to_irish," "),e.xp6(6),e.Oqu(t.ts.l.speaking_frequency),e.xp6(2),e.hij(" ",t.ts.l.frequency_users_speak_irish," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(12,28,t.dataToDisplay.speakingFrequency)),e.xp6(6),e.Oqu(t.ts.l.speak_with),e.xp6(2),e.hij(" ",t.ts.l.with_whom_speak_irish," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(21,30,t.dataToDisplay.speakWith)),e.xp6(6),e.Oqu(t.ts.l.irish_media),e.xp6(2),e.hij(" ",t.ts.l.how_often_media," "),e.xp6(4),e.hij(" ",t.ts.l.type,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(34,32,t.dataToDisplay.irishMedia)),e.xp6(4),e.hij(" ",t.ts.l.how_often,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(39,34,t.dataToDisplay.howOftenMedia)),e.xp6(6),e.Oqu(t.ts.l.irish_reading),e.xp6(2),e.hij(" ",t.ts.l.how_often_reading," "),e.xp6(4),e.hij(" ",t.ts.l.type,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(52,36,t.dataToDisplay.irishReading)),e.xp6(4),e.hij(" ",t.ts.l.how_often,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(57,38,t.dataToDisplay.howOftenReading)),e.xp6(6),e.Oqu(t.ts.l.irish_writing),e.xp6(2),e.hij(" ",t.ts.l.how_often_writing," "),e.xp6(4),e.hij(" ",t.ts.l.type,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(70,40,t.dataToDisplay.irishWriting)),e.xp6(4),e.hij(" ",t.ts.l.how_often,": "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(75,42,t.dataToDisplay.howOftenWriting)),e.xp6(6),e.hij(" ",t.ts.l.synth_opinion," "),e.xp6(2),e.hij(" ",t.ts.l.user_opinion_synthetic_voice," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(84,44,t.dataToDisplay.synthOpinion))}}let Cl=(()=>{class n{constructor(t,a,o){this.statsService=t,this.ts=a,this.engagement=o,this.range=new Q.nJ({start:new Q.p4,end:new Q.p4}),this.previousLogs=[],this.dataToDisplay={},this.selectDateRange=!0,this.dataLoaded=!0,this.numProfilesFound=0}ngOnInit(){this.engagement.getPreviousAnalysisData("PROFILE-STATS").subscribe(t=>{this.previousLogs=t.sort((a,o)=>o.date-a.date),console.log("previous profiles: ",this.previousLogs)})}getProfileData(){var t=this;return(0,fe.Z)(function*(){t.dataLoaded=!1;let a=t.range.get("start").value?t.range.get("start").value:"empty",o=t.range.get("end").value?t.range.get("end").value:"empty";return new Promise((r,s)=>{t.statsService.getProfileDataByDate(a,o).subscribe(function(){var c=(0,fe.Z)(function*(u){console.log("Profiles returned for given dates: ",u),yield t.calculateStats(u),t.numProfilesFound=u.length,t.dataLoaded=!0,r()});return function(u){return c.apply(this,arguments)}}())})})()}calculateStats(t){var a=this;return(0,fe.Z)(function*(){let o={};console.log("PROFILES TO CALCULATE: ",t),t.forEach(s=>{if(void 0!==(s=s[0])){if(s.age&&(o.age||(o.age=[]),o.age.push(s.age)),s.country&&(o.country||(o.country=[]),o.country.push(s.country)),s.county&&(o.county||(o.county=[]),o.county.push(s.county)),s.dialectPreference&&(o.dialectPreference||(o.dialectPreference=[]),o.dialectPreference.push(s.dialectPreference)),s.gender&&(o.gender||(o.gender=[]),o.gender.push(s.gender)),s.fatherNativeTongue&&(o.fatherNativeTongue||(o.fatherNativeTongue=[]),o.fatherNativeTongue.push(s.fatherNativeTongue.toLowerCase())),s.irishMedia){o.irishMedia||(o.irishMedia=[]);for(let c in s.irishMedia)s.irishMedia[c]&&o.irishMedia.push(c)}if(s.howOftenMedia&&(o.howOftenMedia||(o.howOftenMedia=[]),o.howOftenMedia.push(s.howOftenMedia)),s.irishReading){o.irishReading||(o.irishReading=[]);for(let c in s.irishMedia)s.irishReading[c]&&o.irishReading.push(c)}if(s.howOftenReading&&(o.howOftenReading||(o.howOftenReading=[]),o.howOftenReading.push(s.howOftenReading)),s.irishWriting){o.irishWriting||(o.irishWriting=[]);for(let c in s.irishWriting)s.irishWriting[c]&&o.irishWriting.push(c)}if(s.howOftenWriting&&(o.howOftenWriting||(o.howOftenWriting=[]),o.howOftenWriting.push(s.howOftenWriting)),s.immersionCourse&&(o.immersionCourse||(o.immersionCourse=[]),o.immersionCourse.push(s.immersionCourse)),s.motherNativeTongue&&(o.motherNativeTongue||(o.motherNativeTongue=[]),o.motherNativeTongue.push(s.motherNativeTongue.toLowerCase())),s.nativeSpeakerStatus&&(o.nativeSpeakerStatus||(o.nativeSpeakerStatus=[]),o.nativeSpeakerStatus.push(s.nativeSpeakerStatus)),s.notFromIreland&&(o.notFromIreland||(o.notFromIreland=[]),o.notFromIreland.push(s.notFromIreland)),s.otherCountryOfStudy&&(o.otherCountryOfStudy||(o.otherCountryOfStudy=[]),o.otherCountryOfStudy.push(s.otherCountryOfStudy.toLowerCase())),s.otherLanguageProficiency&&(o.otherLanguageProficiency||(o.otherLanguageProficiency=[]),o.otherLanguageProficiency.push(s.otherLanguageProficiency.toLowerCase())),s.otherLanguages&&(o.otherLanguages||(o.otherLanguages=[]),o.otherLanguages.push(s.otherLanguages.toLowerCase())),s.otherPostgradStudies&&(o.otherPostgradStudies||(o.otherPostgradStudies=[]),o.otherPostgradStudies.push(s.otherPostgradStudies.toLowerCase())),s.otherStudies&&(o.otherStudies||(o.otherStudies=[]),o.otherStudies.push(s.otherStudies.toLowerCase())),s.postgradYear&&(o.postgradYear||(o.postgradYear=[]),o.postgradYear.push(s.postgradYear)),s.primaryYear&&(o.primaryYear||(o.primaryYear=[]),o.primaryYear.push(s.primaryYear)),s.secondaryYear&&(o.secondaryYear||(o.secondaryYear=[]),o.secondaryYear.push(s.secondaryYear)),s.speakWith&&(o.speakWith||(o.speakWith=[]),o.speakWith.push(s.speakWith)),s.speakingFrequency&&(o.speakingFrequency||(o.speakingFrequency=[]),o.speakingFrequency.push(s.speakingFrequency)),s.spokenComprehensionLevel&&(o.spokenComprehensionLevel||(o.spokenComprehensionLevel=[]),o.spokenComprehensionLevel.push(s.spokenComprehensionLevel)),s.studentSchoolLevel&&(o.studentSchoolLevel||(o.studentSchoolLevel=[]),o.studentSchoolLevel.push(s.studentSchoolLevel)),s.studentSchoolType&&(o.studentSchoolType||(o.studentSchoolType=[]),o.studentSchoolType.push(s.studentSchoolType)),s.synthOpinion&&(o.synthOpinion||(o.synthOpinion=[]),o.synthOpinion.push(s.synthOpinion)),s.teacherPrimaryType&&(o.teacherPrimaryType||(o.teacherPrimaryType=[]),o.teacherPrimaryType.push(s.teacherPrimaryType)),s.teacherSecondaryType&&(o.teacherSecondaryType||(o.teacherSecondaryType=[]),o.teacherSecondaryType.push(s.teacherSecondaryType)),s.teacherSchoolTypes){o.teacherSchoolTypes||(o.teacherSchoolTypes=[]);for(let c in s.teacherSchoolTypes)s.teacherSchoolTypes[c]&&o.teacherSchoolTypes.push(c)}s.thirdLevelOption&&(o.thirdLevelOption||(o.thirdLevelOption=[]),o.thirdLevelOption.push(s.thirdLevelOption)),s.thirdLevelYear&&(o.thirdLevelYear||(o.thirdLevelYear=[]),o.thirdLevelYear.push(s.thirdLevelYear)),s.usaOption&&(o.usaOption||(o.usaOption=[]),o.usaOption.push(s.usaOption)),s.yearsOfIrish&&(o.yearsOfIrish||(o.yearsOfIrish=[]),o.yearsOfIrish.push(s.yearsOfIrish))}});let r={};console.log("totals: ",o),r.age=yield a.getTotals(o.age),r.country=yield a.getTotals(o.country),r.county=yield a.getTotals(o.county),r.dialectPreference=yield a.getTotals(o.dialectPreference),r.gender=yield a.getTotals(o.gender),r.fatherNativeTongue=yield a.getTotals(o.fatherNativeTongue),r.irishMedia=yield a.getTotals(o.irishMedia),r.howOftenMedia=yield a.getTotals(o.howOftenMedia),r.irishReading=yield a.getTotals(o.irishReading),r.howOftenReading=yield a.getTotals(o.howOftenReading),r.irishWriting=yield a.getTotals(o.irishWriting),r.howOftenWriting=yield a.getTotals(o.howOftenWriting),r.immersionCourse=yield a.getTotals(o.immersionCourse),r.motherNativeTongue=yield a.getTotals(o.motherNativeTongue),r.nativeSpeakerStatus=yield a.getTotals(o.nativeSpeakerStatus),r.notFromIreland=yield a.getTotals(o.notFromIreland),r.otherCountryOfStudy=yield a.getTotals(o.otherCountryOfStudy),r.otherLanguageProficiency=yield a.getTotals(o.otherLanguageProficiency),r.otherLanguages=yield a.getTotals(o.otherLanguages),r.otherPostgradStudies=yield a.getTotals(o.otherPostgradStudies),r.otherStudies=yield a.getTotals(o.otherStudies),r.postgradYear=yield a.getTotals(o.postgradYear),r.primaryYear=yield a.getTotals(o.primaryYear),r.secondaryYear=yield a.getTotals(o.secondaryYear),r.speakWith=yield a.getTotals(o.speakWith),r.speakingFrequency=yield a.getTotals(o.speakingFrequency),r.spokenComprehensionLevel=yield yield a.getTotals(o.spokenComprehensionLevel),r.studentSchoolLevel=yield a.getTotals(o.studentSchoolLevel),r.studentSchoolType=yield a.getTotals(o.studentSchoolType),r.synthOpinion=yield a.getTotals(o.synthOpinion),r.teacherPrimaryType=yield a.getTotals(o.teacherPrimaryType),r.teacherSecondaryType=yield a.getTotals(o.teacherSecondaryType),r.teacherSchoolTypes=yield a.getTotals(o.teacherSchoolTypes),r.thirdLevelOption=yield a.getTotals(o.thirdLevelOption),r.usaOption=yield a.getTotals(o.usaOption),r.yearsOfIrish=yield a.getTotals(o.yearsOfIrish),a.setDataToDisplay(r)})()}getTotals(t){return(0,fe.Z)(function*(){let a={};return t&&t.forEach(o=>a[o]=(a[o]||0)+1),a})()}addNewProfileData(){var t=this;return(0,fe.Z)(function*(){if(t.dataLoaded=!1,t.previousLogs.length>0){let a=t.previousLogs[t.previousLogs.length-1];console.log(t.previousLogs),console.log("Last log: ",a),new Promise((o,r)=>{t.statsService.getProfileDataByDate(a.date,"empty").subscribe(function(){var s=(0,fe.Z)(function*(c){yield t.calculateStats(c),console.log("Most recent added data: ",t.dataToDisplay);let u={},g={};Object.keys(t.dataToDisplay).forEach(l=>{a.statsData[l]?g=a.statsData[l]:(u[l]={},g={}),Object.entries(t.dataToDisplay[l]).forEach(([p,h])=>{g[p]=a.statsData[l]&&a.statsData[l][p]?h+a.statsData[l][p]:h}),u[l]=g}),console.log("Profile to log: ",u),t.engagement.addAnalysisEvent(ni.tw["PROFILE-STATS"],u),t.setDataToDisplay(u),t.ngOnInit(),o()});return function(c){return s.apply(this,arguments)}}())})}else yield t.getProfileData(),t.engagement.addAnalysisEvent(ni.tw["PROFILE-STATS"],t.dataToDisplay);t.dataLoaded=!0})()}setDataToDisplay(t){this.dataLoaded=!1,this.dataToDisplay={},this.dataToDisplay=t,console.log("Data sent to function: ",t),console.log("Profile to display: ",this.dataToDisplay),console.log("previous profiles: ",this.previousLogs.length),this.dataLoaded=!0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Po),e.Y36(De.D),e.Y36(ti.M))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile-stats"]],decls:16,vars:10,consts:[[1,"headerTitle"],[1,"dataOptions"],[1,"option",3,"click"],[1,"adminContent"],["class","datePicker",4,"ngIf"],["class","adminLoaderContainer",4,"ngIf"],["class","profileNumber",4,"ngIf"],[4,"ngIf"],[1,"datePicker"],["appearance","fill"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],[1,"submitButton",3,"click"],["class","logContainer",4,"ngFor","ngForOf"],[1,"logContainer"],[1,"adminLoaderContainer"],[1,"profileNumber"],[1,"profileHeader"],["multi","",1,"displayData"],[1,"panelDescription"],[4,"ngFor","ngForOf"],[1,"sideBySide"],[1,"data"],[1,"dataLabel"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1)(3,"div",2),e.NdJ("click",function(){return a.selectDateRange=!0}),e._uU(4),e.qZA(),e._uU(5," | "),e.TgZ(6,"div",2),e.NdJ("click",function(){return a.selectDateRange=!1}),e._uU(7),e.qZA()(),e.TgZ(8,"div",3),e.YNc(9,Uc,17,8,"div",4),e.YNc(10,Nc,5,2,"div",4),e.qZA(),e.YNc(11,Lc,4,1,"div",5),e.YNc(12,kc,2,2,"div",6),e.YNc(13,il,162,89,"div",7),e.YNc(14,ul,76,41,"div",7),e.YNc(15,Tl,85,46,"div",7)),2&t&&(e.xp6(1),e.hij(" ",a.ts.l.profile_stats," "),e.xp6(3),e.hij(" ",a.ts.l.date_range,""),e.xp6(3),e.hij(" ",a.ts.l.previous_data," "),e.xp6(2),e.Q6J("ngIf",a.selectDateRange),e.xp6(1),e.Q6J("ngIf",!a.selectDateRange),e.xp6(1),e.Q6J("ngIf",!a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded&&a.selectDateRange),e.xp6(1),e.Q6J("ngIf",a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded))},dependencies:[L.sg,L.O5,Q.Fj,Q.JJ,Q.JL,Q.sg,Q.u,Ee.TO,Ee.KE,Ee.hX,Ee.R9,$t.pp,$t.ib,$t.yz,$t.yK,$t.u4,Ne.nW,Ne.wx,Ne.zY,Ne.By,Ne._g,Vt.P,L.uU,L.Nd],styles:[".headerTitle[_ngcontent-%COMP%]{font-size:16pt;padding-top:10px}.dataOptions[_ngcontent-%COMP%]{padding-top:20px;display:flex;align-items:center;justify-content:center}.option[_ngcontent-%COMP%]{padding-right:5px;padding-top:5px}.option[_ngcontent-%COMP%]:hover{color:var(--scealai-green);text-decoration:none;cursor:pointer}.adminContent[_ngcontent-%COMP%]{justify-content:space-around}.container[_ngcontent-%COMP%]{padding-bottom:20px}.datePicker[_ngcontent-%COMP%]{padding-top:10px}.submitButton[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;padding:5px 10px;margin-left:10px;border-radius:5px}.submitButton[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--scealai-dark-green)}.logContainer[_ngcontent-%COMP%]{padding:10px}.profileNumber[_ngcontent-%COMP%]{text-align:left;padding-left:20px}.profileHeader[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:14pt}.displayData[_ngcontent-%COMP%]{padding:20px}.sideBySide[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding-left:30%;padding-right:20%;text-align:left}.dataLabel[_ngcontent-%COMP%]{font-size:12pt;font-weight:700;padding-bottom:5px}.data[_ngcontent-%COMP%]{text-align:left;padding-left:40%}"]}),n})();function Sl(n,i){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.ts.l.invalid_start_date)}}function wl(n,i){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.ts.l.invalid_end_date)}}function Zl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"mat-form-field",8)(2,"mat-label"),e._uU(3),e.qZA(),e.TgZ(4,"mat-date-range-input",9),e._UZ(5,"input",10)(6,"input",11),e.qZA(),e._UZ(7,"mat-datepicker-toggle",12)(8,"mat-date-range-picker",null,13),e.YNc(10,Sl,2,1,"mat-error",6),e.YNc(11,wl,2,1,"mat-error",6),e.qZA(),e.TgZ(12,"div"),e._uU(13),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"div",14),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.getFeatureData())}),e._uU(16),e.qZA()()}if(2&n){const t=e.MAs(9),a=e.oxw();e.xp6(3),e.Oqu(a.ts.l.enter_date_range),e.xp6(1),e.Q6J("formGroup",a.range)("rangePicker",t),e.xp6(3),e.Q6J("for",t),e.xp6(3),e.Q6J("ngIf",a.range.controls.start.hasError("matStartDateInvalid")),e.xp6(1),e.Q6J("ngIf",a.range.controls.end.hasError("matEndDateInvalid")),e.xp6(2),e.hij(" (",a.ts.l.no_date_range_entered,") "),e.xp6(3),e.Oqu(a.ts.l.get_data)}}function Al(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",14),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.displayLog(r.statsData))}),e._uU(2),e.ALo(3,"date"),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,t.date,"d/M/yy, h:mm a")," ")}}function Pl(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Al,4,4,"div",15),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.previousFeatures)}}function Ml(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",7),e.YNc(1,Pl,2,1,"div",6),e._UZ(2,"br")(3,"hr"),e.TgZ(4,"div",14),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addNewFeatureData())}),e._uU(5),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.previousFeatures),e.xp6(4),e.Oqu(t.ts.l.add_data_log)}}function Ol(n,i){if(1&n&&(e.TgZ(0,"div",17)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.ts.l.compiling_data)}}function Dl(n,i){if(1&n&&(e.TgZ(0,"mat-card")(1,"div",19)(2,"mat-card-content")(3,"div",20)(4,"b"),e._uU(5),e.qZA()()(),e.TgZ(6,"mat-card-content")(7,"div",21),e._uU(8),e.qZA()()()()),2&n){const t=i.$implicit;e.xp6(5),e.hij("",t.key," : "),e.xp6(3),e.Oqu(t.value)}}function ql(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Dl,9,2,"mat-card",18),e.ALo(2,"keyvalue"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.featureCounts,t.valueOrder))}}let Ul=(()=>{class n{constructor(t,a,o){this.statsService=t,this.ts=a,this.engagement=o,this.range=new Q.nJ({start:new Q.p4,end:new Q.p4}),this.previousFeatures=[],this.selectDateRange=!0,this.dataLoaded=!0,this.featureCounts={},this.valueOrder=(r,s)=>r.value>s.value?-1:s.value>r.value?1:0}ngOnInit(){this.engagement.getPreviousAnalysisData("FEATURE-STATS").subscribe(t=>{this.previousFeatures=t.sort((a,o)=>o.date-a.date)})}getFeatureData(){var t=this;return(0,fe.Z)(function*(){t.dataLoaded=!1;let a=t.range.get("start").value?t.range.get("start").value:"empty",o=t.range.get("end").value?t.range.get("end").value:"empty";return new Promise((r,s)=>{t.statsService.getFeatureDataByDate(a,o).subscribe(function(){var c=(0,fe.Z)(function*(u){t.featureCounts=u,t.dataLoaded=!0,r()});return function(u){return c.apply(this,arguments)}}())})})()}addNewFeatureData(){var t=this;return(0,fe.Z)(function*(){if(t.previousFeatures.length>0){let a=t.previousFeatures[t.previousFeatures.length-1];new Promise((o,r)=>{t.statsService.getFeatureDataSinceLog(a.date).subscribe(function(){var s=(0,fe.Z)(function*(c){let u=c;0!=Object.keys(u).length&&(Object.entries(a.statsData).forEach(([g,l])=>{u[g]=u[g]?l+u[g]:l}),t.engagement.addAnalysisEvent(ni.tw["FEATURE-STATS"],u)),o()});return function(c){return s.apply(this,arguments)}}())})}else yield t.getFeatureData(),t.engagement.addAnalysisEvent(ni.tw["FEATURE-STATS"],t.featureCounts);t.ngOnInit()})()}displayLog(t){this.featureCounts=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Po),e.Y36(De.D),e.Y36(ti.M))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-feature-stats"]],decls:13,vars:7,consts:[[1,"headerTitle"],[1,"dataOptions"],[1,"option",3,"click"],[1,"adminContent"],["class","datePicker",4,"ngIf"],["class","adminLoaderContainer",4,"ngIf"],[4,"ngIf"],[1,"datePicker"],["appearance","fill"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],[1,"submitButton",3,"click"],["style","padding:10px",4,"ngFor","ngForOf"],[2,"padding","10px"],[1,"adminLoaderContainer"],[4,"ngFor","ngForOf"],[1,"card"],[1,"featureName"],[1,"featureValue"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1)(3,"div",2),e.NdJ("click",function(){return a.selectDateRange=!0}),e._uU(4),e.qZA(),e._uU(5," | "),e.TgZ(6,"div",2),e.NdJ("click",function(){return a.selectDateRange=!1}),e._uU(7),e.qZA()(),e.TgZ(8,"div",3),e.YNc(9,Zl,17,8,"div",4),e.YNc(10,Ml,6,2,"div",4),e.qZA(),e.YNc(11,Ol,4,1,"div",5),e.YNc(12,ql,3,4,"div",6)),2&t&&(e.xp6(1),e.hij(" ",a.ts.l.scealai_feature_statistics," "),e.xp6(3),e.hij(" ",a.ts.l.date_range,""),e.xp6(3),e.hij(" ",a.ts.l.previous_data," "),e.xp6(2),e.Q6J("ngIf",a.selectDateRange),e.xp6(1),e.Q6J("ngIf",!a.selectDateRange),e.xp6(1),e.Q6J("ngIf",!a.dataLoaded),e.xp6(1),e.Q6J("ngIf",a.dataLoaded))},dependencies:[L.sg,L.O5,Q.Fj,Q.JJ,Q.JL,Q.sg,Q.u,Ee.TO,Ee.KE,Ee.hX,Ee.R9,Ct.a8,Ct.dn,Ne.nW,Ne.wx,Ne.zY,Ne.By,Ne._g,Vt.P,L.uU,L.Nd],styles:[".headerTitle[_ngcontent-%COMP%]{font-size:16pt;padding-top:10px}.dataOptions[_ngcontent-%COMP%]{padding-top:20px;display:flex;align-items:center;justify-content:center}.option[_ngcontent-%COMP%]{padding-right:5px;padding-top:5px}.option[_ngcontent-%COMP%]:hover{color:var(--scealai-green);text-decoration:none;cursor:pointer}.adminContent[_ngcontent-%COMP%]{justify-content:space-around}.datePicker[_ngcontent-%COMP%]{padding-top:10px}.submitButton[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;padding:5px 10px;margin-left:10px;border-radius:5px}.submitButton[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--scealai-dark-green)}.card[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:10px;text-align:center}.featureName[_ngcontent-%COMP%]{font-size:14pt;font-weight:700;text-align:center}.featureValue[_ngcontent-%COMP%]{font-size:14pt;padding-left:20px;text-align:center}"]}),n})();var ae=S(7155),Mo=S(4144),ii=S(4385),Oe=S(3238),ai=S(4859),Qi=S(8184),vn=S(2687),Oo=S(8605),Il=S(445),ze=S(1281),oi=S(9521),Do=S(2289),qo=S(3353),El=S(4080),lt=S(2722),Nl=S(5698),Z=S(7340);const Ll=["tooltip"],Uo="tooltip-panel",Io=(0,qo.i$)({passive:!0}),Eo=new e.OlP("mat-tooltip-scroll-strategy"),Yl={provide:Eo,deps:[Qi.aV],useFactory:function Rl(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},Bl=new e.OlP("mat-tooltip-default-options",{providedIn:"root",factory:function jl(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let Hl=(()=>{class n{constructor(t,a,o,r,s,c,u,g,l,p,h,v){this._overlay=t,this._elementRef=a,this._scrollDispatcher=o,this._viewContainerRef=r,this._ngZone=s,this._platform=c,this._ariaDescriber=u,this._focusMonitor=g,this._dir=p,this._defaultOptions=h,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new ot.x,this._scrollStrategy=l,this._document=v,h&&(h.position&&(this.position=h.position),h.touchGestures&&(this.touchGestures=h.touchGestures)),p.change.pipe((0,lt.R)(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,ze.Ig)(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=(0,ze.su)(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=(0,ze.su)(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe((0,lt.R)(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([a,o])=>{t.removeEventListener(a,o,Io)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const a=this._createOverlay();this._detach(),this._portal=this._portal||new El.C5(this._tooltipComponent,this._viewContainerRef);const o=this._tooltipInstance=a.attach(this._portal).instance;o._triggerElement=this._elementRef.nativeElement,o._mouseLeaveHideDelay=this._hideDelay,o.afterHidden().pipe((0,lt.R)(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),o.show(t)}hide(t=this.hideDelay){const a=this._tooltipInstance;a&&(a.isVisible()?a.hide(t):(a._cancelPendingAnimations(),this._detach()))}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const t=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),a=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(t);return a.positionChanges.pipe((0,lt.R)(this._destroyed)).subscribe(o=>{this._updateCurrentPositionClass(o.connectionPair),this._tooltipInstance&&o.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:a,panelClass:`${this._cssClassPrefix}-${Uo}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe((0,lt.R)(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe((0,lt.R)(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe((0,lt.R)(this._destroyed)).subscribe(o=>{this._isTooltipVisible()&&o.keyCode===oi.hY&&!(0,oi.Vb)(o)&&(o.preventDefault(),o.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const a=t.getConfig().positionStrategy,o=this._getOrigin(),r=this._getOverlayPosition();a.withPositions([this._addOffset({...o.main,...r.main}),this._addOffset({...o.fallback,...r.fallback})])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,a=this.position;let o;"above"==a||"below"==a?o={originX:"center",originY:"above"==a?"top":"bottom"}:"before"==a||"left"==a&&t||"right"==a&&!t?o={originX:"start",originY:"center"}:("after"==a||"right"==a&&t||"left"==a&&!t)&&(o={originX:"end",originY:"center"});const{x:r,y:s}=this._invertPosition(o.originX,o.originY);return{main:o,fallback:{originX:r,originY:s}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,a=this.position;let o;"above"==a?o={overlayX:"center",overlayY:"bottom"}:"below"==a?o={overlayX:"center",overlayY:"top"}:"before"==a||"left"==a&&t||"right"==a&&!t?o={overlayX:"end",overlayY:"center"}:("after"==a||"right"==a&&t||"left"==a&&!t)&&(o={overlayX:"start",overlayY:"center"});const{x:r,y:s}=this._invertPosition(o.overlayX,o.overlayY);return{main:o,fallback:{overlayX:r,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe((0,Nl.q)(1),(0,lt.R)(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,a){return"above"===this.position||"below"===this.position?"top"===a?a="bottom":"bottom"===a&&(a="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:a}}_updateCurrentPositionClass(t){const{overlayY:a,originX:o,originY:r}=t;let s;if(s="center"===a?this._dir&&"rtl"===this._dir.value?"end"===o?"left":"right":"start"===o?"left":"right":"bottom"===a&&"top"===r?"above":"below",s!==this._currentPosition){const c=this._overlayRef;if(c){const u=`${this._cssClassPrefix}-${Uo}-`;c.removePanelClass(u+this._currentPosition),c.addPanelClass(u+s)}this._currentPosition=s}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",a=>{const o=a.relatedTarget;(!o||!this._overlayRef?.overlayElement.contains(o))&&this.hide()}],["wheel",a=>this._wheelListener(a)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const a=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",a],["touchcancel",a])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([a,o])=>{this._elementRef.nativeElement.addEventListener(a,o,Io)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const a=this._document.elementFromPoint(t.clientX,t.clientY),o=this._elementRef.nativeElement;a!==o&&!o.contains(a)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const a=this._elementRef.nativeElement,o=a.style;("on"===t||"INPUT"!==a.nodeName&&"TEXTAREA"!==a.nodeName)&&(o.userSelect=o.msUserSelect=o.webkitUserSelect=o.MozUserSelect="none"),("on"===t||!a.draggable)&&(o.webkitUserDrag="none"),o.touchAction="none",o.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(t){e.$Z()},n.\u0275dir=e.lG2({type:n,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),zl=(()=>{class n extends Hl{constructor(t,a,o,r,s,c,u,g,l,p,h,v){super(t,a,o,r,s,c,u,g,l,p,h,v),this._tooltipComponent=$l}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Qi.aV),e.Y36(e.SBq),e.Y36(Oo.mF),e.Y36(e.s_b),e.Y36(e.R0b),e.Y36(qo.t4),e.Y36(vn.$s),e.Y36(vn.tE),e.Y36(Eo),e.Y36(Il.Is,8),e.Y36(Bl,8),e.Y36(L.K0))},n.\u0275dir=e.lG2({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[e.qOj]}),n})(),Jl=(()=>{class n{constructor(t,a){this._changeDetectorRef=t,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new ot.x,this._animationsDisabled="NoopAnimations"===a}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const a=this._tooltip.nativeElement,o=this._showAnimation,r=this._hideAnimation;if(a.classList.remove(t?r:o),a.classList.add(t?o:r),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const s=getComputedStyle(a);("0s"===s.getPropertyValue("animation-duration")||"none"===s.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(a.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(e.QbO,8))},n.\u0275dir=e.lG2({type:n}),n})(),$l=(()=>{class n extends Jl{constructor(t,a,o){super(t,o),this._breakpointObserver=a,this._isHandset=this._breakpointObserver.observe(Do.u3.Handset),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(Do.Yg),e.Y36(e.QbO,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(t,a){if(1&t&&e.Gf(Ll,7),2&t){let o;e.iGM(o=e.CRH())&&(a._tooltip=o.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,a){1&t&&e.NdJ("mouseleave",function(r){return a._handleMouseLeave(r)}),2&t&&e.Udp("zoom",a.isVisible()?1:null)},features:[e.qOj],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0,1),e.NdJ("animationend",function(r){return a._handleAnimationEnd(r)}),e.ALo(2,"async"),e._uU(3),e.qZA()),2&t){let o;e.ekj("mat-tooltip-handset",null==(o=e.lcZ(2,4,a._isHandset))?null:o.matches),e.Q6J("ngClass",a.tooltipClass),e.xp6(3),e.Oqu(a.message)}},dependencies:[L.mk,L.Ov],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}"],encapsulation:2,changeDetection:0}),n})(),Gl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[Yl],imports:[vn.rt,L.ez,Qi.U8,Oe.BQ,Oe.BQ,Oo.ZD]}),n})();function Ql(n,i){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Wl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",16)(1,"mat-select",17),e.NdJ("selectionChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r._changePageSize(o.value))}),e.YNc(2,Ql,2,2,"mat-option",18),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("appearance",t._formFieldAppearance)("color",t.color),e.xp6(1),e.Q6J("value",t.pageSize)("disabled",t.disabled)("panelClass",t.selectConfig.panelClass||"")("disableOptionCentering",t.selectConfig.disableOptionCentering)("aria-label",t._intl.itemsPerPageLabel),e.xp6(1),e.Q6J("ngForOf",t._displayedPageSizeOptions)}}function Vl(n,i){if(1&n&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.pageSize)}}function Kl(n,i){if(1&n&&(e.TgZ(0,"div",12)(1,"div",13),e._uU(2),e.qZA(),e.YNc(3,Wl,3,8,"mat-form-field",14),e.YNc(4,Vl,2,1,"div",15),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t._intl.itemsPerPageLabel," "),e.xp6(1),e.Q6J("ngIf",t._displayedPageSizeOptions.length>1),e.xp6(1),e.Q6J("ngIf",t._displayedPageSizeOptions.length<=1)}}function Xl(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.firstPage())}),e.O4$(),e.TgZ(1,"svg",7),e._UZ(2,"path",22),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),e.uIk("aria-label",t._intl.firstPageLabel)}}function ed(n,i){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.lastPage())}),e.O4$(),e.TgZ(1,"svg",7),e._UZ(2,"path",24),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),e.uIk("aria-label",t._intl.lastPageLabel)}}let ri=(()=>{class n{constructor(){this.changes=new ot.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,a,o)=>{if(0==o||0==a)return`0 of ${o}`;const r=t*a;return`${r+1} \u2013 ${r<(o=Math.max(o,0))?Math.min(r+a,o):r+a} of ${o}`}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nd={provide:ri,deps:[[new e.FiY,new e.tp0,ri]],useFactory:function td(n){return n||new ri}},ad=new e.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),od=(0,Oe.Id)((0,Oe.dB)(class{}));let rd=(()=>{class n extends od{constructor(t,a,o){if(super(),this._intl=t,this._changeDetectorRef=a,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new e.vpe,this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),o){const{pageSize:r,pageSizeOptions:s,hidePageSize:c,showFirstLastButtons:u}=o;null!=r&&(this._pageSize=r),null!=s&&(this._pageSizeOptions=s),null!=c&&(this._hidePageSize=c),null!=u&&(this._showFirstLastButtons=u)}}get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max((0,ze.su)(t),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(t){this._length=(0,ze.su)(t),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max((0,ze.su)(t),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(a=>(0,ze.su)(a)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(t){this._hidePageSize=(0,ze.Ig)(t)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(t){this._showFirstLastButtons=(0,ze.Ig)(t)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(t)}previousPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(t)}firstPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=0,this._emitPageEvent(t)}lastPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(t)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const t=this.getNumberOfPages()-1;return this.pageIndex<t&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){const o=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/t)||0,this.pageSize=t,this._emitPageEvent(o)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,a)=>t-a),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return n.\u0275fac=function(t){e.$Z()},n.\u0275dir=e.lG2({type:n,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[e.qOj]}),n})(),bn=(()=>{class n extends rd{constructor(t,a,o){super(t,a,o),o&&null!=o.formFieldAppearance&&(this._formFieldAppearance=o.formFieldAppearance)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ri),e.Y36(e.sBO),e.Y36(ad,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[e.qOj],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","panelClass","disableOptionCentering","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Kl,5,3,"div",2),e.TgZ(3,"div",3)(4,"div",4),e._uU(5),e.qZA(),e.YNc(6,Xl,3,5,"button",5),e.TgZ(7,"button",6),e.NdJ("click",function(){return a.previousPage()}),e.O4$(),e.TgZ(8,"svg",7),e._UZ(9,"path",8),e.qZA()(),e.kcU(),e.TgZ(10,"button",9),e.NdJ("click",function(){return a.nextPage()}),e.O4$(),e.TgZ(11,"svg",7),e._UZ(12,"path",10),e.qZA()(),e.YNc(13,ed,3,5,"button",11),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("ngIf",!a.hidePageSize),e.xp6(3),e.hij(" ",a._intl.getRangeLabel(a.pageIndex,a.pageSize,a.length)," "),e.xp6(1),e.Q6J("ngIf",a.showFirstLastButtons),e.xp6(1),e.Q6J("matTooltip",a._intl.previousPageLabel)("matTooltipDisabled",a._previousButtonsDisabled())("matTooltipPosition","above")("disabled",a._previousButtonsDisabled()),e.uIk("aria-label",a._intl.previousPageLabel),e.xp6(3),e.Q6J("matTooltip",a._intl.nextPageLabel)("matTooltipDisabled",a._nextButtonsDisabled())("matTooltipPosition","above")("disabled",a._nextButtonsDisabled()),e.uIk("aria-label",a._intl.nextPageLabel),e.xp6(3),e.Q6J("ngIf",a.showFirstLastButtons))},dependencies:[L.sg,L.O5,ai.lW,Ee.KE,ii.gD,Oe.ey,zl],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{display:inline-block;width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}"],encapsulation:2,changeDetection:0}),n})(),sd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[nd],imports:[L.ez,ai.ot,ii.LD,Gl,Oe.BQ]}),n})();var cd=S(6451);const ld=["mat-sort-header",""];function dd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("@arrowPosition.start",function(){e.CHM(t);const o=e.oxw();return e.KtG(o._disableViewStateAnimation=!0)})("@arrowPosition.done",function(){e.CHM(t);const o=e.oxw();return e.KtG(o._disableViewStateAnimation=!1)}),e._UZ(1,"div",4),e.TgZ(2,"div",5),e._UZ(3,"div",6)(4,"div",7)(5,"div",8),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("@arrowOpacity",t._getArrowViewState())("@arrowPosition",t._getArrowViewState())("@allowChildren",t._getArrowDirectionState()),e.xp6(2),e.Q6J("@indicator",t._getArrowDirectionState()),e.xp6(1),e.Q6J("@leftPointer",t._getArrowDirectionState()),e.xp6(1),e.Q6J("@rightPointer",t._getArrowDirectionState())}}const fd=["*"],No=new e.OlP("MAT_SORT_DEFAULT_OPTIONS"),ud=(0,Oe.dB)((0,Oe.Id)(class{}));let Gt=(()=>{class n extends ud{constructor(t){super(),this._defaultOptions=t,this.sortables=new Map,this._stateChanges=new ot.x,this.start="asc",this._direction="",this.sortChange=new e.vpe}get direction(){return this._direction}set direction(t){this._direction=t}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=(0,ze.Ig)(t)}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){if(!t)return"";let o=function pd(n,i){let t=["asc","desc"];return"desc"==n&&t.reverse(),i||t.push(""),t}(t.start||this.start,t?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear),r=o.indexOf(this.direction)+1;return r>=o.length&&(r=0),o[r]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(No,8))},n.\u0275dir=e.lG2({type:n,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],active:["matSortActive","active"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[e.qOj,e.TTD]}),n})();const dt=Oe.mZ.ENTERING+" "+Oe.yN.STANDARD_CURVE,Qt={indicator:(0,Z.X$)("indicator",[(0,Z.SB)("active-asc, asc",(0,Z.oB)({transform:"translateY(0px)"})),(0,Z.SB)("active-desc, desc",(0,Z.oB)({transform:"translateY(10px)"})),(0,Z.eR)("active-asc <=> active-desc",(0,Z.jt)(dt))]),leftPointer:(0,Z.X$)("leftPointer",[(0,Z.SB)("active-asc, asc",(0,Z.oB)({transform:"rotate(-45deg)"})),(0,Z.SB)("active-desc, desc",(0,Z.oB)({transform:"rotate(45deg)"})),(0,Z.eR)("active-asc <=> active-desc",(0,Z.jt)(dt))]),rightPointer:(0,Z.X$)("rightPointer",[(0,Z.SB)("active-asc, asc",(0,Z.oB)({transform:"rotate(45deg)"})),(0,Z.SB)("active-desc, desc",(0,Z.oB)({transform:"rotate(-45deg)"})),(0,Z.eR)("active-asc <=> active-desc",(0,Z.jt)(dt))]),arrowOpacity:(0,Z.X$)("arrowOpacity",[(0,Z.SB)("desc-to-active, asc-to-active, active",(0,Z.oB)({opacity:1})),(0,Z.SB)("desc-to-hint, asc-to-hint, hint",(0,Z.oB)({opacity:.54})),(0,Z.SB)("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",(0,Z.oB)({opacity:0})),(0,Z.eR)("* => asc, * => desc, * => active, * => hint, * => void",(0,Z.jt)("0ms")),(0,Z.eR)("* <=> *",(0,Z.jt)(dt))]),arrowPosition:(0,Z.X$)("arrowPosition",[(0,Z.eR)("* => desc-to-hint, * => desc-to-active",(0,Z.jt)(dt,(0,Z.F4)([(0,Z.oB)({transform:"translateY(-25%)"}),(0,Z.oB)({transform:"translateY(0)"})]))),(0,Z.eR)("* => hint-to-desc, * => active-to-desc",(0,Z.jt)(dt,(0,Z.F4)([(0,Z.oB)({transform:"translateY(0)"}),(0,Z.oB)({transform:"translateY(25%)"})]))),(0,Z.eR)("* => asc-to-hint, * => asc-to-active",(0,Z.jt)(dt,(0,Z.F4)([(0,Z.oB)({transform:"translateY(25%)"}),(0,Z.oB)({transform:"translateY(0)"})]))),(0,Z.eR)("* => hint-to-asc, * => active-to-asc",(0,Z.jt)(dt,(0,Z.F4)([(0,Z.oB)({transform:"translateY(0)"}),(0,Z.oB)({transform:"translateY(-25%)"})]))),(0,Z.SB)("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",(0,Z.oB)({transform:"translateY(0)"})),(0,Z.SB)("hint-to-desc, active-to-desc, desc",(0,Z.oB)({transform:"translateY(-25%)"})),(0,Z.SB)("hint-to-asc, active-to-asc, asc",(0,Z.oB)({transform:"translateY(25%)"}))]),allowChildren:(0,Z.X$)("allowChildren",[(0,Z.eR)("* <=> *",[(0,Z.IO)("@*",(0,Z.pV)(),{optional:!0})])])};let si=(()=>{class n{constructor(){this.changes=new ot.x}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gd={provide:si,deps:[[new e.FiY,new e.tp0,si]],useFactory:function hd(n){return n||new si}},md=(0,Oe.Id)(class{});let Lo=(()=>{class n extends md{constructor(t,a,o,r,s,c,u,g){super(),this._intl=t,this._changeDetectorRef=a,this._sort=o,this._columnDef=r,this._focusMonitor=s,this._elementRef=c,this._ariaDescriber=u,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this._sortActionDescription="Sort",g?.arrowPosition&&(this.arrowPosition=g?.arrowPosition),this._handleStateChanges()}get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(t){this._updateSortActionDescription(t)}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=(0,ze.Ig)(t)}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{const a=!!t;a!==this._showIndicatorHint&&(this._setIndicatorHintVisible(a),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe()}_setIndicatorHintVisible(t){this._isDisabled()&&t||(this._showIndicatorHint=t,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(t){this._viewState=t||{},this._disableViewStateAnimation&&(this._viewState={toState:t.toState})}_toggleOnInteraction(){this._sort.sort(this),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(t){!this._isDisabled()&&(t.keyCode===oi.L_||t.keyCode===oi.K5)&&(t.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){const t=this._viewState.fromState;return(t?`${t}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(t){this._sortButton&&(this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription),this._ariaDescriber?.describe(this._sortButton,t)),this._sortActionDescription=t}_handleStateChanges(){this._rerenderSubscription=(0,cd.T)(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&"active"===this._viewState.toState&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(si),e.Y36(e.sBO),e.Y36(Gt,8),e.Y36("MAT_SORT_HEADER_COLUMN_DEF",8),e.Y36(vn.tE),e.Y36(e.SBq),e.Y36(vn.$s,8),e.Y36(No,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(t,a){1&t&&e.NdJ("click",function(){return a._handleClick()})("keydown",function(r){return a._handleKeydown(r)})("mouseenter",function(){return a._setIndicatorHintVisible(!0)})("mouseleave",function(){return a._setIndicatorHintVisible(!1)}),2&t&&(e.uIk("aria-sort",a._getAriaSortAttribute()),e.ekj("mat-sort-header-disabled",a._isDisabled()))},inputs:{disabled:"disabled",id:["mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",sortActionDescription:"sortActionDescription",disableClear:"disableClear"},exportAs:["matSortHeader"],features:[e.qOj],attrs:ld,ngContentSelectors:fd,decls:4,vars:7,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],["class","mat-sort-header-arrow",4,"ngIf"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(t,a){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.qZA(),e.YNc(3,dd,6,6,"div",2),e.qZA()),2&t&&(e.ekj("mat-sort-header-sorted",a._isSorted())("mat-sort-header-position-before","before"===a.arrowPosition),e.uIk("tabindex",a._isDisabled()?null:0)("role",a._isDisabled()?null:"button"),e.xp6(3),e.Q6J("ngIf",a._renderArrow()))},dependencies:[L.O5],styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-container::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}"],encapsulation:2,data:{animation:[Qt.indicator,Qt.leftPointer,Qt.rightPointer,Qt.arrowOpacity,Qt.arrowPosition,Qt.allowChildren]},changeDetection:0}),n})(),_d=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[gd],imports:[L.ez,Oe.BQ]}),n})();function vd(n,i){1&n&&(e.TgZ(0,"th",12),e._uU(1,"Part of speech"),e.qZA())}function bd(n,i){if(1&n&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",null==t.partOfSpeechData?null:t.partOfSpeechData.partOfSpeech," ")}}function xd(n,i){1&n&&(e.TgZ(0,"th",12),e._uU(1,"Word"),e.qZA())}function yd(n,i){if(1&n&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",null==t.partOfSpeechData?null:t.partOfSpeechData.word," ")}}function Td(n,i){1&n&&(e.TgZ(0,"th",12),e._uU(1,"Translation"),e.qZA())}function Cd(n,i){if(1&n&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",null==t.partOfSpeechData?null:t.partOfSpeechData.translation," ")}}function Sd(n,i){1&n&&(e.TgZ(0,"th",12),e._uU(1,"Last Updated"),e.qZA())}function wd(n,i){if(1&n&&(e.TgZ(0,"td",13),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.lastUpdated,"medium")," ")}}function Zd(n,i){1&n&&e._UZ(0,"tr",14)}function Ad(n,i){1&n&&e._UZ(0,"tr",15)}function Pd(n,i){if(1&n&&(e.TgZ(0,"tr",16)(1,"td",17),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij(' No data matching the filter "',t.input.value,'" ')}}const Md=function(){return[5,10,25,100]};let Od=(()=>{class n{constructor(){this.posTableColumns=["pos","word","translation","date"],this.hideTable=!0}ngOnInit(){}ngOnChanges(){this.data&&(this.data.paginator=this.paginator,this.data.sort=this.sort,console.log(this.data))}applyFilter(t){this.data.filter=t.target.value.trim().toLowerCase(),console.log(this.data),this.data.paginator&&this.data.paginator.firstPage()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-pos-data-table"]],viewQuery:function(t,a){if(1&t&&(e.Gf(bn,5),e.Gf(Gt,5)),2&t){let o;e.iGM(o=e.CRH())&&(a.paginator=o.first),e.iGM(o=e.CRH())&&(a.sort=o.first)}},inputs:{data:"data"},features:[e.TTD],decls:18,vars:6,consts:[[3,"hidden"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","pos"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","word"],["matColumnDef","translation"],["matColumnDef","date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"table",1),e.ynx(2,2),e.YNc(3,vd,2,0,"th",3),e.YNc(4,bd,2,1,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,xd,2,0,"th",3),e.YNc(7,yd,2,1,"td",4),e.BQk(),e.ynx(8,6),e.YNc(9,Td,2,0,"th",3),e.YNc(10,Cd,2,1,"td",4),e.BQk(),e.ynx(11,7),e.YNc(12,Sd,2,0,"th",3),e.YNc(13,wd,3,4,"td",4),e.BQk(),e.YNc(14,Zd,1,0,"tr",8),e.YNc(15,Ad,1,0,"tr",9),e.YNc(16,Pd,3,1,"tr",10),e.qZA(),e._UZ(17,"mat-paginator",11),e.qZA()),2&t&&(e.Q6J("hidden",a.hideTable),e.xp6(1),e.Q6J("dataSource",a.data),e.xp6(13),e.Q6J("matHeaderRowDef",a.posTableColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.posTableColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(5,Md)))},dependencies:[ae.BZ,ae.fO,ae.as,ae.w1,ae.Dz,ae.nj,ae.ge,ae.ev,ae.XQ,ae.Gk,ae.Ee,bn,Gt,Lo,L.uU],styles:["table[_ngcontent-%COMP%]{width:100%;text-align:left}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left!important;vertical-align:middle!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:space-evenly!important}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}"]}),n})();function Dd(n,i){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Type"),e.qZA())}function qd(n,i){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Oqu(null==t.prompt?null:t.prompt.topic)}}function Ud(n,i){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Level"),e.qZA())}function Id(n,i){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",null!=t.prompt&&t.prompt.level?t.prompt.level:"---"," ")}}function Ed(n,i){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Dialect"),e.qZA())}function Nd(n,i){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",null!=t.prompt&&t.prompt.dialect?t.prompt.dialect:"---"," ")}}function Ld(n,i){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Text"),e.qZA())}function kd(n,i){if(1&n&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.HOy(" ",null==t.prompt?null:t.prompt.text," ",null==t.prompt||null==t.prompt.combinationData?null:t.prompt.combinationData.character," ",null==t.prompt||null==t.prompt.combinationData?null:t.prompt.combinationData.setting," ",null==t.prompt||null==t.prompt.combinationData?null:t.prompt.combinationData.theme," ")}}function Fd(n,i){1&n&&(e.TgZ(0,"th",14),e._uU(1,"Last Updated"),e.qZA())}function Rd(n,i){if(1&n&&(e.TgZ(0,"td",15),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.lastUpdated,"medium")," ")}}function Yd(n,i){1&n&&e._UZ(0,"tr",17)}function Bd(n,i){1&n&&e._UZ(0,"tr",18)}function jd(n,i){if(1&n&&(e.TgZ(0,"tr",19)(1,"td",20),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij(' No data matching the filter "',t.input.value,'" ')}}const Hd=function(){return[5,10,25,100]};let zd=(()=>{class n{constructor(){this.promptTableColumns=["topic","level","dialect","text","date"],this.hideTable=!0}ngOnInit(){}ngOnChanges(){this.data&&(this.data.paginator=this.paginator,this.data.sort=this.sort)}applyFilter(t){this.data.filter=t.target.value.trim().toLowerCase(),this.data.paginator&&this.data.paginator.firstPage()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-prompt-data-table"]],viewQuery:function(t,a){if(1&t&&(e.Gf(bn,5),e.Gf(Gt,5)),2&t){let o;e.iGM(o=e.CRH())&&(a.paginator=o.first),e.iGM(o=e.CRH())&&(a.sort=o.first)}},inputs:{data:"data"},features:[e.TTD],decls:21,vars:6,consts:[[3,"hidden"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","topic"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","level"],["matColumnDef","dialect"],["matColumnDef","text"],["mat-cell","","class","example-container",4,"matCellDef"],["matColumnDef","date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",1,"example-container"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"table",1),e.ynx(2,2),e.YNc(3,Dd,2,0,"th",3),e.YNc(4,qd,2,1,"td",4),e.BQk(),e.ynx(5,5),e.YNc(6,Ud,2,0,"th",3),e.YNc(7,Id,2,1,"td",4),e.BQk(),e.ynx(8,6),e.YNc(9,Ed,2,0,"th",3),e.YNc(10,Nd,2,1,"td",4),e.BQk(),e.ynx(11,7),e.YNc(12,Ld,2,0,"th",3),e.YNc(13,kd,2,4,"td",8),e.BQk(),e.ynx(14,9),e.YNc(15,Fd,2,0,"th",3),e.YNc(16,Rd,3,4,"td",4),e.BQk(),e.YNc(17,Yd,1,0,"tr",10),e.YNc(18,Bd,1,0,"tr",11),e.YNc(19,jd,3,1,"tr",12),e.qZA(),e._UZ(20,"mat-paginator",13),e.qZA()),2&t&&(e.Q6J("hidden",a.hideTable),e.xp6(1),e.Q6J("dataSource",a.data),e.xp6(16),e.Q6J("matHeaderRowDef",a.promptTableColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.promptTableColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(5,Hd)))},dependencies:[ae.BZ,ae.fO,ae.as,ae.w1,ae.Dz,ae.nj,ae.ge,ae.ev,ae.XQ,ae.Gk,ae.Ee,bn,Gt,Lo,L.uU],styles:["table[_ngcontent-%COMP%]{width:100%;text-align:left}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left!important;vertical-align:middle!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:space-evenly!important}.example-container[_ngcontent-%COMP%]{overflow-x:scroll;max-width:60px;text-align:left!important}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}"]}),n})();const Jd=["promptDataTable"],$d=["posDataTable"];function Gd(n,i){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij("",t," ")}}function Qd(n,i){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,Gd,2,1,"div",25),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.errorMessages)}}function Wd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",10)(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Part of Speech"),e.qZA(),e.TgZ(5,"mat-select",3),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedPOS=o)}),e.TgZ(6,"mat-option",11),e._uU(7),e.qZA(),e.TgZ(8,"mat-option",12),e._uU(9),e.qZA(),e.TgZ(10,"mat-option",13),e._uU(11),e.qZA(),e.TgZ(12,"mat-option",14),e._uU(13),e.qZA(),e.TgZ(14,"mat-option",15),e._uU(15),e.qZA(),e.TgZ(16,"mat-option",16),e._uU(17),e.qZA(),e.TgZ(18,"mat-option",17),e._uU(19),e.qZA(),e.TgZ(20,"mat-option",18),e._uU(21),e.qZA()()(),e.TgZ(22,"div",19),e._uU(23," POS entries can be added one at a time, or you can add several at once with each entry on a new line (enter key after each one). Enter the word and the translation separated by a ':' Example: "),e.qZA(),e.TgZ(24,"div"),e._uU(25," an t-aerfort : the airport"),e.qZA(),e.TgZ(26,"div"),e._uU(27," an teach : the house"),e.qZA(),e.TgZ(28,"mat-form-field",20)(29,"mat-label"),e._uU(30,"Word/Translation Entry"),e.qZA(),e.TgZ(31,"textarea",21),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.posInput=o)}),e.qZA()(),e.YNc(32,Qd,2,1,"div",22),e.TgZ(33,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addPOSContent())}),e._uU(34," Add "),e.qZA()(),e.TgZ(35,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleTable("pos"))}),e._uU(36),e.qZA()()}if(2&n){const t=e.oxw(),a=e.MAs(16);e.xp6(5),e.Q6J("ngModel",t.selectedPOS),e.xp6(2),e.Oqu(t.ts.l.noun),e.xp6(2),e.Oqu(t.ts.l.verb),e.xp6(2),e.Oqu(t.ts.l.adjective),e.xp6(2),e.Oqu(t.ts.l.preposition),e.xp6(2),e.Oqu(t.ts.l.adverb),e.xp6(2),e.Oqu(t.ts.l.pronoun),e.xp6(2),e.Oqu(t.ts.l.article),e.xp6(2),e.Oqu(t.ts.l.conjunction),e.xp6(10),e.Q6J("ngModel",t.posInput),e.xp6(1),e.Q6J("ngIf",t.errorMessages.length>0),e.xp6(4),e.hij(" ",a.hideTable?"Show Data":"Hide Data"," ")}}function Vd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",2)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",3),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectedDialect=o)}),e.TgZ(4,"mat-option",34),e._uU(5),e.qZA(),e.TgZ(6,"mat-option",35),e._uU(7),e.qZA(),e.TgZ(8,"mat-option",36),e._uU(9),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.choose_dialect),e.xp6(1),e.Q6J("ngModel",t.selectedDialect),e.xp6(2),e.Oqu(t.ts.l.munster),e.xp6(2),e.Oqu(t.ts.l.connacht),e.xp6(2),e.Oqu(t.ts.l.ulster)}}function Kd(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",2)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",3),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectedLevel=o)}),e.TgZ(4,"mat-option",37),e._uU(5),e.qZA(),e.TgZ(6,"mat-option",38),e._uU(7),e.qZA(),e.TgZ(8,"mat-option",39),e._uU(9),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.choose_level),e.xp6(1),e.Q6J("ngModel",t.selectedLevel),e.xp6(2),e.hij(" ",t.ts.l.level_preferences[0]," "),e.xp6(2),e.hij(" ",t.ts.l.level_preferences[1]," "),e.xp6(2),e.hij(" ",t.ts.l.level_preferences[2]," ")}}function Xd(n,i){1&n&&(e.TgZ(0,"div",19),e._uU(1," Prompt texts can be added one at a time, or you can add several at once with each prompt on a new line (enter key after each one) "),e.qZA())}function ef(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2,"Prompt Text"),e.qZA(),e.TgZ(3,"textarea",21),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.promptText=o)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngModel",t.promptText)}}function tf(n,i){1&n&&(e.TgZ(0,"div",19),e._uU(1," Please only add one character, setting, and theme at a time "),e.qZA())}function nf(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",21),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectedCharacter=o)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.character),e.xp6(1),e.Q6J("ngModel",t.selectedCharacter)}}function af(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",21),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectedSetting=o)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.setting),e.xp6(1),e.Q6J("ngModel",t.selectedSetting)}}function of(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",20)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",21),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectedTheme=o)}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.theme),e.xp6(1),e.Q6J("ngModel",t.selectedTheme)}}function rf(n,i){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij("",t," ")}}function sf(n,i){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,rf,2,1,"div",25),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.errorMessages)}}function cf(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",10)(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Prompt Generator"),e.qZA(),e.TgZ(5,"mat-select",3),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedPromptGenerator=o)}),e.TgZ(6,"mat-option",26),e._uU(7),e.qZA(),e.TgZ(8,"mat-option",27),e._uU(9),e.qZA(),e.TgZ(10,"mat-option",28),e._uU(11),e.qZA(),e.TgZ(12,"mat-option",29),e._uU(13),e.qZA(),e.TgZ(14,"mat-option",30),e._uU(15),e.qZA()()(),e.YNc(16,Vd,10,5,"mat-form-field",31),e.YNc(17,Kd,10,5,"mat-form-field",31),e.YNc(18,Xd,2,0,"div",32),e.YNc(19,ef,4,1,"mat-form-field",33),e.YNc(20,tf,2,0,"div",32),e.YNc(21,nf,4,2,"mat-form-field",33),e.YNc(22,af,4,2,"mat-form-field",33),e.YNc(23,of,4,2,"mat-form-field",33),e.YNc(24,sf,2,1,"div",22),e.TgZ(25,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.addPromptContent())}),e._uU(26," Add "),e.qZA()(),e.TgZ(27,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleTable("prompt"))}),e._uU(28),e.qZA()()}if(2&n){const t=e.oxw(),a=e.MAs(14);e.xp6(5),e.Q6J("ngModel",t.selectedPromptGenerator),e.xp6(2),e.Oqu(t.ts.l.exam_prompts),e.xp6(2),e.Oqu(t.ts.l.proverb_prompts),e.xp6(2),e.Oqu(t.ts.l.lara_prompts),e.xp6(2),e.Oqu(t.ts.l.combination_generator),e.xp6(2),e.Oqu(t.ts.l.general_prompts),e.xp6(1),e.Q6J("ngIf","proverb"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator||"exam"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"!==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"!==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf","combination"==t.selectedPromptGenerator),e.xp6(1),e.Q6J("ngIf",t.errorMessages.length>0),e.xp6(4),e.hij(" ",a.hideTable?"Show Data":"Hide Data"," ")}}let lf=(()=>{class n{constructor(t,a,o){this.auth=t,this.http=a,this.ts=o,this.selectedContent="",this.selectedPOS="",this.promptText="",this.posInput="",this.selectedPromptGenerator="",this.selectedDialect="",this.selectedLevel="",this.selectedCharacter="",this.selectedSetting="",this.selectedTheme="",this.errorMessages=[]}ngOnInit(){this.getData("partOfSpeech"),this.getData("prompt")}getData(t){const a={Authorization:"Bearer "+this.auth.getToken()};this.http.get(qe.Z.baseurl+"prompt/getData/"+t,{headers:a}).subscribe({next:o=>{"partOfSpeech"==t?this.posDataSource=new ae.by(o):this.promptDataSource=new ae.by(o)},error:o=>{console.log(o)}})}addPOSContent(){var t=this;return(0,fe.Z)(function*(){if(t.errorMessages=[],!t.selectedPOS||!t.posInput)return void t.errorMessages.push("Please fill in all information");const a={Authorization:"Bearer "+t.auth.getToken()},o={type:t.selectedContent,partOfSpeechData:{partOfSpeech:t.selectedPOS}};let r=t.posInput.split(/\r?\n/);console.log(r);for(let s of r)if(s.length>0){let[c,u]=s.split(":");o.partOfSpeechData.word=c.trim(),o.partOfSpeechData.translation=u.trim();try{yield(0,ue.z)(t.http.post(qe.Z.baseurl+"prompt/addContent/",o,{headers:a}))}catch(g){console.log(g.error),t.errorMessages.push(`Entry already exists: ${JSON.stringify(g.error.data)} `)}}t.selectedPOS="",t.posInput="",t.getData("partOfSpeech")})()}addPromptContent(){var t=this;return(0,fe.Z)(function*(){if(t.errorMessages=[],!t.selectedPromptGenerator)return t.errorMessages.push("Please select a generator"),void console.log(t.errorMessages);if(!("proverb"!=t.selectedPromptGenerator||t.selectedDialect&&t.promptText))return void t.errorMessages.push("Missing information");if(!("exam"!=t.selectedPromptGenerator||t.selectedLevel&&t.promptText))return void t.errorMessages.push("Missing information");if(!("combination"!=t.selectedPromptGenerator||t.selectedLevel&&t.selectedCharacter&&t.selectedSetting&&t.selectedTheme))return void t.errorMessages.push("Missing information");const a={Authorization:"Bearer "+t.auth.getToken()},o={type:t.selectedContent,prompt:{topic:t.selectedPromptGenerator}};if(t.selectedDialect&&(o.prompt.dialect=t.selectedDialect),t.selectedLevel&&(o.prompt.level=t.selectedLevel),t.promptText){let r=t.promptText.split(/\r?\n/);for(let s of r)if(s.length>0){o.prompt.text=s;try{yield(0,ue.z)(t.http.post(qe.Z.baseurl+"prompt/addContent/",o,{headers:a}))}catch(c){console.log(c.error),t.errorMessages.push(`Entry already exists: ${JSON.stringify(c.error.data)} `)}}}else{o.prompt.combinationData={},t.selectedCharacter&&(o.prompt.combinationData.character=t.selectedCharacter),t.selectedSetting&&(o.prompt.combinationData.setting=t.selectedSetting),t.selectedTheme&&(o.prompt.combinationData.theme=t.selectedTheme);try{yield(0,ue.z)(t.http.post(qe.Z.baseurl+"prompt/addContent/",o,{headers:a}))}catch(r){console.log(r.error),t.errorMessages.push(`Entry already exists: ${JSON.stringify(r.error.data)} `)}}0==t.errorMessages.length&&(t.selectedPromptGenerator="",t.promptText="",t.selectedDialect="",t.selectedLevel="",t.selectedCharacter="",t.selectedSetting="",t.selectedTheme="",t.getData("prompt"))})()}toggleTable(t){"pos"==t?this.posDataTable.hideTable=!this.posDataTable.hideTable:this.promptDataTable.hideTable=!this.promptDataTable.hideTable}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ao.$),e.Y36(Ve.eN),e.Y36(De.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-content"]],viewQuery:function(t,a){if(1&t&&(e.Gf(Jd,5),e.Gf($d,5)),2&t){let o;e.iGM(o=e.CRH())&&(a.promptDataTable=o.first),e.iGM(o=e.CRH())&&(a.posDataTable=o.first)}},decls:17,vars:5,consts:[[1,"mainContainer"],[1,"headerTitle"],["appearance","fill"],[3,"ngModel","ngModelChange"],["value","partOfSpeech"],["value","prompt"],[4,"ngIf"],[3,"data"],["promptDataTable",""],["posDataTable",""],[1,"posFields"],["value","noun"],["value","verb"],["value","adjective"],["value","preposition"],["value","adverb"],["value","pronoun"],["value","article"],["value","conjunction"],[2,"width","50%","padding","10px"],["appearance","fill",1,"inputText"],["matInput","",3,"ngModel","ngModelChange"],["class","errorText",4,"ngIf"],["mat-raised-button","",1,"viewDataBtn",3,"click"],[1,"errorText"],[4,"ngFor","ngForOf"],["value","exam"],["value","proverb"],["value","lara"],["value","combination"],["value","general"],["appearance","fill",4,"ngIf"],["style","width: 50%; padding: 10px",4,"ngIf"],["appearance","fill","class","inputText",4,"ngIf"],["value","munster"],["value","connacht"],["value","ulster"],["value","jc"],["value","lcol"],["value","lchl"]],template:function(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Add Data to DB"),e.qZA(),e.TgZ(3,"mat-form-field",2)(4,"mat-label"),e._uU(5,"Select Topic"),e.qZA(),e.TgZ(6,"mat-select",3),e.NdJ("ngModelChange",function(s){return a.selectedContent=s})("ngModelChange",function(){e.CHM(o);const s=e.MAs(16),c=e.MAs(14);return s.hideTable=!0,e.KtG(c.hideTable=!0)}),e.TgZ(7,"mat-option",4),e._uU(8,"Part of Speech Data"),e.qZA(),e.TgZ(9,"mat-option",5),e._uU(10,"Prompt Data"),e.qZA()()(),e.YNc(11,Wd,37,12,"div",6),e.YNc(12,cf,29,16,"div",6),e.qZA(),e._UZ(13,"app-prompt-data-table",7,8)(15,"app-pos-data-table",7,9)}2&t&&(e.xp6(6),e.Q6J("ngModel",a.selectedContent),e.xp6(5),e.Q6J("ngIf","partOfSpeech"==a.selectedContent),e.xp6(1),e.Q6J("ngIf","prompt"==a.selectedContent),e.xp6(1),e.Q6J("data",a.promptDataSource),e.xp6(2),e.Q6J("data",a.posDataSource))},dependencies:[L.sg,L.O5,Q.Fj,Q.JJ,Q.On,Ee.KE,Ee.hX,Mo.Nt,ii.gD,Oe.ey,ai.lW,Od,zd],styles:[".headerTitle[_ngcontent-%COMP%]{font-size:16pt;padding-top:10px;padding-bottom:10px}.mainContainer[_ngcontent-%COMP%]{min-height:50vh;max-height:80vh;padding:20px}.posFields[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-evenly;flex-direction:column}.errorText[_ngcontent-%COMP%]{color:red;padding:10px}.inputText[_ngcontent-%COMP%]{width:70%}.viewDataBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;float:left;margin-left:20px}"]}),n})();var df=S(1245),ff=S(530);function uf(n,i){1&n&&(e.TgZ(0,"span",20),e._uU(1,"s"),e.qZA())}function pf(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",21),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.goToClassroom(r._id))}),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",22),e._uU(4),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(t.studentIds.length)}}function hf(n,i){if(1&n&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",18),e._uU(3),e.YNc(4,uf,2,0,"span",14),e._uU(5),e.qZA(),e.TgZ(6,"div",16),e.YNc(7,pf,5,2,"div",19),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.user.username,"'"),e.xp6(1),e.Q6J("ngIf","s"!==t.user.username[t.user.username.length-1]),e.xp6(1),e.hij(" ",t.ts.l.classrooms," "),e.xp6(2),e.Q6J("ngForOf",t.classrooms)}}function gf(n,i){1&n&&(e.TgZ(0,"span",20),e._uU(1,"s"),e.qZA())}function mf(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",21),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.goToStory(r._id))}),e._uU(1),e.qZA()}if(2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}function _f(n,i){if(1&n&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",18),e._uU(3),e.YNc(4,gf,2,0,"span",14),e._uU(5),e.qZA(),e.TgZ(6,"div",16),e.YNc(7,mf,2,1,"div",19),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.user.username,"'"),e.xp6(1),e.Q6J("ngIf","s"!==(null==t.user?null:t.user.username[t.user.username.length-1])),e.xp6(1),e.hij(" ",t.ts.l.stories," "),e.xp6(2),e.Q6J("ngForOf",t.stories)}}function vf(n,i){1&n&&(e.TgZ(0,"span",20),e._uU(1,"s"),e.qZA())}function bf(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.minimiseEvents())}),e._UZ(1,"i",24),e.qZA()}}function xf(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.maximiseEvents())}),e._UZ(1,"i",25),e.qZA()}}function yf(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",37)(1,"b"),e._uU(2,"Story id"),e.qZA(),e.TgZ(3,"div",38),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,r=e.oxw(3);return e.KtG(r.goToStory(o.storyData._id))}),e._uU(4),e._UZ(5,"i",39),e.qZA()()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(4),e.Oqu(t.storyData._id)}}function Tf(n,i){if(1&n&&(e.TgZ(0,"div",37)(1,"b"),e._uU(2,"Story text"),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(3),e.Oqu(t.storyData.text)}}function Cf(n,i){if(1&n&&(e.TgZ(0,"div",35)(1,"b"),e._uU(2),e.qZA(),e._uU(3),e.YNc(4,yf,6,1,"div",36),e.YNc(5,Tf,4,1,"div",36),e.qZA()),2&n){const t=e.oxw().$implicit,a=e.oxw(3);e.xp6(2),e.Oqu(a.ts.l.ISODate),e.xp6(1),e.hij("",t.date," "),e.xp6(1),e.Q6J("ngIf",null==t.storyData?null:t.storyData._id),e.xp6(1),e.Q6J("ngIf",null==t.storyData?null:t.storyData.text)}}function Sf(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",31),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.eventSelected[r._id]=!s.eventSelected[r._id])}),e.TgZ(1,"div",32)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",33),e._uU(5),e.qZA()(),e.YNc(6,Cf,6,4,"div",34),e.qZA()}if(2&n){const t=i.$implicit,a=e.oxw(3);e.xp6(3),e.Oqu(t.type),e.xp6(2),e.Oqu(a.getTimeFromDate(t.date)),e.xp6(1),e.Q6J("ngIf",a.eventSelected[t._id])}}function wf(n,i){if(1&n&&(e.TgZ(0,"div",26)(1,"div",27),e._UZ(2,"div",28),e.TgZ(3,"div",29),e._uU(4),e.qZA(),e._UZ(5,"div",28),e.qZA(),e.YNc(6,Sf,7,3,"div",30),e.qZA()),2&n){const t=i.$implicit,a=e.oxw(2);e.xp6(4),e.Oqu(a.getFormattedDateOfInitialElementFor(t)),e.xp6(2),e.Q6J("ngForOf",t)}}function Zf(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._uU(2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"b"),e._uU(6),e.qZA(),e.TgZ(7,"textarea",5),e._uU(8),e.qZA()()(),e.TgZ(9,"div",3)(10,"div",4)(11,"b"),e._uU(12),e.qZA(),e.TgZ(13,"textarea",5),e._uU(14),e.qZA()()(),e.TgZ(15,"div",6)(16,"button",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openDeleteDialog())}),e._uU(17),e.qZA()(),e.TgZ(18,"div",8),e.YNc(19,hf,8,4,"div",9),e.YNc(20,_f,8,4,"div",9),e.TgZ(21,"div",10)(22,"div",11)(23,"div",12),e._UZ(24,"div",13),e.TgZ(25,"div"),e._uU(26),e.YNc(27,vf,2,0,"span",14),e._uU(28),e.qZA(),e.YNc(29,bf,2,0,"div",15),e.YNc(30,xf,2,0,"div",15),e.qZA(),e.TgZ(31,"div",16),e.YNc(32,wf,7,2,"div",17),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.AsE("",t.ts.l.profile_summary,": '",t.user.username,"'"),e.xp6(4),e.hij("",t.ts.l.username,":"),e.xp6(2),e.Oqu(t.user.username),e.xp6(4),e.hij("",t.ts.l.role,":"),e.xp6(2),e.Oqu(t.user.role),e.xp6(3),e.hij(" ",t.ts.l.delete_this_account," "),e.xp6(2),e.Q6J("ngIf","TEACHER"===(null==t.user?null:t.user.role)),e.xp6(1),e.Q6J("ngIf","STUDENT"===(null==t.user?null:t.user.role)),e.xp6(6),e.hij(" ",t.user.username,"'"),e.xp6(1),e.Q6J("ngIf","s"!==(null==t.user?null:t.user.username[t.user.username.length-1])),e.xp6(1),e.hij(" ",t.ts.l.activity," "),e.xp6(1),e.Q6J("ngIf",t.maximised),e.xp6(1),e.Q6J("ngIf",!t.maximised),e.xp6(2),e.Q6J("ngForOf",t.eventDates)}}let Af=(()=>{class n{constructor(t,a,o,r,s,c,u,g,l,p,h,v){this.route=t,this.http=a,this.storyService=o,this.router=r,this.classroomService=s,this.engagement=c,this.ts=u,this.messageService=g,this.profileService=l,this.userService=p,this.recordingService=h,this.dialog=v,this.eventSelected={},this.allEvents=[],this.maximised=!1,this.baseUrl=qe.Z.baseurl}ngOnInit(){this.getUserId().then(t=>{this.http.get(this.baseUrl+"user/viewUser",{headers:{_id:t.id.toString()}}).subscribe(a=>{this.user=a,"STUDENT"===this.user.role?this.getStories():"TEACHER"===this.user.role&&this.getClassrooms(),this.engagement.getEventsForUser(this.user._id).subscribe(o=>{let r=o;this.eventDates=[],this.eventDates.push([o[0]]),r.forEach(s=>{if(r.indexOf(s)>0){let c=new Date(s.date);this.roundDate(new Date(this.eventDates[this.eventDates.length-1][0].date)).toString()===this.roundDate(c).toString()?this.eventDates[this.eventDates.length-1].push(s):this.eventDates.push([s])}this.eventSelected[s._id]=!1,this.allEvents.push(s)})})})})}roundDate(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())}formatDate(t){let a=t.getDate(),o=t.getMonth()+1,r=t.getFullYear(),s=a.toString(),c=o.toString();return a<10&&(s="0"+a),o<10&&(c="0"+o),s+"/"+c+"/"+r}getTimeFromDate(t){let a=new Date(t),o=a.getHours().toString(),r=a.getMinutes().toString(),s=a.getSeconds().toString();return a.getHours()<10&&(o="0"+o),a.getMinutes()<10&&(r="0"+r),a.getSeconds()<10&&(s="0"+s),o+":"+r+":"+s}getFormattedDateOfInitialElementFor(t){return this.formatDate(new Date(t[0].date))}eventIsSelected(t){return this.eventSelected[t._id]}minimiseEvents(){this.allEvents.forEach(t=>{this.eventSelected[t._id]=!1}),this.maximised=!1}maximiseEvents(){this.allEvents.forEach(t=>{this.eventSelected[t._id]=!0}),this.maximised=!0}getUserId(){return new Promise((t,a)=>{this.route.params.subscribe(o=>{t(o)})})}getStories(){this.storyService.getStoriesFor(this.user.username).subscribe(t=>{this.stories=t})}getClassrooms(){this.classroomService.getClassroomsForTeacher(this.user._id).subscribe(t=>{this.classrooms=t})}goToStory(t){this.router.navigateByUrl("admin/story/"+t.toString())}goToClassroom(t){this.router.navigateByUrl("admin/classroom/"+t)}deleteAccount(){!this.user||("STUDENT"===this.user.role&&(this.classroomService.getClassroomOfStudent(this.user._id).subscribe(t=>{t&&this.classroomService.removeStudentFromClassroom(t._id,this.user._id).subscribe(()=>{})}),this.storyService.getStoriesFor(this.user.username).subscribe(t=>{for(let a of t)this.recordingService.deleteStoryRecordingAudio(a._id).subscribe(()=>{}),this.recordingService.deleteStoryRecording(a._id).subscribe(()=>{})}),this.storyService.deleteAllStories(this.user._id).subscribe(()=>{})),"TEACHER"===this.user.role&&this.classroomService.deleteClassroomsForTeachers(this.user._id).subscribe(()=>{}),this.messageService.deleteAllMessages(this.user._id).subscribe(()=>{}),this.profileService.deleteProfile(this.user._id).subscribe(()=>{}),this.userService.deleteUser(this.user._id).subscribe(()=>{}),this.router.navigateByUrl("admin/find-user"))}openDeleteDialog(){this.dialogRef=this.dialog.open(ft.p,{data:{title:this.ts.l.are_you_sure,message:this.ts.l.this_includes_story_data,type:"simpleConfirm",confirmText:this.ts.l.yes,cancelText:this.ts.l.no},width:"50%"}),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=void 0,t&&this.deleteAccount()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ce.gz),e.Y36(Ve.eN),e.Y36(Mt.N),e.Y36(Ce.F0),e.Y36(Ot.u),e.Y36(ti.M),e.Y36(De.D),e.Y36(df.e),e.Y36(Zn.H),e.Y36(ut.K),e.Y36(ff.s),e.Y36(Sn.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user"]],decls:1,vars:1,consts:[["class","content",4,"ngIf"],[1,"content"],[1,"generateCodeTitle"],[1,"userInfoDisplay"],[1,"userInfo"],["readonly","",1,"userInfoTextarea"],[1,"buttonContainer"],[1,"btn","deleteAccountButton",3,"click"],[1,"contentBody"],["class","teacherAccountsContainer",4,"ngIf"],[1,"teacherAccountsContainer"],[1,"teacherAccountsDisplay"],[1,"teacherAccountsHeader","eventContainerHeader"],[2,"width","20px"],["style","margin-right: 8px;",4,"ngIf"],["class","maximiseIconContainer",3,"click",4,"ngIf"],[1,"teacherAccountsBody"],["class","",4,"ngFor","ngForOf"],[1,"teacherAccountsHeader"],["class","activeTeacherCodeContainer whiteBtn",3,"click",4,"ngFor","ngForOf"],[2,"margin-right","8px"],[1,"activeTeacherCodeContainer","whiteBtn",3,"click"],[1,"studentCount"],[1,"maximiseIconContainer",3,"click"],[1,"fas","fa-minus","maximiseIcon"],[1,"fas","fa-plus","maximiseIcon"],[1,""],[1,"dateTextContainer"],[1,"dateLine"],[1,"dateText"],["class","activeTeacherCodeContainer eventContainer whiteBtn",3,"click",4,"ngFor","ngForOf"],[1,"activeTeacherCodeContainer","eventContainer","whiteBtn",3,"click"],[1,"eventHeader"],[1,"eventTime"],["class","eventBody mainEventBody",4,"ngIf"],[1,"eventBody","mainEventBody"],["class","eventBody",4,"ngIf"],[1,"eventBody"],[1,"storyLink",3,"click"],[1,"fas","fa-link","storyLinkIcon"]],template:function(t,a){1&t&&e.YNc(0,Zf,33,15,"div",0),2&t&&e.Q6J("ngIf",a.user)},dependencies:[L.sg,L.O5],styles:[".content[_ngcontent-%COMP%]{width:90%;margin-left:5%;padding-top:3vh;height:80vh;display:flex;flex-direction:column}.generateCodeTitle[_ngcontent-%COMP%]{font-size:14pt;display:flex;justify-content:center}.userInfoDisplay[_ngcontent-%COMP%]{width:30%;margin-left:30%;margin-top:2vh}.userInfo[_ngcontent-%COMP%]{float:right;display:flex;align-items:center}.userInfoTextarea[_ngcontent-%COMP%]{background-color:var(--scealai-gray)}.buttonContainer[_ngcontent-%COMP%]{padding-top:15px}.deleteAccountButton[_ngcontent-%COMP%]{background-color:var(--delete-red);font-size:12pt;border-radius:10px}.deleteAccountButton[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover);transition:.5s}.contentBody[_ngcontent-%COMP%]{justify-content:space-evenly}.teacherAccountsContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:40%}.teacherAccountsDisplay[_ngcontent-%COMP%]{margin-top:4vh;width:100%;height:45vh;background-color:var(--scealai-gray);border-radius:5px}.teacherAccountsHeader[_ngcontent-%COMP%]{font-size:14pt;height:5vh;display:flex;align-items:center;justify-content:center;color:#fff;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0}.teacherAccountsBody[_ngcontent-%COMP%]{padding:10px 10px 0;text-align:left;overflow:auto;height:40vh}.activeTeacherCodeContainer[_ngcontent-%COMP%]{background-color:#fff;padding:5px;border-radius:5px;margin-bottom:10px;display:flex}.whiteBtn[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--scealai-med-brown-hover);cursor:pointer}.studentCount[_ngcontent-%COMP%]{margin-left:auto}.eventContainerHeader[_ngcontent-%COMP%]{justify-content:space-between}.maximiseIconContainer[_ngcontent-%COMP%]{margin-right:8px}.dateTextContainer[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;color:#777;margin-bottom:10px}.dateText[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.dateLine[_ngcontent-%COMP%]{height:1px;background-color:#777;width:50%}.eventContainer[_ngcontent-%COMP%]{flex-direction:column}.eventHeader[_ngcontent-%COMP%]{display:flex}.eventTime[_ngcontent-%COMP%]{margin-left:auto}.eventBody[_ngcontent-%COMP%]{display:flex;flex-direction:column}.mainEventBody[_ngcontent-%COMP%]{border-top:1px solid var(--scealai-gray)}.storyLink[_ngcontent-%COMP%]{color:#000;color:inherit}.storyLink[_ngcontent-%COMP%]:hover{text-decoration:none;color:#53ff81;text-decoration:underline}.storyLinkIcon[_ngcontent-%COMP%]{margin-left:5px}"]}),n})();function Pf(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.goToStudent(r._id))}),e.TgZ(1,"div"),e._uU(2),e.qZA()()}if(2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.username)}}let Mf=(()=>{class n{constructor(t,a,o,r){this.route=t,this.classroomService=a,this.router=o,this.userService=r,this.students=[]}ngOnInit(){this.getClassroom()}getClassroomId(){var t=this;return(0,fe.Z)(function*(){const a=yield(0,ue.z)(t.route.params);if(a.id)return a.id;throw new Error("classroom id not in route params")})()}getClassroom(){var t=this;return(0,fe.Z)(function*(){const a=yield t.getClassroomId();t.classroom=yield(0,ue.z)(t.classroomService.getClassroom(a)),t.getStudents()})()}getStudents(){for(let t of this.classroom.studentIds)this.userService.getUserById(t).subscribe({next:a=>this.students.push(a),error:()=>console.log(t+" does not exist")})}goToStudent(t){this.router.navigateByUrl("/admin/user/"+t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ce.gz),e.Y36(Ot.u),e.Y36(Ce.F0),e.Y36(ut.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-classroom"]],decls:5,vars:2,consts:[[1,"adminClassContainer"],[1,"classHeader"],[1,"classBody"],["class","classroomCard",3,"click",4,"ngFor","ngForOf"],[1,"classroomCard",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,Pf,3,1,"div",3),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",null==a.classroom?null:a.classroom.title," "),e.xp6(2),e.Q6J("ngForOf",a.students))},dependencies:[L.sg],styles:[".adminClassContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%;background-color:var(--scealai-gray);border-radius:5px;margin-top:20px;height:65vh}.classHeader[_ngcontent-%COMP%]{padding-left:12px;font-size:14pt}"]}),n})();var ko=S(1481);function Of(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"textarea",18),e.NdJ("ngModelChange",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.story.feedback.text=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.feedbackSent=!1)}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.MGl("placeholder","Leave some feedback on ",t.authorPossessive," story"),e.Q6J("ngModel",t.story.feedback.text)}}function Df(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e._UZ(2,"i",20),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE("",t.ts.l.seen_by," ",null==t.story?null:t.story.author," ")}}function qf(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE("",t.ts.l.not_seen_by," ",null==t.story?null:t.story.author,"")}}function Uf(n,i){if(1&n&&(e.TgZ(0,"div",19),e.YNc(1,Df,3,2,"span",16),e.YNc(2,qf,2,2,"span",16),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.story.feedback.seenByStudent),e.xp6(1),e.Q6J("ngIf",!t.story.feedback.seenByStudent)}}function If(n,i){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"audio",21,22),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.audioSource,e.LSH)}}let Ef=(()=>{class n{constructor(t,a,o,r,s,c){this.route=t,this.http=a,this.sanitizer=o,this.storyService=r,this.router=s,this.ts=c,this.baseUrl=qe.Z.baseurl}ngOnInit(){this.getParams().then(t=>{this.http.get(this.baseUrl+"story/viewStory/"+t.id.toString()).subscribe(a=>{this.story=a[0],this.getFeedbackAudio()})})}getParams(){return new Promise((t,a)=>{this.route.params.subscribe(o=>{t(o)})})}getFeedbackAudio(){this.storyService.getFeedbackAudio(this.story._id).subscribe(t=>{"audio/mp3"==t.type&&(this.audioSource=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(t)))})}goToStoryHistory(){this.router.navigateByUrl("/admin/story-history/"+this.story._id)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ce.gz),e.Y36(Ve.eN),e.Y36(ko.H7),e.Y36(Mt.N),e.Y36(Ce.F0),e.Y36(De.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-story"]],decls:37,vars:16,consts:[[1,"contentContainer"],[1,"adminClassBody"],[1,"storyTextContainer"],[1,"storyTextHeader"],[1,"storyText"],[1,"greenBtn",3,"click"],[1,"storyInfoContainer"],[1,"storyInfoBody"],[1,"userInfo"],["readonly","",1,"userInfoTextarea"],[1,"feedbackContainer"],[1,"feedbackHeader"],["class","feedbackBody",4,"ngIf"],[1,"feedbackFooter"],["class","seenByStudent",4,"ngIf"],[1,"feedbackBtnContainer"],[4,"ngIf"],[1,"feedbackBody"],[1,"feedbackTextarea",3,"placeholder","ngModel","ngModelChange","input"],[1,"seenByStudent"],[1,"fas","fa-check"],["id","audio","controls","",1,"audioPlayer",3,"src"],["audioTag",""]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return a.goToStoryHistory()}),e._uU(8),e.qZA()(),e.TgZ(9,"div",6)(10,"div",3),e._uU(11),e.qZA(),e.TgZ(12,"div",7)(13,"div",8),e._uU(14),e.TgZ(15,"textarea",9),e._uU(16),e.qZA()(),e.TgZ(17,"div",8),e._uU(18),e.TgZ(19,"textarea",9),e._uU(20),e.qZA()(),e.TgZ(21,"div",8),e._uU(22),e.TgZ(23,"textarea",9),e._uU(24),e.qZA()(),e.TgZ(25,"div",8),e._uU(26),e.TgZ(27,"textarea",9),e._uU(28),e.qZA()(),e.TgZ(29,"div",10)(30,"div",11),e._uU(31),e.qZA(),e.YNc(32,Of,2,2,"div",12),e.TgZ(33,"div",13),e.YNc(34,Uf,3,2,"div",14),e.qZA()(),e.TgZ(35,"div",15),e.YNc(36,If,3,1,"div",16),e.qZA()()()()()),2&t&&(e.xp6(4),e.Oqu(a.ts.l.text),e.xp6(2),e.Oqu(null==a.story?null:a.story.text),e.xp6(2),e.Oqu(a.ts.l.story_history),e.xp6(3),e.Oqu(a.ts.l.information),e.xp6(3),e.hij("",a.ts.l.title,": "),e.xp6(2),e.Oqu(null==a.story?null:a.story.title),e.xp6(2),e.hij("",a.ts.l.author_admin,": "),e.xp6(2),e.Oqu(null==a.story?null:a.story.author),e.xp6(2),e.hij("",a.ts.l.creation_date,": "),e.xp6(2),e.Oqu(null==a.story?null:a.story.date),e.xp6(2),e.hij("",a.ts.l.dialect,": "),e.xp6(2),e.Oqu(null==a.story?null:a.story.dialect),e.xp6(3),e.Oqu(a.ts.l.feedback),e.xp6(1),e.Q6J("ngIf",a.story),e.xp6(2),e.Q6J("ngIf",a.story),e.xp6(2),e.Q6J("ngIf",a.audioSource))},dependencies:[L.O5,Q.Fj,Q.JJ,Q.On],styles:[".adminClassBody[_ngcontent-%COMP%]{display:flex;padding:0 5px 5px;width:100%}.storyTextContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:var(--scealai-gray);margin-top:2vh;margin-left:5px;height:68vh;width:50%;border-radius:5px}.storyText[_ngcontent-%COMP%]{text-align:left;padding:4px;overflow:auto;white-space:pre-wrap;background-color:#fff;border-radius:5px;margin:8px;height:55vh}.greenBtn[_ngcontent-%COMP%]{margin-left:7px;margin-right:7px;margin-top:-3px;color:#fff;background-color:var(--scealai-green);border-radius:5px}.greenBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-dark-green);transition:.5s}.storyInfoContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:var(--scealai-gray);margin-top:2vh;margin-left:1%;height:68vh;width:48%;border-radius:5px}.storyTextHeader[_ngcontent-%COMP%]{width:100%;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0;color:#fff;display:flex;padding:4px 4px 4px 8px;font-size:12pt;justify-content:center}.storyInfoBody[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-left:8px;padding-right:8px}.userInfo[_ngcontent-%COMP%]{float:right;display:flex;align-items:center;padding-top:8px;width:100%;white-space:nowrap}.userInfoTextarea[_ngcontent-%COMP%]{width:100%}.feedbackContainer[_ngcontent-%COMP%]{width:100%;background-color:#fff;margin-top:2vh;border-radius:5px;display:flex;flex-direction:column;height:28vh}.feedbackHeader[_ngcontent-%COMP%]{width:100%;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0;color:#fff;padding:4px}.feedbackBody[_ngcontent-%COMP%]{padding:4px;text-align:left;overflow:auto}.feedbackTextarea[_ngcontent-%COMP%]{border:none;width:100%;height:75px;resize:none}.feedbackFooter[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;padding:4px;border-top:1px solid var(--scealai-gray);border-radius:5px;margin-top:auto}.seenByStudent[_ngcontent-%COMP%]{font-size:10pt;color:var(--scealai-light-gray);margin-left:4px}.feedbackBtnContainer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.audioPlayer[_ngcontent-%COMP%]{width:450px;height:32px;margin-top:7px}"]}),n})();var Nf=S(6832);function Lf(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7),e._uU(3),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()(),e.TgZ(6,"div",9),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.isHighlighted=!r.isHighlighted)}),e._UZ(7,"i",10),e.qZA(),e._UZ(8,"div",11),e.qZA()}if(2&n){const t=i.$implicit,a=e.oxw();e.xp6(3),e.Oqu(a.formatDate(t.event.date)),e.xp6(2),e.Oqu(t.event.type),e.xp6(1),e.Gre("highlightIcon ",a.getHighlightIconClass(t),""),e.xp6(2),e.Q6J("innerHtml",t.isHighlighted?t.textHighlighted:t.textNotHighlighted,e.oJD)}}let kf=(()=>{class n{constructor(t,a,o,r,s,c,u){this.engagement=t,this.route=a,this.http=o,this.storyService=r,this.router=s,this.sanitizer=c,this.ts=u,this.highlightedTexts=[],this.entries=[],this.highlightIconClass=""}ngOnInit(){this.getParams().then(t=>{let a=t.id.toString();this.engagement.getEventsForStory(a).subscribe(o=>{let r;this.events=o,this.events.forEach(s=>{let c=new Ff;c.event=s;let u=s.storyData;c.textHighlighted=u.text,c.textNotHighlighted=u.text,r&&(c.textHighlighted=this.highlightDifference(r.text.toString(),u.text.toString())),r=u,c.isHighlighted=!1,this.entries.push(c)})})})}highlightDifference(t,a){let s="notHighlighted",c="";return Nf.diffChars(t,a).forEach(function(g){s=g.added?"highlightedGreen":g.removed?"highlightedRed":"notHighlighted";let l=document.createElement("span");l.classList.add(s),l.appendChild(document.createTextNode(g.value));let p=document.createElement("span");p.appendChild(l),c+=p.innerHTML}),this.sanitizer.bypassSecurityTrustHtml(c)}toggleHighlights(){this.entries.forEach(t=>{t.isHighlighted=!t.isHighlighted}),this.highlightIconClass=""===this.highlightIconClass?"iconHighlighted":""}getParams(){return new Promise((t,a)=>{this.route.params.subscribe(o=>{t(o)})})}formatDate(t){let a=new Date(t),o=a.getDate(),r=a.getMonth()+1,s=a.getFullYear(),c=o.toString(),u=r.toString();o<10&&(c="0"+o),r<10&&(u="0"+r);let g=a.getHours().toString(),l=a.getMinutes().toString(),p=a.getSeconds().toString();return a.getHours()<10&&(g="0"+g),a.getMinutes()<10&&(l="0"+l),a.getSeconds()<10&&(p="0"+p),c+"-"+u+"-"+s+" "+g+":"+l+":"+p}getHighlightIconClass(t){return t.isHighlighted?"iconHighlighted":""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ti.M),e.Y36(Ce.gz),e.Y36(Ve.eN),e.Y36(Mt.N),e.Y36(Ce.F0),e.Y36(ko.H7),e.Y36(De.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-story-history"]],decls:6,vars:2,consts:[["id","display"],[1,"storyHistoryHeader"],[1,"fas","fa-info-circle"],[1,"storyContainer"],["class","entry",4,"ngFor","ngForOf"],[1,"entry"],[1,"eventEntry"],[1,"eventDate"],[1,"eventType"],[3,"click"],[1,"fas","fa-highlighter"],[1,"textEntry",3,"innerHtml"]],template:function(t,a){1&t&&(e._UZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e._UZ(3,"i",2),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,Lf,9,6,"div",4),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",a.ts.l.history_of_title," "),e.xp6(3),e.Q6J("ngForOf",a.entries))},dependencies:[L.sg],styles:[".storyHistoryHeader[_ngcontent-%COMP%]{color:#fff;background-color:var(--scealai-dark-green);width:60%;margin-left:20%;border-radius:5px 5px 0 0;font-size:12pt;padding:4px;margin-top:2vh}.storyContainer[_ngcontent-%COMP%]{width:60%;margin-left:20%;background-color:#d1d1d1;border-radius:0 0 5px 5px;height:63vh;padding:8px 8px 0;overflow:auto}.entry[_ngcontent-%COMP%]{margin-bottom:8px;padding:8px;background-color:#777;border-radius:5px}.eventEntry[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;margin-bottom:8px}.eventDate[_ngcontent-%COMP%]{width:50%;background-color:#fff;border-radius:10px 0 0 10px}.eventType[_ngcontent-%COMP%]{width:50%;background-color:var(--scealai-green);color:#fff;border-radius:0 10px 10px 0}.highlightIcon[_ngcontent-%COMP%]{float:right;margin-right:8px;margin-top:5px;color:var(--scealai-dark-green);opacity:.3}.highlightIcon[_ngcontent-%COMP%]:hover{color:var(--scealai-green);opacity:1;transition:.5s;cursor:pointer}.iconHighlighted[_ngcontent-%COMP%]{color:var(--scealai-green);opacity:1}.iconHighlighted[_ngcontent-%COMP%]:hover{color:var(--scealai-dark-green);transition:1s}.textEntry[_ngcontent-%COMP%]{width:100%;text-align:left;padding:4px;border-radius:5px;background-color:#fff}[_nghost-%COMP%]     .highlightedGreen{background-color:#aafdc0}[_nghost-%COMP%]     .highlightedRed{background-color:#fdaaaa}[_nghost-%COMP%]     .notHighlighted{background-color:none}"]}),n})();class Ff{}const Rf=[{path:"",pathMatch:"full",component:Tn},{path:"teachers",pathMatch:"full",component:li},{path:"find-user",pathMatch:"full",component:Pt},{path:"database-stats",pathMatch:"full",component:Oc},{path:"profile-stats",pathMatch:"full",component:Cl},{path:"feature-stats",pathMatch:"full",component:Ul},{path:"add-content",pathMatch:"full",component:lf},{path:"user/:id",pathMatch:"full",component:Af},{path:"classroom/:id",pathMatch:"full",component:Mf},{path:"story/:id",pathMatch:"full",component:Ef},{path:"story-history/:id",pathMatch:"full",component:kf}];let Yf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[Ce.Bz.forChild(Rf),Q.u5,Ce.Bz]}),n})();var Bf=S(3869);let jf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[bn,Gt,Ne.FA],imports:[L.ez,Yf,Q.u5,Q.UX,Ee.lN,ae.p0,Mo.c,sd,_d,$t.To,ii.LD,Ct.QW,ai.ot,Ne.FA,Bf.F]}),n})()},6832:function(Fo,yn){!function(S){"use strict";function L(){}function Q(f,d,m,_,y){for(var b=0,C=d.length,A=0,M=0;b<C;b++){var P=d[b];if(P.removed){if(P.value=f.join(_.slice(M,M+P.count)),M+=P.count,b&&d[b-1].added){var X=d[b-1];d[b-1]=d[b],d[b]=X}}else{if(!P.added&&y){var j=m.slice(A,A+P.count);j=j.map(function(ee,se){var B=_[M+se];return B.length>ee.length?B:ee}),P.value=f.join(j)}else P.value=f.join(m.slice(A,A+P.count));A+=P.count,P.added||(M+=P.count)}}var F=d[C-1];return C>1&&"string"==typeof F.value&&(F.added||F.removed)&&f.equals("",F.value)&&(d[C-2].value+=F.value,d.pop()),d}function Ce(f){return{newPos:f.newPos,components:f.components.slice(0)}}L.prototype={diff:function(d,m){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},y=_.callback;"function"==typeof _&&(y=_,_={}),this.options=_;var b=this;function C(B){return y?(setTimeout(function(){y(void 0,B)},0),!0):B}d=this.castInput(d),m=this.castInput(m),d=this.removeEmpty(this.tokenize(d));var A=(m=this.removeEmpty(this.tokenize(m))).length,M=d.length,P=1,j=A+M,X=[{newPos:-1,components:[]}],F=this.extractCommon(X[0],m,d,0);if(X[0].newPos+1>=A&&F+1>=M)return C([{value:this.join(m),count:m.length}]);function ee(){for(var B=-1*P;B<=P;B+=2){var he=void 0,ge=X[B-1],me=X[B+1],ve=(me?me.newPos:0)-B;ge&&(X[B-1]=void 0);var le=ge&&ge.newPos+1<A,Fe=me&&0<=ve&&ve<M;if(le||Fe){if(!le||Fe&&ge.newPos<me.newPos?(he=Ce(me),b.pushComponent(he.components,void 0,!0)):((he=ge).newPos++,b.pushComponent(he.components,!0,void 0)),ve=b.extractCommon(he,m,d,B),he.newPos+1>=A&&ve+1>=M)return C(Q(b,he.components,m,d,b.useLongestToken));X[B]=he}else X[B]=void 0}P++}if(y)!function B(){setTimeout(function(){if(P>j)return y();ee()||B()},0)}();else for(;P<=j;){var se=ee();if(se)return se}},pushComponent:function(d,m,_){var y=d[d.length-1];y&&y.added===m&&y.removed===_?d[d.length-1]={count:y.count+1,added:m,removed:_}:d.push({count:1,added:m,removed:_})},extractCommon:function(d,m,_,y){for(var b=m.length,C=_.length,A=d.newPos,M=A-y,P=0;A+1<b&&M+1<C&&this.equals(m[A+1],_[M+1]);)A++,M++,P++;return P&&d.components.push({count:P}),d.newPos=A,M},equals:function(d,m){return this.options.comparator?this.options.comparator(d,m):d===m||this.options.ignoreCase&&d.toLowerCase()===m.toLowerCase()},removeEmpty:function(d){for(var m=[],_=0;_<d.length;_++)d[_]&&m.push(d[_]);return m},castInput:function(d){return d},tokenize:function(d){return d.split("")},join:function(d){return d.join("")}};var De=new L;function Tn(f,d){if("function"==typeof f)d.callback=f;else if(f)for(var m in f)f.hasOwnProperty(m)&&(d[m]=f[m]);return d}var Cn=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,qe=/\S/,ft=new L;ft.equals=function(f,d){return this.options.ignoreCase&&(f=f.toLowerCase(),d=d.toLowerCase()),f===d||this.options.ignoreWhitespace&&!qe.test(f)&&!qe.test(d)},ft.tokenize=function(f){for(var d=f.split(/(\s+|[()[\]{}'"]|\b)/),m=0;m<d.length-1;m++)!d[m+1]&&d[m+2]&&Cn.test(d[m])&&Cn.test(d[m+2])&&(d[m]+=d[m+2],d.splice(m+1,2),m--);return d};var wt=new L;function wn(f,d,m){return wt.diff(f,d,m)}wt.tokenize=function(f){var d=[],m=f.split(/(\n|\r\n)/);m[m.length-1]||m.pop();for(var _=0;_<m.length;_++){var y=m[_];_%2&&!this.options.newlineIsToken?d[d.length-1]+=y:(this.options.ignoreWhitespace&&(y=y.trim()),d.push(y))}return d};var di=new L;di.tokenize=function(f){return f.split(/(\S.+?[.!?])(?=\s+|$)/)};var ut=new L;function Zt(f){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(f)}function ke(f){return function Vt(f){if(Array.isArray(f)){for(var d=0,m=new Array(f.length);d<f.length;d++)m[d]=f[d];return m}}(f)||function ui(f){if(Symbol.iterator in Object(f)||"[object Arguments]"===Object.prototype.toString.call(f))return Array.from(f)}(f)||function pi(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}ut.tokenize=function(f){return f.split(/([{}:;,]|\s+)/)};var hi=Object.prototype.toString,rt=new L;function At(f,d,m,_,y){var b,C;for(d=d||[],m=m||[],_&&(f=_(y,f)),b=0;b<d.length;b+=1)if(d[b]===f)return m[b];if("[object Array]"===hi.call(f)){for(d.push(f),C=new Array(f.length),m.push(C),b=0;b<f.length;b+=1)C[b]=At(f[b],d,m,_,y);return d.pop(),m.pop(),C}if(f&&f.toJSON&&(f=f.toJSON()),"object"===Zt(f)&&null!==f){d.push(f),m.push(C={});var M,A=[];for(M in f)f.hasOwnProperty(M)&&A.push(M);for(A.sort(),b=0;b<A.length;b+=1)C[M=A[b]]=At(f[M],d,m,_,M);d.pop(),m.pop()}else C=f;return C}rt.useLongestToken=!0,rt.tokenize=wt.tokenize,rt.castInput=function(f){var d=this.options,m=d.undefinedReplacement,_=d.stringifyReplacer,y=void 0===_?function(b,C){return typeof C>"u"?m:C}:_;return"string"==typeof f?f:JSON.stringify(At(f,null,null,y),y,"  ")},rt.equals=function(f,d){return L.prototype.equals.call(rt,f.replace(/,([\r\n])/g,"$1"),d.replace(/,([\r\n])/g,"$1"))};var Pt=new L;function ue(f){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=f.split(/\r\n|[\n\v\f\r\x85]/),_=f.match(/\r\n|[\n\v\f\r\x85]/g)||[],y=[],b=0;function C(){var P={};for(y.push(P);b<m.length;){var j=m[b];if(/^(\-\-\-|\+\+\+|@@)\s/.test(j))break;var X=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(j);X&&(P.index=X[1]),b++}for(A(P),A(P),P.hunks=[];b<m.length;){var F=m[b];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(F))break;if(/^@@/.test(F))P.hunks.push(M());else{if(F&&d.strict)throw new Error("Unknown line "+(b+1)+" "+JSON.stringify(F));b++}}}function A(P){var j=/^(---|\+\+\+)\s+(.*)$/.exec(m[b]);if(j){var X="---"===j[1]?"old":"new",F=j[2].split("\t",2),ee=F[0].replace(/\\\\/g,"\\");/^".*"$/.test(ee)&&(ee=ee.substr(1,ee.length-2)),P[X+"FileName"]=ee,P[X+"Header"]=(F[1]||"").trim(),b++}}function M(){for(var P=b,X=m[b++].split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),F={oldStart:+X[1],oldLines:+X[2]||1,newStart:+X[3],newLines:+X[4]||1,lines:[],linedelimiters:[]},ee=0,se=0;b<m.length&&!(0===m[b].indexOf("--- ")&&b+2<m.length&&0===m[b+1].indexOf("+++ ")&&0===m[b+2].indexOf("@@"));b++){var B=0==m[b].length&&b!=m.length-1?" ":m[b][0];if("+"!==B&&"-"!==B&&" "!==B&&"\\"!==B)break;F.lines.push(m[b]),F.linedelimiters.push(_[b]||"\n"),"+"===B?ee++:"-"===B?se++:" "===B&&(ee++,se++)}if(!ee&&1===F.newLines&&(F.newLines=0),!se&&1===F.oldLines&&(F.oldLines=0),d.strict){if(ee!==F.newLines)throw new Error("Added line count did not match for hunk at line "+(P+1));if(se!==F.oldLines)throw new Error("Removed line count did not match for hunk at line "+(P+1))}return F}for(;b<m.length;)C();return y}function Mt(f,d,m){var _=!0,y=!1,b=!1,C=1;return function A(){if(_&&!b){if(y?C++:_=!1,f+C<=m)return C;b=!0}if(!y)return b||(_=!0),d<=f-C?-C++:(y=!0,A())}}function Ot(f,d){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof d&&(d=ue(d)),Array.isArray(d)){if(d.length>1)throw new Error("applyPatch only works with a single input.");d=d[0]}var X,F,_=f.split(/\r\n|[\n\v\f\r\x85]/),y=f.match(/\r\n|[\n\v\f\r\x85]/g)||[],b=d.hunks,C=m.compareLine||function(It,Et,Nt,Xe){return Et===Xe},A=0,M=m.fuzzFactor||0,P=0,j=0;function ee(It,Et){for(var Nt=0;Nt<It.lines.length;Nt++){var Xe=It.lines[Nt],et=Xe.length>0?Xe[0]:" ",Lt=Xe.length>0?Xe.substr(1):Xe;if(" "===et||"-"===et){if(!C(Et+1,_[Et],et,Lt)&&++A>M)return!1;Et++}}return!0}for(var se=0;se<b.length;se++){for(var B=b[se],ge=0,me=j+B.oldStart-1,ve=Mt(me,P,_.length-B.oldLines);void 0!==ge;ge=ve())if(ee(B,me+ge)){B.offset=j+=ge;break}if(void 0===ge)return!1;P=B.offset+B.oldStart+B.oldLines}for(var le=0,Fe=0;Fe<b.length;Fe++){var we=b[Fe],Ae=we.oldStart+we.offset+le-1;le+=we.newLines-we.oldLines,Ae<0&&(Ae=0);for(var Re=0;Re<we.lines.length;Re++){var Ye=we.lines[Re],Be=Ye.length>0?Ye[0]:" ",Ut=Ye.length>0?Ye.substr(1):Ye,tn=we.linedelimiters[Re];if(" "===Be)Ae++;else if("-"===Be)_.splice(Ae,1),y.splice(Ae,1);else if("+"===Be)_.splice(Ae,0,Ut),y.splice(Ae,0,tn),Ae++;else if("\\"===Be){var ht=we.lines[Re-1]?we.lines[Re-1][0]:null;"+"===ht?X=!0:"-"===ht&&(F=!0)}}}if(X)for(;!_[_.length-1];)_.pop(),y.pop();else F&&(_.push(""),y.push("\n"));for(var Je=0;Je<_.length-1;Je++)_[Je]=_[Je]+y[Je];return _.join("")}function Dt(f,d,m,_,y,b,C){C||(C={}),typeof C.context>"u"&&(C.context=4);var A=wn(m,_,C);function M(ge){return ge.map(function(me){return" "+me})}A.push({value:"",lines:[]});for(var P=[],j=0,X=0,F=[],ee=1,se=1,B=function(me){var ve=A[me],le=ve.lines||ve.value.replace(/\n$/,"").split("\n");if(ve.lines=le,ve.added||ve.removed){var Fe;if(!j){var we=A[me-1];j=ee,X=se,we&&(F=C.context>0?M(we.lines.slice(-C.context)):[],j-=F.length,X-=F.length)}(Fe=F).push.apply(Fe,ke(le.map(function(Je){return(ve.added?"+":"-")+Je}))),ve.added?se+=le.length:ee+=le.length}else{if(j)if(le.length<=2*C.context&&me<A.length-2){var Ae;(Ae=F).push.apply(Ae,ke(M(le)))}else{var Re,Ye=Math.min(le.length,C.context);(Re=F).push.apply(Re,ke(M(le.slice(0,Ye))));var Be={oldStart:j,oldLines:ee-j+Ye,newStart:X,newLines:se-X+Ye,lines:F};if(me>=A.length-2&&le.length<=C.context){var Ut=/\n$/.test(m),tn=/\n$/.test(_),ht=0==le.length&&F.length>Be.oldLines;!Ut&&ht&&F.splice(Be.oldLines,0,"\\ No newline at end of file"),(!Ut&&!ht||!tn)&&F.push("\\ No newline at end of file")}P.push(Be),j=0,X=0,F=[]}ee+=le.length,se+=le.length}},he=0;he<A.length;he++)B(he);return{oldFileName:f,newFileName:d,oldHeader:y,newHeader:b,hunks:P}}function ce(f,d,m,_,y,b,C){var A=Dt(f,d,m,_,y,b,C),M=[];f==d&&M.push("Index: "+f),M.push("==================================================================="),M.push("--- "+A.oldFileName+(typeof A.oldHeader>"u"?"":"\t"+A.oldHeader)),M.push("+++ "+A.newFileName+(typeof A.newHeader>"u"?"":"\t"+A.newHeader));for(var P=0;P<A.hunks.length;P++){var j=A.hunks[P];M.push("@@ -"+j.oldStart+","+j.oldLines+" +"+j.newStart+","+j.newLines+" @@"),M.push.apply(M,j.lines)}return M.join("\n")+"\n"}function R(f,d){if(d.length>f.length)return!1;for(var m=0;m<d.length;m++)if(d[m]!==f[m])return!1;return!0}function oe(f){var d=pe(f.lines),m=d.oldLines,_=d.newLines;void 0!==m?f.oldLines=m:delete f.oldLines,void 0!==_?f.newLines=_:delete f.newLines}function ye(f,d){if("string"==typeof f){if(/^@@/m.test(f)||/^Index:/m.test(f))return ue(f)[0];if(!d)throw new Error("Must provide a base reference or pass in a patch");return Dt(void 0,void 0,d,f)}return f}function _e(f){return f.newFileName&&f.newFileName!==f.oldFileName}function G(f,d,m){return d===m?d:(f.conflict=!0,{mine:d,theirs:m})}function J(f,d){return f.oldStart<d.oldStart&&f.oldStart+f.oldLines<d.oldStart}function Ke(f,d){return{oldStart:f.oldStart,oldLines:f.oldLines,newStart:f.newStart+d,newLines:f.newLines,lines:f.lines}}function Ue(f,d,m,_,y){var b={offset:d,lines:m,index:0},C={offset:_,lines:y,index:0};for(mi(f,b,C),mi(f,C,b);b.index<b.lines.length&&C.index<C.lines.length;){var A=b.lines[b.index],M=C.lines[C.index];if("-"!==A[0]&&"+"!==A[0]||"-"!==M[0]&&"+"!==M[0])if("+"===A[0]&&" "===M[0]){var P;(P=f.lines).push.apply(P,ke(Ie(b)))}else if("+"===M[0]&&" "===A[0]){var j;(j=f.lines).push.apply(j,ke(Ie(C)))}else"-"===A[0]&&" "===M[0]?pt(f,b,C):"-"===M[0]&&" "===A[0]?pt(f,C,b,!0):A===M?(f.lines.push(A),b.index++,C.index++):qt(f,Ie(b),Ie(C));else k(f,b,C)}_i(f,b),_i(f,C),oe(f)}function k(f,d,m){var _=Ie(d),y=Ie(m);if(E(_)&&E(y)){var b,C;if(R(_,y)&&Se(m,_,_.length-y.length))return void(b=f.lines).push.apply(b,ke(_));if(R(y,_)&&Se(d,y,y.length-_.length))return void(C=f.lines).push.apply(C,ke(y))}else if(function Kt(f,d){return f.length===d.length&&R(f,d)}(_,y)){var A;return void(A=f.lines).push.apply(A,ke(_))}qt(f,_,y)}function pt(f,d,m,_){var C,y=Ie(d),b=function Xt(f,d){for(var m=[],_=[],y=0,b=!1,C=!1;y<d.length&&f.index<f.lines.length;){var A=f.lines[f.index],M=d[y];if("+"===M[0])break;if(b=b||" "!==A[0],_.push(M),y++,"+"===A[0])for(C=!0;"+"===A[0];)m.push(A),A=f.lines[++f.index];M.substr(1)===A.substr(1)?(m.push(A),f.index++):C=!0}if("+"===(d[y]||"")[0]&&b&&(C=!0),C)return m;for(;y<d.length;)_.push(d[y++]);return{merged:_,changes:m}}(m,y);b.merged?(C=f.lines).push.apply(C,ke(b.merged)):qt(f,_?b:y,_?y:b)}function qt(f,d,m){f.conflict=!0,f.lines.push({conflict:!0,mine:d,theirs:m})}function mi(f,d,m){for(;d.offset<m.offset&&d.index<d.lines.length;){var _=d.lines[d.index++];f.lines.push(_),d.offset++}}function _i(f,d){for(;d.index<d.lines.length;){var m=d.lines[d.index++];f.lines.push(m)}}function Ie(f){for(var d=[],m=f.lines[f.index][0];f.index<f.lines.length;){var _=f.lines[f.index];if("-"===m&&"+"===_[0]&&(m="+"),m!==_[0])break;d.push(_),f.index++}return d}function E(f){return f.reduce(function(d,m){return d&&"-"===m[0]},!0)}function Se(f,d,m){for(var _=0;_<m;_++){var y=d[d.length-m+_].substr(1);if(f.lines[f.index+_]!==" "+y)return!1}return f.index+=m,!0}function pe(f){var d=0,m=0;return f.forEach(function(_){if("string"!=typeof _){var y=pe(_.mine),b=pe(_.theirs);void 0!==d&&(y.oldLines===b.oldLines?d+=y.oldLines:d=void 0),void 0!==m&&(y.newLines===b.newLines?m+=y.newLines:m=void 0)}else void 0!==m&&("+"===_[0]||" "===_[0])&&m++,void 0!==d&&("-"===_[0]||" "===_[0])&&d++}),{oldLines:d,newLines:m}}function Ze(f){var d=f;return(d=(d=(d=d.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")}Pt.tokenize=function(f){return f.slice()},Pt.join=Pt.removeEmpty=function(f){return f},S.Diff=L,S.diffChars=function e(f,d,m){return De.diff(f,d,m)},S.diffWords=function Ve(f,d,m){return m=Tn(m,{ignoreWhitespace:!0}),ft.diff(f,d,m)},S.diffWordsWithSpace=function Sn(f,d,m){return ft.diff(f,d,m)},S.diffLines=wn,S.diffTrimmedLines=function li(f,d,m){var _=Tn(m,{ignoreWhitespace:!0});return wt.diff(f,d,_)},S.diffSentences=function fi(f,d,m){return di.diff(f,d,m)},S.diffCss=function ot(f,d,m){return ut.diff(f,d,m)},S.diffJson=function gi(f,d,m){return rt.diff(f,d,m)},S.diffArrays=function fe(f,d,m){return Pt.diff(f,d,m)},S.structuredPatch=Dt,S.createTwoFilesPatch=ce,S.createPatch=function U(f,d,m,_,y,b){return ce(f,f,d,m,_,y,b)},S.applyPatch=Ot,S.applyPatches=function Zn(f,d){"string"==typeof f&&(f=ue(f));var m=0;!function _(){var y=f[m++];if(!y)return d.complete();d.loadFile(y,function(b,C){if(b)return d.complete(b);var A=Ot(C,y,d);d.patched(y,A,function(M){if(M)return d.complete(M);_()})})}()},S.parsePatch=ue,S.merge=function An(f,d,m){f=ye(f,m),d=ye(d,m);var _={};(f.index||d.index)&&(_.index=f.index||d.index),(f.newFileName||d.newFileName)&&(_e(f)?_e(d)?(_.oldFileName=G(_,f.oldFileName,d.oldFileName),_.newFileName=G(_,f.newFileName,d.newFileName),_.oldHeader=G(_,f.oldHeader,d.oldHeader),_.newHeader=G(_,f.newHeader,d.newHeader)):(_.oldFileName=f.oldFileName,_.newFileName=f.newFileName,_.oldHeader=f.oldHeader,_.newHeader=f.newHeader):(_.oldFileName=d.oldFileName||f.oldFileName,_.newFileName=d.newFileName||f.newFileName,_.oldHeader=d.oldHeader||f.oldHeader,_.newHeader=d.newHeader||f.newHeader)),_.hunks=[];for(var y=0,b=0,C=0,A=0;y<f.hunks.length||b<d.hunks.length;){var M=f.hunks[y]||{oldStart:1/0},P=d.hunks[b]||{oldStart:1/0};if(J(M,P))_.hunks.push(Ke(M,C)),y++,A+=M.newLines-M.oldLines;else if(J(P,M))_.hunks.push(Ke(P,A)),b++,C+=P.newLines-P.oldLines;else{var j={oldStart:Math.min(M.oldStart,P.oldStart),oldLines:0,newStart:Math.min(M.newStart+C,P.oldStart+A),newLines:0,lines:[]};Ue(j,M.oldStart,M.lines,P.oldStart,P.lines),b++,y++,_.hunks.push(j)}}return _},S.convertChangesToDMP=function en(f){for(var m,d=[],y=0;y<f.length;y++)d.push([(m=f[y]).added?1:m.removed?-1:0,m.value]);return d},S.convertChangesToXML=function Pn(f){for(var d=[],m=0;m<f.length;m++){var _=f[m];_.added?d.push("<ins>"):_.removed&&d.push("<del>"),d.push(Ze(_.value)),_.added?d.push("</ins>"):_.removed&&d.push("</del>")}return d.join("")},S.canonicalize=At,Object.defineProperty(S,"__esModule",{value:!0})}(yn)}}]);
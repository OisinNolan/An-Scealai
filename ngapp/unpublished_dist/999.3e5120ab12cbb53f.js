(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[999],{5999:(J,b,l)=>{"use strict";l.r(b),l.d(b,{StudentModule:()=>Ke});var g=l(6895),h=l(1390),a=l(970),d=l(4633),m=l(8977),t=l(4650),r=l(5412);let s=(()=>{class n{canDeactivate(e,i,o){return!!e.storySaved||(e.showModal(),e.modalChoice)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),x=(()=>{class n{constructor(e,i){this.dialog=e,this.ts=i}canDeactivate(e){if(e.recordingSaved)return!0;let i;return i=this.dialog.open(d.p,{data:{title:this.ts.l.save_changes_made_to_this_recording,type:"",confirmText:this.ts.l.save,cancelText:this.ts.l.cancel},width:"30vh"}),i.afterClosed().subscribe(o=>{if(i=void 0,o)return e.saveRecordings(),!0}),!1}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(r.uw),t.LFG(m.D))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),f=(()=>{class n{canDeactivate(e,i,o){if(e.chosenSections)for(const p of e.chosenSections)p.stop();return!0}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u=l(5861),_=l(4412);class v extends _.i{constructor(){super(...arguments),this.createdWithPrompts=!1}}var C=l(1765),y=l(1745),R=l(1512),q=l(6469),z=l(4687),j=l(1245),Q=l(25),G=l(5042),H=l(530),V=l(8443);let k=(()=>{class n{transform(e,i){return e?i?(i=i.toLocaleLowerCase(),e.filter(o=>o instanceof V.n?o.username.toLocaleLowerCase().includes(i):o instanceof v?o.title.toLocaleLowerCase().includes(i)||o.text.toLocaleLowerCase().includes(i):void 0)):e:[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"appFilter",type:n,pure:!0}),n})();var S=l(3905),W=l(4006),K=l(9121);function ft(n,c){1&n&&(t.TgZ(0,"div",17),t._UZ(1,"grid-spinner"),t.qZA())}function gt(n,c){if(1&n&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.click_new_story," ")}}function _t(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"input",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,p=t.oxw();return t.KtG(p.toggleDelete(o._id))}),t.qZA()}}function mt(n,c){if(1&n&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.lastUpdated,"M/d/yy, h:mm a"))}}function vt(n,c){if(1&n&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.lastUpdated,"d/M/yy, h:mm a"))}}const bt=function(n){return["../dashboard",n]};function xt(n,c){if(1&n&&(t.TgZ(0,"div")(1,"div",18)(2,"div",19),t.YNc(3,_t,1,0,"input",20),t.TgZ(4,"div",21),t._uU(5),t.qZA()(),t.YNc(6,mt,3,4,"div",22),t.YNc(7,vt,3,4,"div",22),t.qZA(),t._UZ(8,"hr"),t.qZA()),2&n){const e=c.$implicit,i=t.oxw();t.xp6(3),t.Q6J("ngIf",i.deleteMode),t.xp6(1),t.Q6J("searchedWord",i.searchText)("content",e.title)("classToApply","font-weight-bold")("setTitle","true")("routerLink",t.VKq(9,bt,e._id)),t.xp6(1),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf",i.isFromAmerica),t.xp6(1),t.Q6J("ngIf",!i.isFromAmerica)}}function wt(n,c){if(1&n&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.unreadMessages," ")}}function Mt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.goToMessages())}),t._uU(1),t.YNc(2,wt,2,1,"span",26),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.messages," "),t.xp6(1),t.Q6J("ngIf",e.unreadMessages>0)}}function Ct(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.goToStats())}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.stats," ")}}let yt=(()=>{class n{constructor(e,i,o,p,w,T,P,I,M,F,E){this.storyService=e,this.auth=i,this.engagement=o,this.ts=p,this.router=w,this.messageService=T,this.profileService=P,this.classroomService=I,this.notificationService=M,this.recordingService=F,this.dialog=E,this.stories=[],this.toBeDeleted=[],this.userId="",this.messagesForNotifications=[],this.unreadMessages=0,this.isFromAmerica=!1,this.isEnrolled=!1,this.searchText="",this.storiesLoaded=!1}ngOnInit(){var e=this;return(0,u.Z)(function*(){const i=e.auth.getUserDetails();i?(e.stories=(yield(0,S.z)(e.storyService.getStoriesForLoggedInUser())).map(o=>(new v).fromJSON(o)),e.stories.sort((o,p)=>o.date>p.date?-1:1),e.storiesLoaded=!0,e.userId=i._id,e.deleteMode=!1,e.toBeDeleted=[],e.notificationService.getStudentNotifications(),e.classroomService.getClassroomOfStudent(e.userId).subscribe(o=>{e.isEnrolled=null!=o}),e.messageService.getMessagesForLoggedInUser().subscribe(o=>{e.messagesForNotifications=o,e.unreadMessages=e.messageService.getNumberOfUnreadMessages(e.messagesForNotifications)}),e.profileService.getForUser(e.userId).subscribe(o=>{let w=o.profile.country;e.isFromAmerica="United States of America"==w||"America"==w||"USA"==w||"United States"==w},o=>{e.router.navigateByUrl("/register-profile")})):e.auth.logout()})()}toggleDeleteMode(){if(this.deleteMode&&this.toBeDeleted.length>0)for(let e of this.toBeDeleted)this.engagement.addEventForLoggedInUser(R.tw["DELETE-STORY"],{_id:e}),this.recordingService.deleteStoryRecordingAudio(e).subscribe(i=>{}),this.recordingService.deleteStoryRecording(e).subscribe(i=>{}),this.storyService.deleteStory(e).subscribe(i=>{this.ngOnInit()});else this.deleteMode=!this.deleteMode||0!==this.toBeDeleted.length}toggleEditMode(){this.editMode=!this.editMode}toggleDelete(e){if(this.toBeDeleted.includes(e)){var i=this.toBeDeleted.indexOf(e);this.toBeDeleted.splice(i,1)}else this.toBeDeleted.push(e)}goToMessages(){this.router.navigateByUrl("/messages/"+this.userId)}goToStats(){this.router.navigateByUrl("/stats-dashboard/"+this.userId)}createNewStory(){var e=this;this.dialogRef=this.dialog.open(d.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var i=(0,u.Z)(function*(o){if(e.dialogRef=void 0,o)if(o[0]){let p="connemara";o[1]==e.ts.l.munster&&(p="kerry"),o[1]==e.ts.l.ulster&&(p="donegal"),e.storyService.saveStory(e.auth.getUserDetails()._id,o[0],new Date,p,"",e.auth.getUserDetails().username,!1)}else alert(e.ts.l.title_required)});return function(o){return i.apply(this,arguments)}}())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.N),t.Y36(y.$),t.Y36(q.M),t.Y36(m.D),t.Y36(h.F0),t.Y36(j.e),t.Y36(z.H),t.Y36(Q.u),t.Y36(G.g),t.Y36(H.s),t.Y36(r.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-book-contents"]],features:[t._Bn([k])],decls:27,vars:17,consts:[[1,"bookContainer"],[1,"contentsContainer"],[1,"bookContentsTitle"],[1,"contentsTitleContainer"],[1,"contentsLinkTitle"],[1,"contentsDateTitle"],["role","main"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"contentsLinkContainer"],["class","newStoryMessage",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"contentsBtnsContainer"],[1,"btn","deleteBtn",3,"click"],["src","assets/img/trash.ico",1,"trashImg"],["class","btn messagesBtn",3,"click",4,"ngIf"],["data-cy","create-story",1,"btn","newStoryBtn",3,"click"],[1,"newStoryMessage"],[1,"contentSection"],[1,"contentsLink"],["type","checkbox","class","deleteCheckbox",3,"click",4,"ngIf"],["appHighlight","",3,"searchedWord","content","classToApply","setTitle","routerLink"],["class","contentsDate",4,"ngIf"],["type","checkbox",1,"deleteCheckbox",3,"click"],[1,"contentsDate"],[1,"btn","messagesBtn",3,"click"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",6)(10,"div")(11,"div",7)(12,"input",8),t.NdJ("ngModelChange",function(p){return i.searchText=p}),t.qZA()()()(),t.TgZ(13,"div",9)(14,"div"),t._uU(15),t.qZA(),t.YNc(16,ft,2,0,"div",10),t.YNc(17,gt,2,1,"div",10),t.YNc(18,xt,9,11,"div",11),t.ALo(19,"appFilter"),t.qZA(),t.TgZ(20,"div",12)(21,"button",13),t.NdJ("click",function(){return i.toggleDeleteMode()}),t._UZ(22,"img",14),t.qZA(),t.YNc(23,Mt,3,2,"button",15),t.YNc(24,Ct,2,1,"button",15),t.TgZ(25,"button",16),t.NdJ("click",function(){return i.createNewStory()}),t._uU(26),t.qZA()()()()),2&e&&(t.xp6(3),t.Oqu(i.ts.l.my_stories),t.xp6(3),t.Oqu(i.ts.l.title),t.xp6(2),t.Oqu(i.ts.l.last_updated),t.xp6(4),t.s9C("placeholder",i.ts.l.search_story_title_or_content),t.Q6J("ngModel",i.searchText),t.xp6(3),t.hij(" ",i.ts.l.loading," "),t.xp6(1),t.Q6J("ngIf",!i.storiesLoaded),t.xp6(1),t.Q6J("ngIf",0===i.stories.length&&i.storiesLoaded),t.xp6(1),t.Q6J("ngForOf",t.xi3(19,14,i.stories,i.searchText)),t.xp6(3),t.ekj("deleteModeBtn",i.deleteMode),t.xp6(2),t.Q6J("ngIf",i.isEnrolled),t.xp6(1),t.Q6J("ngIf",i.stories.length>0),t.xp6(2),t.hij("",i.ts.l.new_story," "))},dependencies:[g.sg,g.O5,h.rH,W.Fj,W.JJ,W.On,K.P,g.uU,k],styles:[".bookContainer[_ngcontent-%COMP%]{height:auto;width:80%;background:url(https://www.abair.ie/scealai/assets/img/paperBg.jpg) no-repeat center fixed;margin-left:10%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.contentsContainer[_ngcontent-%COMP%]{padding:20px}.bookContentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);padding-left:5%;padding-right:5%;display:inline-block;font-size:18pt}.contentsLinkContainer[_ngcontent-%COMP%]{height:500px;overflow:auto;padding:10px;background-color:#f7f2e7;box-shadow:inset 0 0 12px #00000080;border-radius:5px}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.contentsDate[_ngcontent-%COMP%]{color:var(--dark-text)}.contentsBtnsContainer[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:1rem}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;padding:2px 7px 7px;height:38px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:24px}.messagesBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;border-radius:5px;display:flex}.messagesBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.newStoryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.newStoryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}@media only screen and (max-width: 700px){.contentsContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%}.contentsLinkContainer[_ngcontent-%COMP%]{height:270px;padding-top:10px}.contentsLinkTitle[_ngcontent-%COMP%], .contentsDateTitle[_ngcontent-%COMP%]{font-size:12pt}.optionsPopupBtn[_ngcontent-%COMP%]{padding:2px 5px 5px;margin:0 4px 0 0;height:30px;font-size:12pt}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:0 3px 3px;height:30px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:20px}}.newStoryMessage[_ngcontent-%COMP%]{color:#a79d88;width:80%;margin-left:10%;margin-top:30px}@media only screen and (min-width: 700px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}@media only screen and (min-width: 1400px) and (min-height: 800px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}"]}),n})();var D=l(8605),it=l(3238),$=l(2687),St=l(445),L=l(1281),rt=l(9521),kt=l(3353),N=l(7579),Tt=l(4968),At=l(6451),U=l(9300),ot=l(4004),st=l(9718),O=l(2722),Pt=l(1884),at=l(5698),ct=l(8675),Ot=l(8372),B=l(7340);const dt=["*"],Bt=["content"];function Ft(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o._onBackdropClicked())}),t.qZA()}if(2&n){const e=t.oxw();t.ekj("mat-drawer-shown",e._isShowingBackdrop())}}function Rt(n,c){1&n&&(t.TgZ(0,"mat-drawer-content"),t.Hsn(1,2),t.qZA())}const Zt=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],It=["mat-drawer","mat-drawer-content","*"],Dt={transformDrawer:(0,B.X$)("transform",[(0,B.SB)("open, open-instant",(0,B.oB)({transform:"none",visibility:"visible"})),(0,B.SB)("void",(0,B.oB)({"box-shadow":"none",visibility:"hidden"})),(0,B.eR)("void => open-instant",(0,B.jt)("0ms")),(0,B.eR)("void <=> open, open-instant => void",(0,B.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Nt=new t.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Et(){return!1}}),lt=new t.OlP("MAT_DRAWER_CONTAINER");let X=(()=>{class n extends D.PQ{constructor(e,i,o,p,w){super(o,p,w),this._changeDetectorRef=e,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36((0,t.Gpc)(()=>et)),t.Y36(t.SBq),t.Y36(D.mF),t.Y36(t.R0b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,i){2&e&&t.Udp("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[t._Bn([{provide:D.PQ,useExisting:n}]),t.qOj],ngContentSelectors:dt,decls:1,vars:0,template:function(e,i){1&e&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),tt=(()=>{class n{constructor(e,i,o,p,w,T,P,I){this._elementRef=e,this._focusTrapFactory=i,this._focusMonitor=o,this._platform=p,this._ngZone=w,this._interactivityChecker=T,this._doc=P,this._container=I,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new N.x,this._animationEnd=new N.x,this._animationState="void",this.openedChange=new t.vpe(!0),this._openedStream=this.openedChange.pipe((0,U.h)(M=>M),(0,ot.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,U.h)(M=>M.fromState!==M.toState&&0===M.toState.indexOf("open")),(0,st.h)(void 0)),this._closedStream=this.openedChange.pipe((0,U.h)(M=>!M),(0,ot.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,U.h)(M=>M.fromState!==M.toState&&"void"===M.toState),(0,st.h)(void 0)),this._destroyed=new N.x,this.onPositionChanged=new t.vpe,this._modeChanged=new N.x,this.openedChange.subscribe(M=>{M?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,Tt.R)(this._elementRef.nativeElement,"keydown").pipe((0,U.h)(M=>M.keyCode===rt.hY&&!this.disableClose&&!(0,rt.Vb)(M)),(0,O.R)(this._destroyed)).subscribe(M=>this._ngZone.run(()=>{this.close(),M.stopPropagation(),M.preventDefault()}))}),this._animationEnd.pipe((0,Pt.x)((M,F)=>M.fromState===F.fromState&&M.toState===F.toState)).subscribe(M=>{const{fromState:F,toState:E}=M;(0===E.indexOf("open")&&"void"===F||"void"===E&&0===F.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=(0,L.Ig)(e)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=(0,L.Ig)(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle((0,L.Ig)(e))}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const o=()=>{e.removeEventListener("blur",o),e.removeEventListener("mousedown",o),e.removeAttribute("tabindex")};e.addEventListener("blur",o),e.addEventListener("mousedown",o)})),e.focus(i)}_focusByCssSelector(e,i){let o=this._elementRef.nativeElement.querySelector(e);o&&this._forceFocus(o,i)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,i){e&&i&&(this._openedVia=i);const o=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),o}_setOpen(e,i,o){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(o)),this._updateFocusTrapState(),new Promise(p=>{this.openedChange.pipe((0,at.q)(1)).subscribe(w=>p(w?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(e){const i=this._elementRef.nativeElement,o=i.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),o.insertBefore(this._anchor,i)),o.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36($.qV),t.Y36($.tE),t.Y36(kt.t4),t.Y36(t.R0b),t.Y36($.ic),t.Y36(g.K0,8),t.Y36(lt,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-drawer"]],viewQuery:function(e,i){if(1&e&&t.Gf(Bt,5),2&e){let o;t.iGM(o=t.CRH())&&(i._content=o.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,i){1&e&&t.WFA("@transform.start",function(p){return i._animationStarted.next(p)})("@transform.done",function(p){return i._animationEnd.next(p)}),2&e&&(t.uIk("align",null),t.d8E("@transform",i._animationState),t.ekj("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:dt,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA())},dependencies:[D.PQ],encapsulation:2,data:{animation:[Dt.transformDrawer]},changeDetection:0}),n})(),et=(()=>{class n{constructor(e,i,o,p,w,T=!1,P){this._dir=e,this._element=i,this._ngZone=o,this._changeDetectorRef=p,this._animationMode=P,this._drawers=new t.n_E,this.backdropClick=new t.vpe,this._destroyed=new N.x,this._doCheckSubject=new N.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new N.x,e&&e.change.pipe((0,O.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),w.change().pipe((0,O.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=T}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=(0,L.Ig)(e)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(e){this._backdropOverride=null==e?null:(0,L.Ig)(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,ct.O)(this._allDrawers),(0,O.R)(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,ct.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Ot.b)(10),(0,O.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const o=this._left._getWidth();e+=o,i-=o}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const o=this._right._getWidth();i+=o,e-=o}e=e||null,i=i||null,(e!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:e,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe((0,U.h)(i=>i.fromState!==i.toState),(0,O.R)(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe((0,O.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe((0,O.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,at.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe((0,O.R)((0,At.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const i=this._element.nativeElement.classList,o="mat-drawer-container-has-open";e?i.add(o):i.remove(o)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(St.Is,8),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(D.rL),t.Y36(Nt),t.Y36(t.QbO,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(e,i,o){if(1&e&&(t.Suo(o,X,5),t.Suo(o,tt,5)),2&e){let p;t.iGM(p=t.CRH())&&(i._content=p.first),t.iGM(p=t.CRH())&&(i._allDrawers=p)}},viewQuery:function(e,i){if(1&e&&t.Gf(X,5),2&e){let o;t.iGM(o=t.CRH())&&(i._userContent=o.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[t._Bn([{provide:lt,useExisting:n}])],ngContentSelectors:It,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,i){1&e&&(t.F$t(Zt),t.YNc(0,Ft,1,2,"div",0),t.Hsn(1),t.Hsn(2,1),t.YNc(3,Rt,2,0,"mat-drawer-content",1)),2&e&&(t.Q6J("ngIf",i.hasBackdrop),t.xp6(3),t.Q6J("ngIf",!i._content))},dependencies:[g.O5,X],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),n})(),Ut=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,it.BQ,D.ZD,D.ZD,it.BQ]}),n})();function qt(n,c){1&n&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function Lt(n,c){if(1&n&&(t.TgZ(0,"span",22),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.ts.l.made_using_prompts)}}function Yt(n,c){if(1&n&&(t.TgZ(0,"div",23),t._uU(1),t._UZ(2,"i",24),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.saved," ")}}function Jt(n,c){if(1&n&&(t.TgZ(0,"div",23),t._uU(1),t._UZ(2,"i",25),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.saving," ")}}function zt(n,c){1&n&&t._UZ(0,"i",26)}function jt(n,c){1&n&&t._UZ(0,"i",27)}function Qt(n,c){1&n&&(t.TgZ(0,"span",31),t._uU(1,"speech_to_text"),t.qZA())}function Gt(n,c){1&n&&(t.TgZ(0,"button",32),t._UZ(1,"i",33),t.qZA())}function Ht(n,c){1&n&&(t.TgZ(0,"div"),t._UZ(1,"div",34),t.qZA())}const Vt=function(n){return{disableDiv:n}};function Wt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.dontToggle=!0,t.KtG(o.speakStory())}),t._uU(1),t.YNc(2,Qt,2,0,"span",29),t.YNc(3,Gt,2,0,"button",30),t.YNc(4,Ht,2,0,"div",2),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("ngClass",t.VKq(5,Vt,e.isTranscribing)),t.xp6(1),t.hij(" ",e.ts.l.speak," "),t.xp6(1),t.Q6J("ngIf",!e.isRecording),t.xp6(1),t.Q6J("ngIf",e.isRecording&&!e.isTranscribing),t.xp6(1),t.Q6J("ngIf",e.isTranscribing)}}function Kt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.dontToggle=!0)}),t.TgZ(1,"button",36),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.downloadStory())}),t._uU(2),t._UZ(3,"i",37),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.s9C("href",e.downloadStoryUrl()),t.xp6(1),t.hij(" ",e.ts.l.download," ")}}function $t(n,c){1&n&&(t.TgZ(0,"span",41),t._uU(1,"1"),t.qZA())}function Xt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.dontToggle=!0,t.KtG(o.getFeedback())}),t._uU(1),t._UZ(2,"i",39),t.YNc(3,$t,2,0,"span",40),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.feedback," "),t.xp6(2),t.Q6J("ngIf",e.hasNewFeedback())}}function te(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.dontToggle=!0,t.KtG(o.dictionaryVisible=!o.dictionaryVisible)}),t._uU(1),t._UZ(2,"i",42),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.dictionary," ")}}function ee(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.dontToggle=!0,t.KtG(o.goToSynthesis())}),t._uU(1),t._UZ(2,"i",43),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.ts.l.audio_check," ")}}function ne(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.dontToggle=!0,t.KtG(o.toggleGrammarTags())}),t._uU(1),t._UZ(2,"i",44),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.toggleGrammarButton()," ")}}function ie(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",45),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.dontToggle=!0,t.KtG(o.goToRecording())}),t._uU(1),t._UZ(2,"i",46),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("hidden",e.story.text&&0===e.story.text.length),t.xp6(1),t.hij(" ",e.ts.l.recordings," ")}}function re(n,c){1&n&&(t.TgZ(0,"p"),t._uU(1,"Lorem, ipsum dolor sit amet consectetur."),t.qZA())}function oe(n,c){1&n&&(t.TgZ(0,"p"),t._uU(1,"Lorem, ipsum dolor sit amet consectetur."),t.qZA())}let se=(()=>{class n{constructor(e){this.ts=e,this.showFiller=!1,this.dontToggle=!1,this.showOptions=!0,this.showErrorTags=!1,this.storySaved=!0,this.story={text:"hello",title:"test",createdWithPrompts:!1}}ngOnInit(){}toggleOptions(){this.dontToggle||(this.showOptions=!this.showOptions),this.dontToggle=!1}titleStyle(){return{"font-style":this.storySaved?"normal":"italic"}}downloadStoryUrl(){}hasNewFeedback(){}toggleGrammarButton(){return this.ts.message(this.showErrorTags?"hide_grammar_suggestions":"show_grammar_suggestions")}toggleGrammarTags(){}showModal(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard"]],decls:39,vars:17,consts:[[1,"storyTitleHeader"],["data-cy","title",1,"storyTitle",3,"ngStyle"],[4,"ngIf"],["style","color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"saveIcon"],["class","savedIcon",4,"ngIf"],[1,"optionsBtnContainer",3,"click"],[1,"optionsBtn"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-right",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"ngClass","click",4,"ngIf"],["style","display: flex",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"hidden","click",4,"ngIf"],["autosize","",1,"bodyContainer"],["mode","side",1,"example-sidenav"],["drawer",""],["mat-raised-button","",3,"click"],[1,"example-sidenav-content"],["type","button","mat-button","",3,"click"],["mode","side","position","end",1,"example-sidenav"],["drawer2",""],[2,"color","rgba(0, 0, 0, 0.4)"],[1,"savedIcon"],[1,"fas","fa-check"],[1,"fas","fa-save"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-right"],[1,"optionsBtn","optionsPopupBtn",3,"ngClass","click"],["class","material-symbols-outlined optionsBtnIcon",4,"ngIf"],["class","notRecordingBtn blink",4,"ngIf"],[1,"material-symbols-outlined","optionsBtnIcon"],[1,"notRecordingBtn","blink"],[1,"fas","fa-stop-circle"],[1,"dot-flashing"],[2,"display","flex",3,"click"],["target","_blank",1,"optionsBtn","optionsPopupBtn",2,"text-decoration","none",3,"href","click"],[1,"fas","fa-download","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"click"],[1,"fas","fa-comment-dots","optionsBtnIcon"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"],[1,"fas","fa-book","optionsBtnIcon"],[1,"fas","fa-volume-up","optionsBtnIcon"],[1,"fas","fa-spell-check","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"hidden","click"],[1,"fas","fa-microphone","optionsBtnIcon"]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.YNc(3,qt,2,0,"span",2),t.YNc(4,Lt,2,1,"span",3),t.qZA(),t.TgZ(5,"div",4),t.YNc(6,Yt,3,1,"div",5),t.YNc(7,Jt,3,1,"div",5),t.qZA()(),t.TgZ(8,"div",6),t.NdJ("click",function(){return i.toggleOptions()}),t.TgZ(9,"div",7),t.YNc(10,zt,1,0,"i",8),t.YNc(11,jt,1,0,"i",9),t.qZA(),t.YNc(12,Wt,5,7,"div",10),t.YNc(13,Kt,4,2,"div",11),t.YNc(14,Xt,4,2,"div",12),t.YNc(15,te,3,1,"div",12),t.YNc(16,ee,3,1,"div",12),t.YNc(17,ne,3,1,"div",12),t.YNc(18,ie,3,2,"div",13),t.qZA(),t.TgZ(19,"mat-drawer-container",14)(20,"mat-drawer",15,16)(22,"p"),t._uU(23,"Auto-resizing sidenav"),t.qZA(),t.YNc(24,re,2,0,"p",2),t.TgZ(25,"button",17),t.NdJ("click",function(){return i.showFiller=!i.showFiller}),t._uU(26," Toggle extra text "),t.qZA()(),t.TgZ(27,"div",18)(28,"button",19),t.NdJ("click",function(){t.CHM(o);const w=t.MAs(21);return t.KtG(w.toggle())}),t._uU(29," Toggle sidenav "),t.qZA(),t.TgZ(30,"button",19),t.NdJ("click",function(){t.CHM(o);const w=t.MAs(33);return t.KtG(w.toggle())}),t._uU(31," Toggle sidenav 2 "),t.qZA()(),t.TgZ(32,"mat-drawer",20,21)(34,"p"),t._uU(35,"Auto-resizing sidenav"),t.qZA(),t.YNc(36,oe,2,0,"p",2),t.TgZ(37,"button",17),t.NdJ("click",function(){return i.showFiller=!i.showFiller}),t._uU(38," Toggle extra text "),t.qZA()()()}if(2&e){let o;t.xp6(1),t.Q6J("ngStyle",i.titleStyle()),t.xp6(1),t.hij(" ",null!==(o=null==i.story?null:i.story.title)&&void 0!==o?o:"..."," "),t.xp6(1),t.Q6J("ngIf",!i.storySaved),t.xp6(1),t.Q6J("ngIf",i.story.createdWithPrompts),t.xp6(2),t.Q6J("ngIf",i.storySaved),t.xp6(1),t.Q6J("ngIf",!i.storySaved),t.xp6(3),t.Q6J("ngIf",!i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(1),t.Q6J("ngIf",i.showOptions),t.xp6(6),t.Q6J("ngIf",i.showFiller),t.xp6(12),t.Q6J("ngIf",i.showFiller)}},dependencies:[g.mk,g.O5,g.PC,tt,et],styles:[".bodyContainer{width:100%;height:80vh;border:1px solid rgba(0,0,0,.5)}.example-sidenav-content{background-color:#00f}.example-sidenav{padding:50px}.storyTitleHeader{display:flex;justify-content:center;margin-top:-30px;padding-bottom:40px}.storyTitle{margin:auto;overflow:auto;font-size:20px;font-weight:bolder}.saveIcon{align-self:flex-end;white-space:nowrap;color:var(--dark-text);border-style:none;font-size:11pt;padding:5px}.savedIcon{color:var(--scealai-light-brown)}.optionsBtnContainer>*{height:2rem}.optionsBtnContainer{display:flex;justify-content:space-between;flex-wrap:wrap;--options-btn-background-color-hover: lightgray;margin-left:2%;margin-right:2%}.optionsBtn{background-color:var(--scealai-yellow);border-style:none;color:#464444;margin:0;border-radius:2px;display:flex;align-items:center;padding:5px;background:rgba(223,217,200,0)}.optionsBtn:hover{background-color:var(--options-btn-background-color-hover);color:#35322f;cursor:pointer;border-radius:2}.optionsPopupBtn{margin-right:4px}.optionsBtnIcon{margin-left:5px}.notRecordingBtn{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.blink{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}\n",".custom-tooltip:before{content:none!important}[data-selected]{margin:.3em}[highlight-tag-type]{border-radius:3px}span[highlight-tag-type]:hover{cursor:pointer}span:not[highlight-tag-type]{border-radius:0;padding-left:0;padding-right:0}[highlight-tag-type=LEATHAN-CAOL]{border:1px solid gray;border-radius:0!important;padding-left:0!important;padding-right:0!important}\n",'.ql-editor{overflow-y:auto}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=times-new-roman]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=times-new-roman]:before{content:"Times New Roman";font-family:Times New Roman}.ql-font-times-new-roman{font-family:times new roman}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=arial]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=arial]:before{content:"Arial";font-family:arial}.ql-font-arial{font-family:arial}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=sans-serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=sans-serif]:before{content:"Sans Serif";font-family:"sans serif"}.ql-font-sans-serif{font-family:"sans serif"}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{content:"Monospace";font-family:"monospace"}.ql-font-monospace{font-family:"monospace"}\n'],encapsulation:2}),n})();var Z=l(9742),ut=l(1481);let pt=(()=>{class n{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ut.H7,16))},n.\u0275pipe=t.Yjl({name:"safeHtml",type:n,pure:!0}),n})();function ae(n,c){if(1&n&&(t.TgZ(0,"div",14)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.ts.l.synthesising)}}function ce(n,c){1&n&&(t._UZ(0,"span",18),t.ALo(1,"safeHtml")),2&n&&t.Q6J("innerHTML",t.lcZ(1,1,c.$implicit.outerHTML),t.oJD)}function de(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,p=t.oxw(2);return t.KtG(p.stopSection(o))}),t._UZ(1,"i",20),t.qZA()}}function le(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,p=t.oxw(2);return t.KtG(p.playSection(o))}),t._UZ(1,"i",21),t.qZA()}}function ue(n,c){if(1&n&&(t.TgZ(0,"div",2),t.YNc(1,ce,2,3,"span",16),t.YNc(2,de,2,0,"button",17),t.YNc(3,le,2,0,"button",17),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.Q6J("ngForOf",e.spans),t.xp6(1),t.Q6J("ngIf",!e.audio.paused),t.xp6(1),t.Q6J("ngIf",e.audio.paused)}}function pe(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,ue,4,3,"div",15),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.chosenSections)}}function he(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"button",24),t._uU(2),t.qZA(),t.TgZ(3,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.changeSections(o.sentences))}),t._uU(4),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.paragraph),t.xp6(2),t.Oqu(e.ts.l.sentence)}}function fe(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.changeSections(o.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",24),t._uU(4),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.paragraph),t.xp6(2),t.Oqu(e.ts.l.sentence)}}function ge(n,c){if(1&n&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t.qZA(),t.YNc(3,he,5,2,"div",11),t.YNc(4,fe,5,2,"div",11),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",e.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",e.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",e.isSentenceMode())}}let _e=(()=>{class n{constructor(e,i,o,p,w){this.storyService=e,this.route=i,this.router=o,this.ts=p,this.synthesis=w,this.paragraphs=[],this.sentences=[],this.audioFinishedLoading=!1}ngOnInit(){var e=this;return(0,u.Z)(function*(){e.storyId=e.route.snapshot.paramMap.get("id");let i=yield(0,S.z)(e.storyService.getStory(e.storyId));e.synthesis.synthesiseStory(i).then(([o,p])=>{e.paragraphs=o,e.sentences=p,e.chosenSections=e.paragraphs,e.audioFinishedLoading=!0})})()}isSentenceMode(){return this.chosenSections[0]instanceof Z.cj}isParagraphMode(){return this.chosenSections[0]instanceof Z.nv}changeSections(e){this.chosenSections=e,this.paragraphs.concat(this.sentences).forEach(o=>this.stopSection(o))}playSection(e){e.play(),e.highlight()}stopSection(e){e.stop(),e.removeHighlight()}goToDashboard(){this.router.navigateByUrl("/student/dashboard/"+this.storyId)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.N),t.Y36(h.gz),t.Y36(h.F0),t.Y36(m.D),t.Y36(Z.cf))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-synthesis"]],decls:18,vars:5,consts:[["src","assets/img/book.png",1,"bookImg"],[1,"page"],[1,"paragraphContainer"],[1,"bookContainerSynth"],[1,"bookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"storyContainer"],[1,"storyHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[4,"ngIf"],[1,"footer"],["class","btnContainer",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"btnContainer"],[1,"footerText"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"]],template:function(e,i){1&e&&(t._UZ(0,"img",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t.NdJ("click",function(){return i.goToDashboard()}),t._UZ(6,"i",6),t._uU(7),t.qZA(),t._UZ(8,"div"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8),t._uU(11),t.qZA(),t.TgZ(12,"div")(13,"div",9),t.YNc(14,ae,4,1,"div",10),t.YNc(15,pe,2,1,"div",11),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,ge,5,3,"div",13),t.qZA()()()()()),2&e&&(t.xp6(7),t.hij(" ",i.ts.l.story,""),t.xp6(4),t.hij(" ",i.ts.l.listen_and_correct," "),t.xp6(3),t.Q6J("ngIf",!i.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",i.audioFinishedLoading),t.xp6(2),t.Q6J("ngIf",i.audioFinishedLoading))},dependencies:[g.sg,g.O5,K.P,pt],styles:['.bookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:var(--dark-text);width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.storyContainer[_ngcontent-%COMP%]{margin-top:10px}.storyHeader[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]:hover, .selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),n})();class me{constructor(c,e=[],i=[],o=[],p=[],w=[],T=[]){this.paragraphAudioIds=e,this.paragraphIndices=i,this.paragraphTranscriptions=o,this.sentenceAudioIds=p,this.sentenceIndices=w,this.sentenceTranscriptions=T,this.storyData=c,this.date=new Date,this.archived=!1}}var ve=l(2754),ht=l(7392);function be(n,c){1&n&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function xe(n,c){if(1&n&&(t.TgZ(0,"div",16),t._uU(1),t._UZ(2,"i",17),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.saved," ")}}function we(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.saveRecordings())}),t._uU(1),t._UZ(2,"i",19),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.ts.l.save," ")}}function Me(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.goToDashboard())}),t._UZ(2,"i",10),t._uU(3),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.YNc(6,be,2,0,"span",12),t.qZA(),t.TgZ(7,"div",13),t.YNc(8,xe,3,1,"div",14),t.YNc(9,we,3,1,"div",15),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.hij(" ",e.ts.l.story," "),t.xp6(2),t.hij(" ",null==e.story?null:e.story.title,""),t.xp6(1),t.Q6J("ngIf",!e.recordingSaved),t.xp6(2),t.Q6J("ngIf",e.recordingSaved),t.xp6(1),t.Q6J("ngIf",!e.recordingSaved)}}function Ce(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){t.CHM(e),t.oxw();const o=t.MAs(5);return t.KtG(o.toggle())}),t.TgZ(1,"mat-icon"),t._uU(2,"menu"),t.qZA(),t._uU(3),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.hij(" ",e.ts.l.archive," ")}}const ye=function(n){return{"font-style":n}};function Se(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",21),t.NdJ("click",function(){const p=t.CHM(e).$implicit,w=t.oxw();return t.KtG(w.setCurrentRecording(p))}),t.TgZ(2,"div",22)(3,"div",23),t._uU(4),t.qZA()(),t.TgZ(5,"div",24),t._uU(6),t.ALo(7,"date"),t.qZA()(),t._UZ(8,"hr"),t.qZA()}if(2&n){const e=c.$implicit;t.xp6(1),t.uIk("id",e._id),t.xp6(2),t.Q6J("ngStyle",t.VKq(7,ye,e.archived?"none":"italic")),t.xp6(1),t.hij(" ",null==e||null==e.storyData?null:e.storyData.title,""),t.xp6(2),t.hij(" ",t.xi3(7,4,e.date,"d/M/yy, h:mm a")," ")}}function ke(n,c){if(1&n&&(t.TgZ(0,"div",30)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(e.ts.l.synthesising)}}function Te(n,c){1&n&&(t._UZ(0,"span",42),t.ALo(1,"safeHtml")),2&n&&t.Q6J("innerHTML",t.lcZ(1,1,c.$implicit.outerHTML),t.oJD)}function Ae(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,p=t.oxw(3);return t.KtG(p.stopSection(o))}),t._UZ(1,"i",44),t.qZA()}}function Pe(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,p=t.oxw(3);return t.KtG(p.playSection(o))}),t._UZ(1,"i",45),t.qZA()}}function Oe(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,p=t.oxw(3);return t.KtG(p.recordAudio(o))}),t._UZ(1,"i",47),t.qZA()}}function Be(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,p=t.oxw(3);return t.KtG(p.stopRecording(o))}),t._UZ(1,"i",49),t.qZA()}}function Fe(n,c){1&n&&t._UZ(0,"hr",50)}function Re(n,c){1&n&&(t.TgZ(0,"div",51),t._UZ(1,"div",52),t.qZA())}function Ze(n,c){if(1&n&&(t.TgZ(0,"div",53)(1,"span",54),t._uU(2),t.qZA(),t.TgZ(3,"span",55),t._uU(4),t.qZA()()),2&n){const e=t.oxw().index,i=t.oxw(3);t.xp6(2),t.hij("",i.ts.l.speech_recognition_output," "),t.xp6(2),t.Oqu(i.sectionTranscriptions[e])}}function Ie(n,c){if(1&n&&t._UZ(0,"audio",59,60),2&n){const e=t.oxw(2).index,i=t.oxw(3);t.uIk("src",i.sectionAudioSources[e],t.LSH)}}function De(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,p=t.oxw(3);return t.KtG(p.deleteRecording(o))}),t._UZ(1,"i",62),t.qZA()}}function Ne(n,c){if(1&n&&(t.TgZ(0,"div",56)(1,"div",54),t._uU(2),t.qZA(),t.YNc(3,Ie,2,1,"audio",57),t.YNc(4,De,2,0,"button",58),t.qZA()),2&n){const e=t.oxw().index,i=t.oxw(3);t.xp6(2),t.Oqu(i.ts.l.your_recording),t.xp6(1),t.Q6J("ngIf",i.sectionAudioSources[e]),t.xp6(1),t.Q6J("ngIf",i.sectionAudioSources[e]&&!i.currentRecording.archived)}}function Ee(n,c){if(1&n&&(t.TgZ(0,"div",32)(1,"div",33)(2,"div"),t.YNc(3,Te,2,3,"span",34),t.YNc(4,Ae,2,0,"button",35),t.YNc(5,Pe,2,0,"button",35),t.YNc(6,Oe,2,0,"button",36),t.YNc(7,Be,2,0,"button",37),t.qZA(),t.YNc(8,Fe,1,0,"hr",38),t.YNc(9,Re,2,0,"div",39),t.YNc(10,Ze,5,2,"div",40),t.YNc(11,Ne,5,3,"div",41),t.qZA()()),2&n){const e=c.$implicit,i=c.index,o=t.oxw(3);t.xp6(3),t.Q6J("ngForOf",e.spans),t.xp6(1),t.Q6J("ngIf",!e.audio.paused),t.xp6(1),t.Q6J("ngIf",e.audio.paused),t.xp6(1),t.Q6J("ngIf",!o.isRecording(e,i)&&!o.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",o.isRecording(e,i)&&!o.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",o.sectionAudioSources[i]),t.xp6(1),t.Q6J("ngIf",o.isTranscribing[i]),t.xp6(1),t.Q6J("ngIf",o.sectionTranscriptions[i]),t.xp6(1),t.Q6J("ngIf",o.sectionAudioSources[i])}}function Ue(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Ee,12,9,"div",31),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.chosenSections)}}function qe(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"button",67),t._uU(2),t.qZA(),t.TgZ(3,"button",68),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.changeSections(o.sentences))}),t._uU(4),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(2),t.hij(" ",e.ts.l.paragraph," "),t.xp6(2),t.hij(" ",e.ts.l.sentence," ")}}function Le(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"button",68),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.changeSections(o.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",67),t._uU(4),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(2),t.hij(" ",e.ts.l.paragraph," "),t.xp6(2),t.hij(" ",e.ts.l.sentence," ")}}function Ye(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.archiveRecording())}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.ts.l.archive_recording," ")}}function Je(n,c){if(1&n&&(t.TgZ(0,"div",63)(1,"div",64)(2,"div",65),t._uU(3),t.qZA(),t.YNc(4,qe,5,2,"div",12),t.YNc(5,Le,5,2,"div",12),t.YNc(6,Ye,2,1,"button",66),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",e.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",e.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",e.isSentenceMode()),t.xp6(1),t.Q6J("ngIf",!e.currentRecording.archived&&e.currentRecording.storyData.text!=e.story.text)}}function ze(n,c){if(1&n&&(t.TgZ(0,"div",25)(1,"div",26),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t.YNc(4,ke,4,1,"div",28),t.YNc(5,Ue,2,1,"div",12),t.qZA(),t.YNc(6,Je,7,4,"div",29),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",e.ts.l.listen_record_compare," "),t.xp6(2),t.Q6J("ngIf",!e.audioFinishedLoading&&!e.recordingsFinishedLoading),t.xp6(1),t.Q6J("ngIf",e.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",e.audioFinishedLoading)}}const Qe=[{path:"",pathMatch:"full",redirectTo:"contents"},{path:"contents",component:yt,canActivate:[a.P]},{path:"dashboard/:id",component:se,canActivate:[a.P],canDeactivate:[s]},{path:"synthesis/:id",component:_e,canActivate:[a.P],canDeactivate:[f]},{path:"record-story/:id",component:(()=>{class n{constructor(e,i,o,p,w,T,P,I,M){this.storyService=e,this.ts=i,this.sanitizer=o,this.route=p,this.router=w,this.recordingService=T,this.synthesis=P,this.engagement=I,this.dialog=M,this.story=new v,this.paragraphs=[],this.sentences=[],this.isRecordingParagraph=[],this.isRecordingSentence=[],this.isRecordingSection=[],this.paragraphAudioSources=[],this.sentenceAudioSources=[],this.sectionAudioSources=[],this.paragraphBlobs=[],this.sentenceBlobs=[],this.sectionBlobs=[],this.paragraphChunks=[],this.sentenceChunks=[],this.sectionChunks=[],this.recordingSaved=!0,this.audioFinishedLoading=!1,this.url_ASR_API="https://phoneticsrv3.lcs.tcd.ie/asr_api/recognise",this.sentenceTranscriptions=[],this.paragraphTranscriptions=[],this.sectionTranscriptions=[],this.isTranscribing=[!1],this.recordings=[],this.currentRecording=null,this.lastClickedRecordingId=""}ngOnInit(){var e=this;return(0,u.Z)(function*(){e.chunks=[],e.sectionAudioSources=e.paragraphAudioSources,e.sectionBlobs=e.paragraphBlobs,e.sectionChunks=e.paragraphChunks,e.sectionTranscriptions=e.paragraphTranscriptions,e.isRecordingSection=e.isRecordingParagraph;const i=e.route.snapshot.paramMap.get("id");e.story=yield(0,S.z)(e.storyService.getStory(i)),(0,ve.TD)({audio:!0,video:!1}).then((0,u.Z)(function*(){e.story.activeRecording?e.loadRecordings():e.createNewRecording()})).catch(o=>{e.openMicRequestDialog()})})()}loadRecordings(){var e=this;return(0,u.Z)(function*(){e.recordings=yield(0,S.z)(e.recordingService.getRecordings(e.story._id)),e.recordings.sort((o,p)=>o.date>p.date?-1:1);let i=e.recordings.filter(o=>!1===o.archived);e.setCurrentRecording(i[0])})()}setCurrentRecording(e){this.currentRecording=e,this.loadSynthesis(this.currentRecording.storyData),this.loadAudio(this.currentRecording);let i=this.currentRecording._id,o=document.getElementById(i);o&&(this.lastClickedRecordingId&&document.getElementById(this.lastClickedRecordingId).classList.remove("clickedresultCard"),this.lastClickedRecordingId=i,o.classList.add("clickedresultCard"))}createNewRecording(){var e=this;return(0,u.Z)(function*(){const i=yield(0,S.z)(e.recordingService.create(new me(e.story)));e.story=yield(0,S.z)(e.storyService.updateActiveRecording(e.story._id,i._id)),e.loadRecordings()})()}archiveRecording(){var e=this;return(0,u.Z)(function*(){yield(0,S.z)(e.recordingService.updateArchiveStatus(e.currentRecording._id)),e.createNewRecording()})()}loadSynthesis(e){this.synthesis.synthesiseStory(e).then(([i,o])=>{this.paragraphs=i,this.sentences=o,this.chosenSections=this.paragraphs,this.audioFinishedLoading=!0})}loadAudio(e){var i=this;return(0,u.Z)(function*(){i.audioFinishedLoading=!1,i.paragraphAudioSources=[],i.paragraphTranscriptions=[],i.sentenceAudioSources=[],i.sentenceTranscriptions=[],i.sectionAudioSources=[],i.sectionTranscriptions=[];for(let o=0;o<e.paragraphIndices.length;++o){let p=yield(0,S.z)(i.recordingService.getAudio(e.paragraphAudioIds[o]));i.paragraphBlobs[o]=p,i.paragraphAudioSources[e.paragraphIndices[o]]=i.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(p)),i.paragraphTranscriptions[e.paragraphIndices[o]]=e.paragraphTranscriptions[e.paragraphIndices[o]]}for(let o=0;o<e.sentenceIndices.length;++o){let p=yield(0,S.z)(i.recordingService.getAudio(e.sentenceAudioIds[o]));i.sentenceBlobs[o]=p,i.sentenceAudioSources[e.sentenceIndices[o]]=i.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(p)),i.sentenceTranscriptions[e.sentenceIndices[o]]=e.sentenceTranscriptions[e.sentenceIndices[o]]}i.sectionTranscriptions=i.paragraphTranscriptions,i.sectionAudioSources=i.paragraphAudioSources})()}recordAudio(e){this.engagement.addEventForLoggedInUser(R.tw["RECORD-STORY"],this.story),navigator.mediaDevices.getUserMedia({audio:!0}).then(o=>{this.stream=o,this.recorder=new MediaRecorder(this.stream),this.sectionChunks[e]=[],this.recorder.start(),this.isRecordingSection[e]=!0,this.recorder.ondataavailable=p=>{this.sectionChunks[e].push(p.data)}}).catch()}stopRecording(e){this.recorder.stop(),this.isRecordingSection[e]=!1,this.stream.getTracks().forEach(i=>i.stop()),setTimeout(()=>{const i=new Blob(this.sectionChunks[e],{type:"audio/mp3"});this.sectionBlobs[e]=i,this.sectionAudioSources[e]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(i)),this.recordingSaved=!1;const o=new FileReader;o.readAsDataURL(i),o.onloadend=function(){let p=o.result.split(";base64,")[1];this.getTranscription(p,e)}.bind(this)},500)}getTranscription(e,i){this.isTranscribing[i]=!0,this.isParagraphMode()&&(this.paragraphTranscriptions[i]=null),this.isSentenceMode()&&(this.sentenceTranscriptions[i]=null),fetch(this.url_ASR_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({recogniseBlob:e,developer:!0})}).then(p=>p.json()).then(p=>{let w=p.transcriptions[0].utterance;this.isParagraphMode()?(this.paragraphTranscriptions[i]=w,this.sectionTranscriptions[i]=this.paragraphTranscriptions[i]):this.isSentenceMode()&&(this.sentenceTranscriptions[i]=w,this.sectionTranscriptions[i]=this.sentenceTranscriptions[i]),this.isTranscribing[i]=!1})}deleteRecording(e){this.recordingSaved=!1,delete this.sectionAudioSources[e],delete this.sectionChunks[e],delete this.sectionBlobs[e],delete this.sectionTranscriptions[e]}saveRecordings(){var e=this;return(0,u.Z)(function*(){const i=Object.entries(e.paragraphBlobs).map(function(){var A=(0,u.Z)(function*([Y,nt]){return e.recordingService.saveAudio(e.story._id,nt,Y).toPromise()});return function(Y){return A.apply(this,arguments)}}()),o=Object.entries(e.sentenceBlobs).map(function(){var A=(0,u.Z)(function*([Y,nt]){return e.recordingService.saveAudio(e.story._id,nt,Y).toPromise()});return function(Y){return A.apply(this,arguments)}}()),p=yield Promise.all(i),w=yield Promise.all(o);let T=[],P=[];for(const A of p)T.push(A.index),P.push(A.fileId);let I=[],M=[];for(const A of w)I.push(A.index),M.push(A.fileId);const F={paragraphAudioIds:P,paragraphIndices:T,paragraphTranscriptions:e.paragraphTranscriptions,sentenceIndices:I,sentenceAudioIds:M,sentenceTranscriptions:e.sentenceTranscriptions};let E=yield(0,S.z)(e.recordingService.update(e.story.activeRecording,F));if(E){e.recordingSaved=!0;const A=e.recordings.indexOf(e.currentRecording);e.recordings.splice(A,1,E)}else alert("Error while saving audio")})()}isRecording(e,i){return e instanceof Z.cj?this.isRecordingSentence[i]:e instanceof Z.nv?this.isRecordingParagraph[i]:void 0}isSentenceMode(){return this.chosenSections[0]instanceof Z.cj}isParagraphMode(){return this.chosenSections[0]instanceof Z.nv}changeSections(e){this.chosenSections=e,this.paragraphs.concat(this.sentences).forEach(o=>this.stopSection(o)),this.isSentenceMode()?(this.sectionAudioSources=this.sentenceAudioSources,this.sectionBlobs=this.sentenceBlobs,this.sectionChunks=this.sentenceChunks,this.sectionTranscriptions=this.sentenceTranscriptions,this.isRecordingSection=this.isRecordingSentence):this.isParagraphMode()&&(this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.sectionTranscriptions=this.paragraphTranscriptions,this.isRecordingSection=this.isRecordingParagraph)}playSection(e){e.play(),e.highlight()}stopSection(e){e.stop(),e.removeHighlight()}goToDashboard(){this.router.navigateByUrl("student/dashboard/"+this.story._id)}openMicRequestDialog(){var e=this;this.dialogRef=this.dialog.open(d.p,{data:{title:this.ts.l.microphone_blocked,message:this.ts.l.page_requires_microphone,confirmText:this.ts.l.refresh,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var i=(0,u.Z)(function*(o){e.dialogRef=void 0,console.log(o),o?e.ngOnInit():e.goToDashboard()});return function(o){return i.apply(this,arguments)}}())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.N),t.Y36(m.D),t.Y36(ut.H7),t.Y36(h.gz),t.Y36(h.F0),t.Y36(H.s),t.Y36(Z.cf),t.Y36(q.M),t.Y36(r.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-recording"]],decls:8,vars:4,consts:[[1,"content"],["class","recordingBookHeader",4,"ngIf"],["class","archiveButton",3,"click",4,"ngIf"],["autosize","",1,"archiveNavContainer"],["mode","side",1,"sidenav"],["drawer",""],[4,"ngFor","ngForOf"],["class","recordingStoryContainer",4,"ngIf"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"archiveButton",3,"click"],[1,"contentSection",3,"click"],[1,"contentsLink"],[3,"ngStyle"],[1,"contentsDate"],[1,"recordingStoryContainer"],[1,"recordingStoryHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],["class","footer","style","padding-top: 10px",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],["class","recordingBtn",3,"click",4,"ngIf"],["class","notRecordingBtn blink",3,"click",4,"ngIf"],["class","dividerLine",4,"ngIf"],["class","recognisedSpeechContainer",4,"ngIf"],["style","height: 40px",4,"ngIf"],["class","audioContainer",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"recordingBtn",3,"click"],[1,"fas","fa-microphone"],[1,"notRecordingBtn","blink",3,"click"],[1,"fas","fa-stop-circle"],[1,"dividerLine"],[1,"recognisedSpeechContainer"],[1,"dot-flashing"],[2,"height","40px"],[2,"opacity","0.5"],[1,"recognisedSpeech"],[1,"audioContainer"],["controls","","class","audioPlayer",4,"ngIf"],["class","notRecordingBtn trashBtn",3,"click",4,"ngIf"],["controls","",1,"audioPlayer"],["audioTag",""],[1,"notRecordingBtn","trashBtn",3,"click"],[1,"fas","fa-trash-alt"],[1,"footer",2,"padding-top","10px"],[1,"btnContainer"],[1,"footerText"],["class","changeSplitBtn","style","margin-left: auto",3,"click",4,"ngIf"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"],[1,"changeSplitBtn",2,"margin-left","auto",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Me,10,5,"div",1),t.YNc(2,Ce,4,1,"div",2),t.TgZ(3,"mat-drawer-container",3)(4,"mat-drawer",4,5),t.YNc(6,Se,9,9,"div",6),t.qZA(),t.YNc(7,ze,7,4,"div",7),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.story),t.xp6(1),t.Q6J("ngIf",i.recordings.length>0),t.xp6(4),t.Q6J("ngForOf",i.recordings),t.xp6(1),t.Q6J("ngIf",i.story))},dependencies:[g.sg,g.O5,g.PC,K.P,tt,et,ht.Hw,g.uU,pt],styles:['.content[_ngcontent-%COMP%]{width:90%;margin-left:5%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.archiveNavContainer[_ngcontent-%COMP%]{height:70vh;background-color:#fff}.sidenav[_ngcontent-%COMP%]{padding:20px;width:20vw}.archiveButton[_ngcontent-%COMP%]{display:flex;margin-left:10px;margin-top:20px;font-size:16px}.archiveButton[_ngcontent-%COMP%]:hover, .contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:20px;height:80%}.textContainerSynth[_ngcontent-%COMP%]{box-shadow:0 0 11px 2px #0006;margin-left:5%;width:90%;color:var(--dark-text);background-color:#f8f9fa;text-align:left;overflow:auto;height:100%}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{white-space:nowrap;display:inline;border-style:none;color:var(--dark-text);width:10rem;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.bookTitle[_ngcontent-%COMP%]{overflow:auto;color:var(--dark-text);margin-left:2em;margin-right:2em;display:inline-block;font-size:16pt}.recordingSaveIcon[_ngcontent-%COMP%]{width:10rem;color:var(--dark-text);border-style:none;font-size:11pt;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{white-space:nowrap;color:var(--scealai-light-brown)}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);cursor:pointer;transition:.5s}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:10px;font-weight:700;border-radius:10px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.recordingBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px;float:right}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.recognisedSpeech[_ngcontent-%COMP%]{color:var(--scealai-green);font-style:italic;padding-left:5px}.audioContainer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.audioPlayer[_ngcontent-%COMP%]{width:25%;height:35px}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}.selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}.blink[_ngcontent-%COMP%]{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),n})(),canActivate:[a.P],canDeactivate:[x]}];let Ge=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(Qe),h.Bz]}),n})();var He=l(3869),Ve=l(4385),We=l(5802);let Ke=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,Ge,Ve.LD,W.u5,He.F,Ut,ht.Ps,We.fi.forRoot({customOptions:[{import:"formats/font",whitelist:["sans-serif","serif","monospace","arial","times-new-roman"]}]})]}),n})()},7230:function(J){J.exports=function(b){var l={};function g(h){if(l[h])return l[h].exports;var a=l[h]={i:h,l:!1,exports:{}};return b[h].call(a.exports,a,a.exports,g),a.l=!0,a.exports}return g.m=b,g.c=l,g.d=function(h,a,d){g.o(h,a)||Object.defineProperty(h,a,{enumerable:!0,get:d})},g.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},g.t=function(h,a){if(1&a&&(h=g(h)),8&a||4&a&&"object"==typeof h&&h&&h.__esModule)return h;var d=Object.create(null);if(g.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:h}),2&a&&"string"!=typeof h)for(var m in h)g.d(d,m,function(t){return h[t]}.bind(null,m));return d},g.n=function(h){var a=h&&h.__esModule?function(){return h.default}:function(){return h};return g.d(a,"a",a),a},g.o=function(h,a){return Object.prototype.hasOwnProperty.call(h,a)},g.p="",g(g.s=90)}({17:function(b,l,g){"use strict";l.__esModule=!0,l.default=void 0;var h=g(18),a=function(){function d(){}return d.getFirstMatch=function(m,t){var r=t.match(m);return r&&r.length>0&&r[1]||""},d.getSecondMatch=function(m,t){var r=t.match(m);return r&&r.length>1&&r[2]||""},d.matchAndReturnConst=function(m,t,r){if(m.test(t))return r},d.getWindowsVersionName=function(m){switch(m){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},d.getMacOSVersionName=function(m){var t=m.split(".").splice(0,2).map(function(r){return parseInt(r,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},d.getAndroidVersionName=function(m){var t=m.split(".").splice(0,2).map(function(r){return parseInt(r,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},d.getVersionPrecision=function(m){return m.split(".").length},d.compareVersions=function(m,t,r){void 0===r&&(r=!1);var s=d.getVersionPrecision(m),x=d.getVersionPrecision(t),f=Math.max(s,x),u=0,_=d.map([m,t],function(v){var C=f-d.getVersionPrecision(v),y=v+new Array(C+1).join(".0");return d.map(y.split("."),function(R){return new Array(20-R.length).join("0")+R}).reverse()});for(r&&(u=f-Math.min(s,x)),f-=1;f>=u;){if(_[0][f]>_[1][f])return 1;if(_[0][f]===_[1][f]){if(f===u)return 0;f-=1}else if(_[0][f]<_[1][f])return-1}},d.map=function(m,t){var r,s=[];if(Array.prototype.map)return Array.prototype.map.call(m,t);for(r=0;r<m.length;r+=1)s.push(t(m[r]));return s},d.find=function(m,t){var r,s;if(Array.prototype.find)return Array.prototype.find.call(m,t);for(r=0,s=m.length;r<s;r+=1){var x=m[r];if(t(x,r))return x}},d.assign=function(m){for(var t,r,s=m,x=arguments.length,f=new Array(x>1?x-1:0),u=1;u<x;u++)f[u-1]=arguments[u];if(Object.assign)return Object.assign.apply(Object,[m].concat(f));var _=function(){var v=f[t];"object"==typeof v&&null!==v&&Object.keys(v).forEach(function(C){s[C]=v[C]})};for(t=0,r=f.length;t<r;t+=1)_();return m},d.getBrowserAlias=function(m){return h.BROWSER_ALIASES_MAP[m]},d.getBrowserTypeByAlias=function(m){return h.BROWSER_MAP[m]||""},d}();l.default=a,b.exports=l.default},18:function(b,l,g){"use strict";l.__esModule=!0,l.ENGINE_MAP=l.OS_MAP=l.PLATFORMS_MAP=l.BROWSER_MAP=l.BROWSER_ALIASES_MAP=void 0,l.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},l.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},l.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},l.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},l.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(b,l,g){"use strict";l.__esModule=!0,l.default=void 0;var h,a=(h=g(91))&&h.__esModule?h:{default:h},d=g(18);function m(r,s){for(var x=0;x<s.length;x++){var f=s[x];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(r,f.key,f)}}var t=function(){function r(){}var s,f;return r.getParser=function(u,_){if(void 0===_&&(_=!1),"string"!=typeof u)throw new Error("UserAgent should be a string");return new a.default(u,_)},r.parse=function(u){return new a.default(u).getResult()},s=r,f=[{key:"BROWSER_MAP",get:function(){return d.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return d.ENGINE_MAP}},{key:"OS_MAP",get:function(){return d.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return d.PLATFORMS_MAP}}],null&&m(s.prototype,null),f&&m(s,f),r}();l.default=t,b.exports=l.default},91:function(b,l,g){"use strict";l.__esModule=!0,l.default=void 0;var h=r(g(92)),a=r(g(93)),d=r(g(94)),m=r(g(95)),t=r(g(17));function r(x){return x&&x.__esModule?x:{default:x}}var s=function(){function x(u,_){if(void 0===_&&(_=!1),null==u||""===u)throw new Error("UserAgent parameter can't be empty");this._ua=u,this.parsedResult={},!0!==_&&this.parse()}var f=x.prototype;return f.getUA=function(){return this._ua},f.test=function(u){return u.test(this._ua)},f.parseBrowser=function(){var u=this;this.parsedResult.browser={};var _=t.default.find(h.default,function(v){if("function"==typeof v.test)return v.test(u);if(v.test instanceof Array)return v.test.some(function(C){return u.test(C)});throw new Error("Browser's test function is not valid")});return _&&(this.parsedResult.browser=_.describe(this.getUA())),this.parsedResult.browser},f.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},f.getBrowserName=function(u){return u?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},f.getBrowserVersion=function(){return this.getBrowser().version},f.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},f.parseOS=function(){var u=this;this.parsedResult.os={};var _=t.default.find(a.default,function(v){if("function"==typeof v.test)return v.test(u);if(v.test instanceof Array)return v.test.some(function(C){return u.test(C)});throw new Error("Browser's test function is not valid")});return _&&(this.parsedResult.os=_.describe(this.getUA())),this.parsedResult.os},f.getOSName=function(u){var _=this.getOS().name;return u?String(_).toLowerCase()||"":_||""},f.getOSVersion=function(){return this.getOS().version},f.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},f.getPlatformType=function(u){void 0===u&&(u=!1);var _=this.getPlatform().type;return u?String(_).toLowerCase()||"":_||""},f.parsePlatform=function(){var u=this;this.parsedResult.platform={};var _=t.default.find(d.default,function(v){if("function"==typeof v.test)return v.test(u);if(v.test instanceof Array)return v.test.some(function(C){return u.test(C)});throw new Error("Browser's test function is not valid")});return _&&(this.parsedResult.platform=_.describe(this.getUA())),this.parsedResult.platform},f.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},f.getEngineName=function(u){return u?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},f.parseEngine=function(){var u=this;this.parsedResult.engine={};var _=t.default.find(m.default,function(v){if("function"==typeof v.test)return v.test(u);if(v.test instanceof Array)return v.test.some(function(C){return u.test(C)});throw new Error("Browser's test function is not valid")});return _&&(this.parsedResult.engine=_.describe(this.getUA())),this.parsedResult.engine},f.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},f.getResult=function(){return t.default.assign({},this.parsedResult)},f.satisfies=function(u){var _=this,v={},C=0,y={},R=0;if(Object.keys(u).forEach(function(k){var S=u[k];"string"==typeof S?(y[k]=S,R+=1):"object"==typeof S&&(v[k]=S,C+=1)}),C>0){var q=Object.keys(v),z=t.default.find(q,function(k){return _.isOS(k)});if(z){var j=this.satisfies(v[z]);if(void 0!==j)return j}var Q=t.default.find(q,function(k){return _.isPlatform(k)});if(Q){var G=this.satisfies(v[Q]);if(void 0!==G)return G}}if(R>0){var H=Object.keys(y),V=t.default.find(H,function(k){return _.isBrowser(k,!0)});if(void 0!==V)return this.compareVersion(y[V])}},f.isBrowser=function(u,_){void 0===_&&(_=!1);var v=this.getBrowserName().toLowerCase(),C=u.toLowerCase(),y=t.default.getBrowserTypeByAlias(C);return _&&y&&(C=y.toLowerCase()),C===v},f.compareVersion=function(u){var _=[0],v=u,C=!1,y=this.getBrowserVersion();if("string"==typeof y)return">"===u[0]||"<"===u[0]?(v=u.substr(1),"="===u[1]?(C=!0,v=u.substr(2)):_=[],_.push(">"===u[0]?1:-1)):"="===u[0]?v=u.substr(1):"~"===u[0]&&(C=!0,v=u.substr(1)),_.indexOf(t.default.compareVersions(y,v,C))>-1},f.isOS=function(u){return this.getOSName(!0)===String(u).toLowerCase()},f.isPlatform=function(u){return this.getPlatformType(!0)===String(u).toLowerCase()},f.isEngine=function(u){return this.getEngineName(!0)===String(u).toLowerCase()},f.is=function(u,_){return void 0===_&&(_=!1),this.isBrowser(u,_)||this.isOS(u)||this.isPlatform(u)},f.some=function(u){var _=this;return void 0===u&&(u=[]),u.some(function(v){return _.is(v)})},x}();l.default=s,b.exports=l.default},92:function(b,l,g){"use strict";l.__esModule=!0,l.default=void 0;var h,a=(h=g(17))&&h.__esModule?h:{default:h},d=/version\/(\d+(\.?_?\d+)+)/i;l.default=[{test:[/googlebot/i],describe:function(t){var r={name:"Googlebot"},s=a.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/opera/i],describe:function(t){var r={name:"Opera"},s=a.default.getFirstMatch(d,t)||a.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/opr\/|opios/i],describe:function(t){var r={name:"Opera"},s=a.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/SamsungBrowser/i],describe:function(t){var r={name:"Samsung Internet for Android"},s=a.default.getFirstMatch(d,t)||a.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/Whale/i],describe:function(t){var r={name:"NAVER Whale Browser"},s=a.default.getFirstMatch(d,t)||a.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/MZBrowser/i],describe:function(t){var r={name:"MZ Browser"},s=a.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/focus/i],describe:function(t){var r={name:"Focus"},s=a.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/swing/i],describe:function(t){var r={name:"Swing"},s=a.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/coast/i],describe:function(t){var r={name:"Opera Coast"},s=a.default.getFirstMatch(d,t)||a.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var r={name:"Opera Touch"},s=a.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/yabrowser/i],describe:function(t){var r={name:"Yandex Browser"},s=a.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/ucbrowser/i],describe:function(t){var r={name:"UC Browser"},s=a.default.getFirstMatch(d,t)||a.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/Maxthon|mxios/i],describe:function(t){var r={name:"Maxthon"},s=a.default.getFirstMatch(d,t)||a.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/epiphany/i],describe:function(t){var r={name:"Epiphany"},s=a.default.getFirstMatch(d,t)||a.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/puffin/i],describe:function(t){var r={name:"Puffin"},s=a.default.getFirstMatch(d,t)||a.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/sleipnir/i],describe:function(t){var r={name:"Sleipnir"},s=a.default.getFirstMatch(d,t)||a.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/k-meleon/i],describe:function(t){var r={name:"K-Meleon"},s=a.default.getFirstMatch(d,t)||a.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/micromessenger/i],describe:function(t){var r={name:"WeChat"},s=a.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/qqbrowser/i],describe:function(t){var r={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},s=a.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/msie|trident/i],describe:function(t){var r={name:"Internet Explorer"},s=a.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/\sedg\//i],describe:function(t){var r={name:"Microsoft Edge"},s=a.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/edg([ea]|ios)/i],describe:function(t){var r={name:"Microsoft Edge"},s=a.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/vivaldi/i],describe:function(t){var r={name:"Vivaldi"},s=a.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/seamonkey/i],describe:function(t){var r={name:"SeaMonkey"},s=a.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/sailfish/i],describe:function(t){var r={name:"Sailfish"},s=a.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return s&&(r.version=s),r}},{test:[/silk/i],describe:function(t){var r={name:"Amazon Silk"},s=a.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/phantom/i],describe:function(t){var r={name:"PhantomJS"},s=a.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/slimerjs/i],describe:function(t){var r={name:"SlimerJS"},s=a.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var r={name:"BlackBerry"},s=a.default.getFirstMatch(d,t)||a.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var r={name:"WebOS Browser"},s=a.default.getFirstMatch(d,t)||a.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/bada/i],describe:function(t){var r={name:"Bada"},s=a.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/tizen/i],describe:function(t){var r={name:"Tizen"},s=a.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/qupzilla/i],describe:function(t){var r={name:"QupZilla"},s=a.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var r={name:"Firefox"},s=a.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/electron/i],describe:function(t){var r={name:"Electron"},s=a.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/MiuiBrowser/i],describe:function(t){var r={name:"Miui"},s=a.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/chromium/i],describe:function(t){var r={name:"Chromium"},s=a.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/chrome|crios|crmo/i],describe:function(t){var r={name:"Chrome"},s=a.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/GSA/i],describe:function(t){var r={name:"Google Search"},s=a.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:function(t){var r=!t.test(/like android/i),s=t.test(/android/i);return r&&s},describe:function(t){var r={name:"Android Browser"},s=a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/playstation 4/i],describe:function(t){var r={name:"PlayStation 4"},s=a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/safari|applewebkit/i],describe:function(t){var r={name:"Safari"},s=a.default.getFirstMatch(d,t);return s&&(r.version=s),r}},{test:[/.*/i],describe:function(t){var r=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:a.default.getFirstMatch(r,t),version:a.default.getSecondMatch(r,t)}}}],b.exports=l.default},93:function(b,l,g){"use strict";l.__esModule=!0,l.default=void 0;var h,a=(h=g(17))&&h.__esModule?h:{default:h},d=g(18);l.default=[{test:[/Roku\/DVP/],describe:function(t){var r=a.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:d.OS_MAP.Roku,version:r}}},{test:[/windows phone/i],describe:function(t){var r=a.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:d.OS_MAP.WindowsPhone,version:r}}},{test:[/windows /i],describe:function(t){var r=a.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),s=a.default.getWindowsVersionName(r);return{name:d.OS_MAP.Windows,version:r,versionName:s}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var r={name:d.OS_MAP.iOS},s=a.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return s&&(r.version=s),r}},{test:[/macintosh/i],describe:function(t){var r=a.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),s=a.default.getMacOSVersionName(r),x={name:d.OS_MAP.MacOS,version:r};return s&&(x.versionName=s),x}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var r=a.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:d.OS_MAP.iOS,version:r}}},{test:function(t){var r=!t.test(/like android/i),s=t.test(/android/i);return r&&s},describe:function(t){var r=a.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),s=a.default.getAndroidVersionName(r),x={name:d.OS_MAP.Android,version:r};return s&&(x.versionName=s),x}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var r=a.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),s={name:d.OS_MAP.WebOS};return r&&r.length&&(s.version=r),s}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var r=a.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||a.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||a.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:d.OS_MAP.BlackBerry,version:r}}},{test:[/bada/i],describe:function(t){var r=a.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:d.OS_MAP.Bada,version:r}}},{test:[/tizen/i],describe:function(t){var r=a.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:d.OS_MAP.Tizen,version:r}}},{test:[/linux/i],describe:function(){return{name:d.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:d.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var r=a.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:d.OS_MAP.PlayStation4,version:r}}}],b.exports=l.default},94:function(b,l,g){"use strict";l.__esModule=!0,l.default=void 0;var h,a=(h=g(17))&&h.__esModule?h:{default:h},d=g(18);l.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var r=a.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",s={type:d.PLATFORMS_MAP.mobile,vendor:"Huawei"};return r&&(s.model=r),s}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:d.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:d.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:d.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:d.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:d.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:d.PLATFORMS_MAP.tablet}}},{test:function(t){var r=t.test(/ipod|iphone/i),s=t.test(/like (ipod|iphone)/i);return r&&!s},describe:function(t){var r=a.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:d.PLATFORMS_MAP.mobile,vendor:"Apple",model:r}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:d.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:d.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:d.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:d.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:d.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var r=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&r>=3},describe:function(){return{type:d.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:d.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:d.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:d.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:d.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:d.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:d.PLATFORMS_MAP.tv}}}],b.exports=l.default},95:function(b,l,g){"use strict";l.__esModule=!0,l.default=void 0;var h,a=(h=g(17))&&h.__esModule?h:{default:h},d=g(18);l.default=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:d.ENGINE_MAP.Blink};var r=a.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:d.ENGINE_MAP.EdgeHTML,version:r}}},{test:[/trident/i],describe:function(t){var r={name:d.ENGINE_MAP.Trident},s=a.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:function(t){return t.test(/presto/i)},describe:function(t){var r={name:d.ENGINE_MAP.Presto},s=a.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:function(t){var r=t.test(/gecko/i),s=t.test(/like gecko/i);return r&&!s},describe:function(t){var r={name:d.ENGINE_MAP.Gecko},s=a.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:d.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var r={name:d.ENGINE_MAP.WebKit},s=a.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return s&&(r.version=s),r}}],b.exports=l.default}})},2754:(J,b,l)=>{"use strict";b.TD=void 0;var h=l(4354);Object.defineProperty(b,"TD",{enumerable:!0,get:function(){return h.requestMediaPermissions}})},4354:function(J,b,l){"use strict";var g=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(b,"__esModule",{value:!0}),b.requestVideoPermissions=b.requestAudioPermissions=b.requestMediaPermissions=b.MediaPermissionsErrorType=void 0;const h=g(l(7230));var a,r;(r=a=b.MediaPermissionsErrorType||(b.MediaPermissionsErrorType={})).SystemPermissionDenied="SystemPermissionDenied",r.UserPermissionDenied="UserPermissionDenied",r.CouldNotStartVideoSource="CouldNotStartVideoSource",r.Generic="Generic",b.requestMediaPermissions=r=>new Promise((s,x)=>{navigator.mediaDevices.getUserMedia(r??{audio:!0,video:!0}).then(f=>{f.getTracks().forEach(u=>{u.stop()}),s(!0)}).catch(f=>{const _=h.default.getParser(window.navigator.userAgent).getBrowserName(),v=f.name,C=f.message;let y=a.Generic;"Chrome"===_?"NotAllowedError"===v?"Permission denied by system"===C?y=a.SystemPermissionDenied:"Permission denied"===C&&(y=a.UserPermissionDenied):"NotReadableError"===v&&(y=a.CouldNotStartVideoSource):"Safari"===_?"NotAllowedError"===v&&(y=a.UserPermissionDenied):"Microsoft Edge"===_?"NotAllowedError"===v?y=a.UserPermissionDenied:"NotReadableError"===v&&(y=a.CouldNotStartVideoSource):"Firefox"===_&&("NotFoundError"===v||"NotReadableError"===v?y=a.SystemPermissionDenied:"NotAllowedError"===v?y=a.UserPermissionDenied:"AbortError"===v&&(y=a.CouldNotStartVideoSource)),x({type:y,name:f.name,message:f.message})})}),b.requestAudioPermissions=()=>(0,b.requestMediaPermissions)({audio:!0,video:!1}),b.requestVideoPermissions=()=>(0,b.requestMediaPermissions)({audio:!1,video:!0})}}]);
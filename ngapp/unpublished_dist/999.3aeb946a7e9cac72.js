(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[999],{5999:(Q,S,h)=>{"use strict";h.r(S),h.d(S,{StudentModule:()=>rn});var m=h(6895),d=h(1390),s=h(970),g=h(4633),v=h(8977),e=h(4650),n=h(5412);let o=(()=>{class i{canDeactivate(t,r,a){return!!t.storySaved||(t.showModal(),t.modalChoice)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),w=(()=>{class i{constructor(t,r){this.dialog=t,this.ts=r}canDeactivate(t){if(t.recordingSaved)return!0;let r;return r=this.dialog.open(g.p,{data:{title:this.ts.l.save_changes_made_to_this_recording,type:"",confirmText:this.ts.l.save,cancelText:this.ts.l.cancel},width:"30vh"}),r.afterClosed().subscribe(a=>{if(r=void 0,a)return t.saveRecordings(),!0}),!1}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(n.uw),e.LFG(v.D))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),p=(()=>{class i{canDeactivate(t,r,a){if(t.chosenSections)for(const b of t.chosenSections)b.stop();return!0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var u=h(5861),f=h(4412);class l extends f.i{constructor(){super(...arguments),this.createdWithPrompts=!1}}var c=h(1765),x=h(1745),y=h(1512),T=h(6469),k=h(4687),C=h(1245),M=h(25),F=h(5042),I=h(530),N=h(8443);let O=(()=>{class i{transform(t,r){return t?r?(r=r.toLocaleLowerCase(),t.filter(a=>a instanceof N.n?a.username.toLocaleLowerCase().includes(r):a instanceof l?a.title.toLocaleLowerCase().includes(r)||a.text.toLocaleLowerCase().includes(r):void 0)):t:[]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"appFilter",type:i,pure:!0}),i})();var B=h(3905),R=h(4006),G=h(9121);function ge(i,_){1&i&&(e.TgZ(0,"div",17),e._UZ(1,"grid-spinner"),e.qZA())}function _e(i,_){if(1&i&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.click_new_story," ")}}function me(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"input",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,b=e.oxw();return e.KtG(b.toggleDelete(a._id))}),e.qZA()}}function ve(i,_){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.lastUpdated,"M/d/yy, h:mm a"))}}function be(i,_){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e.ALo(2,"date"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.lastUpdated,"d/M/yy, h:mm a"))}}const xe=function(i){return["../dashboard",i]};function we(i,_){if(1&i&&(e.TgZ(0,"div")(1,"div",18)(2,"div",19),e.YNc(3,me,1,0,"input",20),e.TgZ(4,"div",21),e._uU(5),e.qZA()(),e.YNc(6,ve,3,4,"div",22),e.YNc(7,be,3,4,"div",22),e.qZA(),e._UZ(8,"hr"),e.qZA()),2&i){const t=_.$implicit,r=e.oxw();e.xp6(3),e.Q6J("ngIf",r.deleteMode),e.xp6(1),e.Q6J("searchedWord",r.searchText)("content",t.title)("classToApply","font-weight-bold")("setTitle","true")("routerLink",e.VKq(9,xe,t._id)),e.xp6(1),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngIf",r.isFromAmerica),e.xp6(1),e.Q6J("ngIf",!r.isFromAmerica)}}function ye(i,_){if(1&i&&(e.TgZ(0,"span",27),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.unreadMessages," ")}}function Ce(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.goToMessages())}),e._uU(1),e.YNc(2,ye,2,1,"span",26),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.messages," "),e.xp6(1),e.Q6J("ngIf",t.unreadMessages>0)}}function Me(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.goToStats())}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.stats," ")}}let Se=(()=>{class i{constructor(t,r,a,b,P,Z,E,Y,A,L,z){this.storyService=t,this.auth=r,this.engagement=a,this.ts=b,this.router=P,this.messageService=Z,this.profileService=E,this.classroomService=Y,this.notificationService=A,this.recordingService=L,this.dialog=z,this.stories=[],this.toBeDeleted=[],this.userId="",this.messagesForNotifications=[],this.unreadMessages=0,this.isFromAmerica=!1,this.isEnrolled=!1,this.searchText="",this.storiesLoaded=!1}ngOnInit(){var t=this;return(0,u.Z)(function*(){const r=t.auth.getUserDetails();r?(t.stories=(yield(0,B.z)(t.storyService.getStoriesForLoggedInUser())).map(a=>(new l).fromJSON(a)),t.stories.sort((a,b)=>a.date>b.date?-1:1),t.storiesLoaded=!0,t.userId=r._id,t.deleteMode=!1,t.toBeDeleted=[],t.notificationService.getStudentNotifications(),t.classroomService.getClassroomOfStudent(t.userId).subscribe(a=>{t.isEnrolled=null!=a}),t.messageService.getMessagesForLoggedInUser().subscribe(a=>{t.messagesForNotifications=a,t.unreadMessages=t.messageService.getNumberOfUnreadMessages(t.messagesForNotifications)}),t.profileService.getForUser(t.userId).subscribe(a=>{let P=a.profile.country;t.isFromAmerica="United States of America"==P||"America"==P||"USA"==P||"United States"==P},a=>{t.router.navigateByUrl("/register-profile")})):t.auth.logout()})()}toggleDeleteMode(){if(this.deleteMode&&this.toBeDeleted.length>0)for(let t of this.toBeDeleted)this.engagement.addEventForLoggedInUser(y.tw["DELETE-STORY"],{_id:t}),this.recordingService.deleteStoryRecordingAudio(t).subscribe(r=>{}),this.recordingService.deleteStoryRecording(t).subscribe(r=>{}),this.storyService.deleteStory(t).subscribe(r=>{this.ngOnInit()});else this.deleteMode=!this.deleteMode||0!==this.toBeDeleted.length}toggleEditMode(){this.editMode=!this.editMode}toggleDelete(t){if(this.toBeDeleted.includes(t)){var r=this.toBeDeleted.indexOf(t);this.toBeDeleted.splice(r,1)}else this.toBeDeleted.push(t)}goToMessages(){this.router.navigateByUrl("/messages/"+this.userId)}goToStats(){this.router.navigateByUrl("/stats-dashboard/"+this.userId)}createNewStory(){var t=this;this.dialogRef=this.dialog.open(g.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var r=(0,u.Z)(function*(a){if(t.dialogRef=void 0,a)if(a[0]){let b="connemara";a[1]==t.ts.l.munster&&(b="kerry"),a[1]==t.ts.l.ulster&&(b="donegal"),t.storyService.saveStory(t.auth.getUserDetails()._id,a[0],new Date,b,"",t.auth.getUserDetails().username,!1)}else alert(t.ts.l.title_required)});return function(a){return r.apply(this,arguments)}}())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.N),e.Y36(x.$),e.Y36(T.M),e.Y36(v.D),e.Y36(d.F0),e.Y36(C.e),e.Y36(k.H),e.Y36(M.u),e.Y36(F.g),e.Y36(I.s),e.Y36(n.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-book-contents"]],features:[e._Bn([O])],decls:27,vars:17,consts:[[1,"bookContainer"],[1,"contentsContainer"],[1,"bookContentsTitle"],[1,"contentsTitleContainer"],[1,"contentsLinkTitle"],[1,"contentsDateTitle"],["role","main"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"contentsLinkContainer"],["class","newStoryMessage",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"contentsBtnsContainer"],[1,"btn","deleteBtn",3,"click"],["src","assets/img/trash.ico",1,"trashImg"],["class","btn messagesBtn",3,"click",4,"ngIf"],["data-cy","create-story",1,"btn","newStoryBtn",3,"click"],[1,"newStoryMessage"],[1,"contentSection"],[1,"contentsLink"],["type","checkbox","class","deleteCheckbox",3,"click",4,"ngIf"],["appHighlight","",3,"searchedWord","content","classToApply","setTitle","routerLink"],["class","contentsDate",4,"ngIf"],["type","checkbox",1,"deleteCheckbox",3,"click"],[1,"contentsDate"],[1,"btn","messagesBtn",3,"click"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3)(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"div",5),e._uU(8),e.qZA()(),e.TgZ(9,"div",6)(10,"div")(11,"div",7)(12,"input",8),e.NdJ("ngModelChange",function(b){return r.searchText=b}),e.qZA()()()(),e.TgZ(13,"div",9)(14,"div"),e._uU(15),e.qZA(),e.YNc(16,ge,2,0,"div",10),e.YNc(17,_e,2,1,"div",10),e.YNc(18,we,9,11,"div",11),e.ALo(19,"appFilter"),e.qZA(),e.TgZ(20,"div",12)(21,"button",13),e.NdJ("click",function(){return r.toggleDeleteMode()}),e._UZ(22,"img",14),e.qZA(),e.YNc(23,Ce,3,2,"button",15),e.YNc(24,Me,2,1,"button",15),e.TgZ(25,"button",16),e.NdJ("click",function(){return r.createNewStory()}),e._uU(26),e.qZA()()()()),2&t&&(e.xp6(3),e.Oqu(r.ts.l.my_stories),e.xp6(3),e.Oqu(r.ts.l.title),e.xp6(2),e.Oqu(r.ts.l.last_updated),e.xp6(4),e.s9C("placeholder",r.ts.l.search_story_title_or_content),e.Q6J("ngModel",r.searchText),e.xp6(3),e.hij(" ",r.ts.l.loading," "),e.xp6(1),e.Q6J("ngIf",!r.storiesLoaded),e.xp6(1),e.Q6J("ngIf",0===r.stories.length&&r.storiesLoaded),e.xp6(1),e.Q6J("ngForOf",e.xi3(19,14,r.stories,r.searchText)),e.xp6(3),e.ekj("deleteModeBtn",r.deleteMode),e.xp6(2),e.Q6J("ngIf",r.isEnrolled),e.xp6(1),e.Q6J("ngIf",r.stories.length>0),e.xp6(2),e.hij("",r.ts.l.new_story," "))},dependencies:[m.sg,m.O5,d.rH,R.Fj,R.JJ,R.On,G.P,m.uU,O],styles:[".bookContainer[_ngcontent-%COMP%]{height:auto;width:80%;background:url(https://www.abair.ie/scealai/assets/img/paperBg.jpg) no-repeat center fixed;margin-left:10%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.contentsContainer[_ngcontent-%COMP%]{padding:20px}.bookContentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);padding-left:5%;padding-right:5%;display:inline-block;font-size:18pt}.contentsLinkContainer[_ngcontent-%COMP%]{height:500px;overflow:auto;padding:10px;background-color:#f7f2e7;box-shadow:inset 0 0 12px #00000080;border-radius:5px}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.contentsDate[_ngcontent-%COMP%]{color:var(--dark-text)}.contentsBtnsContainer[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:1rem}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;padding:2px 7px 7px;height:38px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:24px}.messagesBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;border-radius:5px;display:flex}.messagesBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.newStoryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.newStoryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}@media only screen and (max-width: 700px){.contentsContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%}.contentsLinkContainer[_ngcontent-%COMP%]{height:270px;padding-top:10px}.contentsLinkTitle[_ngcontent-%COMP%], .contentsDateTitle[_ngcontent-%COMP%]{font-size:12pt}.optionsPopupBtn[_ngcontent-%COMP%]{padding:2px 5px 5px;margin:0 4px 0 0;height:30px;font-size:12pt}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:0 3px 3px;height:30px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:20px}}.newStoryMessage[_ngcontent-%COMP%]{color:#a79d88;width:80%;margin-left:10%;margin-top:30px}@media only screen and (min-width: 700px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}@media only screen and (min-width: 1400px) and (min-height: 800px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}"]}),i})();var j=h(7579),Te=h(9971),ke=h.n(Te),Ae=h(5439),Pe=h.n(Ae),H=h(8605),re=h(3238),$=h(2687),Oe=h(445),V=h(1281),oe=h(9521),Be=h(3353),Fe=h(4968),Ie=h(6451),W=h(9300),ae=h(4004),se=h(9718),q=h(2722),Re=h(1884),ce=h(5698),de=h(8675),Ze=h(8372),U=h(7340);const le=["*"],De=["content"];function Ne(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a._onBackdropClicked())}),e.qZA()}if(2&i){const t=e.oxw();e.ekj("mat-drawer-shown",t._isShowingBackdrop())}}function Ee(i,_){1&i&&(e.TgZ(0,"mat-drawer-content"),e.Hsn(1,2),e.qZA())}const qe=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Ue=["mat-drawer","mat-drawer-content","*"],Le={transformDrawer:(0,U.X$)("transform",[(0,U.SB)("open, open-instant",(0,U.oB)({transform:"none",visibility:"visible"})),(0,U.SB)("void",(0,U.oB)({"box-shadow":"none",visibility:"hidden"})),(0,U.eR)("void => open-instant",(0,U.jt)("0ms")),(0,U.eR)("void <=> open, open-instant => void",(0,U.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},je=new e.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Je(){return!1}}),ue=new e.OlP("MAT_DRAWER_CONTAINER");let X=(()=>{class i extends H.PQ{constructor(t,r,a,b,P){super(a,b,P),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36((0,e.Gpc)(()=>te)),e.Y36(e.SBq),e.Y36(H.mF),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,r){2&t&&e.Udp("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[e._Bn([{provide:H.PQ,useExisting:i}]),e.qOj],ngContentSelectors:le,decls:1,vars:0,template:function(t,r){1&t&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),i})(),ee=(()=>{class i{constructor(t,r,a,b,P,Z,E,Y){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=a,this._platform=b,this._ngZone=P,this._interactivityChecker=Z,this._doc=E,this._container=Y,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new j.x,this._animationEnd=new j.x,this._animationState="void",this.openedChange=new e.vpe(!0),this._openedStream=this.openedChange.pipe((0,W.h)(A=>A),(0,ae.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,W.h)(A=>A.fromState!==A.toState&&0===A.toState.indexOf("open")),(0,se.h)(void 0)),this._closedStream=this.openedChange.pipe((0,W.h)(A=>!A),(0,ae.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,W.h)(A=>A.fromState!==A.toState&&"void"===A.toState),(0,se.h)(void 0)),this._destroyed=new j.x,this.onPositionChanged=new e.vpe,this._modeChanged=new j.x,this.openedChange.subscribe(A=>{A?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,Fe.R)(this._elementRef.nativeElement,"keydown").pipe((0,W.h)(A=>A.keyCode===oe.hY&&!this.disableClose&&!(0,oe.Vb)(A)),(0,q.R)(this._destroyed)).subscribe(A=>this._ngZone.run(()=>{this.close(),A.stopPropagation(),A.preventDefault()}))}),this._animationEnd.pipe((0,Re.x)((A,L)=>A.fromState===L.fromState&&A.toState===L.toState)).subscribe(A=>{const{fromState:L,toState:z}=A;(0===z.indexOf("open")&&"void"===L||"void"===z&&0===L.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=(0,V.Ig)(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=(0,V.Ig)(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle((0,V.Ig)(t))}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const a=()=>{t.removeEventListener("blur",a),t.removeEventListener("mousedown",a),t.removeAttribute("tabindex")};t.addEventListener("blur",a),t.addEventListener("mousedown",a)})),t.focus(r)}_focusByCssSelector(t,r){let a=this._elementRef.nativeElement.querySelector(t);a&&this._forceFocus(a,r)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);const a=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),a}_setOpen(t,r,a){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(a)),this._updateFocusTrapState(),new Promise(b=>{this.openedChange.pipe((0,ce.q)(1)).subscribe(P=>b(P?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const r=this._elementRef.nativeElement,a=r.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),a.insertBefore(this._anchor,r)),a.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36($.qV),e.Y36($.tE),e.Y36(Be.t4),e.Y36(e.R0b),e.Y36($.ic),e.Y36(m.K0,8),e.Y36(ue,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-drawer"]],viewQuery:function(t,r){if(1&t&&e.Gf(De,5),2&t){let a;e.iGM(a=e.CRH())&&(r._content=a.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,r){1&t&&e.WFA("@transform.start",function(b){return r._animationStarted.next(b)})("@transform.done",function(b){return r._animationEnd.next(b)}),2&t&&(e.uIk("align",null),e.d8E("@transform",r._animationState),e.ekj("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:le,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,r){1&t&&(e.F$t(),e.TgZ(0,"div",0,1),e.Hsn(2),e.qZA())},dependencies:[H.PQ],encapsulation:2,data:{animation:[Le.transformDrawer]},changeDetection:0}),i})(),te=(()=>{class i{constructor(t,r,a,b,P,Z=!1,E){this._dir=t,this._element=r,this._ngZone=a,this._changeDetectorRef=b,this._animationMode=E,this._drawers=new e.n_E,this.backdropClick=new e.vpe,this._destroyed=new j.x,this._doCheckSubject=new j.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new j.x,t&&t.change.pipe((0,q.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),P.change().pipe((0,q.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=Z}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=(0,V.Ig)(t)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(t){this._backdropOverride=null==t?null:(0,V.Ig)(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,de.O)(this._allDrawers),(0,q.R)(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,de.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Ze.b)(10),(0,q.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const a=this._left._getWidth();t+=a,r-=a}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const a=this._right._getWidth();r+=a,t-=a}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe((0,W.h)(r=>r.fromState!==r.toState),(0,q.R)(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe((0,q.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe((0,q.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,ce.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe((0,q.R)((0,Ie.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const r=this._element.nativeElement.classList,a="mat-drawer-container-has-open";t?r.add(a):r.remove(a)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Oe.Is,8),e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(H.rL),e.Y36(je),e.Y36(e.QbO,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-drawer-container"]],contentQueries:function(t,r,a){if(1&t&&(e.Suo(a,X,5),e.Suo(a,ee,5)),2&t){let b;e.iGM(b=e.CRH())&&(r._content=b.first),e.iGM(b=e.CRH())&&(r._allDrawers=b)}},viewQuery:function(t,r){if(1&t&&e.Gf(X,5),2&t){let a;e.iGM(a=e.CRH())&&(r._userContent=a.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,r){2&t&&e.ekj("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[e._Bn([{provide:ue,useExisting:i}])],ngContentSelectors:Ue,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,r){1&t&&(e.F$t(qe),e.YNc(0,Ne,1,2,"div",0),e.Hsn(1),e.Hsn(2,1),e.YNc(3,Ee,2,0,"mat-drawer-content",1)),2&t&&(e.Q6J("ngIf",r.hasBackdrop),e.xp6(3),e.Q6J("ngIf",!r._content))},dependencies:[m.O5,X],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),i})(),Ye=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,re.BQ,H.ZD,H.ZD,re.BQ]}),i})();var ne=h(7392),pe=h(5802);function He(i,_){1&i&&(e.TgZ(0,"span"),e._uU(1,"*"),e.qZA())}function ze(i,_){if(1&i&&(e.TgZ(0,"span",22),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.ts.l.made_using_prompts)}}function Qe(i,_){if(1&i&&(e.TgZ(0,"div",23),e._uU(1),e._UZ(2,"i",24),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.saved," ")}}function Ge(i,_){if(1&i&&(e.TgZ(0,"div",23),e._uU(1),e._UZ(2,"i",25),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.saving," ")}}function We(i,_){1&i&&e._UZ(0,"i",26)}function Ve(i,_){1&i&&e._UZ(0,"i",27)}function Ke(i,_){1&i&&(e.TgZ(0,"span",31),e._uU(1,"speech_to_text"),e.qZA())}function $e(i,_){1&i&&(e.TgZ(0,"button",32),e._UZ(1,"i",33),e.qZA())}function Xe(i,_){1&i&&(e.TgZ(0,"div"),e._UZ(1,"div",34),e.qZA())}const et=function(i){return{disableDiv:i}};function tt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.dontToggle=!0,e.KtG(a.speakStory())}),e._uU(1),e.YNc(2,Ke,2,0,"span",29),e.YNc(3,$e,2,0,"button",30),e.YNc(4,Xe,2,0,"div",2),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(5,et,t.isTranscribing)),e.xp6(1),e.hij(" ",t.ts.l.speak," "),e.xp6(1),e.Q6J("ngIf",!t.isRecording),e.xp6(1),e.Q6J("ngIf",t.isRecording&&!t.isTranscribing),e.xp6(1),e.Q6J("ngIf",t.isTranscribing)}}function nt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.dontToggle=!0)}),e.TgZ(1,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.downloadStory())}),e._uU(2),e._UZ(3,"i",37),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.s9C("href",t.downloadStoryUrl()),e.xp6(1),e.hij(" ",t.ts.l.download," ")}}function it(i,_){1&i&&(e.TgZ(0,"span",41),e._uU(1,"1"),e.qZA())}function rt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.dontToggle=!0,e.KtG(a.getFeedback())}),e._uU(1),e._UZ(2,"i",39),e.YNc(3,it,2,0,"span",40),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.feedback," "),e.xp6(2),e.Q6J("ngIf",t.hasNewFeedback())}}function ot(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.dontToggle=!0,e.KtG(a.dictionaryVisible=!a.dictionaryVisible)}),e._uU(1),e._UZ(2,"i",42),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.dictionary," ")}}function at(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),b=e.MAs(29);return a.dontToggle=!0,a.goToSynthesis(),e.KtG(b.toggle())}),e._uU(1),e._UZ(2,"i",43),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.audio_check," ")}}function st(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.dontToggle=!0,e.KtG(a.toggleGrammarTags())}),e._uU(1),e._UZ(2,"i",44),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.toggleGrammarButton()," ")}}function ct(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return a.dontToggle=!0,e.KtG(a.goToRecording())}),e._uU(1),e._UZ(2,"i",46),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("hidden",t.story.text&&0===t.story.text.length),e.xp6(1),e.hij(" ",t.ts.l.recordings," ")}}function dt(i,_){1&i&&(e.TgZ(0,"p"),e._uU(1,"Lorem, ipsum dolor sit amet consectetur."),e.qZA())}function lt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",47)(1,"div",48,49)(3,"mat-icon",50),e.NdJ("click",function(){e.CHM(t),e.oxw();const a=e.MAs(21);return e.KtG(a.toggle())}),e._uU(4,"menu"),e.qZA(),e.TgZ(5,"quill-editor",51),e.NdJ("ngModelChange",function(a){e.CHM(t);const b=e.oxw();return e.KtG(b.story.htmlText=a)})("onContentChanged",function(a){e.CHM(t);const b=e.oxw();return e.KtG(b.onContentChanged(a))})("onEditorCreated",function(a){e.CHM(t);const b=e.oxw();return e.KtG(b.onEditorCreated(a))}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngStyle",t.quillEditorStyle),e.xp6(4),e.Q6J("modules",t.quillToolbar)("preserveWhitespace",!0)("debounceTime",1500)("ngModel",t.story.htmlText)}}function ut(i,_){1&i&&(e.TgZ(0,"p"),e._uU(1,"Lorem, ipsum dolor sit amet consectetur."),e.qZA())}function pt(i,_){1&i&&(e.TgZ(0,"p"),e._uU(1,"Drawer 3."),e.qZA())}ke().register("modules/imageCompress",Pe());let ft=(()=>{class i{constructor(t){this.ts=t,this.showFiller=!1,this.dontToggle=!1,this.showOptions=!0,this.showErrorTags=!1,this.storySaved=!0,this.quillToolbar={toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"],["image"]],imageCompress:{quality:.7,maxWidth:500,maxHeight:500,imageType:"image/png",debug:!1,suppressErrorLogging:!1,insertIntoEditor:void 0}},this.textUpdated=new j.x,this.story={text:"hello",title:"test",createdWithPrompts:!1}}ngOnInit(){}onContentChanged(t){"user"===(this.story.text=t.text,this.getWordCount(t.text),t.source)&&(this.storySaved=!1,this.textUpdated.next(t.text),this.debounceSaveStory())}onEditorCreated(t){t.history.options.userOnly=!0,this.quillEditor=t,this.quillEditor.root.setAttribute("spellcheck","false")}getWordCount(t){}debounceSaveStory(){}toggleOptions(){this.dontToggle||(this.showOptions=!this.showOptions),this.dontToggle=!1}titleStyle(){return{"font-style":this.storySaved?"normal":"italic"}}downloadStoryUrl(){}hasNewFeedback(){}toggleGrammarButton(){return this.ts.message(this.showErrorTags?"hide_grammar_suggestions":"show_grammar_suggestions")}toggleGrammarTags(){}showModal(){}selectedGrammarSuggestion(){return"test"}goToSynthesis(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-dashboard"]],decls:42,vars:19,consts:[[1,"storyTitleHeader"],["data-cy","title","contenteditable","true",1,"storyTitle",3,"ngStyle"],[4,"ngIf"],["style","color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"saveIcon"],["class","savedIcon",4,"ngIf"],[1,"optionsBtnContainer",3,"click"],[1,"optionsBtn"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-right",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"ngClass","click",4,"ngIf"],["style","display: flex",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"hidden","click",4,"ngIf"],["autosize","",1,"bodyContainer"],["mode","side",1,"storyListDrawer"],["drawer",""],["mat-raised-button","",3,"click"],["class","storyContainer",4,"ngIf"],["mode","side","position","end",1,"storyListDrawer"],["drawer2",""],["drawer3",""],[2,"color","rgba(0, 0, 0, 0.4)"],[1,"savedIcon"],[1,"fas","fa-check"],[1,"fas","fa-save"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-right"],[1,"optionsBtn","optionsPopupBtn",3,"ngClass","click"],["class","material-symbols-outlined optionsBtnIcon",4,"ngIf"],["class","notRecordingBtn blink",4,"ngIf"],[1,"material-symbols-outlined","optionsBtnIcon"],[1,"notRecordingBtn","blink"],[1,"fas","fa-stop-circle"],[1,"dot-flashing"],[2,"display","flex",3,"click"],["target","_blank",1,"optionsBtn","optionsPopupBtn",2,"text-decoration","none",3,"href","click"],[1,"fas","fa-download","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"click"],[1,"fas","fa-comment-dots","optionsBtnIcon"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"],[1,"fas","fa-book","optionsBtnIcon"],[1,"fas","fa-volume-up","optionsBtnIcon"],[1,"fas","fa-spell-check","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"hidden","click"],[1,"fas","fa-microphone","optionsBtnIcon"],[1,"storyContainer"],[1,"ql-container",3,"ngStyle"],["quillHeightSpan",""],[1,"menuButton",3,"click"],["placeholder","",3,"modules","preserveWhitespace","debounceTime","ngModel","ngModelChange","onContentChanged","onEditorCreated"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.YNc(3,He,2,0,"span",2),e.YNc(4,ze,2,1,"span",3),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,Qe,3,1,"div",5),e.YNc(7,Ge,3,1,"div",5),e.qZA()(),e.TgZ(8,"div",6),e.NdJ("click",function(){return r.toggleOptions()}),e.TgZ(9,"div",7),e.YNc(10,We,1,0,"i",8),e.YNc(11,Ve,1,0,"i",9),e.qZA(),e.YNc(12,tt,5,7,"div",10),e.YNc(13,nt,4,2,"div",11),e.YNc(14,rt,4,2,"div",12),e.YNc(15,ot,3,1,"div",12),e.YNc(16,at,3,1,"div",12),e.YNc(17,st,3,1,"div",12),e.YNc(18,ct,3,2,"div",13),e.qZA(),e.TgZ(19,"mat-drawer-container",14)(20,"mat-drawer",15,16)(22,"p"),e._uU(23,"Auto-resizing sidenav"),e.qZA(),e.YNc(24,dt,2,0,"p",2),e.TgZ(25,"button",17),e.NdJ("click",function(){return r.showFiller=!r.showFiller}),e._uU(26," Toggle extra text "),e.qZA()(),e.YNc(27,lt,6,5,"div",18),e.TgZ(28,"mat-drawer",19,20)(30,"p"),e._uU(31,"Drwaer sdfasdfas2"),e.qZA(),e.YNc(32,ut,2,0,"p",2),e.TgZ(33,"button",17),e.NdJ("click",function(){return r.showFiller=!r.showFiller}),e._uU(34," Toggle extra text "),e.qZA()(),e.TgZ(35,"mat-drawer",19,21)(37,"p"),e._uU(38,"ADrawer 3"),e.qZA(),e.YNc(39,pt,2,0,"p",2),e.TgZ(40,"button",17),e.NdJ("click",function(){return r.showFiller=!r.showFiller}),e._uU(41," Toggle extra text "),e.qZA()()()),2&t){let a;e.xp6(1),e.Q6J("ngStyle",r.titleStyle()),e.xp6(1),e.hij(" ",null!==(a=null==r.story?null:r.story.title)&&void 0!==a?a:"..."," "),e.xp6(1),e.Q6J("ngIf",!r.storySaved),e.xp6(1),e.Q6J("ngIf",r.story.createdWithPrompts),e.xp6(2),e.Q6J("ngIf",r.storySaved),e.xp6(1),e.Q6J("ngIf",!r.storySaved),e.xp6(3),e.Q6J("ngIf",!r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(6),e.Q6J("ngIf",r.showFiller),e.xp6(3),e.Q6J("ngIf",r.story),e.xp6(5),e.Q6J("ngIf",r.showFiller),e.xp6(7),e.Q6J("ngIf",r.showFiller)}},dependencies:[m.mk,m.O5,m.PC,R.JJ,R.On,ee,te,ne.Hw,pe.g6],styles:[".storyTitleHeader{display:flex;justify-content:center;margin-top:-30px;padding-bottom:20px}.storyTitle{margin:auto;overflow:auto;font-size:20px;font-weight:bolder;padding-left:20px;padding-right:20px}.saveIcon{align-self:flex-end;white-space:nowrap;color:var(--dark-text);border-style:none;font-size:11pt;padding:5px}.savedIcon{color:var(--scealai-light-brown)}.optionsBtnContainer>*{height:2rem}.optionsBtnContainer{display:flex;justify-content:space-between;flex-wrap:wrap;--options-btn-background-color-hover: lightgray;margin-left:2%;margin-right:2%}.optionsBtn{background-color:var(--scealai-yellow);border-style:none;color:#464444;margin:0;border-radius:2px;display:flex;align-items:center;padding:5px;background:rgba(223,217,200,0)}.optionsBtn:hover{background-color:var(--options-btn-background-color-hover);color:#35322f;cursor:pointer;border-radius:2}.optionsPopupBtn{margin-right:4px}.optionsBtnIcon{margin-left:5px}.notRecordingBtn{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.bodyContainer{width:100%;height:100%;border:1px solid rgba(0,0,0,.5)}.storyListDrawer{padding:50px}.storyContainer{height:100%}.ql-container{background-color:#f8f9fa;height:100%}.menuButton{float:left;padding-left:10px;padding-top:5px;transform:scale(2);z-index:100}.menuButton:hover{cursor:pointer}.ql-editor{background-color:#fff;z-index:1;margin-top:20px;font-size:14pt;font-family:Times New Roman,Times,serif;min-height:70vh!important;max-height:70vh!important}.blink{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}\n",".custom-tooltip:before{content:none!important}[data-selected]{margin:.3em}[highlight-tag-type]{border-radius:3px}span[highlight-tag-type]:hover{cursor:pointer}span:not[highlight-tag-type]{border-radius:0;padding-left:0;padding-right:0}[highlight-tag-type=LEATHAN-CAOL]{border:1px solid gray;border-radius:0!important;padding-left:0!important;padding-right:0!important}\n",'.ql-editor{overflow-y:auto}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=times-new-roman]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=times-new-roman]:before{content:"Times New Roman";font-family:Times New Roman}.ql-font-times-new-roman{font-family:times new roman}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=arial]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=arial]:before{content:"Arial";font-family:arial}.ql-font-arial{font-family:arial}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=sans-serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=sans-serif]:before{content:"Sans Serif";font-family:"sans serif"}.ql-font-sans-serif{font-family:"sans serif"}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{content:"Monospace";font-family:"monospace"}.ql-font-monospace{font-family:"monospace"}\n'],encapsulation:2}),i})();var J=h(9742),fe=h(1481);let he=(()=>{class i{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustHtml(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(fe.H7,16))},i.\u0275pipe=e.Yjl({name:"safeHtml",type:i,pure:!0}),i})();function ht(i,_){if(1&i&&(e.TgZ(0,"div",14)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.ts.l.synthesising)}}function gt(i,_){1&i&&(e._UZ(0,"span",18),e.ALo(1,"safeHtml")),2&i&&e.Q6J("innerHTML",e.lcZ(1,1,_.$implicit.outerHTML),e.oJD)}function _t(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,b=e.oxw(2);return e.KtG(b.stopSection(a))}),e._UZ(1,"i",20),e.qZA()}}function mt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,b=e.oxw(2);return e.KtG(b.playSection(a))}),e._UZ(1,"i",21),e.qZA()}}function vt(i,_){if(1&i&&(e.TgZ(0,"div",2),e.YNc(1,gt,2,3,"span",16),e.YNc(2,_t,2,0,"button",17),e.YNc(3,mt,2,0,"button",17),e.qZA()),2&i){const t=_.$implicit;e.xp6(1),e.Q6J("ngForOf",t.spans),e.xp6(1),e.Q6J("ngIf",!t.audio.paused),e.xp6(1),e.Q6J("ngIf",t.audio.paused)}}function bt(i,_){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,vt,4,3,"div",15),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.chosenSections)}}function xt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",24),e._uU(2),e.qZA(),e.TgZ(3,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeSections(a.sentences))}),e._uU(4),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.paragraph),e.xp6(2),e.Oqu(t.ts.l.sentence)}}function wt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeSections(a.paragraphs))}),e._uU(2),e.qZA(),e.TgZ(3,"button",24),e._uU(4),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.paragraph),e.xp6(2),e.Oqu(t.ts.l.sentence)}}function yt(i,_){if(1&i&&(e.TgZ(0,"div",22)(1,"div",23),e._uU(2),e.qZA(),e.YNc(3,xt,5,2,"div",11),e.YNc(4,wt,5,2,"div",11),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.listen_by," "),e.xp6(1),e.Q6J("ngIf",t.isParagraphMode()),e.xp6(1),e.Q6J("ngIf",t.isSentenceMode())}}let Ct=(()=>{class i{constructor(t,r,a,b,P){this.storyService=t,this.route=r,this.router=a,this.ts=b,this.synthesis=P,this.paragraphs=[],this.sentences=[],this.audioFinishedLoading=!1}ngOnInit(){var t=this;return(0,u.Z)(function*(){t.storyId=t.route.snapshot.paramMap.get("id");let r=yield(0,B.z)(t.storyService.getStory(t.storyId));t.synthesis.synthesiseStory(r).then(([a,b])=>{t.paragraphs=a,t.sentences=b,t.chosenSections=t.paragraphs,t.audioFinishedLoading=!0})})()}isSentenceMode(){return this.chosenSections[0]instanceof J.cj}isParagraphMode(){return this.chosenSections[0]instanceof J.nv}changeSections(t){this.chosenSections=t,this.paragraphs.concat(this.sentences).forEach(a=>this.stopSection(a))}playSection(t){t.play(),t.highlight()}stopSection(t){t.stop(),t.removeHighlight()}goToDashboard(){this.router.navigateByUrl("/student/dashboard/"+this.storyId)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.N),e.Y36(d.gz),e.Y36(d.F0),e.Y36(v.D),e.Y36(J.cf))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-synthesis"]],decls:18,vars:5,consts:[["src","assets/img/book.png",1,"bookImg"],[1,"page"],[1,"paragraphContainer"],[1,"bookContainerSynth"],[1,"bookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"storyContainer"],[1,"storyHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[4,"ngIf"],[1,"footer"],["class","btnContainer",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"btnContainer"],[1,"footerText"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"]],template:function(t,r){1&t&&(e._UZ(0,"img",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5),e.NdJ("click",function(){return r.goToDashboard()}),e._UZ(6,"i",6),e._uU(7),e.qZA(),e._UZ(8,"div"),e.qZA(),e.TgZ(9,"div",7)(10,"div",8),e._uU(11),e.qZA(),e.TgZ(12,"div")(13,"div",9),e.YNc(14,ht,4,1,"div",10),e.YNc(15,bt,2,1,"div",11),e.qZA(),e.TgZ(16,"div",12),e.YNc(17,yt,5,3,"div",13),e.qZA()()()()()),2&t&&(e.xp6(7),e.hij(" ",r.ts.l.story,""),e.xp6(4),e.hij(" ",r.ts.l.listen_and_correct," "),e.xp6(3),e.Q6J("ngIf",!r.audioFinishedLoading),e.xp6(1),e.Q6J("ngIf",r.audioFinishedLoading),e.xp6(2),e.Q6J("ngIf",r.audioFinishedLoading))},dependencies:[m.sg,m.O5,G.P,he],styles:['.bookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:var(--dark-text);width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.storyContainer[_ngcontent-%COMP%]{margin-top:10px}.storyHeader[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]:hover, .selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),i})();class Mt{constructor(_,t=[],r=[],a=[],b=[],P=[],Z=[]){this.paragraphAudioIds=t,this.paragraphIndices=r,this.paragraphTranscriptions=a,this.sentenceAudioIds=b,this.sentenceIndices=P,this.sentenceTranscriptions=Z,this.storyData=_,this.date=new Date,this.archived=!1}}var St=h(2754);function Tt(i,_){1&i&&(e.TgZ(0,"span"),e._uU(1,"*"),e.qZA())}function kt(i,_){if(1&i&&(e.TgZ(0,"div",16),e._uU(1),e._UZ(2,"i",17),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.ts.l.saved," ")}}function At(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.saveRecordings())}),e._uU(1),e._UZ(2,"i",19),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.ts.l.save," ")}}function Pt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.goToDashboard())}),e._UZ(2,"i",10),e._uU(3),e.qZA(),e.TgZ(4,"div",11),e._uU(5),e.YNc(6,Tt,2,0,"span",12),e.qZA(),e.TgZ(7,"div",13),e.YNc(8,kt,3,1,"div",14),e.YNc(9,At,3,1,"div",15),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.ts.l.story," "),e.xp6(2),e.hij(" ",null==t.story?null:t.story.title,""),e.xp6(1),e.Q6J("ngIf",!t.recordingSaved),e.xp6(2),e.Q6J("ngIf",t.recordingSaved),e.xp6(1),e.Q6J("ngIf",!t.recordingSaved)}}function Ot(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div",20),e.NdJ("click",function(){e.CHM(t),e.oxw();const a=e.MAs(5);return e.KtG(a.toggle())}),e.TgZ(1,"mat-icon"),e._uU(2,"menu"),e.qZA(),e._uU(3),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",t.ts.l.archive," ")}}const Bt=function(i){return{"font-style":i}};function Ft(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",21),e.NdJ("click",function(){const b=e.CHM(t).$implicit,P=e.oxw();return e.KtG(P.setCurrentRecording(b))}),e.TgZ(2,"div",22)(3,"div",23),e._uU(4),e.qZA()(),e.TgZ(5,"div",24),e._uU(6),e.ALo(7,"date"),e.qZA()(),e._UZ(8,"hr"),e.qZA()}if(2&i){const t=_.$implicit;e.xp6(1),e.uIk("id",t._id),e.xp6(2),e.Q6J("ngStyle",e.VKq(7,Bt,t.archived?"none":"italic")),e.xp6(1),e.hij(" ",null==t||null==t.storyData?null:t.storyData.title,""),e.xp6(2),e.hij(" ",e.xi3(7,4,t.date,"d/M/yy, h:mm a")," ")}}function It(i,_){if(1&i&&(e.TgZ(0,"div",30)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.synthesising)}}function Rt(i,_){1&i&&(e._UZ(0,"span",42),e.ALo(1,"safeHtml")),2&i&&e.Q6J("innerHTML",e.lcZ(1,1,_.$implicit.outerHTML),e.oJD)}function Zt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,b=e.oxw(3);return e.KtG(b.stopSection(a))}),e._UZ(1,"i",44),e.qZA()}}function Dt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,b=e.oxw(3);return e.KtG(b.playSection(a))}),e._UZ(1,"i",45),e.qZA()}}function Nt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,b=e.oxw(3);return e.KtG(b.recordAudio(a))}),e._UZ(1,"i",47),e.qZA()}}function Et(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,b=e.oxw(3);return e.KtG(b.stopRecording(a))}),e._UZ(1,"i",49),e.qZA()}}function qt(i,_){1&i&&e._UZ(0,"hr",50)}function Ut(i,_){1&i&&(e.TgZ(0,"div",51),e._UZ(1,"div",52),e.qZA())}function Lt(i,_){if(1&i&&(e.TgZ(0,"div",53)(1,"span",54),e._uU(2),e.qZA(),e.TgZ(3,"span",55),e._uU(4),e.qZA()()),2&i){const t=e.oxw().index,r=e.oxw(3);e.xp6(2),e.hij("",r.ts.l.speech_recognition_output," "),e.xp6(2),e.Oqu(r.sectionTranscriptions[t])}}function jt(i,_){if(1&i&&e._UZ(0,"audio",59,60),2&i){const t=e.oxw(2).index,r=e.oxw(3);e.uIk("src",r.sectionAudioSources[t],e.LSH)}}function Jt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).index,b=e.oxw(3);return e.KtG(b.deleteRecording(a))}),e._UZ(1,"i",62),e.qZA()}}function Yt(i,_){if(1&i&&(e.TgZ(0,"div",56)(1,"div",54),e._uU(2),e.qZA(),e.YNc(3,jt,2,1,"audio",57),e.YNc(4,Jt,2,0,"button",58),e.qZA()),2&i){const t=e.oxw().index,r=e.oxw(3);e.xp6(2),e.Oqu(r.ts.l.your_recording),e.xp6(1),e.Q6J("ngIf",r.sectionAudioSources[t]),e.xp6(1),e.Q6J("ngIf",r.sectionAudioSources[t]&&!r.currentRecording.archived)}}function Ht(i,_){if(1&i&&(e.TgZ(0,"div",32)(1,"div",33)(2,"div"),e.YNc(3,Rt,2,3,"span",34),e.YNc(4,Zt,2,0,"button",35),e.YNc(5,Dt,2,0,"button",35),e.YNc(6,Nt,2,0,"button",36),e.YNc(7,Et,2,0,"button",37),e.qZA(),e.YNc(8,qt,1,0,"hr",38),e.YNc(9,Ut,2,0,"div",39),e.YNc(10,Lt,5,2,"div",40),e.YNc(11,Yt,5,3,"div",41),e.qZA()()),2&i){const t=_.$implicit,r=_.index,a=e.oxw(3);e.xp6(3),e.Q6J("ngForOf",t.spans),e.xp6(1),e.Q6J("ngIf",!t.audio.paused),e.xp6(1),e.Q6J("ngIf",t.audio.paused),e.xp6(1),e.Q6J("ngIf",!a.isRecording(t,r)&&!a.currentRecording.archived),e.xp6(1),e.Q6J("ngIf",a.isRecording(t,r)&&!a.currentRecording.archived),e.xp6(1),e.Q6J("ngIf",a.sectionAudioSources[r]),e.xp6(1),e.Q6J("ngIf",a.isTranscribing[r]),e.xp6(1),e.Q6J("ngIf",a.sectionTranscriptions[r]),e.xp6(1),e.Q6J("ngIf",a.sectionAudioSources[r])}}function zt(i,_){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ht,12,9,"div",31),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.chosenSections)}}function Qt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",67),e._uU(2),e.qZA(),e.TgZ(3,"button",68),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changeSections(a.sentences))}),e._uU(4),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.ts.l.paragraph," "),e.xp6(2),e.hij(" ",t.ts.l.sentence," ")}}function Gt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",68),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changeSections(a.paragraphs))}),e._uU(2),e.qZA(),e.TgZ(3,"button",67),e._uU(4),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.ts.l.paragraph," "),e.xp6(2),e.hij(" ",t.ts.l.sentence," ")}}function Wt(i,_){if(1&i){const t=e.EpF();e.TgZ(0,"button",69),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.archiveRecording())}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.ts.l.archive_recording," ")}}function Vt(i,_){if(1&i&&(e.TgZ(0,"div",63)(1,"div",64)(2,"div",65),e._uU(3),e.qZA(),e.YNc(4,Qt,5,2,"div",12),e.YNc(5,Gt,5,2,"div",12),e.YNc(6,Wt,2,1,"button",66),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.ts.l.listen_by," "),e.xp6(1),e.Q6J("ngIf",t.isParagraphMode()),e.xp6(1),e.Q6J("ngIf",t.isSentenceMode()),e.xp6(1),e.Q6J("ngIf",!t.currentRecording.archived&&t.currentRecording.storyData.text!=t.story.text)}}function Kt(i,_){if(1&i&&(e.TgZ(0,"div",25)(1,"div",26),e._uU(2),e.qZA(),e.TgZ(3,"div",27),e.YNc(4,It,4,1,"div",28),e.YNc(5,zt,2,1,"div",12),e.qZA(),e.YNc(6,Vt,7,4,"div",29),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.listen_record_compare," "),e.xp6(2),e.Q6J("ngIf",!t.audioFinishedLoading&&!t.recordingsFinishedLoading),e.xp6(1),e.Q6J("ngIf",t.audioFinishedLoading),e.xp6(1),e.Q6J("ngIf",t.audioFinishedLoading)}}const Xt=[{path:"",pathMatch:"full",redirectTo:"contents"},{path:"contents",component:Se,canActivate:[s.P]},{path:"dashboard/:id",component:ft,canActivate:[s.P],canDeactivate:[o]},{path:"synthesis/:id",component:Ct,canActivate:[s.P],canDeactivate:[p]},{path:"record-story/:id",component:(()=>{class i{constructor(t,r,a,b,P,Z,E,Y,A){this.storyService=t,this.ts=r,this.sanitizer=a,this.route=b,this.router=P,this.recordingService=Z,this.synthesis=E,this.engagement=Y,this.dialog=A,this.story=new l,this.paragraphs=[],this.sentences=[],this.isRecordingParagraph=[],this.isRecordingSentence=[],this.isRecordingSection=[],this.paragraphAudioSources=[],this.sentenceAudioSources=[],this.sectionAudioSources=[],this.paragraphBlobs=[],this.sentenceBlobs=[],this.sectionBlobs=[],this.paragraphChunks=[],this.sentenceChunks=[],this.sectionChunks=[],this.recordingSaved=!0,this.audioFinishedLoading=!1,this.url_ASR_API="https://phoneticsrv3.lcs.tcd.ie/asr_api/recognise",this.sentenceTranscriptions=[],this.paragraphTranscriptions=[],this.sectionTranscriptions=[],this.isTranscribing=[!1],this.recordings=[],this.currentRecording=null,this.lastClickedRecordingId=""}ngOnInit(){var t=this;return(0,u.Z)(function*(){t.chunks=[],t.sectionAudioSources=t.paragraphAudioSources,t.sectionBlobs=t.paragraphBlobs,t.sectionChunks=t.paragraphChunks,t.sectionTranscriptions=t.paragraphTranscriptions,t.isRecordingSection=t.isRecordingParagraph;const r=t.route.snapshot.paramMap.get("id");t.story=yield(0,B.z)(t.storyService.getStory(r)),(0,St.TD)({audio:!0,video:!1}).then((0,u.Z)(function*(){t.story.activeRecording?t.loadRecordings():t.createNewRecording()})).catch(a=>{t.openMicRequestDialog()})})()}loadRecordings(){var t=this;return(0,u.Z)(function*(){t.recordings=yield(0,B.z)(t.recordingService.getRecordings(t.story._id)),t.recordings.sort((a,b)=>a.date>b.date?-1:1);let r=t.recordings.filter(a=>!1===a.archived);t.setCurrentRecording(r[0])})()}setCurrentRecording(t){this.currentRecording=t,this.loadSynthesis(this.currentRecording.storyData),this.loadAudio(this.currentRecording);let r=this.currentRecording._id,a=document.getElementById(r);a&&(this.lastClickedRecordingId&&document.getElementById(this.lastClickedRecordingId).classList.remove("clickedresultCard"),this.lastClickedRecordingId=r,a.classList.add("clickedresultCard"))}createNewRecording(){var t=this;return(0,u.Z)(function*(){const r=yield(0,B.z)(t.recordingService.create(new Mt(t.story)));t.story=yield(0,B.z)(t.storyService.updateActiveRecording(t.story._id,r._id)),t.loadRecordings()})()}archiveRecording(){var t=this;return(0,u.Z)(function*(){yield(0,B.z)(t.recordingService.updateArchiveStatus(t.currentRecording._id)),t.createNewRecording()})()}loadSynthesis(t){this.synthesis.synthesiseStory(t).then(([r,a])=>{this.paragraphs=r,this.sentences=a,this.chosenSections=this.paragraphs,this.audioFinishedLoading=!0})}loadAudio(t){var r=this;return(0,u.Z)(function*(){r.audioFinishedLoading=!1,r.paragraphAudioSources=[],r.paragraphTranscriptions=[],r.sentenceAudioSources=[],r.sentenceTranscriptions=[],r.sectionAudioSources=[],r.sectionTranscriptions=[];for(let a=0;a<t.paragraphIndices.length;++a){let b=yield(0,B.z)(r.recordingService.getAudio(t.paragraphAudioIds[a]));r.paragraphBlobs[a]=b,r.paragraphAudioSources[t.paragraphIndices[a]]=r.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(b)),r.paragraphTranscriptions[t.paragraphIndices[a]]=t.paragraphTranscriptions[t.paragraphIndices[a]]}for(let a=0;a<t.sentenceIndices.length;++a){let b=yield(0,B.z)(r.recordingService.getAudio(t.sentenceAudioIds[a]));r.sentenceBlobs[a]=b,r.sentenceAudioSources[t.sentenceIndices[a]]=r.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(b)),r.sentenceTranscriptions[t.sentenceIndices[a]]=t.sentenceTranscriptions[t.sentenceIndices[a]]}r.sectionTranscriptions=r.paragraphTranscriptions,r.sectionAudioSources=r.paragraphAudioSources})()}recordAudio(t){this.engagement.addEventForLoggedInUser(y.tw["RECORD-STORY"],this.story),navigator.mediaDevices.getUserMedia({audio:!0}).then(a=>{this.stream=a,this.recorder=new MediaRecorder(this.stream),this.sectionChunks[t]=[],this.recorder.start(),this.isRecordingSection[t]=!0,this.recorder.ondataavailable=b=>{this.sectionChunks[t].push(b.data)}}).catch()}stopRecording(t){this.recorder.stop(),this.isRecordingSection[t]=!1,this.stream.getTracks().forEach(r=>r.stop()),setTimeout(()=>{const r=new Blob(this.sectionChunks[t],{type:"audio/mp3"});this.sectionBlobs[t]=r,this.sectionAudioSources[t]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(r)),this.recordingSaved=!1;const a=new FileReader;a.readAsDataURL(r),a.onloadend=function(){let b=a.result.split(";base64,")[1];this.getTranscription(b,t)}.bind(this)},500)}getTranscription(t,r){this.isTranscribing[r]=!0,this.isParagraphMode()&&(this.paragraphTranscriptions[r]=null),this.isSentenceMode()&&(this.sentenceTranscriptions[r]=null),fetch(this.url_ASR_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({recogniseBlob:t,developer:!0})}).then(b=>b.json()).then(b=>{let P=b.transcriptions[0].utterance;this.isParagraphMode()?(this.paragraphTranscriptions[r]=P,this.sectionTranscriptions[r]=this.paragraphTranscriptions[r]):this.isSentenceMode()&&(this.sentenceTranscriptions[r]=P,this.sectionTranscriptions[r]=this.sentenceTranscriptions[r]),this.isTranscribing[r]=!1})}deleteRecording(t){this.recordingSaved=!1,delete this.sectionAudioSources[t],delete this.sectionChunks[t],delete this.sectionBlobs[t],delete this.sectionTranscriptions[t]}saveRecordings(){var t=this;return(0,u.Z)(function*(){const r=Object.entries(t.paragraphBlobs).map(function(){var D=(0,u.Z)(function*([K,ie]){return t.recordingService.saveAudio(t.story._id,ie,K).toPromise()});return function(K){return D.apply(this,arguments)}}()),a=Object.entries(t.sentenceBlobs).map(function(){var D=(0,u.Z)(function*([K,ie]){return t.recordingService.saveAudio(t.story._id,ie,K).toPromise()});return function(K){return D.apply(this,arguments)}}()),b=yield Promise.all(r),P=yield Promise.all(a);let Z=[],E=[];for(const D of b)Z.push(D.index),E.push(D.fileId);let Y=[],A=[];for(const D of P)Y.push(D.index),A.push(D.fileId);const L={paragraphAudioIds:E,paragraphIndices:Z,paragraphTranscriptions:t.paragraphTranscriptions,sentenceIndices:Y,sentenceAudioIds:A,sentenceTranscriptions:t.sentenceTranscriptions};let z=yield(0,B.z)(t.recordingService.update(t.story.activeRecording,L));if(z){t.recordingSaved=!0;const D=t.recordings.indexOf(t.currentRecording);t.recordings.splice(D,1,z)}else alert("Error while saving audio")})()}isRecording(t,r){return t instanceof J.cj?this.isRecordingSentence[r]:t instanceof J.nv?this.isRecordingParagraph[r]:void 0}isSentenceMode(){return this.chosenSections[0]instanceof J.cj}isParagraphMode(){return this.chosenSections[0]instanceof J.nv}changeSections(t){this.chosenSections=t,this.paragraphs.concat(this.sentences).forEach(a=>this.stopSection(a)),this.isSentenceMode()?(this.sectionAudioSources=this.sentenceAudioSources,this.sectionBlobs=this.sentenceBlobs,this.sectionChunks=this.sentenceChunks,this.sectionTranscriptions=this.sentenceTranscriptions,this.isRecordingSection=this.isRecordingSentence):this.isParagraphMode()&&(this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.sectionTranscriptions=this.paragraphTranscriptions,this.isRecordingSection=this.isRecordingParagraph)}playSection(t){t.play(),t.highlight()}stopSection(t){t.stop(),t.removeHighlight()}goToDashboard(){this.router.navigateByUrl("student/dashboard/"+this.story._id)}openMicRequestDialog(){var t=this;this.dialogRef=this.dialog.open(g.p,{data:{title:this.ts.l.microphone_blocked,message:this.ts.l.page_requires_microphone,confirmText:this.ts.l.refresh,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var r=(0,u.Z)(function*(a){t.dialogRef=void 0,console.log(a),a?t.ngOnInit():t.goToDashboard()});return function(a){return r.apply(this,arguments)}}())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.N),e.Y36(v.D),e.Y36(fe.H7),e.Y36(d.gz),e.Y36(d.F0),e.Y36(I.s),e.Y36(J.cf),e.Y36(T.M),e.Y36(n.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recording"]],decls:8,vars:4,consts:[[1,"content"],["class","recordingBookHeader",4,"ngIf"],["class","archiveButton",3,"click",4,"ngIf"],["autosize","",1,"archiveNavContainer"],["mode","side",1,"sidenav"],["drawer",""],[4,"ngFor","ngForOf"],["class","recordingStoryContainer",4,"ngIf"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"archiveButton",3,"click"],[1,"contentSection",3,"click"],[1,"contentsLink"],[3,"ngStyle"],[1,"contentsDate"],[1,"recordingStoryContainer"],[1,"recordingStoryHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],["class","footer","style","padding-top: 10px",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],["class","recordingBtn",3,"click",4,"ngIf"],["class","notRecordingBtn blink",3,"click",4,"ngIf"],["class","dividerLine",4,"ngIf"],["class","recognisedSpeechContainer",4,"ngIf"],["style","height: 40px",4,"ngIf"],["class","audioContainer",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"recordingBtn",3,"click"],[1,"fas","fa-microphone"],[1,"notRecordingBtn","blink",3,"click"],[1,"fas","fa-stop-circle"],[1,"dividerLine"],[1,"recognisedSpeechContainer"],[1,"dot-flashing"],[2,"height","40px"],[2,"opacity","0.5"],[1,"recognisedSpeech"],[1,"audioContainer"],["controls","","class","audioPlayer",4,"ngIf"],["class","notRecordingBtn trashBtn",3,"click",4,"ngIf"],["controls","",1,"audioPlayer"],["audioTag",""],[1,"notRecordingBtn","trashBtn",3,"click"],[1,"fas","fa-trash-alt"],[1,"footer",2,"padding-top","10px"],[1,"btnContainer"],[1,"footerText"],["class","changeSplitBtn","style","margin-left: auto",3,"click",4,"ngIf"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"],[1,"changeSplitBtn",2,"margin-left","auto",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Pt,10,5,"div",1),e.YNc(2,Ot,4,1,"div",2),e.TgZ(3,"mat-drawer-container",3)(4,"mat-drawer",4,5),e.YNc(6,Ft,9,9,"div",6),e.qZA(),e.YNc(7,Kt,7,4,"div",7),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf",r.story),e.xp6(1),e.Q6J("ngIf",r.recordings.length>0),e.xp6(4),e.Q6J("ngForOf",r.recordings),e.xp6(1),e.Q6J("ngIf",r.story))},dependencies:[m.sg,m.O5,m.PC,G.P,ee,te,ne.Hw,m.uU,he],styles:['.content[_ngcontent-%COMP%]{width:90%;margin-left:5%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.archiveNavContainer[_ngcontent-%COMP%]{height:70vh;background-color:#fff}.sidenav[_ngcontent-%COMP%]{padding:20px;width:20vw}.archiveButton[_ngcontent-%COMP%]{display:flex;margin-left:10px;margin-top:20px;font-size:16px}.archiveButton[_ngcontent-%COMP%]:hover, .contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:20px;height:80%}.textContainerSynth[_ngcontent-%COMP%]{box-shadow:0 0 11px 2px #0006;margin-left:5%;width:90%;color:var(--dark-text);background-color:#f8f9fa;text-align:left;overflow:auto;height:100%}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{white-space:nowrap;display:inline;border-style:none;color:var(--dark-text);width:10rem;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.bookTitle[_ngcontent-%COMP%]{overflow:auto;color:var(--dark-text);margin-left:2em;margin-right:2em;display:inline-block;font-size:16pt}.recordingSaveIcon[_ngcontent-%COMP%]{width:10rem;color:var(--dark-text);border-style:none;font-size:11pt;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{white-space:nowrap;color:var(--scealai-light-brown)}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);cursor:pointer;transition:.5s}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:10px;font-weight:700;border-radius:10px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.recordingBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px;float:right}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.recognisedSpeech[_ngcontent-%COMP%]{color:var(--scealai-green);font-style:italic;padding-left:5px}.audioContainer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.audioPlayer[_ngcontent-%COMP%]{width:25%;height:35px}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}.selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}.blink[_ngcontent-%COMP%]{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),i})(),canActivate:[s.P],canDeactivate:[w]}];let en=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(Xt),d.Bz]}),i})();var tn=h(3869),nn=h(4385);let rn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,en,nn.LD,R.u5,tn.F,Ye,ne.Ps,pe.fi.forRoot({customOptions:[{import:"formats/font",whitelist:["sans-serif","serif","monospace","arial","times-new-roman"]}]})]}),i})()},7230:function(Q){Q.exports=function(S){var h={};function m(d){if(h[d])return h[d].exports;var s=h[d]={i:d,l:!1,exports:{}};return S[d].call(s.exports,s,s.exports,m),s.l=!0,s.exports}return m.m=S,m.c=h,m.d=function(d,s,g){m.o(d,s)||Object.defineProperty(d,s,{enumerable:!0,get:g})},m.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},m.t=function(d,s){if(1&s&&(d=m(d)),8&s||4&s&&"object"==typeof d&&d&&d.__esModule)return d;var g=Object.create(null);if(m.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:d}),2&s&&"string"!=typeof d)for(var v in d)m.d(g,v,function(e){return d[e]}.bind(null,v));return g},m.n=function(d){var s=d&&d.__esModule?function(){return d.default}:function(){return d};return m.d(s,"a",s),s},m.o=function(d,s){return Object.prototype.hasOwnProperty.call(d,s)},m.p="",m(m.s=90)}({17:function(S,h,m){"use strict";h.__esModule=!0,h.default=void 0;var d=m(18),s=function(){function g(){}return g.getFirstMatch=function(v,e){var n=e.match(v);return n&&n.length>0&&n[1]||""},g.getSecondMatch=function(v,e){var n=e.match(v);return n&&n.length>1&&n[2]||""},g.matchAndReturnConst=function(v,e,n){if(v.test(e))return n},g.getWindowsVersionName=function(v){switch(v){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},g.getMacOSVersionName=function(v){var e=v.split(".").splice(0,2).map(function(n){return parseInt(n,10)||0});if(e.push(0),10===e[0])switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},g.getAndroidVersionName=function(v){var e=v.split(".").splice(0,2).map(function(n){return parseInt(n,10)||0});if(e.push(0),!(1===e[0]&&e[1]<5))return 1===e[0]&&e[1]<6?"Cupcake":1===e[0]&&e[1]>=6?"Donut":2===e[0]&&e[1]<2?"Eclair":2===e[0]&&2===e[1]?"Froyo":2===e[0]&&e[1]>2?"Gingerbread":3===e[0]?"Honeycomb":4===e[0]&&e[1]<1?"Ice Cream Sandwich":4===e[0]&&e[1]<4?"Jelly Bean":4===e[0]&&e[1]>=4?"KitKat":5===e[0]?"Lollipop":6===e[0]?"Marshmallow":7===e[0]?"Nougat":8===e[0]?"Oreo":9===e[0]?"Pie":void 0},g.getVersionPrecision=function(v){return v.split(".").length},g.compareVersions=function(v,e,n){void 0===n&&(n=!1);var o=g.getVersionPrecision(v),w=g.getVersionPrecision(e),p=Math.max(o,w),u=0,f=g.map([v,e],function(l){var c=p-g.getVersionPrecision(l),x=l+new Array(c+1).join(".0");return g.map(x.split("."),function(y){return new Array(20-y.length).join("0")+y}).reverse()});for(n&&(u=p-Math.min(o,w)),p-=1;p>=u;){if(f[0][p]>f[1][p])return 1;if(f[0][p]===f[1][p]){if(p===u)return 0;p-=1}else if(f[0][p]<f[1][p])return-1}},g.map=function(v,e){var n,o=[];if(Array.prototype.map)return Array.prototype.map.call(v,e);for(n=0;n<v.length;n+=1)o.push(e(v[n]));return o},g.find=function(v,e){var n,o;if(Array.prototype.find)return Array.prototype.find.call(v,e);for(n=0,o=v.length;n<o;n+=1){var w=v[n];if(e(w,n))return w}},g.assign=function(v){for(var e,n,o=v,w=arguments.length,p=new Array(w>1?w-1:0),u=1;u<w;u++)p[u-1]=arguments[u];if(Object.assign)return Object.assign.apply(Object,[v].concat(p));var f=function(){var l=p[e];"object"==typeof l&&null!==l&&Object.keys(l).forEach(function(c){o[c]=l[c]})};for(e=0,n=p.length;e<n;e+=1)f();return v},g.getBrowserAlias=function(v){return d.BROWSER_ALIASES_MAP[v]},g.getBrowserTypeByAlias=function(v){return d.BROWSER_MAP[v]||""},g}();h.default=s,S.exports=h.default},18:function(S,h,m){"use strict";h.__esModule=!0,h.ENGINE_MAP=h.OS_MAP=h.PLATFORMS_MAP=h.BROWSER_MAP=h.BROWSER_ALIASES_MAP=void 0,h.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},h.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},h.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},h.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},h.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(S,h,m){"use strict";h.__esModule=!0,h.default=void 0;var d,s=(d=m(91))&&d.__esModule?d:{default:d},g=m(18);function v(n,o){for(var w=0;w<o.length;w++){var p=o[w];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(n,p.key,p)}}var e=function(){function n(){}var o,p;return n.getParser=function(u,f){if(void 0===f&&(f=!1),"string"!=typeof u)throw new Error("UserAgent should be a string");return new s.default(u,f)},n.parse=function(u){return new s.default(u).getResult()},o=n,p=[{key:"BROWSER_MAP",get:function(){return g.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return g.ENGINE_MAP}},{key:"OS_MAP",get:function(){return g.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return g.PLATFORMS_MAP}}],null&&v(o.prototype,null),p&&v(o,p),n}();h.default=e,S.exports=h.default},91:function(S,h,m){"use strict";h.__esModule=!0,h.default=void 0;var d=n(m(92)),s=n(m(93)),g=n(m(94)),v=n(m(95)),e=n(m(17));function n(w){return w&&w.__esModule?w:{default:w}}var o=function(){function w(u,f){if(void 0===f&&(f=!1),null==u||""===u)throw new Error("UserAgent parameter can't be empty");this._ua=u,this.parsedResult={},!0!==f&&this.parse()}var p=w.prototype;return p.getUA=function(){return this._ua},p.test=function(u){return u.test(this._ua)},p.parseBrowser=function(){var u=this;this.parsedResult.browser={};var f=e.default.find(d.default,function(l){if("function"==typeof l.test)return l.test(u);if(l.test instanceof Array)return l.test.some(function(c){return u.test(c)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.browser=f.describe(this.getUA())),this.parsedResult.browser},p.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},p.getBrowserName=function(u){return u?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},p.getBrowserVersion=function(){return this.getBrowser().version},p.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},p.parseOS=function(){var u=this;this.parsedResult.os={};var f=e.default.find(s.default,function(l){if("function"==typeof l.test)return l.test(u);if(l.test instanceof Array)return l.test.some(function(c){return u.test(c)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.os=f.describe(this.getUA())),this.parsedResult.os},p.getOSName=function(u){var f=this.getOS().name;return u?String(f).toLowerCase()||"":f||""},p.getOSVersion=function(){return this.getOS().version},p.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},p.getPlatformType=function(u){void 0===u&&(u=!1);var f=this.getPlatform().type;return u?String(f).toLowerCase()||"":f||""},p.parsePlatform=function(){var u=this;this.parsedResult.platform={};var f=e.default.find(g.default,function(l){if("function"==typeof l.test)return l.test(u);if(l.test instanceof Array)return l.test.some(function(c){return u.test(c)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.platform=f.describe(this.getUA())),this.parsedResult.platform},p.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},p.getEngineName=function(u){return u?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},p.parseEngine=function(){var u=this;this.parsedResult.engine={};var f=e.default.find(v.default,function(l){if("function"==typeof l.test)return l.test(u);if(l.test instanceof Array)return l.test.some(function(c){return u.test(c)});throw new Error("Browser's test function is not valid")});return f&&(this.parsedResult.engine=f.describe(this.getUA())),this.parsedResult.engine},p.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},p.getResult=function(){return e.default.assign({},this.parsedResult)},p.satisfies=function(u){var f=this,l={},c=0,x={},y=0;if(Object.keys(u).forEach(function(O){var B=u[O];"string"==typeof B?(x[O]=B,y+=1):"object"==typeof B&&(l[O]=B,c+=1)}),c>0){var T=Object.keys(l),k=e.default.find(T,function(O){return f.isOS(O)});if(k){var C=this.satisfies(l[k]);if(void 0!==C)return C}var M=e.default.find(T,function(O){return f.isPlatform(O)});if(M){var F=this.satisfies(l[M]);if(void 0!==F)return F}}if(y>0){var I=Object.keys(x),N=e.default.find(I,function(O){return f.isBrowser(O,!0)});if(void 0!==N)return this.compareVersion(x[N])}},p.isBrowser=function(u,f){void 0===f&&(f=!1);var l=this.getBrowserName().toLowerCase(),c=u.toLowerCase(),x=e.default.getBrowserTypeByAlias(c);return f&&x&&(c=x.toLowerCase()),c===l},p.compareVersion=function(u){var f=[0],l=u,c=!1,x=this.getBrowserVersion();if("string"==typeof x)return">"===u[0]||"<"===u[0]?(l=u.substr(1),"="===u[1]?(c=!0,l=u.substr(2)):f=[],f.push(">"===u[0]?1:-1)):"="===u[0]?l=u.substr(1):"~"===u[0]&&(c=!0,l=u.substr(1)),f.indexOf(e.default.compareVersions(x,l,c))>-1},p.isOS=function(u){return this.getOSName(!0)===String(u).toLowerCase()},p.isPlatform=function(u){return this.getPlatformType(!0)===String(u).toLowerCase()},p.isEngine=function(u){return this.getEngineName(!0)===String(u).toLowerCase()},p.is=function(u,f){return void 0===f&&(f=!1),this.isBrowser(u,f)||this.isOS(u)||this.isPlatform(u)},p.some=function(u){var f=this;return void 0===u&&(u=[]),u.some(function(l){return f.is(l)})},w}();h.default=o,S.exports=h.default},92:function(S,h,m){"use strict";h.__esModule=!0,h.default=void 0;var d,s=(d=m(17))&&d.__esModule?d:{default:d},g=/version\/(\d+(\.?_?\d+)+)/i;h.default=[{test:[/googlebot/i],describe:function(e){var n={name:"Googlebot"},o=s.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/opera/i],describe:function(e){var n={name:"Opera"},o=s.default.getFirstMatch(g,e)||s.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/opr\/|opios/i],describe:function(e){var n={name:"Opera"},o=s.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/SamsungBrowser/i],describe:function(e){var n={name:"Samsung Internet for Android"},o=s.default.getFirstMatch(g,e)||s.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/Whale/i],describe:function(e){var n={name:"NAVER Whale Browser"},o=s.default.getFirstMatch(g,e)||s.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/MZBrowser/i],describe:function(e){var n={name:"MZ Browser"},o=s.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/focus/i],describe:function(e){var n={name:"Focus"},o=s.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/swing/i],describe:function(e){var n={name:"Swing"},o=s.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/coast/i],describe:function(e){var n={name:"Opera Coast"},o=s.default.getFirstMatch(g,e)||s.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var n={name:"Opera Touch"},o=s.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/yabrowser/i],describe:function(e){var n={name:"Yandex Browser"},o=s.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/ucbrowser/i],describe:function(e){var n={name:"UC Browser"},o=s.default.getFirstMatch(g,e)||s.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/Maxthon|mxios/i],describe:function(e){var n={name:"Maxthon"},o=s.default.getFirstMatch(g,e)||s.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/epiphany/i],describe:function(e){var n={name:"Epiphany"},o=s.default.getFirstMatch(g,e)||s.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/puffin/i],describe:function(e){var n={name:"Puffin"},o=s.default.getFirstMatch(g,e)||s.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/sleipnir/i],describe:function(e){var n={name:"Sleipnir"},o=s.default.getFirstMatch(g,e)||s.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/k-meleon/i],describe:function(e){var n={name:"K-Meleon"},o=s.default.getFirstMatch(g,e)||s.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/micromessenger/i],describe:function(e){var n={name:"WeChat"},o=s.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/qqbrowser/i],describe:function(e){var n={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},o=s.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/msie|trident/i],describe:function(e){var n={name:"Internet Explorer"},o=s.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/\sedg\//i],describe:function(e){var n={name:"Microsoft Edge"},o=s.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/edg([ea]|ios)/i],describe:function(e){var n={name:"Microsoft Edge"},o=s.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/vivaldi/i],describe:function(e){var n={name:"Vivaldi"},o=s.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/seamonkey/i],describe:function(e){var n={name:"SeaMonkey"},o=s.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/sailfish/i],describe:function(e){var n={name:"Sailfish"},o=s.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return o&&(n.version=o),n}},{test:[/silk/i],describe:function(e){var n={name:"Amazon Silk"},o=s.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/phantom/i],describe:function(e){var n={name:"PhantomJS"},o=s.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/slimerjs/i],describe:function(e){var n={name:"SlimerJS"},o=s.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var n={name:"BlackBerry"},o=s.default.getFirstMatch(g,e)||s.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var n={name:"WebOS Browser"},o=s.default.getFirstMatch(g,e)||s.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/bada/i],describe:function(e){var n={name:"Bada"},o=s.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/tizen/i],describe:function(e){var n={name:"Tizen"},o=s.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/qupzilla/i],describe:function(e){var n={name:"QupZilla"},o=s.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var n={name:"Firefox"},o=s.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/electron/i],describe:function(e){var n={name:"Electron"},o=s.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/MiuiBrowser/i],describe:function(e){var n={name:"Miui"},o=s.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/chromium/i],describe:function(e){var n={name:"Chromium"},o=s.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/chrome|crios|crmo/i],describe:function(e){var n={name:"Chrome"},o=s.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/GSA/i],describe:function(e){var n={name:"Google Search"},o=s.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:function(e){var n=!e.test(/like android/i),o=e.test(/android/i);return n&&o},describe:function(e){var n={name:"Android Browser"},o=s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/playstation 4/i],describe:function(e){var n={name:"PlayStation 4"},o=s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/safari|applewebkit/i],describe:function(e){var n={name:"Safari"},o=s.default.getFirstMatch(g,e);return o&&(n.version=o),n}},{test:[/.*/i],describe:function(e){var n=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:s.default.getFirstMatch(n,e),version:s.default.getSecondMatch(n,e)}}}],S.exports=h.default},93:function(S,h,m){"use strict";h.__esModule=!0,h.default=void 0;var d,s=(d=m(17))&&d.__esModule?d:{default:d},g=m(18);h.default=[{test:[/Roku\/DVP/],describe:function(e){var n=s.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:g.OS_MAP.Roku,version:n}}},{test:[/windows phone/i],describe:function(e){var n=s.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:g.OS_MAP.WindowsPhone,version:n}}},{test:[/windows /i],describe:function(e){var n=s.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),o=s.default.getWindowsVersionName(n);return{name:g.OS_MAP.Windows,version:n,versionName:o}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var n={name:g.OS_MAP.iOS},o=s.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return o&&(n.version=o),n}},{test:[/macintosh/i],describe:function(e){var n=s.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),o=s.default.getMacOSVersionName(n),w={name:g.OS_MAP.MacOS,version:n};return o&&(w.versionName=o),w}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var n=s.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:g.OS_MAP.iOS,version:n}}},{test:function(e){var n=!e.test(/like android/i),o=e.test(/android/i);return n&&o},describe:function(e){var n=s.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),o=s.default.getAndroidVersionName(n),w={name:g.OS_MAP.Android,version:n};return o&&(w.versionName=o),w}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var n=s.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),o={name:g.OS_MAP.WebOS};return n&&n.length&&(o.version=n),o}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var n=s.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||s.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||s.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:g.OS_MAP.BlackBerry,version:n}}},{test:[/bada/i],describe:function(e){var n=s.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:g.OS_MAP.Bada,version:n}}},{test:[/tizen/i],describe:function(e){var n=s.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:g.OS_MAP.Tizen,version:n}}},{test:[/linux/i],describe:function(){return{name:g.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:g.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var n=s.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:g.OS_MAP.PlayStation4,version:n}}}],S.exports=h.default},94:function(S,h,m){"use strict";h.__esModule=!0,h.default=void 0;var d,s=(d=m(17))&&d.__esModule?d:{default:d},g=m(18);h.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var n=s.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",o={type:g.PLATFORMS_MAP.mobile,vendor:"Huawei"};return n&&(o.model=n),o}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:g.PLATFORMS_MAP.tablet}}},{test:function(e){var n=e.test(/ipod|iphone/i),o=e.test(/like (ipod|iphone)/i);return n&&!o},describe:function(e){var n=s.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:g.PLATFORMS_MAP.mobile,vendor:"Apple",model:n}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:g.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:g.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:g.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:g.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:g.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var n=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&n>=3},describe:function(){return{type:g.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:g.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:g.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:g.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:g.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:g.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:g.PLATFORMS_MAP.tv}}}],S.exports=h.default},95:function(S,h,m){"use strict";h.__esModule=!0,h.default=void 0;var d,s=(d=m(17))&&d.__esModule?d:{default:d},g=m(18);h.default=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:g.ENGINE_MAP.Blink};var n=s.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:g.ENGINE_MAP.EdgeHTML,version:n}}},{test:[/trident/i],describe:function(e){var n={name:g.ENGINE_MAP.Trident},o=s.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:function(e){return e.test(/presto/i)},describe:function(e){var n={name:g.ENGINE_MAP.Presto},o=s.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:function(e){var n=e.test(/gecko/i),o=e.test(/like gecko/i);return n&&!o},describe:function(e){var n={name:g.ENGINE_MAP.Gecko},o=s.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:g.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var n={name:g.ENGINE_MAP.WebKit},o=s.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return o&&(n.version=o),n}}],S.exports=h.default}})},2754:(Q,S,h)=>{"use strict";S.TD=void 0;var d=h(4354);Object.defineProperty(S,"TD",{enumerable:!0,get:function(){return d.requestMediaPermissions}})},4354:function(Q,S,h){"use strict";var m=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(S,"__esModule",{value:!0}),S.requestVideoPermissions=S.requestAudioPermissions=S.requestMediaPermissions=S.MediaPermissionsErrorType=void 0;const d=m(h(7230));var s,n;(n=s=S.MediaPermissionsErrorType||(S.MediaPermissionsErrorType={})).SystemPermissionDenied="SystemPermissionDenied",n.UserPermissionDenied="UserPermissionDenied",n.CouldNotStartVideoSource="CouldNotStartVideoSource",n.Generic="Generic",S.requestMediaPermissions=n=>new Promise((o,w)=>{navigator.mediaDevices.getUserMedia(n??{audio:!0,video:!0}).then(p=>{p.getTracks().forEach(u=>{u.stop()}),o(!0)}).catch(p=>{const f=d.default.getParser(window.navigator.userAgent).getBrowserName(),l=p.name,c=p.message;let x=s.Generic;"Chrome"===f?"NotAllowedError"===l?"Permission denied by system"===c?x=s.SystemPermissionDenied:"Permission denied"===c&&(x=s.UserPermissionDenied):"NotReadableError"===l&&(x=s.CouldNotStartVideoSource):"Safari"===f?"NotAllowedError"===l&&(x=s.UserPermissionDenied):"Microsoft Edge"===f?"NotAllowedError"===l?x=s.UserPermissionDenied:"NotReadableError"===l&&(x=s.CouldNotStartVideoSource):"Firefox"===f&&("NotFoundError"===l||"NotReadableError"===l?x=s.SystemPermissionDenied:"NotAllowedError"===l?x=s.UserPermissionDenied:"AbortError"===l&&(x=s.CouldNotStartVideoSource)),w({type:x,name:p.name,message:p.message})})}),S.requestAudioPermissions=()=>(0,S.requestMediaPermissions)({audio:!0,video:!1}),S.requestVideoPermissions=()=>(0,S.requestMediaPermissions)({audio:!1,video:!0})},5439:Q=>{window,Q.exports=function(S){var h={};function m(d){if(h[d])return h[d].exports;var s=h[d]={i:d,l:!1,exports:{}};return S[d].call(s.exports,s,s.exports,m),s.l=!0,s.exports}return m.m=S,m.c=h,m.d=function(d,s,g){m.o(d,s)||Object.defineProperty(d,s,{enumerable:!0,get:g})},m.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},m.t=function(d,s){if(1&s&&(d=m(d)),8&s||4&s&&"object"==typeof d&&d&&d.__esModule)return d;var g=Object.create(null);if(m.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:d}),2&s&&"string"!=typeof d)for(var v in d)m.d(g,v,function(e){return d[e]}.bind(null,v));return g},m.n=function(d){var s=d&&d.__esModule?function(){return d.default}:function(){return d};return m.d(s,"a",s),s},m.o=function(d,s){return Object.prototype.hasOwnProperty.call(d,s)},m.p="/dist/",m(m.s=1)}([function(S,h,m){"use strict";var d=this&&this.__awaiter||function(g,v,e,n){return new(e||(e=Promise))(function(o,w){function p(l){try{f(n.next(l))}catch(c){w(c)}}function u(l){try{f(n.throw(l))}catch(c){w(c)}}function f(l){var c;l.done?o(l.value):(c=l.value,c instanceof e?c:new e(function(x){x(c)})).then(p,u)}f((n=n.apply(g,v||[])).next())})},s=this&&this.__generator||function(g,v){var e,n,o,w,p={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return w={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function u(f){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;w&&(w=0,c[0]&&(p=0)),p;)try{if(e=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return p.label++,{value:c[1],done:!1};case 5:p.label++,n=c[1],c=[0];continue;case 7:c=p.ops.pop(),p.trys.pop();continue;default:if(!((o=(o=p.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){p=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){p.label=c[1];break}if(6===c[0]&&p.label<o[1]){p.label=o[1],o=c;break}if(o&&p.label<o[2]){p.label=o[2],p.ops.push(c);break}o[2]&&p.ops.pop(),p.trys.pop();continue}c=v.call(g,p)}catch(x){c=[6,x],n=0}finally{e=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([f,l])}}};Object.defineProperty(h,"__esModule",{value:!0}),h.file2b64=void 0,h.file2b64=function(g){return d(this,void 0,void 0,function(){var v,e;return s(this,function(n){return v=new FileReader,e=new Promise(function(o,w){v.addEventListener("load",function(){var p,u=null===(p=v.result)||void 0===p?void 0:p.toString();u?o(u):w("could not convert file to base64")},!1)}),v.readAsDataURL(g),[2,e]})})}},function(S,h,m){"use strict";var d=this&&this.__awaiter||function(p,u,f,l){return new(f||(f=Promise))(function(c,x){function y(C){try{k(l.next(C))}catch(M){x(M)}}function T(C){try{k(l.throw(C))}catch(M){x(M)}}function k(C){var M;C.done?c(C.value):(M=C.value,M instanceof f?M:new f(function(F){F(M)})).then(y,T)}k((l=l.apply(p,u||[])).next())})},s=this&&this.__generator||function(p,u){var f,l,c,x,y={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return x={next:T(0),throw:T(1),return:T(2)},"function"==typeof Symbol&&(x[Symbol.iterator]=function(){return this}),x;function T(k){return function(C){return function(M){if(f)throw new TypeError("Generator is already executing.");for(;x&&(x=0,M[0]&&(y=0)),y;)try{if(f=1,l&&(c=2&M[0]?l.return:M[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,M[1])).done)return c;switch(l=0,c&&(M=[2&M[0],c.value]),M[0]){case 0:case 1:c=M;break;case 4:return y.label++,{value:M[1],done:!1};case 5:y.label++,l=M[1],M=[0];continue;case 7:M=y.ops.pop(),y.trys.pop();continue;default:if(!((c=(c=y.trys).length>0&&c[c.length-1])||6!==M[0]&&2!==M[0])){y=0;continue}if(3===M[0]&&(!c||M[1]>c[0]&&M[1]<c[3])){y.label=M[1];break}if(6===M[0]&&y.label<c[1]){y.label=c[1],c=M;break}if(c&&y.label<c[2]){y.label=c[2],y.ops.push(M);break}c[2]&&y.ops.pop(),y.trys.pop();continue}M=u.call(p,y)}catch(F){M=[6,F],l=0}finally{f=c=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}([k,C])}}};Object.defineProperty(h,"__esModule",{value:!0}),h.imageCompressor=void 0;var g=m(2),v=m(3),e=m(0),n=m(4),o=m(5),w=function(){function p(u,f){var l=this;this.quill=u,this.options=f||{};var c=!!f.debug;this.Logger=new o.ConsoleLogger(c,!!f.suppressErrorLogging),(0,v.warnAboutOptions)(f,this.Logger),this.imageDrop=new g.ImageDrop(u,function(T){return d(l,void 0,void 0,function(){var k;return s(this,function(C){switch(C.label){case 0:return this.Logger.log("onImageDrop",{dataUrl:T}),[4,this.downscaleImageFromUrl(T)];case 1:return k=C.sent(),this.insertToEditor(k,p.b64toBlob(k)),[2]}})})},this.Logger),this.Logger.log("fileChanged",{options:f,quill:u,debug:c});var y=this.quill.getModule("toolbar");y?y.addHandler("image",function(){return l.selectLocalImage()}):this.Logger.error("Quill toolbar module not found! need { toolbar: // options } in Quill.modules for image icon to sit in")}return p.b64toBlob=function(u){for(var f=atob(u.split(",")[1]),l=u.slice(5).split(";")[0],c=new ArrayBuffer(f.length),x=new Uint8Array(c),y=0;y<f.length;y++)x[y]=f.charCodeAt(y);return new Blob([c],{type:l})},p.prototype.selectLocalImage=function(u){var f=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=function(){return f.fileChanged().then(function(){return u&&u()})},document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){f.fileHolder&&document.body.removeChild(f.fileHolder)})},p.prototype.fileChanged=function(u){var f;return d(this,void 0,void 0,function(){var l,c,x,y;return s(this,function(T){switch(T.label){case 0:return(l=u||(null===(f=this.fileHolder)||void 0===f?void 0:f.files))&&l.length?(this.Logger.log("fileChanged",{file:c=l[0]}),c?[4,(0,e.file2b64)(c)]:[2]):[2];case 1:return x=T.sent(),[4,this.downscaleImageFromUrl(x)];case 2:return y=T.sent(),this.insertToEditor(y,p.b64toBlob(y)),[2]}})})},p.prototype.downscaleImageFromUrl=function(u){return d(this,void 0,void 0,function(){var f;return s(this,function(l){switch(l.label){case 0:return[4,(0,n.downscaleImage)(this.Logger,u,this.options.maxWidth,this.options.maxHeight,this.options.imageType,this.options.keepImageTypes,this.options.ignoreImageTypes,this.options.quality)];case 1:return f=l.sent(),this.Logger.log("downscaleImageFromUrl",{dataUrl:u,dataUrlCompressed:f}),[2,f]}})})},p.prototype.insertToEditor=function(u,f){if(this.options.insertIntoEditor)this.options.insertIntoEditor(u,f);else{this.Logger.log("insertToEditor",{url:u}),this.range=this.quill.getSelection();var l=this.range;if(!l)return;this.logFileSize(u),this.quill.insertEmbed(l.index,"image","".concat(u),"user"),l.index++,this.quill.setSelection(l,"api")}},p.prototype.logFileSize=function(u){var f=(Math.round(3*(u.length-22)/4)/1024).toFixed(0);this.Logger.log("estimated img size: "+f+" kb")},p}();h.imageCompressor=w,window.imageCompressor=w,h.default=w},function(S,h,m){"use strict";var d=this&&this.__awaiter||function(w,p,u,f){return new(u||(u=Promise))(function(l,c){function x(k){try{T(f.next(k))}catch(C){c(C)}}function y(k){try{T(f.throw(k))}catch(C){c(C)}}function T(k){var C;k.done?l(k.value):(C=k.value,C instanceof u?C:new u(function(M){M(C)})).then(x,y)}T((f=f.apply(w,p||[])).next())})},s=this&&this.__generator||function(w,p){var u,f,l,c,x={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return c={next:y(0),throw:y(1),return:y(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function y(T){return function(k){return function(C){if(u)throw new TypeError("Generator is already executing.");for(;c&&(c=0,C[0]&&(x=0)),x;)try{if(u=1,f&&(l=2&C[0]?f.return:C[0]?f.throw||((l=f.return)&&l.call(f),0):f.next)&&!(l=l.call(f,C[1])).done)return l;switch(f=0,l&&(C=[2&C[0],l.value]),C[0]){case 0:case 1:l=C;break;case 4:return x.label++,{value:C[1],done:!1};case 5:x.label++,f=C[1],C=[0];continue;case 7:C=x.ops.pop(),x.trys.pop();continue;default:if(!((l=(l=x.trys).length>0&&l[l.length-1])||6!==C[0]&&2!==C[0])){x=0;continue}if(3===C[0]&&(!l||C[1]>l[0]&&C[1]<l[3])){x.label=C[1];break}if(6===C[0]&&x.label<l[1]){x.label=l[1],l=C;break}if(l&&x.label<l[2]){x.label=l[2],x.ops.push(C);break}l[2]&&x.ops.pop(),x.trys.pop();continue}C=p.call(w,x)}catch(M){C=[6,M],f=0}finally{u=l=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([T,k])}}};Object.defineProperty(h,"__esModule",{value:!0}),h.ImageDrop=void 0;var g=m(0),v=function(){function w(p,u,f){var l=this;this.quill=p,this.onNewDataUrl=u,this.logger=f,this.quill.root.addEventListener("drop",function(c){return l.handleDrop(c)},!1),this.quill.root.addEventListener("paste",function(c){return l.handlePaste(c)},!1)}return w.prototype.handleDrop=function(p){return d(this,void 0,void 0,function(){var u,f,l,c,x,y,T;return s(this,function(k){switch(k.label){case 0:return p.preventDefault(),document.caretRangeFromPoint&&(u=document.getSelection(),f=document.caretRangeFromPoint(p.clientX,p.clientY),u&&f&&u.setBaseAndExtent(f.startContainer,f.startOffset,f.startContainer,f.startOffset)),[4,n(p)];case 1:return l=k.sent(),c=Array.from(l||[]).filter(function(C){return o(C.type)}),(x=c?.[0])?[4,(0,g.file2b64)(x)]:[3,3];case 2:return T=k.sent(),this.logger.log("handleNewImageFiles",{evt:p,files:l,filesFiltered:c,firstImage:x,base64ImageSrc:T}),this.onNewDataUrl(T),[2];case 3:return[4,e(p)];case 4:return(y=k.sent())?[4,(0,g.file2b64)(y)]:[3,6];case 5:return T=k.sent(),this.logger.log("handleNewImageFiles",{evt:p,blob:y,base64ImageSrc:T}),this.onNewDataUrl(T),[2];case 6:return[2]}})})},w.prototype.handlePaste=function(p){var u,f;return d(this,void 0,void 0,function(){var l,c,x,y;return s(this,function(T){switch(T.label){case 0:return l=Array.from((null===(u=p?.clipboardData)||void 0===u?void 0:u.items)||[]),this.logger.log("handlePaste",{files:l,evt:p}),c=l.filter(function(k){return o(k.type)}),this.logger.log("handlePaste",{images:c,evt:p}),c.length?c.filter(function(k){return"text/html"!==k.type}).length?(p.preventDefault(),(x=null===(f=c.pop())||void 0===f?void 0:f.getAsFile())?[4,(0,g.file2b64)(x)]:[2]):(this.logger.log("handlePaste also detected html"),[2]):[2];case 1:return y=T.sent(),this.logger.log("handleNewImageFiles",{base64ImageSrc:y}),this.onNewDataUrl(y),[2]}})})},w}();function e(w){var p;return d(this,void 0,void 0,function(){var u;return s(this,function(f){switch(f.label){case 0:return(u=null===(p=w.dataTransfer)||void 0===p?void 0:p.getData("URL"))?[4,fetch(u)]:[3,3];case 1:return[4,f.sent().blob()];case 2:return[2,f.sent()];case 3:return[2]}})})}function n(w){var p;return d(this,void 0,void 0,function(){return s(this,function(u){return[2,null===(p=w?.dataTransfer)||void 0===p?void 0:p.files]})})}function o(w){return!!w.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)/i)}h.ImageDrop=v},function(S,h,m){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.warnAboutOptions=void 0,h.warnAboutOptions=function(d,s){d.maxWidth=d.maxWidth||1e3,d.maxHeight=d.maxHeight||1e3,d.maxWidth&&"number"!=typeof d.maxWidth&&(s.warn("[config error] 'maxWidth' is required to be a \"number\" (in pixels), \nreceived: ".concat(d.maxWidth,"\n-> using default 1000")),d.maxWidth=1e3),d.maxHeight&&"number"!=typeof d.maxHeight&&(s.warn("[config error] 'maxHeight' is required to be a \"number\" (in pixels), \nreceived: ".concat(d.maxHeight,"\n-> using default 1000")),d.maxHeight=1e3),d.quality&&"number"!=typeof d.quality&&(s.warn("quill.imageCompressor: [config error] 'quality' is required to be a \"number\", \nreceived: ".concat(d.quality,"\n-> using default 0.7")),d.quality=.7),!d.imageType||"string"==typeof d.imageType&&d.imageType.startsWith("image/")||(s.warn('quill.imageCompressor: [config error] \'imageType\' is required be in the form of "image/png" or "image/jpeg" etc ..., \nreceived: '.concat(d.imageType,"\n-> using default image/jpeg")),d.imageType="image/jpeg"),d.keepImageTypes||(d.keepImageTypes=[]),d.keepImageTypes&&!Array.isArray(d.keepImageTypes)&&(s.warn("quill.imageCompressor: [config error] 'keepImageTypes' is required to be a \"array\", received: ".concat(d.keepImageTypes," -> using default []")),d.keepImageTypes=[]),d.ignoreImageTypes||(d.ignoreImageTypes=[]),d.ignoreImageTypes&&!Array.isArray(d.ignoreImageTypes)&&(s.warn("quill.imageCompressor: [config error] 'ignoreImageTypes' is required to be a \"array\", received: ".concat(d.ignoreImageTypes," -> using default []")),d.ignoreImageTypes=[]),d.insertIntoEditor&&"function"!=typeof d.insertIntoEditor&&(s.warn("quill.imageCompressor: [config error] 'insertIntoEditor' is required to be a \"function\", received: ".concat(d.insertIntoEditor," -> using default undefined")),d.insertIntoEditor=void 0)}},function(S,h,m){"use strict";var d=this&&this.__awaiter||function(g,v,e,n){return new(e||(e=Promise))(function(o,w){function p(l){try{f(n.next(l))}catch(c){w(c)}}function u(l){try{f(n.throw(l))}catch(c){w(c)}}function f(l){var c;l.done?o(l.value):(c=l.value,c instanceof e?c:new e(function(x){x(c)})).then(p,u)}f((n=n.apply(g,v||[])).next())})},s=this&&this.__generator||function(g,v){var e,n,o,w,p={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return w={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function u(f){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;w&&(w=0,c[0]&&(p=0)),p;)try{if(e=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return p.label++,{value:c[1],done:!1};case 5:p.label++,n=c[1],c=[0];continue;case 7:c=p.ops.pop(),p.trys.pop();continue;default:if(!((o=(o=p.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){p=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){p.label=c[1];break}if(6===c[0]&&p.label<o[1]){p.label=o[1],o=c;break}if(o&&p.label<o[2]){p.label=o[2],p.ops.push(c);break}o[2]&&p.ops.pop(),p.trys.pop();continue}c=v.call(g,p)}catch(x){c=[6,x],n=0}finally{e=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([f,l])}}};Object.defineProperty(h,"__esModule",{value:!0}),h.downscaleImage=void 0,h.downscaleImage=function(g,v,e,n,o,w,p,u){return d(this,void 0,void 0,function(){var f,l,c,x,y,T,k,C;return s(this,function(M){switch(M.label){case 0:return f=v.split(";")[0].split(":")[1],o=o||"image/jpeg",u=u||.7,(l=new Image).src=v,[4,new Promise(function(F){l.onload=function(){F()}})];case 1:return M.sent(),c=function(F,I,N,O){if(N&&O&&F<=N&&I<=O)return[F,I];if(N&&F>N){var B=N,R=Math.floor(I/F*B);if(O&&R>O){var G=O;return[Math.floor(F/I*G),G]}return[B,R]}return O&&I>O?(R=O,[B=Math.floor(F/I*R),R]):[I,F]}(l.width,l.height,e,n),x=c[0],y=c[1],(T=document.createElement("canvas")).width=x,T.height=y,k=T.getContext("2d"),"image/jpeg"===o&&(k.fillStyle="#FFFFFF",k.fillRect(0,0,l.width,l.height)),p?.includes(f)?[2,v]:(w?.includes(f)&&(o=f),k.drawImage(l,0,0,x,y),C=T.toDataURL(o,u),g.log("downscaling image...",{args:{dataUrl:v,maxWidth:e,maxHeight:n,imageType:o,ignoreImageTypes:p,keepImageTypes:w,imageQuality:u},newHeight:y,newWidth:x}),[2,C])}})})}},function(S,h,m){"use strict";Object.defineProperty(h,"__esModule",{value:!0}),h.ConsoleLogger=void 0;var d=function(){function s(g,v){this.debug=g,this.suppressErrorLogging=v}return s.prototype.prefixString=function(){return"</> quill-image-compress: "},Object.defineProperty(s.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"error",{get:function(){return this.suppressErrorLogging?function(){}:console.error.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"warn",{get:function(){return this.suppressErrorLogging?function(){}:console.warn.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),s}();h.ConsoleLogger=d}])}}]);
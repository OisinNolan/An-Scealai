"use strict";(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[934],{5934:(Ze,Z,l)=>{l.r(Z),l.d(Z,{TeacherModule:()=>ye});var c=l(4006),u=l(6895),d=l(1390),h=l(5861),T=l(25),y=l(1745),M=l(2481),m=l(8977),U=l(5042),S=l(4687),f=l(4633),p=l(3905),e=l(4650),C=l(5412);function A(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.goToClassroom(r._id))}),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",10),e._uU(4),e.qZA()()}if(2&s){const t=i.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(t.studentIds.length)}}let O=(()=>{class s{constructor(t,o,n,r,a,g,_){this.classroom=t,this.auth=o,this.router=n,this.ts=r,this.notificationService=a,this.dialog=g,this.profileService=_,this.newClassroom=new M.r}ngOnInit(){var t=this;return(0,h.Z)(function*(){const o=t.auth.getUserDetails();o?(t.profileService.getForUser(t.auth.getUserDetails).subscribe({next:()=>{},error:()=>{console.log("no profile"),t.router.navigateByUrl("/register-profile")}}),t.getClassrooms(o._id),t.notificationService.getTeacherNotifications()):t.auth.logout()})()}getClassrooms(t){var o=this;return(0,h.Z)(function*(){o.classrooms=yield(0,p.z)(o.classroom.getClassroomsForTeacher(t)),console.log(o.classrooms),o.classrooms.sort((n,r)=>n.title<r.title?-1:1)})()}goToClassroom(t){this.router.navigateByUrl("teacher/classroom/"+t)}createNewClassroom(){var t=this;return(0,h.Z)(function*(){const o=t.auth.getUserDetails();if(!o)return;t.newClassroom.teacherId=o._id,t.newClassroom.date=new Date;let n=yield(0,p.z)(t.classroom.getAllCodes()),r=t.getUniqueCode(n);t.newClassroom.code=r,t.classroom.createClassroom(t.newClassroom).subscribe(a=>{t.getClassrooms(o._id)},a=>{alert(a.message)})})()}getUniqueCode(t){let o=this.classroom.generateCode();for(;t.includes(o);)o=this.classroom.generateCode();return o}openCreateClassroomDialog(){this.newClassroom.title=null,this.newClassroom&&(this.dialogRef=this.dialog.open(f.p,{data:{title:this.ts.l.add_new_classroom,message:this.ts.l.enter_title,type:"updateText",confirmText:this.ts.l.create,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=void 0,t&&(this.newClassroom.title=t[0],this.createNewClassroom())}))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(T.u),e.Y36(y.$),e.Y36(d.F0),e.Y36(m.D),e.Y36(U.g),e.Y36(C.uw),e.Y36(S.H))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-teacher-dashboard"]],decls:13,vars:4,consts:[[1,"contents"],[1,"classContainer"],[1,"classHeader"],[1,"addClassBtn",3,"click"],[1,"fas","fa-plus"],[1,"classroomKey"],[1,"keyNumStudents"],[1,"classBody"],["class","classroomCard",3,"click",4,"ngFor","ngForOf"],[1,"classroomCard",3,"click"],[1,"numStudents"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.TgZ(4,"div",3),e.NdJ("click",function(){return o.openCreateClassroomDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"div",5)(7,"div"),e._uU(8),e.qZA(),e.TgZ(9,"div",6),e._uU(10),e.qZA()(),e.TgZ(11,"div",7),e.YNc(12,A,5,2,"div",8),e.qZA()()()),2&t&&(e.xp6(3),e.hij(" ",o.ts.l.classrooms," "),e.xp6(5),e.Oqu(o.ts.l.title),e.xp6(2),e.Oqu(o.ts.l.no_students),e.xp6(2),e.Q6J("ngForOf",o.classrooms))},dependencies:[u.sg],styles:[".contents[_ngcontent-%COMP%]{display:flex;padding-left:5%;padding-right:5%}.titleInput[_ngcontent-%COMP%]{margin-top:10px;padding-left:4px}.classHeader[_ngcontent-%COMP%]{padding-right:16px}.addClassBtn[_ngcontent-%COMP%]{margin-left:auto}.addClassBtn[_ngcontent-%COMP%]:hover{cursor:pointer;color:var(--scealai-green);transition:color .5s}.keyNumStudents[_ngcontent-%COMP%]{margin-left:auto}.numStudents[_ngcontent-%COMP%]{margin-left:auto;margin-right:45px}"]}),s})();var v=l(8386),b=l(1765),w=l(1245);function I(s,i){if(1&s&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Oqu(t.unreadMessages)}}function N(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.goToMessages())}),e._uU(1),e._UZ(2,"i",14),e.YNc(3,I,2,1,"span",15),e.qZA()}if(2&s){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.messages," "),e.xp6(2),e.Q6J("ngIf",t.unreadMessages>0)}}function F(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.goToStats())}),e._uU(1),e._UZ(2,"i",17),e.qZA()}if(2&s){const t=e.oxw();e.xp6(1),e.hij("",t.ts.l.stats," ")}}function J(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.goToDictgloss())}),e._uU(1),e._UZ(2,"i",18),e.qZA()}if(2&s){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.dictogloss," ")}}function Y(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.goToStudent(r._id))}),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"i",20),e._uU(4),e.qZA()()}if(2&s){const t=i.$implicit,o=e.oxw();e.xp6(2),e.Oqu(t.username),e.xp6(2),e.hij(" ",o.numOfStories.get(t.username)," ")}}let D=(()=>{class s{constructor(t,o,n,r,a,g,_,x){this.route=t,this.classroomService=o,this.router=n,this.userService=r,this.ts=a,this.messageService=g,this.storyService=_,this.dialog=x,this.students=[],this.registrationError=!1,this.unreadMessages=0,this.messagesForNotifications=[],this.numOfStories=new Map}ngOnInit(){var t=this;return(0,h.Z)(function*(){t.classroom=yield(0,p.z)(t.classroomService.getClassroom(t.route.snapshot.params.id)),t.getStudents(),t.messageService.getMessagesForLoggedInUser().subscribe(o=>{t.messagesForNotifications=o,t.unreadMessages=t.messageService.getNumberOfUnreadMessagesForClass(t.messagesForNotifications,t.classroom.studentIds)})})()}getStudents(){var t=this;return(0,h.Z)(function*(){for(let o of t.classroom.studentIds)t.userService.getUserById(o).subscribe({next:function(){var n=(0,h.Z)(function*(r){t.students.push(r);let a=yield(0,p.z)(t.storyService.getNumberOfStories(r._id,t.classroom?.date?.toString()));t.numOfStories.set(r.username,a)});return function(a){return n.apply(this,arguments)}}(),error:()=>{console.log(o+" does not exist")}})})()}deleteClassroom(){this.classroomService.deleteClassroom(this.classroom._id).subscribe(t=>{this.router.navigateByUrl("/landing")})}goToStudent(t){this.router.navigateByUrl("/teacher/student/"+t)}goToMessages(){this.router.navigateByUrl("/messages/"+this.classroom._id)}goToStats(){this.router.navigateByUrl("/stats-dashboard/"+this.classroom._id)}goToSettings(){this.router.navigateByUrl("/teacher/teacher-settings/"+this.classroom._id)}goToDictgloss(){this.router.navigateByUrl("/teacher/teacher-dictogloss/"+this.classroom._id)}openCodeDialog(){this.dialogRef=this.dialog.open(f.p,{data:{title:this.ts.l.classroom_code,type:"classCode",data:this.classroom.code,confirmText:this.ts.l.done},width:"15vh"}),this.dialogRef.afterClosed().subscribe(()=>this.dialogRef=void 0)}openDeleteClassroomDialog(){this.dialogRef=this.dialog.open(f.p,{data:{title:this.ts.l.sure_you_want_to_delete_code,type:"simpleConfirm",confirmText:this.ts.l.delete,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=void 0,t&&this.deleteClassroom()})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(d.gz),e.Y36(T.u),e.Y36(d.F0),e.Y36(v.K),e.Y36(m.D),e.Y36(w.e),e.Y36(b.N),e.Y36(C.uw))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-teacher-classroom"]],decls:24,vars:9,consts:[[1,"contents"],[1,"classContainer"],[1,"classHeader"],["routerLink","/teacher/dashboard",1,"backArrow"],[1,"fas","fa-arrow-left"],[1,"headerIconContainer"],[1,"headerIconBtn",3,"click"],[1,"fas","fa-share-alt","headerIcon"],["class","headerIconBtn",3,"click",4,"ngIf"],["aria-hidden","true",1,"fa","fa-cog","headerIcon"],[1,"fas","fa-trash-alt","headerIcon"],[1,"classroomKey"],[1,"classBody"],["class","classroomCard",3,"click",4,"ngFor","ngForOf"],[1,"fa","fa-envelope"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"],[1,"fas","fa-calculator"],["aria-hidden","true",1,"fa","fa-file-audio","headerIcon"],[1,"classroomCard",3,"click"],[1,"fas","fa-arrow-right","arrow"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"i",4),e.qZA(),e._uU(5),e.TgZ(6,"div",5)(7,"div",6),e.NdJ("click",function(){return o.openCodeDialog()}),e._uU(8),e._UZ(9,"i",7),e.qZA(),e.YNc(10,N,4,2,"div",8),e.YNc(11,F,3,1,"div",8),e.YNc(12,J,3,1,"div",8),e.TgZ(13,"div",6),e.NdJ("click",function(){return o.goToSettings()}),e._uU(14),e._UZ(15,"i",9),e.qZA(),e.TgZ(16,"div",6),e.NdJ("click",function(){return o.openDeleteClassroomDialog()}),e._uU(17),e._UZ(18,"i",10),e.qZA()()(),e.TgZ(19,"div",11)(20,"div"),e._uU(21),e.qZA()(),e.TgZ(22,"div",12),e.YNc(23,Y,5,2,"div",13),e.qZA()()()),2&t&&(e.xp6(5),e.hij(" ",null==o.classroom?null:o.classroom.title," "),e.xp6(3),e.Oqu(o.ts.l.share_code),e.xp6(2),e.Q6J("ngIf",o.students.length>0),e.xp6(1),e.Q6J("ngIf",o.students.length>0),e.xp6(1),e.Q6J("ngIf",o.students.length>0),e.xp6(2),e.hij(" ",o.ts.l.settings," "),e.xp6(3),e.hij("",o.ts.l.delete," "),e.xp6(4),e.Oqu(o.ts.l.student_username),e.xp6(2),e.Q6J("ngForOf",o.students))},dependencies:[u.sg,u.O5,d.rH],styles:[".contents[_ngcontent-%COMP%]{display:flex;padding-left:5%;padding-right:5%}.notificationBtn[_ngcontent-%COMP%]{display:inline-flex}@media (max-width: 550px){.classHeader[_ngcontent-%COMP%], .headerIconBtn[_ngcontent-%COMP%]{font-size:10pt}}"]}),s})();function B(s,i){1&s&&(e.TgZ(0,"span",13),e._uU(1,"s"),e.qZA())}function P(s,i){if(1&s&&(e.TgZ(0,"span",11),e._uU(1),e.YNc(2,B,2,0,"span",12),e._uU(3),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.student?null:t.student.username,"'"),e.xp6(1),e.Q6J("ngIf","s"!==(null==t.student?null:t.student.username[(null==t.student?null:t.student.username.length)-1])),e.xp6(1),e.hij("",t.ts.l.stories," ")}}function j(s,i){if(1&s&&(e.TgZ(0,"span",11),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.AsE(" ",t.ts.l.stories," ",null==t.student?null:t.student.username," ")}}function Q(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.goToStory(r._id))}),e.TgZ(1,"div",17),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"div"),e._UZ(7,"i",18),e.qZA()()}if(2&s){const t=i.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(2),e.hij(" ",e.xi3(5,2,t.lastUpdated,"MMMM dd, yyyy h:mm aa")," ")}}function R(s,i){if(1&s&&(e.TgZ(0,"div",14),e.YNc(1,Q,8,5,"div",15),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.stories)}}function H(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.goToStory(r._id))}),e.TgZ(1,"div",17),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"div"),e._UZ(7,"i",18),e.qZA()()}if(2&s){const t=i.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(2),e.hij(" ",e.xi3(5,2,t.lastUpdated,"MMMM dd, yyyy h:mm aa")," ")}}function z(s,i){if(1&s&&(e.TgZ(0,"div",14),e.YNc(1,H,8,5,"div",15),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.storiesWithoutFeedback)}}let E=(()=>{class s{constructor(t,o,n,r,a,g){this.route=t,this.storyService=o,this.userService=n,this.router=r,this.ts=a,this.classroomService=g,this.storiesWithoutFeedback=[],this.viewNoFeedback=!1}ngOnInit(){var t=this;return(0,h.Z)(function*(){t.student=yield(0,p.z)(t.userService.getUserById(t.route.snapshot.params.id)),t.classroom=yield(0,p.z)(t.classroomService.getClassroomOfStudent(t.student._id)),t.stories=yield(0,p.z)(t.storyService.getStoriesForClassroom(t.student._id,t.classroom.date?.toString())),t.stories.sort((o,n)=>o.lastUpdated>n.lastUpdated?-1:n.lastUpdated>o.lastUpdated?1:0),t.storiesWithoutFeedback=t.stories.filter(o=>null===o.feedback.text&&null===o.feedback.audioId)})()}goToStory(t){this.router.navigateByUrl("teacher/story/"+t.toString())}goBack(){this.router.navigateByUrl("teacher/classroom/"+this.classroom._id)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(d.gz),e.Y36(b.N),e.Y36(v.K),e.Y36(d.F0),e.Y36(m.D),e.Y36(T.u))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-teacher-student"]],decls:20,vars:10,consts:[[1,"contentContainer"],[1,"classContainer"],[1,"classHeader"],[1,"backArrow",3,"click"],[1,"fas","fa-arrow-left"],["class","storyAuthor",4,"ngIf"],[1,"filter"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"classroomKey"],[1,"title"],["class","classBody",4,"ngIf"],[1,"storyAuthor"],["style","margin-right: 8px;",4,"ngIf"],[2,"margin-right","8px"],[1,"classBody"],["class","classroomCard",3,"click",4,"ngFor","ngForOf"],[1,"classroomCard",3,"click"],[1,"storyTitle"],[1,"fas","fa-arrow-right","arrow"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.NdJ("click",function(){return o.goBack()}),e._UZ(4,"i",4),e.qZA(),e.YNc(5,P,4,3,"span",5),e.YNc(6,j,2,2,"span",5),e.TgZ(7,"div",6),e._uU(8),e.qZA(),e.TgZ(9,"div")(10,"input",7),e.NdJ("ngModelChange",function(r){return o.viewNoFeedback=r}),e.qZA(),e._uU(11),e.qZA()(),e.TgZ(12,"div",8)(13,"div",9),e._uU(14),e.qZA(),e.TgZ(15,"div"),e._uU(16),e.qZA(),e._UZ(17,"div"),e.qZA(),e.YNc(18,R,2,1,"div",10),e.YNc(19,z,2,1,"div",10),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("ngIf",o.ts.inEnglish()),e.xp6(1),e.Q6J("ngIf",o.ts.inIrish()),e.xp6(2),e.hij(" ",o.ts.l.filter_by,": "),e.xp6(2),e.Q6J("ngModel",o.viewNoFeedback),e.xp6(1),e.AsE(" ",o.ts.l.no_feedback_given," (",o.storiesWithoutFeedback.length,")"),e.xp6(3),e.Oqu(o.ts.l.title),e.xp6(2),e.hij(" ",o.ts.l.last_updated," "),e.xp6(2),e.Q6J("ngIf",!o.viewNoFeedback),e.xp6(1),e.Q6J("ngIf",o.viewNoFeedback))},dependencies:[u.sg,u.O5,c.Wl,c.JJ,c.On,u.uU],styles:[".storyAuthor[_ngcontent-%COMP%]{width:300px;text-align:left}.filter[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100px}.classroomKey[_ngcontent-%COMP%]{justify-content:space-between}.title[_ngcontent-%COMP%]{width:370px;text-align:left}.storyTitle[_ngcontent-%COMP%]{width:400px;text-align:left}.arrow[_ngcontent-%COMP%]{margin-left:auto}"]}),s})();var G=l(6012),K=l(4186),$=l(529),L=l(1481),q=l(5802);function W(s,i){if(1&s&&(e.TgZ(0,"div",28),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Oqu(t.ts.l.made_using_prompts)}}function X(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"i",29),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openUpdateStoryTextDialog())}),e.qZA()}}function V(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"quill-editor",30),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.story.feedback.feedbackMarkup=n)})("onEditorCreated",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onEditorCreated(n))}),e.qZA()}if(2&s){const t=e.oxw();e.Q6J("modules",t.config)("ngModel",t.story.feedback.feedbackMarkup)}}function ee(s,i){if(1&s&&(e.TgZ(0,"div",14),e._uU(1),e.TgZ(2,"textarea",15),e._uU(3),e.ALo(4,"date"),e.qZA()()),2&s){const t=e.oxw();e.xp6(1),e.hij("",t.ts.l.creation_date," "),e.xp6(2),e.Oqu(e.xi3(4,2,null==t.story?null:t.story.date,"MM/dd/yyyy, hh:mm aa"))}}function te(s,i){if(1&s&&(e.TgZ(0,"div",14),e._uU(1),e.TgZ(2,"textarea",15),e._uU(3),e.ALo(4,"date"),e.qZA()()),2&s){const t=e.oxw();e.xp6(1),e.hij("",t.ts.l.creation_date," "),e.xp6(2),e.Oqu(e.xi3(4,2,null==t.story?null:t.story.date,"dd/MM/yyyy, hh:mm aa"))}}function oe(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",31)(1,"textarea",32),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.story.feedback.text=n)})("input",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.feedbackSent=!1)}),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.hYB("placeholder","",t.ts.l.leave_feedback_for," ",null==t.story?null:t.story.author,""),e.Q6J("ngModel",t.story.feedback.text)}}function se(s,i){if(1&s&&(e.TgZ(0,"span"),e._uU(1),e._UZ(2,"i",34),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.AsE("",t.ts.l.seen_by," ",null==t.story?null:t.story.author," ")}}function ne(s,i){if(1&s&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.AsE("",t.ts.l.not_seen_by," ",null==t.story?null:t.story.author,"")}}function ie(s,i){if(1&s&&(e.TgZ(0,"div",33),e.YNc(1,se,3,2,"span",26),e.YNc(2,ne,2,2,"span",26),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.story.feedback.seenByStudent),e.xp6(1),e.Q6J("ngIf",!t.story.feedback.seenByStudent)}}function re(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sendFeedback())}),e._uU(1),e._UZ(2,"i",35),e.qZA()}if(2&s){const t=e.oxw();e.xp6(1),e.hij("",t.ts.l.send," ")}}function ae(s,i){if(1&s&&(e.TgZ(0,"button",36),e._uU(1),e._UZ(2,"i",34),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij("",t.ts.l.sent," ")}}function le(s,i){if(1&s&&(e.TgZ(0,"div"),e._UZ(1,"audio",37,38),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("src",t.audioSource,e.LSH)}}let ce=(()=>{class s{constructor(t,o,n,r,a,g,_,x,be,ke){this.route=t,this.http=o,this.storyService=n,this.sanitizer=r,this.ts=a,this.router=g,this.userService=_,this.profileService=x,this.auth=be,this.dialog=ke,this.feedbackSent=!1,this.isFromAmerica=!1,this.baseUrl=K.Z.baseurl,this.storyUpdated=!1,this.config={toolbar:[[{color:[]},{background:[]}],["bold","italic","underline","strike"]]}}ngOnInit(){this.getStoryData();const t=this.auth.getUserDetails();!t||this.profileService.getForUser(t._id).subscribe(o=>{let r=o.profile.country;this.isFromAmerica="United States of America"==r||"America"==r||"USA"==r||"United States"==r})}getStoryData(){this.http.get(this.baseUrl+"story/viewStory/"+this.route.snapshot.params.id).subscribe(t=>{this.story=t[0],null==this.story.feedback.feedbackMarkup?this.story.feedback.feedbackMarkup=this.story.htmlText||this.story.text:this.storyUpdated=this.checkTextDifference(this.story.feedback.feedbackMarkup,this.story.text),this.initialMarkupText=this.story.feedback.feedbackMarkup,this.getFeedbackAudio(),this.getAuthorPossessive(),this.getUserId()})}checkTextDifference(t,o){return t.replace(/(<([^>]+)>)/gi,"").replace(/[\s,\.]+/g,"")!==o.replace(/(<([^>]+)>)/gi,"").replace(/[\s,\.]+/g,"")}getAuthorPossessive(){let t=this.story.author;this.authorPossessive=t+"'"+("s"===t[t.length-1]?"":"s")}getUserId(){this.userService.getUserByUsername(this.story.author).subscribe(t=>{this.userId=t[0]._id})}getFeedbackAudio(){this.storyService.getFeedbackAudio(this.story._id).subscribe(t=>{"audio/mp3"==t.type&&(this.audioSource=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(t)))})}sendFeedback(){let t=null;this.story.htmlText!==this.story.feedback.feedbackMarkup&&(t=this.story.feedback.feedbackMarkup),this.storyService.addFeedback(this.story._id,this.story.feedback.text,t).subscribe(o=>{this.feedbackSent=!0}),this.initialMarkupText=t}openRecordingDialog(){this.dialogRef=this.dialog.open(G.g,{data:{type:"feedbackAudio",id:this.story._id,confirmButton:this.ts.l.save},width:"30vh"}),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=void 0,t&&this.getFeedbackAudio()})}openUpdateStoryTextDialog(){this.dialogRef=this.dialog.open(f.p,{data:{title:this.ts.l.story_updated,message:this.ts.l.student_has_made_changes_since_feedback.replace("#",this.story.author),confirmText:this.ts.l.yes,cancelText:this.ts.l.no},width:"60vh"}),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=void 0,t&&(this.storyService.updateFeedbackMarkup(this.story._id,null).subscribe(),this.story.feedback.feedbackMarkup=this.story.htmlText)})}onEditorCreated(t){this.quillEditor=t,this.quillEditor.root.setAttribute("spellcheck","false")}goBack(){this.initialMarkupText!==this.story.feedback.feedbackMarkup?(this.dialogRef=this.dialog.open(f.p,{data:{title:this.ts.l.save_changes,message:this.ts.l.would_you_like_save_feedback_changes,confirmText:this.ts.l.yes,cancelText:this.ts.l.no},width:"60vh"}),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=void 0,t&&this.sendFeedback(),this.router.navigateByUrl("teacher/student/"+this.userId)})):this.router.navigateByUrl("teacher/student/"+this.userId)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(d.gz),e.Y36($.eN),e.Y36(b.N),e.Y36(L.H7),e.Y36(m.D),e.Y36(d.F0),e.Y36(v.K),e.Y36(S.H),e.Y36(y.$),e.Y36(C.uw))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-teacher-story"]],decls:46,vars:21,consts:[[1,"contents"],[1,"classContainer"],[1,"classHeader"],[1,"backArrow",3,"click"],[1,"fas","fa-arrow-left"],["class","madeWithPrompts",4,"ngIf"],[1,"storyClassBody"],[1,"storyTextContainer"],[1,"storyTextHeader"],["class","fa fa-redo-alt refresh",3,"click",4,"ngIf"],["class","storyText","placeholder","","name","text",3,"modules","ngModel","ngModelChange","onEditorCreated",4,"ngIf"],[1,"storyInfoContainer"],[1,"storyInfoBody"],[1,"userInfoContainer"],[1,"userInfo"],["readonly","",1,"userInfoTextarea"],["class","userInfo",4,"ngIf"],[1,"feedbackContainer"],[1,"feedbackHeaderTeacherStory"],["class","feedbackBody",4,"ngIf"],[1,"feedbackFooter"],["class","seenByStudent",4,"ngIf"],[1,"sendFeedbackBtn"],["class","headerIconBtn",3,"click",4,"ngIf"],["class","headerIconBtn",4,"ngIf"],[1,"feedbackBtnContainer"],[4,"ngIf"],[1,"headerIconBtn",3,"click"],[1,"madeWithPrompts"],[1,"fa","fa-redo-alt","refresh",3,"click"],["placeholder","","name","text",1,"storyText",3,"modules","ngModel","ngModelChange","onEditorCreated"],[1,"feedbackBody"],["spellcheck","false",1,"feedbackTextarea",3,"placeholder","ngModel","ngModelChange","input"],[1,"seenByStudent"],[1,"fas","fa-check"],[1,"fas","fa-paper-plane"],[1,"headerIconBtn"],["id","audio","controls","",1,"audioPlayer",3,"src"],["audioTag",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.NdJ("click",function(){return o.goBack()}),e._UZ(4,"i",4),e.qZA(),e._uU(5),e.YNc(6,W,2,1,"div",5),e.qZA(),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8),e._uU(10),e.YNc(11,X,1,0,"i",9),e.qZA(),e.YNc(12,V,1,2,"quill-editor",10),e.qZA(),e.TgZ(13,"div",11)(14,"div",8),e._uU(15),e.qZA(),e.TgZ(16,"div",12)(17,"div",13)(18,"div",14),e._uU(19),e.TgZ(20,"textarea",15),e._uU(21),e.qZA()(),e.TgZ(22,"div",14),e._uU(23),e.TgZ(24,"textarea",15),e._uU(25),e.qZA()(),e.YNc(26,ee,5,5,"div",16),e.YNc(27,te,5,5,"div",16),e.TgZ(28,"div",14),e._uU(29),e.TgZ(30,"textarea",15),e._uU(31),e.qZA()()(),e.TgZ(32,"div",17)(33,"div",18),e._uU(34),e.qZA(),e.YNc(35,oe,2,3,"div",19),e.TgZ(36,"div",20),e.YNc(37,ie,3,2,"div",21),e.TgZ(38,"div",22),e.YNc(39,re,3,1,"button",23),e.YNc(40,ae,3,1,"button",24),e.qZA()(),e.TgZ(41,"div",25),e.YNc(42,le,3,1,"div",26),e.TgZ(43,"div")(44,"button",27),e.NdJ("click",function(){return o.openRecordingDialog()}),e._uU(45),e.qZA()()()()()()()()()),2&t&&(e.xp6(5),e.hij(" ",null==o.story?null:o.story.title," "),e.xp6(1),e.Q6J("ngIf",null==o.story?null:o.story.createdWithPrompts),e.xp6(4),e.Oqu(o.ts.l.text),e.xp6(1),e.Q6J("ngIf",o.storyUpdated),e.xp6(1),e.Q6J("ngIf",o.story),e.xp6(3),e.Oqu(o.ts.l.information),e.xp6(4),e.hij("",o.ts.l.title," "),e.xp6(2),e.Oqu(null==o.story?null:o.story.title),e.xp6(2),e.hij("",o.ts.l.story_author," "),e.xp6(2),e.Oqu(null==o.story?null:o.story.author),e.xp6(1),e.Q6J("ngIf",o.isFromAmerica),e.xp6(1),e.Q6J("ngIf",!o.isFromAmerica),e.xp6(2),e.hij("",o.ts.l.dialect," "),e.xp6(2),e.Oqu(null==o.story?null:o.story.dialect),e.xp6(3),e.Oqu(o.ts.l.feedback),e.xp6(1),e.Q6J("ngIf",o.story),e.xp6(2),e.Q6J("ngIf",o.story),e.xp6(2),e.Q6J("ngIf",!o.feedbackSent),e.xp6(1),e.Q6J("ngIf",o.feedbackSent),e.xp6(2),e.Q6J("ngIf",o.audioSource),e.xp6(3),e.Oqu(o.ts.l.audio_message))},dependencies:[u.O5,c.Fj,c.JJ,c.On,q.g6,u.uU],styles:[".contents{display:flex;padding-left:5%;padding-right:5%}.classContainer{display:inline-flex;flex-direction:column}.madeWithPrompts{color:#fff6;padding-left:5px}.storyClassBody{display:inline-flex;flex-direction:row;padding:5px;gap:1rem;flex-grow:1;overflow-y:scroll}.storyClassBody>*{flex:1}.storyTextContainer{display:inline-flex;flex-direction:column;background-color:var(--scealai-gray);border-radius:5px}.storyTextHeader{background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0;color:#fff;padding:4px;font-size:12pt}.refresh{float:right;padding:5px 10px 5px 5px}.refresh:hover{color:var(--scealai-light-green);cursor:pointer}.storyText{text-align:left;padding:4px;overflow:auto;white-space:pre-wrap;background-color:#fff;border-radius:5px;margin:8px;height:100%}.ql-toolbar.ql-snow{box-sizing:border-box;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;padding:8px;text-align:center}.ql-editor{background-color:#fff;z-index:1;font-size:14pt;font-family:Times New Roman,Times,serif}.storyInfoContainer{display:inline-flex;flex-direction:column;background-color:var(--scealai-gray);border-radius:5px}.storyInfoBody{display:inline-flex;flex-direction:column;margin:8px;overflow:auto;height:100%}.userInfoContainer{flex:.75}.userInfo{float:right;display:flex;align-items:center;padding-top:8px;width:100%;white-space:nowrap}.userInfoTextarea{width:100%}.feedbackContainer{background-color:#fff;border-radius:5px;display:flex;flex-direction:column;flex:2}.feedbackHeaderTeacherStory{width:100%;background-color:var(--scealai-dark-green);border-radius:5px 5px 0 0;color:#fff;padding:4px}.feedbackBody{padding:4px;text-align:left;overflow-y:scroll;height:100%}.feedbackTextarea{border:none;width:100%;resize:none;height:100%}.feedbackFooter{width:100%;display:flex;align-items:center;padding:4px;border-top:1px solid var(--scealai-gray);border-radius:5px;margin-top:auto}.seenByStudent{font-size:10pt;color:var(--scealai-light-gray);margin-left:4px}.sendFeedbackBtn{margin-left:auto}.feedbackBtnContainer{width:100%;display:flex;align-items:center;justify-content:center;padding-bottom:5px}.audioPlayer{height:32px;margin-top:7px}@keyframes blinker{0%{opacity:1}to{opacity:0}}@media only screen and (max-width: 1000px) and (max-height: 750px){.userInfo{font-size:12px}}\n",'.ql-editor{overflow-y:auto}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=times-new-roman]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=times-new-roman]:before{content:"Times New Roman";font-family:Times New Roman}.ql-font-times-new-roman{font-family:times new roman}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=arial]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=arial]:before{content:"Arial";font-family:arial}.ql-font-arial{font-family:arial}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=sans-serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=sans-serif]:before{content:"Sans Serif";font-family:"sans serif"}.ql-font-sans-serif{font-family:"sans serif"}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{content:"Monospace";font-family:"monospace"}.ql-font-monospace{font-family:"monospace"}\n'],encapsulation:2}),s})();var k=l(3546);function de(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",15)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"i",16),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.removeStudent(r._id))}),e.qZA()()}if(2&s){const t=i.$implicit;e.xp6(2),e.Oqu(t.username)}}function pe(s,i){if(1&s&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.hij(" *",t.ts.l.dictogloss_required,". ")}}function he(s,i){if(1&s&&(e.TgZ(0,"div",13),e.YNc(1,pe,2,1,"div",14),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.newDictogloss.controls.passage.errors.required)}}function ge(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectAllStudents())}),e._uU(1),e.qZA()}if(2&s){const t=e.oxw();e.xp6(1),e.Oqu(t.ts.l.select_all)}}function fe(s,i){if(1&s&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" *",t.ts.l.choose_at_least_one_student," ")}}function _e(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectAllStudents())}),e._uU(1),e.qZA()}if(2&s){const t=e.oxw();e.xp6(1),e.Oqu(t.ts.l.deselect_all)}}function me(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"mat-card",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.updateSendList(n._id))}),e.TgZ(1,"b"),e._uU(2),e.qZA()()}if(2&s){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.username)}}function Te(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"mat-card",20),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw();return e.KtG(r.updateSendList(n._id))}),e.TgZ(1,"b"),e._uU(2),e.qZA()()}if(2&s){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.username)}}function ve(s,i){if(1&s&&(e.TgZ(0,"div",16),e.YNc(1,me,3,1,"mat-card",17),e.YNc(2,Te,3,1,"mat-card",18),e.qZA()),2&s){const t=i.$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",-1==o.sendTo.indexOf(t._id)),e.xp6(1),e.Q6J("ngIf",-1!=o.sendTo.indexOf(t._id))}}const xe=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"dashboard",pathMatch:"full",component:O},{path:"classroom/:id",pathMatch:"full",component:D},{path:"student/:id",pathMatch:"full",component:E},{path:"story/:id",pathMatch:"full",component:ce},{path:"teacher-settings/:id",pathMatch:"full",component:(()=>{class s{constructor(t,o,n,r,a){this.route=t,this.ts=o,this.classroomService=n,this.dialog=r,this.userService=a,this.students=[],this.checkerSelection={anGramadoir:!0,relativeClause:!0,genitive:!0,broadSlender:!0,gaelSpell:!0},this.changesSaved=!0}ngOnInit(){var t=this;return(0,h.Z)(function*(){t.classroom=yield(0,p.z)(t.classroomService.getClassroom(t.route.snapshot.params.id)),t.students=[];for(let n of t.classroom.studentIds)t.userService.getUserById(n).subscribe({next:r=>{t.students.push(r),t.students.sort((a,g)=>a.username.toLowerCase().localeCompare(g.username.toLowerCase()))},error:()=>console.log(n+" does not exist")});let o=yield(0,p.z)(t.classroomService.getClassroomCheckers(t.classroom._id));if(o.length>0)for(const n in t.checkerSelection)t.checkerSelection[n]=!!o.includes(n)})()}openUpdateClassroomDialog(){this.dialogRef=this.dialog.open(f.p,{data:{title:this.ts.l.edit_classroom_title,type:"updateText",confirmText:this.ts.l.save,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=void 0,t&&this.classroomService.editTitle(this.classroom._id,t[0]).subscribe(()=>{this.ngOnInit()},n=>{alert(n)})})}openInformationDialog(){this.dialogRef=this.dialog.open(f.p,{data:{title:"Grammar Checkers",type:"simpleMessage",message:`\n        <p><h5> An Gramadoir:</h5> ${this.ts.l.an_gramadoir_description}</p><br>\n        <p><h5>${this.ts.l.relative_clause_checker}:</h5> ${this.ts.l.relative_clause_checker_description} </p><br>\n        <p><h5>${this.ts.l.genitive_checker}:</h5> ${this.ts.l.genitive_checker_description} </p><br>\n        <p><h5>${this.ts.l.broad_slender_checker}:</h5> ${this.ts.l.broad_slender_checker_description} </p><br>\n        <p><h5> GaelSpell:</h5> ${this.ts.l.gael_spell_description} </p>\n        `,confirmText:this.ts.l.done},width:"80vh"}),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=void 0})}removeStudent(t){this.dialogRef=this.dialog.open(f.p,{data:{title:this.ts.l.want_to_remove_student_from_class,confirmText:this.ts.l.delete,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(o=>{this.dialogRef=void 0,o&&this.classroomService.removeStudentFromClassroom(this.classroom._id,t).subscribe(()=>{this.ngOnInit()})})}updateCheckers(){var t=this;return(0,h.Z)(function*(){let o=[];for(const n in t.checkerSelection)t.checkerSelection[n]&&o.push(n);yield(0,p.z)(t.classroomService.setClassroomCheckers(t.classroom._id,o)),t.changesSaved=!0})()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(d.gz),e.Y36(m.D),e.Y36(T.u),e.Y36(C.uw),e.Y36(v.K))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-teacher-settings"]],decls:36,vars:14,consts:[[1,"contents"],[1,"classContainer"],[1,"classHeader"],["routerLink","/teacher/dashboard",1,"backArrow"],[1,"fas","fa-arrow-left"],[1,"classTitle"],[1,"fas","fa-edit","headerIconBtn",3,"click"],[1,"sectionTitle"],[1,"classBody"],["class","classCard",4,"ngFor","ngForOf"],[2,"text-align","left","margin-left","5%","padding-bottom","10px"],[1,"checkBoxes"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"saveBtn"],[1,"greenBtn",3,"click"],[1,"classCard"],["aria-hidden","true",1,"fa","fa-times","deleteX",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"i",4),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"div",5)(7,"h2"),e._uU(8),e.qZA(),e.TgZ(9,"i",6),e.NdJ("click",function(){return o.openUpdateClassroomDialog()}),e.qZA()(),e.TgZ(10,"h5",7),e._uU(11),e.qZA(),e.TgZ(12,"mat-card")(13,"div",8),e.YNc(14,de,4,1,"div",9),e.qZA()(),e.TgZ(15,"h5",7),e._uU(16),e.qZA(),e.TgZ(17,"mat-card")(18,"h6",10),e._uU(19),e.qZA(),e.TgZ(20,"div",11)(21,"span")(22,"input",12),e.NdJ("ngModelChange",function(r){return o.checkerSelection.anGramadoir=r})("ngModelChange",function(){return o.changesSaved=!1}),e.qZA(),e._uU(23," An Gramadoir"),e.qZA(),e.TgZ(24,"span")(25,"input",12),e.NdJ("ngModelChange",function(r){return o.checkerSelection.relativeClause=r})("ngModelChange",function(){return o.changesSaved=!1}),e.qZA(),e._uU(26),e.qZA(),e.TgZ(27,"span")(28,"input",12),e.NdJ("ngModelChange",function(r){return o.checkerSelection.genitive=r})("ngModelChange",function(){return o.changesSaved=!1}),e.qZA(),e._uU(29),e.qZA(),e.TgZ(30,"span")(31,"input",12),e.NdJ("ngModelChange",function(r){return o.checkerSelection.broadSlender=r})("ngModelChange",function(){return o.changesSaved=!1}),e.qZA(),e._uU(32),e.qZA()(),e.TgZ(33,"div",13)(34,"button",14),e.NdJ("click",function(){return o.updateCheckers()}),e._uU(35),e.qZA()()()()()),2&t&&(e.xp6(5),e.hij(" ",o.ts.l.classrooms," "),e.xp6(3),e.hij(" ",null==o.classroom?null:o.classroom.title," "),e.xp6(3),e.hij(" ",o.ts.l.students_enrolled," "),e.xp6(3),e.Q6J("ngForOf",o.students),e.xp6(2),e.hij(" ",o.ts.l.grammar_checker_options," "),e.xp6(3),e.hij(" ",o.ts.l.select_which_grammar_checker_for_students_to_use,". "),e.xp6(3),e.Q6J("ngModel",o.checkerSelection.anGramadoir),e.xp6(3),e.Q6J("ngModel",o.checkerSelection.relativeClause),e.xp6(1),e.hij(" ",o.ts.l.relative_clause_checker,""),e.xp6(2),e.Q6J("ngModel",o.checkerSelection.genitive),e.xp6(1),e.hij(" ",o.ts.l.genitive_checker,""),e.xp6(2),e.Q6J("ngModel",o.checkerSelection.broadSlender),e.xp6(1),e.hij(" ",o.ts.l.broad_slender_checker,""),e.xp6(3),e.hij(" ",o.changesSaved?o.ts.l.saved:o.ts.l.save," "))},dependencies:[u.sg,d.rH,c.Wl,c.JJ,c.On,k.a8],styles:[".contents[_ngcontent-%COMP%]{display:flex;padding-left:5%;padding-right:5%}.classTitle[_ngcontent-%COMP%]{padding-top:20px;display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:.5rem}.sectionTitle[_ngcontent-%COMP%]{text-align:left;margin-left:5%;font-weight:700;padding-bottom:10px;padding-top:20px}mat-card[_ngcontent-%COMP%]{width:90%;margin-left:5%;max-height:50vh;overflow-y:scroll}.classBody[_ngcontent-%COMP%]{max-height:25vh}.classCard[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;padding:8px;color:#fff;font-size:14pt;background-color:var(--scealai-med-brown);border-radius:5px;margin-top:5px}.deleteX[_ngcontent-%COMP%]:hover{color:var(--orange-text);background-color:var(--scealai-med-brown-hover);transition:color,background-color,.5s;cursor:pointer}.checkBoxes[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-evenly;flex-wrap:wrap;margin-left:5%;margin-right:5%;gap:1rem}input[_ngcontent-%COMP%]:hover{cursor:pointer}.saveBtn[_ngcontent-%COMP%]{text-align:right;margin-right:5%;padding-top:20px}@media (max-width: 550px){.classHeader[_ngcontent-%COMP%], .headerIconBtn[_ngcontent-%COMP%]{font-size:10pt}}"]}),s})()},{path:"teacher-dictogloss/:id",pathMatch:"full",component:(()=>{class s{constructor(t,o,n,r,a,g,_,x){this.ts=t,this.auth=o,this.classroomService=n,this.userService=r,this.router=a,this.route=g,this.fb=_,this.messageService=x,this.students=[],this.sendTo=[],this.allStudentsSelected=!0,this.createDictoglosForm()}ngOnInit(){var t=this;return(0,h.Z)(function*(){t.classroom=yield(0,p.z)(t.classroomService.getClassroom(t.route.snapshot.params.id));for(let o of t.classroom.studentIds)t.userService.getUserById(o).subscribe({next:n=>{t.students.push(n),t.sendTo.push(o)},error:()=>console.log(o+" does not exist")})})()}createDictoglosForm(){this.newDictogloss=this.fb.group({passage:["",c.kI.required]})}sendDictogloss(){var t=this;return(0,h.Z)(function*(){if(t.sendTo.length>0&&""!==t.newDictogloss.controls.passage.value){let o=t.newDictogloss.get("passage").value;console.log(o),console.log(t.sendTo);let n={subject:"Dictogloss",date:new Date,senderId:t.auth.getUserDetails()._id,senderUsername:t.auth.getUserDetails().username,text:o,seenByRecipient:!1};for(let r of t.sendTo)yield(0,p.z)(t.messageService.saveMessage(n,r));t.goToDashboard()}})()}selectAllStudents(){this.allStudentsSelected=!this.allStudentsSelected,this.sendTo=[],this.allStudentsSelected&&this.students.forEach(t=>this.sendTo.push(t._id)),console.log("All students selected/deselected: ",this.sendTo)}updateSendList(t){this.sendTo.includes(t)?this.sendTo.splice(this.sendTo.indexOf(t),1):this.sendTo.push(t)}goToDashboard(){this.router.navigateByUrl("teacher/dashboard")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(m.D),e.Y36(y.$),e.Y36(T.u),e.Y36(v.K),e.Y36(d.F0),e.Y36(d.gz),e.Y36(c.qu),e.Y36(w.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-teacher-dictogloss"]],decls:25,vars:12,consts:[[1,"container"],[3,"formGroup"],["novalidate","",1,"formGroup"],[2,"display","flex","justify-content","center"],["spellcheck","false","id","textSelector","data-cy","passage","formControlName","passage","rows","4","maxlength","2000",1,"textarea",3,"placeholder"],["class","validationAlert",4,"ngIf"],[1,"select"],["class","button selectAll",3,"click",4,"ngIf","ngIfElse"],["deselected",""],[1,"classroomCluster"],["class","studentCard",4,"ngFor","ngForOf"],[2,"margin-top","8px"],[1,"button",3,"click"],[1,"validationAlert"],[4,"ngIf"],[1,"button","selectAll",3,"click"],[1,"studentCard"],["class","button deselected",3,"click",4,"ngIf"],["class","button selected",3,"click",4,"ngIf"],[1,"button","deselected",3,"click"],[1,"button","selected",3,"click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"h5"),e._uU(6),e.qZA(),e.TgZ(7,"form",1)(8,"div",2)(9,"div",3)(10,"textarea",4),e._uU(11,"                "),e.qZA()(),e.YNc(12,he,2,1,"div",5),e.qZA()(),e.TgZ(13,"div",6),e.YNc(14,ge,2,1,"button",7),e.YNc(15,fe,2,1,"div",5),e.YNc(16,_e,2,1,"ng-template",null,8,e.W1O),e.qZA(),e.TgZ(18,"div",9),e.YNc(19,ve,3,2,"div",10),e.qZA(),e.TgZ(20,"div",11)(21,"button",12),e.NdJ("click",function(){return o.goToDashboard()}),e._uU(22),e.qZA(),e.TgZ(23,"button",12),e.NdJ("click",function(){return o.sendDictogloss()}),e._uU(24),e.qZA()()()),2&t){const n=e.MAs(17);e.xp6(2),e.Oqu(o.ts.l.teacher_send_dictogloss),e.xp6(2),e.Oqu(o.ts.l.teacher_send_dictogloss_info),e.xp6(2),e.Oqu(o.ts.l.dictogloss_char_limit),e.xp6(1),e.Q6J("formGroup",o.newDictogloss),e.xp6(3),e.s9C("placeholder",o.ts.l.dictogloss_type_story),e.xp6(2),e.Q6J("ngIf",o.newDictogloss.controls.passage.invalid&&(o.newDictogloss.controls.passage.dirty||o.newDictogloss.controls.passage.touched)),e.xp6(2),e.Q6J("ngIf",!o.allStudentsSelected)("ngIfElse",n),e.xp6(1),e.Q6J("ngIf",!(o.sendTo.length>0)),e.xp6(4),e.Q6J("ngForOf",o.students),e.xp6(3),e.Oqu(o.ts.l.go_to_dashboard),e.xp6(2),e.Oqu(o.ts.l.teacher_send_dictogloss)}},dependencies:[u.sg,u.O5,c._Y,c.Fj,c.JJ,c.JL,c.nD,k.a8,c.sg,c.u],styles:[".container[_ngcontent-%COMP%]{width:90%;background-color:#fff;border-radius:4px;padding-top:20px;padding-bottom:20px;box-shadow:-1px 5px 32px 10px #0003;animation-duration:1s;animation-name:fadeIn}.studentCard[_ngcontent-%COMP%]{width:100%;justify-content:center;display:inline-block;background-color:#fff;align-items:center;padding:8px;font-size:14pt;border-radius:5px;margin-top:5px}.studentCard[_ngcontent-%COMP%]:hover{cursor:pointer}.textarea[_ngcontent-%COMP%]{width:90%;resize:none;border-style:solid;border-radius:4px;padding:4px}.classroomCluster[_ngcontent-%COMP%]{padding:4px;justify-content:center;display:inline-block}.button[_ngcontent-%COMP%]{border-color:#0000001a;border-radius:8px;border-width:1px;letter-spacing:1px;background-color:#7e76761a;margin:4px}.button[_ngcontent-%COMP%]:hover{background-color:#2ee59d;box-shadow:0 15px 20px #2ee59d66;color:#fff;transform:translateY(-2px)}.select[_ngcontent-%COMP%]{margin-top:16px}.button.selectAll[_ngcontent-%COMP%]{border-width:2px;border-color:#00000080}.button.deselected[_ngcontent-%COMP%]{background-color:#e52e2e;color:#fff}.button.selected[_ngcontent-%COMP%]{background-color:#2ee59d;color:#fff}.validationAlert[_ngcontent-%COMP%]{color:red}@keyframes fadeIn{0%{opacity:0%;transform:translateY(100px) scale(.9)}to{opacity:100%;transform:translateY(0) scale(1)}}@keyframes fadeInButton{0%{opacity:0%}to{opacity:100%}}"]}),s})()}];let Ce=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[d.Bz.forChild(xe),d.Bz]}),s})(),ye=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[u.ez,Ce,c.u5,k.QW,c.UX,q.fi.forRoot({customOptions:[{import:"formats/font",whitelist:["sans-serif","serif","monospace","arial","times-new-roman"]}]})]}),s})()}}]);
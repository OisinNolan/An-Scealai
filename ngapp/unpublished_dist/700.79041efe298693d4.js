(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[700],{4700:(p,v,n)=>{"use strict";n.r(v),n.d(v,{StudentModule:()=>jn});var d=n(6895),s=n(1390),i=n(970),u=n(4633),g=n(8977),e=n(4650),o=n(5412);let c=(()=>{class a{canDeactivate(t,r,l){return!!t.storySaved||(t.showModal(),t.modalChoice)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),T=(()=>{class a{constructor(t,r){this.dialog=t,this.ts=r}canDeactivate(t){if(t.recordingSaved)return!0;let r;return r=this.dialog.open(u.p,{data:{title:this.ts.l.save_changes_made_to_this_recording,type:"",confirmText:this.ts.l.save,cancelText:this.ts.l.cancel},width:"30vh"}),r.afterClosed().subscribe(l=>{if(r=void 0,l)return t.saveRecordings(),!0}),!1}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(o.uw),e.LFG(g.D))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),m=(()=>{class a{canDeactivate(t,r,l){if(t.chosenSections)for(const b of t.chosenSections)b.stop();return!0}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var f=n(5861),x=n(4412);class y extends x.i{constructor(){super(...arguments),this.createdWithPrompts=!1}}var _=n(1765),C=n(1745),S=n(1512),k=n(6469),O=n(4687),w=n(1245),M=n(25),F=n(5042),j=n(530),D=n(8443);let U=(()=>{class a{transform(t,r){return t?r?(r=r.toLocaleLowerCase(),t.filter(l=>l instanceof D.n?l.username.toLocaleLowerCase().includes(r):l instanceof y?l.title.toLocaleLowerCase().includes(r)||l.text.toLocaleLowerCase().includes(r):void 0)):t:[]}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275pipe=e.Yjl({name:"appFilter",type:a,pure:!0}),a})();var B=n(3905),R=n(4006),X=n(9121);function E(a,h){1&a&&(e.TgZ(0,"div",17),e._UZ(1,"grid-spinner"),e.qZA())}function ee(a,h){if(1&a&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.click_new_story," ")}}function ae(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"input",23),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,b=e.oxw();return e.KtG(b.toggleDelete(l._id))}),e.qZA()}}function ge(a,h){if(1&a&&(e.TgZ(0,"div",24),e._uU(1),e.ALo(2,"date"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.lastUpdated,"M/d/yy, h:mm a"))}}function Te(a,h){if(1&a&&(e.TgZ(0,"div",24),e._uU(1),e.ALo(2,"date"),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.lastUpdated,"d/M/yy, h:mm a"))}}const Ce=function(a){return["../dashboard",a]};function we(a,h){if(1&a&&(e.TgZ(0,"div")(1,"div",18)(2,"div",19),e.YNc(3,ae,1,0,"input",20),e.TgZ(4,"div",21),e._uU(5),e.qZA()(),e.YNc(6,ge,3,4,"div",22),e.YNc(7,Te,3,4,"div",22),e.qZA(),e._UZ(8,"hr"),e.qZA()),2&a){const t=h.$implicit,r=e.oxw();e.xp6(3),e.Q6J("ngIf",r.deleteMode),e.xp6(1),e.Q6J("searchedWord",r.searchText)("content",t.title)("classToApply","font-weight-bold")("setTitle","true")("routerLink",e.VKq(9,Ce,t._id)),e.xp6(1),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngIf",r.isFromAmerica),e.xp6(1),e.Q6J("ngIf",!r.isFromAmerica)}}function fe(a,h){if(1&a&&(e.TgZ(0,"span",27),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.unreadMessages," ")}}function Se(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.goToMessages())}),e._uU(1),e.YNc(2,fe,2,1,"span",26),e.qZA()}if(2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.messages," "),e.xp6(1),e.Q6J("ngIf",t.unreadMessages>0)}}function Ae(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.goToStats())}),e._uU(1),e.qZA()}if(2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.stats," ")}}let Me=(()=>{class a{constructor(t,r,l,b,A,P,I,L,q,H,z){this.storyService=t,this.auth=r,this.engagement=l,this.ts=b,this.router=A,this.messageService=P,this.profileService=I,this.classroomService=L,this.notificationService=q,this.recordingService=H,this.dialog=z,this.stories=[],this.toBeDeleted=[],this.userId="",this.messagesForNotifications=[],this.unreadMessages=0,this.isFromAmerica=!1,this.isEnrolled=!1,this.searchText="",this.storiesLoaded=!1}ngOnInit(){var t=this;return(0,f.Z)(function*(){const r=t.auth.getUserDetails();r?(t.stories=(yield(0,B.z)(t.storyService.getStoriesForLoggedInUser())).map(l=>(new y).fromJSON(l)),t.stories.sort((l,b)=>l.date>b.date?-1:1),t.storiesLoaded=!0,t.userId=r._id,t.deleteMode=!1,t.toBeDeleted=[],t.notificationService.getStudentNotifications(),t.classroomService.getClassroomOfStudent(t.userId).subscribe(l=>{t.isEnrolled=null!=l}),t.messageService.getMessagesForLoggedInUser().subscribe(l=>{t.messagesForNotifications=l,t.unreadMessages=t.messageService.getNumberOfUnreadMessages(t.messagesForNotifications)}),t.profileService.getForUser(t.userId).subscribe(l=>{let A=l.profile.country;t.isFromAmerica="United States of America"==A||"America"==A||"USA"==A||"United States"==A},l=>{t.router.navigateByUrl("/register-profile")})):t.auth.logout()})()}toggleDeleteMode(){if(this.deleteMode&&this.toBeDeleted.length>0)for(let t of this.toBeDeleted)this.engagement.addEventForLoggedInUser(S.tw["DELETE-STORY"],{_id:t}),this.recordingService.deleteStoryRecordingAudio(t).subscribe(r=>{}),this.recordingService.deleteStoryRecording(t).subscribe(r=>{}),this.storyService.deleteStory(t).subscribe(r=>{this.ngOnInit()});else this.deleteMode=!this.deleteMode||0!==this.toBeDeleted.length}toggleEditMode(){this.editMode=!this.editMode}toggleDelete(t){if(this.toBeDeleted.includes(t)){var r=this.toBeDeleted.indexOf(t);this.toBeDeleted.splice(r,1)}else this.toBeDeleted.push(t)}goToMessages(){this.router.navigateByUrl("/messages/"+this.userId)}goToStats(){this.router.navigateByUrl("/stats-dashboard/"+this.userId)}createNewStory(){var t=this;this.dialogRef=this.dialog.open(u.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var r=(0,f.Z)(function*(l){if(t.dialogRef=void 0,l)if(l[0]){let b="connemara";l[1]==t.ts.l.munster&&(b="kerry"),l[1]==t.ts.l.ulster&&(b="donegal"),t.storyService.saveStory(t.auth.getUserDetails()._id,l[0],new Date,b,"",t.auth.getUserDetails().username,!1)}else alert(t.ts.l.title_required)});return function(l){return r.apply(this,arguments)}}())}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.N),e.Y36(C.$),e.Y36(k.M),e.Y36(g.D),e.Y36(s.F0),e.Y36(w.e),e.Y36(O.H),e.Y36(M.u),e.Y36(F.g),e.Y36(j.s),e.Y36(o.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-book-contents"]],features:[e._Bn([U])],decls:27,vars:17,consts:[[1,"bookContainer"],[1,"contentsContainer"],[1,"bookContentsTitle"],[1,"contentsTitleContainer"],[1,"contentsLinkTitle"],[1,"contentsDateTitle"],["role","main"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"contentsLinkContainer"],["class","newStoryMessage",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"contentsBtnsContainer"],[1,"btn","deleteBtn",3,"click"],["src","assets/img/trash.ico",1,"trashImg"],["class","btn messagesBtn",3,"click",4,"ngIf"],["data-cy","create-story",1,"btn","newStoryBtn",3,"click"],[1,"newStoryMessage"],[1,"contentSection"],[1,"contentsLink"],["type","checkbox","class","deleteCheckbox",3,"click",4,"ngIf"],["appHighlight","",3,"searchedWord","content","classToApply","setTitle","routerLink"],["class","contentsDate",4,"ngIf"],["type","checkbox",1,"deleteCheckbox",3,"click"],[1,"contentsDate"],[1,"btn","messagesBtn",3,"click"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3)(5,"div",4),e._uU(6),e.qZA(),e.TgZ(7,"div",5),e._uU(8),e.qZA()(),e.TgZ(9,"div",6)(10,"div")(11,"div",7)(12,"input",8),e.NdJ("ngModelChange",function(b){return r.searchText=b}),e.qZA()()()(),e.TgZ(13,"div",9)(14,"div"),e._uU(15),e.qZA(),e.YNc(16,E,2,0,"div",10),e.YNc(17,ee,2,1,"div",10),e.YNc(18,we,9,11,"div",11),e.ALo(19,"appFilter"),e.qZA(),e.TgZ(20,"div",12)(21,"button",13),e.NdJ("click",function(){return r.toggleDeleteMode()}),e._UZ(22,"img",14),e.qZA(),e.YNc(23,Se,3,2,"button",15),e.YNc(24,Ae,2,1,"button",15),e.TgZ(25,"button",16),e.NdJ("click",function(){return r.createNewStory()}),e._uU(26),e.qZA()()()()),2&t&&(e.xp6(3),e.Oqu(r.ts.l.my_stories),e.xp6(3),e.Oqu(r.ts.l.title),e.xp6(2),e.Oqu(r.ts.l.last_updated),e.xp6(4),e.s9C("placeholder",r.ts.l.search_story_title_or_content),e.Q6J("ngModel",r.searchText),e.xp6(3),e.hij(" ",r.ts.l.loading," "),e.xp6(1),e.Q6J("ngIf",!r.storiesLoaded),e.xp6(1),e.Q6J("ngIf",0===r.stories.length&&r.storiesLoaded),e.xp6(1),e.Q6J("ngForOf",e.xi3(19,14,r.stories,r.searchText)),e.xp6(3),e.ekj("deleteModeBtn",r.deleteMode),e.xp6(2),e.Q6J("ngIf",r.isEnrolled),e.xp6(1),e.Q6J("ngIf",r.stories.length>0),e.xp6(2),e.hij("",r.ts.l.new_story," "))},dependencies:[d.sg,d.O5,s.rH,R.Fj,R.JJ,R.On,X.P,d.uU,U],styles:[".bookContainer[_ngcontent-%COMP%]{height:auto;width:80%;background:url(https://www.abair.ie/scealai/assets/img/paperBg.jpg) no-repeat center fixed;margin-left:10%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.contentsContainer[_ngcontent-%COMP%]{padding:20px}.bookContentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);padding-left:5%;padding-right:5%;display:inline-block;font-size:18pt}.contentsLinkContainer[_ngcontent-%COMP%]{height:500px;overflow:auto;padding:10px;background-color:#f7f2e7;box-shadow:inset 0 0 12px #00000080;border-radius:5px}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.contentsDate[_ngcontent-%COMP%]{color:var(--dark-text)}.contentsBtnsContainer[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:1rem}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;padding:2px 7px 7px;height:38px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:24px}.messagesBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;border-radius:5px;display:flex}.messagesBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.newStoryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.newStoryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}@media only screen and (max-width: 700px){.contentsContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%}.contentsLinkContainer[_ngcontent-%COMP%]{height:270px;padding-top:10px}.contentsLinkTitle[_ngcontent-%COMP%], .contentsDateTitle[_ngcontent-%COMP%]{font-size:12pt}.optionsPopupBtn[_ngcontent-%COMP%]{padding:2px 5px 5px;margin:0 4px 0 0;height:30px;font-size:12pt}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:0 3px 3px;height:30px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:20px}}.newStoryMessage[_ngcontent-%COMP%]{color:#a79d88;width:80%;margin-left:10%;margin-top:30px}@media only screen and (min-width: 700px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}@media only screen and (min-width: 1400px) and (min-height: 800px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}"]}),a})();var pe=n(7579),ke=n(1884),Oe=n(9971),ce=n.n(Oe),W=n(9742),Pe=n(6618);let Ie=(()=>{class a{constructor(){}convertHtmlTextToArrayOfSentences(t){return this.sentences(this.convertHtmlToPlainText(t))}sentences(t){return this.naiveSentences(t)}splitWithReplacement(t,r){const l=t.split(r);return l.slice(0,-1).filter(Boolean).map(b=>b+r).concat(l.slice(-1).filter(Boolean))}extraShortening(t){return t.flatMap(r=>" "==r?[]:r.charAt(100)?this.splitWithReplacement(r,","):[r])}naiveSentences(t){let r=t.split("\n").filter(Boolean);for(const l of[".","!","?"])r=r.flatMap(b=>this.splitWithReplacement(b,l));return this.extraShortening(r)}convertHtmlToPlainText(t){const r=document.createElement("div");return r.innerHTML=t,r.textContent||r.innerText||""}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var he=n(9549),me=n(4385),Ee=n(3238);function Ze(a,h){if(1&a&&(e.TgZ(0,"mat-option",3),e._uU(1),e.qZA()),2&a){const t=h.$implicit,r=e.oxw();e.s9C("gender",t.gender),e.Q6J("value",t),e.xp6(1),e.hij(" ",t.note+t.name+" ("+r.ts.message(t.dialect)+") "," ")}}let Be=(()=>{class a{constructor(t){this.ts=t,this.voices=W.be,this.selected=this.voices[0],this.selectVoice=new e.vpe}ngOnInit(){this.selectVoice.emit(this.selected)}color(t){return t.startsWith("f")?"rgba(255, 191, 194)":"rgba(194, 218, 255)"}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["synth-voice-select"]],outputs:{selectVoice:"selectVoice"},decls:5,vars:3,consts:[["appearance","fill"],[3,"value","valueChange","selectionChange"],["matNativeControl","","required","",3,"gender","value",4,"ngFor","ngForOf"],["matNativeControl","","required","",3,"gender","value"]],template:function(t,r){1&t&&(e.TgZ(0,"mat-form-field",0)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",1),e.NdJ("valueChange",function(b){return r.selected=b})("selectionChange",function(b){return r.selectVoice.emit(b.value)}),e.YNc(4,Ze,2,3,"mat-option",2),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(r.ts.message("voice")),e.xp6(1),e.Q6J("value",r.selected),e.xp6(1),e.Q6J("ngForOf",r.voices))},dependencies:[d.sg,he.KE,he.hX,me.gD,Ee.ey],encapsulation:2}),a})();const Fe=["voiceSelect"];function N(a,h){1&a&&e._UZ(0,"div",11)}function de(a,h){1&a&&e._UZ(0,"div",11)}function Z(a,h){if(1&a&&e._UZ(0,"app-synth-item",12),2&a){const t=h.$implicit,r=h.index,l=e.oxw();e.Q6J("synthItem",t)("i",r)("storyId",l.storyId)}}let ne=(()=>{class a{constructor(t,r,l,b,A){this.router=t,this.textProcessor=r,this.cdref=l,this.synth=b,this.ts=A,this.hideEntireSynthesisPlayer=!0,this.synthItems=[],this.allAudioSources=[]}ngOnInit(){this.refresh()}refresh(t){t&&(this.selected=t),this.synthItems.map(r=>{r.audioUrl=void 0,r.dispose()}),this.text&&setTimeout(()=>{this.synthItems=this.textProcessor.sentences(this.text).map(r=>this.getSynthItem(r)),this.cdref.detectChanges(),this.audio=null},50)}getSynthItem(t){return new Pe.e(t,this.selected,this.synth)}audioLoaded(){return this.synthItems.every(t=>null!=t.audioUrl||t.exceptions.length>0)}combineAndPlayAudio(){var t=this;return(0,f.Z)(function*(){t.audio||(yield t.combineAudioSources()),t.playAllAudio()})()}combineAudioSources(){var t=this;return(0,f.Z)(function*(){t.allAudioSources=t.synthItems.map(l=>l.audioUrl);let r=t.allAudioSources.map(l=>fetch(l).then(b=>b.blob()));yield Promise.all(r).then(l=>{let b=new Blob(l);t.blobUrl=URL.createObjectURL(b),t.audio=new Audio(t.blobUrl)})})()}playAllAudio(){this.audio.paused?this.audio.play():(this.audio.pause(),this.audio.currentTime=0)}downloadAudio(){var t=this;return(0,f.Z)(function*(){t.audio||(yield t.combineAudioSources());const r=document.createElement("a");r.style.display="none",r.href=t.blobUrl,r.download=t.storyTitle+".mp3",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t.blobUrl)})()}goToFastSynthesiser(){this.router.navigateByUrl("/student/synthesis/"+this.storyId)}stopSynthesis(){this.synthItems.map(t=>{t.audioUrl=void 0,t.dispose()})}toggleHidden(){this.hideEntireSynthesisPlayer=!this.hideEntireSynthesisPlayer,this.refresh()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(s.F0),e.Y36(Ie),e.Y36(e.sBO),e.Y36(W.cf),e.Y36(g.D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-synthesis-player"]],viewQuery:function(t,r){if(1&t&&e.Gf(Fe,5),2&t){let l;e.iGM(l=e.CRH())&&(r.voiceSelect=l.first)}},inputs:{storyId:"storyId",text:"text",storyTitle:"storyTitle"},decls:22,vars:11,consts:[[1,"synth",3,"hidden"],[1,"synthHeader"],[1,"reload",3,"click"],[3,"selectVoice"],[1,"fast-synth",3,"click"],[1,"btnContainer",2,"justify-content","space-between"],[1,"playAllButton",2,"text-align","center","width","100px",3,"disabled","click"],["class","spinner-grow","style","width: 1rem; height: 1rem;",4,"ngIf"],[1,"playAllButton",2,"text-align","center","width","150px",3,"disabled","click"],[1,"items"],[3,"synthItem","i","storyId",4,"ngFor","ngForOf"],[1,"spinner-grow",2,"width","1rem","height","1rem"],[3,"synthItem","i","storyId"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h1"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"div",1)(7,"div",2),e.NdJ("click",function(){return r.refresh()}),e._uU(8,"\u21bb"),e.qZA(),e.TgZ(9,"synth-voice-select",3),e.NdJ("selectVoice",function(b){return r.refresh(b)}),e.qZA(),e.TgZ(10,"div",4),e.NdJ("click",function(){return r.goToFastSynthesiser()}),e._uU(11),e.qZA()(),e.TgZ(12,"div",5)(13,"button",6),e.NdJ("click",function(){return r.combineAndPlayAudio()}),e.YNc(14,N,1,0,"div",7),e._uU(15),e.qZA(),e.TgZ(16,"button",8),e.NdJ("click",function(){return r.downloadAudio()}),e.YNc(17,de,1,0,"div",7),e._uU(18),e.qZA()(),e._UZ(19,"hr"),e.TgZ(20,"div",9),e.YNc(21,Z,1,3,"app-synth-item",10),e.qZA()()),2&t&&(e.Q6J("hidden",r.hideEntireSynthesisPlayer),e.xp6(3),e.Oqu(r.ts.l.listen_back_to_your_story?r.ts.l.listen_back_to_your_story:"listen_back_to_your_story"),e.xp6(2),e.hij("(",r.ts.l.dnn_synthesiser?r.ts.l.dnn_synthesiser:"dnn_synthesiser",")"),e.xp6(6),e.hij(" ",r.ts.l.go_to_fast_synthesiser?r.ts.l.go_to_fast_synthesiser:"go_to_fast_synthesiser"," "),e.xp6(2),e.Q6J("disabled",!r.audioLoaded()),e.xp6(1),e.Q6J("ngIf",!r.audioLoaded()),e.xp6(1),e.hij(" ",r.ts.l.play," "),e.xp6(1),e.Q6J("disabled",!r.audioLoaded()),e.xp6(1),e.Q6J("ngIf",!r.audioLoaded()),e.xp6(1),e.hij(" ",r.ts.l.download," "),e.xp6(3),e.Q6J("ngForOf",r.synthItems))},dependencies:[d.sg,d.O5,Be],styles:[".synth[_ngcontent-%COMP%]{display:grid;padding:20px;border-radius:15px;margin:30px;background-color:#ffffff80;border:2px}.synthHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]{font-family:Lucida Sans Unicode;font-size:20px;width:2rem;height:2rem;border-radius:.5em;padding:0;margin:0;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]:hover{color:#000;font-weight:700}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]{padding:3px;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]:hover{color:#000;border-radius:2px;font-weight:700}.items[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:3px;padding-left:1rem;padding-top:1rem;border-radius:3px;text-align:left;flex-wrap:wrap;justify-content:left}.playAllButton[_ngcontent-%COMP%]{padding:5px;border-radius:5px;border:none;width:100px;text-align:center;background-color:#95cdcd}.playAllButton[_ngcontent-%COMP%]:hover:enabled{color:#fff}"]}),a})();var re=n(1094),Ne=n.n(re),K=n(4186),te=n(5592);function ve(a){return Object.assign({},a)}class _e{constructor(h,t,r){this.errorsWithSentences=[],this.http=t,this.auth=r,this.grammarCheckers=h,this.cacheMap=new Map;for(const l of h)this.cacheMap.set(l.name,{})}check$(h){const t=new pe.x;return this.check(h,t),t}check(h,t){var r=this;return(0,f.Z)(function*(){const b=function ue(a,h){const t=[];let r=0;for(let l of a)if(l){const A=r+h.slice(r).indexOf(l);t.push({sentence:l,offset:A}),r=A+l.length}return t}(yield(0,B.z)(r.http.post(K.Z.baseurl+"nlp/sentenceTokenize",{text:h})),h);r.errorsWithSentences=[];const A=(yield Promise.all(r.grammarCheckers.map(function(){var P=(0,f.Z)(function*(I){return yield Promise.all(b.map(function(){var L=(0,f.Z)(function*(q,H){const z=q.sentence,Y=q.offset;function oe(se){return se.fromX+=Y,se.toX+=Y,t.next(se),se}if(z in r.cacheMap.get(I.name)){let se=r.cacheMap.get(I.name)[z].map(ve).map(oe);return r.errorsWithSentences[H]=r.errorsWithSentences[H]?[r.errorsWithSentences[H][0].concat(se),z,H]:[se,z,H],se}const ie=yield I.check(z,r.auth.getToken());r.cacheMap.get(I.name)[z]=ie;const Dn=ie.map(ve).map(oe);return r.errorsWithSentences[H]=r.errorsWithSentences[H]?[r.errorsWithSentences[H][0].concat(ie),z,H]:[ie,z,H],Dn});return function(q,H){return L.apply(this,arguments)}}()))});return function(I){return P.apply(this,arguments)}}()))).flat().filter(P=>P.length);return t.complete(),r.countNewErrors(A.flat()),A})()}countNewErrors(h){var t=this;return(0,f.Z)(function*(){t.previousErrorTags=h,t.countNewErrors=t._countNewErrorsAfterFirstTime})()}_countNewErrorsAfterFirstTime(h){return(0,f.Z)(function*(){const r=function J(a,h){return function A(P,I){return I.filter(L=>!P.includes(L)||(P[P.indexOf(L)]=null,!1)).map(L=>JSON.parse(L)[1])}(b(a),b(h));function b(P){return P.map(I=>JSON.stringify([I.errorText,I.type]))}}(t.previousErrorTags,h),b={countsByType:(a=r,a.reduce(function t(r,l){return r[l]||(r[l]=0),r[l]+=1,r},{}))};var a;t.http.post(K.Z.baseurl+"gramadoir/userGrammarCounts/",b).subscribe(),t.previousErrorTags=h})()}saveErrorsWithSentences(h){var t=this;return(0,f.Z)(function*(){if(!t.errorsWithSentences)return;const r={Authorization:"Bearer "+t.auth.getToken()};t.http.post(K.Z.baseurl+"gramadoir/insert/",{storyId:h,sentences:t.errorsWithSentences},{headers:r}).subscribe()})()}}const $=ce().import("parchment"),ye=ce().import("ui/tooltip");ce().register(new $.Attributor.Attribute("highlight-tag","highlight-tag",{scope:$.Scope.INLINE})),ce().register(new $.Attributor.Attribute("highlight-tag-type","highlight-tag-type",{scope:$.Scope.INLINE}));class xe{constructor(h,t,r){this.mostRecentHoveredMessage="",this.quillEditor=h,this.ts=t,this.engagement=r}show(h){h&&(h.forEach(r=>{this.quillEditor.formatText(r.fromX,r.toX-r.fromX,{"highlight-tag":JSON.stringify(r),"highlight-tag-type":r.type,"background-color":r.color},"api")}),document.querySelectorAll("[highlight-tag]").forEach(r=>{const l=r.getAttribute("highlight-tag");if(!l)return;const b=JSON.parse(l),A=new ye(this.quillEditor);A.root.classList.add("custom-tooltip"),r.addEventListener("mouseover",()=>{this.mouseOverTagElem(b,r,A)}),r.addEventListener("mouseout",()=>{r.removeAttribute("data-selected"),A.hide()})}))}hide(h){h.forEach(t=>{this.quillEditor.formatText(t.fromX,t.toX-t.fromX,{"highlight-tag":null,"highlight-tag-type":null,"background-color":"","data-selected":null})}),document.querySelectorAll(".custom-tooltip").forEach(t=>t.remove())}hideAll(){document.querySelectorAll("[data-selected]").forEach(t=>t.removeAttribute("data-selected")),this.quillEditor.formatText(0,this.quillEditor.getLength(),{"highlight-tag":null,"highlight-tag-type":null,"background-color":"","data-selected":null}),document.querySelectorAll(".custom-tooltip").forEach(t=>t.remove())}mouseOverTagElem(h,t,r){t.setAttribute("data-selected","");const l=this.quillEditor.root.scrollTop;this.quillEditor.root.scroll({top:+l+1}),this.quillEditor.root.scroll({top:+l}),r.root.innerHTML="en"==this.ts.l.iso_code?h.messageEN:h.messageGA,this.mostRecentHoveredMessage="en"==this.ts.l.iso_code?h.messageEN:h.messageGA,r.show(),r.position(this.quillEditor.getBounds(h.fromX,h.toX-h.fromX));let b=r.root.getAttribute("style")||"";b+="font-size: medium; z-index: 10000001;",r.root.setAttribute("style",b);const A=r.root.offsetLeft+r.root.offsetWidth-this.quillEditor.root.offsetWidth;r.root.style.left=A>0?r.root.offsetLeft-A-5+"px":r.root.style.left,r.root.style.left=r.root.offsetLeft<0?r.root.offsetLeft-r.root.offsetLeft+5+"px":r.root.style.left,this.engagement.mouseOverGrammarSuggestionEvent(h)}getGrammarMessage(h){return h?this.mostRecentHoveredMessage?this.mostRecentHoveredMessage:this.ts.message("hover_over_a_highlighted_word_for_a_grammar_suggestion"):this.ts.message("checking_grammar")}}var G=n(8043);const be={name:"Leathan_Caol",check:function Ke(a){return Ue.apply(this,arguments)}},Q=["a","o","u","\xe1","\xf3","\xfa","A","O","U","\xc1","\xd3","\xda"],V=["e","i","\xe9","\xed","E","I","\xc9","\xcd"],We=["b","c","d","f","g","h","l","m","n","p","r","s","t","v","z","B","C","D","F","G","H","L","M","N","P","R","S","T","V","Z"],Ve=["aniar","an\xedos","ar\xe9ir","ar\xeds","ar\xedst","anseo","ansin","ansi\xfad","c\xe9n","den","faoina","ina","inar","insa","lena","lenar"];function Ue(){return(Ue=(0,f.Z)(function*(a){return new Promise((h,t)=>{const r=$e(a);let l=[];for(const b of r)l.push({errorText:a,messageGA:G.U["LEATHAN-CAOL"].messageGA,messageEN:G.U["LEATHAN-CAOL"].messageEN,context:a,nameEN:G.U["LEATHAN-CAOL"].nameEN,nameGA:G.U["LEATHAN-CAOL"].nameGA,color:G.U["LEATHAN-CAOL"].color,fromX:b.first,toX:b.first+1,type:"LEATHAN-CAOL"}),l.push({errorText:a,messageGA:G.U["LEATHAN-CAOL"].messageGA,messageEN:G.U["LEATHAN-CAOL"].messageEN,context:a,nameEN:G.U["LEATHAN-CAOL"].nameEN,nameGA:G.U["LEATHAN-CAOL"].nameGA,color:G.U["LEATHAN-CAOL"].color,fromX:b.second,toX:b.second+1,type:"LEATHAN-CAOL"});h(l)})})).apply(this,arguments)}function $e(a){const h=function Xe(a){let h=[];for(let t of Ve){let l=et(a.toLowerCase(),t);for(let b of l)h[b]=t.length}return h}(a),t=[];for(let r=0;r<a.length-1;r++)if(h[r]>0&&(r+=h[r]),Je(a[r])&&Ge(a[r+1])){let l=r++;for(;Ge(a[r]);)r++;if(Je(a[r])&&!rt(a[l],a[r])){const b=nt(a[l]);t.push({broadFirst:b,first:l,second:r})}}return t}function et(a,h){var t=[];let r=new RegExp("[\\s.!?\\-]"+h+"[\\s.!?\\-]","g"),l=r.exec(a);for(;l;){r=new RegExp(h);let b=r.exec(l[0]);t.push(l.index+b.index),a=tt(a,l.index,"#".repeat(5)),r=new RegExp("[\\s.!?\\-]"+h+"[\\s.!?\\-]","g"),l=r.exec(a)}return t}function tt(a,h,t){return a.substr(0,h)+t+a.substr(h+t.length)}function Je(a){return Q.includes(a)||V.includes(a)}function nt(a){return Q.includes(a)}function Ge(a){return We.includes(a)}function rt(a,h){return Q.includes(a)&&Q.includes(h)||V.includes(a)&&V.includes(h)}const ot={name:"AnGramadoir",check:function it(a,h){return Re.apply(this,arguments)}};function Re(){return Re=(0,f.Z)(function*(a,h){return new Promise(function(){var t=(0,f.Z)(function*(r,l){let b=[];try{b=yield qe(`${K.Z.baseurl}gramadoir/callAnGramadoir/${encodeURIComponent(a)}`,h)}catch{try{b=yield qe(`https://cadhan.com/api/gramadoir/1.0/en/${a}`)}catch{l()}}r(b.map(P=>{const I=st(P.ruleId),L=G.U[I];return{errorText:P.errortext,messageGA:L.messageGA.replace("#",P.errortext),messageEN:L.messageEN.replace("#",P.errortext),context:P.context,nameEN:L.nameEN,nameGA:L.nameGA,color:L.color,fromX:+P.fromx,toX:+P.tox+1,type:I}}))});return function(r,l){return t.apply(this,arguments)}}())}),Re.apply(this,arguments)}function qe(a,h){return Le.apply(this,arguments)}function Le(){return(Le=(0,f.Z)(function*(a,h){let t={};h&&(t={Authorization:"Bearer "+h});const r=yield fetch(a,{headers:t,method:"POST"});if(r.ok)return yield r.json();throw new Error(r.statusText)})).apply(this,arguments)}function st(a){if(!a)return"";const h=a.replace(/[A-Za-z:]+\//,"");if(!h)return"";const t=/[A-Z]+/.exec(h);return t&&t[0]?t[0]:""}const at={name:"RelativeClause",check:function dt(a){return je.apply(this,arguments)}},ct="https://phoneticsrv3.lcs.tcd.ie/gramsrv/api/grammar";function je(){return je=(0,f.Z)(function*(a){return new Promise(function(){var h=(0,f.Z)(function*(t,r){t((yield lt(a)).map(A=>({errorText:a.slice(A.fromx,A.tox),messageGA:A.msg,messageEN:A.msg,context:A.context,nameEN:G.U["RELATIVE-CLAUSE"].nameEN,nameGA:G.U["RELATIVE-CLAUSE"].nameGA,color:G.U["RELATIVE-CLAUSE"].color,fromX:A.fromx,toX:A.tox,type:"RELATIVE-CLAUSE"})))});return function(t,r){return h.apply(this,arguments)}}())}),je.apply(this,arguments)}function lt(a){return De.apply(this,arguments)}function De(){return(De=(0,f.Z)(function*(a){const h=yield fetch(ct,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:ut(a.replace(/\n/g," "))});return h.ok?yield h.json():[]})).apply(this,arguments)}function ut(a){return`text=${encodeURIComponent(a)}&check=relclause`}var pt=n(5439),gt=n.n(pt),ft=n(529),He=n(1481),Ye=n(5802);const ht=["mySynthesisPlayer"];function mt(a,h){if(1&a&&(e.TgZ(0,"div",27),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorText," ")}}function vt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",23)(1,"div",24),e._uU(2),e.TgZ(3,"b"),e._uU(4),e.qZA(),e._uU(5,"? "),e.qZA(),e.YNc(6,mt,2,1,"div",25),e.TgZ(7,"div")(8,"button",26),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.hideModal())}),e._uU(9),e.qZA(),e.TgZ(10,"button",26),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.saveModal())}),e._uU(11),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.save_changes_made_to," "),e.xp6(2),e.Oqu(null==t.story?null:t.story.title),e.xp6(2),e.Q6J("ngIf",t.registrationError),e.xp6(3),e.hij(" ",t.ts.l.cancel," "),e.xp6(2),e.hij(" ",t.ts.l.save," ")}}function _t(a,h){1&a&&(e.TgZ(0,"span"),e._uU(1,"*"),e.qZA())}function yt(a,h){if(1&a&&(e.TgZ(0,"span",28),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.ts.l.made_using_prompts)}}function xt(a,h){if(1&a&&(e.TgZ(0,"div",29),e._uU(1),e._UZ(2,"i",30),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.saved," ")}}function bt(a,h){if(1&a&&(e.TgZ(0,"div",29),e._uU(1),e._UZ(2,"i",31),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.saving," ")}}function Tt(a,h){1&a&&e._UZ(0,"i",32)}function Ct(a,h){1&a&&e._UZ(0,"i",33)}function wt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",34),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.dontToggle=!0,e.KtG(l.editStoryTitle())}),e._uU(1),e._UZ(2,"i",35),e.qZA()}if(2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.edit_title_or_dialect," ")}}function St(a,h){1&a&&(e.TgZ(0,"span",39),e._uU(1,"speech_to_text"),e.qZA())}function At(a,h){1&a&&(e.TgZ(0,"button",40),e._UZ(1,"i",41),e.qZA())}function Mt(a,h){1&a&&(e.TgZ(0,"div"),e._UZ(1,"div",42),e.qZA())}const kt=function(a){return{disableDiv:a}};function Ot(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",36),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.dontToggle=!0,e.KtG(l.speakStory())}),e._uU(1),e.YNc(2,St,2,0,"span",37),e.YNc(3,At,2,0,"button",38),e.YNc(4,Mt,2,0,"div",6),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("ngClass",e.VKq(5,kt,t.isTranscribing)),e.xp6(1),e.hij(" ",t.ts.l.speak," "),e.xp6(1),e.Q6J("ngIf",!t.isRecording),e.xp6(1),e.Q6J("ngIf",t.isRecording&&!t.isTranscribing),e.xp6(1),e.Q6J("ngIf",t.isTranscribing)}}function Pt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",43),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.dontToggle=!0)}),e.TgZ(1,"button",44),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.downloadStory())}),e._uU(2),e._UZ(3,"i",45),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(1),e.s9C("href",t.downloadStoryUrl()),e.xp6(1),e.hij(" ",t.ts.l.download," ")}}function It(a,h){1&a&&(e.TgZ(0,"span",48),e._uU(1,"1"),e.qZA())}function Et(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",34),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.dontToggle=!0,e.KtG(l.getFeedback())}),e._uU(1),e._UZ(2,"i",46),e.YNc(3,It,2,0,"span",47),e.qZA()}if(2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.feedback," "),e.xp6(2),e.Q6J("ngIf",t.hasNewFeedback())}}function Zt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",34),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.dontToggle=!0,e.KtG(l.dictionaryVisible=!l.dictionaryVisible)}),e._uU(1),e._UZ(2,"i",49),e.qZA()}if(2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.dictionary," ")}}function Bt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",34),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.dontToggle=!0,e.KtG(l.goToSynthesis())}),e._uU(1),e._UZ(2,"i",50),e.qZA()}if(2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.ts.l.audio_check," ")}}function Ft(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",34),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.dontToggle=!0,e.KtG(l.toggleGrammarTags())}),e._uU(1),e._UZ(2,"i",51),e.qZA()}if(2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.toggleGrammarButton()," ")}}function Nt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",52),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.dontToggle=!0,e.KtG(l.goToRecording())}),e._uU(1),e._UZ(2,"i",53),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("hidden",t.story.text&&0===t.story.text.length),e.xp6(1),e.hij(" ",t.ts.l.recordings," ")}}function Ut(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",71)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",72),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.closeFeedback())}),e._UZ(4,"i",73),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.ts.l.feedback," ")}}function Rt(a,h){if(1&a&&e._UZ(0,"audio",78,79),2&a){const t=e.oxw(3);e.Q6J("src",t.audioSource,e.LSH)}}function Lt(a,h){if(1&a&&e._UZ(0,"div",80),2&a){const t=e.oxw(3);e.Q6J("innerHTML",t.sanitizer.bypassSecurityTrustHtml(t.story.feedback.feedbackMarkup),e.oJD)}}function jt(a,h){if(1&a&&(e.TgZ(0,"div",74)(1,"textarea",75),e._uU(2,"        "),e.qZA(),e.YNc(3,Rt,2,1,"audio",76),e._UZ(4,"hr"),e.YNc(5,Lt,1,1,"div",77),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.s9C("placeholder",t.ts.l.no_feedback_provided),e.s9C("value",null==t.story?null:t.story.feedback.text),e.xp6(2),e.Q6J("ngIf",t.audioSource&&t.feedbackVisible&&t.story.feedback.audioId),e.xp6(2),e.Q6J("ngIf",t.story.feedback.feedbackMarkup)}}const Dt=function(a){return{"background-color":a}};function Ht(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",81),e.NdJ("click",function(){const b=e.CHM(t).$implicit,A=e.oxw(2);return e.KtG(A.setCheckBox(b.key,b.value))}),e._UZ(1,"div",82),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"titlecase"),e._uU(5),e.qZA()}if(2&a){const t=h.$implicit,r=e.oxw(2);e.uIk("id",t.key),e.xp6(1),e.Q6J("ngStyle",e.VKq(8,Dt,t.value[0].color)),e.xp6(1),e.hij(" ","en"==r.ts.l.iso_code?e.lcZ(3,4,t.value[0].nameEN):e.lcZ(4,6,t.value[0].nameGA)," "),e.xp6(3),e.hij(" (","Broad/Slender"==t.value[0].nameEN?t.value.length/2:t.value.length,") ")}}function Jt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",54)(1,"div",55),e.YNc(2,Ut,5,1,"div",56),e.YNc(3,jt,6,4,"div",57),e.TgZ(4,"div",58,59)(6,"quill-editor",60),e.NdJ("ngModelChange",function(l){e.CHM(t);const b=e.oxw();return e.KtG(b.story.htmlText=l)})("onContentChanged",function(l){e.CHM(t);const b=e.oxw();return e.KtG(b.onContentChanged(l))})("onEditorCreated",function(l){e.CHM(t);const b=e.oxw();return e.KtG(b.onEditorCreated(l))}),e.qZA()()(),e.TgZ(7,"div",61)(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"div",62),e._UZ(11,"div",63),e.TgZ(12,"div",64)(13,"i",65),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.grammarSettingsHidden=!l.grammarSettingsHidden)}),e.qZA(),e.TgZ(14,"i",66),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.dontToggle=!0,e.KtG(l.toggleGrammarTags())}),e.qZA()()(),e.TgZ(15,"div",67)(16,"span",68)(17,"div",69)(18,"h5"),e._uU(19),e.qZA()()(),e.YNc(20,Ht,6,10,"div",70),e.ALo(21,"keyvalue"),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.feedbackVisible),e.xp6(1),e.Q6J("ngIf",t.feedbackVisible),e.xp6(1),e.Q6J("ngStyle",t.quillEditorStyle),e.xp6(2),e.Q6J("modules",t.quillToolbar)("preserveWhitespace",!0)("debounceTime",1500)("ngModel",t.story.htmlText),e.xp6(3),e.AsE(" ",t.ts.l.word_count,": ",t.wordCount," "),e.xp6(1),e.Q6J("hidden",!t.showErrorTags),e.xp6(1),e.Q6J("innerHTML",t.selectedGrammarSuggestion(),e.oJD),e.xp6(2),e.Q6J("ngClass",t.grammarSettingsHidden?"fas fa-chevron-right":"fas fa-chevron-down"),e.xp6(2),e.Q6J("hidden",t.grammarSettingsHidden||!t.showErrorTags),e.xp6(4),e.hij(" ",t.ts.message("grammar_errors")," "),e.xp6(1),e.Q6J("ngForOf",e.lcZ(21,15,t.grammarErrorsTypeDict))}}function Gt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",90)(1,"label",91),e._uU(2),e.qZA(),e.TgZ(3,"input",92),e.NdJ("ngModelChange",function(l){e.CHM(t);const b=e.oxw(2);return e.KtG(b.wordLookedUp=l)})("keyup.enter",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.lookupWord())})("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.clearDictInput())}),e.qZA(),e.TgZ(4,"button",93),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.lookupWord())}),e._UZ(5,"i",94),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(2),e.hij("",t.ts.l.search,":"),e.xp6(1),e.Q6J("ngModel",t.wordLookedUp)}}function qt(a,h){if(1&a&&e._UZ(0,"iframe",95),2&a){const t=e.oxw(2);e.Q6J("src",t.defaultDictIframeText,e.uOi)}}function Yt(a,h){1&a&&(e.TgZ(0,"div",96)(1,"ul")(2,"li")(3,"a",97),e._uU(4,"potafocal.com"),e.qZA()(),e.TgZ(5,"li")(6,"a",98),e._uU(7,"focloir.ie"),e.qZA()()()())}function zt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",83)(1,"div",69)(2,"h5"),e._uU(3),e.qZA(),e.TgZ(4,"div",84),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.dictionaryVisible=!1)}),e._UZ(5,"i",73),e.qZA()(),e.TgZ(6,"div",85)(7,"div",86),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.selectTeanglann=!0,l.selectExternalLinks=!1,e.KtG(l.selectedDictionary=!0)}),e._uU(8," Teanglann "),e.qZA(),e._uU(9," | "),e.TgZ(10,"div",86),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.selectExternalLinks=!0,e.KtG(l.selectTeanglann=!1)}),e._uU(11),e.qZA()(),e.YNc(12,Gt,6,2,"div",87),e.YNc(13,qt,1,1,"iframe",88),e.YNc(14,Yt,8,0,"div",89),e.qZA()}if(2&a){const t=e.oxw();e.xp6(3),e.hij(" ",t.ts.l.dictionary," "),e.xp6(8),e.hij(" ",t.ts.l.external_links," "),e.xp6(1),e.Q6J("ngIf",t.selectTeanglann),e.xp6(1),e.Q6J("ngIf",t.selectTeanglann),e.xp6(1),e.Q6J("ngIf",t.selectExternalLinks)}}function Qt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",99),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return l.dontToggle=!0,e.KtG(l.goToSynthesis())}),e._UZ(1,"i",73),e.qZA()}}ce().register("modules/imageCompress",gt());let Wt=(()=>{class a{constructor(t,r,l,b,A,P,I,L,q,H,z,Y){this.http=t,this.sanitizer=r,this.storyService=l,this.route=b,this.auth=A,this.notificationService=P,this.router=I,this.engagement=L,this.ts=q,this.dialog=H,this.recordAudioService=z,this.classroomService=Y,this.story=new y,this.mostRecentAttemptToSaveStory=new Date,this.saveStoryDebounceId=0,this.storySaved=!0,this.downloadStoryFormat=".pdf",this.grammarLoaded=!1,this.grammarErrors=[],this.grammarErrorsTypeDict={},this.showErrorTags=!1,this.checkBoxes={showAll:!0},this.grammarCheckerOptions={anGramadoir:ot,relativeClause:at,broadSlender:be},this.showOptions=!0,this.dontToggle=!1,this.selectTeanglann=!0,this.modalClass="hidden",this.modalChoice=new pe.x,this.words=[],this.wordCount=0,this.textUpdated=new pe.x,this.quillToolbar={toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"],["image"]],imageCompress:{quality:.7,maxWidth:500,maxHeight:500,imageType:"image/png",debug:!1,suppressErrorLogging:!1,insertIntoEditor:void 0}},this.wordLookedUp="",this.defaultDictIframeText=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/html;charset=utf-8,"+this.ts.l.search_for_words_in_dictionary),this.isRecording=!1,this.isTranscribing=!1,this.setUpGrammarChecking()}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.storySaved=!0,t.auth.getUserDetails()&&(t.story=yield(0,B.z)(t.storyService.getStory(t.route.snapshot.params.id)),t.story&&(t.textUpdated.next(),t.getWordCount(t.story.text),null==t.story.htmlText&&(t.story.htmlText=t.story.text)))})()}setUpGrammarChecking(){var t=this;return(0,f.Z)(function*(){const r=t.auth.getUserDetails();if(!r)return;let l=yield(0,B.z)(t.classroomService.getClassroomOfStudent(r._id)),b=[];l&&l.grammarCheckers&&l.grammarCheckers.length>0?l.grammarCheckers.forEach(A=>{t.grammarCheckerOptions[A]&&b.push(t.grammarCheckerOptions[A])}):b=Object.values(t.grammarCheckerOptions),t.grammarEngine=new _e(b,t.http,t.auth),t.textUpdated.pipe((0,ke.x)()).subscribe((0,f.Z)(function*(){if(t.grammarLoaded=!1,t.story.text.replace(/\n/g," "))try{t.grammarErrors=[],t.grammarEngine.check$(t.story.text).subscribe({next:P=>{t.grammarErrors.push(P),t.showErrorTags&&t.quillHighlighter.show([P])},error:function(){},complete:()=>{if(t.quillHighlighter){t.quillHighlighter.hideAll(),t.showErrorTags&&t.quillHighlighter.show(t.grammarErrors.filter(P=>t.checkBoxes[P.type]||t.checkBoxes.showAll)),t.grammarErrors&&t.grammarEngine.saveErrorsWithSentences(t.story._id).then(console.log,console.error),t.grammarErrorsTypeDict=t.grammarErrors.reduce(function(P,I){return P[I.type]||(P[I.type]=[]),P[I.type].push(I),P},{});for(const P of Object.keys(t.grammarErrorsTypeDict))t.checkBoxes[P]=!0;t.grammarLoaded=!0}}})}catch(P){t.grammarErrors||window.alert("There was an error while trying to fetch grammar suggestions from the Gramad\xf3ir server:\n"+P.message+"\nSee the browser console for more information"),console.dir(P)}}))})()}onContentChanged(t){"user"===(this.story.text=t.text,this.getWordCount(t.text),t.source)&&(this.storySaved=!1,this.textUpdated.next(t.text),this.debounceSaveStory())}debounceSaveStory(){this.saveStoryDebounceId++;const t=this.saveStoryDebounceId,r=new Date;setTimeout(()=>{t===this.saveStoryDebounceId&&this.saveStory(t,r)},1e3)}saveStory(t,r){var l=this;return(0,f.Z)(function*(){const b=new Date;if(l.mostRecentAttemptToSaveStory=b,!l.story._id)return window.alert("Cannot save story. The id is not known");const A=l.stripGramadoirAttributesFromHtml(Ne()(l.story.htmlText)),P={title:l.story.title,dialect:l.story.dialect,text:l.story.text,htmlText:A,lastUpdated:r};l.engagement.addEventForLoggedInUser(S.tw["SAVE-STORY"],l.story);try{yield(0,B.z)(l.storyService.updateStory(P,l.story._id)),(t===l.saveStoryDebounceId||"modal"===t)&&(l.storySaved=!0)}catch(I){throw window.alert("Error while trying to save story: "+I.message),I}try{b===l.mostRecentAttemptToSaveStory&&(l.storySaved=!0)}catch(I){throw window.alert("Error setting storySaved to true: "+I.message),I}})()}onEditorCreated(t){t.history.options.userOnly=!0,this.quillEditor=t,this.quillEditor.root.setAttribute("spellcheck","false"),this.quillHighlighter=new xe(this.quillEditor,this.ts,this.engagement)}titleStyle(){return{"font-style":this.storySaved?"normal":"italic"}}setCheckBox(t,r){this.checkBoxes[t]=!this.checkBoxes[t],this.checkBoxes.showAll&&(this.checkBoxes.showAll=!1),this.checkBoxes[t]?(this.quillHighlighter.show(r),document.getElementById(t).classList.remove("hideLegendItem")):(this.quillHighlighter.hide(r),document.getElementById(t).classList.add("hideLegendItem"))}setAllCheckBoxes(){this.checkBoxes.showAll?this.quillHighlighter.show(this.grammarErrors):this.quillHighlighter.hideAll(),Object.keys(this.checkBoxes).forEach(t=>{this.checkBoxes[t]=this.checkBoxes.showAll})}selectedGrammarSuggestion(){return this.quillHighlighter?this.quillHighlighter.getGrammarMessage(this.grammarLoaded):""}toggleGrammarButton(){return this.ts.message(this.showErrorTags?"hide_grammar_suggestions":"show_grammar_suggestions")}toggleGrammarTags(){var t=this;return(0,f.Z)(function*(){t.showErrorTags?t.quillHighlighter.hideAll():t.quillHighlighter.show(t.grammarErrors.filter(r=>t.checkBoxes[r.type]||t.checkBoxes.showAll)),t.showErrorTags=!t.showErrorTags})()}stripGramadoirAttributesFromHtml(t){return t&&t.replace?t.replace(/\s*style="([^"])+"/g,"").replace(/\s*highlight-tag-type="([^"])+"/g,"").replace(/\s*highlight-tag="([^"])+"/g,""):""}lookupWord(){var t=this;return(0,f.Z)(function*(){if(t.wordLookedUp){const r=t.http.post(K.Z.baseurl+"proxy/",{url:`https://www.teanglann.ie/en/fgb/${t.wordLookedUp}`}),l=yield(0,B.z)(r),b=(new DOMParser).parseFromString(l,"text/html");b.querySelectorAll(".ex > .head > a").forEach(q=>q.href=`https://www.teanglann.ie${q.href.slice(q.href.lastIndexOf("/en/"))}`),b.querySelector(".moar")?.remove();const I=b.querySelector(".listings");I.style.cssText+="margin-right: 0px; padding: 10px;",document.getElementById("dictiframe").src='data:text/html;charset=utf-8,<link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/template.css"><link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/fgb.css">'+I.outerHTML,t.engagement.addEventForLoggedInUser(S.tw["USE-DICTIONARY"],null,t.wordLookedUp)}else alert(t.ts.l.enter_a_word_to_lookup)})()}clearDictInput(){this.wordLookedUp&&(this.wordLookedUp="")}getFeedback(){this.feedbackVisible=!this.feedbackVisible,this.getFeedbackAudio(),""!==this.story.feedback.text&&(this.story.feedback.seenByStudent=!0),this.storyService.viewFeedback(this.story._id).subscribe(()=>{this.engagement.addEventForLoggedInUser(S.tw["VIEW-FEEDBACK"],this.story),this.notificationService.getStudentNotifications()})}getFeedbackAudio(){this.storyService.getFeedbackAudio(this.story._id).subscribe(t=>{this.audioSource=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(t))})}downloadStory(){this.dialogRef=this.dialog.open(u.p,{data:{title:this.ts.l.download,type:"select",data:[this.story.title,[".pdf",".docx",".txt",".odt"]],confirmText:this.ts.l.download,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=void 0,t&&(this.downloadStoryFormat=t[1]?t[1]:".pdf",this.http.get(this.downloadStoryUrl(),{responseType:"blob"}).subscribe(r=>{const l=window.document.createElement("a");l.href=window.URL.createObjectURL(r),l.download=t[0]?t[0]:this.story.title,document.body.appendChild(l),l.click(),document.body.removeChild(l)}))})}downloadStoryUrl(){return K.Z.baseurl+"story/downloadStory/"+this.story._id+"/"+this.downloadStoryFormat}getWordCount(t){if(!t)return 0;const r=t.replace(/[\t\n\r\.\?\!]/gm," ").split(" ");this.words=[],r.map(l=>{const b=l.trim();b.length>0&&this.words.push(b)}),this.wordCount=this.words.length}closeFeedback(){this.feedbackVisible=!1}hasNewFeedback(){return!(!this.story||!this.story.feedback||!1!==this.story.feedback.seenByStudent)}goToSynthesis(){this.synthesisPlayer.toggleHidden()}goToRecording(){this.router.navigateByUrl("/student/record-story/"+this.story._id)}showModal(){this.modalClass="visibleFade"}hideModal(){this.modalClass="hiddenFade",this.modalChoice.next(!1)}saveModal(){var t=this;return(0,f.Z)(function*(){try{yield t.saveStory("modal",new Date),t.modalChoice.next(!0)}catch{window.alert("Your story was not saved. You should copy your story to another program to save it. Otherwise it may be lost."),t.hideModal()}})()}toggleOptions(){this.dontToggle||(this.showOptions=!this.showOptions),this.dontToggle=!1}editStoryTitle(){var t=this;this.dialogRef=this.dialog.open(u.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.story.title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var r=(0,f.Z)(function*(l){t.dialogRef=void 0,l&&t.storyService.updateStoryTitleAndDialect(t.story,l[0],l[1]).subscribe({complete:()=>{t.ngOnInit()}})});return function(l){return r.apply(this,arguments)}}())}speakStory(){var t=this;return(0,f.Z)(function*(){if(t.isRecording){t.isTranscribing=!0,t.recordAudioService.stopRecording();let r=yield t.recordAudioService.getAudioTranscription();if(t.isTranscribing=!1,r){let l=t.quillEditor.getSelection(!0);t.quillEditor.insertText(l.index,r+"."),t.story.text=t.quillEditor.getText(),t.story.htmlText=t.quillEditor.root.innerHTML,t.getWordCount(r),t.storySaved=!1,t.textUpdated.next(),t.debounceSaveStory()}}else t.recordAudioService.recordAudio();t.isRecording=!t.isRecording})()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ft.eN),e.Y36(He.H7),e.Y36(_.N),e.Y36(s.gz),e.Y36(C.$),e.Y36(F.g),e.Y36(s.F0),e.Y36(k.M),e.Y36(g.D),e.Y36(o.uw),e.Y36(te.r),e.Y36(M.u))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-dashboard"]],viewQuery:function(t,r){if(1&t&&e.Gf(ht,5),2&t){let l;e.iGM(l=e.CRH())&&(r.synthesisPlayer=l.first)}},decls:31,vars:27,consts:[[1,"dashboardContainer"],["class","modalContent",4,"ngIf"],[1,"bookHeader"],["routerLink","../../contents",1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left","backArrow"],["data-cy","title",2,"margin-right","3em","margin-left","3em","overflow","auto","font-size","20px",3,"ngStyle"],[4,"ngIf"],["style","color: rgba(0, 0, 0, 0.4);",4,"ngIf"],[1,"saveIcon"],["class","savedIcon",4,"ngIf"],[1,"optionsBtnContainer",3,"click"],[1,"optionsBtn"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-right",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"ngClass","click",4,"ngIf"],["style","display: flex",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"hidden","click",4,"ngIf"],["class","storyContainer",4,"ngIf"],["class","dictionaryContainer dictionaryHeight",4,"ngIf"],["class","closeSynthesisBtn",3,"click",4,"ngIf"],[3,"text","storyId","storyTitle"],["mySynthesisPlayer",""],[1,"modalContent"],[1,"modalText"],["class","errorMessage",4,"ngIf"],[1,"modalBtn",3,"click"],[1,"errorMessage"],[2,"color","rgba(0, 0, 0, 0.4)"],[1,"savedIcon"],[1,"fas","fa-check"],[1,"fas","fa-save"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-right"],[1,"optionsBtn","optionsPopupBtn",3,"click"],[1,"fas","fa-pencil-alt","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"ngClass","click"],["class","material-symbols-outlined optionsBtnIcon",4,"ngIf"],["class","notRecordingBtn blink",4,"ngIf"],[1,"material-symbols-outlined","optionsBtnIcon"],[1,"notRecordingBtn","blink"],[1,"fas","fa-stop-circle"],[1,"dot-flashing"],[2,"display","flex",3,"click"],["target","_blank",1,"optionsBtn","optionsPopupBtn",2,"text-decoration","none",3,"href","click"],[1,"fas","fa-download","optionsBtnIcon"],[1,"fas","fa-comment-dots","optionsBtnIcon"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"],[1,"fas","fa-book","optionsBtnIcon"],[1,"fas","fa-volume-up","optionsBtnIcon"],[1,"fas","fa-spell-check","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"hidden","click"],[1,"fas","fa-microphone","optionsBtnIcon"],[1,"storyContainer"],[1,"writingContainer"],["class","feedbackHeader",4,"ngIf"],["class","textFieldContainer",4,"ngIf"],[1,"ql-container",3,"ngStyle"],["quillHeightSpan",""],["placeholder","",3,"modules","preserveWhitespace","debounceTime","ngModel","ngModelChange","onContentChanged","onEditorCreated"],[1,"wordCountContainer"],[1,"grammarMessageBanner",3,"hidden"],[1,"grammarMessage",3,"innerHTML"],[1,"displayGrammarTagsIcon"],[3,"ngClass","click"],[1,"fa","fa-times",2,"padding-left","20px",3,"click"],[1,"selectErrorCheckbox",3,"hidden"],[1,"dictionaryContainer"],[1,"dictionaryHeader"],["class","errorContainer",3,"click",4,"ngFor","ngForOf"],[1,"feedbackHeader"],[1,"closeFeedbackBtn",3,"click"],[1,"fa","fa-times"],[1,"textFieldContainer"],["readonly","",1,"textField",3,"placeholder","value"],["id","audio","controls","","class","audioPlayer",3,"src",4,"ngIf"],["class","textField","style","text-align: left; padding-left:25%; padding-right:25%;",3,"innerHTML",4,"ngIf"],["id","audio","controls","",1,"audioPlayer",3,"src"],["audioTag",""],[1,"textField",2,"text-align","left","padding-left","25%","padding-right","25%",3,"innerHTML"],[1,"errorContainer",3,"click"],[1,"errorColorBox",3,"ngStyle"],[1,"dictionaryContainer","dictionaryHeight"],[1,"closeDictionaryBtn",3,"click"],[1,"dictionarySubHeader"],[1,"dictionaryName",3,"click"],["class","dictionaryInput",4,"ngIf"],["class","dictionaryIframe","id","dictiframe",3,"src",4,"ngIf"],["class","dictionaryIframe","style","text-align: left",4,"ngIf"],[1,"dictionaryInput"],["for","dictlookup"],["type","text","id","dictlookup","name","dictlookup","autofocus","",3,"ngModel","ngModelChange","keyup.enter","click"],[1,"searchDictionaryBtn",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["id","dictiframe",1,"dictionaryIframe",3,"src"],[1,"dictionaryIframe",2,"text-align","left"],["href","http://www.potafocal.com/beo/","target","_blank"],["href","https://www.focloir.ie","target","_blank"],[1,"closeSynthesisBtn",3,"click"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div"),e.YNc(2,vt,12,5,"div",1),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e.NdJ("click",function(){return r.synthesisPlayer.stopSynthesis()}),e._UZ(5,"i",4),e._uU(6),e.qZA(),e.TgZ(7,"p",5),e._uU(8),e.YNc(9,_t,2,0,"span",6),e.YNc(10,yt,2,1,"span",7),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,xt,3,1,"div",9),e.YNc(13,bt,3,1,"div",9),e.qZA()(),e.TgZ(14,"div",10),e.NdJ("click",function(){return r.toggleOptions()}),e.TgZ(15,"div",11),e.YNc(16,Tt,1,0,"i",12),e.YNc(17,Ct,1,0,"i",13),e.qZA(),e.YNc(18,wt,3,1,"div",14),e.YNc(19,Ot,5,7,"div",15),e.YNc(20,Pt,4,2,"div",16),e.YNc(21,Et,4,2,"div",14),e.YNc(22,Zt,3,1,"div",14),e.YNc(23,Bt,3,1,"div",14),e.YNc(24,Ft,3,1,"div",14),e.YNc(25,Nt,3,2,"div",17),e.qZA(),e.YNc(26,Jt,22,17,"div",18),e.YNc(27,zt,15,5,"div",19),e.YNc(28,Qt,2,0,"div",20),e._UZ(29,"app-synthesis-player",21,22),e.qZA()),2&t){let l;e.xp6(1),e.Gre("",r.modalClass," modalContainer"),e.xp6(1),e.Q6J("ngIf",r.story),e.xp6(4),e.hij(" ",r.ts.l.contents," "),e.xp6(1),e.Q6J("ngStyle",r.titleStyle()),e.xp6(1),e.hij(" ",null!==(l=null==r.story?null:r.story.title)&&void 0!==l?l:"..."," "),e.xp6(1),e.Q6J("ngIf",!r.storySaved),e.xp6(1),e.Q6J("ngIf",r.story.createdWithPrompts),e.xp6(2),e.Q6J("ngIf",r.storySaved),e.xp6(1),e.Q6J("ngIf",!r.storySaved),e.xp6(3),e.Q6J("ngIf",!r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.showOptions),e.xp6(1),e.Q6J("ngIf",r.story),e.xp6(1),e.Q6J("ngIf",r.dictionaryVisible),e.xp6(1),e.Q6J("ngIf",!(null!=r.synthesisPlayer&&r.synthesisPlayer.hideEntireSynthesisPlayer)),e.xp6(1),e.Q6J("text",r.story.text)("storyId",r.story._id)("storyTitle",r.story.title)}},dependencies:[d.mk,d.sg,d.O5,d.PC,s.rH,R.Fj,R.JJ,R.On,Ye.g6,ne,d.rS,d.Nd],styles:['@charset "UTF-8";.dashboardContainer{--bookContainerHeight: 95vh;--bookContainerWidth: 100%;--textfieldHeight: calc(var(--bookContainerHeight) / 3);--dictionaryHeight: 60vh;width:var(--bookContainerWidth);height:95vh;margin-top:-55px}.modalContainer{top:0;left:0;height:100vh;width:100%;display:flex;justify-content:center;align-items:center}.bookHeader{display:flex;flex-direction:row;justify-content:space-between;padding:15px 15px 5px}.myStoriesBtn{white-space:nowrap;border-style:none;color:var(--dark-text);font-size:11pt;padding:5px}.myStoriesBtn:hover{color:var(--scealai-orange);text-decoration:none;cursor:pointer}.notRecordingBtn{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.blink{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}.saveIcon{white-space:nowrap;color:var(--dark-text);border-style:none;font-size:11pt;padding:5px}.savedIcon{color:var(--scealai-light-brown)}.optionsBtnContainer>*{height:2rem}.optionsBtnContainer{display:flex;justify-content:space-between;flex-wrap:wrap;--options-btn-background-color-hover: lightgray;margin-left:2%;margin-right:2%}.optionsBtn{background-color:var(--scealai-yellow);border-style:none;color:#464444;margin:0;border-radius:2px;display:flex;align-items:center;padding:5px;background:rgba(223,217,200,0)}.optionsBtn:hover{background-color:var(--options-btn-background-color-hover);color:#35322f;cursor:pointer;border-radius:2}.optionsPopupBtn{margin-right:4px}.optionsBtnIcon{margin-left:5px}.grammarMessageBanner{background-color:#8fcaff;display:flex;align-items:center}.grammarMessage{display:block;flex:1}.grammarMessage+.displayGrammarTagsIcon{flex:0 0 auto}.displayGrammarTagsIcon{margin-right:20px}.displayGrammarTagsIcon:hover{cursor:pointer}.disableDiv{pointer-events:none;opacity:2}.storyContainer{z-index:1;--feedbackHeight: 120px;--grammarMessageHeight: 80px;--dictionaryWidth: 100%}.feedbackHeader{width:100%;padding-left:20px;padding-right:20px;height:30px;background-color:var(--scealai-green);color:#fff;display:flex;align-items:center}.closeFeedbackBtn{margin-left:auto}.closeFeedbackBtn:hover{cursor:pointer}.textFieldContainer{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px}.textField{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px;border:none}.audioPlayer{height:30px;width:90%;background-color:#f1f3f4;border:1px solid rgba(140,128,110,.5254901961)}.selectErrorCheckbox{flex-wrap:wrap;justify-content:space-around;text-align:left;background-color:var(--scealai-green);display:flex;color:#fff}.checkAllBox{text-align:left;padding:5px 10px 10px;font-weight:700}.errorContainer{margin:2px}.errorContainer:hover{cursor:pointer}.hideLegendItem{text-decoration:line-through;opacity:.5}.errorColorBox{display:inline-flex;width:30px;height:15px}.dictionaryContainer{border-top:solid grey 1px;width:100%;display:flex;flex-direction:column}.dictionaryHeader{padding:5px;background-color:var(--scealai-green);color:#fff;display:flex;align-items:column}.closeDictionaryBtn{margin-left:auto}.closeDictionaryBtn:hover{cursor:pointer}.closeSynthesisBtn{float:right;padding-top:10px;padding-right:30px}.closeSynthesisBtn:hover{cursor:pointer}.dictionaryHeight{height:var(--dictionaryHeight)}.dictionarySubHeader{padding:5px;background-color:var(--scealai-green);color:#fff;display:flex}.dictionaryName{background-color:var(--scealai-green);font-size:12px;color:#fff;padding-right:5px;padding-top:5px}.dictionaryName:hover{color:var(--scealai-light-green);text-decoration:none;cursor:pointer}.dictionaryInput{background-color:var(--scealai-green);color:#fff;display:flex;align-items:center;justify-content:center;padding-bottom:10px;gap:1rem}.searchDictionaryBtn{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.searchDictionaryBtn:hover{background-color:var(--scealai-yellow-hover);color:#fff}.dictionaryIframe{height:var(--dictionaryHeight);width:100%;border-radius:0 0 5px 5px;background:white}.ql-container{height:auto;background-color:#f8f9fa}.ql-editor{background-color:#fff;z-index:1;padding:10px 20px;font-size:14pt;font-family:Times New Roman,Times,serif;min-height:60vh!important;max-height:60vh!important}.\\2699 {font-size:xx-large;color:#a9a9a9;cursor:pointer;align-items:center}.\\2699:hover{color:#000;background-color:#aeffc486}.wordCountContainer{display:flex;align-items:center;padding-left:8px;padding-top:0;border-bottom:1px solid #ccc}.quill-editor-dict{height:calc(var(--textfieldHeight) - 44px)}.text-input-highlight-container .text-highlight-element{background:var(--scealai-cream-2)}.bg-blue{background-color:#add8e6}.tickIcon{margin-left:5px}.refreshGrammar:hover{cursor:pointer}@media only screen and (max-width: 750px){.dictionaryModeContainer{flex-direction:column-reverse}.dictionaryContainer,.textField{width:100%}}\n',".custom-tooltip:before{content:none!important}[data-selected]{margin:.3em}[highlight-tag-type]{border-radius:3px}span[highlight-tag-type]:hover{cursor:pointer}span:not[highlight-tag-type]{border-radius:0;padding-left:0;padding-right:0}[highlight-tag-type=LEATHAN-CAOL]{border:1px solid gray;border-radius:0!important;padding-left:0!important;padding-right:0!important}\n",'.ql-editor{overflow-y:auto}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=times-new-roman]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=times-new-roman]:before{content:"Times New Roman";font-family:Times New Roman}.ql-font-times-new-roman{font-family:times new roman}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=arial]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=arial]:before{content:"Arial";font-family:arial}.ql-font-arial{font-family:arial}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=sans-serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=sans-serif]:before{content:"Sans Serif";font-family:"sans serif"}.ql-font-sans-serif{font-family:"sans serif"}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{content:"Monospace";font-family:"monospace"}.ql-font-monospace{font-family:"monospace"}\n'],encapsulation:2}),a})(),ze=(()=>{class a{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustHtml(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(He.H7,16))},a.\u0275pipe=e.Yjl({name:"safeHtml",type:a,pure:!0}),a})();function Vt(a,h){if(1&a&&(e.TgZ(0,"div",14)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.Oqu(t.ts.l.synthesising)}}function Kt(a,h){1&a&&(e._UZ(0,"span",18),e.ALo(1,"safeHtml")),2&a&&e.Q6J("innerHTML",e.lcZ(1,1,h.$implicit.outerHTML),e.oJD)}function $t(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,b=e.oxw(2);return e.KtG(b.stopSection(l))}),e._UZ(1,"i",20),e.qZA()}}function Xt(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,b=e.oxw(2);return e.KtG(b.playSection(l))}),e._UZ(1,"i",21),e.qZA()}}function en(a,h){if(1&a&&(e.TgZ(0,"div",2),e.YNc(1,Kt,2,3,"span",16),e.YNc(2,$t,2,0,"button",17),e.YNc(3,Xt,2,0,"button",17),e.qZA()),2&a){const t=h.$implicit;e.xp6(1),e.Q6J("ngForOf",t.spans),e.xp6(1),e.Q6J("ngIf",!t.audio.paused),e.xp6(1),e.Q6J("ngIf",t.audio.paused)}}function tn(a,h){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,en,4,3,"div",15),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.chosenSections)}}function nn(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"button",24),e._uU(2),e.qZA(),e.TgZ(3,"button",25),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.changeSections(l.sentences))}),e._uU(4),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.paragraph),e.xp6(2),e.Oqu(t.ts.l.sentence)}}function rn(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"button",25),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.changeSections(l.paragraphs))}),e._uU(2),e.qZA(),e.TgZ(3,"button",24),e._uU(4),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.paragraph),e.xp6(2),e.Oqu(t.ts.l.sentence)}}function on(a,h){if(1&a&&(e.TgZ(0,"div",22)(1,"div",23),e._uU(2),e.qZA(),e.YNc(3,nn,5,2,"div",11),e.YNc(4,rn,5,2,"div",11),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.listen_by," "),e.xp6(1),e.Q6J("ngIf",t.isParagraphMode()),e.xp6(1),e.Q6J("ngIf",t.isSentenceMode())}}let sn=(()=>{class a{constructor(t,r,l,b,A){this.storyService=t,this.route=r,this.router=l,this.ts=b,this.synthesis=A,this.paragraphs=[],this.sentences=[],this.audioFinishedLoading=!1}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.storyId=t.route.snapshot.paramMap.get("id");let r=yield(0,B.z)(t.storyService.getStory(t.storyId));t.synthesis.synthesiseStory(r).then(([l,b])=>{t.paragraphs=l,t.sentences=b,t.chosenSections=t.paragraphs,t.audioFinishedLoading=!0})})()}isSentenceMode(){return this.chosenSections[0]instanceof W.cj}isParagraphMode(){return this.chosenSections[0]instanceof W.nv}changeSections(t){this.chosenSections=t,this.paragraphs.concat(this.sentences).forEach(l=>this.stopSection(l))}playSection(t){t.play(),t.highlight()}stopSection(t){t.stop(),t.removeHighlight()}goToDashboard(){this.router.navigateByUrl("/dashboard/"+this.storyId)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.N),e.Y36(s.gz),e.Y36(s.F0),e.Y36(g.D),e.Y36(W.cf))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-synthesis"]],decls:18,vars:5,consts:[["src","assets/img/book.png",1,"bookImg"],[1,"page"],[1,"paragraphContainer"],[1,"bookContainerSynth"],[1,"bookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"storyContainer"],[1,"storyHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[4,"ngIf"],[1,"footer"],["class","btnContainer",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"btnContainer"],[1,"footerText"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"]],template:function(t,r){1&t&&(e._UZ(0,"img",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5),e.NdJ("click",function(){return r.goToDashboard()}),e._UZ(6,"i",6),e._uU(7),e.qZA(),e._UZ(8,"div"),e.qZA(),e.TgZ(9,"div",7)(10,"div",8),e._uU(11),e.qZA(),e.TgZ(12,"div")(13,"div",9),e.YNc(14,Vt,4,1,"div",10),e.YNc(15,tn,2,1,"div",11),e.qZA(),e.TgZ(16,"div",12),e.YNc(17,on,5,3,"div",13),e.qZA()()()()()),2&t&&(e.xp6(7),e.hij(" ",r.ts.l.story,""),e.xp6(4),e.hij(" ",r.ts.l.listen_and_correct," "),e.xp6(3),e.Q6J("ngIf",!r.audioFinishedLoading),e.xp6(1),e.Q6J("ngIf",r.audioFinishedLoading),e.xp6(2),e.Q6J("ngIf",r.audioFinishedLoading))},dependencies:[d.sg,d.O5,ze],styles:['.bookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:var(--dark-text);width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.storyContainer[_ngcontent-%COMP%]{margin-top:10px}.storyHeader[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]:hover, .selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),a})();class an{constructor(h,t=[],r=[],l=[],b=[],A=[],P=[]){this.paragraphAudioIds=t,this.paragraphIndices=r,this.paragraphTranscriptions=l,this.sentenceAudioIds=b,this.sentenceIndices=A,this.sentenceTranscriptions=P,this.storyData=h,this.date=new Date,this.archived=!1}}var cn=n(2754),Qe=n(3267),dn=n(7392);function ln(a,h){1&a&&(e.TgZ(0,"span"),e._uU(1,"*"),e.qZA())}function un(a,h){if(1&a&&(e.TgZ(0,"div",16),e._uU(1),e._UZ(2,"i",17),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.ts.l.saved," ")}}function pn(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2);return e.KtG(l.saveRecordings())}),e._uU(1),e._UZ(2,"i",19),e.qZA()}if(2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.ts.l.save," ")}}function gn(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.goToDashboard())}),e._UZ(2,"i",10),e._uU(3),e.qZA(),e.TgZ(4,"div",11),e._uU(5),e.YNc(6,ln,2,0,"span",12),e.qZA(),e.TgZ(7,"div",13),e.YNc(8,un,3,1,"div",14),e.YNc(9,pn,3,1,"div",15),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(3),e.hij(" ",t.ts.l.story," "),e.xp6(2),e.hij(" ",null==t.story?null:t.story.title,""),e.xp6(1),e.Q6J("ngIf",!t.recordingSaved),e.xp6(2),e.Q6J("ngIf",t.recordingSaved),e.xp6(1),e.Q6J("ngIf",!t.recordingSaved)}}function fn(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div",20),e.NdJ("click",function(){e.CHM(t),e.oxw();const l=e.MAs(5);return e.KtG(l.toggle())}),e.TgZ(1,"mat-icon"),e._uU(2,"menu"),e.qZA(),e._uU(3),e.qZA()}if(2&a){const t=e.oxw();e.xp6(3),e.hij(" ",t.ts.l.archive," ")}}const hn=function(a){return{"font-style":a}};function mn(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"div",21),e.NdJ("click",function(){const b=e.CHM(t).$implicit,A=e.oxw();return e.KtG(A.setCurrentRecording(b))}),e.TgZ(2,"div",22)(3,"div",23),e._uU(4),e.qZA()(),e.TgZ(5,"div",24),e._uU(6),e.ALo(7,"date"),e.qZA()(),e._UZ(8,"hr"),e.qZA()}if(2&a){const t=h.$implicit;e.xp6(1),e.uIk("id",t._id),e.xp6(2),e.Q6J("ngStyle",e.VKq(7,hn,t.archived?"none":"italic")),e.xp6(1),e.hij(" ",null==t||null==t.storyData?null:t.storyData.title,""),e.xp6(2),e.hij(" ",e.xi3(7,4,t.date,"d/M/yy, h:mm a")," ")}}function vn(a,h){if(1&a&&(e.TgZ(0,"div",30)(1,"b"),e._uU(2),e.qZA(),e._UZ(3,"grid-spinner"),e.qZA()),2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(t.ts.l.synthesising)}}function _n(a,h){1&a&&(e._UZ(0,"span",42),e.ALo(1,"safeHtml")),2&a&&e.Q6J("innerHTML",e.lcZ(1,1,h.$implicit.outerHTML),e.oJD)}function yn(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,b=e.oxw(3);return e.KtG(b.stopSection(l))}),e._UZ(1,"i",44),e.qZA()}}function xn(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit,b=e.oxw(3);return e.KtG(b.playSection(l))}),e._UZ(1,"i",45),e.qZA()}}function bn(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().index,b=e.oxw(3);return e.KtG(b.recordAudio(l))}),e._UZ(1,"i",47),e.qZA()}}function Tn(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().index,b=e.oxw(3);return e.KtG(b.stopRecording(l))}),e._UZ(1,"i",49),e.qZA()}}function Cn(a,h){1&a&&e._UZ(0,"hr",50)}function wn(a,h){1&a&&(e.TgZ(0,"div",51),e._UZ(1,"div",52),e.qZA())}function Sn(a,h){if(1&a&&(e.TgZ(0,"div",53)(1,"span",54),e._uU(2),e.qZA(),e.TgZ(3,"span",55),e._uU(4),e.qZA()()),2&a){const t=e.oxw().index,r=e.oxw(3);e.xp6(2),e.hij("",r.ts.l.speech_recognition_output," "),e.xp6(2),e.Oqu(r.sectionTranscriptions[t])}}function An(a,h){if(1&a&&e._UZ(0,"audio",59,60),2&a){const t=e.oxw(2).index,r=e.oxw(3);e.uIk("src",r.sectionAudioSources[t],e.LSH)}}function Mn(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(2).index,b=e.oxw(3);return e.KtG(b.deleteRecording(l))}),e._UZ(1,"i",62),e.qZA()}}function kn(a,h){if(1&a&&(e.TgZ(0,"div",56)(1,"div",54),e._uU(2),e.qZA(),e.YNc(3,An,2,1,"audio",57),e.YNc(4,Mn,2,0,"button",58),e.qZA()),2&a){const t=e.oxw().index,r=e.oxw(3);e.xp6(2),e.Oqu(r.ts.l.your_recording),e.xp6(1),e.Q6J("ngIf",r.sectionAudioSources[t]),e.xp6(1),e.Q6J("ngIf",r.sectionAudioSources[t]&&!r.currentRecording.archived)}}function On(a,h){if(1&a&&(e.TgZ(0,"div",32)(1,"div",33)(2,"div"),e.YNc(3,_n,2,3,"span",34),e.YNc(4,yn,2,0,"button",35),e.YNc(5,xn,2,0,"button",35),e.YNc(6,bn,2,0,"button",36),e.YNc(7,Tn,2,0,"button",37),e.qZA(),e.YNc(8,Cn,1,0,"hr",38),e.YNc(9,wn,2,0,"div",39),e.YNc(10,Sn,5,2,"div",40),e.YNc(11,kn,5,3,"div",41),e.qZA()()),2&a){const t=h.$implicit,r=h.index,l=e.oxw(3);e.xp6(3),e.Q6J("ngForOf",t.spans),e.xp6(1),e.Q6J("ngIf",!t.audio.paused),e.xp6(1),e.Q6J("ngIf",t.audio.paused),e.xp6(1),e.Q6J("ngIf",!l.isRecording(t,r)&&!l.currentRecording.archived),e.xp6(1),e.Q6J("ngIf",l.isRecording(t,r)&&!l.currentRecording.archived),e.xp6(1),e.Q6J("ngIf",l.sectionAudioSources[r]),e.xp6(1),e.Q6J("ngIf",l.isTranscribing[r]),e.xp6(1),e.Q6J("ngIf",l.sectionTranscriptions[r]),e.xp6(1),e.Q6J("ngIf",l.sectionAudioSources[r])}}function Pn(a,h){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,On,12,9,"div",31),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.chosenSections)}}function In(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"button",67),e._uU(2),e.qZA(),e.TgZ(3,"button",68),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(3);return e.KtG(l.changeSections(l.sentences))}),e._uU(4),e.qZA()()}if(2&a){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.ts.l.paragraph," "),e.xp6(2),e.hij(" ",t.ts.l.sentence," ")}}function En(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"button",68),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(3);return e.KtG(l.changeSections(l.paragraphs))}),e._uU(2),e.qZA(),e.TgZ(3,"button",67),e._uU(4),e.qZA()()}if(2&a){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.ts.l.paragraph," "),e.xp6(2),e.hij(" ",t.ts.l.sentence," ")}}function Zn(a,h){if(1&a){const t=e.EpF();e.TgZ(0,"button",69),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(3);return e.KtG(l.archiveRecording())}),e._uU(1),e.qZA()}if(2&a){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.ts.l.archive_recording," ")}}function Bn(a,h){if(1&a&&(e.TgZ(0,"div",63)(1,"div",64)(2,"div",65),e._uU(3),e.qZA(),e.YNc(4,In,5,2,"div",12),e.YNc(5,En,5,2,"div",12),e.YNc(6,Zn,2,1,"button",66),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(3),e.hij(" ",t.ts.l.listen_by," "),e.xp6(1),e.Q6J("ngIf",t.isParagraphMode()),e.xp6(1),e.Q6J("ngIf",t.isSentenceMode()),e.xp6(1),e.Q6J("ngIf",!t.currentRecording.archived&&t.currentRecording.storyData.text!=t.story.text)}}function Fn(a,h){if(1&a&&(e.TgZ(0,"div",25)(1,"div",26),e._uU(2),e.qZA(),e.TgZ(3,"div",27),e.YNc(4,vn,4,1,"div",28),e.YNc(5,Pn,2,1,"div",12),e.qZA(),e.YNc(6,Bn,7,4,"div",29),e.qZA()),2&a){const t=e.oxw();e.xp6(2),e.hij(" ",t.ts.l.listen_record_compare," "),e.xp6(2),e.Q6J("ngIf",!t.audioFinishedLoading&&!t.recordingsFinishedLoading),e.xp6(1),e.Q6J("ngIf",t.audioFinishedLoading),e.xp6(1),e.Q6J("ngIf",t.audioFinishedLoading)}}const Un=[{path:"",pathMatch:"full",redirectTo:"contents"},{path:"contents",component:Me,canActivate:[i.P]},{path:"dashboard/:id",component:Wt,canActivate:[i.P],canDeactivate:[c]},{path:"synthesis/:id",component:sn,canActivate:[i.P],canDeactivate:[m]},{path:"record-story/:id",component:(()=>{class a{constructor(t,r,l,b,A,P,I,L,q){this.storyService=t,this.ts=r,this.sanitizer=l,this.route=b,this.router=A,this.recordingService=P,this.synthesis=I,this.engagement=L,this.dialog=q,this.story=new y,this.paragraphs=[],this.sentences=[],this.isRecordingParagraph=[],this.isRecordingSentence=[],this.isRecordingSection=[],this.paragraphAudioSources=[],this.sentenceAudioSources=[],this.sectionAudioSources=[],this.paragraphBlobs=[],this.sentenceBlobs=[],this.sectionBlobs=[],this.paragraphChunks=[],this.sentenceChunks=[],this.sectionChunks=[],this.recordingSaved=!0,this.audioFinishedLoading=!1,this.url_ASR_API="https://phoneticsrv3.lcs.tcd.ie/asr_api/recognise",this.sentenceTranscriptions=[],this.paragraphTranscriptions=[],this.sectionTranscriptions=[],this.isTranscribing=[!1],this.recordings=[],this.currentRecording=null,this.lastClickedRecordingId=""}ngOnInit(){var t=this;return(0,f.Z)(function*(){t.chunks=[],t.sectionAudioSources=t.paragraphAudioSources,t.sectionBlobs=t.paragraphBlobs,t.sectionChunks=t.paragraphChunks,t.sectionTranscriptions=t.paragraphTranscriptions,t.isRecordingSection=t.isRecordingParagraph;const r=t.route.snapshot.paramMap.get("id");t.story=yield(0,B.z)(t.storyService.getStory(r)),(0,cn.TD)({audio:!0,video:!1}).then((0,f.Z)(function*(){t.story.activeRecording?t.loadRecordings():t.createNewRecording()})).catch(l=>{t.openMicRequestDialog()})})()}loadRecordings(){var t=this;return(0,f.Z)(function*(){t.recordings=yield(0,B.z)(t.recordingService.getRecordings(t.story._id)),t.recordings.sort((l,b)=>l.date>b.date?-1:1);let r=t.recordings.filter(l=>!1===l.archived);t.setCurrentRecording(r[0])})()}setCurrentRecording(t){this.currentRecording=t,this.loadSynthesis(this.currentRecording.storyData),this.loadAudio(this.currentRecording);let r=this.currentRecording._id,l=document.getElementById(r);l&&(this.lastClickedRecordingId&&document.getElementById(this.lastClickedRecordingId).classList.remove("clickedresultCard"),this.lastClickedRecordingId=r,l.classList.add("clickedresultCard"))}createNewRecording(){var t=this;return(0,f.Z)(function*(){const r=yield(0,B.z)(t.recordingService.create(new an(t.story)));t.story=yield(0,B.z)(t.storyService.updateActiveRecording(t.story._id,r._id)),t.loadRecordings()})()}archiveRecording(){var t=this;return(0,f.Z)(function*(){yield(0,B.z)(t.recordingService.updateArchiveStatus(t.currentRecording._id)),t.createNewRecording()})()}loadSynthesis(t){this.synthesis.synthesiseStory(t).then(([r,l])=>{this.paragraphs=r,this.sentences=l,this.chosenSections=this.paragraphs,this.audioFinishedLoading=!0})}loadAudio(t){var r=this;return(0,f.Z)(function*(){r.audioFinishedLoading=!1,r.paragraphAudioSources=[],r.paragraphTranscriptions=[],r.sentenceAudioSources=[],r.sentenceTranscriptions=[],r.sectionAudioSources=[],r.sectionTranscriptions=[];for(let l=0;l<t.paragraphIndices.length;++l){let b=yield(0,B.z)(r.recordingService.getAudio(t.paragraphAudioIds[l]));r.paragraphBlobs[l]=b,r.paragraphAudioSources[t.paragraphIndices[l]]=r.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(b)),r.paragraphTranscriptions[t.paragraphIndices[l]]=t.paragraphTranscriptions[t.paragraphIndices[l]]}for(let l=0;l<t.sentenceIndices.length;++l){let b=yield(0,B.z)(r.recordingService.getAudio(t.sentenceAudioIds[l]));r.sentenceBlobs[l]=b,r.sentenceAudioSources[t.sentenceIndices[l]]=r.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(b)),r.sentenceTranscriptions[t.sentenceIndices[l]]=t.sentenceTranscriptions[t.sentenceIndices[l]]}r.sectionTranscriptions=r.paragraphTranscriptions,r.sectionAudioSources=r.paragraphAudioSources})()}recordAudio(t){this.engagement.addEventForLoggedInUser(S.tw["RECORD-STORY"],this.story),navigator.mediaDevices.getUserMedia({audio:!0}).then(l=>{this.stream=l,this.recorder=new MediaRecorder(this.stream),this.sectionChunks[t]=[],this.recorder.start(),this.isRecordingSection[t]=!0,this.recorder.ondataavailable=b=>{this.sectionChunks[t].push(b.data)}}).catch()}stopRecording(t){this.recorder.stop(),this.isRecordingSection[t]=!1,this.stream.getTracks().forEach(r=>r.stop()),setTimeout(()=>{const r=new Blob(this.sectionChunks[t],{type:"audio/mp3"});this.sectionBlobs[t]=r,this.sectionAudioSources[t]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(r)),this.recordingSaved=!1;const l=new FileReader;l.readAsDataURL(r),l.onloadend=function(){let b=l.result.split(";base64,")[1];this.getTranscription(b,t)}.bind(this)},500)}getTranscription(t,r){this.isTranscribing[r]=!0,this.isParagraphMode()&&(this.paragraphTranscriptions[r]=null),this.isSentenceMode()&&(this.sentenceTranscriptions[r]=null),fetch(this.url_ASR_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({recogniseBlob:t,developer:!0})}).then(b=>b.json()).then(b=>{let A=b.transcriptions[0].utterance;this.isParagraphMode()?(this.paragraphTranscriptions[r]=A,this.sectionTranscriptions[r]=this.paragraphTranscriptions[r]):this.isSentenceMode()&&(this.sentenceTranscriptions[r]=A,this.sectionTranscriptions[r]=this.sentenceTranscriptions[r]),this.isTranscribing[r]=!1})}deleteRecording(t){this.recordingSaved=!1,delete this.sectionAudioSources[t],delete this.sectionChunks[t],delete this.sectionBlobs[t],delete this.sectionTranscriptions[t]}saveRecordings(){var t=this;return(0,f.Z)(function*(){const r=Object.entries(t.paragraphBlobs).map(function(){var Y=(0,f.Z)(function*([oe,ie]){return t.recordingService.saveAudio(t.story._id,ie,oe).toPromise()});return function(oe){return Y.apply(this,arguments)}}()),l=Object.entries(t.sentenceBlobs).map(function(){var Y=(0,f.Z)(function*([oe,ie]){return t.recordingService.saveAudio(t.story._id,ie,oe).toPromise()});return function(oe){return Y.apply(this,arguments)}}()),b=yield Promise.all(r),A=yield Promise.all(l);let P=[],I=[];for(const Y of b)P.push(Y.index),I.push(Y.fileId);let L=[],q=[];for(const Y of A)L.push(Y.index),q.push(Y.fileId);const H={paragraphAudioIds:I,paragraphIndices:P,paragraphTranscriptions:t.paragraphTranscriptions,sentenceIndices:L,sentenceAudioIds:q,sentenceTranscriptions:t.sentenceTranscriptions};let z=yield(0,B.z)(t.recordingService.update(t.story.activeRecording,H));if(z){t.recordingSaved=!0;const Y=t.recordings.indexOf(t.currentRecording);t.recordings.splice(Y,1,z)}else alert("Error while saving audio")})()}isRecording(t,r){return t instanceof W.cj?this.isRecordingSentence[r]:t instanceof W.nv?this.isRecordingParagraph[r]:void 0}isSentenceMode(){return this.chosenSections[0]instanceof W.cj}isParagraphMode(){return this.chosenSections[0]instanceof W.nv}changeSections(t){this.chosenSections=t,this.paragraphs.concat(this.sentences).forEach(l=>this.stopSection(l)),this.isSentenceMode()?(this.sectionAudioSources=this.sentenceAudioSources,this.sectionBlobs=this.sentenceBlobs,this.sectionChunks=this.sentenceChunks,this.sectionTranscriptions=this.sentenceTranscriptions,this.isRecordingSection=this.isRecordingSentence):this.isParagraphMode()&&(this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.sectionTranscriptions=this.paragraphTranscriptions,this.isRecordingSection=this.isRecordingParagraph)}playSection(t){t.play(),t.highlight()}stopSection(t){t.stop(),t.removeHighlight()}goToDashboard(){this.router.navigateByUrl("student/dashboard/"+this.story._id)}openMicRequestDialog(){var t=this;this.dialogRef=this.dialog.open(u.p,{data:{title:this.ts.l.microphone_blocked,message:this.ts.l.page_requires_microphone,confirmText:this.ts.l.refresh,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var r=(0,f.Z)(function*(l){t.dialogRef=void 0,console.log(l),l?t.ngOnInit():t.goToDashboard()});return function(l){return r.apply(this,arguments)}}())}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.N),e.Y36(g.D),e.Y36(He.H7),e.Y36(s.gz),e.Y36(s.F0),e.Y36(j.s),e.Y36(W.cf),e.Y36(k.M),e.Y36(o.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-recording"]],decls:8,vars:4,consts:[[1,"content"],["class","recordingBookHeader",4,"ngIf"],["class","archiveButton",3,"click",4,"ngIf"],["autosize","",1,"archiveNavContainer"],["mode","side",1,"sidenav"],["drawer",""],[4,"ngFor","ngForOf"],["class","recordingStoryContainer",4,"ngIf"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"archiveButton",3,"click"],[1,"contentSection",3,"click"],[1,"contentsLink"],[3,"ngStyle"],[1,"contentsDate"],[1,"recordingStoryContainer"],[1,"recordingStoryHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],["class","footer","style","padding-top: 10px",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],["class","recordingBtn",3,"click",4,"ngIf"],["class","notRecordingBtn blink",3,"click",4,"ngIf"],["class","dividerLine",4,"ngIf"],["class","recognisedSpeechContainer",4,"ngIf"],["style","height: 40px",4,"ngIf"],["class","audioContainer",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"recordingBtn",3,"click"],[1,"fas","fa-microphone"],[1,"notRecordingBtn","blink",3,"click"],[1,"fas","fa-stop-circle"],[1,"dividerLine"],[1,"recognisedSpeechContainer"],[1,"dot-flashing"],[2,"height","40px"],[2,"opacity","0.5"],[1,"recognisedSpeech"],[1,"audioContainer"],["controls","","class","audioPlayer",4,"ngIf"],["class","notRecordingBtn trashBtn",3,"click",4,"ngIf"],["controls","",1,"audioPlayer"],["audioTag",""],[1,"notRecordingBtn","trashBtn",3,"click"],[1,"fas","fa-trash-alt"],[1,"footer",2,"padding-top","10px"],[1,"btnContainer"],[1,"footerText"],["class","changeSplitBtn","style","margin-left: auto",3,"click",4,"ngIf"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"],[1,"changeSplitBtn",2,"margin-left","auto",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.YNc(1,gn,10,5,"div",1),e.YNc(2,fn,4,1,"div",2),e.TgZ(3,"mat-drawer-container",3)(4,"mat-drawer",4,5),e.YNc(6,mn,9,9,"div",6),e.qZA(),e.YNc(7,Fn,7,4,"div",7),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf",r.story),e.xp6(1),e.Q6J("ngIf",r.recordings.length>0),e.xp6(4),e.Q6J("ngForOf",r.recordings),e.xp6(1),e.Q6J("ngIf",r.story))},dependencies:[d.sg,d.O5,d.PC,Qe.jA,Qe.kh,dn.Hw,d.uU,ze],styles:['.content[_ngcontent-%COMP%]{width:90%;margin-left:5%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.archiveNavContainer[_ngcontent-%COMP%]{height:70vh;background-color:#fff}.sidenav[_ngcontent-%COMP%]{padding:20px;width:20vw}.archiveButton[_ngcontent-%COMP%]{display:flex;margin-left:10px;margin-top:20px;font-size:16px}.archiveButton[_ngcontent-%COMP%]:hover, .contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:20px;height:80%}.textContainerSynth[_ngcontent-%COMP%]{box-shadow:0 0 11px 2px #0006;margin-left:5%;width:90%;color:var(--dark-text);background-color:#f8f9fa;text-align:left;overflow:auto;height:100%}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{white-space:nowrap;display:inline;border-style:none;color:var(--dark-text);width:10rem;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.bookTitle[_ngcontent-%COMP%]{overflow:auto;color:var(--dark-text);margin-left:2em;margin-right:2em;display:inline-block;font-size:16pt}.recordingSaveIcon[_ngcontent-%COMP%]{width:10rem;color:var(--dark-text);border-style:none;font-size:11pt;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{white-space:nowrap;color:var(--scealai-light-brown)}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);cursor:pointer;transition:.5s}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:10px;font-weight:700;border-radius:10px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.recordingBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px;float:right}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.recognisedSpeech[_ngcontent-%COMP%]{color:var(--scealai-green);font-style:italic;padding-left:5px}.audioContainer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.audioPlayer[_ngcontent-%COMP%]{width:25%;height:35px}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}.selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}.blink[_ngcontent-%COMP%]{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),a})(),canActivate:[i.P],canDeactivate:[T]}];let Rn=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[s.Bz.forChild(Un),s.Bz]}),a})();var Ln=n(3869);let jn=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[d.ez,Rn,me.LD,R.u5,Ln.F,Ye.fi.forRoot({customOptions:[{import:"formats/font",whitelist:["sans-serif","serif","monospace","arial","times-new-roman"]}]})]}),a})()},7230:function(p){p.exports=function(v){var n={};function d(s){if(n[s])return n[s].exports;var i=n[s]={i:s,l:!1,exports:{}};return v[s].call(i.exports,i,i.exports,d),i.l=!0,i.exports}return d.m=v,d.c=n,d.d=function(s,i,u){d.o(s,i)||Object.defineProperty(s,i,{enumerable:!0,get:u})},d.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},d.t=function(s,i){if(1&i&&(s=d(s)),8&i||4&i&&"object"==typeof s&&s&&s.__esModule)return s;var u=Object.create(null);if(d.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:s}),2&i&&"string"!=typeof s)for(var g in s)d.d(u,g,function(e){return s[e]}.bind(null,g));return u},d.n=function(s){var i=s&&s.__esModule?function(){return s.default}:function(){return s};return d.d(i,"a",i),i},d.o=function(s,i){return Object.prototype.hasOwnProperty.call(s,i)},d.p="",d(d.s=90)}({17:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var s=d(18),i=function(){function u(){}return u.getFirstMatch=function(g,e){var o=e.match(g);return o&&o.length>0&&o[1]||""},u.getSecondMatch=function(g,e){var o=e.match(g);return o&&o.length>1&&o[2]||""},u.matchAndReturnConst=function(g,e,o){if(g.test(e))return o},u.getWindowsVersionName=function(g){switch(g){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},u.getMacOSVersionName=function(g){var e=g.split(".").splice(0,2).map(function(o){return parseInt(o,10)||0});if(e.push(0),10===e[0])switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},u.getAndroidVersionName=function(g){var e=g.split(".").splice(0,2).map(function(o){return parseInt(o,10)||0});if(e.push(0),!(1===e[0]&&e[1]<5))return 1===e[0]&&e[1]<6?"Cupcake":1===e[0]&&e[1]>=6?"Donut":2===e[0]&&e[1]<2?"Eclair":2===e[0]&&2===e[1]?"Froyo":2===e[0]&&e[1]>2?"Gingerbread":3===e[0]?"Honeycomb":4===e[0]&&e[1]<1?"Ice Cream Sandwich":4===e[0]&&e[1]<4?"Jelly Bean":4===e[0]&&e[1]>=4?"KitKat":5===e[0]?"Lollipop":6===e[0]?"Marshmallow":7===e[0]?"Nougat":8===e[0]?"Oreo":9===e[0]?"Pie":void 0},u.getVersionPrecision=function(g){return g.split(".").length},u.compareVersions=function(g,e,o){void 0===o&&(o=!1);var c=u.getVersionPrecision(g),T=u.getVersionPrecision(e),m=Math.max(c,T),f=0,x=u.map([g,e],function(y){var _=m-u.getVersionPrecision(y),C=y+new Array(_+1).join(".0");return u.map(C.split("."),function(S){return new Array(20-S.length).join("0")+S}).reverse()});for(o&&(f=m-Math.min(c,T)),m-=1;m>=f;){if(x[0][m]>x[1][m])return 1;if(x[0][m]===x[1][m]){if(m===f)return 0;m-=1}else if(x[0][m]<x[1][m])return-1}},u.map=function(g,e){var o,c=[];if(Array.prototype.map)return Array.prototype.map.call(g,e);for(o=0;o<g.length;o+=1)c.push(e(g[o]));return c},u.find=function(g,e){var o,c;if(Array.prototype.find)return Array.prototype.find.call(g,e);for(o=0,c=g.length;o<c;o+=1){var T=g[o];if(e(T,o))return T}},u.assign=function(g){for(var e,o,c=g,T=arguments.length,m=new Array(T>1?T-1:0),f=1;f<T;f++)m[f-1]=arguments[f];if(Object.assign)return Object.assign.apply(Object,[g].concat(m));var x=function(){var y=m[e];"object"==typeof y&&null!==y&&Object.keys(y).forEach(function(_){c[_]=y[_]})};for(e=0,o=m.length;e<o;e+=1)x();return g},u.getBrowserAlias=function(g){return s.BROWSER_ALIASES_MAP[g]},u.getBrowserTypeByAlias=function(g){return s.BROWSER_MAP[g]||""},u}();n.default=i,v.exports=n.default},18:function(v,n,d){"use strict";n.__esModule=!0,n.ENGINE_MAP=n.OS_MAP=n.PLATFORMS_MAP=n.BROWSER_MAP=n.BROWSER_ALIASES_MAP=void 0,n.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},n.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},n.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},n.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},n.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var s,i=(s=d(91))&&s.__esModule?s:{default:s},u=d(18);function g(o,c){for(var T=0;T<c.length;T++){var m=c[T];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(o,m.key,m)}}var e=function(){function o(){}var c,m;return o.getParser=function(f,x){if(void 0===x&&(x=!1),"string"!=typeof f)throw new Error("UserAgent should be a string");return new i.default(f,x)},o.parse=function(f){return new i.default(f).getResult()},c=o,m=[{key:"BROWSER_MAP",get:function(){return u.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return u.ENGINE_MAP}},{key:"OS_MAP",get:function(){return u.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return u.PLATFORMS_MAP}}],null&&g(c.prototype,null),m&&g(c,m),o}();n.default=e,v.exports=n.default},91:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var s=o(d(92)),i=o(d(93)),u=o(d(94)),g=o(d(95)),e=o(d(17));function o(T){return T&&T.__esModule?T:{default:T}}var c=function(){function T(f,x){if(void 0===x&&(x=!1),null==f||""===f)throw new Error("UserAgent parameter can't be empty");this._ua=f,this.parsedResult={},!0!==x&&this.parse()}var m=T.prototype;return m.getUA=function(){return this._ua},m.test=function(f){return f.test(this._ua)},m.parseBrowser=function(){var f=this;this.parsedResult.browser={};var x=e.default.find(s.default,function(y){if("function"==typeof y.test)return y.test(f);if(y.test instanceof Array)return y.test.some(function(_){return f.test(_)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.browser=x.describe(this.getUA())),this.parsedResult.browser},m.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},m.getBrowserName=function(f){return f?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},m.getBrowserVersion=function(){return this.getBrowser().version},m.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},m.parseOS=function(){var f=this;this.parsedResult.os={};var x=e.default.find(i.default,function(y){if("function"==typeof y.test)return y.test(f);if(y.test instanceof Array)return y.test.some(function(_){return f.test(_)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.os=x.describe(this.getUA())),this.parsedResult.os},m.getOSName=function(f){var x=this.getOS().name;return f?String(x).toLowerCase()||"":x||""},m.getOSVersion=function(){return this.getOS().version},m.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},m.getPlatformType=function(f){void 0===f&&(f=!1);var x=this.getPlatform().type;return f?String(x).toLowerCase()||"":x||""},m.parsePlatform=function(){var f=this;this.parsedResult.platform={};var x=e.default.find(u.default,function(y){if("function"==typeof y.test)return y.test(f);if(y.test instanceof Array)return y.test.some(function(_){return f.test(_)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.platform=x.describe(this.getUA())),this.parsedResult.platform},m.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},m.getEngineName=function(f){return f?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},m.parseEngine=function(){var f=this;this.parsedResult.engine={};var x=e.default.find(g.default,function(y){if("function"==typeof y.test)return y.test(f);if(y.test instanceof Array)return y.test.some(function(_){return f.test(_)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.engine=x.describe(this.getUA())),this.parsedResult.engine},m.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},m.getResult=function(){return e.default.assign({},this.parsedResult)},m.satisfies=function(f){var x=this,y={},_=0,C={},S=0;if(Object.keys(f).forEach(function(U){var B=f[U];"string"==typeof B?(C[U]=B,S+=1):"object"==typeof B&&(y[U]=B,_+=1)}),_>0){var k=Object.keys(y),O=e.default.find(k,function(U){return x.isOS(U)});if(O){var w=this.satisfies(y[O]);if(void 0!==w)return w}var M=e.default.find(k,function(U){return x.isPlatform(U)});if(M){var F=this.satisfies(y[M]);if(void 0!==F)return F}}if(S>0){var j=Object.keys(C),D=e.default.find(j,function(U){return x.isBrowser(U,!0)});if(void 0!==D)return this.compareVersion(C[D])}},m.isBrowser=function(f,x){void 0===x&&(x=!1);var y=this.getBrowserName().toLowerCase(),_=f.toLowerCase(),C=e.default.getBrowserTypeByAlias(_);return x&&C&&(_=C.toLowerCase()),_===y},m.compareVersion=function(f){var x=[0],y=f,_=!1,C=this.getBrowserVersion();if("string"==typeof C)return">"===f[0]||"<"===f[0]?(y=f.substr(1),"="===f[1]?(_=!0,y=f.substr(2)):x=[],x.push(">"===f[0]?1:-1)):"="===f[0]?y=f.substr(1):"~"===f[0]&&(_=!0,y=f.substr(1)),x.indexOf(e.default.compareVersions(C,y,_))>-1},m.isOS=function(f){return this.getOSName(!0)===String(f).toLowerCase()},m.isPlatform=function(f){return this.getPlatformType(!0)===String(f).toLowerCase()},m.isEngine=function(f){return this.getEngineName(!0)===String(f).toLowerCase()},m.is=function(f,x){return void 0===x&&(x=!1),this.isBrowser(f,x)||this.isOS(f)||this.isPlatform(f)},m.some=function(f){var x=this;return void 0===f&&(f=[]),f.some(function(y){return x.is(y)})},T}();n.default=c,v.exports=n.default},92:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var s,i=(s=d(17))&&s.__esModule?s:{default:s},u=/version\/(\d+(\.?_?\d+)+)/i;n.default=[{test:[/googlebot/i],describe:function(e){var o={name:"Googlebot"},c=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/opera/i],describe:function(e){var o={name:"Opera"},c=i.default.getFirstMatch(u,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/opr\/|opios/i],describe:function(e){var o={name:"Opera"},c=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/SamsungBrowser/i],describe:function(e){var o={name:"Samsung Internet for Android"},c=i.default.getFirstMatch(u,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/Whale/i],describe:function(e){var o={name:"NAVER Whale Browser"},c=i.default.getFirstMatch(u,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/MZBrowser/i],describe:function(e){var o={name:"MZ Browser"},c=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/focus/i],describe:function(e){var o={name:"Focus"},c=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/swing/i],describe:function(e){var o={name:"Swing"},c=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/coast/i],describe:function(e){var o={name:"Opera Coast"},c=i.default.getFirstMatch(u,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var o={name:"Opera Touch"},c=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/yabrowser/i],describe:function(e){var o={name:"Yandex Browser"},c=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/ucbrowser/i],describe:function(e){var o={name:"UC Browser"},c=i.default.getFirstMatch(u,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/Maxthon|mxios/i],describe:function(e){var o={name:"Maxthon"},c=i.default.getFirstMatch(u,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/epiphany/i],describe:function(e){var o={name:"Epiphany"},c=i.default.getFirstMatch(u,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/puffin/i],describe:function(e){var o={name:"Puffin"},c=i.default.getFirstMatch(u,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/sleipnir/i],describe:function(e){var o={name:"Sleipnir"},c=i.default.getFirstMatch(u,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/k-meleon/i],describe:function(e){var o={name:"K-Meleon"},c=i.default.getFirstMatch(u,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/micromessenger/i],describe:function(e){var o={name:"WeChat"},c=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/qqbrowser/i],describe:function(e){var o={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},c=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/msie|trident/i],describe:function(e){var o={name:"Internet Explorer"},c=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/\sedg\//i],describe:function(e){var o={name:"Microsoft Edge"},c=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/edg([ea]|ios)/i],describe:function(e){var o={name:"Microsoft Edge"},c=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/vivaldi/i],describe:function(e){var o={name:"Vivaldi"},c=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/seamonkey/i],describe:function(e){var o={name:"SeaMonkey"},c=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/sailfish/i],describe:function(e){var o={name:"Sailfish"},c=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return c&&(o.version=c),o}},{test:[/silk/i],describe:function(e){var o={name:"Amazon Silk"},c=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/phantom/i],describe:function(e){var o={name:"PhantomJS"},c=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/slimerjs/i],describe:function(e){var o={name:"SlimerJS"},c=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var o={name:"BlackBerry"},c=i.default.getFirstMatch(u,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var o={name:"WebOS Browser"},c=i.default.getFirstMatch(u,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/bada/i],describe:function(e){var o={name:"Bada"},c=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/tizen/i],describe:function(e){var o={name:"Tizen"},c=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/qupzilla/i],describe:function(e){var o={name:"QupZilla"},c=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var o={name:"Firefox"},c=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/electron/i],describe:function(e){var o={name:"Electron"},c=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/MiuiBrowser/i],describe:function(e){var o={name:"Miui"},c=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/chromium/i],describe:function(e){var o={name:"Chromium"},c=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/chrome|crios|crmo/i],describe:function(e){var o={name:"Chrome"},c=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/GSA/i],describe:function(e){var o={name:"Google Search"},c=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:function(e){var o=!e.test(/like android/i),c=e.test(/android/i);return o&&c},describe:function(e){var o={name:"Android Browser"},c=i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/playstation 4/i],describe:function(e){var o={name:"PlayStation 4"},c=i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/safari|applewebkit/i],describe:function(e){var o={name:"Safari"},c=i.default.getFirstMatch(u,e);return c&&(o.version=c),o}},{test:[/.*/i],describe:function(e){var o=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(o,e),version:i.default.getSecondMatch(o,e)}}}],v.exports=n.default},93:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var s,i=(s=d(17))&&s.__esModule?s:{default:s},u=d(18);n.default=[{test:[/Roku\/DVP/],describe:function(e){var o=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:u.OS_MAP.Roku,version:o}}},{test:[/windows phone/i],describe:function(e){var o=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:u.OS_MAP.WindowsPhone,version:o}}},{test:[/windows /i],describe:function(e){var o=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),c=i.default.getWindowsVersionName(o);return{name:u.OS_MAP.Windows,version:o,versionName:c}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var o={name:u.OS_MAP.iOS},c=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return c&&(o.version=c),o}},{test:[/macintosh/i],describe:function(e){var o=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),c=i.default.getMacOSVersionName(o),T={name:u.OS_MAP.MacOS,version:o};return c&&(T.versionName=c),T}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var o=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:u.OS_MAP.iOS,version:o}}},{test:function(e){var o=!e.test(/like android/i),c=e.test(/android/i);return o&&c},describe:function(e){var o=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),c=i.default.getAndroidVersionName(o),T={name:u.OS_MAP.Android,version:o};return c&&(T.versionName=c),T}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var o=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),c={name:u.OS_MAP.WebOS};return o&&o.length&&(c.version=o),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var o=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:u.OS_MAP.BlackBerry,version:o}}},{test:[/bada/i],describe:function(e){var o=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:u.OS_MAP.Bada,version:o}}},{test:[/tizen/i],describe:function(e){var o=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:u.OS_MAP.Tizen,version:o}}},{test:[/linux/i],describe:function(){return{name:u.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:u.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var o=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:u.OS_MAP.PlayStation4,version:o}}}],v.exports=n.default},94:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var s,i=(s=d(17))&&s.__esModule?s:{default:s},u=d(18);n.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var o=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",c={type:u.PLATFORMS_MAP.mobile,vendor:"Huawei"};return o&&(c.model=o),c}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:u.PLATFORMS_MAP.tablet}}},{test:function(e){var o=e.test(/ipod|iphone/i),c=e.test(/like (ipod|iphone)/i);return o&&!c},describe:function(e){var o=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:u.PLATFORMS_MAP.mobile,vendor:"Apple",model:o}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:u.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var o=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&o>=3},describe:function(){return{type:u.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:u.PLATFORMS_MAP.tv}}}],v.exports=n.default},95:function(v,n,d){"use strict";n.__esModule=!0,n.default=void 0;var s,i=(s=d(17))&&s.__esModule?s:{default:s},u=d(18);n.default=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:u.ENGINE_MAP.Blink};var o=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:u.ENGINE_MAP.EdgeHTML,version:o}}},{test:[/trident/i],describe:function(e){var o={name:u.ENGINE_MAP.Trident},c=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:function(e){return e.test(/presto/i)},describe:function(e){var o={name:u.ENGINE_MAP.Presto},c=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:function(e){var o=e.test(/gecko/i),c=e.test(/like gecko/i);return o&&!c},describe:function(e){var o={name:u.ENGINE_MAP.Gecko},c=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:u.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var o={name:u.ENGINE_MAP.WebKit},c=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return c&&(o.version=c),o}}],v.exports=n.default}})},7244:(p,v,n)=>{var i=n(3436)(n(2119),"DataView");p.exports=i},4994:(p,v,n)=>{var d=n(4312),s=n(6421),i=n(13),u=n(8685),g=n(6676);function e(o){var c=-1,T=null==o?0:o.length;for(this.clear();++c<T;){var m=o[c];this.set(m[0],m[1])}}e.prototype.clear=d,e.prototype.delete=s,e.prototype.get=i,e.prototype.has=u,e.prototype.set=g,p.exports=e},9215:(p,v,n)=>{var d=n(1840),s=n(4378),i=n(4981),u=n(7343),g=n(8895);function e(o){var c=-1,T=null==o?0:o.length;for(this.clear();++c<T;){var m=o[c];this.set(m[0],m[1])}}e.prototype.clear=d,e.prototype.delete=s,e.prototype.get=i,e.prototype.has=u,e.prototype.set=g,p.exports=e},1501:(p,v,n)=>{var i=n(3436)(n(2119),"Map");p.exports=i},9850:(p,v,n)=>{var d=n(638),s=n(1184),i=n(866),u=n(3771),g=n(1772);function e(o){var c=-1,T=null==o?0:o.length;for(this.clear();++c<T;){var m=o[c];this.set(m[0],m[1])}}e.prototype.clear=d,e.prototype.delete=s,e.prototype.get=i,e.prototype.has=u,e.prototype.set=g,p.exports=e},4267:(p,v,n)=>{var i=n(3436)(n(2119),"Promise");p.exports=i},6323:(p,v,n)=>{var i=n(3436)(n(2119),"Set");p.exports=i},2858:(p,v,n)=>{var d=n(9215),s=n(3720),i=n(4410),u=n(5576),g=n(2247),e=n(1585);function o(c){var T=this.__data__=new d(c);this.size=T.size}o.prototype.clear=s,o.prototype.delete=i,o.prototype.get=u,o.prototype.has=g,o.prototype.set=e,p.exports=o},443:(p,v,n)=>{var d=n(2119);p.exports=d.Symbol},3457:(p,v,n)=>{var d=n(2119);p.exports=d.Uint8Array},4243:(p,v,n)=>{var i=n(3436)(n(2119),"WeakMap");p.exports=i},6837:p=>{p.exports=function v(n,d){for(var s=-1,i=null==n?0:n.length;++s<i&&!1!==d(n[s],s,n););return n}},9779:p=>{p.exports=function v(n,d){for(var s=-1,i=null==n?0:n.length,u=0,g=[];++s<i;){var e=n[s];d(e,s,n)&&(g[u++]=e)}return g}},2271:(p,v,n)=>{var d=n(5334),s=n(7151),i=n(1503),u=n(891),g=n(8442),e=n(8159),c=Object.prototype.hasOwnProperty;p.exports=function T(m,f){var x=i(m),y=!x&&s(m),_=!x&&!y&&u(m),C=!x&&!y&&!_&&e(m),S=x||y||_||C,k=S?d(m.length,String):[],O=k.length;for(var w in m)(f||c.call(m,w))&&(!S||!("length"==w||_&&("offset"==w||"parent"==w)||C&&("buffer"==w||"byteLength"==w||"byteOffset"==w)||g(w,O)))&&k.push(w);return k}},5059:p=>{p.exports=function v(n,d){for(var s=-1,i=d.length,u=n.length;++s<i;)n[u+s]=d[s];return n}},9719:(p,v,n)=>{var d=n(5683),s=n(217),u=Object.prototype.hasOwnProperty;p.exports=function g(e,o,c){var T=e[o];(!u.call(e,o)||!s(T,c)||void 0===c&&!(o in e))&&d(e,o,c)}},3503:(p,v,n)=>{var d=n(217);p.exports=function s(i,u){for(var g=i.length;g--;)if(d(i[g][0],u))return g;return-1}},4121:(p,v,n)=>{var d=n(1989),s=n(118);p.exports=function i(u,g){return u&&d(g,s(g),u)}},9287:(p,v,n)=>{var d=n(1989),s=n(6555);p.exports=function i(u,g){return u&&d(g,s(g),u)}},5683:(p,v,n)=>{var d=n(6713);p.exports=function s(i,u,g){"__proto__"==u&&d?d(i,u,{configurable:!0,enumerable:!0,value:g,writable:!0}):i[u]=g}},4462:(p,v,n)=>{var d=n(2858),s=n(6837),i=n(9719),u=n(4121),g=n(9287),e=n(9292),o=n(9454),c=n(4444),T=n(9905),m=n(7597),f=n(6967),x=n(8794),y=n(6782),_=n(7878),C=n(4264),S=n(1503),k=n(891),O=n(3222),w=n(5940),M=n(799),F=n(118),j=n(6555),R="[object Arguments]",ge="[object Function]",fe="[object Object]",N={};N[R]=N["[object Array]"]=N["[object ArrayBuffer]"]=N["[object DataView]"]=N["[object Boolean]"]=N["[object Date]"]=N["[object Float32Array]"]=N["[object Float64Array]"]=N["[object Int8Array]"]=N["[object Int16Array]"]=N["[object Int32Array]"]=N["[object Map]"]=N["[object Number]"]=N[fe]=N["[object RegExp]"]=N["[object Set]"]=N["[object String]"]=N["[object Symbol]"]=N["[object Uint8Array]"]=N["[object Uint8ClampedArray]"]=N["[object Uint16Array]"]=N["[object Uint32Array]"]=!0,N["[object Error]"]=N[ge]=N["[object WeakMap]"]=!1,p.exports=function de(Z,ne,re,Ne,K,te){var J,le=1&ne,ue=2&ne,ve=4&ne;if(re&&(J=K?re(Z,Ne,K,te):re(Z)),void 0!==J)return J;if(!w(Z))return Z;var _e=S(Z);if(_e){if(J=y(Z),!le)return o(Z,J)}else{var $=x(Z),ye=$==ge||"[object GeneratorFunction]"==$;if(k(Z))return e(Z,le);if($==fe||$==R||ye&&!K){if(J=ue||ye?{}:C(Z),!le)return ue?T(Z,g(J,Z)):c(Z,u(J,Z))}else{if(!N[$])return K?Z:{};J=_(Z,$,le)}}te||(te=new d);var xe=te.get(Z);if(xe)return xe;te.set(Z,J),M(Z)?Z.forEach(function(Q){J.add(de(Q,ne,re,Q,Z,te))}):O(Z)&&Z.forEach(function(Q,V){J.set(V,de(Q,ne,re,V,Z,te))});var be=_e?void 0:(ve?ue?f:m:ue?j:F)(Z);return s(be||Z,function(Q,V){be&&(Q=Z[V=Q]),i(J,V,de(Q,ne,re,V,Z,te))}),J}},8858:(p,v,n)=>{var d=n(5940),s=Object.create,i=function(){function u(){}return function(g){if(!d(g))return{};if(s)return s(g);u.prototype=g;var e=new u;return u.prototype=void 0,e}}();p.exports=i},8247:(p,v,n)=>{var d=n(5059),s=n(1503);p.exports=function i(u,g,e){var o=g(u);return s(u)?o:d(o,e(u))}},3337:(p,v,n)=>{var d=n(443),s=n(1318),i=n(2902),e=d?d.toStringTag:void 0;p.exports=function o(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":e&&e in Object(c)?s(c):i(c)}},186:(p,v,n)=>{var d=n(3337),s=n(2671);p.exports=function u(g){return s(g)&&"[object Arguments]"==d(g)}},7021:(p,v,n)=>{var d=n(8794),s=n(2671);p.exports=function u(g){return s(g)&&"[object Map]"==d(g)}},7304:(p,v,n)=>{var d=n(5946),s=n(1943),i=n(5940),u=n(2827),e=/^\[object .+?Constructor\]$/,f=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");p.exports=function x(y){return!(!i(y)||s(y))&&(d(y)?f:e).test(u(y))}},771:(p,v,n)=>{var d=n(8794),s=n(2671);p.exports=function u(g){return s(g)&&"[object Set]"==d(g)}},1083:(p,v,n)=>{var d=n(3337),s=n(6231),i=n(2671),E={};E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Arguments]"]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object Boolean]"]=E["[object DataView]"]=E["[object Date]"]=E["[object Error]"]=E["[object Function]"]=E["[object Map]"]=E["[object Number]"]=E["[object Object]"]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object WeakMap]"]=!1,p.exports=function ee(ae){return i(ae)&&s(ae.length)&&!!E[d(ae)]}},1172:(p,v,n)=>{var d=n(5488),s=n(5491),u=Object.prototype.hasOwnProperty;p.exports=function g(e){if(!d(e))return s(e);var o=[];for(var c in Object(e))u.call(e,c)&&"constructor"!=c&&o.push(c);return o}},2809:(p,v,n)=>{var d=n(5940),s=n(5488),i=n(2158),g=Object.prototype.hasOwnProperty;p.exports=function e(o){if(!d(o))return i(o);var c=s(o),T=[];for(var m in o)"constructor"==m&&(c||!g.call(o,m))||T.push(m);return T}},5334:p=>{p.exports=function v(n,d){for(var s=-1,i=Array(n);++s<n;)i[s]=d(s);return i}},5647:p=>{p.exports=function v(n){return function(d){return n(d)}}},3362:(p,v,n)=>{var d=n(3457);p.exports=function s(i){var u=new i.constructor(i.byteLength);return new d(u).set(new d(i)),u}},9292:(p,v,n)=>{p=n.nmd(p);var d=n(2119),s=v&&!v.nodeType&&v,i=s&&p&&!p.nodeType&&p,g=i&&i.exports===s?d.Buffer:void 0,e=g?g.allocUnsafe:void 0;p.exports=function o(c,T){if(T)return c.slice();var m=c.length,f=e?e(m):new c.constructor(m);return c.copy(f),f}},7e3:(p,v,n)=>{var d=n(3362);p.exports=function s(i,u){var g=u?d(i.buffer):i.buffer;return new i.constructor(g,i.byteOffset,i.byteLength)}},4098:p=>{var v=/\w*$/;p.exports=function n(d){var s=new d.constructor(d.source,v.exec(d));return s.lastIndex=d.lastIndex,s}},2533:(p,v,n)=>{var d=n(443),s=d?d.prototype:void 0,i=s?s.valueOf:void 0;p.exports=function u(g){return i?Object(i.call(g)):{}}},5208:(p,v,n)=>{var d=n(3362);p.exports=function s(i,u){var g=u?d(i.buffer):i.buffer;return new i.constructor(g,i.byteOffset,i.length)}},9454:p=>{p.exports=function v(n,d){var s=-1,i=n.length;for(d||(d=Array(i));++s<i;)d[s]=n[s];return d}},1989:(p,v,n)=>{var d=n(9719),s=n(5683);p.exports=function i(u,g,e,o){var c=!e;e||(e={});for(var T=-1,m=g.length;++T<m;){var f=g[T],x=o?o(e[f],u[f],f,e,u):void 0;void 0===x&&(x=u[f]),c?s(e,f,x):d(e,f,x)}return e}},4444:(p,v,n)=>{var d=n(1989),s=n(9383);p.exports=function i(u,g){return d(u,s(u),g)}},9905:(p,v,n)=>{var d=n(1989),s=n(3051);p.exports=function i(u,g){return d(u,s(u),g)}},4610:(p,v,n)=>{var d=n(2119);p.exports=d["__core-js_shared__"]},6713:(p,v,n)=>{var d=n(3436),s=function(){try{var i=d(Object,"defineProperty");return i({},"",{}),i}catch{}}();p.exports=s},9122:p=>{var v="object"==typeof global&&global&&global.Object===Object&&global;p.exports=v},7597:(p,v,n)=>{var d=n(8247),s=n(9383),i=n(118);p.exports=function u(g){return d(g,i,s)}},6967:(p,v,n)=>{var d=n(8247),s=n(3051),i=n(6555);p.exports=function u(g){return d(g,i,s)}},4537:(p,v,n)=>{var d=n(3819);p.exports=function s(i,u){var g=i.__data__;return d(u)?g["string"==typeof u?"string":"hash"]:g.map}},3436:(p,v,n)=>{var d=n(7304),s=n(1990);p.exports=function i(u,g){var e=s(u,g);return d(e)?e:void 0}},9519:(p,v,n)=>{var s=n(9385)(Object.getPrototypeOf,Object);p.exports=s},1318:(p,v,n)=>{var d=n(443),s=Object.prototype,i=s.hasOwnProperty,u=s.toString,g=d?d.toStringTag:void 0;p.exports=function e(o){var c=i.call(o,g),T=o[g];try{o[g]=void 0;var m=!0}catch{}var f=u.call(o);return m&&(c?o[g]=T:delete o[g]),f}},9383:(p,v,n)=>{var d=n(9779),s=n(9975),u=Object.prototype.propertyIsEnumerable,g=Object.getOwnPropertySymbols;p.exports=g?function(o){return null==o?[]:(o=Object(o),d(g(o),function(c){return u.call(o,c)}))}:s},3051:(p,v,n)=>{var d=n(5059),s=n(9519),i=n(9383),u=n(9975);p.exports=Object.getOwnPropertySymbols?function(o){for(var c=[];o;)d(c,i(o)),o=s(o);return c}:u},8794:(p,v,n)=>{var d=n(7244),s=n(1501),i=n(4267),u=n(6323),g=n(4243),e=n(3337),o=n(2827),c="[object Map]",m="[object Promise]",f="[object Set]",x="[object WeakMap]",y="[object DataView]",_=o(d),C=o(s),S=o(i),k=o(u),O=o(g),w=e;(d&&w(new d(new ArrayBuffer(1)))!=y||s&&w(new s)!=c||i&&w(i.resolve())!=m||u&&w(new u)!=f||g&&w(new g)!=x)&&(w=function(M){var F=e(M),j="[object Object]"==F?M.constructor:void 0,D=j?o(j):"";if(D)switch(D){case _:return y;case C:return c;case S:return m;case k:return f;case O:return x}return F}),p.exports=w},1990:p=>{p.exports=function v(n,d){return n?.[d]}},4312:(p,v,n)=>{var d=n(862);p.exports=function s(){this.__data__=d?d(null):{},this.size=0}},6421:p=>{p.exports=function v(n){var d=this.has(n)&&delete this.__data__[n];return this.size-=d?1:0,d}},13:(p,v,n)=>{var d=n(862),u=Object.prototype.hasOwnProperty;p.exports=function g(e){var o=this.__data__;if(d){var c=o[e];return"__lodash_hash_undefined__"===c?void 0:c}return u.call(o,e)?o[e]:void 0}},8685:(p,v,n)=>{var d=n(862),i=Object.prototype.hasOwnProperty;p.exports=function u(g){var e=this.__data__;return d?void 0!==e[g]:i.call(e,g)}},6676:(p,v,n)=>{var d=n(862);p.exports=function i(u,g){var e=this.__data__;return this.size+=this.has(u)?0:1,e[u]=d&&void 0===g?"__lodash_hash_undefined__":g,this}},6782:p=>{var n=Object.prototype.hasOwnProperty;p.exports=function d(s){var i=s.length,u=new s.constructor(i);return i&&"string"==typeof s[0]&&n.call(s,"index")&&(u.index=s.index,u.input=s.input),u}},7878:(p,v,n)=>{var d=n(3362),s=n(7e3),i=n(4098),u=n(2533),g=n(5208);p.exports=function B(R,X,E){var ee=R.constructor;switch(X){case"[object ArrayBuffer]":return d(R);case"[object Boolean]":case"[object Date]":return new ee(+R);case"[object DataView]":return s(R,E);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return g(R,E);case"[object Map]":case"[object Set]":return new ee;case"[object Number]":case"[object String]":return new ee(R);case"[object RegExp]":return i(R);case"[object Symbol]":return u(R)}}},4264:(p,v,n)=>{var d=n(8858),s=n(9519),i=n(5488);p.exports=function u(g){return"function"!=typeof g.constructor||i(g)?{}:d(s(g))}},8442:p=>{var n=/^(?:0|[1-9]\d*)$/;p.exports=function d(s,i){var u=typeof s;return!!(i=i??9007199254740991)&&("number"==u||"symbol"!=u&&n.test(s))&&s>-1&&s%1==0&&s<i}},3819:p=>{p.exports=function v(n){var d=typeof n;return"string"==d||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==n:null===n}},1943:(p,v,n)=>{var u,d=n(4610),s=(u=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"";p.exports=function i(u){return!!s&&s in u}},5488:p=>{var v=Object.prototype;p.exports=function n(d){var s=d&&d.constructor;return d===("function"==typeof s&&s.prototype||v)}},1840:p=>{p.exports=function v(){this.__data__=[],this.size=0}},4378:(p,v,n)=>{var d=n(3503),i=Array.prototype.splice;p.exports=function u(g){var e=this.__data__,o=d(e,g);return!(o<0||(o==e.length-1?e.pop():i.call(e,o,1),--this.size,0))}},4981:(p,v,n)=>{var d=n(3503);p.exports=function s(i){var u=this.__data__,g=d(u,i);return g<0?void 0:u[g][1]}},7343:(p,v,n)=>{var d=n(3503);p.exports=function s(i){return d(this.__data__,i)>-1}},8895:(p,v,n)=>{var d=n(3503);p.exports=function s(i,u){var g=this.__data__,e=d(g,i);return e<0?(++this.size,g.push([i,u])):g[e][1]=u,this}},638:(p,v,n)=>{var d=n(4994),s=n(9215),i=n(1501);p.exports=function u(){this.size=0,this.__data__={hash:new d,map:new(i||s),string:new d}}},1184:(p,v,n)=>{var d=n(4537);p.exports=function s(i){var u=d(this,i).delete(i);return this.size-=u?1:0,u}},866:(p,v,n)=>{var d=n(4537);p.exports=function s(i){return d(this,i).get(i)}},3771:(p,v,n)=>{var d=n(4537);p.exports=function s(i){return d(this,i).has(i)}},1772:(p,v,n)=>{var d=n(4537);p.exports=function s(i,u){var g=d(this,i),e=g.size;return g.set(i,u),this.size+=g.size==e?0:1,this}},862:(p,v,n)=>{var s=n(3436)(Object,"create");p.exports=s},5491:(p,v,n)=>{var s=n(9385)(Object.keys,Object);p.exports=s},2158:p=>{p.exports=function v(n){var d=[];if(null!=n)for(var s in Object(n))d.push(s);return d}},3597:(p,v,n)=>{p=n.nmd(p);var d=n(9122),s=v&&!v.nodeType&&v,i=s&&p&&!p.nodeType&&p,g=i&&i.exports===s&&d.process,e=function(){try{return i&&i.require&&i.require("util").types||g&&g.binding&&g.binding("util")}catch{}}();p.exports=e},2902:p=>{var n=Object.prototype.toString;p.exports=function d(s){return n.call(s)}},9385:p=>{p.exports=function v(n,d){return function(s){return n(d(s))}}},2119:(p,v,n)=>{var d=n(9122),s="object"==typeof self&&self&&self.Object===Object&&self,i=d||s||Function("return this")();p.exports=i},3720:(p,v,n)=>{var d=n(9215);p.exports=function s(){this.__data__=new d,this.size=0}},4410:p=>{p.exports=function v(n){var d=this.__data__,s=d.delete(n);return this.size=d.size,s}},5576:p=>{p.exports=function v(n){return this.__data__.get(n)}},2247:p=>{p.exports=function v(n){return this.__data__.has(n)}},1585:(p,v,n)=>{var d=n(9215),s=n(1501),i=n(9850);p.exports=function g(e,o){var c=this.__data__;if(c instanceof d){var T=c.__data__;if(!s||T.length<199)return T.push([e,o]),this.size=++c.size,this;c=this.__data__=new i(T)}return c.set(e,o),this.size=c.size,this}},2827:p=>{var n=Function.prototype.toString;p.exports=function d(s){if(null!=s){try{return n.call(s)}catch{}try{return s+""}catch{}}return""}},1094:(p,v,n)=>{var d=n(4462);p.exports=function i(u){return d(u,4)}},217:p=>{p.exports=function v(n,d){return n===d||n!=n&&d!=d}},7151:(p,v,n)=>{var d=n(186),s=n(2671),i=Object.prototype,u=i.hasOwnProperty,g=i.propertyIsEnumerable,e=d(function(){return arguments}())?d:function(o){return s(o)&&u.call(o,"callee")&&!g.call(o,"callee")};p.exports=e},1503:p=>{p.exports=Array.isArray},6507:(p,v,n)=>{var d=n(5946),s=n(6231);p.exports=function i(u){return null!=u&&s(u.length)&&!d(u)}},891:(p,v,n)=>{p=n.nmd(p);var d=n(2119),s=n(3580),i=v&&!v.nodeType&&v,u=i&&p&&!p.nodeType&&p,e=u&&u.exports===i?d.Buffer:void 0;p.exports=(e?e.isBuffer:void 0)||s},5946:(p,v,n)=>{var d=n(3337),s=n(5940);p.exports=function o(c){if(!s(c))return!1;var T=d(c);return"[object Function]"==T||"[object GeneratorFunction]"==T||"[object AsyncFunction]"==T||"[object Proxy]"==T}},6231:p=>{p.exports=function n(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=9007199254740991}},3222:(p,v,n)=>{var d=n(7021),s=n(5647),i=n(3597),u=i&&i.isMap,g=u?s(u):d;p.exports=g},5940:p=>{p.exports=function v(n){var d=typeof n;return null!=n&&("object"==d||"function"==d)}},2671:p=>{p.exports=function v(n){return null!=n&&"object"==typeof n}},799:(p,v,n)=>{var d=n(771),s=n(5647),i=n(3597),u=i&&i.isSet,g=u?s(u):d;p.exports=g},8159:(p,v,n)=>{var d=n(1083),s=n(5647),i=n(3597),u=i&&i.isTypedArray,g=u?s(u):d;p.exports=g},118:(p,v,n)=>{var d=n(2271),s=n(1172),i=n(6507);p.exports=function u(g){return i(g)?d(g):s(g)}},6555:(p,v,n)=>{var d=n(2271),s=n(2809),i=n(6507);p.exports=function u(g){return i(g)?d(g,!0):s(g)}},9975:p=>{p.exports=function v(){return[]}},3580:p=>{p.exports=function v(){return!1}},2754:(p,v,n)=>{"use strict";v.TD=void 0;var s=n(4354);Object.defineProperty(v,"TD",{enumerable:!0,get:function(){return s.requestMediaPermissions}})},4354:function(p,v,n){"use strict";var d=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(v,"__esModule",{value:!0}),v.requestVideoPermissions=v.requestAudioPermissions=v.requestMediaPermissions=v.MediaPermissionsErrorType=void 0;const s=d(n(7230));var i,o;(o=i=v.MediaPermissionsErrorType||(v.MediaPermissionsErrorType={})).SystemPermissionDenied="SystemPermissionDenied",o.UserPermissionDenied="UserPermissionDenied",o.CouldNotStartVideoSource="CouldNotStartVideoSource",o.Generic="Generic",v.requestMediaPermissions=o=>new Promise((c,T)=>{navigator.mediaDevices.getUserMedia(o??{audio:!0,video:!0}).then(m=>{m.getTracks().forEach(f=>{f.stop()}),c(!0)}).catch(m=>{const x=s.default.getParser(window.navigator.userAgent).getBrowserName(),y=m.name,_=m.message;let C=i.Generic;"Chrome"===x?"NotAllowedError"===y?"Permission denied by system"===_?C=i.SystemPermissionDenied:"Permission denied"===_&&(C=i.UserPermissionDenied):"NotReadableError"===y&&(C=i.CouldNotStartVideoSource):"Safari"===x?"NotAllowedError"===y&&(C=i.UserPermissionDenied):"Microsoft Edge"===x?"NotAllowedError"===y?C=i.UserPermissionDenied:"NotReadableError"===y&&(C=i.CouldNotStartVideoSource):"Firefox"===x&&("NotFoundError"===y||"NotReadableError"===y?C=i.SystemPermissionDenied:"NotAllowedError"===y?C=i.UserPermissionDenied:"AbortError"===y&&(C=i.CouldNotStartVideoSource)),T({type:C,name:m.name,message:m.message})})}),v.requestAudioPermissions=()=>(0,v.requestMediaPermissions)({audio:!0,video:!1}),v.requestVideoPermissions=()=>(0,v.requestMediaPermissions)({audio:!1,video:!0})},5439:p=>{window,p.exports=function(v){var n={};function d(s){if(n[s])return n[s].exports;var i=n[s]={i:s,l:!1,exports:{}};return v[s].call(i.exports,i,i.exports,d),i.l=!0,i.exports}return d.m=v,d.c=n,d.d=function(s,i,u){d.o(s,i)||Object.defineProperty(s,i,{enumerable:!0,get:u})},d.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},d.t=function(s,i){if(1&i&&(s=d(s)),8&i||4&i&&"object"==typeof s&&s&&s.__esModule)return s;var u=Object.create(null);if(d.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:s}),2&i&&"string"!=typeof s)for(var g in s)d.d(u,g,function(e){return s[e]}.bind(null,g));return u},d.n=function(s){var i=s&&s.__esModule?function(){return s.default}:function(){return s};return d.d(i,"a",i),i},d.o=function(s,i){return Object.prototype.hasOwnProperty.call(s,i)},d.p="/dist/",d(d.s=1)}([function(v,n,d){"use strict";var s=this&&this.__awaiter||function(u,g,e,o){return new(e||(e=Promise))(function(c,T){function m(y){try{x(o.next(y))}catch(_){T(_)}}function f(y){try{x(o.throw(y))}catch(_){T(_)}}function x(y){var _;y.done?c(y.value):(_=y.value,_ instanceof e?_:new e(function(C){C(_)})).then(m,f)}x((o=o.apply(u,g||[])).next())})},i=this&&this.__generator||function(u,g){var e,o,c,T,m={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return T={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function f(x){return function(y){return function(_){if(e)throw new TypeError("Generator is already executing.");for(;T&&(T=0,_[0]&&(m=0)),m;)try{if(e=1,o&&(c=2&_[0]?o.return:_[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,_[1])).done)return c;switch(o=0,c&&(_=[2&_[0],c.value]),_[0]){case 0:case 1:c=_;break;case 4:return m.label++,{value:_[1],done:!1};case 5:m.label++,o=_[1],_=[0];continue;case 7:_=m.ops.pop(),m.trys.pop();continue;default:if(!((c=(c=m.trys).length>0&&c[c.length-1])||6!==_[0]&&2!==_[0])){m=0;continue}if(3===_[0]&&(!c||_[1]>c[0]&&_[1]<c[3])){m.label=_[1];break}if(6===_[0]&&m.label<c[1]){m.label=c[1],c=_;break}if(c&&m.label<c[2]){m.label=c[2],m.ops.push(_);break}c[2]&&m.ops.pop(),m.trys.pop();continue}_=g.call(u,m)}catch(C){_=[6,C],o=0}finally{e=c=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([x,y])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.file2b64=void 0,n.file2b64=function(u){return s(this,void 0,void 0,function(){var g,e;return i(this,function(o){return g=new FileReader,e=new Promise(function(c,T){g.addEventListener("load",function(){var m,f=null===(m=g.result)||void 0===m?void 0:m.toString();f?c(f):T("could not convert file to base64")},!1)}),g.readAsDataURL(u),[2,e]})})}},function(v,n,d){"use strict";var s=this&&this.__awaiter||function(m,f,x,y){return new(x||(x=Promise))(function(_,C){function S(w){try{O(y.next(w))}catch(M){C(M)}}function k(w){try{O(y.throw(w))}catch(M){C(M)}}function O(w){var M;w.done?_(w.value):(M=w.value,M instanceof x?M:new x(function(F){F(M)})).then(S,k)}O((y=y.apply(m,f||[])).next())})},i=this&&this.__generator||function(m,f){var x,y,_,C,S={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return C={next:k(0),throw:k(1),return:k(2)},"function"==typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function k(O){return function(w){return function(M){if(x)throw new TypeError("Generator is already executing.");for(;C&&(C=0,M[0]&&(S=0)),S;)try{if(x=1,y&&(_=2&M[0]?y.return:M[0]?y.throw||((_=y.return)&&_.call(y),0):y.next)&&!(_=_.call(y,M[1])).done)return _;switch(y=0,_&&(M=[2&M[0],_.value]),M[0]){case 0:case 1:_=M;break;case 4:return S.label++,{value:M[1],done:!1};case 5:S.label++,y=M[1],M=[0];continue;case 7:M=S.ops.pop(),S.trys.pop();continue;default:if(!((_=(_=S.trys).length>0&&_[_.length-1])||6!==M[0]&&2!==M[0])){S=0;continue}if(3===M[0]&&(!_||M[1]>_[0]&&M[1]<_[3])){S.label=M[1];break}if(6===M[0]&&S.label<_[1]){S.label=_[1],_=M;break}if(_&&S.label<_[2]){S.label=_[2],S.ops.push(M);break}_[2]&&S.ops.pop(),S.trys.pop();continue}M=f.call(m,S)}catch(F){M=[6,F],y=0}finally{x=_=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}([O,w])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.imageCompressor=void 0;var u=d(2),g=d(3),e=d(0),o=d(4),c=d(5),T=function(){function m(f,x){var y=this;this.quill=f,this.options=x||{};var _=!!x.debug;this.Logger=new c.ConsoleLogger(_,!!x.suppressErrorLogging),(0,g.warnAboutOptions)(x,this.Logger),this.imageDrop=new u.ImageDrop(f,function(k){return s(y,void 0,void 0,function(){var O;return i(this,function(w){switch(w.label){case 0:return this.Logger.log("onImageDrop",{dataUrl:k}),[4,this.downscaleImageFromUrl(k)];case 1:return O=w.sent(),this.insertToEditor(O,m.b64toBlob(O)),[2]}})})},this.Logger),this.Logger.log("fileChanged",{options:x,quill:f,debug:_});var S=this.quill.getModule("toolbar");S?S.addHandler("image",function(){return y.selectLocalImage()}):this.Logger.error("Quill toolbar module not found! need { toolbar: // options } in Quill.modules for image icon to sit in")}return m.b64toBlob=function(f){for(var x=atob(f.split(",")[1]),y=f.slice(5).split(";")[0],_=new ArrayBuffer(x.length),C=new Uint8Array(_),S=0;S<x.length;S++)C[S]=x.charCodeAt(S);return new Blob([_],{type:y})},m.prototype.selectLocalImage=function(f){var x=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=function(){return x.fileChanged().then(function(){return f&&f()})},document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){x.fileHolder&&document.body.removeChild(x.fileHolder)})},m.prototype.fileChanged=function(f){var x;return s(this,void 0,void 0,function(){var y,_,C,S;return i(this,function(k){switch(k.label){case 0:return(y=f||(null===(x=this.fileHolder)||void 0===x?void 0:x.files))&&y.length?(this.Logger.log("fileChanged",{file:_=y[0]}),_?[4,(0,e.file2b64)(_)]:[2]):[2];case 1:return C=k.sent(),[4,this.downscaleImageFromUrl(C)];case 2:return S=k.sent(),this.insertToEditor(S,m.b64toBlob(S)),[2]}})})},m.prototype.downscaleImageFromUrl=function(f){return s(this,void 0,void 0,function(){var x;return i(this,function(y){switch(y.label){case 0:return[4,(0,o.downscaleImage)(this.Logger,f,this.options.maxWidth,this.options.maxHeight,this.options.imageType,this.options.keepImageTypes,this.options.ignoreImageTypes,this.options.quality)];case 1:return x=y.sent(),this.Logger.log("downscaleImageFromUrl",{dataUrl:f,dataUrlCompressed:x}),[2,x]}})})},m.prototype.insertToEditor=function(f,x){if(this.options.insertIntoEditor)this.options.insertIntoEditor(f,x);else{this.Logger.log("insertToEditor",{url:f}),this.range=this.quill.getSelection();var y=this.range;if(!y)return;this.logFileSize(f),this.quill.insertEmbed(y.index,"image","".concat(f),"user"),y.index++,this.quill.setSelection(y,"api")}},m.prototype.logFileSize=function(f){var x=(Math.round(3*(f.length-22)/4)/1024).toFixed(0);this.Logger.log("estimated img size: "+x+" kb")},m}();n.imageCompressor=T,window.imageCompressor=T,n.default=T},function(v,n,d){"use strict";var s=this&&this.__awaiter||function(T,m,f,x){return new(f||(f=Promise))(function(y,_){function C(O){try{k(x.next(O))}catch(w){_(w)}}function S(O){try{k(x.throw(O))}catch(w){_(w)}}function k(O){var w;O.done?y(O.value):(w=O.value,w instanceof f?w:new f(function(M){M(w)})).then(C,S)}k((x=x.apply(T,m||[])).next())})},i=this&&this.__generator||function(T,m){var f,x,y,_,C={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return _={next:S(0),throw:S(1),return:S(2)},"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_;function S(k){return function(O){return function(w){if(f)throw new TypeError("Generator is already executing.");for(;_&&(_=0,w[0]&&(C=0)),C;)try{if(f=1,x&&(y=2&w[0]?x.return:w[0]?x.throw||((y=x.return)&&y.call(x),0):x.next)&&!(y=y.call(x,w[1])).done)return y;switch(x=0,y&&(w=[2&w[0],y.value]),w[0]){case 0:case 1:y=w;break;case 4:return C.label++,{value:w[1],done:!1};case 5:C.label++,x=w[1],w=[0];continue;case 7:w=C.ops.pop(),C.trys.pop();continue;default:if(!((y=(y=C.trys).length>0&&y[y.length-1])||6!==w[0]&&2!==w[0])){C=0;continue}if(3===w[0]&&(!y||w[1]>y[0]&&w[1]<y[3])){C.label=w[1];break}if(6===w[0]&&C.label<y[1]){C.label=y[1],y=w;break}if(y&&C.label<y[2]){C.label=y[2],C.ops.push(w);break}y[2]&&C.ops.pop(),C.trys.pop();continue}w=m.call(T,C)}catch(M){w=[6,M],x=0}finally{f=y=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([k,O])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ImageDrop=void 0;var u=d(0),g=function(){function T(m,f,x){var y=this;this.quill=m,this.onNewDataUrl=f,this.logger=x,this.quill.root.addEventListener("drop",function(_){return y.handleDrop(_)},!1),this.quill.root.addEventListener("paste",function(_){return y.handlePaste(_)},!1)}return T.prototype.handleDrop=function(m){return s(this,void 0,void 0,function(){var f,x,y,_,C,S,k;return i(this,function(O){switch(O.label){case 0:return m.preventDefault(),document.caretRangeFromPoint&&(f=document.getSelection(),x=document.caretRangeFromPoint(m.clientX,m.clientY),f&&x&&f.setBaseAndExtent(x.startContainer,x.startOffset,x.startContainer,x.startOffset)),[4,o(m)];case 1:return y=O.sent(),_=Array.from(y||[]).filter(function(w){return c(w.type)}),(C=_?.[0])?[4,(0,u.file2b64)(C)]:[3,3];case 2:return k=O.sent(),this.logger.log("handleNewImageFiles",{evt:m,files:y,filesFiltered:_,firstImage:C,base64ImageSrc:k}),this.onNewDataUrl(k),[2];case 3:return[4,e(m)];case 4:return(S=O.sent())?[4,(0,u.file2b64)(S)]:[3,6];case 5:return k=O.sent(),this.logger.log("handleNewImageFiles",{evt:m,blob:S,base64ImageSrc:k}),this.onNewDataUrl(k),[2];case 6:return[2]}})})},T.prototype.handlePaste=function(m){var f,x;return s(this,void 0,void 0,function(){var y,_,C,S;return i(this,function(k){switch(k.label){case 0:return y=Array.from((null===(f=m?.clipboardData)||void 0===f?void 0:f.items)||[]),this.logger.log("handlePaste",{files:y,evt:m}),_=y.filter(function(O){return c(O.type)}),this.logger.log("handlePaste",{images:_,evt:m}),_.length?_.filter(function(O){return"text/html"!==O.type}).length?(m.preventDefault(),(C=null===(x=_.pop())||void 0===x?void 0:x.getAsFile())?[4,(0,u.file2b64)(C)]:[2]):(this.logger.log("handlePaste also detected html"),[2]):[2];case 1:return S=k.sent(),this.logger.log("handleNewImageFiles",{base64ImageSrc:S}),this.onNewDataUrl(S),[2]}})})},T}();function e(T){var m;return s(this,void 0,void 0,function(){var f;return i(this,function(x){switch(x.label){case 0:return(f=null===(m=T.dataTransfer)||void 0===m?void 0:m.getData("URL"))?[4,fetch(f)]:[3,3];case 1:return[4,x.sent().blob()];case 2:return[2,x.sent()];case 3:return[2]}})})}function o(T){var m;return s(this,void 0,void 0,function(){return i(this,function(f){return[2,null===(m=T?.dataTransfer)||void 0===m?void 0:m.files]})})}function c(T){return!!T.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)/i)}n.ImageDrop=g},function(v,n,d){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.warnAboutOptions=void 0,n.warnAboutOptions=function(s,i){s.maxWidth=s.maxWidth||1e3,s.maxHeight=s.maxHeight||1e3,s.maxWidth&&"number"!=typeof s.maxWidth&&(i.warn("[config error] 'maxWidth' is required to be a \"number\" (in pixels), \nreceived: ".concat(s.maxWidth,"\n-> using default 1000")),s.maxWidth=1e3),s.maxHeight&&"number"!=typeof s.maxHeight&&(i.warn("[config error] 'maxHeight' is required to be a \"number\" (in pixels), \nreceived: ".concat(s.maxHeight,"\n-> using default 1000")),s.maxHeight=1e3),s.quality&&"number"!=typeof s.quality&&(i.warn("quill.imageCompressor: [config error] 'quality' is required to be a \"number\", \nreceived: ".concat(s.quality,"\n-> using default 0.7")),s.quality=.7),!s.imageType||"string"==typeof s.imageType&&s.imageType.startsWith("image/")||(i.warn('quill.imageCompressor: [config error] \'imageType\' is required be in the form of "image/png" or "image/jpeg" etc ..., \nreceived: '.concat(s.imageType,"\n-> using default image/jpeg")),s.imageType="image/jpeg"),s.keepImageTypes||(s.keepImageTypes=[]),s.keepImageTypes&&!Array.isArray(s.keepImageTypes)&&(i.warn("quill.imageCompressor: [config error] 'keepImageTypes' is required to be a \"array\", received: ".concat(s.keepImageTypes," -> using default []")),s.keepImageTypes=[]),s.ignoreImageTypes||(s.ignoreImageTypes=[]),s.ignoreImageTypes&&!Array.isArray(s.ignoreImageTypes)&&(i.warn("quill.imageCompressor: [config error] 'ignoreImageTypes' is required to be a \"array\", received: ".concat(s.ignoreImageTypes," -> using default []")),s.ignoreImageTypes=[]),s.insertIntoEditor&&"function"!=typeof s.insertIntoEditor&&(i.warn("quill.imageCompressor: [config error] 'insertIntoEditor' is required to be a \"function\", received: ".concat(s.insertIntoEditor," -> using default undefined")),s.insertIntoEditor=void 0)}},function(v,n,d){"use strict";var s=this&&this.__awaiter||function(u,g,e,o){return new(e||(e=Promise))(function(c,T){function m(y){try{x(o.next(y))}catch(_){T(_)}}function f(y){try{x(o.throw(y))}catch(_){T(_)}}function x(y){var _;y.done?c(y.value):(_=y.value,_ instanceof e?_:new e(function(C){C(_)})).then(m,f)}x((o=o.apply(u,g||[])).next())})},i=this&&this.__generator||function(u,g){var e,o,c,T,m={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return T={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function f(x){return function(y){return function(_){if(e)throw new TypeError("Generator is already executing.");for(;T&&(T=0,_[0]&&(m=0)),m;)try{if(e=1,o&&(c=2&_[0]?o.return:_[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,_[1])).done)return c;switch(o=0,c&&(_=[2&_[0],c.value]),_[0]){case 0:case 1:c=_;break;case 4:return m.label++,{value:_[1],done:!1};case 5:m.label++,o=_[1],_=[0];continue;case 7:_=m.ops.pop(),m.trys.pop();continue;default:if(!((c=(c=m.trys).length>0&&c[c.length-1])||6!==_[0]&&2!==_[0])){m=0;continue}if(3===_[0]&&(!c||_[1]>c[0]&&_[1]<c[3])){m.label=_[1];break}if(6===_[0]&&m.label<c[1]){m.label=c[1],c=_;break}if(c&&m.label<c[2]){m.label=c[2],m.ops.push(_);break}c[2]&&m.ops.pop(),m.trys.pop();continue}_=g.call(u,m)}catch(C){_=[6,C],o=0}finally{e=c=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([x,y])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.downscaleImage=void 0,n.downscaleImage=function(u,g,e,o,c,T,m,f){return s(this,void 0,void 0,function(){var x,y,_,C,S,k,O,w;return i(this,function(M){switch(M.label){case 0:return x=g.split(";")[0].split(":")[1],c=c||"image/jpeg",f=f||.7,(y=new Image).src=g,[4,new Promise(function(F){y.onload=function(){F()}})];case 1:return M.sent(),_=function(F,j,D,U){if(D&&U&&F<=D&&j<=U)return[F,j];if(D&&F>D){var B=D,R=Math.floor(j/F*B);if(U&&R>U){var X=U;return[Math.floor(F/j*X),X]}return[B,R]}return U&&j>U?(R=U,[B=Math.floor(F/j*R),R]):[j,F]}(y.width,y.height,e,o),C=_[0],S=_[1],(k=document.createElement("canvas")).width=C,k.height=S,O=k.getContext("2d"),"image/jpeg"===c&&(O.fillStyle="#FFFFFF",O.fillRect(0,0,y.width,y.height)),m?.includes(x)?[2,g]:(T?.includes(x)&&(c=x),O.drawImage(y,0,0,C,S),w=k.toDataURL(c,f),u.log("downscaling image...",{args:{dataUrl:g,maxWidth:e,maxHeight:o,imageType:c,ignoreImageTypes:m,keepImageTypes:T,imageQuality:f},newHeight:S,newWidth:C}),[2,w])}})})}},function(v,n,d){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ConsoleLogger=void 0;var s=function(){function i(u,g){this.debug=u,this.suppressErrorLogging=g}return i.prototype.prefixString=function(){return"</> quill-image-compress: "},Object.defineProperty(i.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"error",{get:function(){return this.suppressErrorLogging?function(){}:console.error.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"warn",{get:function(){return this.suppressErrorLogging?function(){}:console.warn.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),i}();n.ConsoleLogger=s}])}}]);
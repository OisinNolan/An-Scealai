(self.webpackChunkan_scealai=self.webpackChunkan_scealai||[]).push([[831],{4831:(ze,J,S)=>{"use strict";S.r(J),S.d(J,{StudentModule:()=>Fi});var R=S(6895),l=S(1390),b=S(970),k=S(4633),F=S(8977),t=S(4650),p=S(5412);let g=(()=>{class a{canDeactivate(r,o,c){return!!r.storySaved||(r.showModal(),r.modalChoice)}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Z=(()=>{class a{constructor(r,o){this.dialog=r,this.ts=o}canDeactivate(r){if(r.recordingSaved)return!0;let o;return o=this.dialog.open(k.p,{data:{title:this.ts.l.save_changes_made_to_this_recording,type:"",confirmText:this.ts.l.save,cancelText:this.ts.l.cancel},width:"30vh"}),o.afterClosed().subscribe(c=>{if(o=void 0,c)return r.saveRecordings(),!0}),!1}}return a.\u0275fac=function(r){return new(r||a)(t.LFG(p.uw),t.LFG(F.D))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),T=(()=>{class a{canDeactivate(r,o,c){if(r.chosenSections)for(const _ of r.chosenSections)_.stop();return!0}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var y=S(5861),A=S(4412);class M extends A.i{constructor(){super(...arguments),this.createdWithPrompts=!1}}var w=S(1765),L=S(1745),N=S(1512),Q=S(6469),te=S(4687),q=S(1245),W=S(25),fe=S(5042),Ie=S(530),Pe=S(8443);let _e=(()=>{class a{transform(r,o){return r?o?(o=o.toLocaleLowerCase(),r.filter(c=>c instanceof Pe.n?c.username.toLocaleLowerCase().includes(o):c instanceof M?c.title.toLocaleLowerCase().includes(o)||c.text.toLocaleLowerCase().includes(o):void 0)):r:[]}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275pipe=t.Yjl({name:"appFilter",type:a,pure:!0}),a})();var me=S(3905),Te=S(4006),Yt=S(9121);function co(a,h){1&a&&(t.TgZ(0,"div",17),t._UZ(1,"grid-spinner"),t.qZA())}function uo(a,h){if(1&a&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&a){const r=t.oxw();t.xp6(1),t.hij(" ",r.ts.l.click_new_story," ")}}function Xr(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"input",23),t.NdJ("click",function(){t.CHM(r);const c=t.oxw().$implicit,_=t.oxw();return t.KtG(_.toggleDelete(c._id))}),t.qZA()}}function lo(a,h){if(1&a&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&a){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,r.lastUpdated,"M/d/yy, h:mm a"))}}function fo(a,h){if(1&a&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&a){const r=t.oxw().$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,r.lastUpdated,"d/M/yy, h:mm a"))}}const It=function(a){return["../dashboard",a]};function yt(a,h){if(1&a&&(t.TgZ(0,"div")(1,"div",18)(2,"div",19),t.YNc(3,Xr,1,0,"input",20),t.TgZ(4,"div",21),t._uU(5),t.qZA()(),t.YNc(6,lo,3,4,"div",22),t.YNc(7,fo,3,4,"div",22),t.qZA(),t._UZ(8,"hr"),t.qZA()),2&a){const r=h.$implicit,o=t.oxw();t.xp6(3),t.Q6J("ngIf",o.deleteMode),t.xp6(1),t.Q6J("searchedWord",o.searchText)("content",r.title)("classToApply","font-weight-bold")("setTitle","true")("routerLink",t.VKq(9,It,r._id)),t.xp6(1),t.hij(" ",r.title," "),t.xp6(1),t.Q6J("ngIf",o.isFromAmerica),t.xp6(1),t.Q6J("ngIf",!o.isFromAmerica)}}function ho(a,h){if(1&a&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.unreadMessages," ")}}function Tn(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(r);const c=t.oxw();return t.KtG(c.goToMessages())}),t._uU(1),t.YNc(2,ho,2,1,"span",26),t.qZA()}if(2&a){const r=t.oxw();t.xp6(1),t.hij(" ",r.ts.l.messages," "),t.xp6(1),t.Q6J("ngIf",r.unreadMessages>0)}}function lt(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(r);const c=t.oxw();return t.KtG(c.goToStats())}),t._uU(1),t.qZA()}if(2&a){const r=t.oxw();t.xp6(1),t.hij(" ",r.ts.l.stats," ")}}let po=(()=>{class a{constructor(r,o,c,_,D,G,X,se,z,le,we){this.storyService=r,this.auth=o,this.engagement=c,this.ts=_,this.router=D,this.messageService=G,this.profileService=X,this.classroomService=se,this.notificationService=z,this.recordingService=le,this.dialog=we,this.stories=[],this.toBeDeleted=[],this.userId="",this.messagesForNotifications=[],this.unreadMessages=0,this.isFromAmerica=!1,this.isEnrolled=!1,this.searchText="",this.storiesLoaded=!1}ngOnInit(){var r=this;return(0,y.Z)(function*(){const o=r.auth.getUserDetails();o?(r.stories=(yield(0,me.z)(r.storyService.getStoriesForLoggedInUser())).map(c=>(new M).fromJSON(c)),r.stories.sort((c,_)=>c.date>_.date?-1:1),r.storiesLoaded=!0,r.userId=o._id,r.deleteMode=!1,r.toBeDeleted=[],r.notificationService.getStudentNotifications(),r.classroomService.getClassroomOfStudent(r.userId).subscribe(c=>{r.isEnrolled=null!=c}),r.messageService.getMessagesForLoggedInUser().subscribe(c=>{r.messagesForNotifications=c,r.unreadMessages=r.messageService.getNumberOfUnreadMessages(r.messagesForNotifications)}),r.profileService.getForUser(r.userId).subscribe(c=>{let D=c.profile.country;r.isFromAmerica="United States of America"==D||"America"==D||"USA"==D||"United States"==D},c=>{r.router.navigateByUrl("/register-profile")})):r.auth.logout()})()}toggleDeleteMode(){if(this.deleteMode&&this.toBeDeleted.length>0)for(let r of this.toBeDeleted)this.engagement.addEventForLoggedInUser(N.tw["DELETE-STORY"],{_id:r}),this.recordingService.deleteStoryRecordingAudio(r).subscribe(o=>{}),this.recordingService.deleteStoryRecording(r).subscribe(o=>{}),this.storyService.deleteStory(r).subscribe(o=>{this.ngOnInit()});else this.deleteMode=!this.deleteMode||0!==this.toBeDeleted.length}toggleEditMode(){this.editMode=!this.editMode}toggleDelete(r){if(this.toBeDeleted.includes(r)){var o=this.toBeDeleted.indexOf(r);this.toBeDeleted.splice(o,1)}else this.toBeDeleted.push(r)}goToMessages(){this.router.navigateByUrl("/messages/"+this.userId)}goToStats(){this.router.navigateByUrl("/stats-dashboard/"+this.userId)}createNewStory(){var r=this;this.dialogRef=this.dialog.open(k.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var o=(0,y.Z)(function*(c){if(r.dialogRef=void 0,c)if(c[0]){let _="connemara";c[1]==r.ts.l.munster&&(_="kerry"),c[1]==r.ts.l.ulster&&(_="donegal"),r.storyService.saveStory(r.auth.getUserDetails()._id,c[0],new Date,_,"",r.auth.getUserDetails().username,!1)}else alert(r.ts.l.title_required)});return function(c){return o.apply(this,arguments)}}())}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(w.N),t.Y36(L.$),t.Y36(Q.M),t.Y36(F.D),t.Y36(l.F0),t.Y36(q.e),t.Y36(te.H),t.Y36(W.u),t.Y36(fe.g),t.Y36(Ie.s),t.Y36(p.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-book-contents"]],features:[t._Bn([_e])],decls:27,vars:17,consts:[[1,"bookContainer"],[1,"contentsContainer"],[1,"bookContentsTitle"],[1,"contentsTitleContainer"],[1,"contentsLinkTitle"],[1,"contentsDateTitle"],["role","main"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"contentsLinkContainer"],["class","newStoryMessage",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"contentsBtnsContainer"],[1,"btn","deleteBtn",3,"click"],["src","assets/img/trash.ico",1,"trashImg"],["class","btn messagesBtn",3,"click",4,"ngIf"],["data-cy","create-story",1,"btn","newStoryBtn",3,"click"],[1,"newStoryMessage"],[1,"contentSection"],[1,"contentsLink"],["type","checkbox","class","deleteCheckbox",3,"click",4,"ngIf"],["appHighlight","",3,"searchedWord","content","classToApply","setTitle","routerLink"],["class","contentsDate",4,"ngIf"],["type","checkbox",1,"deleteCheckbox",3,"click"],[1,"contentsDate"],[1,"btn","messagesBtn",3,"click"],["class","notificationBtn",4,"ngIf"],[1,"notificationBtn"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3)(5,"div",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",6)(10,"div")(11,"div",7)(12,"input",8),t.NdJ("ngModelChange",function(_){return o.searchText=_}),t.qZA()()()(),t.TgZ(13,"div",9)(14,"div"),t._uU(15),t.qZA(),t.YNc(16,co,2,0,"div",10),t.YNc(17,uo,2,1,"div",10),t.YNc(18,yt,9,11,"div",11),t.ALo(19,"appFilter"),t.qZA(),t.TgZ(20,"div",12)(21,"button",13),t.NdJ("click",function(){return o.toggleDeleteMode()}),t._UZ(22,"img",14),t.qZA(),t.YNc(23,Tn,3,2,"button",15),t.YNc(24,lt,2,1,"button",15),t.TgZ(25,"button",16),t.NdJ("click",function(){return o.createNewStory()}),t._uU(26),t.qZA()()()()),2&r&&(t.xp6(3),t.Oqu(o.ts.l.my_stories),t.xp6(3),t.Oqu(o.ts.l.title),t.xp6(2),t.Oqu(o.ts.l.last_updated),t.xp6(4),t.s9C("placeholder",o.ts.l.search_story_title_or_content),t.Q6J("ngModel",o.searchText),t.xp6(3),t.hij(" ",o.ts.l.loading," "),t.xp6(1),t.Q6J("ngIf",!o.storiesLoaded),t.xp6(1),t.Q6J("ngIf",0===o.stories.length&&o.storiesLoaded),t.xp6(1),t.Q6J("ngForOf",t.xi3(19,14,o.stories,o.searchText)),t.xp6(3),t.ekj("deleteModeBtn",o.deleteMode),t.xp6(2),t.Q6J("ngIf",o.isEnrolled),t.xp6(1),t.Q6J("ngIf",o.stories.length>0),t.xp6(2),t.hij("",o.ts.l.new_story," "))},dependencies:[R.sg,R.O5,l.rH,Te.Fj,Te.JJ,Te.On,Yt.P,R.uU,_e],styles:[".bookContainer[_ngcontent-%COMP%]{height:auto;width:80%;background:url(https://www.abair.ie/scealai/assets/img/paperBg.jpg) no-repeat center fixed;margin-left:10%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.contentsContainer[_ngcontent-%COMP%]{padding:20px}.bookContentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);padding-left:5%;padding-right:5%;display:inline-block;font-size:18pt}.contentsLinkContainer[_ngcontent-%COMP%]{height:500px;overflow:auto;padding:10px;background-color:#f7f2e7;box-shadow:inset 0 0 12px #00000080;border-radius:5px}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.contentsDate[_ngcontent-%COMP%]{color:var(--dark-text)}.contentsBtnsContainer[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:space-between;flex-wrap:wrap;gap:1rem}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;padding:2px 7px 7px;height:38px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:24px}.messagesBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;border-radius:5px;display:flex}.messagesBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.newStoryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.newStoryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}@media only screen and (max-width: 700px){.contentsContainer[_ngcontent-%COMP%]{width:90%;margin-left:5%}.contentsLinkContainer[_ngcontent-%COMP%]{height:270px;padding-top:10px}.contentsLinkTitle[_ngcontent-%COMP%], .contentsDateTitle[_ngcontent-%COMP%]{font-size:12pt}.optionsPopupBtn[_ngcontent-%COMP%]{padding:2px 5px 5px;margin:0 4px 0 0;height:30px;font-size:12pt}.deleteBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;margin:0 4px 0 0;float:left;padding:0 3px 3px;height:30px;border-radius:5px}.deleteBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover)}.deleteModeBtn[_ngcontent-%COMP%]{background-color:var(--delete-red)}.deleteModeBtn[_ngcontent-%COMP%]:hover{background-color:var(--delete-red-hover)}.trashImg[_ngcontent-%COMP%]{width:20px}}.newStoryMessage[_ngcontent-%COMP%]{color:#a79d88;width:80%;margin-left:10%;margin-top:30px}@media only screen and (min-width: 700px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}@media only screen and (min-width: 1400px) and (min-height: 800px){.optionsPopup[_ngcontent-%COMP%]{margin-left:55px}}"]}),a})();var Qe=S(7579),$r=S(1884),Wt=S(9971),Pt=S.n(Wt),go=S(5439),an=S.n(go),cn=S(7489),Jt=S(4186),An=S(5592),qe=S(9742),ei=S(6618);let nt=(()=>{class a{constructor(){}convertHtmlTextToArrayOfSentences(r){return this.sentences(this.convertHtmlToPlainText(r))}sentences(r){return this.naiveSentences(r)}splitWithReplacement(r,o){const c=r.split(o);return c.slice(0,-1).filter(Boolean).map(_=>_+o).concat(c.slice(-1).filter(Boolean))}extraShortening(r){return r.flatMap(o=>" "==o?[]:o.charAt(100)?this.splitWithReplacement(o,","):[o])}naiveSentences(r){let o=r.split("\n").filter(Boolean);for(const c of[".","!","?"])o=o.flatMap(_=>this.splitWithReplacement(_,c));return this.extraShortening(o)}convertHtmlToPlainText(r){const o=document.createElement("div");return o.innerHTML=r,o.textContent||o.innerText||""}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var zt=S(9549),ti=S(4385),De=S(3238);function ni(a,h){if(1&a&&(t.TgZ(0,"mat-option",3),t._uU(1),t.qZA()),2&a){const r=h.$implicit,o=t.oxw();t.s9C("gender",r.gender),t.Q6J("value",r),t.xp6(1),t.hij(" ",r.note+r.name+" ("+o.ts.message(r.dialect)+") "," ")}}let _o=(()=>{class a{constructor(r){this.ts=r,this.voices=qe.be,this.selected=this.voices[0],this.selectVoice=new t.vpe}ngOnInit(){this.selectVoice.emit(this.selected)}color(r){return r.startsWith("f")?"rgba(255, 191, 194)":"rgba(194, 218, 255)"}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(F.D))},a.\u0275cmp=t.Xpm({type:a,selectors:[["synth-voice-select"]],outputs:{selectVoice:"selectVoice"},decls:5,vars:3,consts:[["appearance","fill"],[3,"value","valueChange","selectionChange"],["matNativeControl","","required","",3,"gender","value",4,"ngFor","ngForOf"],["matNativeControl","","required","",3,"gender","value"]],template:function(r,o){1&r&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",1),t.NdJ("valueChange",function(_){return o.selected=_})("selectionChange",function(_){return o.selectVoice.emit(_.value)}),t.YNc(4,ni,2,3,"mat-option",2),t.qZA()()),2&r&&(t.xp6(2),t.Oqu(o.ts.message("voice")),t.xp6(1),t.Q6J("value",o.selected),t.xp6(1),t.Q6J("ngForOf",o.voices))},dependencies:[R.sg,zt.KE,zt.hX,ti.gD,De.ey],encapsulation:2}),a})();const un=["voiceSelect"];function rt(a,h){1&a&&t._UZ(0,"div",11)}function ln(a,h){1&a&&t._UZ(0,"div",11)}function kn(a,h){if(1&a&&t._UZ(0,"app-synth-item",12),2&a){const r=h.$implicit,o=h.index,c=t.oxw();t.Q6J("synthItem",r)("i",o)("storyId",c.storyId)}}let mo=(()=>{class a{constructor(r,o,c,_,D){this.router=r,this.textProcessor=o,this.cdref=c,this.synth=_,this.ts=D,this.hideEntireSynthesisPlayer=!0,this.synthItems=[],this.allAudioSources=[]}ngOnInit(){this.refresh()}refresh(r){r&&(this.selected=r),this.synthItems.map(o=>{o.audioUrl=void 0,o.dispose()}),this.text&&setTimeout(()=>{this.synthItems=this.textProcessor.sentences(this.text).map(o=>this.getSynthItem(o)),this.cdref.detectChanges(),this.audio=null},50)}getSynthItem(r){return new ei.e(r,this.selected,this.synth)}audioLoaded(){return this.synthItems.every(r=>null!=r.audioUrl||r.exceptions.length>0)}combineAndPlayAudio(){var r=this;return(0,y.Z)(function*(){r.audio||(yield r.combineAudioSources()),r.playAllAudio()})()}combineAudioSources(){var r=this;return(0,y.Z)(function*(){r.allAudioSources=r.synthItems.map(c=>c.audioUrl);let o=r.allAudioSources.map(c=>fetch(c).then(_=>_.blob()));yield Promise.all(o).then(c=>{let _=new Blob(c);r.blobUrl=URL.createObjectURL(_),r.audio=new Audio(r.blobUrl)})})()}playAllAudio(){this.audio.paused?this.audio.play():(this.audio.pause(),this.audio.currentTime=0)}downloadAudio(){var r=this;return(0,y.Z)(function*(){r.audio||(yield r.combineAudioSources());const o=document.createElement("a");o.style.display="none",o.href=r.blobUrl,o.download=r.storyTitle+".mp3",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(r.blobUrl)})()}goToFastSynthesiser(){this.router.navigateByUrl("/student/synthesis/"+this.storyId)}stopSynthesis(){this.synthItems.map(r=>{r.audioUrl=void 0,r.dispose()})}toggleHidden(){this.hideEntireSynthesisPlayer=!this.hideEntireSynthesisPlayer,this.refresh()}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(l.F0),t.Y36(nt),t.Y36(t.sBO),t.Y36(qe.cf),t.Y36(F.D))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-synthesis-player"]],viewQuery:function(r,o){if(1&r&&t.Gf(un,5),2&r){let c;t.iGM(c=t.CRH())&&(o.voiceSelect=c.first)}},inputs:{storyId:"storyId",text:"text",storyTitle:"storyTitle"},decls:22,vars:11,consts:[[1,"synth",3,"hidden"],[1,"synthHeader"],[1,"reload",3,"click"],[3,"selectVoice"],[1,"fast-synth",3,"click"],[1,"btnContainer",2,"justify-content","space-between"],[1,"playAllButton",2,"text-align","center","width","100px",3,"disabled","click"],["class","spinner-grow","style","width: 1rem; height: 1rem;",4,"ngIf"],[1,"playAllButton",2,"text-align","center","width","150px",3,"disabled","click"],[1,"items"],[3,"synthItem","i","storyId",4,"ngFor","ngForOf"],[1,"spinner-grow",2,"width","1rem","height","1rem"],[3,"synthItem","i","storyId"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div")(2,"h1"),t._uU(3),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()(),t.TgZ(6,"div",1)(7,"div",2),t.NdJ("click",function(){return o.refresh()}),t._uU(8,"\u21bb"),t.qZA(),t.TgZ(9,"synth-voice-select",3),t.NdJ("selectVoice",function(_){return o.refresh(_)}),t.qZA(),t.TgZ(10,"div",4),t.NdJ("click",function(){return o.goToFastSynthesiser()}),t._uU(11),t.qZA()(),t.TgZ(12,"div",5)(13,"button",6),t.NdJ("click",function(){return o.combineAndPlayAudio()}),t.YNc(14,rt,1,0,"div",7),t._uU(15),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){return o.downloadAudio()}),t.YNc(17,ln,1,0,"div",7),t._uU(18),t.qZA()(),t._UZ(19,"hr"),t.TgZ(20,"div",9),t.YNc(21,kn,1,3,"app-synth-item",10),t.qZA()()),2&r&&(t.Q6J("hidden",o.hideEntireSynthesisPlayer),t.xp6(3),t.Oqu(o.ts.l.listen_back_to_your_story?o.ts.l.listen_back_to_your_story:"listen_back_to_your_story"),t.xp6(2),t.hij("(",o.ts.l.dnn_synthesiser?o.ts.l.dnn_synthesiser:"dnn_synthesiser",")"),t.xp6(6),t.hij(" ",o.ts.l.go_to_fast_synthesiser?o.ts.l.go_to_fast_synthesiser:"go_to_fast_synthesiser"," "),t.xp6(2),t.Q6J("disabled",!o.audioLoaded()),t.xp6(1),t.Q6J("ngIf",!o.audioLoaded()),t.xp6(1),t.hij(" ",o.ts.l.play," "),t.xp6(1),t.Q6J("disabled",!o.audioLoaded()),t.xp6(1),t.Q6J("ngIf",!o.audioLoaded()),t.xp6(1),t.hij(" ",o.ts.l.download," "),t.xp6(3),t.Q6J("ngForOf",o.synthItems))},dependencies:[R.sg,R.O5,_o],styles:[".synth[_ngcontent-%COMP%]{display:grid;padding:20px;border-radius:15px;margin:30px;background-color:#ffffff80;border:2px}.synthHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]{font-family:Lucida Sans Unicode;font-size:20px;width:2rem;height:2rem;border-radius:.5em;padding:0;margin:0;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]:hover{color:#000;font-weight:700}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]{padding:3px;color:gray;cursor:pointer}.synth[_ngcontent-%COMP%]   .fast-synth[_ngcontent-%COMP%]:hover{color:#000;border-radius:2px;font-weight:700}.items[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:3px;padding-left:1rem;padding-top:1rem;border-radius:3px;text-align:left;flex-wrap:wrap;justify-content:left}.playAllButton[_ngcontent-%COMP%]{padding:5px;border-radius:5px;border:none;width:100px;text-align:center;background-color:#95cdcd}.playAllButton[_ngcontent-%COMP%]:hover:enabled{color:#fff}"]}),a})();const vo=function dn(){const h=Object.values({"no break whitespace":"\xa0","ogham space mark":"\u1680","zero width no-break space":"\ufeff","ideographic space":"\u3000","narrow no-break space":"\u202f","EN QUAD":"\u2000","EM QUAD":"\u2001","EN SPACE (nut)":"\u2002","EM SPACE (mutton)":"\u2003","THREE-PER-EM SPACE":"\u2004","FOUR-PER-EM SPACE (mid space)":"\u2005","SIX-PER-EM SPACE":"\u2006","FIGURE SPACE":"\u2007","PUNCTUATION SPACE":"\u2008","THIN SPACE":"\u2009","HAIR SPACE":"\u200a"}).join("");return new RegExp("["+h+"]","g")}();function On(a){return Object.assign({},a)}class cr{constructor(h,r,o){this.errorsWithSentences=[],this.http=r,this.auth=o,this.grammarCheckers=h,this.cacheMap=new Map;for(const c of h)this.cacheMap.set(c.name,{})}check$(h){const r=new Qe.x;return this.check(function fn(a){return a.replace(vo," ")}(h),r),r}check(h,r){var o=this;return(0,y.Z)(function*(){const _=function ar(a,h){const r=[];let o=0;for(let c of a)if(c){const D=o+h.slice(o).indexOf(c);r.push({sentence:c,offset:D}),o=D+c.length}return r}(yield(0,me.z)(o.http.post(Jt.Z.baseurl+"nlp/sentenceTokenize",{text:h})),h);o.errorsWithSentences=[];const D=(yield Promise.all(o.grammarCheckers.map(function(){var G=(0,y.Z)(function*(X){return yield Promise.all(_.map(function(){var se=(0,y.Z)(function*(z,le){const we=z.sentence,Re=z.offset;function Tt(xe){return xe.fromX+=Re,xe.toX+=Re,r.next(xe),xe}if(we in o.cacheMap.get(X.name)){let xe=o.cacheMap.get(X.name)[we].map(On).map(Tt);return o.errorsWithSentences[le]=o.errorsWithSentences[le]?[o.errorsWithSentences[le][0].concat(xe),we,le]:[xe,we,le],xe}const At=yield X.check(we,o.auth.getToken());o.cacheMap.get(X.name)[we]=At;const ke=At.map(On).map(Tt);return o.errorsWithSentences[le]=o.errorsWithSentences[le]?[o.errorsWithSentences[le][0].concat(At),we,le]:[At,we,le],ke});return function(z,le){return se.apply(this,arguments)}}()))});return function(X){return G.apply(this,arguments)}}()))).flat().filter(G=>G.length);return r.complete(),o.countNewErrors(D.flat()),D})()}countNewErrors(h){var r=this;return(0,y.Z)(function*(){r.previousErrorTags=h,r.countNewErrors=r._countNewErrorsAfterFirstTime})()}_countNewErrorsAfterFirstTime(h){return(0,y.Z)(function*(){const o=function Qt(a,h){return function D(G,X){return X.filter(se=>!G.includes(se)||(G[G.indexOf(se)]=null,!1)).map(se=>JSON.parse(se)[1])}(_(a),_(h));function _(G){return G.map(X=>JSON.stringify([X.errorText,X.type]))}}(r.previousErrorTags,h),_={countsByType:(a=o,a.reduce(function r(o,c){return o[c]||(o[c]=0),o[c]+=1,o},{}))};var a;r.http.post(Jt.Z.baseurl+"gramadoir/userGrammarCounts/",_).subscribe(),r.previousErrorTags=h})()}saveErrorsWithSentences(h){var r=this;return(0,y.Z)(function*(){if(!r.errorsWithSentences||!h)return;const o={Authorization:"Bearer "+r.auth.getToken()};r.http.post(Jt.Z.baseurl+"gramadoir/insert/",{storyId:h,sentences:r.errorsWithSentences},{headers:o}).subscribe()})()}}const En=Pt().import("parchment"),ur=Pt().import("ui/tooltip");Pt().register(new En.Attributor.Attribute("highlight-tag","highlight-tag",{scope:En.Scope.INLINE}));class lr{constructor(h,r,o){this.mostRecentHoveredMessage="",this.quillEditor=h,this.ts=r,this.engagement=o}show(h){h&&((h=this.mergeTags(h)).forEach(o=>{this.quillEditor.formatText(o.fromX,o.toX-o.fromX,{"highlight-tag":JSON.stringify(o)},"api")}),document.querySelectorAll("[highlight-tag]").forEach(o=>{const c=o.getAttribute("highlight-tag");if(!c)return;const _=JSON.parse(c),D=new ur(this.quillEditor);D.root.classList.add("custom-tooltip"),o.addEventListener("mouseover",()=>{this.mouseOverTagElem(_,o,D)}),o.addEventListener("mouseout",()=>{o.removeAttribute("data-selected"),D.hide()})}))}hide(h){h.forEach(r=>{this.quillEditor.formatText(r.fromX,r.toX-r.fromX,{"highlight-tag":null,"background-color":"","data-selected":null})}),document.querySelectorAll(".custom-tooltip").forEach(r=>r.remove())}hideAll(){document.querySelectorAll("[data-selected]").forEach(r=>r.removeAttribute("data-selected")),this.quillEditor.formatText(0,this.quillEditor.getLength(),{"highlight-tag":null,"background-color":"","data-selected":null}),document.querySelectorAll(".custom-tooltip").forEach(r=>r.remove())}mouseOverTagElem(h,r,o){r.setAttribute("data-selected","");const c=this.quillEditor.root.scrollTop;this.quillEditor.root.scroll({top:+c+1}),this.quillEditor.root.scroll({top:+c});const _=this.makeTooltipContents(h.data,this.ts.l.iso_code);o.root.innerHTML=_,this.mostRecentHoveredMessage=_,o.show(),o.position(this.quillEditor.getBounds(h.fromX,h.toX-h.fromX));let D=o.root.getAttribute("style")||"";D+="\n          font-size: medium;\n          padding: 20px;\n          -webkit-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          -moz-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.25);\n          border: 2px solid var(--scealai-med-brown);\n          border-radius: 2px;\n        ",o.root.setAttribute("style",D);const G=o.root.offsetLeft+o.root.offsetWidth-this.quillEditor.root.offsetWidth;o.root.style.left=G>0?o.root.offsetLeft-G-5+"px":o.root.style.left,o.root.style.left=o.root.offsetLeft<0?o.root.offsetLeft-o.root.offsetLeft+5+"px":o.root.style.left,this.engagement.mouseOverGrammarSuggestionEvent(h)}getGrammarMessage(h){return h?this.mostRecentHoveredMessage?this.mostRecentHoveredMessage:this.ts.message("hover_over_a_highlighted_word_for_a_grammar_suggestion"):this.ts.message("checking_grammar")}makeTooltipContents(h,r){return h.map(_=>`<div style="white-space: pre-wrap; text-align: left;"><span class="circle" style="background: ${_.color}"></span> ${(_=>"en"==r?_.nameEN:_.nameGA)(_)}: ${(_=>"en"==r?_.messageEN:_.messageGA)(_)}</div>`).join("<hr>")}overlaps(h,r){return h.fromX<=r.toX&&h.toX>=r.fromX}makeMergedTag(h){const r=Math.min(...h.map(_=>_.fromX)),o=Math.max(...h.map(_=>_.toX));return{data:h.reduce((_,D)=>this.arrayToSet(_.concat(D.data)),[]),fromX:r,toX:o}}mergeTags(h,r=0){if(!h.length)return h;const o=h[0],c=h.filter(X=>this.overlaps(o,X)),_=this.makeMergedTag(c),D=h.filter(X=>!c.includes(X)).concat([_]),G=h.length==D.length;return G&&r==h.length-1?h:this.mergeTags(D,G?r+1:r)}arrayToSet(h){return h.filter((r,o,c)=>o===c.findIndex(_=>JSON.stringify(_)===JSON.stringify(r)))}}var Me=S(8043);const dr={name:"Leathan_Caol",check:function ii(a){return fr.apply(this,arguments)}},In=["a","o","u","\xe1","\xf3","\xfa","A","O","U","\xc1","\xd3","\xda"],Pn=["e","i","\xe9","\xed","E","I","\xc9","\xcd"],yo=["b","c","d","f","g","h","l","m","n","p","r","s","t","v","z","B","C","D","F","G","H","L","M","N","P","R","S","T","V","Z"],ri=["aniar","an\xedos","ar\xe9ir","ar\xeds","ar\xedst","anseo","ansin","ansi\xfad","c\xe9n","den","faoina","ina","inar","insa","lena","lenar"];function fr(){return(fr=(0,y.Z)(function*(a){return new Promise((h,r)=>{const o=bo(a);let c=[];for(const _ of o)c.push({errorText:a,messageGA:Me.U["LEATHAN-CAOL"].messageGA,messageEN:Me.U["LEATHAN-CAOL"].messageEN,context:a,nameEN:Me.U["LEATHAN-CAOL"].nameEN,nameGA:Me.U["LEATHAN-CAOL"].nameGA,color:Me.U["LEATHAN-CAOL"].color,fromX:_.first,toX:_.first+1,type:"LEATHAN-CAOL"}),c.push({errorText:a,messageGA:Me.U["LEATHAN-CAOL"].messageGA,messageEN:Me.U["LEATHAN-CAOL"].messageEN,context:a,nameEN:Me.U["LEATHAN-CAOL"].nameEN,nameGA:Me.U["LEATHAN-CAOL"].nameGA,color:Me.U["LEATHAN-CAOL"].color,fromX:_.second,toX:_.second+1,type:"LEATHAN-CAOL"});h(c)})})).apply(this,arguments)}function bo(a){const h=function xo(a){let h=[];for(let r of ri){let c=wo(a.toLowerCase(),r);for(let _ of c)h[_]=r.length}return h}(a),r=[];for(let o=0;o<a.length-1;o++)if(h[o]>0&&(o+=h[o]),si(a[o])&&Rn(a[o+1])){let c=o++;for(;Rn(a[o]);)o++;if(si(a[o])&&!Mo(a[c],a[o])){const _=Co(a[c]);r.push({broadFirst:_,first:c,second:o})}}return r}function wo(a,h){var r=[];let o=new RegExp("[\\s.!?\\-]"+h+"[\\s.!?\\-]","g"),c=o.exec(a);for(;c;){o=new RegExp(h);let _=o.exec(c[0]);r.push(c.index+_.index),a=oi(a,c.index,"#".repeat(5)),o=new RegExp("[\\s.!?\\-]"+h+"[\\s.!?\\-]","g"),c=o.exec(a)}return r}function oi(a,h,r){return a.substr(0,h)+r+a.substr(h+r.length)}function si(a){return In.includes(a)||Pn.includes(a)}function Co(a){return In.includes(a)}function Rn(a){return yo.includes(a)}function Mo(a,h){return In.includes(a)&&In.includes(h)||Pn.includes(a)&&Pn.includes(h)}const hr={name:"AnGramadoir",check:function So(a,h){return pr.apply(this,arguments)}};function pr(){return pr=(0,y.Z)(function*(a,h){return new Promise(function(){var r=(0,y.Z)(function*(o,c){let _=[];try{_=yield ai(`${Jt.Z.baseurl}gramadoir/callAnGramadoir/${encodeURIComponent(a)}`,h)}catch{try{_=yield ai(`https://cadhan.com/api/gramadoir/1.0/en/${a}`)}catch{c()}}o(_.map(G=>{const X=To(G.ruleId),se=Me.U[X];return{errorText:G.errortext,messageGA:se.messageGA.replace("#",G.errortext),messageEN:se.messageEN.replace("#",G.errortext),context:G.context,nameEN:se.nameEN,nameGA:se.nameGA,color:se.color,fromX:+G.fromx,toX:+G.tox+1,type:X}}))});return function(o,c){return r.apply(this,arguments)}}())}),pr.apply(this,arguments)}function ai(a,h){return gr.apply(this,arguments)}function gr(){return(gr=(0,y.Z)(function*(a,h){let r={};h&&(r={Authorization:"Bearer "+h});const o=yield fetch(a,{headers:r});if(o.ok)return yield o.json();throw new Error(o.statusText)})).apply(this,arguments)}function To(a){if(!a)return"";const h=a.replace(/[A-Za-z:]+\//,"");if(!h)return"";const r=/[A-Z]+/.exec(h);return r&&r[0]?r[0]:""}const Ao={name:"RelativeClause",check:function Oo(a){return Dn.apply(this,arguments)}},ko="https://phoneticsrv3.lcs.tcd.ie/gramsrv/api/grammar";function Dn(){return Dn=(0,y.Z)(function*(a){return new Promise(function(){var h=(0,y.Z)(function*(r,o){r((yield Eo(a)).map(D=>({errorText:a.slice(D.fromx,D.tox),messageGA:D.msg,messageEN:D.msg,context:D.context,nameEN:Me.U["RELATIVE-CLAUSE"].nameEN,nameGA:Me.U["RELATIVE-CLAUSE"].nameGA,color:Me.U["RELATIVE-CLAUSE"].color,fromX:D.fromx,toX:D.tox,type:"RELATIVE-CLAUSE"})))});return function(r,o){return h.apply(this,arguments)}}())}),Dn.apply(this,arguments)}function Eo(a){return _r.apply(this,arguments)}function _r(){return(_r=(0,y.Z)(function*(a){const h=yield fetch(ko,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:Io(a.replace(/\n/g," "))});return h.ok?yield h.json():[]})).apply(this,arguments)}function Io(a){return`text=${encodeURIComponent(a)}&check=relclause`}var ci=S(529),bt=S(5589),xt=S(2687),hn=S(445),Rt=S(1281),Ze=S(9521),ui=S(3353),Po=S(4968),Bn=S(6451),it=S(9300),mr=S(4004),vr=S(9718),Ke=S(2722),pn=S(5698),gn=S(8675),Ro=S(8372),ve=S(7340);const yr=["*"],li=["content"];function br(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){t.CHM(r);const c=t.oxw();return t.KtG(c._onBackdropClicked())}),t.qZA()}if(2&a){const r=t.oxw();t.ekj("mat-drawer-shown",r._isShowingBackdrop())}}function Do(a,h){1&a&&(t.TgZ(0,"mat-drawer-content"),t.Hsn(1,2),t.qZA())}const di=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Fn=["mat-drawer","mat-drawer-content","*"],Zo={transformDrawer:(0,ve.X$)("transform",[(0,ve.SB)("open, open-instant",(0,ve.oB)({transform:"none",visibility:"visible"})),(0,ve.SB)("void",(0,ve.oB)({"box-shadow":"none",visibility:"hidden"})),(0,ve.eR)("void => open-instant",(0,ve.jt)("0ms")),(0,ve.eR)("void <=> open, open-instant => void",(0,ve.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},xr=new t.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function Kt(){return!1}}),Ln=new t.OlP("MAT_DRAWER_CONTAINER");let Zn=(()=>{class a extends bt.PQ{constructor(r,o,c,_,D){super(c,_,D),this._changeDetectorRef=r,this._container=o}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(t.sBO),t.Y36((0,t.Gpc)(()=>wr)),t.Y36(t.SBq),t.Y36(bt.mF),t.Y36(t.R0b))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(r,o){2&r&&t.Udp("margin-left",o._container._contentMargins.left,"px")("margin-right",o._container._contentMargins.right,"px")},features:[t._Bn([{provide:bt.PQ,useExisting:a}]),t.qOj],ngContentSelectors:yr,decls:1,vars:0,template:function(r,o){1&r&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),a})(),Nn=(()=>{class a{constructor(r,o,c,_,D,G,X,se){this._elementRef=r,this._focusTrapFactory=o,this._focusMonitor=c,this._platform=_,this._ngZone=D,this._interactivityChecker=G,this._doc=X,this._container=se,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new Qe.x,this._animationEnd=new Qe.x,this._animationState="void",this.openedChange=new t.vpe(!0),this._openedStream=this.openedChange.pipe((0,it.h)(z=>z),(0,mr.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,it.h)(z=>z.fromState!==z.toState&&0===z.toState.indexOf("open")),(0,vr.h)(void 0)),this._closedStream=this.openedChange.pipe((0,it.h)(z=>!z),(0,mr.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,it.h)(z=>z.fromState!==z.toState&&"void"===z.toState),(0,vr.h)(void 0)),this._destroyed=new Qe.x,this.onPositionChanged=new t.vpe,this._modeChanged=new Qe.x,this.openedChange.subscribe(z=>{z?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,Po.R)(this._elementRef.nativeElement,"keydown").pipe((0,it.h)(z=>z.keyCode===Ze.hY&&!this.disableClose&&!(0,Ze.Vb)(z)),(0,Ke.R)(this._destroyed)).subscribe(z=>this._ngZone.run(()=>{this.close(),z.stopPropagation(),z.preventDefault()}))}),this._animationEnd.pipe((0,$r.x)((z,le)=>z.fromState===le.fromState&&z.toState===le.toState)).subscribe(z=>{const{fromState:le,toState:we}=z;(0===we.indexOf("open")&&"void"===le||"void"===we&&0===le.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(r){(r="end"===r?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(r),this._position=r,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(r){this._mode=r,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(r){this._disableClose=(0,Rt.Ig)(r)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(r){("true"===r||"false"===r||null==r)&&(r=(0,Rt.Ig)(r)),this._autoFocus=r}get opened(){return this._opened}set opened(r){this.toggle((0,Rt.Ig)(r))}_forceFocus(r,o){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const c=()=>{r.removeEventListener("blur",c),r.removeEventListener("mousedown",c),r.removeAttribute("tabindex")};r.addEventListener("blur",c),r.addEventListener("mousedown",c)})),r.focus(o)}_focusByCssSelector(r,o){let c=this._elementRef.nativeElement.querySelector(r);c&&this._forceFocus(c,o)}_takeFocus(){if(!this._focusTrap)return;const r=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(o=>{!o&&"function"==typeof this._elementRef.nativeElement.focus&&r.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(r){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,r):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const r=this._doc.activeElement;return!!r&&this._elementRef.nativeElement.contains(r)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(r){return this.toggle(!0,r)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(r=!this.opened,o){r&&o&&(this._openedVia=o);const c=this._setOpen(r,!r&&this._isFocusWithinDrawer(),this._openedVia||"program");return r||(this._openedVia=null),c}_setOpen(r,o,c){return this._opened=r,r?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",o&&this._restoreFocus(c)),this._updateFocusTrapState(),new Promise(_=>{this.openedChange.pipe((0,pn.q)(1)).subscribe(D=>_(D?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(r){const o=this._elementRef.nativeElement,c=o.parentNode;"end"===r?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),c.insertBefore(this._anchor,o)),c.appendChild(o)):this._anchor&&this._anchor.parentNode.insertBefore(o,this._anchor)}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(t.SBq),t.Y36(xt.qV),t.Y36(xt.tE),t.Y36(ui.t4),t.Y36(t.R0b),t.Y36(xt.ic),t.Y36(R.K0,8),t.Y36(Ln,8))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-drawer"]],viewQuery:function(r,o){if(1&r&&t.Gf(li,5),2&r){let c;t.iGM(c=t.CRH())&&(o._content=c.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(r,o){1&r&&t.WFA("@transform.start",function(_){return o._animationStarted.next(_)})("@transform.done",function(_){return o._animationEnd.next(_)}),2&r&&(t.uIk("align",null),t.d8E("@transform",o._animationState),t.ekj("mat-drawer-end","end"===o.position)("mat-drawer-over","over"===o.mode)("mat-drawer-push","push"===o.mode)("mat-drawer-side","side"===o.mode)("mat-drawer-opened",o.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:yr,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(r,o){1&r&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA())},dependencies:[bt.PQ],encapsulation:2,data:{animation:[Zo.transformDrawer]},changeDetection:0}),a})(),wr=(()=>{class a{constructor(r,o,c,_,D,G=!1,X){this._dir=r,this._element=o,this._ngZone=c,this._changeDetectorRef=_,this._animationMode=X,this._drawers=new t.n_E,this.backdropClick=new t.vpe,this._destroyed=new Qe.x,this._doCheckSubject=new Qe.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new Qe.x,r&&r.change.pipe((0,Ke.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),D.change().pipe((0,Ke.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=G}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(r){this._autosize=(0,Rt.Ig)(r)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(r){this._backdropOverride=null==r?null:(0,Rt.Ig)(r)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,gn.O)(this._allDrawers),(0,Ke.R)(this._destroyed)).subscribe(r=>{this._drawers.reset(r.filter(o=>!o._container||o._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,gn.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(r=>{this._watchDrawerToggle(r),this._watchDrawerPosition(r),this._watchDrawerMode(r)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,Ro.b)(10),(0,Ke.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(r=>r.open())}close(){this._drawers.forEach(r=>r.close())}updateContentMargins(){let r=0,o=0;if(this._left&&this._left.opened)if("side"==this._left.mode)r+=this._left._getWidth();else if("push"==this._left.mode){const c=this._left._getWidth();r+=c,o-=c}if(this._right&&this._right.opened)if("side"==this._right.mode)o+=this._right._getWidth();else if("push"==this._right.mode){const c=this._right._getWidth();o+=c,r-=c}r=r||null,o=o||null,(r!==this._contentMargins.left||o!==this._contentMargins.right)&&(this._contentMargins={left:r,right:o},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(r){r._animationStarted.pipe((0,it.h)(o=>o.fromState!==o.toState),(0,Ke.R)(this._drawers.changes)).subscribe(o=>{"open-instant"!==o.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==r.mode&&r.openedChange.pipe((0,Ke.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(r.opened))}_watchDrawerPosition(r){!r||r.onPositionChanged.pipe((0,Ke.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,pn.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(r){r&&r._modeChanged.pipe((0,Ke.R)((0,Bn.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(r){const o=this._element.nativeElement.classList,c="mat-drawer-container-has-open";r?o.add(c):o.remove(c)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(r=>{"end"==r.position?this._end=r:this._start=r}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(r=>r&&!r.disableClose&&this._canHaveBackdrop(r)).forEach(r=>r._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(r){return"side"!==r.mode||!!this._backdropOverride}_isDrawerOpen(r){return null!=r&&r.opened}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(hn.Is,8),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(bt.rL),t.Y36(xr),t.Y36(t.QbO,8))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-drawer-container"]],contentQueries:function(r,o,c){if(1&r&&(t.Suo(c,Zn,5),t.Suo(c,Nn,5)),2&r){let _;t.iGM(_=t.CRH())&&(o._content=_.first),t.iGM(_=t.CRH())&&(o._allDrawers=_)}},viewQuery:function(r,o){if(1&r&&t.Gf(Zn,5),2&r){let c;t.iGM(c=t.CRH())&&(o._userContent=c.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,o){2&r&&t.ekj("mat-drawer-container-explicit-backdrop",o._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[t._Bn([{provide:Ln,useExisting:a}])],ngContentSelectors:Fn,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,o){1&r&&(t.F$t(di),t.YNc(0,br,1,2,"div",0),t.Hsn(1),t.Hsn(2,1),t.YNc(3,Do,2,0,"mat-drawer-content",1)),2&r&&(t.Q6J("ngIf",o.hasBackdrop),t.xp6(3),t.Q6J("ngIf",!o._content))},dependencies:[R.O5,Zn],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),a})(),hi=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[R.ez,De.BQ,bt.ZD,bt.ZD,De.BQ]}),a})();var Un=S(7392),pi=S(5802),gi=S(4859),_n=S(727),_i=S(9646),mi=S(3101),vi=S(3900),yi=S(1005),Cr=S(4080),qn=S(8184);const Go=["mat-menu-item",""];function Yo(a,h){1&a&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"polygon",3),t.qZA())}const bi=["*"];function Wo(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",0),t.NdJ("keydown",function(c){t.CHM(r);const _=t.oxw();return t.KtG(_._handleKeydown(c))})("click",function(){t.CHM(r);const c=t.oxw();return t.KtG(c.closed.emit("click"))})("@transformMenu.start",function(c){t.CHM(r);const _=t.oxw();return t.KtG(_._onAnimationStart(c))})("@transformMenu.done",function(c){t.CHM(r);const _=t.oxw();return t.KtG(_._onAnimationDone(c))}),t.TgZ(1,"div",1),t.Hsn(2),t.qZA()()}if(2&a){const r=t.oxw();t.Q6J("id",r.panelId)("ngClass",r._classList)("@transformMenu",r._panelAnimationState),t.uIk("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby||null)("aria-describedby",r.ariaDescribedby||null)}}const he={transformMenu:(0,ve.X$)("transformMenu",[(0,ve.SB)("void",(0,ve.oB)({opacity:0,transform:"scale(0.8)"})),(0,ve.eR)("void => enter",(0,ve.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,ve.oB)({opacity:1,transform:"scale(1)"}))),(0,ve.eR)("* => void",(0,ve.jt)("100ms 25ms linear",(0,ve.oB)({opacity:0})))]),fadeInItems:(0,ve.X$)("fadeInItems",[(0,ve.SB)("showing",(0,ve.oB)({opacity:1})),(0,ve.eR)("void => *",[(0,ve.oB)({opacity:0}),(0,ve.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Jo=new t.OlP("MatMenuContent"),Mr=new t.OlP("MAT_MENU_PANEL"),Be=(0,De.Kr)((0,De.Id)(class{}));let mn=(()=>{class a extends Be{constructor(r,o,c,_,D){super(),this._elementRef=r,this._document=o,this._focusMonitor=c,this._parentMenu=_,this._changeDetectorRef=D,this.role="menuitem",this._hovered=new Qe.x,this._focused=new Qe.x,this._highlighted=!1,this._triggersSubmenu=!1,_?.addItem?.(this)}focus(r,o){this._focusMonitor&&r?this._focusMonitor.focusVia(this._getHostElement(),r,o):this._getHostElement().focus(o),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(r){this.disabled&&(r.preventDefault(),r.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const r=this._elementRef.nativeElement.cloneNode(!0),o=r.querySelectorAll("mat-icon, .material-icons");for(let c=0;c<o.length;c++)o[c].remove();return r.textContent?.trim()||""}_setHighlighted(r){this._highlighted=r,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(t.SBq),t.Y36(R.K0),t.Y36(xt.tE),t.Y36(Mr,8),t.Y36(t.sBO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(r,o){1&r&&t.NdJ("click",function(_){return o._checkDisabled(_)})("mouseenter",function(){return o._handleMouseEnter()}),2&r&&(t.uIk("role",o.role)("tabindex",o._getTabIndex())("aria-disabled",o.disabled.toString())("disabled",o.disabled||null),t.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",o._highlighted)("mat-menu-item-submenu-trigger",o._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[t.qOj],attrs:Go,ngContentSelectors:bi,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(r,o){1&r&&(t.F$t(),t.Hsn(0),t._UZ(1,"div",0),t.YNc(2,Yo,2,0,"svg",1)),2&r&&(t.xp6(1),t.Q6J("matRippleDisabled",o.disableRipple||o.disabled)("matRippleTrigger",o._getHostElement()),t.xp6(1),t.Q6J("ngIf",o._triggersSubmenu))},dependencies:[R.O5,De.wG],encapsulation:2,changeDetection:0}),a})();const Vt=new t.OlP("mat-menu-default-options",{providedIn:"root",factory:function xi(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Sr=0,Fe=(()=>{class a{constructor(r,o,c,_){this._elementRef=r,this._ngZone=o,this._defaultOptions=c,this._changeDetectorRef=_,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new t.n_E,this._tabSubscription=_n.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Qe.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new t.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+Sr++}get xPosition(){return this._xPosition}set xPosition(r){this._xPosition=r,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(r){this._yPosition=r,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(r){this._overlapTrigger=(0,Rt.Ig)(r)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(r){this._hasBackdrop=(0,Rt.Ig)(r)}set panelClass(r){const o=this._previousPanelClass;o&&o.length&&o.split(" ").forEach(c=>{this._classList[c]=!1}),this._previousPanelClass=r,r&&r.length&&(r.split(" ").forEach(c=>{this._classList[c]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(r){this.panelClass=r}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new xt.Em(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,gn.O)(this._directDescendantItems),(0,vi.w)(r=>(0,Bn.T)(...r.map(o=>o._focused)))).subscribe(r=>this._keyManager.updateActiveItem(r)),this._directDescendantItems.changes.subscribe(r=>{const o=this._keyManager;if("enter"===this._panelAnimationState&&o.activeItem?._hasFocus()){const c=r.toArray(),_=Math.max(0,Math.min(c.length-1,o.activeItemIndex||0));c[_]&&!c[_].disabled?o.setActiveItem(_):o.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe((0,gn.O)(this._directDescendantItems),(0,vi.w)(o=>(0,Bn.T)(...o.map(c=>c._hovered))))}addItem(r){}removeItem(r){}_handleKeydown(r){const o=r.keyCode,c=this._keyManager;switch(o){case Ze.hY:(0,Ze.Vb)(r)||(r.preventDefault(),this.closed.emit("keydown"));break;case Ze.oh:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case Ze.SV:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(o===Ze.LH||o===Ze.JH)&&c.setFocusOrigin("keyboard"),void c.onKeydown(r)}r.stopPropagation()}focusFirstItem(r="program"){this._ngZone.onStable.pipe((0,pn.q)(1)).subscribe(()=>{let o=null;if(this._directDescendantItems.length&&(o=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!o||!o.contains(document.activeElement)){const c=this._keyManager;c.setFocusOrigin(r).setFirstItemActive(),!c.activeItem&&o&&o.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(r){const o=Math.min(this._baseElevation+r,24),c=`${this._elevationPrefix}${o}`,_=Object.keys(this._classList).find(D=>D.startsWith(this._elevationPrefix));(!_||_===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[c]=!0,this._previousElevation=c)}setPositionClasses(r=this.xPosition,o=this.yPosition){const c=this._classList;c["mat-menu-before"]="before"===r,c["mat-menu-after"]="after"===r,c["mat-menu-above"]="above"===o,c["mat-menu-below"]="below"===o,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(r){this._animationDone.next(r),this._isAnimating=!1}_onAnimationStart(r){this._isAnimating=!0,"enter"===r.toState&&0===this._keyManager.activeItemIndex&&(r.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,gn.O)(this._allItems)).subscribe(r=>{this._directDescendantItems.reset(r.filter(o=>o._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(Vt),t.Y36(t.sBO))},a.\u0275dir=t.lG2({type:a,contentQueries:function(r,o,c){if(1&r&&(t.Suo(c,Jo,5),t.Suo(c,mn,5),t.Suo(c,mn,4)),2&r){let _;t.iGM(_=t.CRH())&&(o.lazyContent=_.first),t.iGM(_=t.CRH())&&(o._allItems=_),t.iGM(_=t.CRH())&&(o.items=_)}},viewQuery:function(r,o){if(1&r&&t.Gf(t.Rgc,5),2&r){let c;t.iGM(c=t.CRH())&&(o.templateRef=c.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),a})(),wi=(()=>{class a extends Fe{constructor(r,o,c,_){super(r,o,c,_),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(Vt),t.Y36(t.sBO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(r,o){2&r&&t.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[t._Bn([{provide:Mr,useExisting:a}]),t.qOj],ngContentSelectors:bi,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(r,o){1&r&&(t.F$t(),t.YNc(0,Wo,3,6,"ng-template"))},dependencies:[R.mk],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[he.transformMenu,he.fadeInItems]},changeDetection:0}),a})();const Tr=new t.OlP("mat-menu-scroll-strategy"),Mi={provide:Tr,deps:[qn.aV],useFactory:function Ci(a){return()=>a.scrollStrategies.reposition()}},Ar=(0,ui.i$)({passive:!0});let He=(()=>{class a{constructor(r,o,c,_,D,G,X,se,z){this._overlay=r,this._element=o,this._viewContainerRef=c,this._menuItemInstance=G,this._dir=X,this._focusMonitor=se,this._ngZone=z,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=_n.w0.EMPTY,this._hoverSubscription=_n.w0.EMPTY,this._menuCloseSubscription=_n.w0.EMPTY,this._handleTouchStart=le=>{(0,xt.yG)(le)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new t.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new t.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=_,this._parentMaterialMenu=D instanceof Fe?D:void 0,o.nativeElement.addEventListener("touchstart",this._handleTouchStart,Ar),G&&(G._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(r){this.menu=r}get menu(){return this._menu}set menu(r){r!==this._menu&&(this._menu=r,this._menuCloseSubscription.unsubscribe(),r&&(this._menuCloseSubscription=r.close.subscribe(o=>{this._destroyMenu(o),("click"===o||"tab"===o)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(o)})))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,Ar),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const r=this.menu;if(this._menuOpen||!r)return;const o=this._createOverlay(r),c=o.getConfig(),_=c.positionStrategy;this._setPosition(r,_),c.hasBackdrop=r.hasBackdrop??!this.triggersSubmenu(),o.attach(this._getPortal(r)),r.lazyContent&&r.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(r),r instanceof Fe&&(r._startAnimation(),r._directDescendantItems.changes.pipe((0,Ke.R)(r.close)).subscribe(()=>{_.withLockedPosition(!1).reapplyLastPosition(),_.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(r,o){this._focusMonitor&&r?this._focusMonitor.focusVia(this._element,r,o):this._element.nativeElement.focus(o)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(r){if(!this._overlayRef||!this.menuOpen)return;const o=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===r||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,o instanceof Fe?(o._resetAnimation(),o.lazyContent?o._animationDone.pipe((0,it.h)(c=>"void"===c.toState),(0,pn.q)(1),(0,Ke.R)(o.lazyContent._attached)).subscribe({next:()=>o.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),o?.lazyContent?.detach())}_initMenu(r){r.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,r.direction=this.dir,this._setMenuElevation(r),r.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(r){if(r.setElevation){let o=0,c=r.parentMenu;for(;c;)o++,c=c.parentMenu;r.setElevation(o)}}_setIsMenuOpen(r){this._menuOpen=r,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(r)}_createOverlay(r){if(!this._overlayRef){const o=this._getOverlayConfig(r);this._subscribeToPositions(r,o.positionStrategy),this._overlayRef=this._overlay.create(o),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(r){return new qn.X_({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:r.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:r.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(r,o){r.setPositionClasses&&o.positionChanges.subscribe(c=>{const _="start"===c.connectionPair.overlayX?"after":"before",D="top"===c.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>r.setPositionClasses(_,D)):r.setPositionClasses(_,D)})}_setPosition(r,o){let[c,_]="before"===r.xPosition?["end","start"]:["start","end"],[D,G]="above"===r.yPosition?["bottom","top"]:["top","bottom"],[X,se]=[D,G],[z,le]=[c,_],we=0;if(this.triggersSubmenu()){if(le=c="before"===r.xPosition?"start":"end",_=z="end"===c?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const Re=this._parentMaterialMenu.items.first;this._parentInnerPadding=Re?Re._getHostElement().offsetTop:0}we="bottom"===D?this._parentInnerPadding:-this._parentInnerPadding}}else r.overlapTrigger||(X="top"===D?"bottom":"top",se="top"===G?"bottom":"top");o.withPositions([{originX:c,originY:X,overlayX:z,overlayY:D,offsetY:we},{originX:_,originY:X,overlayX:le,overlayY:D,offsetY:we},{originX:c,originY:se,overlayX:z,overlayY:G,offsetY:-we},{originX:_,originY:se,overlayX:le,overlayY:G,offsetY:-we}])}_menuClosingActions(){const r=this._overlayRef.backdropClick(),o=this._overlayRef.detachments(),c=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,_i.of)(),_=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,it.h)(D=>D!==this._menuItemInstance),(0,it.h)(()=>this._menuOpen)):(0,_i.of)();return(0,Bn.T)(r,c,_,o)}_handleMousedown(r){(0,xt.X6)(r)||(this._openedBy=0===r.button?"mouse":void 0,this.triggersSubmenu()&&r.preventDefault())}_handleKeydown(r){const o=r.keyCode;(o===Ze.K5||o===Ze.L_)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(o===Ze.SV&&"ltr"===this.dir||o===Ze.oh&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(r){this.triggersSubmenu()?(r.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,it.h)(r=>r===this._menuItemInstance&&!r.disabled),(0,yi.g)(0,mi.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Fe&&this.menu._isAnimating?this.menu._animationDone.pipe((0,pn.q)(1),(0,yi.g)(0,mi.E),(0,Ke.R)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(r){return(!this._portal||this._portal.templateRef!==r.templateRef)&&(this._portal=new Cr.UE(r.templateRef,this._viewContainerRef)),this._portal}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(qn.aV),t.Y36(t.SBq),t.Y36(t.s_b),t.Y36(Tr),t.Y36(Mr,8),t.Y36(mn,10),t.Y36(hn.Is,8),t.Y36(xt.tE),t.Y36(t.R0b))},a.\u0275dir=t.lG2({type:a,hostVars:3,hostBindings:function(r,o){1&r&&t.NdJ("click",function(_){return o._handleClick(_)})("mousedown",function(_){return o._handleMousedown(_)})("keydown",function(_){return o._handleKeydown(_)}),2&r&&t.uIk("aria-haspopup",o.menu?"menu":null)("aria-expanded",o.menuOpen||null)("aria-controls",o.menuOpen?o.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),a})(),Ko=(()=>{class a extends He{}return a.\u0275fac=function(){let h;return function(o){return(h||(h=t.n5z(a)))(o||a)}}(),a.\u0275dir=t.lG2({type:a,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[t.qOj]}),a})(),Ve=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[Mi],imports:[R.ez,De.BQ,De.si,qn.U8,bt.ZD,De.BQ]}),a})();function Vo(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div")(1,"div",5),t._uU(2),t.qZA(),t.TgZ(3,"div",6)(4,"input",7),t.NdJ("ngModelChange",function(c){t.CHM(r);const _=t.oxw();return t.KtG(_.searchText=c)}),t.qZA()()()}if(2&a){const r=t.oxw();t.xp6(2),t.Oqu(r.ts.l.my_stories),t.xp6(2),t.s9C("placeholder",r.ts.l.search_story_title_or_content),t.Q6J("ngModel",r.searchText)}}function Si(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",8),t.NdJ("click",function(){const _=t.CHM(r).$implicit,D=t.oxw();return t.KtG(D.setStory(_))}),t.TgZ(1,"div",9)(2,"div",10),t.NdJ("blur",function(){const c=t.CHM(r),_=c.index,D=c.$implicit,G=t.oxw();return t.KtG(G.saveStoryTitle(_,D))})("keydown.enter",function(){const c=t.CHM(r),_=c.index,D=c.$implicit,G=t.oxw();return t.KtG(G.saveStoryTitle(_,D))}),t._uU(3),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.ALo(6,"date"),t.TgZ(7,"button",12)(8,"mat-icon"),t._uU(9,"more_vert"),t.qZA()(),t.TgZ(10,"mat-menu",null,13)(12,"button",14),t.NdJ("click",function(){const _=t.CHM(r).$implicit,D=t.oxw();return t.KtG(D.openDeleteStoryDialog(_._id))}),t.TgZ(13,"mat-icon"),t._uU(14,"delete"),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.qZA()(),t.TgZ(17,"button",14),t.NdJ("click",function(){const _=t.CHM(r).index,D=t.oxw();return t.KtG(D.makeTitleDivEditable(_))}),t.TgZ(18,"mat-icon"),t._uU(19,"create"),t.qZA(),t.TgZ(20,"span"),t._uU(21),t.qZA()()()()(),t._UZ(22,"hr"),t.qZA()}if(2&a){const r=h.$implicit,o=h.index,c=t.MAs(11),_=t.oxw();t.xp6(1),t.uIk("id",r._id),t.xp6(1),t.uIk("id",o),t.xp6(1),t.hij(" ",null==r?null:r.title," "),t.xp6(2),t.hij(" ",t.xi3(6,7,r.lastUpdated,"d/M/yy")," "),t.xp6(2),t.Q6J("matMenuTriggerFor",c),t.xp6(9),t.Oqu(_.ts.l.delete),t.xp6(5),t.Oqu(_.ts.l.rename)}}let wt=(()=>{class a{constructor(r,o,c,_,D,G){this.ts=r,this.auth=o,this.storyService=c,this.engagement=_,this.recordingService=D,this.dialog=G,this.stories=[],this.lastClickedStoryId="",this.searchText="",this.storyEmitter=new t.vpe,this.hasFeedback=new t.vpe,this.titleUpdated=new t.vpe}ngOnInit(){this.getStories()}getStories(){var r=this;return(0,y.Z)(function*(){r.stories=(yield(0,me.z)(r.storyService.getStoriesForLoggedInUser())).map(o=>(new M).fromJSON(o)),r.stories.length>0&&(r.stories.sort((o,c)=>o.date>c.date?-1:1),r.lastClickedStoryId=r.stories[0]._id,setTimeout(()=>{r.setStory(r.stories[0])}))})()}setStory(r){null==r.htmlText&&(r.htmlText=r.text),this.storyEmitter.emit(r),this.hasFeedback.emit(!!(r.feedback.text||r.feedback.audioId||r.feedback.feedbackMarkup));let o=r._id,c=document.getElementById(o);c&&(this.lastClickedStoryId&&document.getElementById(this.lastClickedStoryId).classList.remove("clickedresultCard"),this.lastClickedStoryId=o,c.classList.add("clickedresultCard"))}createNewStory(){var r=this;this.dialogRef=this.dialog.open(k.p,{data:{title:this.ts.l.story_details,type:"select",data:[this.ts.l.enter_title,[this.ts.l.connacht,this.ts.l.munster,this.ts.l.ulster],[this.ts.l.title,this.ts.l.dialect]],confirmText:this.ts.l.save_details,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var o=(0,y.Z)(function*(c){if(r.dialogRef=void 0,c)if(c[0]){let _="connemara";c[1]==r.ts.l.munster&&(_="kerry"),c[1]==r.ts.l.ulster&&(_="donegal"),r.storyService.saveStory(r.auth.getUserDetails()._id,c[0],new Date,_,"",r.auth.getUserDetails().username,!1).subscribe({next:()=>{r.getStories()},error:()=>{alert("Not able to create a new story")}})}else alert(r.ts.l.title_required)});return function(c){return o.apply(this,arguments)}}())}openDeleteStoryDialog(r){var o=this;this.dialogRef=this.dialog.open(k.p,{data:{title:this.ts.l.delete_story,message:"Are you sure you want to delete this story?",confirmText:this.ts.l.yes,cancelText:this.ts.l.no},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var c=(0,y.Z)(function*(_){o.dialogRef=void 0,_&&o.deleteStory(r)});return function(_){return c.apply(this,arguments)}}())}deleteStory(r){this.recordingService.deleteStoryRecordingAudio(r).subscribe(c=>{}),this.recordingService.deleteStoryRecording(r).subscribe(c=>{});const o=this.stories.findIndex(c=>c._id===r);this.storyService.deleteStory(r).subscribe(c=>{this.engagement.addEventForLoggedInUser(N.tw["DELETE-STORY"],{_id:r}),this.stories.splice(o,1),this.stories.length?this.setStory(this.stories[0]):this.storyEmitter.emit(null)})}makeTitleDivEditable(r){const o=document.getElementById(r);o.setAttribute("contenteditable","true"),window.setTimeout(()=>o.focus(),0)}saveStoryTitle(r,o){const c=document.getElementById(r);c.setAttribute("contenteditable","false"),o.title.trim()!=c.textContent.trim()&&(o.title=c.textContent,this.storyService.updateTitle(o._id,o.title.trim()).subscribe({next:()=>{this.titleUpdated.emit(o.title.trim())},error:()=>console.log("error updating title")}))}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(F.D),t.Y36(L.$),t.Y36(w.N),t.Y36(Q.M),t.Y36(Ie.s),t.Y36(p.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-story-drawer"]],outputs:{storyEmitter:"storyEmitter",hasFeedback:"hasFeedback",titleUpdated:"titleUpdated"},decls:8,vars:5,consts:[[1,"body"],[4,"ngIf"],[1,"storyList"],[3,"click",4,"ngFor","ngForOf"],["mat-fab","",1,"newStoryButton",3,"click"],[1,"myStories"],[1,"form-group"],["type","text","id","search-text","aria-describedby","search-text",1,"form-control","searchBox",3,"ngModel","placeholder","ngModelChange"],[3,"click"],[1,"contentSection"],[1,"contentsTitle",3,"blur","keydown.enter"],[1,"contentsDate"],["mat-icon-button","","aria-label","Options to delete or rename your story",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t.YNc(1,Vo,5,3,"div",1),t.TgZ(2,"div",2),t.YNc(3,Si,23,10,"div",3),t.ALo(4,"appFilter"),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return o.createNewStory()}),t.TgZ(6,"mat-icon"),t._uU(7,"add"),t.qZA()()()),2&r&&(t.xp6(1),t.Q6J("ngIf",o.stories.length>0),t.xp6(2),t.Q6J("ngForOf",t.xi3(4,2,o.stories,o.searchText)))},dependencies:[R.sg,R.O5,Te.Fj,Te.JJ,Te.On,gi.lW,Un.Hw,wi,mn,Ko,R.uU,_e],styles:[".body[_ngcontent-%COMP%]{display:flex;width:100%;height:98%;flex-direction:column}.storyList[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto}.myStories[_ngcontent-%COMP%]{color:var(--dark-text);font-size:16pt;padding-bottom:10px;text-align:left;font-weight:bolder}.searchBox[_ngcontent-%COMP%]{min-width:300px}.contentSection[_ngcontent-%COMP%]{display:flex}.contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsTitle[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;text-decoration:none;min-width:50%;flex:1 0 50%;overflow-wrap:break-word}.contentsTitle[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsDate[_ngcontent-%COMP%]{flex:1 0 50%;text-align:right;padding-right:20px}.newStoryButton[_ngcontent-%COMP%]{margin-left:auto}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%]{background-color:var(--scealai-green);box-shadow:none}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:2px;font-weight:bolder;border-radius:10px}"]}),a})();var Dt=S(1481);function kr(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",10)(1,"label",11),t._uU(2),t.qZA(),t.TgZ(3,"input",12),t.NdJ("ngModelChange",function(c){t.CHM(r);const _=t.oxw();return t.KtG(_.wordLookedUp=c)})("keyup.enter",function(){t.CHM(r);const c=t.oxw();return t.KtG(c.lookupWord())})("click",function(){t.CHM(r);const c=t.oxw();return t.KtG(c.clearDictInput())}),t.qZA(),t.TgZ(4,"button",13),t.NdJ("click",function(){t.CHM(r);const c=t.oxw();return t.KtG(c.lookupWord())}),t._UZ(5,"i",14),t.qZA()()}if(2&a){const r=t.oxw();t.xp6(2),t.hij("",r.ts.l.search,":"),t.xp6(1),t.Q6J("ngModel",r.wordLookedUp)}}function be(a,h){if(1&a&&t._UZ(0,"iframe",15),2&a){const r=t.oxw();t.Q6J("src",r.defaultDictIframeText,t.uOi)}}function Ct(a,h){1&a&&(t.TgZ(0,"div",16)(1,"ul")(2,"li")(3,"a",17),t._uU(4,"potafocal.com"),t.qZA()(),t.TgZ(5,"li")(6,"a",18),t._uU(7,"focloir.ie"),t.qZA()()()())}let Or=(()=>{class a{constructor(r,o,c,_){this.ts=r,this.sanitizer=o,this.http=c,this.engagement=_,this.wordLookedUp="",this.selectTeanglann=!0,this.defaultDictIframeText=this.sanitizer.bypassSecurityTrustResourceUrl("data:text/html;charset=utf-8,"+this.ts.l.search_for_words_in_dictionary),this.closeDictionaryEmitter=new t.vpe}ngOnInit(){}lookupWord(){var r=this;return(0,y.Z)(function*(){if(r.wordLookedUp){const o=r.http.post(Jt.Z.baseurl+"proxy/",{url:`https://www.teanglann.ie/en/fgb/${r.wordLookedUp}`}),c=yield(0,me.z)(o),_=(new DOMParser).parseFromString(c,"text/html");_.querySelectorAll(".ex > .head > a").forEach(z=>z.href=`https://www.teanglann.ie${z.href.slice(z.href.lastIndexOf("/en/"))}`),_.querySelector(".moar")?.remove();const X=_.querySelector(".listings");X.style.cssText+="margin-right: 0px; padding: 10px;",document.getElementById("dictiframe").src='data:text/html;charset=utf-8,<link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/template.css"><link type="text/css" rel="stylesheet" href="https://www.teanglann.ie/furniture/fgb.css">'+X.outerHTML,r.engagement.addEventForLoggedInUser(N.tw["USE-DICTIONARY"],null,r.wordLookedUp)}else alert(r.ts.l.enter_a_word_to_lookup)})()}clearDictInput(){this.wordLookedUp&&(this.wordLookedUp="")}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(F.D),t.Y36(Dt.H7),t.Y36(ci.eN),t.Y36(Q.M))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dictionary-drawer"]],outputs:{closeDictionaryEmitter:"closeDictionaryEmitter"},decls:16,vars:5,consts:[[1,"dictionaryContainer"],[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"dictionarySubHeader"],[1,"dictionaryName",3,"click"],["class","dictionaryInput",4,"ngIf"],[2,"height","100%"],["class","dictionaryIframe","id","dictiframe",3,"src",4,"ngIf"],["class","dictionaryIframe","style","text-align: left",4,"ngIf"],[1,"dictionaryInput"],["for","dictlookup"],["type","text","id","dictlookup","name","dictlookup","autofocus","",3,"ngModel","ngModelChange","keyup.enter","click"],[1,"searchDictionaryBtn",3,"click"],["aria-hidden","true",1,"fa","fa-search"],["id","dictiframe",1,"dictionaryIframe",3,"src"],[1,"dictionaryIframe",2,"text-align","left"],["href","http://www.potafocal.com/beo/","target","_blank"],["href","https://www.focloir.ie","target","_blank"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3),t.qZA(),t.TgZ(4,"div",2),t.NdJ("click",function(){return o.closeDictionaryEmitter.next(!0)}),t._UZ(5,"i",3),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5),t.NdJ("click",function(){return o.selectTeanglann=!0}),t._uU(8," Teanglann "),t.qZA(),t._uU(9," | "),t.TgZ(10,"div",5),t.NdJ("click",function(){return o.selectTeanglann=!1}),t._uU(11),t.qZA()(),t.YNc(12,kr,6,2,"div",6),t.TgZ(13,"div",7),t.YNc(14,be,1,1,"iframe",8),t.qZA(),t.YNc(15,Ct,8,0,"div",9),t.qZA()),2&r&&(t.xp6(3),t.hij(" ",o.ts.l.dictionary," "),t.xp6(8),t.hij(" ",o.ts.l.external_links," "),t.xp6(1),t.Q6J("ngIf",o.selectTeanglann),t.xp6(2),t.Q6J("ngIf",o.selectTeanglann),t.xp6(1),t.Q6J("ngIf",!o.selectTeanglann))},dependencies:[R.O5,Te.Fj,Te.JJ,Te.On],styles:[".dictionaryContainer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:wrap}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.dictionarySubHeader[_ngcontent-%COMP%]{padding-left:10px;padding-bottom:5px;background-color:var(--scealai-green);color:#fff;display:flex}.dictionaryName[_ngcontent-%COMP%]{background-color:var(--scealai-green);font-size:12px;color:#fff;padding-right:5px;padding-top:5px}.dictionaryName[_ngcontent-%COMP%]:hover{color:var(--scealai-light-green);text-decoration:none;cursor:pointer}.dictionaryInput[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;display:flex;padding-bottom:10px;padding-left:10px;gap:1rem}.searchDictionaryBtn[_ngcontent-%COMP%]{background-color:var(--scealai-yellow);border-style:none;color:#fff;font-size:12pt;margin:0;border-radius:5px}.searchDictionaryBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-yellow-hover);color:#fff}.dictionaryIframe[_ngcontent-%COMP%]{width:100%;border-radius:0 0 5px 5px}"]}),a})();const jo=function(a){return{"background-color":a}};function Er(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",5),t.NdJ("click",function(){const _=t.CHM(r).$implicit,D=t.oxw();return t.KtG(D.toggleLegendTag(_.key))}),t._UZ(1,"div",6),t._uU(2),t.ALo(3,"titlecase"),t.ALo(4,"titlecase"),t._uU(5),t.qZA()}if(2&a){const r=h.$implicit,o=t.oxw();t.uIk("id",r.key),t.xp6(1),t.Q6J("ngStyle",t.VKq(8,jo,r.value[0].color)),t.xp6(1),t.hij(" ","en"==o.ts.l.iso_code?t.lcZ(3,4,r.value[0].nameEN):t.lcZ(4,6,r.value[0].nameGA)," "),t.xp6(3),t.hij(" (","Broad/Slender"==r.value[0].nameEN?r.value.length/2:r.value.length,") ")}}let Xo=(()=>{class a{constructor(r){this.ts=r,this.closeGrammarEmitter=new t.vpe}ngOnInit(){}toggleLegendTag(r){this.checkBoxes[r]=!this.checkBoxes[r],this.quillHighlighter.hideAll(),this.quillHighlighter.show(this.grammarErrors.filter(o=>this.checkBoxes[o.type]).map(Me.j)),this.checkBoxes[r]?document.getElementById(r).classList.remove("hideLegendItem"):document.getElementById(r).classList.add("hideLegendItem")}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(F.D))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-grammar-error-drawer"]],inputs:{quillHighlighter:"quillHighlighter",grammarLoaded:"grammarLoaded",grammarErrorsTypeDict:"grammarErrorsTypeDict",grammarErrors:"grammarErrors",checkBoxes:"checkBoxes"},outputs:{closeGrammarEmitter:"closeGrammarEmitter"},decls:8,vars:4,consts:[[1,"dictionaryHeader"],[1,"closeDictionaryBtn",3,"click"],[1,"fa","fa-times"],[1,"selectErrorCheckbox"],["class","errorContainer",3,"click",4,"ngFor","ngForOf"],[1,"errorContainer",3,"click"],[1,"circle",3,"ngStyle"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"h5"),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.NdJ("click",function(){return o.closeGrammarEmitter.next(!0)}),t._UZ(4,"i",2),t.qZA()(),t.TgZ(5,"div",3),t.YNc(6,Er,6,10,"div",4),t.ALo(7,"keyvalue"),t.qZA()),2&r&&(t.xp6(2),t.hij(" ",o.ts.message("grammar_errors")," "),t.xp6(4),t.Q6J("ngForOf",t.lcZ(7,2,o.grammarErrorsTypeDict)))},dependencies:[R.sg,R.PC,R.rS,R.Nd],styles:[".grammarMessageBanner[_ngcontent-%COMP%]{padding-bottom:20px}.circle[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border-radius:6px}.selectErrorCheckbox[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:space-around;text-align:left;padding-left:10px;padding-top:10px;gap:1.5rem;-webkit-user-select:none;-moz-user-select:none;user-select:none}.errorContainer[_ngcontent-%COMP%]{margin:2px}.errorContainer[_ngcontent-%COMP%]:hover{cursor:pointer}.errorColorBox[_ngcontent-%COMP%]{display:inline-flex;width:30px;height:15px}.hideLegendItem[_ngcontent-%COMP%]{text-decoration:line-through;opacity:.5}.dictionaryContainer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex-wrap:wrap}.dictionaryHeader[_ngcontent-%COMP%]{padding:20px;background-color:var(--scealai-green);color:#fff;display:flex}.closeDictionaryBtn[_ngcontent-%COMP%]{margin-left:auto}.closeDictionaryBtn[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),a})();function $o(a,h){if(1&a&&t._UZ(0,"audio",7,8),2&a){const r=t.oxw();t.Q6J("src",r.audioSource,t.LSH)}}function es(a,h){if(1&a&&t._UZ(0,"div",9),2&a){const r=t.oxw();t.Q6J("innerHTML",r.sanitizer.bypassSecurityTrustHtml(null==r.story||null==r.story.feedback?null:r.story.feedback.feedbackMarkup),t.oJD)}}let Ti=(()=>{class a{constructor(r,o,c,_,D){this.ts=r,this.sanitizer=o,this.storyService=c,this.engagement=_,this.notificationService=D,this.closeFeedbackEmitter=new t.vpe}ngOnInit(){}ngOnChanges(r){this.story&&(this.story.feedback.text||this.story.feedback.audioId||this.story.feedback.feedbackMarkup)&&this.getFeedback()}getFeedback(){this.story.feedback.audioId&&this.getFeedbackAudio(),""!==this.story.feedback.text&&(this.story.feedback.seenByStudent=!0),this.storyService.viewFeedback(this.story._id).subscribe(()=>{this.engagement.addEventForLoggedInUser(N.tw["VIEW-FEEDBACK"],this.story),this.notificationService.getStudentNotifications()})}getFeedbackAudio(){this.storyService.getFeedbackAudio(this.story._id).subscribe(r=>{this.audioSource=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(r)),console.log(this.audioSource)})}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(F.D),t.Y36(Dt.H7),t.Y36(w.N),t.Y36(Q.M),t.Y36(fe.g))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-feedback-drawer"]],inputs:{story:"story"},outputs:{closeFeedbackEmitter:"closeFeedbackEmitter"},features:[t.TTD],decls:11,vars:5,consts:[[1,"feedbackHeader"],[1,"closeFeedbackBtn",3,"click"],[1,"fa","fa-times"],[1,"textFieldContainer"],["readonly","",1,"textField",3,"placeholder","value"],["id","audio","controls","","class","audioPlayer",3,"src",4,"ngIf"],["class","textField","style","text-align: left; padding-left:25%; padding-right:25%;",3,"innerHTML",4,"ngIf"],["id","audio","controls","",1,"audioPlayer",3,"src"],["audioTag",""],[1,"textField",2,"text-align","left","padding-left","25%","padding-right","25%",3,"innerHTML"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t.NdJ("click",function(){return o.closeFeedbackEmitter.next(!0)}),t._UZ(4,"i",2),t.qZA()(),t.TgZ(5,"div",3)(6,"textarea",4),t._uU(7,"    "),t.qZA(),t.YNc(8,$o,2,1,"audio",5),t._UZ(9,"hr"),t.YNc(10,es,1,1,"div",6),t.qZA()),2&r&&(t.xp6(2),t.hij(" ",o.ts.l.feedback," "),t.xp6(4),t.s9C("placeholder",o.ts.l.no_feedback_provided),t.s9C("value",null==o.story||null==o.story.feedback?null:o.story.feedback.text),t.xp6(2),t.Q6J("ngIf",o.audioSource&&(null==o.story||null==o.story.feedback?null:o.story.feedback.audioId)),t.xp6(2),t.Q6J("ngIf",null==o.story||null==o.story.feedback?null:o.story.feedback.feedbackMarkup))},dependencies:[R.O5],styles:[".feedbackHeader[_ngcontent-%COMP%]{width:100%;padding-left:20px;padding-right:20px;height:30px;background-color:var(--scealai-green);color:#fff;display:flex;align-items:center}.closeFeedbackBtn[_ngcontent-%COMP%]{margin-left:auto}.closeFeedbackBtn[_ngcontent-%COMP%]:hover{cursor:pointer}.textFieldContainer[_ngcontent-%COMP%]{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px}.textField[_ngcontent-%COMP%]{width:100%;resize:none;z-index:1;color:var(--dark-text);background:white;padding-left:20px;padding-right:20px;padding-top:10px;border:none}.audioPlayer[_ngcontent-%COMP%]{height:30px;width:90%;background-color:#f1f3f4;border:1px solid rgba(140,128,110,.5254901961)}"]}),a})();const Hn=["rightDrawer"],jt=["mySynthesisPlayer"];function ts(a,h){1&a&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function Ai(a,h){if(1&a&&(t.TgZ(0,"span",23),t._uU(1),t.qZA()),2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.made_using_prompts," ")}}function ki(a,h){if(1&a&&(t.TgZ(0,"div",24),t._uU(1),t._UZ(2,"i",25),t.qZA()),2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.saved," ")}}function Ir(a,h){if(1&a&&(t.TgZ(0,"div",24),t._uU(1),t._UZ(2,"i",26),t.qZA()),2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.saving," ")}}function Pr(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",16)(1,"div",17)(2,"input",18),t.NdJ("ngModelChange",function(c){t.CHM(r);const _=t.oxw();return t.KtG(_.updatedTitle=c)})("blur",function(){t.CHM(r);const c=t.oxw();return t.KtG(c.updateStoryTitle())}),t.qZA(),t.YNc(3,ts,2,0,"span",19),t.YNc(4,Ai,2,1,"span",20),t.qZA(),t.TgZ(5,"div",21),t.YNc(6,ki,3,1,"div",22),t.YNc(7,Ir,3,1,"div",22),t.qZA()()}if(2&a){const r=t.oxw();t.xp6(2),t.s9C("size",r.updatedTitle.length),t.Q6J("ngStyle",r.titleStyle())("ngModel",r.updatedTitle),t.xp6(1),t.Q6J("ngIf",!r.storySaved),t.xp6(1),t.Q6J("ngIf",null==r.story?null:r.story.createdWithPrompts),t.xp6(2),t.Q6J("ngIf",r.storySaved),t.xp6(1),t.Q6J("ngIf",!r.storySaved)}}function Oi(a,h){1&a&&t._UZ(0,"i",35)}function ns(a,h){1&a&&t._UZ(0,"i",36)}function Rr(a,h){1&a&&(t.TgZ(0,"span",40),t._uU(1,"speech_to_text"),t.qZA())}function Dr(a,h){1&a&&(t.TgZ(0,"button",41),t._UZ(1,"i",42),t.qZA())}function rs(a,h){1&a&&(t.TgZ(0,"div"),t._UZ(1,"div",43),t.qZA())}const Ei=function(a){return{disableDiv:a}};function Ge(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",37),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(2);return c.dontToggle=!0,t.KtG(c.speakStory())}),t._uU(1),t.YNc(2,Rr,2,0,"span",38),t.YNc(3,Dr,2,0,"button",39),t.YNc(4,rs,2,0,"div",19),t.qZA()}if(2&a){const r=t.oxw(2);t.Q6J("ngClass",t.VKq(5,Ei,r.isTranscribing)),t.xp6(1),t.hij(" ",r.ts.l.speak," "),t.xp6(1),t.Q6J("ngIf",!r.isRecording),t.xp6(1),t.Q6J("ngIf",r.isRecording&&!r.isTranscribing),t.xp6(1),t.Q6J("ngIf",r.isTranscribing)}}function Br(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",44),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(2);return t.KtG(c.dontToggle=!0)}),t.TgZ(1,"button",45),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(2);return t.KtG(c.downloadStory())}),t._uU(2),t._UZ(3,"i",46),t.qZA()()}if(2&a){const r=t.oxw(2);t.xp6(1),t.s9C("href",r.downloadStoryUrl()),t.xp6(1),t.hij(" ",r.ts.l.download," ")}}function vn(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(2);return c.dontToggle=!0,t.KtG(c.goToRecording())}),t._uU(1),t._UZ(2,"i",48),t.qZA()}if(2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.recordings," ")}}function Ii(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(2);return c.dontToggle=!0,t.KtG(c.toggleRightDrawer("feedback"))}),t._uU(1),t._UZ(2,"i",49),t.qZA()}if(2&a){const r=t.oxw(2);t.ekj("optionsBtnClicked",r.rightDrawerOpened&&"feedback"==r.selectedDrawer),t.xp6(1),t.hij(" ",r.ts.l.feedback," ")}}function Pi(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(2);return c.dontToggle=!0,t.KtG(c.synthesisPlayer.toggleHidden())}),t._uU(1),t._UZ(2,"i",50),t.qZA()}if(2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.audio_check," ")}}function is(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(2);return c.dontToggle=!0,t.KtG(c.toggleRightDrawer("grammar"))}),t._uU(1),t._UZ(2,"i",51),t.qZA()}if(2&a){const r=t.oxw(2);t.ekj("optionsBtnClicked",r.rightDrawerOpened&&"grammar"==r.selectedDrawer),t.xp6(1),t.hij(" ",r.ts.l.grammar_errors," ")}}function os(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",47),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(2);return c.dontToggle=!0,t.KtG(c.toggleRightDrawer("dictionary"))}),t._uU(1),t._UZ(2,"i",52),t.qZA()}if(2&a){const r=t.oxw(2);t.ekj("optionsBtnClicked",r.rightDrawerOpened&&"dictionary"==r.selectedDrawer),t.xp6(1),t.hij(" ",r.ts.l.dictionary," ")}}function ss(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",27),t.NdJ("click",function(){t.CHM(r);const c=t.oxw();return t.KtG(c.toggleOptions())}),t.TgZ(1,"div",28),t.YNc(2,Oi,1,0,"i",29),t.YNc(3,ns,1,0,"i",30),t.qZA(),t.YNc(4,Ge,5,7,"div",31),t.YNc(5,Br,4,2,"div",32),t.YNc(6,vn,3,1,"div",33),t.YNc(7,Ii,3,3,"div",34),t.YNc(8,Pi,3,1,"div",33),t.YNc(9,is,3,3,"div",34),t.YNc(10,os,3,3,"div",34),t.qZA()}if(2&a){const r=t.oxw();t.xp6(2),t.Q6J("ngIf",!r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions&&r.hasFeedback),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions),t.xp6(1),t.Q6J("ngIf",r.showOptions)}}function as(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",53,54)(2,"mat-icon",55),t.NdJ("click",function(){t.CHM(r),t.oxw();const c=t.MAs(4);return t.KtG(c.toggle())}),t._uU(3,"menu"),t.qZA(),t.TgZ(4,"quill-editor",56),t.NdJ("ngModelChange",function(c){t.CHM(r);const _=t.oxw();return t.KtG(_.story.htmlText=c)})("onContentChanged",function(c){t.CHM(r);const _=t.oxw();return t.KtG(_.onContentChanged(c))})("onEditorCreated",function(c){t.CHM(r);const _=t.oxw();return t.KtG(_.onEditorCreated(c))}),t.qZA()()}if(2&a){const r=t.oxw();t.Q6J("ngStyle",r.quillEditorStyle),t.xp6(4),t.Q6J("modules",r.quillToolbar)("preserveWhitespace",!0)("debounceTime",1500)("ngModel",r.story.htmlText)}}function cs(a,h){1&a&&(t.TgZ(0,"div",57),t._uU(1," Click on the '+' button to create your first story! "),t.qZA())}function Xt(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"app-feedback-drawer",58),t.NdJ("closeFeedbackEmitter",function(){t.CHM(r);const c=t.oxw();return t.KtG(c.toggleRightDrawer("feedback"))}),t.qZA()}if(2&a){const r=t.oxw();t.Q6J("story",r.story)}}function us(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"app-dictionary-drawer",59),t.NdJ("closeDictionaryEmitter",function(){t.CHM(r);const c=t.oxw();return t.KtG(c.toggleRightDrawer("dictionary"))}),t.qZA()}}function ls(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"app-grammar-error-drawer",60),t.NdJ("closeGrammarEmitter",function(){t.CHM(r);const c=t.oxw();return t.KtG(c.toggleRightDrawer("grammar"))}),t.qZA()}if(2&a){const r=t.oxw();t.Q6J("quillHighlighter",r.quillHighlighter)("grammarLoaded",r.grammarLoaded)("grammarErrorsTypeDict",r.grammarErrorsTypeDict)("grammarErrors",r.grammarErrors)("checkBoxes",r.checkBoxes)}}Pt().register("modules/imageCompress",an());let Fr=(()=>{class a{constructor(r,o,c,_,D,G,X,se,z){this.ts=r,this.auth=o,this.storyService=c,this.recordAudioService=_,this.engagement=D,this.classroomService=G,this.dialog=X,this.http=se,this.router=z,this.stories=[],this.saveStoryDebounceId=0,this.mostRecentAttemptToSaveStory=new Date,this.storySaved=!0,this.storiesLoaded=!1,this.downloadStoryFormat=".pdf",this.hasFeedback=!1,this.updatedTitle="",this.grammarLoaded=!1,this.grammarErrors=[],this.showErrorTags=!1,this.grammarCheckerOptions={anGramadoir:hr,relativeClause:Ao,broadSlender:dr},this.checkBoxes={},this.grammarErrorsTypeDict={},this.showOptions=!0,this.dontToggle=!1,this.rightDrawerOpened=!1,this.selectedDrawer="grammar",this.words=[],this.wordCount=0,this.textUpdated=new Qe.x,this.quillToolbar={toolbar:[["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"],["image"]],imageCompress:{quality:.7,maxWidth:500,maxHeight:500,imageType:"image/png",debug:!1,suppressErrorLogging:!1,insertIntoEditor:void 0}},this.isRecording=!1,this.isTranscribing=!1,this.setUpGrammarChecking()}ngOnInit(){return(0,y.Z)(function*(){})()}setUpGrammarChecking(){var r=this;return(0,y.Z)(function*(){const o=r.auth.getUserDetails();if(!o)return;let c=yield(0,me.z)(r.classroomService.getClassroomOfStudent(o._id)),_=[];c&&c.grammarCheckers&&c.grammarCheckers.length>0?c.grammarCheckers.forEach(D=>{r.grammarCheckerOptions[D]&&_.push(r.grammarCheckerOptions[D])}):_=Object.values(r.grammarCheckerOptions),r.grammarEngine=new cr(_,r.http,r.auth),r.textUpdated.pipe((0,$r.x)()).subscribe((0,y.Z)(function*(){r.runGrammarCheck()}))})()}runGrammarCheck(){if(this.grammarLoaded=!1,this.story.text.replace(/\n/g," "))try{this.grammarErrors=[],this.grammarEngine.check$(this.story.text).subscribe({next:o=>{this.grammarErrors.push(o),this.showErrorTags&&this.quillHighlighter.show([(0,Me.j)(o)])},error:function(){},complete:()=>{if(this.quillHighlighter){this.grammarErrors&&this.grammarEngine.saveErrorsWithSentences(this.story._id).then(console.log,console.error),this.grammarErrorsTypeDict=this.grammarErrors.reduce(function(o,c){return o[c.type]||(o[c.type]=[]),o[c.type].push(c),o},{});for(const o of Object.keys(this.grammarErrorsTypeDict))this.checkBoxes[o]=!0;this.quillHighlighter.hideAll(),this.showErrorTags&&this.quillHighlighter.show(this.grammarErrors.filter(o=>this.checkBoxes[o.type]).map(Me.j)),this.grammarLoaded=!0}}})}catch(o){this.grammarErrors||window.alert("There was an error while trying to fetch grammar suggestions from the Gramad\xf3ir server:\n"+o.message+"\nSee the browser console for more information"),console.dir(o)}}toggleRightDrawer(r){this.rightDrawerOpened?this.selectedDrawer===r&&(this.rightDrawer.close(),this.rightDrawerOpened=!1):(this.rightDrawer.open(),this.rightDrawerOpened=!0),this.selectedDrawer=r,"grammar"==this.selectedDrawer&&this.rightDrawerOpened?(this.showErrorTags=!0,this.runGrammarCheck(),this.toggleGrammarTags()):(this.showErrorTags=!1,this.toggleGrammarTags())}setCurrentStory(r){this.story=r,this.story&&(this.storySaved=!0,this.updatedTitle=this.story.title,this.getWordCount(this.story.text),this.textUpdated.next(r.text))}onContentChanged(r){"user"===(this.story.text=r.text,this.getWordCount(r.text),r.source)&&(this.storySaved=!1,this.textUpdated.next(r.text),this.debounceSaveStory())}onEditorCreated(r){r.history.options.userOnly=!0,this.quillEditor=r,this.quillEditor.root.setAttribute("spellcheck","false"),r.focus(),this.quillHighlighter=new lr(this.quillEditor,this.ts,this.engagement)}getWordCount(r){if(!r)return 0;const o=r.replace(/[\t\n\r\.\?\!]/gm," ").split(" ");this.words=[],o.map(c=>{const _=c.trim();_.length>0&&this.words.push(_)}),this.wordCount=this.words.length}debounceSaveStory(){this.saveStoryDebounceId++;const r=this.saveStoryDebounceId,o=new Date;setTimeout(()=>{r===this.saveStoryDebounceId&&this.saveStory(r,o)},1e3)}saveStory(r,o){var c=this;return(0,y.Z)(function*(){const _=new Date;if(c.mostRecentAttemptToSaveStory=_,!c.story._id)return window.alert("Cannot save story. The id is not known");const D=c.stripGramadoirAttributesFromHtml((0,cn.clone)(c.story.htmlText)),G={title:c.story.title,dialect:c.story.dialect,text:c.story.text,htmlText:D,lastUpdated:o};c.engagement.addEventForLoggedInUser(N.tw["SAVE-STORY"],c.story);try{yield(0,me.z)(c.storyService.updateStory(G,c.story._id)),(r===c.saveStoryDebounceId||"modal"===r)&&(c.storySaved=!0)}catch(X){throw window.alert("Error while trying to save story: "+X.message),X}try{_===c.mostRecentAttemptToSaveStory&&(c.storySaved=!0)}catch(X){throw window.alert("Error setting storySaved to true: "+X.message),X}})()}stripGramadoirAttributesFromHtml(r){return r&&r.replace?r.replace(/\s*style="([^"])+"/g,"").replace(/\s*highlight-tag-type="([^"])+"/g,"").replace(/\s*highlight-tag="([^"])+"/g,""):""}toggleOptions(){this.dontToggle||(this.showOptions=!this.showOptions),this.dontToggle=!1}titleStyle(){return{"font-style":this.storySaved?"normal":"italic"}}updateStoryTitle(){this.updatedTitle!=this.story.title&&(this.storySaved=!1,this.story.title=this.updatedTitle,this.storyService.updateTitle(this.story._id,this.story.title).subscribe({next:()=>{this.storySaved=!0,console.log("title updated")},error:()=>console.log("error updating title")}))}downloadStory(){this.dialogRef=this.dialog.open(k.p,{data:{title:this.ts.l.download,type:"select",data:[this.story.title,[".pdf",".docx",".txt",".odt"]],confirmText:this.ts.l.download,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(r=>{this.dialogRef=void 0,r&&(this.downloadStoryFormat=r[1]?r[1]:".pdf",this.http.get(this.downloadStoryUrl(),{responseType:"blob"}).subscribe(o=>{const c=window.document.createElement("a");c.href=window.URL.createObjectURL(o),c.download=r[0]?r[0]:this.story.title,document.body.appendChild(c),c.click(),document.body.removeChild(c)}))})}downloadStoryUrl(){return Jt.Z.baseurl+"story/downloadStory/"+this.story._id+"/"+this.downloadStoryFormat}toggleGrammarTags(){var r=this;return(0,y.Z)(function*(){r.showErrorTags?r.quillHighlighter.show(r.grammarErrors.filter(o=>r.checkBoxes[o.type]).map(Me.j)):r.quillHighlighter.hideAll()})()}goToRecording(){this.router.navigateByUrl("/student/record-story/"+this.story._id)}speakStory(){var r=this;return(0,y.Z)(function*(){if(r.isRecording){r.isTranscribing=!0,r.recordAudioService.stopRecording();let o=yield r.recordAudioService.getAudioTranscription();if(r.isTranscribing=!1,o){let c=r.quillEditor.getSelection(!0);r.quillEditor.insertText(c.index,o+"."),r.story.text=r.quillEditor.getText(),r.story.htmlText=r.quillEditor.root.innerHTML,r.getWordCount(o),r.storySaved=!1,r.debounceSaveStory()}}else r.recordAudioService.recordAudio();r.isRecording=!r.isRecording})()}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(F.D),t.Y36(L.$),t.Y36(w.N),t.Y36(An.r),t.Y36(Q.M),t.Y36(W.u),t.Y36(p.uw),t.Y36(ci.eN),t.Y36(l.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-dashboard"]],viewQuery:function(r,o){if(1&r&&(t.Gf(Hn,5),t.Gf(jt,5)),2&r){let c;t.iGM(c=t.CRH())&&(o.rightDrawer=c.first),t.iGM(c=t.CRH())&&(o.synthesisPlayer=c.first)}},decls:18,vars:10,consts:[["class","storyTitleHeader",4,"ngIf"],["class","optionsBtnContainer",3,"click",4,"ngIf"],["autosize","",1,"bodyContainer"],["mode","side","opened","true",1,"storyListDrawer"],["storyDrawer",""],[3,"storyEmitter","hasFeedback","titleUpdated"],[1,"storyContainer"],["class","ql-container",3,"ngStyle",4,"ngIf","ngIfElse"],["newStoryMessage",""],["mode","side","position","end",1,"rightDrawer"],["rightDrawer",""],[3,"story","closeFeedbackEmitter",4,"ngIf"],[3,"closeDictionaryEmitter",4,"ngIf"],[3,"quillHighlighter","grammarLoaded","grammarErrorsTypeDict","grammarErrors","checkBoxes","closeGrammarEmitter",4,"ngIf"],[3,"text","storyId","storyTitle"],["mySynthesisPlayer",""],[1,"storyTitleHeader"],[1,"storyTitleContainer"],[1,"storyTitle",3,"ngStyle","size","ngModel","ngModelChange","blur"],[4,"ngIf"],["style","color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"saveIcon"],["class","savedIcon",4,"ngIf"],[2,"color","rgba(0, 0, 0, 0.4)"],[1,"savedIcon"],[1,"fas","fa-check"],[1,"fas","fa-save"],[1,"optionsBtnContainer",3,"click"],[1,"optionsBtn"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-right",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"ngClass","click",4,"ngIf"],["style","display: flex",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"click",4,"ngIf"],["class","optionsBtn optionsPopupBtn",3,"optionsBtnClicked","click",4,"ngIf"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-right"],[1,"optionsBtn","optionsPopupBtn",3,"ngClass","click"],["class","material-symbols-outlined optionsBtnIcon",4,"ngIf"],["class","notRecordingBtn blink",4,"ngIf"],[1,"material-symbols-outlined","optionsBtnIcon"],[1,"notRecordingBtn","blink"],[1,"fas","fa-stop-circle"],[1,"dot-flashing"],[2,"display","flex",3,"click"],["target","_blank",1,"optionsBtn","optionsPopupBtn",2,"text-decoration","none",3,"href","click"],[1,"fas","fa-download","optionsBtnIcon"],[1,"optionsBtn","optionsPopupBtn",3,"click"],[1,"fas","fa-microphone","optionsBtnIcon"],[1,"fas","fa-comment-dots","optionsBtnIcon"],[1,"fas","fa-volume-up","optionsBtnIcon"],[1,"fas","fa-spell-check","optionsBtnIcon"],[1,"fas","fa-book","optionsBtnIcon"],[1,"ql-container",3,"ngStyle"],["quillHeightSpan",""],[1,"menuButton",3,"click"],["placeholder","",3,"modules","preserveWhitespace","debounceTime","ngModel","ngModelChange","onContentChanged","onEditorCreated"],[1,"newStoryMessage"],[3,"story","closeFeedbackEmitter"],[3,"closeDictionaryEmitter"],[3,"quillHighlighter","grammarLoaded","grammarErrorsTypeDict","grammarErrors","checkBoxes","closeGrammarEmitter"]],template:function(r,o){if(1&r&&(t.YNc(0,Pr,8,7,"div",0),t.YNc(1,ss,11,9,"div",1),t.TgZ(2,"mat-drawer-container",2)(3,"mat-drawer",3,4)(5,"app-story-drawer",5,4),t.NdJ("storyEmitter",function(_){return o.setCurrentStory(_)})("hasFeedback",function(_){return o.hasFeedback=_})("titleUpdated",function(_){return o.updatedTitle=_}),t.qZA()(),t.TgZ(7,"div",6),t.YNc(8,as,5,5,"div",7),t.YNc(9,cs,2,0,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(11,"mat-drawer",9,10),t.YNc(13,Xt,1,1,"app-feedback-drawer",11),t.YNc(14,us,1,0,"app-dictionary-drawer",12),t.YNc(15,ls,1,5,"app-grammar-error-drawer",13),t.qZA()(),t._UZ(16,"app-synthesis-player",14,15)),2&r){const c=t.MAs(10);t.Q6J("ngIf",o.story),t.xp6(1),t.Q6J("ngIf",o.story),t.xp6(7),t.Q6J("ngIf",o.story)("ngIfElse",c),t.xp6(5),t.Q6J("ngIf","feedback"==o.selectedDrawer),t.xp6(1),t.Q6J("ngIf","dictionary"==o.selectedDrawer),t.xp6(1),t.Q6J("ngIf","grammar"==o.selectedDrawer),t.xp6(1),t.Q6J("text",null==o.story?null:o.story.text)("storyId",null==o.story?null:o.story._id)("storyTitle",null==o.story?null:o.story.title)}},dependencies:[R.mk,R.O5,R.PC,Te.Fj,Te.JJ,Te.On,Nn,wr,Un.Hw,pi.g6,mo,wt,Or,Xo,Ti],styles:[".storyTitleHeader{display:flex;justify-content:center;margin-top:-30px;padding-bottom:20px}.storyTitleContainer{margin:auto;overflow:auto;font-size:20px;font-weight:bolder}.storyTitle{border:1px solid transparent;text-align:center;resize:none}.storyTitle:hover{border:1px solid;border-radius:5px}.saveIcon{align-self:flex-end;white-space:nowrap;color:var(--dark-text);border-style:none;font-size:11pt;padding:5px}.savedIcon{color:var(--scealai-light-brown)}.optionsBtnContainer>*{height:2rem}.optionsBtnContainer{display:flex;justify-content:space-between;flex-wrap:wrap;--options-btn-background-color-hover: lightgray;margin-left:2%;margin-right:2%}.optionsBtn{background-color:var(--scealai-yellow);border-style:none;color:#464444;margin:0;border-radius:2px;display:flex;align-items:center;padding:5px;background:rgba(223,217,200,0)}.optionsBtn:hover{background-color:var(--options-btn-background-color-hover);color:#35322f;cursor:pointer;border-radius:2}.optionsPopupBtn{margin-right:4px}.optionsBtnIcon{margin-left:5px}.optionsBtnClicked{background-color:var(--options-btn-background-color-hover);color:#35322f;border-radius:2}.notRecordingBtn{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.bodyContainer{width:100%;height:100%}.storyListDrawer{padding:40px;max-width:35%;height:100%}.storyContainer{height:100%}.ql-container{background-color:#f8f9fa;height:100%}.ql-editor{background-color:#fff;z-index:1;margin-top:20px;font-size:14pt;font-family:Times New Roman,Times,serif;min-height:70vh!important;max-height:70vh!important}.menuButton{float:left;padding-left:10px;padding-top:5px;transform:scale(2);z-index:100}.menuButton:hover{cursor:pointer}.newStoryMessage{font-weight:bolder;max-width:200px;padding-top:50px;padding-bottom:50px;height:80vh;width:100%}.rightDrawer{width:25%;height:100%}.blink{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}\n",".custom-tooltip:before{content:none!important}.circle{display:inline-block;width:12px;height:12px;border-radius:6px}[data-selected]{margin:.3em}[highlight-tag]{text-decoration:underline;text-decoration-color:var(--highlight-error-red);text-decoration-thickness:3px;position:relative}span[highlight-tag]:hover{cursor:pointer}span:not[highlight-tag-type]{border-radius:0;padding-left:0;padding-right:0}\n",'.ql-editor{overflow-y:auto}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=times-new-roman]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=times-new-roman]:before{content:"Times New Roman";font-family:Times New Roman}.ql-font-times-new-roman{font-family:times new roman}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=arial]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=arial]:before{content:"Arial";font-family:arial}.ql-font-arial{font-family:arial}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=sans-serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=sans-serif]:before{content:"Sans Serif";font-family:"sans serif"}.ql-font-sans-serif{font-family:"sans serif"}.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{content:"Monospace";font-family:"monospace"}.ql-font-monospace{font-family:"monospace"}\n'],encapsulation:2}),a})(),Lr=(()=>{class a{constructor(r){this.sanitizer=r}transform(r){return this.sanitizer.bypassSecurityTrustHtml(r)}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(Dt.H7,16))},a.\u0275pipe=t.Yjl({name:"safeHtml",type:a,pure:!0}),a})();function Mt(a,h){if(1&a&&(t.TgZ(0,"div",14)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&a){const r=t.oxw();t.xp6(2),t.Oqu(r.ts.l.synthesising)}}function Gn(a,h){1&a&&(t._UZ(0,"span",18),t.ALo(1,"safeHtml")),2&a&&t.Q6J("innerHTML",t.lcZ(1,1,h.$implicit.outerHTML),t.oJD)}function ds(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(r);const c=t.oxw().$implicit,_=t.oxw(2);return t.KtG(_.stopSection(c))}),t._UZ(1,"i",20),t.qZA()}}function fs(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(r);const c=t.oxw().$implicit,_=t.oxw(2);return t.KtG(_.playSection(c))}),t._UZ(1,"i",21),t.qZA()}}function hs(a,h){if(1&a&&(t.TgZ(0,"div",2),t.YNc(1,Gn,2,3,"span",16),t.YNc(2,ds,2,0,"button",17),t.YNc(3,fs,2,0,"button",17),t.qZA()),2&a){const r=h.$implicit;t.xp6(1),t.Q6J("ngForOf",r.spans),t.xp6(1),t.Q6J("ngIf",!r.audio.paused),t.xp6(1),t.Q6J("ngIf",r.audio.paused)}}function $t(a,h){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,hs,4,3,"div",15),t.qZA()),2&a){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.chosenSections)}}function ot(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div")(1,"button",24),t._uU(2),t.qZA(),t.TgZ(3,"button",25),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(2);return t.KtG(c.changeSections(c.sentences))}),t._uU(4),t.qZA()()}if(2&a){const r=t.oxw(2);t.xp6(2),t.Oqu(r.ts.l.paragraph),t.xp6(2),t.Oqu(r.ts.l.sentence)}}function Ri(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div")(1,"button",25),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(2);return t.KtG(c.changeSections(c.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",24),t._uU(4),t.qZA()()}if(2&a){const r=t.oxw(2);t.xp6(2),t.Oqu(r.ts.l.paragraph),t.xp6(2),t.Oqu(r.ts.l.sentence)}}function ps(a,h){if(1&a&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t.qZA(),t.YNc(3,ot,5,2,"div",11),t.YNc(4,Ri,5,2,"div",11),t.qZA()),2&a){const r=t.oxw();t.xp6(2),t.hij(" ",r.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",r.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",r.isSentenceMode())}}let gs=(()=>{class a{constructor(r,o,c,_,D){this.storyService=r,this.route=o,this.router=c,this.ts=_,this.synthesis=D,this.paragraphs=[],this.sentences=[],this.audioFinishedLoading=!1}ngOnInit(){var r=this;return(0,y.Z)(function*(){r.storyId=r.route.snapshot.paramMap.get("id");let o=yield(0,me.z)(r.storyService.getStory(r.storyId));r.synthesis.synthesiseStory(o).then(([c,_])=>{r.paragraphs=c,r.sentences=_,r.chosenSections=r.paragraphs,r.audioFinishedLoading=!0})})()}isSentenceMode(){return this.chosenSections[0]instanceof qe.cj}isParagraphMode(){return this.chosenSections[0]instanceof qe.nv}changeSections(r){this.chosenSections=r,this.paragraphs.concat(this.sentences).forEach(c=>this.stopSection(c))}playSection(r){r.play(),r.highlight()}stopSection(r){r.stop(),r.removeHighlight()}goToDashboard(){this.router.navigateByUrl("/student/dashboard/"+this.storyId)}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(w.N),t.Y36(l.gz),t.Y36(l.F0),t.Y36(F.D),t.Y36(qe.cf))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-synthesis"]],decls:18,vars:5,consts:[["src","assets/img/book.png",1,"bookImg"],[1,"page"],[1,"paragraphContainer"],[1,"bookContainerSynth"],[1,"bookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"storyContainer"],[1,"storyHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],[4,"ngIf"],[1,"footer"],["class","btnContainer",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"btnContainer"],[1,"footerText"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"]],template:function(r,o){1&r&&(t._UZ(0,"img",0),t.TgZ(1,"div",1),t._UZ(2,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t.NdJ("click",function(){return o.goToDashboard()}),t._UZ(6,"i",6),t._uU(7),t.qZA(),t._UZ(8,"div"),t.qZA(),t.TgZ(9,"div",7)(10,"div",8),t._uU(11),t.qZA(),t.TgZ(12,"div")(13,"div",9),t.YNc(14,Mt,4,1,"div",10),t.YNc(15,$t,2,1,"div",11),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,ps,5,3,"div",13),t.qZA()()()()()),2&r&&(t.xp6(7),t.hij(" ",o.ts.l.story,""),t.xp6(4),t.hij(" ",o.ts.l.listen_and_correct," "),t.xp6(3),t.Q6J("ngIf",!o.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",o.audioFinishedLoading),t.xp6(2),t.Q6J("ngIf",o.audioFinishedLoading))},dependencies:[R.sg,R.O5,Yt.P,Lr],styles:['.bookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{display:inline;border-style:none;color:var(--dark-text);width:100px;font-size:12pt;padding-top:10px;padding-left:5%}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.storyContainer[_ngcontent-%COMP%]{margin-top:10px}.storyHeader[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px 4px 0 0;width:90%;margin-left:5%}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]:hover, .selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}@media only screen and (max-width: 700px){.bookImg[_ngcontent-%COMP%]{display:none}.bookContainerSynth[_ngcontent-%COMP%]{width:90%;margin-left:5%}}@media only screen and (min-width: 700px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:630px;left:50%;margin-left:-315px}.bookContainerSynth[_ngcontent-%COMP%]{width:490px;position:fixed;left:50%;margin-left:-245px;margin-top:20px}}@media only screen and (min-width: 1000px) and (min-height: 750px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:800px;height:600px;left:50%;margin-left:-400px}.bookContainerSynth[_ngcontent-%COMP%]{width:620px;height:510px;position:fixed;left:50%;margin-left:-310px;margin-top:20px}.textContainerSynth[_ngcontent-%COMP%]{height:390px}}@media only screen and (min-width: 1400px) and (min-height: 900px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1000px;height:740px;left:50%;margin-left:-500px}.bookContainerSynth[_ngcontent-%COMP%]{width:800px;height:600px;position:fixed;left:50%;margin-left:-400px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:480px}}@media only screen and (min-width: 1900px) and (min-height: 1000px){.bookImg[_ngcontent-%COMP%]{z-index:-10;width:1200px;height:850px;left:50%;margin-left:-600px}.bookContainerSynth[_ngcontent-%COMP%]{width:980px;height:730px;position:fixed;left:50%;margin-left:-490px;margin-top:30px}.textContainerSynth[_ngcontent-%COMP%]{height:610px}.myStoriesBtn[_ngcontent-%COMP%]{width:120px}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),a})();class _s{constructor(h,r=[],o=[],c=[],_=[],D=[],G=[]){this.paragraphAudioIds=r,this.paragraphIndices=o,this.paragraphTranscriptions=c,this.sentenceAudioIds=_,this.sentenceIndices=D,this.sentenceTranscriptions=G,this.storyData=h,this.date=new Date,this.archived=!1}}var ms=S(2754);function vs(a,h){1&a&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function Yn(a,h){if(1&a&&(t.TgZ(0,"div",16),t._uU(1),t._UZ(2,"i",17),t.qZA()),2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.saved," ")}}function x(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(2);return t.KtG(c.saveRecordings())}),t._uU(1),t._UZ(2,"i",19),t.qZA()}if(2&a){const r=t.oxw(2);t.xp6(1),t.hij(" ",r.ts.l.save," ")}}function E(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",8)(1,"div",9),t.NdJ("click",function(){t.CHM(r);const c=t.oxw();return t.KtG(c.goToDashboard())}),t._UZ(2,"i",10),t._uU(3),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.YNc(6,vs,2,0,"span",12),t.qZA(),t.TgZ(7,"div",13),t.YNc(8,Yn,3,1,"div",14),t.YNc(9,x,3,1,"div",15),t.qZA()()}if(2&a){const r=t.oxw();t.xp6(3),t.hij(" ",r.ts.l.story," "),t.xp6(2),t.hij(" ",null==r.story?null:r.story.title,""),t.xp6(1),t.Q6J("ngIf",!r.recordingSaved),t.xp6(2),t.Q6J("ngIf",r.recordingSaved),t.xp6(1),t.Q6J("ngIf",!r.recordingSaved)}}function O(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){t.CHM(r),t.oxw();const c=t.MAs(5);return t.KtG(c.toggle())}),t.TgZ(1,"mat-icon"),t._uU(2,"menu"),t.qZA(),t._uU(3),t.qZA()}if(2&a){const r=t.oxw();t.xp6(3),t.hij(" ",r.ts.l.archive," ")}}const H=function(a){return{"font-style":a}};function $(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div")(1,"div",21),t.NdJ("click",function(){const _=t.CHM(r).$implicit,D=t.oxw();return t.KtG(D.setCurrentRecording(_))}),t.TgZ(2,"div",22)(3,"div",23),t._uU(4),t.qZA()(),t.TgZ(5,"div",24),t._uU(6),t.ALo(7,"date"),t.qZA()(),t._UZ(8,"hr"),t.qZA()}if(2&a){const r=h.$implicit;t.xp6(1),t.uIk("id",r._id),t.xp6(2),t.Q6J("ngStyle",t.VKq(7,H,r.archived?"none":"italic")),t.xp6(1),t.hij(" ",null==r||null==r.storyData?null:r.storyData.title,""),t.xp6(2),t.hij(" ",t.xi3(7,4,r.date,"d/M/yy, h:mm a")," ")}}function ue(a,h){if(1&a&&(t.TgZ(0,"div",30)(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"grid-spinner"),t.qZA()),2&a){const r=t.oxw(2);t.xp6(2),t.Oqu(r.ts.l.synthesising)}}function Ae(a,h){1&a&&(t._UZ(0,"span",42),t.ALo(1,"safeHtml")),2&a&&t.Q6J("innerHTML",t.lcZ(1,1,h.$implicit.outerHTML),t.oJD)}function ge(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(r);const c=t.oxw().$implicit,_=t.oxw(3);return t.KtG(_.stopSection(c))}),t._UZ(1,"i",44),t.qZA()}}function Zr(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(r);const c=t.oxw().$implicit,_=t.oxw(3);return t.KtG(_.playSection(c))}),t._UZ(1,"i",45),t.qZA()}}function ys(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(r);const c=t.oxw().index,_=t.oxw(3);return t.KtG(_.recordAudio(c))}),t._UZ(1,"i",47),t.qZA()}}function je(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(r);const c=t.oxw().index,_=t.oxw(3);return t.KtG(_.stopRecording(c))}),t._UZ(1,"i",49),t.qZA()}}function Wn(a,h){1&a&&t._UZ(0,"hr",50)}function bs(a,h){1&a&&(t.TgZ(0,"div",51),t._UZ(1,"div",52),t.qZA())}function en(a,h){if(1&a&&(t.TgZ(0,"div",53)(1,"span",54),t._uU(2),t.qZA(),t.TgZ(3,"span",55),t._uU(4),t.qZA()()),2&a){const r=t.oxw().index,o=t.oxw(3);t.xp6(2),t.hij("",o.ts.l.speech_recognition_output," "),t.xp6(2),t.Oqu(o.sectionTranscriptions[r])}}function Jn(a,h){if(1&a&&t._UZ(0,"audio",59,60),2&a){const r=t.oxw(2).index,o=t.oxw(3);t.uIk("src",o.sectionAudioSources[r],t.LSH)}}function zn(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(2).index,_=t.oxw(3);return t.KtG(_.deleteRecording(c))}),t._UZ(1,"i",62),t.qZA()}}function de(a,h){if(1&a&&(t.TgZ(0,"div",56)(1,"div",54),t._uU(2),t.qZA(),t.YNc(3,Jn,2,1,"audio",57),t.YNc(4,zn,2,0,"button",58),t.qZA()),2&a){const r=t.oxw().index,o=t.oxw(3);t.xp6(2),t.Oqu(o.ts.l.your_recording),t.xp6(1),t.Q6J("ngIf",o.sectionAudioSources[r]),t.xp6(1),t.Q6J("ngIf",o.sectionAudioSources[r]&&!o.currentRecording.archived)}}function xs(a,h){if(1&a&&(t.TgZ(0,"div",32)(1,"div",33)(2,"div"),t.YNc(3,Ae,2,3,"span",34),t.YNc(4,ge,2,0,"button",35),t.YNc(5,Zr,2,0,"button",35),t.YNc(6,ys,2,0,"button",36),t.YNc(7,je,2,0,"button",37),t.qZA(),t.YNc(8,Wn,1,0,"hr",38),t.YNc(9,bs,2,0,"div",39),t.YNc(10,en,5,2,"div",40),t.YNc(11,de,5,3,"div",41),t.qZA()()),2&a){const r=h.$implicit,o=h.index,c=t.oxw(3);t.xp6(3),t.Q6J("ngForOf",r.spans),t.xp6(1),t.Q6J("ngIf",!r.audio.paused),t.xp6(1),t.Q6J("ngIf",r.audio.paused),t.xp6(1),t.Q6J("ngIf",!c.isRecording(r,o)&&!c.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",c.isRecording(r,o)&&!c.currentRecording.archived),t.xp6(1),t.Q6J("ngIf",c.sectionAudioSources[o]),t.xp6(1),t.Q6J("ngIf",c.isTranscribing[o]),t.xp6(1),t.Q6J("ngIf",c.sectionTranscriptions[o]),t.xp6(1),t.Q6J("ngIf",c.sectionAudioSources[o])}}function Di(a,h){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,xs,12,9,"div",31),t.qZA()),2&a){const r=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",r.chosenSections)}}function Qn(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div")(1,"button",67),t._uU(2),t.qZA(),t.TgZ(3,"button",68),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(3);return t.KtG(c.changeSections(c.sentences))}),t._uU(4),t.qZA()()}if(2&a){const r=t.oxw(3);t.xp6(2),t.hij(" ",r.ts.l.paragraph," "),t.xp6(2),t.hij(" ",r.ts.l.sentence," ")}}function ws(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"div")(1,"button",68),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(3);return t.KtG(c.changeSections(c.paragraphs))}),t._uU(2),t.qZA(),t.TgZ(3,"button",67),t._uU(4),t.qZA()()}if(2&a){const r=t.oxw(3);t.xp6(2),t.hij(" ",r.ts.l.paragraph," "),t.xp6(2),t.hij(" ",r.ts.l.sentence," ")}}function Cs(a,h){if(1&a){const r=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(r);const c=t.oxw(3);return t.KtG(c.archiveRecording())}),t._uU(1),t.qZA()}if(2&a){const r=t.oxw(3);t.xp6(1),t.hij(" ",r.ts.l.archive_recording," ")}}function Ms(a,h){if(1&a&&(t.TgZ(0,"div",63)(1,"div",64)(2,"div",65),t._uU(3),t.qZA(),t.YNc(4,Qn,5,2,"div",12),t.YNc(5,ws,5,2,"div",12),t.YNc(6,Cs,2,1,"button",66),t.qZA()()),2&a){const r=t.oxw(2);t.xp6(3),t.hij(" ",r.ts.l.listen_by," "),t.xp6(1),t.Q6J("ngIf",r.isParagraphMode()),t.xp6(1),t.Q6J("ngIf",r.isSentenceMode()),t.xp6(1),t.Q6J("ngIf",!r.currentRecording.archived&&r.currentRecording.storyData.text!=r.story.text)}}function Kn(a,h){if(1&a&&(t.TgZ(0,"div",25)(1,"div",26),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t.YNc(4,ue,4,1,"div",28),t.YNc(5,Di,2,1,"div",12),t.qZA(),t.YNc(6,Ms,7,4,"div",29),t.qZA()),2&a){const r=t.oxw();t.xp6(2),t.hij(" ",r.ts.l.listen_record_compare," "),t.xp6(2),t.Q6J("ngIf",!r.audioFinishedLoading&&!r.recordingsFinishedLoading),t.xp6(1),t.Q6J("ngIf",r.audioFinishedLoading),t.xp6(1),t.Q6J("ngIf",r.audioFinishedLoading)}}const Vn=[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"contents",component:po,canActivate:[b.P]},{path:"dashboard",component:Fr,canActivate:[b.P],canDeactivate:[g]},{path:"synthesis/:id",component:gs,canActivate:[b.P],canDeactivate:[T]},{path:"record-story/:id",component:(()=>{class a{constructor(r,o,c,_,D,G,X,se,z){this.storyService=r,this.ts=o,this.sanitizer=c,this.route=_,this.router=D,this.recordingService=G,this.synthesis=X,this.engagement=se,this.dialog=z,this.story=new M,this.paragraphs=[],this.sentences=[],this.isRecordingParagraph=[],this.isRecordingSentence=[],this.isRecordingSection=[],this.paragraphAudioSources=[],this.sentenceAudioSources=[],this.sectionAudioSources=[],this.paragraphBlobs=[],this.sentenceBlobs=[],this.sectionBlobs=[],this.paragraphChunks=[],this.sentenceChunks=[],this.sectionChunks=[],this.recordingSaved=!0,this.audioFinishedLoading=!1,this.url_ASR_API="https://phoneticsrv3.lcs.tcd.ie/asr_api/recognise",this.sentenceTranscriptions=[],this.paragraphTranscriptions=[],this.sectionTranscriptions=[],this.isTranscribing=[!1],this.recordings=[],this.currentRecording=null,this.lastClickedRecordingId=""}ngOnInit(){var r=this;return(0,y.Z)(function*(){r.chunks=[],r.sectionAudioSources=r.paragraphAudioSources,r.sectionBlobs=r.paragraphBlobs,r.sectionChunks=r.paragraphChunks,r.sectionTranscriptions=r.paragraphTranscriptions,r.isRecordingSection=r.isRecordingParagraph;const o=r.route.snapshot.paramMap.get("id");r.story=yield(0,me.z)(r.storyService.getStory(o)),(0,ms.TD)({audio:!0,video:!1}).then((0,y.Z)(function*(){r.story.activeRecording?r.loadRecordings():r.createNewRecording()})).catch(c=>{r.openMicRequestDialog()})})()}loadRecordings(){var r=this;return(0,y.Z)(function*(){r.recordings=yield(0,me.z)(r.recordingService.getRecordings(r.story._id)),r.recordings.sort((c,_)=>c.date>_.date?-1:1);let o=r.recordings.filter(c=>!1===c.archived);r.setCurrentRecording(o[0])})()}setCurrentRecording(r){this.currentRecording=r,this.loadSynthesis(this.currentRecording.storyData),this.loadAudio(this.currentRecording);let o=this.currentRecording._id,c=document.getElementById(o);c&&(this.lastClickedRecordingId&&document.getElementById(this.lastClickedRecordingId).classList.remove("clickedresultCard"),this.lastClickedRecordingId=o,c.classList.add("clickedresultCard"))}createNewRecording(){var r=this;return(0,y.Z)(function*(){const o=yield(0,me.z)(r.recordingService.create(new _s(r.story)));r.story=yield(0,me.z)(r.storyService.updateActiveRecording(r.story._id,o._id)),r.loadRecordings()})()}archiveRecording(){var r=this;return(0,y.Z)(function*(){yield(0,me.z)(r.recordingService.updateArchiveStatus(r.currentRecording._id)),r.createNewRecording()})()}loadSynthesis(r){this.synthesis.synthesiseStory(r).then(([o,c])=>{this.paragraphs=o,this.sentences=c,this.chosenSections=this.paragraphs,this.audioFinishedLoading=!0})}loadAudio(r){var o=this;return(0,y.Z)(function*(){o.audioFinishedLoading=!1,o.paragraphAudioSources=[],o.paragraphTranscriptions=[],o.sentenceAudioSources=[],o.sentenceTranscriptions=[],o.sectionAudioSources=[],o.sectionTranscriptions=[];for(let c=0;c<r.paragraphIndices.length;++c){let _=yield(0,me.z)(o.recordingService.getAudio(r.paragraphAudioIds[c]));o.paragraphBlobs[c]=_,o.paragraphAudioSources[r.paragraphIndices[c]]=o.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(_)),o.paragraphTranscriptions[r.paragraphIndices[c]]=r.paragraphTranscriptions[r.paragraphIndices[c]]}for(let c=0;c<r.sentenceIndices.length;++c){let _=yield(0,me.z)(o.recordingService.getAudio(r.sentenceAudioIds[c]));o.sentenceBlobs[c]=_,o.sentenceAudioSources[r.sentenceIndices[c]]=o.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(_)),o.sentenceTranscriptions[r.sentenceIndices[c]]=r.sentenceTranscriptions[r.sentenceIndices[c]]}o.sectionTranscriptions=o.paragraphTranscriptions,o.sectionAudioSources=o.paragraphAudioSources})()}recordAudio(r){this.engagement.addEventForLoggedInUser(N.tw["RECORD-STORY"],this.story),navigator.mediaDevices.getUserMedia({audio:!0}).then(c=>{this.stream=c,this.recorder=new MediaRecorder(this.stream),this.sectionChunks[r]=[],this.recorder.start(),this.isRecordingSection[r]=!0,this.recorder.ondataavailable=_=>{this.sectionChunks[r].push(_.data)}}).catch()}stopRecording(r){this.recorder.stop(),this.isRecordingSection[r]=!1,this.stream.getTracks().forEach(o=>o.stop()),setTimeout(()=>{const o=new Blob(this.sectionChunks[r],{type:"audio/mp3"});this.sectionBlobs[r]=o,this.sectionAudioSources[r]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(o)),this.recordingSaved=!1;const c=new FileReader;c.readAsDataURL(o),c.onloadend=function(){let _=c.result.split(";base64,")[1];this.getTranscription(_,r)}.bind(this)},500)}getTranscription(r,o){this.isTranscribing[o]=!0,this.isParagraphMode()&&(this.paragraphTranscriptions[o]=null),this.isSentenceMode()&&(this.sentenceTranscriptions[o]=null),fetch(this.url_ASR_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({recogniseBlob:r,developer:!0})}).then(_=>_.json()).then(_=>{let D=_.transcriptions[0].utterance;this.isParagraphMode()?(this.paragraphTranscriptions[o]=D,this.sectionTranscriptions[o]=this.paragraphTranscriptions[o]):this.isSentenceMode()&&(this.sentenceTranscriptions[o]=D,this.sectionTranscriptions[o]=this.sentenceTranscriptions[o]),this.isTranscribing[o]=!1})}deleteRecording(r){this.recordingSaved=!1,delete this.sectionAudioSources[r],delete this.sectionChunks[r],delete this.sectionBlobs[r],delete this.sectionTranscriptions[r]}saveRecordings(){var r=this;return(0,y.Z)(function*(){const o=Object.entries(r.paragraphBlobs).map(function(){var Re=(0,y.Z)(function*([Tt,At]){return r.recordingService.saveAudio(r.story._id,At,Tt).toPromise()});return function(Tt){return Re.apply(this,arguments)}}()),c=Object.entries(r.sentenceBlobs).map(function(){var Re=(0,y.Z)(function*([Tt,At]){return r.recordingService.saveAudio(r.story._id,At,Tt).toPromise()});return function(Tt){return Re.apply(this,arguments)}}()),_=yield Promise.all(o),D=yield Promise.all(c);let G=[],X=[];for(const Re of _)G.push(Re.index),X.push(Re.fileId);let se=[],z=[];for(const Re of D)se.push(Re.index),z.push(Re.fileId);const le={paragraphAudioIds:X,paragraphIndices:G,paragraphTranscriptions:r.paragraphTranscriptions,sentenceIndices:se,sentenceAudioIds:z,sentenceTranscriptions:r.sentenceTranscriptions};let we=yield(0,me.z)(r.recordingService.update(r.story.activeRecording,le));if(we){r.recordingSaved=!0;const Re=r.recordings.indexOf(r.currentRecording);r.recordings.splice(Re,1,we)}else alert("Error while saving audio")})()}isRecording(r,o){return r instanceof qe.cj?this.isRecordingSentence[o]:r instanceof qe.nv?this.isRecordingParagraph[o]:void 0}isSentenceMode(){return this.chosenSections[0]instanceof qe.cj}isParagraphMode(){return this.chosenSections[0]instanceof qe.nv}changeSections(r){this.chosenSections=r,this.paragraphs.concat(this.sentences).forEach(c=>this.stopSection(c)),this.isSentenceMode()?(this.sectionAudioSources=this.sentenceAudioSources,this.sectionBlobs=this.sentenceBlobs,this.sectionChunks=this.sentenceChunks,this.sectionTranscriptions=this.sentenceTranscriptions,this.isRecordingSection=this.isRecordingSentence):this.isParagraphMode()&&(this.sectionAudioSources=this.paragraphAudioSources,this.sectionBlobs=this.paragraphBlobs,this.sectionChunks=this.paragraphChunks,this.sectionTranscriptions=this.paragraphTranscriptions,this.isRecordingSection=this.isRecordingParagraph)}playSection(r){r.play(),r.highlight()}stopSection(r){r.stop(),r.removeHighlight()}goToDashboard(){this.router.navigateByUrl("student/dashboard")}openMicRequestDialog(){var r=this;this.dialogRef=this.dialog.open(k.p,{data:{title:this.ts.l.microphone_blocked,message:this.ts.l.page_requires_microphone,confirmText:this.ts.l.refresh,cancelText:this.ts.l.cancel},width:"50vh"}),this.dialogRef.afterClosed().subscribe(function(){var o=(0,y.Z)(function*(c){r.dialogRef=void 0,console.log(c),c?r.ngOnInit():r.goToDashboard()});return function(c){return o.apply(this,arguments)}}())}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(w.N),t.Y36(F.D),t.Y36(Dt.H7),t.Y36(l.gz),t.Y36(l.F0),t.Y36(Ie.s),t.Y36(qe.cf),t.Y36(Q.M),t.Y36(p.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-recording"]],decls:8,vars:4,consts:[[1,"content"],["class","recordingBookHeader",4,"ngIf"],["class","archiveButton",3,"click",4,"ngIf"],["autosize","",1,"archiveNavContainer"],["mode","side",1,"sidenav"],["drawer",""],[4,"ngFor","ngForOf"],["class","recordingStoryContainer",4,"ngIf"],[1,"recordingBookHeader"],[1,"myStoriesBtn",3,"click"],[1,"fa","fa-chevron-left"],[1,"bookTitle"],[4,"ngIf"],[1,"recordingSaveIcon"],["class","recordingSavedIcon",4,"ngIf"],["class","recordingUnsavedIcon",3,"click",4,"ngIf"],[1,"recordingSavedIcon"],[1,"fas","fa-check"],[1,"recordingUnsavedIcon",3,"click"],[1,"fas","fa-save"],[1,"archiveButton",3,"click"],[1,"contentSection",3,"click"],[1,"contentsLink"],[3,"ngStyle"],[1,"contentsDate"],[1,"recordingStoryContainer"],[1,"recordingStoryHeader"],[1,"textContainerSynth"],["class","loaderContainer",4,"ngIf"],["class","footer","style","padding-top: 10px",4,"ngIf"],[1,"loaderContainer"],["class","paragraphContainer",4,"ngFor","ngForOf"],[1,"paragraphContainer"],[1,"textCard"],[3,"innerHTML",4,"ngFor","ngForOf"],["class","playAudioBtn",3,"click",4,"ngIf"],["class","recordingBtn",3,"click",4,"ngIf"],["class","notRecordingBtn blink",3,"click",4,"ngIf"],["class","dividerLine",4,"ngIf"],["class","recognisedSpeechContainer",4,"ngIf"],["style","height: 40px",4,"ngIf"],["class","audioContainer",4,"ngIf"],[3,"innerHTML"],[1,"playAudioBtn",3,"click"],[1,"fas","fa-pause"],[1,"fa","fa-play"],[1,"recordingBtn",3,"click"],[1,"fas","fa-microphone"],[1,"notRecordingBtn","blink",3,"click"],[1,"fas","fa-stop-circle"],[1,"dividerLine"],[1,"recognisedSpeechContainer"],[1,"dot-flashing"],[2,"height","40px"],[2,"opacity","0.5"],[1,"recognisedSpeech"],[1,"audioContainer"],["controls","","class","audioPlayer",4,"ngIf"],["class","notRecordingBtn trashBtn",3,"click",4,"ngIf"],["controls","",1,"audioPlayer"],["audioTag",""],[1,"notRecordingBtn","trashBtn",3,"click"],[1,"fas","fa-trash-alt"],[1,"footer",2,"padding-top","10px"],[1,"btnContainer"],[1,"footerText"],["class","changeSplitBtn","style","margin-left: auto",3,"click",4,"ngIf"],[1,"changeSplitBtn","selectedBtn"],[1,"changeSplitBtn",3,"click"],[1,"changeSplitBtn",2,"margin-left","auto",3,"click"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t.YNc(1,E,10,5,"div",1),t.YNc(2,O,4,1,"div",2),t.TgZ(3,"mat-drawer-container",3)(4,"mat-drawer",4,5),t.YNc(6,$,9,9,"div",6),t.qZA(),t.YNc(7,Kn,7,4,"div",7),t.qZA()()),2&r&&(t.xp6(1),t.Q6J("ngIf",o.story),t.xp6(1),t.Q6J("ngIf",o.recordings.length>0),t.xp6(4),t.Q6J("ngForOf",o.recordings),t.xp6(1),t.Q6J("ngIf",o.story))},dependencies:[R.sg,R.O5,R.PC,Yt.P,Nn,wr,Un.Hw,R.uU,Lr],styles:['.content[_ngcontent-%COMP%]{width:90%;margin-left:5%;box-shadow:0 0 11px 2px #0006;border-radius:5px;border:solid 2px rgba(130,118,98,.7215686275)}.archiveNavContainer[_ngcontent-%COMP%]{height:70vh;background-color:#fff}.sidenav[_ngcontent-%COMP%]{padding:20px;width:20vw}.archiveButton[_ngcontent-%COMP%]{display:flex;margin-left:10px;margin-top:20px;font-size:16px}.archiveButton[_ngcontent-%COMP%]:hover, .contentSection[_ngcontent-%COMP%]:hover{cursor:pointer}.contentsLink[_ngcontent-%COMP%]{color:var(--dark-text);text-align:left;width:50%;text-decoration:none}.contentsLink[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.recordingStoryContainer[_ngcontent-%COMP%]{margin-top:20px;height:80%}.textContainerSynth[_ngcontent-%COMP%]{box-shadow:0 0 11px 2px #0006;margin-left:5%;width:90%;color:var(--dark-text);background-color:#f8f9fa;text-align:left;overflow:auto;height:100%}.recordingBookHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.myStoriesBtn[_ngcontent-%COMP%]{white-space:nowrap;display:inline;border-style:none;color:var(--dark-text);width:10rem;font-size:12pt;padding-top:10px}.myStoriesBtn[_ngcontent-%COMP%]:hover{color:var(--scealai-orange);cursor:pointer;transition:color .5s}.bookTitle[_ngcontent-%COMP%]{overflow:auto;color:var(--dark-text);margin-left:2em;margin-right:2em;display:inline-block;font-size:16pt}.recordingSaveIcon[_ngcontent-%COMP%]{width:10rem;color:var(--dark-text);border-style:none;font-size:11pt;padding-top:15px}.recordingSavedIcon[_ngcontent-%COMP%]{white-space:nowrap;color:var(--scealai-light-brown)}.recordingUnsavedIcon[_ngcontent-%COMP%]{background-color:var(--scealai-green);padding-left:6px;padding-right:6px;border-radius:5px;margin-top:-5px;color:#fff}.recordingUnsavedIcon[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);cursor:pointer;transition:.5s}.clickedresultCard[_ngcontent-%COMP%]{background-color:#eee;padding:10px;font-weight:700;border-radius:10px}.textCard[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-top:5px;margin-bottom:10px;border-radius:5px;box-shadow:0 0 5px 3px #00000038}.playAudioBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.playAudioBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.recordingBtn[_ngcontent-%COMP%]{background-color:var(--scealai-green);color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 10px;float:right}.recordingBtn[_ngcontent-%COMP%]:hover{background-color:var(--scealai-med-green);transition:.5s}.notRecordingBtn[_ngcontent-%COMP%]{background-color:red;color:#fff;border-radius:4px;border:none;margin-left:4px;font-size:10pt;padding:4px 8px;float:right}.recognisedSpeech[_ngcontent-%COMP%]{color:var(--scealai-green);font-style:italic;padding-left:5px}.audioContainer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.audioPlayer[_ngcontent-%COMP%]{width:25%;height:35px}.trashBtn[_ngcontent-%COMP%]{background-color:#be0a0a;font-size:12pt;padding-top:2px;padding-bottom:2px}.trashBtn[_ngcontent-%COMP%]:hover{background-color:#770505}.footerText[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12pt;margin-right:5px}.changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}.selectedBtn[_ngcontent-%COMP%]{background-color:var(--scealai-med-green)}.blink[_ngcontent-%COMP%]{animation:blinker 2s linear infinite}@keyframes blinker{0%{background-color:red}50%{background-color:#700}to{background-color:red}}@media only screen and (max-width: 350px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:10pt}}@media only screen and (max-width: 300px){.footerText[_ngcontent-%COMP%], .changeSplitBtn[_ngcontent-%COMP%]{font-size:8pt}}.paragraphContainer[_ngcontent-%COMP%]     .highlightable{position:relative}.paragraphContainer[_ngcontent-%COMP%]     .highlightable:before{content:"";height:22px;width:0%;background:var(--scealai-light-blue);position:absolute;transition:var(--trans)}.paragraphContainer[_ngcontent-%COMP%]     .highlight:before{width:100%}.paragraphContainer[_ngcontent-%COMP%]     .noHighlight:before{right:0;width:0%}.paragraphContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}.sentenceContainer[_ngcontent-%COMP%]     .wordBtn:hover{background:var(--scealai-light-blue-hover);cursor:pointer}']}),a})(),canActivate:[b.P],canDeactivate:[Z]}];let Bi=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[l.Bz.forChild(Vn),l.Bz]}),a})();var jn=S(3869);let Fi=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[R.ez,Bi,ti.LD,Te.u5,jn.F,hi,gi.ot,Un.Ps,Ve,pi.fi.forRoot({customOptions:[{import:"formats/font",whitelist:["sans-serif","serif","monospace","arial","times-new-roman"]}]})]}),a})()},7230:function(ze){ze.exports=function(J){var S={};function R(l){if(S[l])return S[l].exports;var b=S[l]={i:l,l:!1,exports:{}};return J[l].call(b.exports,b,b.exports,R),b.l=!0,b.exports}return R.m=J,R.c=S,R.d=function(l,b,k){R.o(l,b)||Object.defineProperty(l,b,{enumerable:!0,get:k})},R.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},R.t=function(l,b){if(1&b&&(l=R(l)),8&b||4&b&&"object"==typeof l&&l&&l.__esModule)return l;var k=Object.create(null);if(R.r(k),Object.defineProperty(k,"default",{enumerable:!0,value:l}),2&b&&"string"!=typeof l)for(var F in l)R.d(k,F,function(t){return l[t]}.bind(null,F));return k},R.n=function(l){var b=l&&l.__esModule?function(){return l.default}:function(){return l};return R.d(b,"a",b),b},R.o=function(l,b){return Object.prototype.hasOwnProperty.call(l,b)},R.p="",R(R.s=90)}({17:function(J,S,R){"use strict";S.__esModule=!0,S.default=void 0;var l=R(18),b=function(){function k(){}return k.getFirstMatch=function(F,t){var p=t.match(F);return p&&p.length>0&&p[1]||""},k.getSecondMatch=function(F,t){var p=t.match(F);return p&&p.length>1&&p[2]||""},k.matchAndReturnConst=function(F,t,p){if(F.test(t))return p},k.getWindowsVersionName=function(F){switch(F){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},k.getMacOSVersionName=function(F){var t=F.split(".").splice(0,2).map(function(p){return parseInt(p,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},k.getAndroidVersionName=function(F){var t=F.split(".").splice(0,2).map(function(p){return parseInt(p,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},k.getVersionPrecision=function(F){return F.split(".").length},k.compareVersions=function(F,t,p){void 0===p&&(p=!1);var g=k.getVersionPrecision(F),Z=k.getVersionPrecision(t),T=Math.max(g,Z),y=0,A=k.map([F,t],function(M){var w=T-k.getVersionPrecision(M),L=M+new Array(w+1).join(".0");return k.map(L.split("."),function(N){return new Array(20-N.length).join("0")+N}).reverse()});for(p&&(y=T-Math.min(g,Z)),T-=1;T>=y;){if(A[0][T]>A[1][T])return 1;if(A[0][T]===A[1][T]){if(T===y)return 0;T-=1}else if(A[0][T]<A[1][T])return-1}},k.map=function(F,t){var p,g=[];if(Array.prototype.map)return Array.prototype.map.call(F,t);for(p=0;p<F.length;p+=1)g.push(t(F[p]));return g},k.find=function(F,t){var p,g;if(Array.prototype.find)return Array.prototype.find.call(F,t);for(p=0,g=F.length;p<g;p+=1){var Z=F[p];if(t(Z,p))return Z}},k.assign=function(F){for(var t,p,g=F,Z=arguments.length,T=new Array(Z>1?Z-1:0),y=1;y<Z;y++)T[y-1]=arguments[y];if(Object.assign)return Object.assign.apply(Object,[F].concat(T));var A=function(){var M=T[t];"object"==typeof M&&null!==M&&Object.keys(M).forEach(function(w){g[w]=M[w]})};for(t=0,p=T.length;t<p;t+=1)A();return F},k.getBrowserAlias=function(F){return l.BROWSER_ALIASES_MAP[F]},k.getBrowserTypeByAlias=function(F){return l.BROWSER_MAP[F]||""},k}();S.default=b,J.exports=S.default},18:function(J,S,R){"use strict";S.__esModule=!0,S.ENGINE_MAP=S.OS_MAP=S.PLATFORMS_MAP=S.BROWSER_MAP=S.BROWSER_ALIASES_MAP=void 0,S.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},S.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},S.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},S.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},S.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(J,S,R){"use strict";S.__esModule=!0,S.default=void 0;var l,b=(l=R(91))&&l.__esModule?l:{default:l},k=R(18);function F(p,g){for(var Z=0;Z<g.length;Z++){var T=g[Z];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(p,T.key,T)}}var t=function(){function p(){}var g,T;return p.getParser=function(y,A){if(void 0===A&&(A=!1),"string"!=typeof y)throw new Error("UserAgent should be a string");return new b.default(y,A)},p.parse=function(y){return new b.default(y).getResult()},g=p,T=[{key:"BROWSER_MAP",get:function(){return k.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return k.ENGINE_MAP}},{key:"OS_MAP",get:function(){return k.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return k.PLATFORMS_MAP}}],null&&F(g.prototype,null),T&&F(g,T),p}();S.default=t,J.exports=S.default},91:function(J,S,R){"use strict";S.__esModule=!0,S.default=void 0;var l=p(R(92)),b=p(R(93)),k=p(R(94)),F=p(R(95)),t=p(R(17));function p(Z){return Z&&Z.__esModule?Z:{default:Z}}var g=function(){function Z(y,A){if(void 0===A&&(A=!1),null==y||""===y)throw new Error("UserAgent parameter can't be empty");this._ua=y,this.parsedResult={},!0!==A&&this.parse()}var T=Z.prototype;return T.getUA=function(){return this._ua},T.test=function(y){return y.test(this._ua)},T.parseBrowser=function(){var y=this;this.parsedResult.browser={};var A=t.default.find(l.default,function(M){if("function"==typeof M.test)return M.test(y);if(M.test instanceof Array)return M.test.some(function(w){return y.test(w)});throw new Error("Browser's test function is not valid")});return A&&(this.parsedResult.browser=A.describe(this.getUA())),this.parsedResult.browser},T.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},T.getBrowserName=function(y){return y?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},T.getBrowserVersion=function(){return this.getBrowser().version},T.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},T.parseOS=function(){var y=this;this.parsedResult.os={};var A=t.default.find(b.default,function(M){if("function"==typeof M.test)return M.test(y);if(M.test instanceof Array)return M.test.some(function(w){return y.test(w)});throw new Error("Browser's test function is not valid")});return A&&(this.parsedResult.os=A.describe(this.getUA())),this.parsedResult.os},T.getOSName=function(y){var A=this.getOS().name;return y?String(A).toLowerCase()||"":A||""},T.getOSVersion=function(){return this.getOS().version},T.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},T.getPlatformType=function(y){void 0===y&&(y=!1);var A=this.getPlatform().type;return y?String(A).toLowerCase()||"":A||""},T.parsePlatform=function(){var y=this;this.parsedResult.platform={};var A=t.default.find(k.default,function(M){if("function"==typeof M.test)return M.test(y);if(M.test instanceof Array)return M.test.some(function(w){return y.test(w)});throw new Error("Browser's test function is not valid")});return A&&(this.parsedResult.platform=A.describe(this.getUA())),this.parsedResult.platform},T.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},T.getEngineName=function(y){return y?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},T.parseEngine=function(){var y=this;this.parsedResult.engine={};var A=t.default.find(F.default,function(M){if("function"==typeof M.test)return M.test(y);if(M.test instanceof Array)return M.test.some(function(w){return y.test(w)});throw new Error("Browser's test function is not valid")});return A&&(this.parsedResult.engine=A.describe(this.getUA())),this.parsedResult.engine},T.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},T.getResult=function(){return t.default.assign({},this.parsedResult)},T.satisfies=function(y){var A=this,M={},w=0,L={},N=0;if(Object.keys(y).forEach(function(_e){var me=y[_e];"string"==typeof me?(L[_e]=me,N+=1):"object"==typeof me&&(M[_e]=me,w+=1)}),w>0){var Q=Object.keys(M),te=t.default.find(Q,function(_e){return A.isOS(_e)});if(te){var q=this.satisfies(M[te]);if(void 0!==q)return q}var W=t.default.find(Q,function(_e){return A.isPlatform(_e)});if(W){var fe=this.satisfies(M[W]);if(void 0!==fe)return fe}}if(N>0){var Ie=Object.keys(L),Pe=t.default.find(Ie,function(_e){return A.isBrowser(_e,!0)});if(void 0!==Pe)return this.compareVersion(L[Pe])}},T.isBrowser=function(y,A){void 0===A&&(A=!1);var M=this.getBrowserName().toLowerCase(),w=y.toLowerCase(),L=t.default.getBrowserTypeByAlias(w);return A&&L&&(w=L.toLowerCase()),w===M},T.compareVersion=function(y){var A=[0],M=y,w=!1,L=this.getBrowserVersion();if("string"==typeof L)return">"===y[0]||"<"===y[0]?(M=y.substr(1),"="===y[1]?(w=!0,M=y.substr(2)):A=[],A.push(">"===y[0]?1:-1)):"="===y[0]?M=y.substr(1):"~"===y[0]&&(w=!0,M=y.substr(1)),A.indexOf(t.default.compareVersions(L,M,w))>-1},T.isOS=function(y){return this.getOSName(!0)===String(y).toLowerCase()},T.isPlatform=function(y){return this.getPlatformType(!0)===String(y).toLowerCase()},T.isEngine=function(y){return this.getEngineName(!0)===String(y).toLowerCase()},T.is=function(y,A){return void 0===A&&(A=!1),this.isBrowser(y,A)||this.isOS(y)||this.isPlatform(y)},T.some=function(y){var A=this;return void 0===y&&(y=[]),y.some(function(M){return A.is(M)})},Z}();S.default=g,J.exports=S.default},92:function(J,S,R){"use strict";S.__esModule=!0,S.default=void 0;var l,b=(l=R(17))&&l.__esModule?l:{default:l},k=/version\/(\d+(\.?_?\d+)+)/i;S.default=[{test:[/googlebot/i],describe:function(t){var p={name:"Googlebot"},g=b.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/opera/i],describe:function(t){var p={name:"Opera"},g=b.default.getFirstMatch(k,t)||b.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/opr\/|opios/i],describe:function(t){var p={name:"Opera"},g=b.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/SamsungBrowser/i],describe:function(t){var p={name:"Samsung Internet for Android"},g=b.default.getFirstMatch(k,t)||b.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/Whale/i],describe:function(t){var p={name:"NAVER Whale Browser"},g=b.default.getFirstMatch(k,t)||b.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/MZBrowser/i],describe:function(t){var p={name:"MZ Browser"},g=b.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/focus/i],describe:function(t){var p={name:"Focus"},g=b.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/swing/i],describe:function(t){var p={name:"Swing"},g=b.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/coast/i],describe:function(t){var p={name:"Opera Coast"},g=b.default.getFirstMatch(k,t)||b.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var p={name:"Opera Touch"},g=b.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/yabrowser/i],describe:function(t){var p={name:"Yandex Browser"},g=b.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/ucbrowser/i],describe:function(t){var p={name:"UC Browser"},g=b.default.getFirstMatch(k,t)||b.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/Maxthon|mxios/i],describe:function(t){var p={name:"Maxthon"},g=b.default.getFirstMatch(k,t)||b.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/epiphany/i],describe:function(t){var p={name:"Epiphany"},g=b.default.getFirstMatch(k,t)||b.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/puffin/i],describe:function(t){var p={name:"Puffin"},g=b.default.getFirstMatch(k,t)||b.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/sleipnir/i],describe:function(t){var p={name:"Sleipnir"},g=b.default.getFirstMatch(k,t)||b.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/k-meleon/i],describe:function(t){var p={name:"K-Meleon"},g=b.default.getFirstMatch(k,t)||b.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/micromessenger/i],describe:function(t){var p={name:"WeChat"},g=b.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/qqbrowser/i],describe:function(t){var p={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},g=b.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/msie|trident/i],describe:function(t){var p={name:"Internet Explorer"},g=b.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/\sedg\//i],describe:function(t){var p={name:"Microsoft Edge"},g=b.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/edg([ea]|ios)/i],describe:function(t){var p={name:"Microsoft Edge"},g=b.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/vivaldi/i],describe:function(t){var p={name:"Vivaldi"},g=b.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/seamonkey/i],describe:function(t){var p={name:"SeaMonkey"},g=b.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/sailfish/i],describe:function(t){var p={name:"Sailfish"},g=b.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return g&&(p.version=g),p}},{test:[/silk/i],describe:function(t){var p={name:"Amazon Silk"},g=b.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/phantom/i],describe:function(t){var p={name:"PhantomJS"},g=b.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/slimerjs/i],describe:function(t){var p={name:"SlimerJS"},g=b.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var p={name:"BlackBerry"},g=b.default.getFirstMatch(k,t)||b.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var p={name:"WebOS Browser"},g=b.default.getFirstMatch(k,t)||b.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/bada/i],describe:function(t){var p={name:"Bada"},g=b.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/tizen/i],describe:function(t){var p={name:"Tizen"},g=b.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/qupzilla/i],describe:function(t){var p={name:"QupZilla"},g=b.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var p={name:"Firefox"},g=b.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/electron/i],describe:function(t){var p={name:"Electron"},g=b.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/MiuiBrowser/i],describe:function(t){var p={name:"Miui"},g=b.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/chromium/i],describe:function(t){var p={name:"Chromium"},g=b.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/chrome|crios|crmo/i],describe:function(t){var p={name:"Chrome"},g=b.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/GSA/i],describe:function(t){var p={name:"Google Search"},g=b.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:function(t){var p=!t.test(/like android/i),g=t.test(/android/i);return p&&g},describe:function(t){var p={name:"Android Browser"},g=b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/playstation 4/i],describe:function(t){var p={name:"PlayStation 4"},g=b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/safari|applewebkit/i],describe:function(t){var p={name:"Safari"},g=b.default.getFirstMatch(k,t);return g&&(p.version=g),p}},{test:[/.*/i],describe:function(t){var p=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:b.default.getFirstMatch(p,t),version:b.default.getSecondMatch(p,t)}}}],J.exports=S.default},93:function(J,S,R){"use strict";S.__esModule=!0,S.default=void 0;var l,b=(l=R(17))&&l.__esModule?l:{default:l},k=R(18);S.default=[{test:[/Roku\/DVP/],describe:function(t){var p=b.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:k.OS_MAP.Roku,version:p}}},{test:[/windows phone/i],describe:function(t){var p=b.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:k.OS_MAP.WindowsPhone,version:p}}},{test:[/windows /i],describe:function(t){var p=b.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),g=b.default.getWindowsVersionName(p);return{name:k.OS_MAP.Windows,version:p,versionName:g}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var p={name:k.OS_MAP.iOS},g=b.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return g&&(p.version=g),p}},{test:[/macintosh/i],describe:function(t){var p=b.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),g=b.default.getMacOSVersionName(p),Z={name:k.OS_MAP.MacOS,version:p};return g&&(Z.versionName=g),Z}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var p=b.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:k.OS_MAP.iOS,version:p}}},{test:function(t){var p=!t.test(/like android/i),g=t.test(/android/i);return p&&g},describe:function(t){var p=b.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),g=b.default.getAndroidVersionName(p),Z={name:k.OS_MAP.Android,version:p};return g&&(Z.versionName=g),Z}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var p=b.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),g={name:k.OS_MAP.WebOS};return p&&p.length&&(g.version=p),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var p=b.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||b.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||b.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:k.OS_MAP.BlackBerry,version:p}}},{test:[/bada/i],describe:function(t){var p=b.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:k.OS_MAP.Bada,version:p}}},{test:[/tizen/i],describe:function(t){var p=b.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:k.OS_MAP.Tizen,version:p}}},{test:[/linux/i],describe:function(){return{name:k.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:k.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var p=b.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:k.OS_MAP.PlayStation4,version:p}}}],J.exports=S.default},94:function(J,S,R){"use strict";S.__esModule=!0,S.default=void 0;var l,b=(l=R(17))&&l.__esModule?l:{default:l},k=R(18);S.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var p=b.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",g={type:k.PLATFORMS_MAP.mobile,vendor:"Huawei"};return p&&(g.model=p),g}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:k.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:k.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:k.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:k.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:k.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:k.PLATFORMS_MAP.tablet}}},{test:function(t){var p=t.test(/ipod|iphone/i),g=t.test(/like (ipod|iphone)/i);return p&&!g},describe:function(t){var p=b.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:k.PLATFORMS_MAP.mobile,vendor:"Apple",model:p}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:k.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:k.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:k.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:k.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:k.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var p=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&p>=3},describe:function(){return{type:k.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:k.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:k.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:k.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:k.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:k.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:k.PLATFORMS_MAP.tv}}}],J.exports=S.default},95:function(J,S,R){"use strict";S.__esModule=!0,S.default=void 0;var l,b=(l=R(17))&&l.__esModule?l:{default:l},k=R(18);S.default=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:k.ENGINE_MAP.Blink};var p=b.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:k.ENGINE_MAP.EdgeHTML,version:p}}},{test:[/trident/i],describe:function(t){var p={name:k.ENGINE_MAP.Trident},g=b.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:function(t){return t.test(/presto/i)},describe:function(t){var p={name:k.ENGINE_MAP.Presto},g=b.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:function(t){var p=t.test(/gecko/i),g=t.test(/like gecko/i);return p&&!g},describe:function(t){var p={name:k.ENGINE_MAP.Gecko},g=b.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:k.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var p={name:k.ENGINE_MAP.WebKit},g=b.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return g&&(p.version=g),p}}],J.exports=S.default}})},7489:function(ze,J,S){var R;ze=S.nmd(ze),function(){var l,t="Expected a function",g="__lodash_hash_undefined__",T="__lodash_placeholder__",It=1/0,yt=9007199254740991,lt=4294967295,$r=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Wt="[object Arguments]",Pt="[object Array]",an="[object Boolean]",cn="[object Date]",An="[object Error]",qe="[object Function]",ei="[object GeneratorFunction]",nt="[object Map]",zt="[object Number]",De="[object Object]",ni="[object Promise]",un="[object RegExp]",rt="[object Set]",ln="[object String]",kn="[object Symbol]",dn="[object WeakMap]",fn="[object ArrayBuffer]",Qt="[object DataView]",sr="[object Float32Array]",ar="[object Float64Array]",On="[object Int8Array]",cr="[object Int16Array]",En="[object Int32Array]",ur="[object Uint8Array]",lr="[object Uint8ClampedArray]",Me="[object Uint16Array]",dr="[object Uint32Array]",In=/\b__p \+= '';/g,Pn=/\b(__p \+=) '' \+/g,yo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ri=/&(?:amp|lt|gt|quot|#39);/g,ii=/[&<>"']/g,fr=RegExp(ri.source),bo=RegExp(ii.source),xo=/<%-([\s\S]+?)%>/g,wo=/<%([\s\S]+?)%>/g,oi=/<%=([\s\S]+?)%>/g,si=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Co=/^\w*$/,ma=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rn=/[\\^$.*+?()[\]{}|]/g,Mo=RegExp(Rn.source),hr=/^\s+/,So=/\s/,pr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ai=/\{\n\/\* \[wrapped with (.+)\] \*/,gr=/,? & /,To=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ao=/[()=,{}\[\]\/\s]/,ko=/\\(\\)?/g,Oo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dn=/\w*$/,Eo=/^[-+]0x[0-9a-f]+$/i,_r=/^0b[01]+$/i,Io=/^\[object .+?Constructor\]$/,ci=/^0o[0-7]+$/i,bt=/^(?:0|[1-9]\d*)$/,xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hn=/($^)/,Rt=/['\n\r\u2028\u2029\\]/g,Ze="\\ud800-\\udfff",it="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",mr="\\u2700-\\u27bf",vr="a-z\\xdf-\\xf6\\xf8-\\xff",ve="A-Z\\xc0-\\xd6\\xd8-\\xde",yr="\\ufe0e\\ufe0f",li="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Do="["+Ze+"]",di="["+li+"]",Fn="["+it+"]",Bo="\\d+",va="["+mr+"]",Fo="["+vr+"]",Lo="[^"+Ze+li+Bo+mr+vr+ve+"]",fi="\\ud83c[\\udffb-\\udfff]",No="[^"+Ze+"]",xr="(?:\\ud83c[\\udde6-\\uddff]){2}",Ln="[\\ud800-\\udbff][\\udc00-\\udfff]",Kt="["+ve+"]",Nn="(?:"+Fo+"|"+Lo+")",wr="(?:"+Kt+"|"+Lo+")",Uo="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",qo="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ho="(?:"+Fn+"|"+fi+")?",hi="["+yr+"]?",_n=hi+Ho+"(?:\\u200d(?:"+[No,xr,Ln].join("|")+")"+hi+Ho+")*",_i="(?:"+[va,xr,Ln].join("|")+")"+_n,mi="(?:"+[No+Fn+"?",Fn,xr,Ln,Do].join("|")+")",vi=RegExp("['\u2019]","g"),yi=RegExp(Fn,"g"),Cr=RegExp(fi+"(?="+fi+")|"+mi+_n,"g"),qn=RegExp([Kt+"?"+Fo+"+"+Uo+"(?="+[di,Kt,"$"].join("|")+")",wr+"+"+qo+"(?="+[di,Kt+Nn,"$"].join("|")+")",Kt+"?"+Nn+"+"+Uo,Kt+"+"+qo,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Bo,_i].join("|"),"g"),Go=RegExp("[\\u200d"+Ze+it+yr+"]"),Yo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wo=-1,he={};he[sr]=he[ar]=he[On]=he[cr]=he[En]=he[ur]=he[lr]=he[Me]=he[dr]=!0,he[Wt]=he[Pt]=he[fn]=he[an]=he[Qt]=he[cn]=he[An]=he[qe]=he[nt]=he[zt]=he[De]=he[un]=he[rt]=he[ln]=he[dn]=!1;var ye={};ye[Wt]=ye[Pt]=ye[fn]=ye[Qt]=ye[an]=ye[cn]=ye[sr]=ye[ar]=ye[On]=ye[cr]=ye[En]=ye[nt]=ye[zt]=ye[De]=ye[un]=ye[rt]=ye[ln]=ye[kn]=ye[ur]=ye[lr]=ye[Me]=ye[dr]=!0,ye[An]=ye[qe]=ye[dn]=!1;var xa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wa=parseFloat,Ca=parseInt,zo="object"==typeof global&&global&&global.Object===Object&&global,Mr="object"==typeof self&&self&&self.Object===Object&&self,Be=zo||Mr||Function("return this")(),mn=J&&!J.nodeType&&J,Vt=mn&&ze&&!ze.nodeType&&ze,xi=Vt&&Vt.exports===mn,Sr=xi&&zo.process,Fe=function(){try{return Vt&&Vt.require&&Vt.require("util").types||Sr&&Sr.binding&&Sr.binding("util")}catch{}}(),wi=Fe&&Fe.isArrayBuffer,Tr=Fe&&Fe.isDate,Ci=Fe&&Fe.isMap,Mi=Fe&&Fe.isRegExp,Qo=Fe&&Fe.isSet,Ar=Fe&&Fe.isTypedArray;function He(x,E,O){switch(O.length){case 0:return x.call(E);case 1:return x.call(E,O[0]);case 2:return x.call(E,O[0],O[1]);case 3:return x.call(E,O[0],O[1],O[2])}return x.apply(E,O)}function Ko(x,E,O,H){for(var $=-1,ue=null==x?0:x.length;++$<ue;){var Ae=x[$];E(H,Ae,O(Ae),x)}return H}function Ve(x,E){for(var O=-1,H=null==x?0:x.length;++O<H&&!1!==E(x[O],O,x););return x}function Vo(x,E){for(var O=null==x?0:x.length;O--&&!1!==E(x[O],O,x););return x}function Si(x,E){for(var O=-1,H=null==x?0:x.length;++O<H;)if(!E(x[O],O,x))return!1;return!0}function wt(x,E){for(var O=-1,H=null==x?0:x.length,$=0,ue=[];++O<H;){var Ae=x[O];E(Ae,O,x)&&(ue[$++]=Ae)}return ue}function Dt(x,E){return!(null==x||!x.length)&&jt(x,E,0)>-1}function kr(x,E,O){for(var H=-1,$=null==x?0:x.length;++H<$;)if(O(E,x[H]))return!0;return!1}function be(x,E){for(var O=-1,H=null==x?0:x.length,$=Array(H);++O<H;)$[O]=E(x[O],O,x);return $}function Ct(x,E){for(var O=-1,H=E.length,$=x.length;++O<H;)x[$+O]=E[O];return x}function Or(x,E,O,H){var $=-1,ue=null==x?0:x.length;for(H&&ue&&(O=x[++$]);++$<ue;)O=E(O,x[$],$,x);return O}function jo(x,E,O,H){var $=null==x?0:x.length;for(H&&$&&(O=x[--$]);$--;)O=E(O,x[$],$,x);return O}function Er(x,E){for(var O=-1,H=null==x?0:x.length;++O<H;)if(E(x[O],O,x))return!0;return!1}var Xo=Ir("length");function Ti(x,E,O){var H;return O(x,function($,ue,Ae){if(E($,ue,Ae))return H=ue,!1}),H}function Hn(x,E,O,H){for(var $=x.length,ue=O+(H?1:-1);H?ue--:++ue<$;)if(E(x[ue],ue,x))return ue;return-1}function jt(x,E,O){return E==E?function fs(x,E,O){for(var H=O-1,$=x.length;++H<$;)if(x[H]===E)return H;return-1}(x,E,O):Hn(x,Ai,O)}function ts(x,E,O,H){for(var $=O-1,ue=x.length;++$<ue;)if(H(x[$],E))return $;return-1}function Ai(x){return x!=x}function ki(x,E){var O=null==x?0:x.length;return O?Rr(x,E)/O:NaN}function Ir(x){return function(E){return null==E?l:E[x]}}function Pr(x){return function(E){return null==x?l:x[E]}}function Oi(x,E,O,H,$){return $(x,function(ue,Ae,ge){O=H?(H=!1,ue):E(O,ue,Ae,ge)}),O}function Rr(x,E){for(var O,H=-1,$=x.length;++H<$;){var ue=E(x[H]);ue!==l&&(O=O===l?ue:O+ue)}return O}function Dr(x,E){for(var O=-1,H=Array(x);++O<x;)H[O]=E(O);return H}function Ei(x){return x&&x.slice(0,Ri(x)+1).replace(hr,"")}function Ge(x){return function(E){return x(E)}}function Br(x,E){return be(E,function(O){return x[O]})}function vn(x,E){return x.has(E)}function Ii(x,E){for(var O=-1,H=x.length;++O<H&&jt(E,x[O],0)>-1;);return O}function Pi(x,E){for(var O=x.length;O--&&jt(E,x[O],0)>-1;);return O}function is(x,E){for(var O=x.length,H=0;O--;)x[O]===E&&++H;return H}var os=Pr({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),ss=Pr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function as(x){return"\\"+xa[x]}function Xt(x){return Go.test(x)}function Fr(x){var E=-1,O=Array(x.size);return x.forEach(function(H,$){O[++E]=[$,H]}),O}function Lr(x,E){return function(O){return x(E(O))}}function Mt(x,E){for(var O=-1,H=x.length,$=0,ue=[];++O<H;){var Ae=x[O];(Ae===E||Ae===T)&&(x[O]=T,ue[$++]=O)}return ue}function Gn(x){var E=-1,O=Array(x.size);return x.forEach(function(H){O[++E]=H}),O}function $t(x){return Xt(x)?function gs(x){for(var E=Cr.lastIndex=0;Cr.test(x);)++E;return E}(x):Xo(x)}function ot(x){return Xt(x)?function _s(x){return x.match(Cr)||[]}(x):function $o(x){return x.split("")}(x)}function Ri(x){for(var E=x.length;E--&&So.test(x.charAt(E)););return E}var ps=Pr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Yn=function x(E){var e,O=(E=null==E?Be:Yn.defaults(Be.Object(),E,Yn.pick(Be,bi))).Array,H=E.Date,$=E.Error,ue=E.Function,Ae=E.Math,ge=E.Object,Zr=E.RegExp,ys=E.String,je=E.TypeError,Wn=O.prototype,en=ge.prototype,Jn=E["__core-js_shared__"],zn=ue.prototype.toString,de=en.hasOwnProperty,xs=0,Di=(e=/[^.]+$/.exec(Jn&&Jn.keys&&Jn.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",Qn=en.toString,ws=zn.call(ge),Cs=Be._,Ms=Zr("^"+zn.call(de).replace(Rn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kn=xi?E.Buffer:l,St=E.Symbol,Vn=E.Uint8Array,Bi=Kn?Kn.allocUnsafe:l,jn=Lr(ge.getPrototypeOf,ge),Fi=ge.create,a=en.propertyIsEnumerable,h=Wn.splice,r=St?St.isConcatSpreadable:l,o=St?St.iterator:l,c=St?St.toStringTag:l,_=function(){try{var e=Cn(ge,"defineProperty");return e({},"",{}),e}catch{}}(),D=E.clearTimeout!==Be.clearTimeout&&E.clearTimeout,G=H&&H.now!==Be.Date.now&&H.now,X=E.setTimeout!==Be.setTimeout&&E.setTimeout,se=Ae.ceil,z=Ae.floor,le=ge.getOwnPropertySymbols,we=Kn?Kn.isBuffer:l,Re=E.isFinite,Tt=Wn.join,At=Lr(ge.keys,ge),ke=Ae.max,xe=Ae.min,au=H.now,cu=E.parseInt,Ma=Ae.random,uu=Wn.reverse,Ss=Cn(E,"DataView"),Nr=Cn(E,"Map"),Ts=Cn(E,"Promise"),Xn=Cn(E,"Set"),Ur=Cn(E,"WeakMap"),qr=Cn(ge,"create"),Li=Ur&&new Ur,$n={},lu=Mn(Ss),du=Mn(Nr),fu=Mn(Ts),hu=Mn(Xn),pu=Mn(Ur),Zi=St?St.prototype:l,Hr=Zi?Zi.valueOf:l,Sa=Zi?Zi.toString:l;function d(e){if(Se(e)&&!ee(e)&&!(e instanceof ae)){if(e instanceof dt)return e;if(de.call(e,"__wrapped__"))return Tc(e)}return new dt(e)}var er=function(){function e(){}return function(n){if(!Ce(n))return{};if(Fi)return Fi(n);e.prototype=n;var i=new e;return e.prototype=l,i}}();function Ni(){}function dt(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=l}function ae(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=lt,this.__views__=[]}function yn(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var s=e[n];this.set(s[0],s[1])}}function Bt(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var s=e[n];this.set(s[0],s[1])}}function Ft(e){var n=-1,i=null==e?0:e.length;for(this.clear();++n<i;){var s=e[n];this.set(s[0],s[1])}}function bn(e){var n=-1,i=null==e?0:e.length;for(this.__data__=new Ft;++n<i;)this.add(e[n])}function _t(e){var n=this.__data__=new Bt(e);this.size=n.size}function Ta(e,n){var i=ee(e),s=!i&&Sn(e),u=!i&&!s&&sn(e),f=!i&&!s&&!u&&ir(e),m=i||s||u||f,v=m?Dr(e.length,ys):[],C=v.length;for(var I in e)(n||de.call(e,I))&&(!m||!("length"==I||u&&("offset"==I||"parent"==I)||f&&("buffer"==I||"byteLength"==I||"byteOffset"==I)||Ut(I,C)))&&v.push(I);return v}function Aa(e){var n=e.length;return n?e[Ls(0,n-1)]:l}function Uu(e,n){return $i(Xe(e),xn(n,0,e.length))}function qu(e){return $i(Xe(e))}function As(e,n,i){(i!==l&&!mt(e[n],i)||i===l&&!(n in e))&&Lt(e,n,i)}function Gr(e,n,i){var s=e[n];(!de.call(e,n)||!mt(s,i)||i===l&&!(n in e))&&Lt(e,n,i)}function Ui(e,n){for(var i=e.length;i--;)if(mt(e[i][0],n))return i;return-1}function Hu(e,n,i,s){return tn(e,function(u,f,m){n(s,u,i(u),m)}),s}function ka(e,n){return e&&Ot(n,Le(n),e)}function Lt(e,n,i){"__proto__"==n&&_?_(e,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[n]=i}function ks(e,n){for(var i=-1,s=n.length,u=O(s),f=null==e;++i<s;)u[i]=f?l:ca(e,n[i]);return u}function xn(e,n,i){return e==e&&(i!==l&&(e=e<=i?e:i),n!==l&&(e=e>=n?e:n)),e}function ft(e,n,i,s,u,f){var m,v=1&n,C=2&n,I=4&n;if(i&&(m=u?i(e,s,u,f):i(e)),m!==l)return m;if(!Ce(e))return e;var P=ee(e);if(P){if(m=function Il(e){var n=e.length,i=new e.constructor(n);return n&&"string"==typeof e[0]&&de.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(e),!v)return Xe(e,m)}else{var B=Ue(e),U=B==qe||B==ei;if(sn(e))return Xa(e,v);if(B==De||B==Wt||U&&!u){if(m=C||U?{}:mc(e),!v)return C?function bl(e,n){return Ot(e,gc(e),n)}(e,function Gu(e,n){return e&&Ot(n,et(n),e)}(m,e)):function yl(e,n){return Ot(e,js(e),n)}(e,ka(m,e))}else{if(!ye[B])return u?e:{};m=function Pl(e,n,i){var s=e.constructor;switch(n){case fn:return Ys(e);case an:case cn:return new s(+e);case Qt:return function gl(e,n){var i=n?Ys(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,i);case sr:case ar:case On:case cr:case En:case ur:case lr:case Me:case dr:return $a(e,i);case nt:return new s;case zt:case ln:return new s(e);case un:return function _l(e){var n=new e.constructor(e.source,Dn.exec(e));return n.lastIndex=e.lastIndex,n}(e);case rt:return new s;case kn:return function ml(e){return Hr?ge(Hr.call(e)):{}}(e)}}(e,B,v)}}f||(f=new _t);var Y=f.get(e);if(Y)return Y;f.set(e,m),Jc(e)?e.forEach(function(j){m.add(ft(j,n,i,j,e,f))}):Yc(e)&&e.forEach(function(j,oe){m.set(oe,ft(j,n,i,oe,e,f))});var re=P?l:(I?C?Qs:zs:C?et:Le)(e);return Ve(re||e,function(j,oe){re&&(j=e[oe=j]),Gr(m,oe,ft(j,n,i,oe,e,f))}),m}function Oa(e,n,i){var s=i.length;if(null==e)return!s;for(e=ge(e);s--;){var u=i[s],m=e[u];if(m===l&&!(u in e)||!(0,n[u])(m))return!1}return!0}function Ea(e,n,i){if("function"!=typeof e)throw new je(t);return Vr(function(){e.apply(l,i)},n)}function Yr(e,n,i,s){var u=-1,f=Dt,m=!0,v=e.length,C=[],I=n.length;if(!v)return C;i&&(n=be(n,Ge(i))),s?(f=kr,m=!1):n.length>=200&&(f=vn,m=!1,n=new bn(n));e:for(;++u<v;){var P=e[u],B=null==i?P:i(P);if(P=s||0!==P?P:0,m&&B==B){for(var U=I;U--;)if(n[U]===B)continue e;C.push(P)}else f(n,B,s)||C.push(P)}return C}d.templateSettings={escape:xo,evaluate:wo,interpolate:oi,variable:"",imports:{_:d}},(d.prototype=Ni.prototype).constructor=d,(dt.prototype=er(Ni.prototype)).constructor=dt,(ae.prototype=er(Ni.prototype)).constructor=ae,yn.prototype.clear=function vu(){this.__data__=qr?qr(null):{},this.size=0},yn.prototype.delete=function yu(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},yn.prototype.get=function bu(e){var n=this.__data__;if(qr){var i=n[e];return i===g?l:i}return de.call(n,e)?n[e]:l},yn.prototype.has=function xu(e){var n=this.__data__;return qr?n[e]!==l:de.call(n,e)},yn.prototype.set=function wu(e,n){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=qr&&n===l?g:n,this},Bt.prototype.clear=function Cu(){this.__data__=[],this.size=0},Bt.prototype.delete=function Mu(e){var n=this.__data__,i=Ui(n,e);return!(i<0||(i==n.length-1?n.pop():h.call(n,i,1),--this.size,0))},Bt.prototype.get=function Su(e){var n=this.__data__,i=Ui(n,e);return i<0?l:n[i][1]},Bt.prototype.has=function Tu(e){return Ui(this.__data__,e)>-1},Bt.prototype.set=function Au(e,n){var i=this.__data__,s=Ui(i,e);return s<0?(++this.size,i.push([e,n])):i[s][1]=n,this},Ft.prototype.clear=function ku(){this.size=0,this.__data__={hash:new yn,map:new(Nr||Bt),string:new yn}},Ft.prototype.delete=function Ou(e){var n=Xi(this,e).delete(e);return this.size-=n?1:0,n},Ft.prototype.get=function Eu(e){return Xi(this,e).get(e)},Ft.prototype.has=function Iu(e){return Xi(this,e).has(e)},Ft.prototype.set=function Pu(e,n){var i=Xi(this,e),s=i.size;return i.set(e,n),this.size+=i.size==s?0:1,this},bn.prototype.add=bn.prototype.push=function Ru(e){return this.__data__.set(e,g),this},bn.prototype.has=function Du(e){return this.__data__.has(e)},_t.prototype.clear=function Bu(){this.__data__=new Bt,this.size=0},_t.prototype.delete=function Fu(e){var n=this.__data__,i=n.delete(e);return this.size=n.size,i},_t.prototype.get=function Lu(e){return this.__data__.get(e)},_t.prototype.has=function Zu(e){return this.__data__.has(e)},_t.prototype.set=function Nu(e,n){var i=this.__data__;if(i instanceof Bt){var s=i.__data__;if(!Nr||s.length<199)return s.push([e,n]),this.size=++i.size,this;i=this.__data__=new Ft(s)}return i.set(e,n),this.size=i.size,this};var tn=rc(kt),Ia=rc(Es,!0);function Wu(e,n){var i=!0;return tn(e,function(s,u,f){return i=!!n(s,u,f)}),i}function qi(e,n,i){for(var s=-1,u=e.length;++s<u;){var f=e[s],m=n(f);if(null!=m&&(v===l?m==m&&!at(m):i(m,v)))var v=m,C=f}return C}function Pa(e,n){var i=[];return tn(e,function(s,u,f){n(s,u,f)&&i.push(s)}),i}function Ne(e,n,i,s,u){var f=-1,m=e.length;for(i||(i=Dl),u||(u=[]);++f<m;){var v=e[f];n>0&&i(v)?n>1?Ne(v,n-1,i,s,u):Ct(u,v):s||(u[u.length]=v)}return u}var Os=ic(),Ra=ic(!0);function kt(e,n){return e&&Os(e,n,Le)}function Es(e,n){return e&&Ra(e,n,Le)}function Hi(e,n){return wt(n,function(i){return qt(e[i])})}function wn(e,n){for(var i=0,s=(n=rn(n,e)).length;null!=e&&i<s;)e=e[Et(n[i++])];return i&&i==s?e:l}function Da(e,n,i){var s=n(e);return ee(e)?s:Ct(s,i(e))}function Ye(e){return null==e?e===l?"[object Undefined]":"[object Null]":c&&c in ge(e)?function kl(e){var n=de.call(e,c),i=e[c];try{e[c]=l;var s=!0}catch{}var u=Qn.call(e);return s&&(n?e[c]=i:delete e[c]),u}(e):function ql(e){return Qn.call(e)}(e)}function Is(e,n){return e>n}function zu(e,n){return null!=e&&de.call(e,n)}function Qu(e,n){return null!=e&&n in ge(e)}function Ps(e,n,i){for(var s=i?kr:Dt,u=e[0].length,f=e.length,m=f,v=O(f),C=1/0,I=[];m--;){var P=e[m];m&&n&&(P=be(P,Ge(n))),C=xe(P.length,C),v[m]=!i&&(n||u>=120&&P.length>=120)?new bn(m&&P):l}P=e[0];var B=-1,U=v[0];e:for(;++B<u&&I.length<C;){var Y=P[B],V=n?n(Y):Y;if(Y=i||0!==Y?Y:0,!(U?vn(U,V):s(I,V,i))){for(m=f;--m;){var re=v[m];if(!(re?vn(re,V):s(e[m],V,i)))continue e}U&&U.push(V),I.push(Y)}}return I}function Wr(e,n,i){var s=null==(e=xc(e,n=rn(n,e)))?e:e[Et(pt(n))];return null==s?l:He(s,e,i)}function Ba(e){return Se(e)&&Ye(e)==Wt}function Jr(e,n,i,s,u){return e===n||(null==e||null==n||!Se(e)&&!Se(n)?e!=e&&n!=n:function $u(e,n,i,s,u,f){var m=ee(e),v=ee(n),C=m?Pt:Ue(e),I=v?Pt:Ue(n),P=(C=C==Wt?De:C)==De,B=(I=I==Wt?De:I)==De,U=C==I;if(U&&sn(e)){if(!sn(n))return!1;m=!0,P=!1}if(U&&!P)return f||(f=new _t),m||ir(e)?pc(e,n,i,s,u,f):function Tl(e,n,i,s,u,f,m){switch(i){case Qt:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case fn:return!(e.byteLength!=n.byteLength||!f(new Vn(e),new Vn(n)));case an:case cn:case zt:return mt(+e,+n);case An:return e.name==n.name&&e.message==n.message;case un:case ln:return e==n+"";case nt:var v=Fr;case rt:if(v||(v=Gn),e.size!=n.size&&!(1&s))return!1;var I=m.get(e);if(I)return I==n;s|=2,m.set(e,n);var P=pc(v(e),v(n),s,u,f,m);return m.delete(e),P;case kn:if(Hr)return Hr.call(e)==Hr.call(n)}return!1}(e,n,C,i,s,u,f);if(!(1&i)){var Y=P&&de.call(e,"__wrapped__"),V=B&&de.call(n,"__wrapped__");if(Y||V){var re=Y?e.value():e,j=V?n.value():n;return f||(f=new _t),u(re,j,i,s,f)}}return!!U&&(f||(f=new _t),function Al(e,n,i,s,u,f){var m=1&i,v=zs(e),C=v.length;if(C!=zs(n).length&&!m)return!1;for(var B=C;B--;){var U=v[B];if(!(m?U in n:de.call(n,U)))return!1}var Y=f.get(e),V=f.get(n);if(Y&&V)return Y==n&&V==e;var re=!0;f.set(e,n),f.set(n,e);for(var j=m;++B<C;){var oe=e[U=v[B]],ce=n[U];if(s)var ct=m?s(ce,oe,U,n,e,f):s(oe,ce,U,e,n,f);if(!(ct===l?oe===ce||u(oe,ce,i,s,f):ct)){re=!1;break}j||(j="constructor"==U)}if(re&&!j){var Je=e.constructor,ut=n.constructor;Je!=ut&&"constructor"in e&&"constructor"in n&&!("function"==typeof Je&&Je instanceof Je&&"function"==typeof ut&&ut instanceof ut)&&(re=!1)}return f.delete(e),f.delete(n),re}(e,n,i,s,u,f))}(e,n,i,s,Jr,u))}function Rs(e,n,i,s){var u=i.length,f=u,m=!s;if(null==e)return!f;for(e=ge(e);u--;){var v=i[u];if(m&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++u<f;){var C=(v=i[u])[0],I=e[C],P=v[1];if(m&&v[2]){if(I===l&&!(C in e))return!1}else{var B=new _t;if(s)var U=s(I,P,C,e,n,B);if(!(U===l?Jr(P,I,3,s,B):U))return!1}}return!0}function Fa(e){return!(!Ce(e)||function Fl(e){return!!Di&&Di in e}(e))&&(qt(e)?Ms:Io).test(Mn(e))}function La(e){return"function"==typeof e?e:null==e?tt:"object"==typeof e?ee(e)?Ua(e[0],e[1]):Na(e):ou(e)}function Ds(e){if(!Kr(e))return At(e);var n=[];for(var i in ge(e))de.call(e,i)&&"constructor"!=i&&n.push(i);return n}function Bs(e,n){return e<n}function Za(e,n){var i=-1,s=$e(e)?O(e.length):[];return tn(e,function(u,f,m){s[++i]=n(u,f,m)}),s}function Na(e){var n=Vs(e);return 1==n.length&&n[0][2]?yc(n[0][0],n[0][1]):function(i){return i===e||Rs(i,e,n)}}function Ua(e,n){return Xs(e)&&vc(n)?yc(Et(e),n):function(i){var s=ca(i,e);return s===l&&s===n?ua(i,e):Jr(n,s,3)}}function Gi(e,n,i,s,u){e!==n&&Os(n,function(f,m){if(u||(u=new _t),Ce(f))!function ol(e,n,i,s,u,f,m){var v=ea(e,i),C=ea(n,i),I=m.get(C);if(I)As(e,i,I);else{var P=f?f(v,C,i+"",e,n,m):l,B=P===l;if(B){var U=ee(C),Y=!U&&sn(C),V=!U&&!Y&&ir(C);P=C,U||Y||V?ee(v)?P=v:Oe(v)?P=Xe(v):Y?(B=!1,P=Xa(C,!0)):V?(B=!1,P=$a(C,!0)):P=[]:jr(C)||Sn(C)?(P=v,Sn(v)?P=Kc(v):(!Ce(v)||qt(v))&&(P=mc(C))):B=!1}B&&(m.set(C,P),u(P,C,s,f,m),m.delete(C)),As(e,i,P)}}(e,n,m,i,Gi,s,u);else{var v=s?s(ea(e,m),f,m+"",e,n,u):l;v===l&&(v=f),As(e,m,v)}},et)}function qa(e,n){var i=e.length;if(i)return Ut(n+=n<0?i:0,i)?e[n]:l}function Ha(e,n,i){n=n.length?be(n,function(f){return ee(f)?function(m){return wn(m,1===f.length?f[0]:f)}:f}):[tt];var s=-1;return n=be(n,Ge(K())),function ns(x,E){var O=x.length;for(x.sort(E);O--;)x[O]=x[O].value;return x}(Za(e,function(f,m,v){return{criteria:be(n,function(I){return I(f)}),index:++s,value:f}}),function(f,m){return function vl(e,n,i){for(var s=-1,u=e.criteria,f=n.criteria,m=u.length,v=i.length;++s<m;){var C=ec(u[s],f[s]);if(C)return s>=v?C:C*("desc"==i[s]?-1:1)}return e.index-n.index}(f,m,i)})}function Ga(e,n,i){for(var s=-1,u=n.length,f={};++s<u;){var m=n[s],v=wn(e,m);i(v,m)&&zr(f,rn(m,e),v)}return f}function Fs(e,n,i,s){var u=s?ts:jt,f=-1,m=n.length,v=e;for(e===n&&(n=Xe(n)),i&&(v=be(e,Ge(i)));++f<m;)for(var C=0,I=n[f],P=i?i(I):I;(C=u(v,P,C,s))>-1;)v!==e&&h.call(v,C,1),h.call(e,C,1);return e}function Ya(e,n){for(var i=e?n.length:0,s=i-1;i--;){var u=n[i];if(i==s||u!==f){var f=u;Ut(u)?h.call(e,u,1):Us(e,u)}}return e}function Ls(e,n){return e+z(Ma()*(n-e+1))}function Zs(e,n){var i="";if(!e||n<1||n>yt)return i;do{n%2&&(i+=e),(n=z(n/2))&&(e+=e)}while(n);return i}function ie(e,n){return ta(bc(e,n,tt),e+"")}function ul(e){return Aa(or(e))}function ll(e,n){var i=or(e);return $i(i,xn(n,0,i.length))}function zr(e,n,i,s){if(!Ce(e))return e;for(var u=-1,f=(n=rn(n,e)).length,m=f-1,v=e;null!=v&&++u<f;){var C=Et(n[u]),I=i;if("__proto__"===C||"constructor"===C||"prototype"===C)return e;if(u!=m){var P=v[C];(I=s?s(P,C,v):l)===l&&(I=Ce(P)?P:Ut(n[u+1])?[]:{})}Gr(v,C,I),v=v[C]}return e}var Wa=Li?function(e,n){return Li.set(e,n),e}:tt,dl=_?function(e,n){return _(e,"toString",{configurable:!0,enumerable:!1,value:da(n),writable:!0})}:tt;function fl(e){return $i(or(e))}function ht(e,n,i){var s=-1,u=e.length;n<0&&(n=-n>u?0:u+n),(i=i>u?u:i)<0&&(i+=u),u=n>i?0:i-n>>>0,n>>>=0;for(var f=O(u);++s<u;)f[s]=e[s+n];return f}function hl(e,n){var i;return tn(e,function(s,u,f){return!(i=n(s,u,f))}),!!i}function Yi(e,n,i){var s=0,u=null==e?s:e.length;if("number"==typeof n&&n==n&&u<=2147483647){for(;s<u;){var f=s+u>>>1,m=e[f];null!==m&&!at(m)&&(i?m<=n:m<n)?s=f+1:u=f}return u}return Ns(e,n,tt,i)}function Ns(e,n,i,s){var u=0,f=null==e?0:e.length;if(0===f)return 0;for(var m=(n=i(n))!=n,v=null===n,C=at(n),I=n===l;u<f;){var P=z((u+f)/2),B=i(e[P]),U=B!==l,Y=null===B,V=B==B,re=at(B);if(m)var j=s||V;else j=I?V&&(s||U):v?V&&U&&(s||!Y):C?V&&U&&!Y&&(s||!re):!Y&&!re&&(s?B<=n:B<n);j?u=P+1:f=P}return xe(f,4294967294)}function Ja(e,n){for(var i=-1,s=e.length,u=0,f=[];++i<s;){var m=e[i],v=n?n(m):m;if(!i||!mt(v,C)){var C=v;f[u++]=0===m?0:m}}return f}function za(e){return"number"==typeof e?e:at(e)?NaN:+e}function st(e){if("string"==typeof e)return e;if(ee(e))return be(e,st)+"";if(at(e))return Sa?Sa.call(e):"";var n=e+"";return"0"==n&&1/e==-It?"-0":n}function nn(e,n,i){var s=-1,u=Dt,f=e.length,m=!0,v=[],C=v;if(i)m=!1,u=kr;else if(f>=200){var I=n?null:Ml(e);if(I)return Gn(I);m=!1,u=vn,C=new bn}else C=n?[]:v;e:for(;++s<f;){var P=e[s],B=n?n(P):P;if(P=i||0!==P?P:0,m&&B==B){for(var U=C.length;U--;)if(C[U]===B)continue e;n&&C.push(B),v.push(P)}else u(C,B,i)||(C!==v&&C.push(B),v.push(P))}return v}function Us(e,n){return null==(e=xc(e,n=rn(n,e)))||delete e[Et(pt(n))]}function Qa(e,n,i,s){return zr(e,n,i(wn(e,n)),s)}function Wi(e,n,i,s){for(var u=e.length,f=s?u:-1;(s?f--:++f<u)&&n(e[f],f,e););return i?ht(e,s?0:f,s?f+1:u):ht(e,s?f+1:0,s?u:f)}function Ka(e,n){var i=e;return i instanceof ae&&(i=i.value()),Or(n,function(s,u){return u.func.apply(u.thisArg,Ct([s],u.args))},i)}function qs(e,n,i){var s=e.length;if(s<2)return s?nn(e[0]):[];for(var u=-1,f=O(s);++u<s;)for(var m=e[u],v=-1;++v<s;)v!=u&&(f[u]=Yr(f[u]||m,e[v],n,i));return nn(Ne(f,1),n,i)}function Va(e,n,i){for(var s=-1,u=e.length,f=n.length,m={};++s<u;)i(m,e[s],s<f?n[s]:l);return m}function Hs(e){return Oe(e)?e:[]}function Gs(e){return"function"==typeof e?e:tt}function rn(e,n){return ee(e)?e:Xs(e,n)?[e]:Sc(pe(e))}var pl=ie;function on(e,n,i){var s=e.length;return i=i===l?s:i,!n&&i>=s?e:ht(e,n,i)}var ja=D||function(e){return Be.clearTimeout(e)};function Xa(e,n){if(n)return e.slice();var i=e.length,s=Bi?Bi(i):new e.constructor(i);return e.copy(s),s}function Ys(e){var n=new e.constructor(e.byteLength);return new Vn(n).set(new Vn(e)),n}function $a(e,n){var i=n?Ys(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function ec(e,n){if(e!==n){var i=e!==l,s=null===e,u=e==e,f=at(e),m=n!==l,v=null===n,C=n==n,I=at(n);if(!v&&!I&&!f&&e>n||f&&m&&C&&!v&&!I||s&&m&&C||!i&&C||!u)return 1;if(!s&&!f&&!I&&e<n||I&&i&&u&&!s&&!f||v&&i&&u||!m&&u||!C)return-1}return 0}function tc(e,n,i,s){for(var u=-1,f=e.length,m=i.length,v=-1,C=n.length,I=ke(f-m,0),P=O(C+I),B=!s;++v<C;)P[v]=n[v];for(;++u<m;)(B||u<f)&&(P[i[u]]=e[u]);for(;I--;)P[v++]=e[u++];return P}function nc(e,n,i,s){for(var u=-1,f=e.length,m=-1,v=i.length,C=-1,I=n.length,P=ke(f-v,0),B=O(P+I),U=!s;++u<P;)B[u]=e[u];for(var Y=u;++C<I;)B[Y+C]=n[C];for(;++m<v;)(U||u<f)&&(B[Y+i[m]]=e[u++]);return B}function Xe(e,n){var i=-1,s=e.length;for(n||(n=O(s));++i<s;)n[i]=e[i];return n}function Ot(e,n,i,s){var u=!i;i||(i={});for(var f=-1,m=n.length;++f<m;){var v=n[f],C=s?s(i[v],e[v],v,i,e):l;C===l&&(C=e[v]),u?Lt(i,v,C):Gr(i,v,C)}return i}function Ji(e,n){return function(i,s){var u=ee(i)?Ko:Hu,f=n?n():{};return u(i,e,K(s,2),f)}}function tr(e){return ie(function(n,i){var s=-1,u=i.length,f=u>1?i[u-1]:l,m=u>2?i[2]:l;for(f=e.length>3&&"function"==typeof f?(u--,f):l,m&&We(i[0],i[1],m)&&(f=u<3?l:f,u=1),n=ge(n);++s<u;){var v=i[s];v&&e(n,v,s,f)}return n})}function rc(e,n){return function(i,s){if(null==i)return i;if(!$e(i))return e(i,s);for(var u=i.length,f=n?u:-1,m=ge(i);(n?f--:++f<u)&&!1!==s(m[f],f,m););return i}}function ic(e){return function(n,i,s){for(var u=-1,f=ge(n),m=s(n),v=m.length;v--;){var C=m[e?v:++u];if(!1===i(f[C],C,f))break}return n}}function oc(e){return function(n){var i=Xt(n=pe(n))?ot(n):l,s=i?i[0]:n.charAt(0),u=i?on(i,1).join(""):n.slice(1);return s[e]()+u}}function nr(e){return function(n){return Or(ru(nu(n).replace(vi,"")),e,"")}}function Qr(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var i=er(e.prototype),s=e.apply(i,n);return Ce(s)?s:i}}function sc(e){return function(n,i,s){var u=ge(n);if(!$e(n)){var f=K(i,3);n=Le(n),i=function(v){return f(u[v],v,u)}}var m=e(n,i,s);return m>-1?u[f?n[m]:m]:l}}function ac(e){return Nt(function(n){var i=n.length,s=i,u=dt.prototype.thru;for(e&&n.reverse();s--;){var f=n[s];if("function"!=typeof f)throw new je(t);if(u&&!m&&"wrapper"==ji(f))var m=new dt([],!0)}for(s=m?s:i;++s<i;){var v=ji(f=n[s]),C="wrapper"==v?Ks(f):l;m=C&&$s(C[0])&&424==C[1]&&!C[4].length&&1==C[9]?m[ji(C[0])].apply(m,C[3]):1==f.length&&$s(f)?m[v]():m.thru(f)}return function(){var I=arguments,P=I[0];if(m&&1==I.length&&ee(P))return m.plant(P).value();for(var B=0,U=i?n[B].apply(this,I):P;++B<i;)U=n[B].call(this,U);return U}})}function zi(e,n,i,s,u,f,m,v,C,I){var P=128&n,B=1&n,U=2&n,Y=24&n,V=512&n,re=U?l:Qr(e);return function j(){for(var oe=arguments.length,ce=O(oe),ct=oe;ct--;)ce[ct]=arguments[ct];if(Y)var Je=rr(j),ut=is(ce,Je);if(s&&(ce=tc(ce,s,u,Y)),f&&(ce=nc(ce,f,m,Y)),oe-=ut,Y&&oe<I){var Ee=Mt(ce,Je);return lc(e,n,zi,j.placeholder,i,ce,Ee,v,C,I-oe)}var vt=B?i:this,Gt=U?vt[e]:e;return oe=ce.length,v?ce=Hl(ce,v):V&&oe>1&&ce.reverse(),P&&C<oe&&(ce.length=C),this&&this!==Be&&this instanceof j&&(Gt=re||Qr(Gt)),Gt.apply(vt,ce)}}function cc(e,n){return function(i,s){return function Vu(e,n,i,s){return kt(e,function(u,f,m){n(s,i(u),f,m)}),s}(i,e,n(s),{})}}function Qi(e,n){return function(i,s){var u;if(i===l&&s===l)return n;if(i!==l&&(u=i),s!==l){if(u===l)return s;"string"==typeof i||"string"==typeof s?(i=st(i),s=st(s)):(i=za(i),s=za(s)),u=e(i,s)}return u}}function Ws(e){return Nt(function(n){return n=be(n,Ge(K())),ie(function(i){var s=this;return e(n,function(u){return He(u,s,i)})})})}function Ki(e,n){var i=(n=n===l?" ":st(n)).length;if(i<2)return i?Zs(n,e):n;var s=Zs(n,se(e/$t(n)));return Xt(n)?on(ot(s),0,e).join(""):s.slice(0,e)}function uc(e){return function(n,i,s){return s&&"number"!=typeof s&&We(n,i,s)&&(i=s=l),n=Ht(n),i===l?(i=n,n=0):i=Ht(i),function cl(e,n,i,s){for(var u=-1,f=ke(se((n-e)/(i||1)),0),m=O(f);f--;)m[s?f:++u]=e,e+=i;return m}(n,i,s=s===l?n<i?1:-1:Ht(s),e)}}function Vi(e){return function(n,i){return"string"==typeof n&&"string"==typeof i||(n=gt(n),i=gt(i)),e(n,i)}}function lc(e,n,i,s,u,f,m,v,C,I){var P=8&n;n|=P?32:64,4&(n&=~(P?64:32))||(n&=-4);var re=[e,n,u,P?f:l,P?m:l,P?l:f,P?l:m,v,C,I],j=i.apply(l,re);return $s(e)&&wc(j,re),j.placeholder=s,Cc(j,e,n)}function Js(e){var n=Ae[e];return function(i,s){if(i=gt(i),(s=null==s?0:xe(ne(s),292))&&Re(i)){var u=(pe(i)+"e").split("e");return+((u=(pe(n(u[0]+"e"+(+u[1]+s)))+"e").split("e"))[0]+"e"+(+u[1]-s))}return n(i)}}var Ml=Xn&&1/Gn(new Xn([,-0]))[1]==It?function(e){return new Xn(e)}:pa;function dc(e){return function(n){var i=Ue(n);return i==nt?Fr(n):i==rt?function ds(x){var E=-1,O=Array(x.size);return x.forEach(function(H){O[++E]=[H,H]}),O}(n):function rs(x,E){return be(E,function(O){return[O,x[O]]})}(n,e(n))}}function Zt(e,n,i,s,u,f,m,v){var C=2&n;if(!C&&"function"!=typeof e)throw new je(t);var I=s?s.length:0;if(I||(n&=-97,s=u=l),m=m===l?m:ke(ne(m),0),v=v===l?v:ne(v),I-=u?u.length:0,64&n){var P=s,B=u;s=u=l}var U=C?l:Ks(e),Y=[e,n,i,s,u,P,B,f,m,v];if(U&&function Nl(e,n){var i=e[1],s=n[1],u=i|s;if(!(u<131||(128==s&&8==i||128==s&&256==i&&e[7].length<=n[8]||384==s&&n[7].length<=n[8]&&8==i)))return e;1&s&&(e[2]=n[2],u|=1&i?0:4);var v=n[3];if(v){var C=e[3];e[3]=C?tc(C,v,n[4]):v,e[4]=C?Mt(e[3],T):n[4]}(v=n[5])&&(e[5]=(C=e[5])?nc(C,v,n[6]):v,e[6]=C?Mt(e[5],T):n[6]),(v=n[7])&&(e[7]=v),128&s&&(e[8]=null==e[8]?n[8]:xe(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=u}(Y,U),e=Y[0],n=Y[1],i=Y[2],s=Y[3],u=Y[4],!(v=Y[9]=Y[9]===l?C?0:e.length:ke(Y[9]-I,0))&&24&n&&(n&=-25),n&&1!=n)V=8==n||16==n?function wl(e,n,i){var s=Qr(e);return function u(){for(var f=arguments.length,m=O(f),v=f,C=rr(u);v--;)m[v]=arguments[v];var I=f<3&&m[0]!==C&&m[f-1]!==C?[]:Mt(m,C);return(f-=I.length)<i?lc(e,n,zi,u.placeholder,l,m,I,l,l,i-f):He(this&&this!==Be&&this instanceof u?s:e,this,m)}}(e,n,v):32!=n&&33!=n||u.length?zi.apply(l,Y):function Cl(e,n,i,s){var u=1&n,f=Qr(e);return function m(){for(var v=-1,C=arguments.length,I=-1,P=s.length,B=O(P+C),U=this&&this!==Be&&this instanceof m?f:e;++I<P;)B[I]=s[I];for(;C--;)B[I++]=arguments[++v];return He(U,u?i:this,B)}}(e,n,i,s);else var V=function xl(e,n,i){var s=1&n,u=Qr(e);return function f(){return(this&&this!==Be&&this instanceof f?u:e).apply(s?i:this,arguments)}}(e,n,i);return Cc((U?Wa:wc)(V,Y),e,n)}function fc(e,n,i,s){return e===l||mt(e,en[i])&&!de.call(s,i)?n:e}function hc(e,n,i,s,u,f){return Ce(e)&&Ce(n)&&(f.set(n,e),Gi(e,n,l,hc,f),f.delete(n)),e}function Sl(e){return jr(e)?l:e}function pc(e,n,i,s,u,f){var m=1&i,v=e.length,C=n.length;if(v!=C&&!(m&&C>v))return!1;var I=f.get(e),P=f.get(n);if(I&&P)return I==n&&P==e;var B=-1,U=!0,Y=2&i?new bn:l;for(f.set(e,n),f.set(n,e);++B<v;){var V=e[B],re=n[B];if(s)var j=m?s(re,V,B,n,e,f):s(V,re,B,e,n,f);if(j!==l){if(j)continue;U=!1;break}if(Y){if(!Er(n,function(oe,ce){if(!vn(Y,ce)&&(V===oe||u(V,oe,i,s,f)))return Y.push(ce)})){U=!1;break}}else if(V!==re&&!u(V,re,i,s,f)){U=!1;break}}return f.delete(e),f.delete(n),U}function Nt(e){return ta(bc(e,l,Oc),e+"")}function zs(e){return Da(e,Le,js)}function Qs(e){return Da(e,et,gc)}var Ks=Li?function(e){return Li.get(e)}:pa;function ji(e){for(var n=e.name+"",i=$n[n],s=de.call($n,n)?i.length:0;s--;){var u=i[s],f=u.func;if(null==f||f==e)return u.name}return n}function rr(e){return(de.call(d,"placeholder")?d:e).placeholder}function K(){var e=d.iteratee||fa;return e=e===fa?La:e,arguments.length?e(arguments[0],arguments[1]):e}function Xi(e,n){var i=e.__data__;return function Bl(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}(n)?i["string"==typeof n?"string":"hash"]:i.map}function Vs(e){for(var n=Le(e),i=n.length;i--;){var s=n[i],u=e[s];n[i]=[s,u,vc(u)]}return n}function Cn(e,n){var i=function cs(x,E){return null==x?l:x[E]}(e,n);return Fa(i)?i:l}var js=le?function(e){return null==e?[]:(e=ge(e),wt(le(e),function(n){return a.call(e,n)}))}:ga,gc=le?function(e){for(var n=[];e;)Ct(n,js(e)),e=jn(e);return n}:ga,Ue=Ye;function _c(e,n,i){for(var s=-1,u=(n=rn(n,e)).length,f=!1;++s<u;){var m=Et(n[s]);if(!(f=null!=e&&i(e,m)))break;e=e[m]}return f||++s!=u?f:!!(u=null==e?0:e.length)&&oo(u)&&Ut(m,u)&&(ee(e)||Sn(e))}function mc(e){return"function"!=typeof e.constructor||Kr(e)?{}:er(jn(e))}function Dl(e){return ee(e)||Sn(e)||!!(r&&e&&e[r])}function Ut(e,n){var i=typeof e;return!!(n=n??yt)&&("number"==i||"symbol"!=i&&bt.test(e))&&e>-1&&e%1==0&&e<n}function We(e,n,i){if(!Ce(i))return!1;var s=typeof n;return!!("number"==s?$e(i)&&Ut(n,i.length):"string"==s&&n in i)&&mt(i[n],e)}function Xs(e,n){if(ee(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!at(e))||Co.test(e)||!si.test(e)||null!=n&&e in ge(n)}function $s(e){var n=ji(e),i=d[n];if("function"!=typeof i||!(n in ae.prototype))return!1;if(e===i)return!0;var s=Ks(i);return!!s&&e===s[0]}(Ss&&Ue(new Ss(new ArrayBuffer(1)))!=Qt||Nr&&Ue(new Nr)!=nt||Ts&&Ue(Ts.resolve())!=ni||Xn&&Ue(new Xn)!=rt||Ur&&Ue(new Ur)!=dn)&&(Ue=function(e){var n=Ye(e),i=n==De?e.constructor:l,s=i?Mn(i):"";if(s)switch(s){case lu:return Qt;case du:return nt;case fu:return ni;case hu:return rt;case pu:return dn}return n});var Ll=Jn?qt:_a;function Kr(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||en)}function vc(e){return e==e&&!Ce(e)}function yc(e,n){return function(i){return null!=i&&i[e]===n&&(n!==l||e in ge(i))}}function bc(e,n,i){return n=ke(n===l?e.length-1:n,0),function(){for(var s=arguments,u=-1,f=ke(s.length-n,0),m=O(f);++u<f;)m[u]=s[n+u];u=-1;for(var v=O(n+1);++u<n;)v[u]=s[u];return v[n]=i(m),He(e,this,v)}}function xc(e,n){return n.length<2?e:wn(e,ht(n,0,-1))}function Hl(e,n){for(var i=e.length,s=xe(n.length,i),u=Xe(e);s--;){var f=n[s];e[s]=Ut(f,i)?u[f]:l}return e}function ea(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var wc=Mc(Wa),Vr=X||function(e,n){return Be.setTimeout(e,n)},ta=Mc(dl);function Cc(e,n,i){var s=n+"";return ta(e,function Rl(e,n){var i=n.length;if(!i)return e;var s=i-1;return n[s]=(i>1?"& ":"")+n[s],n=n.join(i>2?", ":" "),e.replace(pr,"{\n/* [wrapped with "+n+"] */\n")}(s,function Gl(e,n){return Ve($r,function(i){var s="_."+i[0];n&i[1]&&!Dt(e,s)&&e.push(s)}),e.sort()}(function El(e){var n=e.match(ai);return n?n[1].split(gr):[]}(s),i)))}function Mc(e){var n=0,i=0;return function(){var s=au(),u=16-(s-i);if(i=s,u>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(l,arguments)}}function $i(e,n){var i=-1,s=e.length,u=s-1;for(n=n===l?s:n;++i<n;){var f=Ls(i,u),m=e[f];e[f]=e[i],e[i]=m}return e.length=n,e}var Sc=function Zl(e){var n=ro(e,function(s){return 500===i.size&&i.clear(),s}),i=n.cache;return n}(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(ma,function(i,s,u,f){n.push(u?f.replace(ko,"$1"):s||i)}),n});function Et(e){if("string"==typeof e||at(e))return e;var n=e+"";return"0"==n&&1/e==-It?"-0":n}function Mn(e){if(null!=e){try{return zn.call(e)}catch{}try{return e+""}catch{}}return""}function Tc(e){if(e instanceof ae)return e.clone();var n=new dt(e.__wrapped__,e.__chain__);return n.__actions__=Xe(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var zl=ie(function(e,n){return Oe(e)?Yr(e,Ne(n,1,Oe,!0)):[]}),Ql=ie(function(e,n){var i=pt(n);return Oe(i)&&(i=l),Oe(e)?Yr(e,Ne(n,1,Oe,!0),K(i,2)):[]}),Kl=ie(function(e,n){var i=pt(n);return Oe(i)&&(i=l),Oe(e)?Yr(e,Ne(n,1,Oe,!0),l,i):[]});function Ac(e,n,i){var s=null==e?0:e.length;if(!s)return-1;var u=null==i?0:ne(i);return u<0&&(u=ke(s+u,0)),Hn(e,K(n,3),u)}function kc(e,n,i){var s=null==e?0:e.length;if(!s)return-1;var u=s-1;return i!==l&&(u=ne(i),u=i<0?ke(s+u,0):xe(u,s-1)),Hn(e,K(n,3),u,!0)}function Oc(e){return null!=e&&e.length?Ne(e,1):[]}function Ec(e){return e&&e.length?e[0]:l}var sd=ie(function(e){var n=be(e,Hs);return n.length&&n[0]===e[0]?Ps(n):[]}),ad=ie(function(e){var n=pt(e),i=be(e,Hs);return n===pt(i)?n=l:i.pop(),i.length&&i[0]===e[0]?Ps(i,K(n,2)):[]}),cd=ie(function(e){var n=pt(e),i=be(e,Hs);return(n="function"==typeof n?n:l)&&i.pop(),i.length&&i[0]===e[0]?Ps(i,l,n):[]});function pt(e){var n=null==e?0:e.length;return n?e[n-1]:l}var fd=ie(Ic);function Ic(e,n){return e&&e.length&&n&&n.length?Fs(e,n):e}var gd=Nt(function(e,n){var i=null==e?0:e.length,s=ks(e,n);return Ya(e,be(n,function(u){return Ut(u,i)?+u:u}).sort(ec)),s});function na(e){return null==e?e:uu.call(e)}var Id=ie(function(e){return nn(Ne(e,1,Oe,!0))}),Pd=ie(function(e){var n=pt(e);return Oe(n)&&(n=l),nn(Ne(e,1,Oe,!0),K(n,2))}),Rd=ie(function(e){var n=pt(e);return n="function"==typeof n?n:l,nn(Ne(e,1,Oe,!0),l,n)});function ra(e){if(!e||!e.length)return[];var n=0;return e=wt(e,function(i){if(Oe(i))return n=ke(i.length,n),!0}),Dr(n,function(i){return be(e,Ir(i))})}function Pc(e,n){if(!e||!e.length)return[];var i=ra(e);return null==n?i:be(i,function(s){return He(n,l,s)})}var Ld=ie(function(e,n){return Oe(e)?Yr(e,n):[]}),Zd=ie(function(e){return qs(wt(e,Oe))}),Nd=ie(function(e){var n=pt(e);return Oe(n)&&(n=l),qs(wt(e,Oe),K(n,2))}),Ud=ie(function(e){var n=pt(e);return n="function"==typeof n?n:l,qs(wt(e,Oe),l,n)}),qd=ie(ra),Yd=ie(function(e){var n=e.length,i=n>1?e[n-1]:l;return i="function"==typeof i?(e.pop(),i):l,Pc(e,i)});function Rc(e){var n=d(e);return n.__chain__=!0,n}function eo(e,n){return n(e)}var Jd=Nt(function(e){var n=e.length,i=n?e[0]:0,s=this.__wrapped__,u=function(f){return ks(f,e)};return!(n>1||this.__actions__.length)&&s instanceof ae&&Ut(i)?((s=s.slice(i,+i+(n?1:0))).__actions__.push({func:eo,args:[u],thisArg:l}),new dt(s,this.__chain__).thru(function(f){return n&&!f.length&&f.push(l),f})):this.thru(u)}),ef=Ji(function(e,n,i){de.call(e,i)?++e[i]:Lt(e,i,1)}),rf=sc(Ac),of=sc(kc);function Dc(e,n){return(ee(e)?Ve:tn)(e,K(n,3))}function Bc(e,n){return(ee(e)?Vo:Ia)(e,K(n,3))}var uf=Ji(function(e,n,i){de.call(e,i)?e[i].push(n):Lt(e,i,[n])}),df=ie(function(e,n,i){var s=-1,u="function"==typeof n,f=$e(e)?O(e.length):[];return tn(e,function(m){f[++s]=u?He(n,m,i):Wr(m,n,i)}),f}),ff=Ji(function(e,n,i){Lt(e,i,n)});function to(e,n){return(ee(e)?be:Za)(e,K(n,3))}var pf=Ji(function(e,n,i){e[i?0:1].push(n)},function(){return[[],[]]}),Cf=ie(function(e,n){if(null==e)return[];var i=n.length;return i>1&&We(e,n[0],n[1])?n=[]:i>2&&We(n[0],n[1],n[2])&&(n=[n[0]]),Ha(e,Ne(n,1),[])}),no=G||function(){return Be.Date.now()};function Fc(e,n,i){return n=i?l:n,Zt(e,128,l,l,l,l,n=e&&null==n?e.length:n)}function Lc(e,n){var i;if("function"!=typeof n)throw new je(t);return e=ne(e),function(){return--e>0&&(i=n.apply(this,arguments)),e<=1&&(n=l),i}}var ia=ie(function(e,n,i){var s=1;if(i.length){var u=Mt(i,rr(ia));s|=32}return Zt(e,s,n,i,u)}),Zc=ie(function(e,n,i){var s=3;if(i.length){var u=Mt(i,rr(Zc));s|=32}return Zt(n,s,e,i,u)});function qc(e,n,i){var s,u,f,m,v,C,I=0,P=!1,B=!1,U=!0;if("function"!=typeof e)throw new je(t);function Y(Ee){var vt=s,Gt=u;return s=u=l,I=Ee,m=e.apply(Gt,vt)}function V(Ee){return I=Ee,v=Vr(oe,n),P?Y(Ee):m}function j(Ee){var vt=Ee-C;return C===l||vt>=n||vt<0||B&&Ee-I>=f}function oe(){var Ee=no();if(j(Ee))return ce(Ee);v=Vr(oe,function re(Ee){var su=n-(Ee-C);return B?xe(su,f-(Ee-I)):su}(Ee))}function ce(Ee){return v=l,U&&s?Y(Ee):(s=u=l,m)}function ut(){var Ee=no(),vt=j(Ee);if(s=arguments,u=this,C=Ee,vt){if(v===l)return V(C);if(B)return ja(v),v=Vr(oe,n),Y(C)}return v===l&&(v=Vr(oe,n)),m}return n=gt(n)||0,Ce(i)&&(P=!!i.leading,f=(B="maxWait"in i)?ke(gt(i.maxWait)||0,n):f,U="trailing"in i?!!i.trailing:U),ut.cancel=function ct(){v!==l&&ja(v),I=0,s=C=u=v=l},ut.flush=function Je(){return v===l?m:ce(no())},ut}var Sf=ie(function(e,n){return Ea(e,1,n)}),Tf=ie(function(e,n,i){return Ea(e,gt(n)||0,i)});function ro(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new je(t);var i=function(){var s=arguments,u=n?n.apply(this,s):s[0],f=i.cache;if(f.has(u))return f.get(u);var m=e.apply(this,s);return i.cache=f.set(u,m)||f,m};return i.cache=new(ro.Cache||Ft),i}function io(e){if("function"!=typeof e)throw new je(t);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}ro.Cache=Ft;var Of=pl(function(e,n){var i=(n=1==n.length&&ee(n[0])?be(n[0],Ge(K())):be(Ne(n,1),Ge(K()))).length;return ie(function(s){for(var u=-1,f=xe(s.length,i);++u<f;)s[u]=n[u].call(this,s[u]);return He(e,this,s)})}),oa=ie(function(e,n){var i=Mt(n,rr(oa));return Zt(e,32,l,n,i)}),Hc=ie(function(e,n){var i=Mt(n,rr(Hc));return Zt(e,64,l,n,i)}),Ef=Nt(function(e,n){return Zt(e,256,l,l,l,n)});function mt(e,n){return e===n||e!=e&&n!=n}var Hf=Vi(Is),Gf=Vi(function(e,n){return e>=n}),Sn=Ba(function(){return arguments}())?Ba:function(e){return Se(e)&&de.call(e,"callee")&&!a.call(e,"callee")},ee=O.isArray,Yf=wi?Ge(wi):function ju(e){return Se(e)&&Ye(e)==fn};function $e(e){return null!=e&&oo(e.length)&&!qt(e)}function Oe(e){return Se(e)&&$e(e)}var sn=we||_a,Jf=Tr?Ge(Tr):function Xu(e){return Se(e)&&Ye(e)==cn};function sa(e){if(!Se(e))return!1;var n=Ye(e);return n==An||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!jr(e)}function qt(e){if(!Ce(e))return!1;var n=Ye(e);return n==qe||n==ei||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Gc(e){return"number"==typeof e&&e==ne(e)}function oo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=yt}function Ce(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function Se(e){return null!=e&&"object"==typeof e}var Yc=Ci?Ge(Ci):function el(e){return Se(e)&&Ue(e)==nt};function Wc(e){return"number"==typeof e||Se(e)&&Ye(e)==zt}function jr(e){if(!Se(e)||Ye(e)!=De)return!1;var n=jn(e);if(null===n)return!0;var i=de.call(n,"constructor")&&n.constructor;return"function"==typeof i&&i instanceof i&&zn.call(i)==ws}var aa=Mi?Ge(Mi):function tl(e){return Se(e)&&Ye(e)==un},Jc=Qo?Ge(Qo):function nl(e){return Se(e)&&Ue(e)==rt};function so(e){return"string"==typeof e||!ee(e)&&Se(e)&&Ye(e)==ln}function at(e){return"symbol"==typeof e||Se(e)&&Ye(e)==kn}var ir=Ar?Ge(Ar):function rl(e){return Se(e)&&oo(e.length)&&!!he[Ye(e)]},ch=Vi(Bs),uh=Vi(function(e,n){return e<=n});function zc(e){if(!e)return[];if($e(e))return so(e)?ot(e):Xe(e);if(o&&e[o])return function ls(x){for(var E,O=[];!(E=x.next()).done;)O.push(E.value);return O}(e[o]());var n=Ue(e);return(n==nt?Fr:n==rt?Gn:or)(e)}function Ht(e){return e?(e=gt(e))===It||e===-It?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ne(e){var n=Ht(e),i=n%1;return n==n?i?n-i:n:0}function Qc(e){return e?xn(ne(e),0,lt):0}function gt(e){if("number"==typeof e)return e;if(at(e))return NaN;if(Ce(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=Ce(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=Ei(e);var i=_r.test(e);return i||ci.test(e)?Ca(e.slice(2),i?2:8):Eo.test(e)?NaN:+e}function Kc(e){return Ot(e,et(e))}function pe(e){return null==e?"":st(e)}var dh=tr(function(e,n){if(Kr(n)||$e(n))Ot(n,Le(n),e);else for(var i in n)de.call(n,i)&&Gr(e,i,n[i])}),Vc=tr(function(e,n){Ot(n,et(n),e)}),ao=tr(function(e,n,i,s){Ot(n,et(n),e,s)}),fh=tr(function(e,n,i,s){Ot(n,Le(n),e,s)}),hh=Nt(ks),gh=ie(function(e,n){e=ge(e);var i=-1,s=n.length,u=s>2?n[2]:l;for(u&&We(n[0],n[1],u)&&(s=1);++i<s;)for(var f=n[i],m=et(f),v=-1,C=m.length;++v<C;){var I=m[v],P=e[I];(P===l||mt(P,en[I])&&!de.call(e,I))&&(e[I]=f[I])}return e}),_h=ie(function(e){return e.push(l,hc),He(jc,l,e)});function ca(e,n,i){var s=null==e?l:wn(e,n);return s===l?i:s}function ua(e,n){return null!=e&&_c(e,n,Qu)}var Th=cc(function(e,n,i){null!=n&&"function"!=typeof n.toString&&(n=Qn.call(n)),e[n]=i},da(tt)),Ah=cc(function(e,n,i){null!=n&&"function"!=typeof n.toString&&(n=Qn.call(n)),de.call(e,n)?e[n].push(i):e[n]=[i]},K),kh=ie(Wr);function Le(e){return $e(e)?Ta(e):Ds(e)}function et(e){return $e(e)?Ta(e,!0):function il(e){if(!Ce(e))return function Ul(e){var n=[];if(null!=e)for(var i in ge(e))n.push(i);return n}(e);var n=Kr(e),i=[];for(var s in e)"constructor"==s&&(n||!de.call(e,s))||i.push(s);return i}(e)}var Ih=tr(function(e,n,i){Gi(e,n,i)}),jc=tr(function(e,n,i,s){Gi(e,n,i,s)}),Ph=Nt(function(e,n){var i={};if(null==e)return i;var s=!1;n=be(n,function(f){return f=rn(f,e),s||(s=f.length>1),f}),Ot(e,Qs(e),i),s&&(i=ft(i,7,Sl));for(var u=n.length;u--;)Us(i,n[u]);return i}),Dh=Nt(function(e,n){return null==e?{}:function sl(e,n){return Ga(e,n,function(i,s){return ua(e,s)})}(e,n)});function Xc(e,n){if(null==e)return{};var i=be(Qs(e),function(s){return[s]});return n=K(n),Ga(e,i,function(s,u){return n(s,u[0])})}var $c=dc(Le),eu=dc(et);function or(e){return null==e?[]:Br(e,Le(e))}var Jh=nr(function(e,n,i){return n=n.toLowerCase(),e+(i?tu(n):n)});function tu(e){return la(pe(e).toLowerCase())}function nu(e){return(e=pe(e))&&e.replace(xt,os).replace(yi,"")}var Vh=nr(function(e,n,i){return e+(i?"-":"")+n.toLowerCase()}),jh=nr(function(e,n,i){return e+(i?" ":"")+n.toLowerCase()}),Xh=oc("toLowerCase"),op=nr(function(e,n,i){return e+(i?"_":"")+n.toLowerCase()}),ap=nr(function(e,n,i){return e+(i?" ":"")+la(n)}),mp=nr(function(e,n,i){return e+(i?" ":"")+n.toUpperCase()}),la=oc("toUpperCase");function ru(e,n,i){return e=pe(e),(n=i?l:n)===l?function us(x){return Yo.test(x)}(e)?function ms(x){return x.match(qn)||[]}(e):function es(x){return x.match(To)||[]}(e):e.match(n)||[]}var iu=ie(function(e,n){try{return He(e,l,n)}catch(i){return sa(i)?i:new $(i)}}),vp=Nt(function(e,n){return Ve(n,function(i){i=Et(i),Lt(e,i,ia(e[i],e))}),e});function da(e){return function(){return e}}var wp=ac(),Cp=ac(!0);function tt(e){return e}function fa(e){return La("function"==typeof e?e:ft(e,1))}var Tp=ie(function(e,n){return function(i){return Wr(i,e,n)}}),Ap=ie(function(e,n){return function(i){return Wr(e,i,n)}});function ha(e,n,i){var s=Le(n),u=Hi(n,s);null==i&&(!Ce(n)||!u.length&&s.length)&&(i=n,n=e,e=this,u=Hi(n,Le(n)));var f=!(Ce(i)&&"chain"in i&&!i.chain),m=qt(e);return Ve(u,function(v){var C=n[v];e[v]=C,m&&(e.prototype[v]=function(){var I=this.__chain__;if(f||I){var P=e(this.__wrapped__),B=P.__actions__=Xe(this.__actions__);return B.push({func:C,args:arguments,thisArg:e}),P.__chain__=I,P}return C.apply(e,Ct([this.value()],arguments))})}),e}function pa(){}var Ep=Ws(be),Ip=Ws(Si),Pp=Ws(Er);function ou(e){return Xs(e)?Ir(Et(e)):function al(e){return function(n){return wn(n,e)}}(e)}var Dp=uc(),Bp=uc(!0);function ga(){return[]}function _a(){return!1}var Hp=Qi(function(e,n){return e+n},0),Gp=Js("ceil"),Yp=Qi(function(e,n){return e/n},1),Wp=Js("floor"),Xp=Qi(function(e,n){return e*n},1),$p=Js("round"),eg=Qi(function(e,n){return e-n},0);return d.after=function Mf(e,n){if("function"!=typeof n)throw new je(t);return e=ne(e),function(){if(--e<1)return n.apply(this,arguments)}},d.ary=Fc,d.assign=dh,d.assignIn=Vc,d.assignInWith=ao,d.assignWith=fh,d.at=hh,d.before=Lc,d.bind=ia,d.bindAll=vp,d.bindKey=Zc,d.castArray=function Ff(){if(!arguments.length)return[];var e=arguments[0];return ee(e)?e:[e]},d.chain=Rc,d.chunk=function Yl(e,n,i){n=(i?We(e,n,i):n===l)?1:ke(ne(n),0);var s=null==e?0:e.length;if(!s||n<1)return[];for(var u=0,f=0,m=O(se(s/n));u<s;)m[f++]=ht(e,u,u+=n);return m},d.compact=function Wl(e){for(var n=-1,i=null==e?0:e.length,s=0,u=[];++n<i;){var f=e[n];f&&(u[s++]=f)}return u},d.concat=function Jl(){var e=arguments.length;if(!e)return[];for(var n=O(e-1),i=arguments[0],s=e;s--;)n[s-1]=arguments[s];return Ct(ee(i)?Xe(i):[i],Ne(n,1))},d.cond=function yp(e){var n=null==e?0:e.length,i=K();return e=n?be(e,function(s){if("function"!=typeof s[1])throw new je(t);return[i(s[0]),s[1]]}):[],ie(function(s){for(var u=-1;++u<n;){var f=e[u];if(He(f[0],this,s))return He(f[1],this,s)}})},d.conforms=function bp(e){return function Yu(e){var n=Le(e);return function(i){return Oa(i,e,n)}}(ft(e,1))},d.constant=da,d.countBy=ef,d.create=function ph(e,n){var i=er(e);return null==n?i:ka(i,n)},d.curry=function Nc(e,n,i){var s=Zt(e,8,l,l,l,l,l,n=i?l:n);return s.placeholder=Nc.placeholder,s},d.curryRight=function Uc(e,n,i){var s=Zt(e,16,l,l,l,l,l,n=i?l:n);return s.placeholder=Uc.placeholder,s},d.debounce=qc,d.defaults=gh,d.defaultsDeep=_h,d.defer=Sf,d.delay=Tf,d.difference=zl,d.differenceBy=Ql,d.differenceWith=Kl,d.drop=function Vl(e,n,i){var s=null==e?0:e.length;return s?ht(e,(n=i||n===l?1:ne(n))<0?0:n,s):[]},d.dropRight=function jl(e,n,i){var s=null==e?0:e.length;return s?ht(e,0,(n=s-(n=i||n===l?1:ne(n)))<0?0:n):[]},d.dropRightWhile=function Xl(e,n){return e&&e.length?Wi(e,K(n,3),!0,!0):[]},d.dropWhile=function $l(e,n){return e&&e.length?Wi(e,K(n,3),!0):[]},d.fill=function ed(e,n,i,s){var u=null==e?0:e.length;return u?(i&&"number"!=typeof i&&We(e,n,i)&&(i=0,s=u),function Ju(e,n,i,s){var u=e.length;for((i=ne(i))<0&&(i=-i>u?0:u+i),(s=s===l||s>u?u:ne(s))<0&&(s+=u),s=i>s?0:Qc(s);i<s;)e[i++]=n;return e}(e,n,i,s)):[]},d.filter=function nf(e,n){return(ee(e)?wt:Pa)(e,K(n,3))},d.flatMap=function sf(e,n){return Ne(to(e,n),1)},d.flatMapDeep=function af(e,n){return Ne(to(e,n),It)},d.flatMapDepth=function cf(e,n,i){return i=i===l?1:ne(i),Ne(to(e,n),i)},d.flatten=Oc,d.flattenDeep=function td(e){return null!=e&&e.length?Ne(e,It):[]},d.flattenDepth=function nd(e,n){return null!=e&&e.length?Ne(e,n=n===l?1:ne(n)):[]},d.flip=function Af(e){return Zt(e,512)},d.flow=wp,d.flowRight=Cp,d.fromPairs=function rd(e){for(var n=-1,i=null==e?0:e.length,s={};++n<i;){var u=e[n];s[u[0]]=u[1]}return s},d.functions=function Ch(e){return null==e?[]:Hi(e,Le(e))},d.functionsIn=function Mh(e){return null==e?[]:Hi(e,et(e))},d.groupBy=uf,d.initial=function od(e){return null!=e&&e.length?ht(e,0,-1):[]},d.intersection=sd,d.intersectionBy=ad,d.intersectionWith=cd,d.invert=Th,d.invertBy=Ah,d.invokeMap=df,d.iteratee=fa,d.keyBy=ff,d.keys=Le,d.keysIn=et,d.map=to,d.mapKeys=function Oh(e,n){var i={};return n=K(n,3),kt(e,function(s,u,f){Lt(i,n(s,u,f),s)}),i},d.mapValues=function Eh(e,n){var i={};return n=K(n,3),kt(e,function(s,u,f){Lt(i,u,n(s,u,f))}),i},d.matches=function Mp(e){return Na(ft(e,1))},d.matchesProperty=function Sp(e,n){return Ua(e,ft(n,1))},d.memoize=ro,d.merge=Ih,d.mergeWith=jc,d.method=Tp,d.methodOf=Ap,d.mixin=ha,d.negate=io,d.nthArg=function Op(e){return e=ne(e),ie(function(n){return qa(n,e)})},d.omit=Ph,d.omitBy=function Rh(e,n){return Xc(e,io(K(n)))},d.once=function kf(e){return Lc(2,e)},d.orderBy=function hf(e,n,i,s){return null==e?[]:(ee(n)||(n=null==n?[]:[n]),ee(i=s?l:i)||(i=null==i?[]:[i]),Ha(e,n,i))},d.over=Ep,d.overArgs=Of,d.overEvery=Ip,d.overSome=Pp,d.partial=oa,d.partialRight=Hc,d.partition=pf,d.pick=Dh,d.pickBy=Xc,d.property=ou,d.propertyOf=function Rp(e){return function(n){return null==e?l:wn(e,n)}},d.pull=fd,d.pullAll=Ic,d.pullAllBy=function hd(e,n,i){return e&&e.length&&n&&n.length?Fs(e,n,K(i,2)):e},d.pullAllWith=function pd(e,n,i){return e&&e.length&&n&&n.length?Fs(e,n,l,i):e},d.pullAt=gd,d.range=Dp,d.rangeRight=Bp,d.rearg=Ef,d.reject=function mf(e,n){return(ee(e)?wt:Pa)(e,io(K(n,3)))},d.remove=function _d(e,n){var i=[];if(!e||!e.length)return i;var s=-1,u=[],f=e.length;for(n=K(n,3);++s<f;){var m=e[s];n(m,s,e)&&(i.push(m),u.push(s))}return Ya(e,u),i},d.rest=function If(e,n){if("function"!=typeof e)throw new je(t);return ie(e,n=n===l?n:ne(n))},d.reverse=na,d.sampleSize=function yf(e,n,i){return n=(i?We(e,n,i):n===l)?1:ne(n),(ee(e)?Uu:ll)(e,n)},d.set=function Fh(e,n,i){return null==e?e:zr(e,n,i)},d.setWith=function Lh(e,n,i,s){return s="function"==typeof s?s:l,null==e?e:zr(e,n,i,s)},d.shuffle=function bf(e){return(ee(e)?qu:fl)(e)},d.slice=function md(e,n,i){var s=null==e?0:e.length;return s?(i&&"number"!=typeof i&&We(e,n,i)?(n=0,i=s):(n=null==n?0:ne(n),i=i===l?s:ne(i)),ht(e,n,i)):[]},d.sortBy=Cf,d.sortedUniq=function Md(e){return e&&e.length?Ja(e):[]},d.sortedUniqBy=function Sd(e,n){return e&&e.length?Ja(e,K(n,2)):[]},d.split=function sp(e,n,i){return i&&"number"!=typeof i&&We(e,n,i)&&(n=i=l),(i=i===l?lt:i>>>0)?(e=pe(e))&&("string"==typeof n||null!=n&&!aa(n))&&!(n=st(n))&&Xt(e)?on(ot(e),0,i):e.split(n,i):[]},d.spread=function Pf(e,n){if("function"!=typeof e)throw new je(t);return n=null==n?0:ke(ne(n),0),ie(function(i){var s=i[n],u=on(i,0,n);return s&&Ct(u,s),He(e,this,u)})},d.tail=function Td(e){var n=null==e?0:e.length;return n?ht(e,1,n):[]},d.take=function Ad(e,n,i){return e&&e.length?ht(e,0,(n=i||n===l?1:ne(n))<0?0:n):[]},d.takeRight=function kd(e,n,i){var s=null==e?0:e.length;return s?ht(e,(n=s-(n=i||n===l?1:ne(n)))<0?0:n,s):[]},d.takeRightWhile=function Od(e,n){return e&&e.length?Wi(e,K(n,3),!1,!0):[]},d.takeWhile=function Ed(e,n){return e&&e.length?Wi(e,K(n,3)):[]},d.tap=function Wd(e,n){return n(e),e},d.throttle=function Rf(e,n,i){var s=!0,u=!0;if("function"!=typeof e)throw new je(t);return Ce(i)&&(s="leading"in i?!!i.leading:s,u="trailing"in i?!!i.trailing:u),qc(e,n,{leading:s,maxWait:n,trailing:u})},d.thru=eo,d.toArray=zc,d.toPairs=$c,d.toPairsIn=eu,d.toPath=function Up(e){return ee(e)?be(e,Et):at(e)?[e]:Xe(Sc(pe(e)))},d.toPlainObject=Kc,d.transform=function Zh(e,n,i){var s=ee(e),u=s||sn(e)||ir(e);if(n=K(n,4),null==i){var f=e&&e.constructor;i=u?s?new f:[]:Ce(e)&&qt(f)?er(jn(e)):{}}return(u?Ve:kt)(e,function(m,v,C){return n(i,m,v,C)}),i},d.unary=function Df(e){return Fc(e,1)},d.union=Id,d.unionBy=Pd,d.unionWith=Rd,d.uniq=function Dd(e){return e&&e.length?nn(e):[]},d.uniqBy=function Bd(e,n){return e&&e.length?nn(e,K(n,2)):[]},d.uniqWith=function Fd(e,n){return n="function"==typeof n?n:l,e&&e.length?nn(e,l,n):[]},d.unset=function Nh(e,n){return null==e||Us(e,n)},d.unzip=ra,d.unzipWith=Pc,d.update=function Uh(e,n,i){return null==e?e:Qa(e,n,Gs(i))},d.updateWith=function qh(e,n,i,s){return s="function"==typeof s?s:l,null==e?e:Qa(e,n,Gs(i),s)},d.values=or,d.valuesIn=function Hh(e){return null==e?[]:Br(e,et(e))},d.without=Ld,d.words=ru,d.wrap=function Bf(e,n){return oa(Gs(n),e)},d.xor=Zd,d.xorBy=Nd,d.xorWith=Ud,d.zip=qd,d.zipObject=function Hd(e,n){return Va(e||[],n||[],Gr)},d.zipObjectDeep=function Gd(e,n){return Va(e||[],n||[],zr)},d.zipWith=Yd,d.entries=$c,d.entriesIn=eu,d.extend=Vc,d.extendWith=ao,ha(d,d),d.add=Hp,d.attempt=iu,d.camelCase=Jh,d.capitalize=tu,d.ceil=Gp,d.clamp=function Gh(e,n,i){return i===l&&(i=n,n=l),i!==l&&(i=(i=gt(i))==i?i:0),n!==l&&(n=(n=gt(n))==n?n:0),xn(gt(e),n,i)},d.clone=function Lf(e){return ft(e,4)},d.cloneDeep=function Nf(e){return ft(e,5)},d.cloneDeepWith=function Uf(e,n){return ft(e,5,n="function"==typeof n?n:l)},d.cloneWith=function Zf(e,n){return ft(e,4,n="function"==typeof n?n:l)},d.conformsTo=function qf(e,n){return null==n||Oa(e,n,Le(n))},d.deburr=nu,d.defaultTo=function xp(e,n){return null==e||e!=e?n:e},d.divide=Yp,d.endsWith=function zh(e,n,i){e=pe(e),n=st(n);var s=e.length,u=i=i===l?s:xn(ne(i),0,s);return(i-=n.length)>=0&&e.slice(i,u)==n},d.eq=mt,d.escape=function Qh(e){return(e=pe(e))&&bo.test(e)?e.replace(ii,ss):e},d.escapeRegExp=function Kh(e){return(e=pe(e))&&Mo.test(e)?e.replace(Rn,"\\$&"):e},d.every=function tf(e,n,i){var s=ee(e)?Si:Wu;return i&&We(e,n,i)&&(n=l),s(e,K(n,3))},d.find=rf,d.findIndex=Ac,d.findKey=function mh(e,n){return Ti(e,K(n,3),kt)},d.findLast=of,d.findLastIndex=kc,d.findLastKey=function vh(e,n){return Ti(e,K(n,3),Es)},d.floor=Wp,d.forEach=Dc,d.forEachRight=Bc,d.forIn=function yh(e,n){return null==e?e:Os(e,K(n,3),et)},d.forInRight=function bh(e,n){return null==e?e:Ra(e,K(n,3),et)},d.forOwn=function xh(e,n){return e&&kt(e,K(n,3))},d.forOwnRight=function wh(e,n){return e&&Es(e,K(n,3))},d.get=ca,d.gt=Hf,d.gte=Gf,d.has=function Sh(e,n){return null!=e&&_c(e,n,zu)},d.hasIn=ua,d.head=Ec,d.identity=tt,d.includes=function lf(e,n,i,s){e=$e(e)?e:or(e),i=i&&!s?ne(i):0;var u=e.length;return i<0&&(i=ke(u+i,0)),so(e)?i<=u&&e.indexOf(n,i)>-1:!!u&&jt(e,n,i)>-1},d.indexOf=function id(e,n,i){var s=null==e?0:e.length;if(!s)return-1;var u=null==i?0:ne(i);return u<0&&(u=ke(s+u,0)),jt(e,n,u)},d.inRange=function Yh(e,n,i){return n=Ht(n),i===l?(i=n,n=0):i=Ht(i),function Ku(e,n,i){return e>=xe(n,i)&&e<ke(n,i)}(e=gt(e),n,i)},d.invoke=kh,d.isArguments=Sn,d.isArray=ee,d.isArrayBuffer=Yf,d.isArrayLike=$e,d.isArrayLikeObject=Oe,d.isBoolean=function Wf(e){return!0===e||!1===e||Se(e)&&Ye(e)==an},d.isBuffer=sn,d.isDate=Jf,d.isElement=function zf(e){return Se(e)&&1===e.nodeType&&!jr(e)},d.isEmpty=function Qf(e){if(null==e)return!0;if($e(e)&&(ee(e)||"string"==typeof e||"function"==typeof e.splice||sn(e)||ir(e)||Sn(e)))return!e.length;var n=Ue(e);if(n==nt||n==rt)return!e.size;if(Kr(e))return!Ds(e).length;for(var i in e)if(de.call(e,i))return!1;return!0},d.isEqual=function Kf(e,n){return Jr(e,n)},d.isEqualWith=function Vf(e,n,i){var s=(i="function"==typeof i?i:l)?i(e,n):l;return s===l?Jr(e,n,l,i):!!s},d.isError=sa,d.isFinite=function jf(e){return"number"==typeof e&&Re(e)},d.isFunction=qt,d.isInteger=Gc,d.isLength=oo,d.isMap=Yc,d.isMatch=function Xf(e,n){return e===n||Rs(e,n,Vs(n))},d.isMatchWith=function $f(e,n,i){return i="function"==typeof i?i:l,Rs(e,n,Vs(n),i)},d.isNaN=function eh(e){return Wc(e)&&e!=+e},d.isNative=function th(e){if(Ll(e))throw new $("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Fa(e)},d.isNil=function rh(e){return null==e},d.isNull=function nh(e){return null===e},d.isNumber=Wc,d.isObject=Ce,d.isObjectLike=Se,d.isPlainObject=jr,d.isRegExp=aa,d.isSafeInteger=function ih(e){return Gc(e)&&e>=-yt&&e<=yt},d.isSet=Jc,d.isString=so,d.isSymbol=at,d.isTypedArray=ir,d.isUndefined=function oh(e){return e===l},d.isWeakMap=function sh(e){return Se(e)&&Ue(e)==dn},d.isWeakSet=function ah(e){return Se(e)&&"[object WeakSet]"==Ye(e)},d.join=function ud(e,n){return null==e?"":Tt.call(e,n)},d.kebabCase=Vh,d.last=pt,d.lastIndexOf=function ld(e,n,i){var s=null==e?0:e.length;if(!s)return-1;var u=s;return i!==l&&(u=(u=ne(i))<0?ke(s+u,0):xe(u,s-1)),n==n?function hs(x,E,O){for(var H=O+1;H--;)if(x[H]===E)return H;return H}(e,n,u):Hn(e,Ai,u,!0)},d.lowerCase=jh,d.lowerFirst=Xh,d.lt=ch,d.lte=uh,d.max=function Jp(e){return e&&e.length?qi(e,tt,Is):l},d.maxBy=function zp(e,n){return e&&e.length?qi(e,K(n,2),Is):l},d.mean=function Qp(e){return ki(e,tt)},d.meanBy=function Kp(e,n){return ki(e,K(n,2))},d.min=function Vp(e){return e&&e.length?qi(e,tt,Bs):l},d.minBy=function jp(e,n){return e&&e.length?qi(e,K(n,2),Bs):l},d.stubArray=ga,d.stubFalse=_a,d.stubObject=function Fp(){return{}},d.stubString=function Lp(){return""},d.stubTrue=function Zp(){return!0},d.multiply=Xp,d.nth=function dd(e,n){return e&&e.length?qa(e,ne(n)):l},d.noConflict=function kp(){return Be._===this&&(Be._=Cs),this},d.noop=pa,d.now=no,d.pad=function $h(e,n,i){e=pe(e);var s=(n=ne(n))?$t(e):0;if(!n||s>=n)return e;var u=(n-s)/2;return Ki(z(u),i)+e+Ki(se(u),i)},d.padEnd=function ep(e,n,i){e=pe(e);var s=(n=ne(n))?$t(e):0;return n&&s<n?e+Ki(n-s,i):e},d.padStart=function tp(e,n,i){e=pe(e);var s=(n=ne(n))?$t(e):0;return n&&s<n?Ki(n-s,i)+e:e},d.parseInt=function np(e,n,i){return i||null==n?n=0:n&&(n=+n),cu(pe(e).replace(hr,""),n||0)},d.random=function Wh(e,n,i){if(i&&"boolean"!=typeof i&&We(e,n,i)&&(n=i=l),i===l&&("boolean"==typeof n?(i=n,n=l):"boolean"==typeof e&&(i=e,e=l)),e===l&&n===l?(e=0,n=1):(e=Ht(e),n===l?(n=e,e=0):n=Ht(n)),e>n){var s=e;e=n,n=s}if(i||e%1||n%1){var u=Ma();return xe(e+u*(n-e+wa("1e-"+((u+"").length-1))),n)}return Ls(e,n)},d.reduce=function gf(e,n,i){var s=ee(e)?Or:Oi,u=arguments.length<3;return s(e,K(n,4),i,u,tn)},d.reduceRight=function _f(e,n,i){var s=ee(e)?jo:Oi,u=arguments.length<3;return s(e,K(n,4),i,u,Ia)},d.repeat=function rp(e,n,i){return n=(i?We(e,n,i):n===l)?1:ne(n),Zs(pe(e),n)},d.replace=function ip(){var e=arguments,n=pe(e[0]);return e.length<3?n:n.replace(e[1],e[2])},d.result=function Bh(e,n,i){var s=-1,u=(n=rn(n,e)).length;for(u||(u=1,e=l);++s<u;){var f=null==e?l:e[Et(n[s])];f===l&&(s=u,f=i),e=qt(f)?f.call(e):f}return e},d.round=$p,d.runInContext=x,d.sample=function vf(e){return(ee(e)?Aa:ul)(e)},d.size=function xf(e){if(null==e)return 0;if($e(e))return so(e)?$t(e):e.length;var n=Ue(e);return n==nt||n==rt?e.size:Ds(e).length},d.snakeCase=op,d.some=function wf(e,n,i){var s=ee(e)?Er:hl;return i&&We(e,n,i)&&(n=l),s(e,K(n,3))},d.sortedIndex=function vd(e,n){return Yi(e,n)},d.sortedIndexBy=function yd(e,n,i){return Ns(e,n,K(i,2))},d.sortedIndexOf=function bd(e,n){var i=null==e?0:e.length;if(i){var s=Yi(e,n);if(s<i&&mt(e[s],n))return s}return-1},d.sortedLastIndex=function xd(e,n){return Yi(e,n,!0)},d.sortedLastIndexBy=function wd(e,n,i){return Ns(e,n,K(i,2),!0)},d.sortedLastIndexOf=function Cd(e,n){if(null!=e&&e.length){var s=Yi(e,n,!0)-1;if(mt(e[s],n))return s}return-1},d.startCase=ap,d.startsWith=function cp(e,n,i){return e=pe(e),i=null==i?0:xn(ne(i),0,e.length),n=st(n),e.slice(i,i+n.length)==n},d.subtract=eg,d.sum=function tg(e){return e&&e.length?Rr(e,tt):0},d.sumBy=function ng(e,n){return e&&e.length?Rr(e,K(n,2)):0},d.template=function up(e,n,i){var s=d.templateSettings;i&&We(e,n,i)&&(n=l),e=pe(e),n=ao({},n,s,fc);var v,C,u=ao({},n.imports,s.imports,fc),f=Le(u),m=Br(u,f),I=0,P=n.interpolate||hn,B="__p += '",U=Zr((n.escape||hn).source+"|"+P.source+"|"+(P===oi?Oo:hn).source+"|"+(n.evaluate||hn).source+"|$","g"),Y="//# sourceURL="+(de.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wo+"]")+"\n";e.replace(U,function(j,oe,ce,ct,Je,ut){return ce||(ce=ct),B+=e.slice(I,ut).replace(Rt,as),oe&&(v=!0,B+="' +\n__e("+oe+") +\n'"),Je&&(C=!0,B+="';\n"+Je+";\n__p += '"),ce&&(B+="' +\n((__t = ("+ce+")) == null ? '' : __t) +\n'"),I=ut+j.length,j}),B+="';\n";var V=de.call(n,"variable")&&n.variable;if(V){if(Ao.test(V))throw new $("Invalid `variable` option passed into `_.template`")}else B="with (obj) {\n"+B+"\n}\n";B=(C?B.replace(In,""):B).replace(Pn,"$1").replace(yo,"$1;"),B="function("+(V||"obj")+") {\n"+(V?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(v?", __e = _.escape":"")+(C?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+B+"return __p\n}";var re=iu(function(){return ue(f,Y+"return "+B).apply(l,m)});if(re.source=B,sa(re))throw re;return re},d.times=function Np(e,n){if((e=ne(e))<1||e>yt)return[];var i=lt,s=xe(e,lt);n=K(n),e-=lt;for(var u=Dr(s,n);++i<e;)n(i);return u},d.toFinite=Ht,d.toInteger=ne,d.toLength=Qc,d.toLower=function lp(e){return pe(e).toLowerCase()},d.toNumber=gt,d.toSafeInteger=function lh(e){return e?xn(ne(e),-yt,yt):0===e?e:0},d.toString=pe,d.toUpper=function dp(e){return pe(e).toUpperCase()},d.trim=function fp(e,n,i){if((e=pe(e))&&(i||n===l))return Ei(e);if(!e||!(n=st(n)))return e;var s=ot(e),u=ot(n);return on(s,Ii(s,u),Pi(s,u)+1).join("")},d.trimEnd=function hp(e,n,i){if((e=pe(e))&&(i||n===l))return e.slice(0,Ri(e)+1);if(!e||!(n=st(n)))return e;var s=ot(e);return on(s,0,Pi(s,ot(n))+1).join("")},d.trimStart=function pp(e,n,i){if((e=pe(e))&&(i||n===l))return e.replace(hr,"");if(!e||!(n=st(n)))return e;var s=ot(e);return on(s,Ii(s,ot(n))).join("")},d.truncate=function gp(e,n){var i=30,s="...";if(Ce(n)){var u="separator"in n?n.separator:u;i="length"in n?ne(n.length):i,s="omission"in n?st(n.omission):s}var f=(e=pe(e)).length;if(Xt(e)){var m=ot(e);f=m.length}if(i>=f)return e;var v=i-$t(s);if(v<1)return s;var C=m?on(m,0,v).join(""):e.slice(0,v);if(u===l)return C+s;if(m&&(v+=C.length-v),aa(u)){if(e.slice(v).search(u)){var I,P=C;for(u.global||(u=Zr(u.source,pe(Dn.exec(u))+"g")),u.lastIndex=0;I=u.exec(P);)var B=I.index;C=C.slice(0,B===l?v:B)}}else if(e.indexOf(st(u),v)!=v){var U=C.lastIndexOf(u);U>-1&&(C=C.slice(0,U))}return C+s},d.unescape=function _p(e){return(e=pe(e))&&fr.test(e)?e.replace(ri,ps):e},d.uniqueId=function qp(e){var n=++xs;return pe(e)+n},d.upperCase=mp,d.upperFirst=la,d.each=Dc,d.eachRight=Bc,d.first=Ec,ha(d,function(){var e={};return kt(d,function(n,i){de.call(d.prototype,i)||(e[i]=n)}),e}(),{chain:!1}),d.VERSION="4.17.21",Ve(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){d[e].placeholder=d}),Ve(["drop","take"],function(e,n){ae.prototype[e]=function(i){i=i===l?1:ke(ne(i),0);var s=this.__filtered__&&!n?new ae(this):this.clone();return s.__filtered__?s.__takeCount__=xe(i,s.__takeCount__):s.__views__.push({size:xe(i,lt),type:e+(s.__dir__<0?"Right":"")}),s},ae.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),Ve(["filter","map","takeWhile"],function(e,n){var i=n+1,s=1==i||3==i;ae.prototype[e]=function(u){var f=this.clone();return f.__iteratees__.push({iteratee:K(u,3),type:i}),f.__filtered__=f.__filtered__||s,f}}),Ve(["head","last"],function(e,n){var i="take"+(n?"Right":"");ae.prototype[e]=function(){return this[i](1).value()[0]}}),Ve(["initial","tail"],function(e,n){var i="drop"+(n?"":"Right");ae.prototype[e]=function(){return this.__filtered__?new ae(this):this[i](1)}}),ae.prototype.compact=function(){return this.filter(tt)},ae.prototype.find=function(e){return this.filter(e).head()},ae.prototype.findLast=function(e){return this.reverse().find(e)},ae.prototype.invokeMap=ie(function(e,n){return"function"==typeof e?new ae(this):this.map(function(i){return Wr(i,e,n)})}),ae.prototype.reject=function(e){return this.filter(io(K(e)))},ae.prototype.slice=function(e,n){e=ne(e);var i=this;return i.__filtered__&&(e>0||n<0)?new ae(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),n!==l&&(i=(n=ne(n))<0?i.dropRight(-n):i.take(n-e)),i)},ae.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ae.prototype.toArray=function(){return this.take(lt)},kt(ae.prototype,function(e,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),s=/^(?:head|last)$/.test(n),u=d[s?"take"+("last"==n?"Right":""):n],f=s||/^find/.test(n);!u||(d.prototype[n]=function(){var m=this.__wrapped__,v=s?[1]:arguments,C=m instanceof ae,I=v[0],P=C||ee(m),B=function(oe){var ce=u.apply(d,Ct([oe],v));return s&&U?ce[0]:ce};P&&i&&"function"==typeof I&&1!=I.length&&(C=P=!1);var U=this.__chain__,Y=!!this.__actions__.length,V=f&&!U,re=C&&!Y;if(!f&&P){m=re?m:new ae(this);var j=e.apply(m,v);return j.__actions__.push({func:eo,args:[B],thisArg:l}),new dt(j,U)}return V&&re?e.apply(this,v):(j=this.thru(B),V?s?j.value()[0]:j.value():j)})}),Ve(["pop","push","shift","sort","splice","unshift"],function(e){var n=Wn[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",s=/^(?:pop|shift)$/.test(e);d.prototype[e]=function(){var u=arguments;if(s&&!this.__chain__){var f=this.value();return n.apply(ee(f)?f:[],u)}return this[i](function(m){return n.apply(ee(m)?m:[],u)})}}),kt(ae.prototype,function(e,n){var i=d[n];if(i){var s=i.name+"";de.call($n,s)||($n[s]=[]),$n[s].push({name:n,func:i})}}),$n[zi(l,2).name]=[{name:"wrapper",func:l}],ae.prototype.clone=function gu(){var e=new ae(this.__wrapped__);return e.__actions__=Xe(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Xe(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Xe(this.__views__),e},ae.prototype.reverse=function _u(){if(this.__filtered__){var e=new ae(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},ae.prototype.value=function mu(){var e=this.__wrapped__.value(),n=this.__dir__,i=ee(e),s=n<0,u=i?e.length:0,f=function Ol(e,n,i){for(var s=-1,u=i.length;++s<u;){var f=i[s],m=f.size;switch(f.type){case"drop":e+=m;break;case"dropRight":n-=m;break;case"take":n=xe(n,e+m);break;case"takeRight":e=ke(e,n-m)}}return{start:e,end:n}}(0,u,this.__views__),m=f.start,v=f.end,C=v-m,I=s?v:m-1,P=this.__iteratees__,B=P.length,U=0,Y=xe(C,this.__takeCount__);if(!i||!s&&u==C&&Y==C)return Ka(e,this.__actions__);var V=[];e:for(;C--&&U<Y;){for(var re=-1,j=e[I+=n];++re<B;){var oe=P[re],ct=oe.type,Je=(0,oe.iteratee)(j);if(2==ct)j=Je;else if(!Je){if(1==ct)continue e;break e}}V[U++]=j}return V},d.prototype.at=Jd,d.prototype.chain=function zd(){return Rc(this)},d.prototype.commit=function Qd(){return new dt(this.value(),this.__chain__)},d.prototype.next=function Kd(){this.__values__===l&&(this.__values__=zc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?l:this.__values__[this.__index__++]}},d.prototype.plant=function jd(e){for(var n,i=this;i instanceof Ni;){var s=Tc(i);s.__index__=0,s.__values__=l,n?u.__wrapped__=s:n=s;var u=s;i=i.__wrapped__}return u.__wrapped__=e,n},d.prototype.reverse=function Xd(){var e=this.__wrapped__;if(e instanceof ae){var n=e;return this.__actions__.length&&(n=new ae(this)),(n=n.reverse()).__actions__.push({func:eo,args:[na],thisArg:l}),new dt(n,this.__chain__)}return this.thru(na)},d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=function $d(){return Ka(this.__wrapped__,this.__actions__)},d.prototype.first=d.prototype.head,o&&(d.prototype[o]=function Vd(){return this}),d}();Be._=Yn,(R=function(){return Yn}.call(J,S,J,ze))!==l&&(ze.exports=R)}.call(this)},2754:(ze,J,S)=>{"use strict";J.TD=void 0;var l=S(4354);Object.defineProperty(J,"TD",{enumerable:!0,get:function(){return l.requestMediaPermissions}})},4354:function(ze,J,S){"use strict";var R=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(J,"__esModule",{value:!0}),J.requestVideoPermissions=J.requestAudioPermissions=J.requestMediaPermissions=J.MediaPermissionsErrorType=void 0;const l=R(S(7230));var b,p;(p=b=J.MediaPermissionsErrorType||(J.MediaPermissionsErrorType={})).SystemPermissionDenied="SystemPermissionDenied",p.UserPermissionDenied="UserPermissionDenied",p.CouldNotStartVideoSource="CouldNotStartVideoSource",p.Generic="Generic",J.requestMediaPermissions=p=>new Promise((g,Z)=>{navigator.mediaDevices.getUserMedia(p??{audio:!0,video:!0}).then(T=>{T.getTracks().forEach(y=>{y.stop()}),g(!0)}).catch(T=>{const A=l.default.getParser(window.navigator.userAgent).getBrowserName(),M=T.name,w=T.message;let L=b.Generic;"Chrome"===A?"NotAllowedError"===M?"Permission denied by system"===w?L=b.SystemPermissionDenied:"Permission denied"===w&&(L=b.UserPermissionDenied):"NotReadableError"===M&&(L=b.CouldNotStartVideoSource):"Safari"===A?"NotAllowedError"===M&&(L=b.UserPermissionDenied):"Microsoft Edge"===A?"NotAllowedError"===M?L=b.UserPermissionDenied:"NotReadableError"===M&&(L=b.CouldNotStartVideoSource):"Firefox"===A&&("NotFoundError"===M||"NotReadableError"===M?L=b.SystemPermissionDenied:"NotAllowedError"===M?L=b.UserPermissionDenied:"AbortError"===M&&(L=b.CouldNotStartVideoSource)),Z({type:L,name:T.name,message:T.message})})}),J.requestAudioPermissions=()=>(0,J.requestMediaPermissions)({audio:!0,video:!1}),J.requestVideoPermissions=()=>(0,J.requestMediaPermissions)({audio:!1,video:!0})},5439:ze=>{window,ze.exports=function(J){var S={};function R(l){if(S[l])return S[l].exports;var b=S[l]={i:l,l:!1,exports:{}};return J[l].call(b.exports,b,b.exports,R),b.l=!0,b.exports}return R.m=J,R.c=S,R.d=function(l,b,k){R.o(l,b)||Object.defineProperty(l,b,{enumerable:!0,get:k})},R.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},R.t=function(l,b){if(1&b&&(l=R(l)),8&b||4&b&&"object"==typeof l&&l&&l.__esModule)return l;var k=Object.create(null);if(R.r(k),Object.defineProperty(k,"default",{enumerable:!0,value:l}),2&b&&"string"!=typeof l)for(var F in l)R.d(k,F,function(t){return l[t]}.bind(null,F));return k},R.n=function(l){var b=l&&l.__esModule?function(){return l.default}:function(){return l};return R.d(b,"a",b),b},R.o=function(l,b){return Object.prototype.hasOwnProperty.call(l,b)},R.p="/dist/",R(R.s=1)}([function(J,S,R){"use strict";var l=this&&this.__awaiter||function(k,F,t,p){return new(t||(t=Promise))(function(g,Z){function T(M){try{A(p.next(M))}catch(w){Z(w)}}function y(M){try{A(p.throw(M))}catch(w){Z(w)}}function A(M){var w;M.done?g(M.value):(w=M.value,w instanceof t?w:new t(function(L){L(w)})).then(T,y)}A((p=p.apply(k,F||[])).next())})},b=this&&this.__generator||function(k,F){var t,p,g,Z,T={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return Z={next:y(0),throw:y(1),return:y(2)},"function"==typeof Symbol&&(Z[Symbol.iterator]=function(){return this}),Z;function y(A){return function(M){return function(w){if(t)throw new TypeError("Generator is already executing.");for(;Z&&(Z=0,w[0]&&(T=0)),T;)try{if(t=1,p&&(g=2&w[0]?p.return:w[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,w[1])).done)return g;switch(p=0,g&&(w=[2&w[0],g.value]),w[0]){case 0:case 1:g=w;break;case 4:return T.label++,{value:w[1],done:!1};case 5:T.label++,p=w[1],w=[0];continue;case 7:w=T.ops.pop(),T.trys.pop();continue;default:if(!((g=(g=T.trys).length>0&&g[g.length-1])||6!==w[0]&&2!==w[0])){T=0;continue}if(3===w[0]&&(!g||w[1]>g[0]&&w[1]<g[3])){T.label=w[1];break}if(6===w[0]&&T.label<g[1]){T.label=g[1],g=w;break}if(g&&T.label<g[2]){T.label=g[2],T.ops.push(w);break}g[2]&&T.ops.pop(),T.trys.pop();continue}w=F.call(k,T)}catch(L){w=[6,L],p=0}finally{t=g=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([A,M])}}};Object.defineProperty(S,"__esModule",{value:!0}),S.file2b64=void 0,S.file2b64=function(k){return l(this,void 0,void 0,function(){var F,t;return b(this,function(p){return F=new FileReader,t=new Promise(function(g,Z){F.addEventListener("load",function(){var T,y=null===(T=F.result)||void 0===T?void 0:T.toString();y?g(y):Z("could not convert file to base64")},!1)}),F.readAsDataURL(k),[2,t]})})}},function(J,S,R){"use strict";var l=this&&this.__awaiter||function(T,y,A,M){return new(A||(A=Promise))(function(w,L){function N(q){try{te(M.next(q))}catch(W){L(W)}}function Q(q){try{te(M.throw(q))}catch(W){L(W)}}function te(q){var W;q.done?w(q.value):(W=q.value,W instanceof A?W:new A(function(fe){fe(W)})).then(N,Q)}te((M=M.apply(T,y||[])).next())})},b=this&&this.__generator||function(T,y){var A,M,w,L,N={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return L={next:Q(0),throw:Q(1),return:Q(2)},"function"==typeof Symbol&&(L[Symbol.iterator]=function(){return this}),L;function Q(te){return function(q){return function(W){if(A)throw new TypeError("Generator is already executing.");for(;L&&(L=0,W[0]&&(N=0)),N;)try{if(A=1,M&&(w=2&W[0]?M.return:W[0]?M.throw||((w=M.return)&&w.call(M),0):M.next)&&!(w=w.call(M,W[1])).done)return w;switch(M=0,w&&(W=[2&W[0],w.value]),W[0]){case 0:case 1:w=W;break;case 4:return N.label++,{value:W[1],done:!1};case 5:N.label++,M=W[1],W=[0];continue;case 7:W=N.ops.pop(),N.trys.pop();continue;default:if(!((w=(w=N.trys).length>0&&w[w.length-1])||6!==W[0]&&2!==W[0])){N=0;continue}if(3===W[0]&&(!w||W[1]>w[0]&&W[1]<w[3])){N.label=W[1];break}if(6===W[0]&&N.label<w[1]){N.label=w[1],w=W;break}if(w&&N.label<w[2]){N.label=w[2],N.ops.push(W);break}w[2]&&N.ops.pop(),N.trys.pop();continue}W=y.call(T,N)}catch(fe){W=[6,fe],M=0}finally{A=w=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([te,q])}}};Object.defineProperty(S,"__esModule",{value:!0}),S.imageCompressor=void 0;var k=R(2),F=R(3),t=R(0),p=R(4),g=R(5),Z=function(){function T(y,A){var M=this;this.quill=y,this.options=A||{};var w=!!A.debug;this.Logger=new g.ConsoleLogger(w,!!A.suppressErrorLogging),(0,F.warnAboutOptions)(A,this.Logger),this.imageDrop=new k.ImageDrop(y,function(Q){return l(M,void 0,void 0,function(){var te;return b(this,function(q){switch(q.label){case 0:return this.Logger.log("onImageDrop",{dataUrl:Q}),[4,this.downscaleImageFromUrl(Q)];case 1:return te=q.sent(),this.insertToEditor(te,T.b64toBlob(te)),[2]}})})},this.Logger),this.Logger.log("fileChanged",{options:A,quill:y,debug:w});var N=this.quill.getModule("toolbar");N?N.addHandler("image",function(){return M.selectLocalImage()}):this.Logger.error("Quill toolbar module not found! need { toolbar: // options } in Quill.modules for image icon to sit in")}return T.b64toBlob=function(y){for(var A=atob(y.split(",")[1]),M=y.slice(5).split(";")[0],w=new ArrayBuffer(A.length),L=new Uint8Array(w),N=0;N<A.length;N++)L[N]=A.charCodeAt(N);return new Blob([w],{type:M})},T.prototype.selectLocalImage=function(y){var A=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=function(){return A.fileChanged().then(function(){return y&&y()})},document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){A.fileHolder&&document.body.removeChild(A.fileHolder)})},T.prototype.fileChanged=function(y){var A;return l(this,void 0,void 0,function(){var M,w,L,N;return b(this,function(Q){switch(Q.label){case 0:return(M=y||(null===(A=this.fileHolder)||void 0===A?void 0:A.files))&&M.length?(this.Logger.log("fileChanged",{file:w=M[0]}),w?[4,(0,t.file2b64)(w)]:[2]):[2];case 1:return L=Q.sent(),[4,this.downscaleImageFromUrl(L)];case 2:return N=Q.sent(),this.insertToEditor(N,T.b64toBlob(N)),[2]}})})},T.prototype.downscaleImageFromUrl=function(y){return l(this,void 0,void 0,function(){var A;return b(this,function(M){switch(M.label){case 0:return[4,(0,p.downscaleImage)(this.Logger,y,this.options.maxWidth,this.options.maxHeight,this.options.imageType,this.options.keepImageTypes,this.options.ignoreImageTypes,this.options.quality)];case 1:return A=M.sent(),this.Logger.log("downscaleImageFromUrl",{dataUrl:y,dataUrlCompressed:A}),[2,A]}})})},T.prototype.insertToEditor=function(y,A){if(this.options.insertIntoEditor)this.options.insertIntoEditor(y,A);else{this.Logger.log("insertToEditor",{url:y}),this.range=this.quill.getSelection();var M=this.range;if(!M)return;this.logFileSize(y),this.quill.insertEmbed(M.index,"image","".concat(y),"user"),M.index++,this.quill.setSelection(M,"api")}},T.prototype.logFileSize=function(y){var A=(Math.round(3*(y.length-22)/4)/1024).toFixed(0);this.Logger.log("estimated img size: "+A+" kb")},T}();S.imageCompressor=Z,window.imageCompressor=Z,S.default=Z},function(J,S,R){"use strict";var l=this&&this.__awaiter||function(Z,T,y,A){return new(y||(y=Promise))(function(M,w){function L(te){try{Q(A.next(te))}catch(q){w(q)}}function N(te){try{Q(A.throw(te))}catch(q){w(q)}}function Q(te){var q;te.done?M(te.value):(q=te.value,q instanceof y?q:new y(function(W){W(q)})).then(L,N)}Q((A=A.apply(Z,T||[])).next())})},b=this&&this.__generator||function(Z,T){var y,A,M,w,L={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return w={next:N(0),throw:N(1),return:N(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function N(Q){return function(te){return function(q){if(y)throw new TypeError("Generator is already executing.");for(;w&&(w=0,q[0]&&(L=0)),L;)try{if(y=1,A&&(M=2&q[0]?A.return:q[0]?A.throw||((M=A.return)&&M.call(A),0):A.next)&&!(M=M.call(A,q[1])).done)return M;switch(A=0,M&&(q=[2&q[0],M.value]),q[0]){case 0:case 1:M=q;break;case 4:return L.label++,{value:q[1],done:!1};case 5:L.label++,A=q[1],q=[0];continue;case 7:q=L.ops.pop(),L.trys.pop();continue;default:if(!((M=(M=L.trys).length>0&&M[M.length-1])||6!==q[0]&&2!==q[0])){L=0;continue}if(3===q[0]&&(!M||q[1]>M[0]&&q[1]<M[3])){L.label=q[1];break}if(6===q[0]&&L.label<M[1]){L.label=M[1],M=q;break}if(M&&L.label<M[2]){L.label=M[2],L.ops.push(q);break}M[2]&&L.ops.pop(),L.trys.pop();continue}q=T.call(Z,L)}catch(W){q=[6,W],A=0}finally{y=M=0}if(5&q[0])throw q[1];return{value:q[0]?q[1]:void 0,done:!0}}([Q,te])}}};Object.defineProperty(S,"__esModule",{value:!0}),S.ImageDrop=void 0;var k=R(0),F=function(){function Z(T,y,A){var M=this;this.quill=T,this.onNewDataUrl=y,this.logger=A,this.quill.root.addEventListener("drop",function(w){return M.handleDrop(w)},!1),this.quill.root.addEventListener("paste",function(w){return M.handlePaste(w)},!1)}return Z.prototype.handleDrop=function(T){return l(this,void 0,void 0,function(){var y,A,M,w,L,N,Q;return b(this,function(te){switch(te.label){case 0:return T.preventDefault(),document.caretRangeFromPoint&&(y=document.getSelection(),A=document.caretRangeFromPoint(T.clientX,T.clientY),y&&A&&y.setBaseAndExtent(A.startContainer,A.startOffset,A.startContainer,A.startOffset)),[4,p(T)];case 1:return M=te.sent(),w=Array.from(M||[]).filter(function(q){return g(q.type)}),(L=w?.[0])?[4,(0,k.file2b64)(L)]:[3,3];case 2:return Q=te.sent(),this.logger.log("handleNewImageFiles",{evt:T,files:M,filesFiltered:w,firstImage:L,base64ImageSrc:Q}),this.onNewDataUrl(Q),[2];case 3:return[4,t(T)];case 4:return(N=te.sent())?[4,(0,k.file2b64)(N)]:[3,6];case 5:return Q=te.sent(),this.logger.log("handleNewImageFiles",{evt:T,blob:N,base64ImageSrc:Q}),this.onNewDataUrl(Q),[2];case 6:return[2]}})})},Z.prototype.handlePaste=function(T){var y,A;return l(this,void 0,void 0,function(){var M,w,L,N;return b(this,function(Q){switch(Q.label){case 0:return M=Array.from((null===(y=T?.clipboardData)||void 0===y?void 0:y.items)||[]),this.logger.log("handlePaste",{files:M,evt:T}),w=M.filter(function(te){return g(te.type)}),this.logger.log("handlePaste",{images:w,evt:T}),w.length?w.filter(function(te){return"text/html"!==te.type}).length?(T.preventDefault(),(L=null===(A=w.pop())||void 0===A?void 0:A.getAsFile())?[4,(0,k.file2b64)(L)]:[2]):(this.logger.log("handlePaste also detected html"),[2]):[2];case 1:return N=Q.sent(),this.logger.log("handleNewImageFiles",{base64ImageSrc:N}),this.onNewDataUrl(N),[2]}})})},Z}();function t(Z){var T;return l(this,void 0,void 0,function(){var y;return b(this,function(A){switch(A.label){case 0:return(y=null===(T=Z.dataTransfer)||void 0===T?void 0:T.getData("URL"))?[4,fetch(y)]:[3,3];case 1:return[4,A.sent().blob()];case 2:return[2,A.sent()];case 3:return[2]}})})}function p(Z){var T;return l(this,void 0,void 0,function(){return b(this,function(y){return[2,null===(T=Z?.dataTransfer)||void 0===T?void 0:T.files]})})}function g(Z){return!!Z.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp)/i)}S.ImageDrop=F},function(J,S,R){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.warnAboutOptions=void 0,S.warnAboutOptions=function(l,b){l.maxWidth=l.maxWidth||1e3,l.maxHeight=l.maxHeight||1e3,l.maxWidth&&"number"!=typeof l.maxWidth&&(b.warn("[config error] 'maxWidth' is required to be a \"number\" (in pixels), \nreceived: ".concat(l.maxWidth,"\n-> using default 1000")),l.maxWidth=1e3),l.maxHeight&&"number"!=typeof l.maxHeight&&(b.warn("[config error] 'maxHeight' is required to be a \"number\" (in pixels), \nreceived: ".concat(l.maxHeight,"\n-> using default 1000")),l.maxHeight=1e3),l.quality&&"number"!=typeof l.quality&&(b.warn("quill.imageCompressor: [config error] 'quality' is required to be a \"number\", \nreceived: ".concat(l.quality,"\n-> using default 0.7")),l.quality=.7),!l.imageType||"string"==typeof l.imageType&&l.imageType.startsWith("image/")||(b.warn('quill.imageCompressor: [config error] \'imageType\' is required be in the form of "image/png" or "image/jpeg" etc ..., \nreceived: '.concat(l.imageType,"\n-> using default image/jpeg")),l.imageType="image/jpeg"),l.keepImageTypes||(l.keepImageTypes=[]),l.keepImageTypes&&!Array.isArray(l.keepImageTypes)&&(b.warn("quill.imageCompressor: [config error] 'keepImageTypes' is required to be a \"array\", received: ".concat(l.keepImageTypes," -> using default []")),l.keepImageTypes=[]),l.ignoreImageTypes||(l.ignoreImageTypes=[]),l.ignoreImageTypes&&!Array.isArray(l.ignoreImageTypes)&&(b.warn("quill.imageCompressor: [config error] 'ignoreImageTypes' is required to be a \"array\", received: ".concat(l.ignoreImageTypes," -> using default []")),l.ignoreImageTypes=[]),l.insertIntoEditor&&"function"!=typeof l.insertIntoEditor&&(b.warn("quill.imageCompressor: [config error] 'insertIntoEditor' is required to be a \"function\", received: ".concat(l.insertIntoEditor," -> using default undefined")),l.insertIntoEditor=void 0)}},function(J,S,R){"use strict";var l=this&&this.__awaiter||function(k,F,t,p){return new(t||(t=Promise))(function(g,Z){function T(M){try{A(p.next(M))}catch(w){Z(w)}}function y(M){try{A(p.throw(M))}catch(w){Z(w)}}function A(M){var w;M.done?g(M.value):(w=M.value,w instanceof t?w:new t(function(L){L(w)})).then(T,y)}A((p=p.apply(k,F||[])).next())})},b=this&&this.__generator||function(k,F){var t,p,g,Z,T={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return Z={next:y(0),throw:y(1),return:y(2)},"function"==typeof Symbol&&(Z[Symbol.iterator]=function(){return this}),Z;function y(A){return function(M){return function(w){if(t)throw new TypeError("Generator is already executing.");for(;Z&&(Z=0,w[0]&&(T=0)),T;)try{if(t=1,p&&(g=2&w[0]?p.return:w[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,w[1])).done)return g;switch(p=0,g&&(w=[2&w[0],g.value]),w[0]){case 0:case 1:g=w;break;case 4:return T.label++,{value:w[1],done:!1};case 5:T.label++,p=w[1],w=[0];continue;case 7:w=T.ops.pop(),T.trys.pop();continue;default:if(!((g=(g=T.trys).length>0&&g[g.length-1])||6!==w[0]&&2!==w[0])){T=0;continue}if(3===w[0]&&(!g||w[1]>g[0]&&w[1]<g[3])){T.label=w[1];break}if(6===w[0]&&T.label<g[1]){T.label=g[1],g=w;break}if(g&&T.label<g[2]){T.label=g[2],T.ops.push(w);break}g[2]&&T.ops.pop(),T.trys.pop();continue}w=F.call(k,T)}catch(L){w=[6,L],p=0}finally{t=g=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([A,M])}}};Object.defineProperty(S,"__esModule",{value:!0}),S.downscaleImage=void 0,S.downscaleImage=function(k,F,t,p,g,Z,T,y){return l(this,void 0,void 0,function(){var A,M,w,L,N,Q,te,q;return b(this,function(W){switch(W.label){case 0:return A=F.split(";")[0].split(":")[1],g=g||"image/jpeg",y=y||.7,(M=new Image).src=F,[4,new Promise(function(fe){M.onload=function(){fe()}})];case 1:return W.sent(),w=function(fe,Ie,Pe,_e){if(Pe&&_e&&fe<=Pe&&Ie<=_e)return[fe,Ie];if(Pe&&fe>Pe){var me=Pe,Te=Math.floor(Ie/fe*me);if(_e&&Te>_e){var Yt=_e;return[Math.floor(fe/Ie*Yt),Yt]}return[me,Te]}return _e&&Ie>_e?(Te=_e,[me=Math.floor(fe/Ie*Te),Te]):[Ie,fe]}(M.width,M.height,t,p),L=w[0],N=w[1],(Q=document.createElement("canvas")).width=L,Q.height=N,te=Q.getContext("2d"),"image/jpeg"===g&&(te.fillStyle="#FFFFFF",te.fillRect(0,0,M.width,M.height)),T?.includes(A)?[2,F]:(Z?.includes(A)&&(g=A),te.drawImage(M,0,0,L,N),q=Q.toDataURL(g,y),k.log("downscaling image...",{args:{dataUrl:F,maxWidth:t,maxHeight:p,imageType:g,ignoreImageTypes:T,keepImageTypes:Z,imageQuality:y},newHeight:N,newWidth:L}),[2,q])}})})}},function(J,S,R){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ConsoleLogger=void 0;var l=function(){function b(k,F){this.debug=k,this.suppressErrorLogging=F}return b.prototype.prefixString=function(){return"</> quill-image-compress: "},Object.defineProperty(b.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.prefixString()):function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"error",{get:function(){return this.suppressErrorLogging?function(){}:console.error.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"warn",{get:function(){return this.suppressErrorLogging?function(){}:console.warn.bind(console,this.prefixString())},enumerable:!1,configurable:!0}),b}();S.ConsoleLogger=l}])}}]);